---
title: "L’encodeur d’ESB JMS et les composants décodeur | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 4e5591c2-d2ca-4168-8026-059fe51dd588
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9f39f4ab1b0650a8ad6fa1ff35d62b4807995237
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="the-esb-jms-encoder-and-decoder-components"></a><span data-ttu-id="49dab-102">L’encodeur d’ESB JMS et les composants décodeur</span><span class="sxs-lookup"><span data-stu-id="49dab-102">The ESB JMS Encoder and Decoder Components</span></span>
<span data-ttu-id="49dab-103">Certaines solutions d’intégration impliquent Service JMS (Java Message) et les messages SOAP envoyés vers ou à partir d’IBM WebSphere MQ ; [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] comprend deux composants de pipeline JMS écrits en code managé pour une utilisation dans ces situations.</span><span class="sxs-lookup"><span data-stu-id="49dab-103">Some integration solutions involve Java Message Service (JMS) and SOAP messages sent to or from IBM WebSphere MQ; [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] includes two JMS pipeline components written in managed code for use in these situations.</span></span> <span data-ttu-id="49dab-104">Les composants de lire ou écrire la partie JMS de l’en-tête de message MQ en utilisant les valeurs des propriétés de contexte associées au message.</span><span class="sxs-lookup"><span data-stu-id="49dab-104">The components read or write the JMS portion of the MQ message header using the values of context properties associated with the message.</span></span> <span data-ttu-id="49dab-105">Actuellement, il n’y a plus de 60 différents types d’en-têtes JMS en cours d’utilisation avec les systèmes de WebSphere MQ Series ; les composants ESB JMS fonctionnent uniquement avec les en-têtes de MQRFH2.</span><span class="sxs-lookup"><span data-stu-id="49dab-105">Currently, there are more than 60 different types of JMS headers in use with WebSphere MQ Series systems; the ESB JMS components work only with MQRFH2 headers.</span></span>  
  
## <a name="installation"></a><span data-ttu-id="49dab-106">Installation</span><span class="sxs-lookup"><span data-stu-id="49dab-106">Installation</span></span>  
 <span data-ttu-id="49dab-107">L’installation du noyau ESB installe automatiquement les composants JMS encodeur et décodeur de JMS dans le dossier composants de Pipeline BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="49dab-107">Installing the ESB Core automatically installs the JMS Encoder and JMS Decoder components in the BizTalk Server Pipeline Components folder.</span></span>  
  
## <a name="how-it-works"></a><span data-ttu-id="49dab-108">Fonctionnement</span><span class="sxs-lookup"><span data-stu-id="49dab-108">How It Works</span></span>  
 <span data-ttu-id="49dab-109">Les composants de pipeline JMS inspecter les en-têtes de message et fonctionne uniquement sur les messages qui ont le **MQMD_Format** en-tête défini sur **RFH (MQRFH2)**.</span><span class="sxs-lookup"><span data-stu-id="49dab-109">The JMS pipeline components inspect the message headers and operate only on messages that have the **MQMD_Format** header set to **RFH (MQRFH2)**.</span></span> <span data-ttu-id="49dab-110">Toutefois, même si cette propriété est définie, les composants d’inspecter les en-têtes pour confirmer qu’ils ne sont pas conformes au format RFH2 d’IBM.</span><span class="sxs-lookup"><span data-stu-id="49dab-110">However, even when this property is set, the components inspect the headers to confirm that they do conform to the IBM RFH2 format.</span></span> <span data-ttu-id="49dab-111">Si l’en-tête n’est pas conforme à ce format, les composants de génèrent une erreur d’analyse qui indique le **MQMD_Format** paramètre a la valeur **RFH (MQRFH2)**, mais la structure de l’en-tête n’a pas respecté la norme RFH2.</span><span class="sxs-lookup"><span data-stu-id="49dab-111">If the header does not conform to this format, the components generate a parse error that indicates the **MQMD_Format** parameter was set to **RFH (MQRFH2)**, but the structure of the header did not comply with the RFH2 standard.</span></span> <span data-ttu-id="49dab-112">Si l’analyse de l’en-tête de message entrant échoue, le composant décodeur permet de transmettre le message, mais il définit une propriété de contexte de message nommée **MQRFH2_ParseError** à **True**.</span><span class="sxs-lookup"><span data-stu-id="49dab-112">If inbound message header parsing fails, the decoder component allows the message to pass, but it sets a message context property named **MQRFH2_ParseError** to **True**.</span></span>  
  
 <span data-ttu-id="49dab-113">Le **MQRFH2** schéma de propriété déployé dans BizTalk avec les composants JMS expose toutes les propriétés d’en-tête MQRFH2.</span><span class="sxs-lookup"><span data-stu-id="49dab-113">The **MQRFH2** property schema deployed in BizTalk with the JMS components exposes all of the MQRFH2 header properties.</span></span> <span data-ttu-id="49dab-114">Après la rétrogradation les en-têtes d’un message entrant, se trouvent les données à partir des en-têtes dans un document XML stocké dans le **MQRFH2_NameValueData** propriété de contexte du message.</span><span class="sxs-lookup"><span data-stu-id="49dab-114">After demoting the headers of an incoming message, the data from the headers resides in an XML document stored in the **MQRFH2_NameValueData** context property of the message.</span></span> <span data-ttu-id="49dab-115">L’encodeur ajuste la longueur de la **NameValueData** dossier pour s’assurer qu’elle est la longueur correcte.</span><span class="sxs-lookup"><span data-stu-id="49dab-115">The encoder adjusts the length of the **NameValueData** folder to ensure it is the correct length.</span></span> <span data-ttu-id="49dab-116">Pour comprendre l’utilisation de ces en-têtes et l’impact lorsque vous modifiez les valeurs, consultez la documentation IBM appropriée.</span><span class="sxs-lookup"><span data-stu-id="49dab-116">To understand the usage of these headers, and the impact when changing the values, review the appropriate IBM documentation.</span></span>  
  
## <a name="using-the-jms-encoder-and-decoder-components"></a><span data-ttu-id="49dab-117">À l’aide de l’encodeur JMS et les composants décodeur</span><span class="sxs-lookup"><span data-stu-id="49dab-117">Using the JMS Encoder and Decoder Components</span></span>  
 <span data-ttu-id="49dab-118">Pour utiliser les composants JMS encodeur et décodeur, les développeurs les ajoutent à des pipelines dans une application BizTalk.</span><span class="sxs-lookup"><span data-stu-id="49dab-118">To use the JMS Encoder and Decoder components, developers add them to pipelines in a BizTalk application.</span></span> <span data-ttu-id="49dab-119">Pour un pipeline d’envoi, le composant encodeur de JMS doit résider dans la phase de codage.</span><span class="sxs-lookup"><span data-stu-id="49dab-119">For a send pipeline, the JMS Encoder component should reside in the Encode stage.</span></span> <span data-ttu-id="49dab-120">Pour un pipeline de réception, le composant décodeur de JMS doit résider dans la phase de décodage.</span><span class="sxs-lookup"><span data-stu-id="49dab-120">For a receive pipeline, the JMS Decoder component should reside in the Decode stage.</span></span> <span data-ttu-id="49dab-121">Les composants JMS n’installera pas dans toutes les étapes d’un pipeline.</span><span class="sxs-lookup"><span data-stu-id="49dab-121">The JMS components will not install in any other stages of a pipeline.</span></span>  
  
 <span data-ttu-id="49dab-122">Lors de l’installation dans la phase de codage, le composant de JMS encodeur lit les valeurs dans le JMS **MQRFH2** les en-têtes et les écritures (promeut) dans les propriétés de contexte de message.</span><span class="sxs-lookup"><span data-stu-id="49dab-122">When installed in the Encode stage, the JMS Encoder component reads the values in the JMS **MQRFH2** headers and writes (promotes) them into the message context properties.</span></span> <span data-ttu-id="49dab-123">Lors de l’installation dans la phase de décodage, le composant décodeur de JMS lit (rétrograde) valeurs de la propriété de contexte et les insère dans le JMS **MQRFH2** en-têtes.</span><span class="sxs-lookup"><span data-stu-id="49dab-123">When installed in the Decode stage, the JMS Decoder component reads (demotes) the context property values and inserts them into the JMS **MQRFH2** headers.</span></span> <span data-ttu-id="49dab-124">Cela signifie que toutes les valeurs d’en-tête MQ sont disponibles en tant que propriétés de contexte du message dans le pipeline.</span><span class="sxs-lookup"><span data-stu-id="49dab-124">This means that all the MQ header values are available as context properties of the message in the pipeline.</span></span>  
  
 <span data-ttu-id="49dab-125">Pour détecter et gérer les erreurs de l’analyse des en-têtes, les développeurs peuvent inclure du code qui examine la valeur de la **MQRFH2_ParseError** propriété.</span><span class="sxs-lookup"><span data-stu-id="49dab-125">To detect and manage header-parsing errors, developers can include code that examines the value of the **MQRFH2_ParseError** property.</span></span> <span data-ttu-id="49dab-126">Elles peuvent implémenter un processus de récupération qui s’abonne aux messages ayant échoué ou spécifier des ports d’envoi qui filtre le **MQRFH2_ParseError** propriété pour conserver le message.</span><span class="sxs-lookup"><span data-stu-id="49dab-126">They can implement a recovery process that subscribes to failed messages or specify send ports that filter on the **MQRFH2_ParseError** property to persist the message.</span></span> <span data-ttu-id="49dab-127">Les abonnés qui fonctionnent avec les messages JMS doivent inclure une condition de filtre qui spécifie la valeur **False** pour le **MQRFH2_ParseError** propriété pour empêcher l’abonné à partir de la réception des messages Échec de l’en-tête de l’analyse de processus.</span><span class="sxs-lookup"><span data-stu-id="49dab-127">Subscribers that work with JMS messages should include a filter condition that specifies the value **False** for the **MQRFH2_ParseError** property to prevent the subscriber from receiving messages that failed the header parsing process.</span></span>  
  
 <span data-ttu-id="49dab-128">Les développeurs peuvent également mettre à jour les valeurs de propriété de contexte (par exemple, remplacez le **MQRFH2_Encoding** valeur de la propriété), et le composant reflète ces modifications dans les en-têtes de message MQ afin qu’ils sont définis lorsque le message arrive à sa destination finale.</span><span class="sxs-lookup"><span data-stu-id="49dab-128">Developers can also update the context property values (for example, change the **MQRFH2_Encoding** property value), and the component will reflect these changes in the MQ message headers so that they are set when the message arrives at its ultimate destination.</span></span> <span data-ttu-id="49dab-129">Le composant automatiquement ignore les valeurs non valides et définit les valeurs par défaut « sécurisée » où les en-têtes requis sont manquants.</span><span class="sxs-lookup"><span data-stu-id="49dab-129">The component automatically ignores invalid values and sets "safe" default values where required headers are missing.</span></span> <span data-ttu-id="49dab-130">Par exemple, si le développeur spécifie une valeur non valide pour le **MQRFH2_Encoding** propriété, le message sortant a la **MQRFH2_Encoding** en-tête défini sur **inconnu**.</span><span class="sxs-lookup"><span data-stu-id="49dab-130">For example, if the developer specifies an invalid value for the **MQRFH2_Encoding** property, the outbound message will have the **MQRFH2_Encoding** header set to **UNKNOWN**.</span></span> <span data-ttu-id="49dab-131">Si le développeur supprime une valeur d’une propriété de contexte, mais la **MQMD_Format** est toujours définie sur **RFH**, le composant ajoutera un en-tête qui contient la valeur par défaut, conformément à la spécification d’IBM.</span><span class="sxs-lookup"><span data-stu-id="49dab-131">If the developer removes a value from a context property, but the **MQMD_Format** property is still set to **RFH**, the component will add a header containing the default value, as per the IBM specification.</span></span>  
  
 <span data-ttu-id="49dab-132">Pour obtenir un exemple d’utilisation de ces composants, consultez [installer et exécuter l’exemple de composant JMS MQRFH2](../esb-toolkit/installing-and-running-the-jms-mqrfh2-component-sample.md).</span><span class="sxs-lookup"><span data-stu-id="49dab-132">For an example of how to use these components, see [Installing and Running the JMS MQRFH2 Component Sample](../esb-toolkit/installing-and-running-the-jms-mqrfh2-component-sample.md).</span></span>