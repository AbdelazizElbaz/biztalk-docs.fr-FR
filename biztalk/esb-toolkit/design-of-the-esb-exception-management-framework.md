---
title: "Conception de l’infrastructure de gestion d’Exception ESB | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: cfc2688c-c01c-4244-9e35-3d482135d8b7
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 089942c8b531575c157c0037777e85fe6d8608a7
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/01/2017
---
# <a name="design-of-the-esb-exception-management-framework"></a><span data-ttu-id="82899-102">Conception de l’infrastructure de gestion d’Exception ESB</span><span class="sxs-lookup"><span data-stu-id="82899-102">Design of the ESB Exception Management Framework</span></span>
<span data-ttu-id="82899-103">Cohérentes et réutilisables des modèles pour la gestion des exceptions sont un facteur important de noyaux d’un projet de développement ; ils aident à optimiser la facilité de maintenance et en faciliter la prise en charge de l’application après le déploiement.</span><span class="sxs-lookup"><span data-stu-id="82899-103">Consistent and re-usable patterns for managing exceptions are a core consideration of any development project; they help to maximize maintainability and make it easier to support the application after deployment.</span></span>  
  
 <span data-ttu-id="82899-104">Une application BizTalk de type peut utiliser les fonctionnalités de messagerie BizTalk, si vous le souhaitez démarrer une orchestration de traitement, appeler le moteur de règles d’entreprise, interagir avec plusieurs line-of-business (LOB) ou une ressource d’entreprise (ERP) systèmes et retourner un réponse à un système tiers distinct.</span><span class="sxs-lookup"><span data-stu-id="82899-104">A typical BizTalk application might use the BizTalk messaging features, optionally start processing an orchestration, call the Business Rule Engine, interact with several line-of-business (LOB) or enterprise resource planning (ERP) systems, and return a response to a separate third-party system.</span></span> <span data-ttu-id="82899-105">En outre, l’emplacement d’exécution de ces composants, y compris les sous-systèmes de BizTalk, peut-être résider sur un ou plusieurs serveurs répartis dans l’environnement actuel.</span><span class="sxs-lookup"><span data-stu-id="82899-105">In addition, the run-time location of these components, including the BizTalk subsystems, may reside on one or more servers distributed throughout the current environment.</span></span> <span data-ttu-id="82899-106">Ceci est un scénario classique et requiert le système pour prendre en charge les intercepter et les rapports d’exceptions qui peuvent se produire dans les ESB ou BizTalk découplées sous-systèmes ou dans les différents systèmes métier tiers, chacune ayant ses propres contraintes d’exceptions.</span><span class="sxs-lookup"><span data-stu-id="82899-106">This is a typical scenario and requires the system to support catching and reporting exceptions that may occur in any of the ESB or BizTalk decoupled subsystems or in the various third-party LOB systems, each of which has its own exception handling constraints.</span></span> <span data-ttu-id="82899-107">Par exemple, le macroordinateur peut rejeter une commande envoyée à partir d’un site Web pendant un cycle de traitement normal. le site Web doit compenser cette erreur et informer l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="82899-107">For example, the mainframe may reject an order sent from a Web site during a normal processing cycle; the Web site must compensate for this error and notify the user.</span></span>  
  
 <span data-ttu-id="82899-108">En raison de la complexité des applications d’ESB et leur environnement, le développement d’une solution cohérente pour la gestion des exceptions application doit sont basées sur les objectifs de conception courants suivants :</span><span class="sxs-lookup"><span data-stu-id="82899-108">Because of the complexity of ESB applications and their environment, development of a consistent solution for application exception management should embody the following common design goals:</span></span>  
  
-   <span data-ttu-id="82899-109">Fournir une approche standardisée de détection et la gestion des exceptions qui se produisent dans l’environnement BizTalk Server (autrement dit, dans les sous-systèmes de messagerie et d’orchestration).</span><span class="sxs-lookup"><span data-stu-id="82899-109">Provide a standardized approach for detecting and handling exceptions that occur in the BizTalk Server environment (that is, in the messaging and orchestration subsystems).</span></span>  
  
-   <span data-ttu-id="82899-110">Fournir des modèles courants qui autorisent les processus automatisés réagir à et de gérer les exceptions d’application.</span><span class="sxs-lookup"><span data-stu-id="82899-110">Provide common patterns that allow automated processes to react to and manage application exceptions.</span></span>  
  
-   <span data-ttu-id="82899-111">Fournissent un modèle de gestion d’exception faiblement couplées qui facilite la réutilisation.</span><span class="sxs-lookup"><span data-stu-id="82899-111">Provide a loosely coupled exception management pattern that facilitates reuse.</span></span>  
  
-   <span data-ttu-id="82899-112">Fournissent un mécanisme de création de rapports commun pour les exceptions d’application et de leurs États de message disponibles qui peuvent s’appliquer à n’importe quel sous-système de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="82899-112">Provide a common reporting mechanism for application exceptions and their available message states that can apply to any BizTalk subsystem.</span></span>  
  
 <span data-ttu-id="82899-113">Pour comprendre pourquoi le [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] fournit un mécanisme d’erreur personnalisés, à savoir l’infrastructure de gestion des exceptions, et comment il fonctionne, il est nécessaire de comprendre les fonctionnalités de gestion des exceptions disponibles dans BizTalk Server et pourquoi ces fonctionnalités ne sont pas entièrement capable de satisfaire les objectifs de conception précédent.</span><span class="sxs-lookup"><span data-stu-id="82899-113">To understand why the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] provides a custom error mechanism, namely the Exception Management Framework, and how it works, it is necessary to understand the exception management features available in BizTalk Server and why these features are not fully capable of meeting the preceding design goals.</span></span>  
  
## <a name="biztalk-server-exception-reporting"></a><span data-ttu-id="82899-114">Rapports d’exceptions BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="82899-114">BizTalk Server Exception Reporting</span></span>  
 <span data-ttu-id="82899-115">BizTalk Server prend en charge l’exception suivante, la gestion et de mécanismes de notification :</span><span class="sxs-lookup"><span data-stu-id="82899-115">BizTalk Server supports the following exception handling and reporting mechanisms:</span></span>  
  
-   <span data-ttu-id="82899-116">Routage des messages ayant échoué</span><span class="sxs-lookup"><span data-stu-id="82899-116">Failed Message Routing</span></span>  
  
-   <span data-ttu-id="82899-117">Console Administration de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="82899-117">BizTalk Server Administration Console</span></span>  
  
-   <span data-ttu-id="82899-118">Journal des événements Microsoft</span><span class="sxs-lookup"><span data-stu-id="82899-118">Microsoft Event Log</span></span>  
  
-   <span data-ttu-id="82899-119">Options de développement personnalisé</span><span class="sxs-lookup"><span data-stu-id="82899-119">Custom development options</span></span>  
  
 <span data-ttu-id="82899-120">Par défaut, les fonctionnalités de BizTalk Server pour la gestion des exceptions dépendent beaucoup l’intervention de l’opérateur.</span><span class="sxs-lookup"><span data-stu-id="82899-120">By default, BizTalk Server's capabilities for handling exceptions rely a great deal on operator intervention.</span></span> <span data-ttu-id="82899-121">Par exemple, considérons la situation où un utilisateur envoie un message à BizTalk Server qui lève une exception pendant l’étape de validation.</span><span class="sxs-lookup"><span data-stu-id="82899-121">For example, consider the situation where a user submits a message to BizTalk Server that causes an exception during the validation stage.</span></span> <span data-ttu-id="82899-122">Par défaut, le message est publié dans la base de données MessageBox, où il est routé vers une file d’attente suspendue.</span><span class="sxs-lookup"><span data-stu-id="82899-122">By default, the message is published to the Message Box database, where it is routed to a suspended queue.</span></span> <span data-ttu-id="82899-123">Cela signifie qu’un opérateur doit effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="82899-123">This means that an operator must do the following:</span></span>  
  
-   <span data-ttu-id="82899-124">Indépendamment de détecter qu’une exception s’est produite.</span><span class="sxs-lookup"><span data-stu-id="82899-124">Independently detect that an exception occurred.</span></span>  
  
-   <span data-ttu-id="82899-125">Enregistrer manuellement le message ayant échoué sur le disque à l’aide de la Console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="82899-125">Manually save the failed message to disk using the BizTalk Server Administration Console.</span></span>  
  
-   <span data-ttu-id="82899-126">Manuellement, modifier et corriger le message et renvoyez-le au système.</span><span class="sxs-lookup"><span data-stu-id="82899-126">Manually edit and correct the message and re-submit it to the system.</span></span> <span data-ttu-id="82899-127">Dans certains cas, ce processus présente un risque de perdre des informations de contexte importantes.</span><span class="sxs-lookup"><span data-stu-id="82899-127">In some instances, this process has the potential for losing important context information.</span></span>  
  
 <span data-ttu-id="82899-128">Pour résoudre ces problèmes, BizTalk Server fournit le mécanisme de routage des messages a échoué.</span><span class="sxs-lookup"><span data-stu-id="82899-128">To resolve these issues, BizTalk Server provides the Failed Message Routing mechanism.</span></span> <span data-ttu-id="82899-129">Les développeurs et administrateurs cela utiliser pour créer des processus d’orchestration ou de messagerie des ports d’envoi configurés pour s’abonner à toutes les exceptions qui se produisent dans le sous-système de messagerie.</span><span class="sxs-lookup"><span data-stu-id="82899-129">Developers and administrators can use this to create orchestration processes or messaging send ports configured to subscribe to any exceptions that occur in the messaging subsystem.</span></span> <span data-ttu-id="82899-130">Cela fournit une détection automatique des erreurs et le mécanisme de routage qui conserve l’état du message d’origine et qui résout le problème de détection d’exceptions.</span><span class="sxs-lookup"><span data-stu-id="82899-130">This provides an automated error-detection and routing mechanism that preserves the original message state and solves the problem of detecting exceptions.</span></span>  
  
 <span data-ttu-id="82899-131">Étant donné que le routage automatique des messages ayant échoué n’est fourni que pour les processus d’orchestration, le développeur doit tenir compte des erreurs en ajoutant des blocs de gestionnaire d’exception pour les formes d’orchestration étendue.</span><span class="sxs-lookup"><span data-stu-id="82899-131">Because automatic failed message routing is not provided for orchestration processes, the developer must account for errors by adding exception handler blocks to orchestration scope shapes.</span></span> <span data-ttu-id="82899-132">Avec cette solution, chaque orchestration peut avoir sa propre gestion des exceptions, mais il n’existe aucun mécanisme de réutilisation des fonctionnalités sur plusieurs orchestrations de gestion des exceptions.</span><span class="sxs-lookup"><span data-stu-id="82899-132">With this solution, each orchestration can have its own exception handling, but there is no mechanism for reusing exception handling functionality across multiple orchestrations.</span></span>  
  
 <span data-ttu-id="82899-133">Cela signifie qu’il existe désormais deux manières très différentes, dans laquelle les exceptions de messagerie sont traitées et gérées dans un système BizTalk Server et une troisième méthode dans quelle orchestration exceptions sont traitées.</span><span class="sxs-lookup"><span data-stu-id="82899-133">This means that there are now two very different ways in which messaging exceptions are processed and managed in a BizTalk Server system, and a third way in which orchestration exceptions are processed.</span></span> <span data-ttu-id="82899-134">Par conséquent, les développeurs doivent personnaliser mécanisme en fonction de leurs propres spécifications s’ils souhaitent mettre en œuvre d’un système qui correspond aux critères décrits précédemment dans cette section de la gestion des exceptions.</span><span class="sxs-lookup"><span data-stu-id="82899-134">Therefore, developers must customize the exception handling mechanism to suit their own requirements if they want to implement a system that matches the requirements described earlier in this section.</span></span>  
  
## <a name="biztalk-server-administration-console"></a><span data-ttu-id="82899-135">Console Administration de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="82899-135">BizTalk Server Administration Console</span></span>  
 <span data-ttu-id="82899-136">La Console Administration de BizTalk Server fournit un ensemble de pages de vue d’ensemble du groupe, appelé le Hub du groupe BizTalk.</span><span class="sxs-lookup"><span data-stu-id="82899-136">The BizTalk Server Administration Console provides a set of Group Overview pages, referred to as the BizTalk Group Hub.</span></span> <span data-ttu-id="82899-137">À l’aide de ces pages, les administrateurs peuvent interroger pour les messages suspendus et les exceptions groupées par application, nom du service, code d’erreur ou un URI, comme indiqué dans la Figure 1.</span><span class="sxs-lookup"><span data-stu-id="82899-137">Using these pages, administrators can query for suspended messages and exceptions grouped by application, service name, error code, or URI, as shown in Figure 1.</span></span>  
  
 <span data-ttu-id="82899-138">![Console d’administration](../esb-toolkit/media/ch4-adminconsole.gif "chapitre 4-AdminConsole")</span><span class="sxs-lookup"><span data-stu-id="82899-138">![Admin Console](../esb-toolkit/media/ch4-adminconsole.gif "Ch4-AdminConsole")</span></span>  
  
 <span data-ttu-id="82899-139">**Figure 1**</span><span class="sxs-lookup"><span data-stu-id="82899-139">**Figure 1**</span></span>  
  
 <span data-ttu-id="82899-140">**Les pages de vue d’ensemble du groupe de Console Administration BizTalk Server**</span><span class="sxs-lookup"><span data-stu-id="82899-140">**The BizTalk Server Administration Console Group Overview pages**</span></span>  
  
 <span data-ttu-id="82899-141">Bien que la fonctionnalité de vue d’ensemble du groupe fournit une interface utilisateur commune pour afficher les exceptions, les vues sont limitées à des instances de service « live ».</span><span class="sxs-lookup"><span data-stu-id="82899-141">Although the Group Overview feature provides a common user interface to view exceptions, the views are limited to "live" service instances.</span></span> <span data-ttu-id="82899-142">Examiner l’état peut être une tâche fastidieuse, car les administrateurs doivent descendre dans l’arborescence à chaque élément.</span><span class="sxs-lookup"><span data-stu-id="82899-142">Examining the state can be a cumbersome task because administrators must drill down through the tree to each item.</span></span> <span data-ttu-id="82899-143">En outre, plusieurs autres facteurs limitent les fonctionnalités de la Console Administration de BizTalk Server comme outil de rapport d’exception d’application :</span><span class="sxs-lookup"><span data-stu-id="82899-143">In addition, several other factors limit the BizTalk Server Administration Console capabilities as an application exception-reporting tool:</span></span>  
  
-   <span data-ttu-id="82899-144">Il n’existe aucune fonctionnalité d’exploration de données business intelligence.</span><span class="sxs-lookup"><span data-stu-id="82899-144">There is no capability for mining the data for business intelligence.</span></span> <span data-ttu-id="82899-145">Par exemple, vous ne peut pas interroger pour les applications le pire des cas qui posent problème sur une base mensuelle ou examiner les tendances de tous les trimestres pour les exceptions d’application.</span><span class="sxs-lookup"><span data-stu-id="82899-145">For example, you cannot query for the worst offending applications on a monthly basis or examine quarterly trends for application exceptions.</span></span>  
  
-   <span data-ttu-id="82899-146">L’entreprise peut-être nécessiter des alertes à déclencher lorsque certaines exceptions d’application se produisent ou moment d’atteindre des seuils spécifiques, mais il n’existe aucune fonctionnalité pour vous abonner à ces types d’événements d’exception.</span><span class="sxs-lookup"><span data-stu-id="82899-146">The business may require alerts to be raised when certain application exceptions occur or when reaching specific thresholds, but there is no facility to subscribe to these types of exception events.</span></span>  
  
-   <span data-ttu-id="82899-147">La Console MMC (Microsoft Management Console) que la Console d’Administration utilise en tant que son interface utilisateur mécanisme (d’interface utilisateur) n’est pas une interface idéale, et il n’est pas toujours pratique accéder aux environnements de production.</span><span class="sxs-lookup"><span data-stu-id="82899-147">The Microsoft Management Console (MMC) that the Administration Console uses as its user interface (UI) mechanism is not an ideal interface, and it is not always convenient to access in production environments.</span></span> <span data-ttu-id="82899-148">Au minimum, il requiert que les utilisateurs soient membres du rôle opérateurs BizTalk ; et, dans les environnements de production, l’accès à la console MMC n’est possible que via les services Terminal Server.</span><span class="sxs-lookup"><span data-stu-id="82899-148">At minimum, it requires users to be members of the BizTalk Operators role; and, in production environments, access to the MMC is usually only possible through Terminal Server.</span></span>  
  
-   <span data-ttu-id="82899-149">La console affiche uniquement les exceptions (instances de service suspendues) non gérées.</span><span class="sxs-lookup"><span data-stu-id="82899-149">The console displays only unhandled exceptions (suspended service instances).</span></span> <span data-ttu-id="82899-150">Si le développeur gère l’exception dans l’orchestration, l’orchestration à se terminer normalement, les informations sur les exceptions n’apparaîtront jamais dans la Console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="82899-150">If the developer handles the exception in the orchestration, allowing the orchestration to complete normally, the exception information will never appear in the Administration Console.</span></span>  
  
 <span data-ttu-id="82899-151">Le [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] traite ces limitations par le biais du mécanisme d’ESB Échec de l’Orchestration Exception routage.</span><span class="sxs-lookup"><span data-stu-id="82899-151">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] addresses these limitations through the ESB Failed Orchestration Exception Routing mechanism.</span></span> <span data-ttu-id="82899-152">Cela s’apparente le mécanisme de routage des messages d’échec de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="82899-152">This closely resembles the Failed Message Routing mechanism of BizTalk Server.</span></span> <span data-ttu-id="82899-153">En outre, le [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] inclut un composant de pipeline dans un port d’envoi qui s’abonne aux messages générés à partir du mécanisme ESB Échec de l’Orchestration Exception routage et le mécanisme de routage des messages a échoué et normalise les.</span><span class="sxs-lookup"><span data-stu-id="82899-153">In addition, the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] includes a pipeline component in a send port that subscribes to messages generated from both the ESB Failed Orchestration Exception Routing mechanism and the Failed Message Routing mechanism and normalizes them.</span></span>  
  
 <span data-ttu-id="82899-154">L’infrastructure de gestion d’Exception ESB tire parti d’autres fonctionnalités dans BizTalk Server, telles que le modèle d’abonnement et sur des événements d’analyse BAM (Business Activity).</span><span class="sxs-lookup"><span data-stu-id="82899-154">The ESB Exception Management Framework takes advantage of other features in BizTalk Server, such as the subscription model, and event-based Business Activity Monitoring (BAM).</span></span> <span data-ttu-id="82899-155">Cela signifie que l’infrastructure de gestion d’Exception ESB peut suivre les points de données d’exception avec BAM, puis les publier sur le portail BAM de BizTalk pour l’analyse.</span><span class="sxs-lookup"><span data-stu-id="82899-155">This means that the ESB Exception Management Framework can track the exception data points with BAM, and then publish them to the BizTalk BAM Portal for monitoring.</span></span>