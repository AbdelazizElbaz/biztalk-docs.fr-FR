---
title: Le Pipeline ESB erreur | Documents Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a57752b1-8bca-4534-9e5b-7ce721a9490a
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ebd9a6cecf5353ab72cea0d67b06f3402fc1716a
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="the-esb-fault-processor-pipeline"></a><span data-ttu-id="dd911-102">Le Pipeline ESB erreur</span><span class="sxs-lookup"><span data-stu-id="dd911-102">The ESB Fault Processor Pipeline</span></span>
<span data-ttu-id="dd911-103">Le [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] installe un port d’envoi nommé tous. Les exceptions qui utilise le ESBFaultProcessor pipeline d’envoi.</span><span class="sxs-lookup"><span data-stu-id="dd911-103">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] installs a send port named ALL.Exceptions that uses the ESBFaultProcessor send pipeline.</span></span> <span data-ttu-id="dd911-104">Figure 1 présente les propriétés de l’ensemble. Exceptions de port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="dd911-104">Figure 1 shows the properties of the ALL.Exceptions send port.</span></span>  
  
 <span data-ttu-id="dd911-105">![Port d’envoi de toutes les Exceptions](../esb-toolkit/media/ch4-allexceptionssendport.gif "AllExceptionsSendPort de chapitre 4")</span><span class="sxs-lookup"><span data-stu-id="dd911-105">![All Exceptions Send Port](../esb-toolkit/media/ch4-allexceptionssendport.gif "Ch4-AllExceptionsSendPort")</span></span>  
  
 <span data-ttu-id="dd911-106">**Figure 1**</span><span class="sxs-lookup"><span data-stu-id="dd911-106">**Figure 1**</span></span>  
  
 <span data-ttu-id="dd911-107">**La configuration de l’ensemble. Exceptions de port d’envoi, y compris son utilisation du pipeline ESBFaultProcessor**</span><span class="sxs-lookup"><span data-stu-id="dd911-107">**The configuration of the ALL.Exceptions send port, including its use of the ESBFaultProcessor pipeline**</span></span>  
  
 <span data-ttu-id="dd911-108">Le pipeline ESBFaultProcessor contient les composants suivants : ESB Exception encodeur, ESB analyse BAM (Business Activity) de mise hors tension et ESB transformer.</span><span class="sxs-lookup"><span data-stu-id="dd911-108">The ESBFaultProcessor pipeline contains the following pipeline components: ESB Exception Encoder, ESB Business Activity Monitoring (BAM) Tracker, and ESB Transform.</span></span>  
  
 <span data-ttu-id="dd911-109">Tous les. Exceptions de port s’abonne à tous les messages d’erreur ESB et à tous les messages générés par le mécanisme de routage des messages a échoué BizTalk d’envoi.</span><span class="sxs-lookup"><span data-stu-id="dd911-109">The ALL.Exceptions send port subscribes to all ESB fault messages and to all messages generated by the BizTalk Failed Message Routing mechanism.</span></span> <span data-ttu-id="dd911-110">Figure 2 illustre le filtre de l’ensemble des paramètres de propriété. Exceptions de port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="dd911-110">Figure 2 shows the filter property settings of the ALL.Exceptions send port.</span></span>  
  
 <span data-ttu-id="dd911-111">![Filtre de Port d’envoi](../esb-toolkit/media/ch4-filtersendport.gif "FilterSendPort de chapitre 4")</span><span class="sxs-lookup"><span data-stu-id="dd911-111">![Filter Send Port](../esb-toolkit/media/ch4-filtersendport.gif "Ch4-FilterSendPort")</span></span>  
  
 <span data-ttu-id="dd911-112">**Figure 2**</span><span class="sxs-lookup"><span data-stu-id="dd911-112">**Figure 2**</span></span>  
  
 <span data-ttu-id="dd911-113">**La propriété filter de l’ensemble. Exceptions de port définit l’abonnement de port d’envoi**</span><span class="sxs-lookup"><span data-stu-id="dd911-113">**The filter property of the ALL.Exceptions send port defines the port subscription**</span></span>  
  
## <a name="the-fault-processor-pipeline-exception-encoder-component"></a><span data-ttu-id="dd911-114">Le composant encodeur erreur processeur Pipeline (Exception)</span><span class="sxs-lookup"><span data-stu-id="dd911-114">The Fault Processor Pipeline Exception Encoder Component</span></span>  
 <span data-ttu-id="dd911-115">Le composant de pipeline encodeur d’Exception ESB normalise les messages d’erreur dans le mécanisme d’ESB Échec de l’Orchestration Exception routage et le mécanisme de routage des messages a échoué BizTalk en canoniques messages conformes à la déclaration d’Exception ESB schéma.</span><span class="sxs-lookup"><span data-stu-id="dd911-115">The ESB Exception Encoder pipeline component normalizes fault messages generated in the ESB Failed Orchestration Exception Routing mechanism and the BizTalk Failed Message Routing mechanism into canonical messages that comply with the ESB Exception Reporting schema.</span></span>  
  
 <span data-ttu-id="dd911-116">Pour une exception d’échec du routage des exceptions d’Orchestration, le composant enrichit et sérialise toutes les propriétés de message d’erreur, les messages XLANG, les propriétés de contexte, et **System.Exception** informations dans un message XML.</span><span class="sxs-lookup"><span data-stu-id="dd911-116">For a Failed Orchestration Exception Routing exception, the component enriches and serializes all fault message properties, XLANG messages, context properties, and **System.Exception** information into an XML message.</span></span>  
  
 <span data-ttu-id="dd911-117">Pour une exception d’échec de routage des messages, le composant enrichit les données en ajoutant le nom de l’application et les autres propriétés ambiantes, et elle s’applique à l’espace de noms du schéma pour le contenu du message XML sortant.</span><span class="sxs-lookup"><span data-stu-id="dd911-117">For a Failed Message Routing exception, the component enriches the data by adding the application name and other ambient properties, and it applies the schema namespace to the outbound XML message content.</span></span>  
  
 <span data-ttu-id="dd911-118">Si vous le souhaitez, le composant de pipeline encodeur d’Exception ESB peut s’appliquent également Microsoft InfoPath dans le message sortant, les instructions de traitement.</span><span class="sxs-lookup"><span data-stu-id="dd911-118">Optionally, the ESB Exception Encoder pipeline component can also apply Microsoft InfoPath processing instructions to the outbound message.</span></span> <span data-ttu-id="dd911-119">Vous pouvez modifier les instructions InfoPath en définissant les propriétés du composant de pipeline en mode Création.</span><span class="sxs-lookup"><span data-stu-id="dd911-119">You can modify the InfoPath instructions by setting the properties of the pipeline component in design view.</span></span> <span data-ttu-id="dd911-120">Les propriétés de temps de trois conception suivants affectent le comportement d’exécution du composant de pipeline encodeur d’Exception ESB :</span><span class="sxs-lookup"><span data-stu-id="dd911-120">The following three design time properties affect the run-time behavior of the ESB Exception Encoder pipeline component:</span></span>  
  
-   <span data-ttu-id="dd911-121">**EscapeCDATA.**</span><span class="sxs-lookup"><span data-stu-id="dd911-121">**EscapeCDATA.**</span></span> <span data-ttu-id="dd911-122">Cette propriété détermine si le composant échappe les **CDATA** sections trouvées dans persistant messages afin que InfoPath permettre les afficher correctement.</span><span class="sxs-lookup"><span data-stu-id="dd911-122">This property determines whether the component will escape any **CDATA** sections found in persisted messages so that InfoPath can display them correctly.</span></span>  
  
-   <span data-ttu-id="dd911-123">**FaultDocumentNamespace.**</span><span class="sxs-lookup"><span data-stu-id="dd911-123">**FaultDocumentNamespace.**</span></span> <span data-ttu-id="dd911-124">Cette propriété a la valeur par défaut **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span><span class="sxs-lookup"><span data-stu-id="dd911-124">This property has a default value of **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span></span> <span data-ttu-id="dd911-125">Ce paramètre peut être modifié pour utiliser un espace de noms sortant personnalisé pour les messages persistants.</span><span class="sxs-lookup"><span data-stu-id="dd911-125">This can be modified to use a custom outbound namespace for the persisted messages.</span></span>  
  
-   <span data-ttu-id="dd911-126">**ProcessingInstruction.**</span><span class="sxs-lookup"><span data-stu-id="dd911-126">**ProcessingInstruction.**</span></span> <span data-ttu-id="dd911-127">Cette propriété peut contenir toute instruction de traitement InfoPath qui est conforme au schéma d’erreur ESB rapports d’exceptions.</span><span class="sxs-lookup"><span data-stu-id="dd911-127">This property can contain any InfoPath processing instruction that complies with the ESB Exception Reporting fault schema.</span></span> <span data-ttu-id="dd911-128">La [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] inclut un modèle InfoPath qui est conforme à l’instruction de traitement suivante.</span><span class="sxs-lookup"><span data-stu-id="dd911-128">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] includes an InfoPath template that conforms to the following processing instruction.</span></span>  
  
    ```  
    <?mso-infoPathSolution solutionVersion="1.0.0.346" productVersion="11.0.6565"  
    PIVersion="1.0.0.0"   
    href=file:///\\localhost\publish\Microsoft.Practices.ESB.ExceptionHandling.InfoPath.Reporting.xsn  
    name="urn:schemas-microsoft-com:office:infopath:  
    Microsoft-Practices-ESB-ExceptionHandling-InfoPath-Reporting:  
    http---schemas-microsoft-biztalk-practices-esb-com-exceptionhandling"  
    language="en-us" ?><?mso-application progid="InfoPath.Document"?>  
    ```  
  
## <a name="the-fault-processor-pipeline-bam-tracker-component"></a><span data-ttu-id="dd911-129">Le composant de mise hors tension de pannes processeur Pipeline BAM</span><span class="sxs-lookup"><span data-stu-id="dd911-129">The Fault Processor Pipeline BAM Tracker Component</span></span>  
 <span data-ttu-id="dd911-130">Le composant de pipeline du dispositif de suivi BAM ESB reçoit le message à partir du composant ESB Exception encodeur et écrit des données de l’erreur sélectionnée dans les tables d’importation principale BAM créés pendant l’installation de l’infrastructure de gestion d’Exception ESB.</span><span class="sxs-lookup"><span data-stu-id="dd911-130">The ESB BAM Tracker pipeline component receives the message from the ESB Exception Encoder component and writes selected fault data to the BAM primary import tables created during the installation of the ESB Exception Management Framework.</span></span>  
  
 <span data-ttu-id="dd911-131">Le composant BAM de la mise hors tension ESB utilise le **GetEventStream** méthode du contexte de pipeline pour ajouter les champs suivants en tant qu’un enregistrement d’activité à la base de données d’importation principale BAM :</span><span class="sxs-lookup"><span data-stu-id="dd911-131">The ESB BAM Tracker component uses the **GetEventStream** method of the pipeline context to add the following fields as an activity record to the BAM Primary Import database:</span></span>  
  
-   <span data-ttu-id="dd911-132">**Application**</span><span class="sxs-lookup"><span data-stu-id="dd911-132">**Application**</span></span>  
  
-   <span data-ttu-id="dd911-133">**Description**</span><span class="sxs-lookup"><span data-stu-id="dd911-133">**Description**</span></span>  
  
-   <span data-ttu-id="dd911-134">**FaultSeverity**</span><span class="sxs-lookup"><span data-stu-id="dd911-134">**FaultSeverity**</span></span>  
  
-   <span data-ttu-id="dd911-135">**ServiceName**</span><span class="sxs-lookup"><span data-stu-id="dd911-135">**ServiceName**</span></span>  
  
-   <span data-ttu-id="dd911-136">**ErrorType**</span><span class="sxs-lookup"><span data-stu-id="dd911-136">**ErrorType**</span></span>  
  
-   <span data-ttu-id="dd911-137">**FaultCode**</span><span class="sxs-lookup"><span data-stu-id="dd911-137">**FaultCode**</span></span>  
  
-   <span data-ttu-id="dd911-138">**MachineName**</span><span class="sxs-lookup"><span data-stu-id="dd911-138">**MachineName**</span></span>  
  
-   <span data-ttu-id="dd911-139">**MessageID**</span><span class="sxs-lookup"><span data-stu-id="dd911-139">**MessageID**</span></span>  
  
-   <span data-ttu-id="dd911-140">**DateTime**</span><span class="sxs-lookup"><span data-stu-id="dd911-140">**DateTime**</span></span>  
  
-   <span data-ttu-id="dd911-141">**FaultDescription**</span><span class="sxs-lookup"><span data-stu-id="dd911-141">**FaultDescription**</span></span>  
  
-   <span data-ttu-id="dd911-142">**Portée**</span><span class="sxs-lookup"><span data-stu-id="dd911-142">**Scope**</span></span>  
  
-   <span data-ttu-id="dd911-143">**FailureCategory**</span><span class="sxs-lookup"><span data-stu-id="dd911-143">**FailureCategory**</span></span>  
  
-   <span data-ttu-id="dd911-144">**FaultGenerator**</span><span class="sxs-lookup"><span data-stu-id="dd911-144">**FaultGenerator**</span></span>  
  
-   <span data-ttu-id="dd911-145">**ServiceInstanceID**</span><span class="sxs-lookup"><span data-stu-id="dd911-145">**ServiceInstanceID**</span></span>  
  
 <span data-ttu-id="dd911-146">Le composant de dispositif de suivi BAM ESB utilise l’identificateur de message (le **MessageID** propriété) la valeur du message d’erreur ESB en tant qu’ID d’activité BAM.</span><span class="sxs-lookup"><span data-stu-id="dd911-146">The ESB BAM Tracker component uses the message identifier (the **MessageID** property) value of the ESB fault message as the BAM activity ID.</span></span> <span data-ttu-id="dd911-147">Le composant BAM de la mise hors tension ESB expose deux propriétés de temps de conception que vous pouvez définir pour modifier son comportement au moment de l’exécution :</span><span class="sxs-lookup"><span data-stu-id="dd911-147">The ESB BAM Tracker component exposes two design time properties that you can set to change its run-time behavior:</span></span>  
  
-   <span data-ttu-id="dd911-148">**Activé.**</span><span class="sxs-lookup"><span data-stu-id="dd911-148">**Enabled.**</span></span> <span data-ttu-id="dd911-149">Cette propriété détermine si le composant traitera le message et écrire dans la base de données BAM.</span><span class="sxs-lookup"><span data-stu-id="dd911-149">This property determines whether the component will process the message and write it to the BAM database.</span></span> <span data-ttu-id="dd911-150">Lorsque la valeur **False**, le composant transmet le message au composant suivant dans le pipeline.</span><span class="sxs-lookup"><span data-stu-id="dd911-150">When set to **False**, the component just sends the message to the next component in the pipeline.</span></span>  
  
-   <span data-ttu-id="dd911-151">**FaultDocumentNamespace.**</span><span class="sxs-lookup"><span data-stu-id="dd911-151">**FaultDocumentNamespace.**</span></span> <span data-ttu-id="dd911-152">Cette propriété a la valeur par défaut **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span><span class="sxs-lookup"><span data-stu-id="dd911-152">This property has a default value of **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span></span>  
  
## <a name="the-fault-processor-pipeline-transform-component"></a><span data-ttu-id="dd911-153">Transformer le composant Pipeline du processeur de pannes</span><span class="sxs-lookup"><span data-stu-id="dd911-153">The Fault Processor Pipeline Transform Component</span></span>  
 <span data-ttu-id="dd911-154">Le pipeline ESB erreur utilise le composant de pipeline ESB transformer pour exécuter un mappage BizTalk qui convertit le message d’erreur ESB codé dans un format qui correspond au schéma de l’adaptateur SQL de BizTalk (ExceptionSql.xsd).</span><span class="sxs-lookup"><span data-stu-id="dd911-154">The ESB Fault Processor pipeline uses the ESB Transform pipeline component to execute a BizTalk map that translates the encoded ESB fault message into a format that matches the schema for the BizTalk SQL Adapter (ExceptionSql.xsd).</span></span> <span data-ttu-id="dd911-155">Le composant transmet alors le message transformé à l’adaptateur SQL, qui insère le message d’erreur ESB dans la base de données du portail de gestion ESB.</span><span class="sxs-lookup"><span data-stu-id="dd911-155">The component then passes the transformed message to the SQL Adapter, which inserts the ESB fault message into the ESB Management Portal database.</span></span>  
  
 <span data-ttu-id="dd911-156">Le composant de pipeline ESB transformer expose trois propriétés au moment du design qui peuvent être modifiées pour modifier son comportement au moment de l’exécution :</span><span class="sxs-lookup"><span data-stu-id="dd911-156">The ESB Transform pipeline component exposes three design-time properties that can be modified to change its run-time behavior:</span></span>  
  
-   <span data-ttu-id="dd911-157">**Activé.**</span><span class="sxs-lookup"><span data-stu-id="dd911-157">**Enabled.**</span></span> <span data-ttu-id="dd911-158">Cette propriété Active ou désactive le composant.</span><span class="sxs-lookup"><span data-stu-id="dd911-158">This property enables or disables the component.</span></span>  
  
-   <span data-ttu-id="dd911-159">**Valider.**</span><span class="sxs-lookup"><span data-stu-id="dd911-159">**Validate.**</span></span> <span data-ttu-id="dd911-160">Cette propriété spécifie si un message doit être validée.</span><span class="sxs-lookup"><span data-stu-id="dd911-160">This property specifies whether a message needs to be validated.</span></span>  
  
-   <span data-ttu-id="dd911-161">**MapName.**</span><span class="sxs-lookup"><span data-stu-id="dd911-161">**MapName.**</span></span> <span data-ttu-id="dd911-162">Cette propriété contient le nom de la carte doit être exécutée pour traduire le message pour le stockage dans la base de données du portail de gestion ESB.</span><span class="sxs-lookup"><span data-stu-id="dd911-162">This property contains the name of the map that must be executed to translate the message for storage in the ESB Management Portal database.</span></span> <span data-ttu-id="dd911-163">Voici la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="dd911-163">The following is the default value.</span></span>  
  
    ```  
    Microsoft.Practices.ESB.ExceptionHandling.Maps.FaultMessage_to_ExceptionSql,  
    Microsoft.Practices.ESB.ExceptionHandling.Maps,  
    Version=2.0.0.0,  
    Culture=neutral,  
    PublicKeyToken=c2c8b2b87f54180a  
    ```  
  
 <span data-ttu-id="dd911-164">Tous les composants de pipeline après exécution, l’adaptateur de base de données SQL de BizTalk Server insère le message d’erreur dans la base de données du portail de gestion ESB.</span><span class="sxs-lookup"><span data-stu-id="dd911-164">After all the pipeline components finish executing, the BizTalk SQL Server database adapter inserts the fault message into the ESB Management Portal database.</span></span>