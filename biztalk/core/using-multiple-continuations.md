---
title: "À l’aide de plusieurs Continuations | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 01a38087-71ee-40b3-a957-6a2653bd6435
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 0e27a73fae39a55f05650c08397616f3cbe4fa80
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="using-multiple-continuations"></a><span data-ttu-id="502bf-102">Utilisation de plusieurs continuations</span><span class="sxs-lookup"><span data-stu-id="502bf-102">Using Multiple Continuations</span></span>
<span data-ttu-id="502bf-103">L'utilisation de l'Éditeur de modèle de suivi dans des environnements dans lesquels il existe plusieurs activités vous demande de comprendre le scénario dans lequel ces activités sont suivies pour que vous puissiez mapper les ports de réception, les orchestrations et les ports d'envoi dans le bon ordre.</span><span class="sxs-lookup"><span data-stu-id="502bf-103">Using the Tracking Profile Editor (TPE) in environments in which there are multiple activities requires that you understand the scenario in which the activities are being tracked in order to map the receive ports, orchestrations, and send ports in the proper sequence.</span></span>  
  
 <span data-ttu-id="502bf-104">Dans un modèle de suivi, l'Éditeur de modèle de suivi évalue automatiquement le début et la fin de l'activité.</span><span class="sxs-lookup"><span data-stu-id="502bf-104">In a tracking profile, the TPE assesses the beginning and end of the activity automatically.</span></span> <span data-ttu-id="502bf-105">L'activité démarre lors de la collecte des premières données et termine lors de la collecte des dernières.</span><span class="sxs-lookup"><span data-stu-id="502bf-105">The activity starts when the first piece of data is collected and ends when the last piece is collected.</span></span>  
  
 <span data-ttu-id="502bf-106">Dans la plupart des cas, la création d'une seule continuation, comme une continuation entre deux orchestrations, est un processus simple pour les développeurs.</span><span class="sxs-lookup"><span data-stu-id="502bf-106">In most cases creating a single continuation, such as a continuation between two orchestrations, is a straightforward process for developers.</span></span> <span data-ttu-id="502bf-107">L'Éditeur de modèle de suivi s'avère complexe dans le cas de continuations multiples.</span><span class="sxs-lookup"><span data-stu-id="502bf-107">Where TPE exhibits complexity is in the case of multiple continuations.</span></span> <span data-ttu-id="502bf-108">Un scénario de continuations multiples a lieu lorsqu'une activité BAM (Business Activity Monitoring) s'étend sur plusieurs ports de réception, orchestrations et ports d'envoi.</span><span class="sxs-lookup"><span data-stu-id="502bf-108">A multiple continuation scenario  is where a Business Activity Monitoring (BAM) activity spans multiple receive ports, orchestrations, and send ports.</span></span> <span data-ttu-id="502bf-109">Pour pouvoir collecter les données BAM dans un seul enregistrement, vous devez créer des continuations entre toutes les planifications BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="502bf-109">In order to collect the BAM data in one record, you must create continuations between all the BizTalk Server schedules.</span></span> <span data-ttu-id="502bf-110">Ce processus peut s'avérer compliqué lorsqu'il est réalisé via l'interface utilisateur de l'Éditeur de modèle de suivi.</span><span class="sxs-lookup"><span data-stu-id="502bf-110">This process can be complex when completed through the TPE user interface (UI).</span></span>  
  
 <span data-ttu-id="502bf-111">Cette rubrique décrit comment créer des continuations simples et multiples dans différents scénarios.</span><span class="sxs-lookup"><span data-stu-id="502bf-111">This topic describes how to create single and multiple continuations in different scenarios.</span></span>  
  
#### <a name="base-scenario-description---multiple-receive-ports-orchestrations-and-send-ports"></a><span data-ttu-id="502bf-112">Description du scénario de base : ports de réception, orchestrations et ports d'envoi multiples</span><span class="sxs-lookup"><span data-stu-id="502bf-112">Base Scenario Description - Multiple Receive Ports, Orchestrations, and Send Ports</span></span>  
 <span data-ttu-id="502bf-113">Ce scénario implique un serveur BizTalk disposant de plusieurs ports de réception, orchestrations et ports d'envoi.</span><span class="sxs-lookup"><span data-stu-id="502bf-113">The scenario consists of a BizTalk server that has a number of receive ports (R), orchestrations (O), and send ports (S).</span></span> <span data-ttu-id="502bf-114">Une propriété de contexte interchangeID générique est utilisée pour lier les continuations.</span><span class="sxs-lookup"><span data-stu-id="502bf-114">There is a generic interchangeID context property that is used to link the continuations.</span></span> <span data-ttu-id="502bf-115">Vous pouvez utiliser n'importe quelle propriété de contexte, comme activityID ou tout autre identificateur unique.</span><span class="sxs-lookup"><span data-stu-id="502bf-115">You can use any context property, such as the activityID or other unique identifier.</span></span> <span data-ttu-id="502bf-116">Le choix d'un contenu particulier n'est pas associé à l'étude de ce scénario.</span><span class="sxs-lookup"><span data-stu-id="502bf-116">The choice of the specific content is not germane to the discussion of the scenario.</span></span>  
  
 <span data-ttu-id="502bf-117">Dans le cadre de ce scénario, l'étude de l'élément de données/l'étape majeure/le contexte-propriété-valeur suivis à partir de ces ports et orchestrations n'est pas traitée.</span><span class="sxs-lookup"><span data-stu-id="502bf-117">For the purposes of the scenario, discussions of the data item/milestone/context-property-value being tracked from these ports and orchestrations are not specified.</span></span> <span data-ttu-id="502bf-118">Cette partie du mappage est propre à la logique d'entreprise.</span><span class="sxs-lookup"><span data-stu-id="502bf-118">That part of the mapping is specific to the business logic.</span></span> <span data-ttu-id="502bf-119">L'objectif est de capturer toutes les données BAM de tous les ports et orchestrations sur une seule ligne dans la table d'activité finale.</span><span class="sxs-lookup"><span data-stu-id="502bf-119">The goal is to capture all BAM data from all the ports and orchestrations in a single row in the completed activity table.</span></span> <span data-ttu-id="502bf-120">Les différents modes de réception et de traitement d'un message par les orchestrations présentent des défis et solutions très intéressants.</span><span class="sxs-lookup"><span data-stu-id="502bf-120">The different ways in which a message can be received and processed by orchestrations presents some interesting challenges and solutions.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="502bf-121">Le scénario d'un port ou d'une orchestration peut être considéré comme un cas spécial du scénario des ports et orchestrations multiples.</span><span class="sxs-lookup"><span data-stu-id="502bf-121">The scenario of one port or one orchestration can be considered a special case of the many port and many orchestrations scenario.</span></span>  
  
#### <a name="scenario-solution-1---one-receive-port-and-one-orchestration"></a><span data-ttu-id="502bf-122">Solution du scénario 1 : un port de réception et une orchestration</span><span class="sxs-lookup"><span data-stu-id="502bf-122">Scenario Solution 1 - One Receive Port and One Orchestration</span></span>  
 <span data-ttu-id="502bf-123">Dans ce scénario, un message arrive sur exactement un seul des ports de réception et est traité par une seule orchestration.</span><span class="sxs-lookup"><span data-stu-id="502bf-123">In this scenario, a message arrives at exactly one of the receive ports (R1) and is processed by exactly one of the orchestrations (O1).</span></span>  
  
 <span data-ttu-id="502bf-124">Pour créer la continuation, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="502bf-124">The process to create the continuation is as follows:</span></span>  
  
1.  <span data-ttu-id="502bf-125">Créez une continuation dans l'arborescence d'activité de dossier du modèle de suivi.</span><span class="sxs-lookup"><span data-stu-id="502bf-125">Create a continuation in the folder activity tree view of the tracking profile.</span></span>  
  
2.  <span data-ttu-id="502bf-126">Choisissez le schéma de propriété de contexte en cliquant sur le **Source d’événement sélectionnez** bouton, puis en cliquant sur le **sélectionner la propriété de contexte** élément de menu.</span><span class="sxs-lookup"><span data-stu-id="502bf-126">Choose the context property schema by clicking the **Select Event Source** button, and then clicking the **Select Context Property** menu item.</span></span>  
  
3.  <span data-ttu-id="502bf-127">Recherchez le **propriété interchangeId** dans le **nom de propriété de contexte** liste et sélectionnez-le.</span><span class="sxs-lookup"><span data-stu-id="502bf-127">Locate the **interchangeId property** in the **Context Property Name** list, and then select it.</span></span>  
  
4.  <span data-ttu-id="502bf-128">Dans le schéma de propriété, mappez interchangeID sur le dossier de continuation que vous venez de créer.</span><span class="sxs-lookup"><span data-stu-id="502bf-128">From the property schema, map the interchangeID to the continuation folder that you just created.</span></span>  
  
5.  <span data-ttu-id="502bf-129">Cliquez avec le bouton droit sur le nouveau nœud interchangeID dans l'arborescence, puis sélectionnez les ports d'origine du mappage.</span><span class="sxs-lookup"><span data-stu-id="502bf-129">Right-click the newly created interchangeID node in the activity tree, and then select the ports from which to map.</span></span>  
  
6.  <span data-ttu-id="502bf-130">Dans le **sélectionner des Ports** boîte de dialogue qui s’affiche, sélectionnez toutes les **N** ports de réception.</span><span class="sxs-lookup"><span data-stu-id="502bf-130">In the **Select Ports** dialog box that is displayed, select all **N** receive ports.</span></span>  
  
7.  <span data-ttu-id="502bf-131">Créez un dossier ContinuationID dans l'arborescence d'activité.</span><span class="sxs-lookup"><span data-stu-id="502bf-131">Create a continuationID folder in the folder activity tree.</span></span>  
  
8.  <span data-ttu-id="502bf-132">Ouvrez chaque orchestration en cliquant sur le **Source d’événement sélectionnez** bouton, puis en cliquant sur le **sélectionner une planification d’Orchestration** élément de menu.</span><span class="sxs-lookup"><span data-stu-id="502bf-132">Open each orchestration by clicking the **Select Event Source** button, and then clicking the **Select Orchestration Schedule** menu item.</span></span> <span data-ttu-id="502bf-133">À partir de chaque orchestration, cliquez avec le bouton droit sur une forme de l'orchestration, puis mappez la propriété de contexte interchangeID au nouveau dossier continuationID.</span><span class="sxs-lookup"><span data-stu-id="502bf-133">From each orchestration, right-click a shape in the orchestration, and then map the interchangeID context property to the newly created continuationID.</span></span>  
  
 <span data-ttu-id="502bf-134">Dans un déploiement contenant trois orchestrations, votre modèle de suivi ressemblerait à ceci :</span><span class="sxs-lookup"><span data-stu-id="502bf-134">In a deployment with three orchestrations, your tracking profile would look similar to this:</span></span>  
  
 <span data-ttu-id="502bf-135">![L’éditeur plusieurs scénario 1](../core/media/4761d680-7218-4404-a636-06739f70f344.gif "4761d680-7218-4404-a636-06739f70f344")</span><span class="sxs-lookup"><span data-stu-id="502bf-135">![TPE multiple continuation scenario 1](../core/media/4761d680-7218-4404-a636-06739f70f344.gif "4761d680-7218-4404-a636-06739f70f344")</span></span>  
  
#### <a name="scenario-solution-2---one-receive-port-and-multiple-orchestrations"></a><span data-ttu-id="502bf-136">Solution du scénario 2 : un port de réception et plusieurs orchestrations</span><span class="sxs-lookup"><span data-stu-id="502bf-136">Scenario Solution 2 - One Receive Port and Multiple Orchestrations</span></span>  
 <span data-ttu-id="502bf-137">Dans ce scénario, un message arrive sur exactement un seul des ports de réception et est traité par chaque orchestration.</span><span class="sxs-lookup"><span data-stu-id="502bf-137">In this scenario, a message arrives at exactly one of the receive ports and is processed by each and every orchestration.</span></span> <span data-ttu-id="502bf-138">Ceci ce produit car le message est envoyé simultanément à chacune des orchestrations.</span><span class="sxs-lookup"><span data-stu-id="502bf-138">This happens as the message is simultaneously sent to each of the orchestrations.</span></span>  
  
 <span data-ttu-id="502bf-139">Dans ce cas, nous avons besoin d'une continuation et d'un continuationID pour chaque orchestration.</span><span class="sxs-lookup"><span data-stu-id="502bf-139">In this case, we would need a continuation and continuationID for each orchestration.</span></span> <span data-ttu-id="502bf-140">Le processus de création des continuations serait similaire à la procédure décrite dans la solution du scénario 1.</span><span class="sxs-lookup"><span data-stu-id="502bf-140">The process for creating the continuations would be similar to the steps outlined in scenario solution 1.</span></span> <span data-ttu-id="502bf-141">Pour un déploiement comportant trois orchestrations, votre modèle de suivi qui ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="502bf-141">For a three-orchestration deployment, your resulting tracking profile looks something like this:</span></span>  
  
 <span data-ttu-id="502bf-142">![Scénario 2 de Continuations multiples de continuations](../core/media/3cebd82f-9192-4d52-84c7-584f24e8ecca.gif "3cebd82f-9192-4d52-84c7-584f24e8ecca")</span><span class="sxs-lookup"><span data-stu-id="502bf-142">![TPE Multiple continuation scenario 2](../core/media/3cebd82f-9192-4d52-84c7-584f24e8ecca.gif "3cebd82f-9192-4d52-84c7-584f24e8ecca")</span></span>  
  
#### <a name="scenario-solution-3---content-based-routing"></a><span data-ttu-id="502bf-143">Solution du scénario 3 : routage basé sur le contenu</span><span class="sxs-lookup"><span data-stu-id="502bf-143">Scenario Solution 3 - Content Based Routing</span></span>  
 <span data-ttu-id="502bf-144">Ce scénario définit une solution de routage basé sur le contenu.</span><span class="sxs-lookup"><span data-stu-id="502bf-144">This scenario defines a content based routing (CBR) solution.</span></span> <span data-ttu-id="502bf-145">Un message arrive sur exactement un seul des ports de réception et est envoyé à un seul port d'envoi.</span><span class="sxs-lookup"><span data-stu-id="502bf-145">A message arrives at exactly one of the receive ports and is sent to exactly one of the send ports.</span></span> <span data-ttu-id="502bf-146">Ce routage a lieu en fonction de la valeur de la propriété de contexte du message.</span><span class="sxs-lookup"><span data-stu-id="502bf-146">This routing happens based on a context property value in the message.</span></span> <span data-ttu-id="502bf-147">Dans ce cas, une seule continuation est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="502bf-147">In this case, we would need one continuation.</span></span> <span data-ttu-id="502bf-148">Le mappage ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="502bf-148">The mapping looks something like this:</span></span>  
  
 <span data-ttu-id="502bf-149">![Scénario de continuation CBR. ] (../core/media/4459a73d-515f-4d6d-a68f-b18eee072df8.gif "4459a73d-515f-4d6d-a68f-b18eee072df8")</span><span class="sxs-lookup"><span data-stu-id="502bf-149">![Continuation CBR scenario.](../core/media/4459a73d-515f-4d6d-a68f-b18eee072df8.gif "4459a73d-515f-4d6d-a68f-b18eee072df8")</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="502bf-150">Le mappage ci-dessus est également valable pour un message qui arrive sur exactement un seul des ports de réception et qui est envoyé à tous les ports d'envoi.</span><span class="sxs-lookup"><span data-stu-id="502bf-150">The above mapping is also valid for a message that arrives at exactly one of the receive ports and is sent to all of the send ports.</span></span>  
  
#### <a name="scenario-solution-4---one-orchestration-multiple-send-ports"></a><span data-ttu-id="502bf-151">Solution du scénario 4 : une orchestration, plusieurs ports d'envoi</span><span class="sxs-lookup"><span data-stu-id="502bf-151">Scenario Solution 4 - One Orchestration, Multiple Send Ports</span></span>  
 <span data-ttu-id="502bf-152">Dans ce scénario, il existe plusieurs d’envoi.</span><span class="sxs-lookup"><span data-stu-id="502bf-152">In this scenario, there are multiple send.</span></span> <span data-ttu-id="502bf-153">ports.</span><span class="sxs-lookup"><span data-stu-id="502bf-153">ports.</span></span> <span data-ttu-id="502bf-154">Un message est traité par une seule des orchestrations, qui est déterminé par les règles de traitement et est envoyé à tous les ports d’envoi.</span><span class="sxs-lookup"><span data-stu-id="502bf-154">A message is processed by exactly one of the orchestrations, which is determined by the processing rules, and is sent to all of the send ports.</span></span> <span data-ttu-id="502bf-155">Dans ce cas, une seule continuation est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="502bf-155">In this case, we would need one continuation.</span></span> <span data-ttu-id="502bf-156">Le mappage ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="502bf-156">The mapping looks something like this:</span></span>  
  
 <span data-ttu-id="502bf-157">![Scénario de continuation 4](../core/media/3ab10b51-d306-4ad1-acb6-6731e23394ac.gif "3ab10b51-d306-4ad1-acb6-6731e23394ac")</span><span class="sxs-lookup"><span data-stu-id="502bf-157">![Coninuation Scenario 4](../core/media/3ab10b51-d306-4ad1-acb6-6731e23394ac.gif "3ab10b51-d306-4ad1-acb6-6731e23394ac")</span></span>  
  
#### <a name="scenario-solution-5---sequential-orchestrations"></a><span data-ttu-id="502bf-158">Solution du scénario 5 : orchestrations séquentielles</span><span class="sxs-lookup"><span data-stu-id="502bf-158">Scenario Solution 5 - Sequential Orchestrations</span></span>  
 <span data-ttu-id="502bf-159">Dans ce scénario, un message est traité par chaque orchestration, une par une, dans l'ordre, puis est transmis à l'orchestration suivante via la continuation.</span><span class="sxs-lookup"><span data-stu-id="502bf-159">In this scenario, a message is processed by each orchestration in sequence, one by one, and is passed to the next orchestration via the continuation.</span></span> <span data-ttu-id="502bf-160">Le mappage ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="502bf-160">The mapping looks something like this:</span></span>  
  
 <span data-ttu-id="502bf-161">![Scénario de continuation 5](../core/media/563cacee-104c-4f8a-9836-da90aecb7487.gif "563cacee-104c-4f8a-9836-da90aecb7487")</span><span class="sxs-lookup"><span data-stu-id="502bf-161">![Continuation scenario 5](../core/media/563cacee-104c-4f8a-9836-da90aecb7487.gif "563cacee-104c-4f8a-9836-da90aecb7487")</span></span>  
  
### <a name="collecting-data-in-an-asynchronous-environment"></a><span data-ttu-id="502bf-162">Collecte de données dans un environnement asynchrone</span><span class="sxs-lookup"><span data-stu-id="502bf-162">Collecting Data in an Asynchronous Environment</span></span>  
 <span data-ttu-id="502bf-163">Lorsque vous configurez les continuations, la fonction BAM attend l'arrivée des données.</span><span class="sxs-lookup"><span data-stu-id="502bf-163">When you set up continuations, BAM expects the data to arrive.</span></span> <span data-ttu-id="502bf-164">Dans un environnement asynchrone, vous ne pouvez pas recevoir de réponse provenant d'un processus principal.</span><span class="sxs-lookup"><span data-stu-id="502bf-164">In an asynchronous environment you may not receive a response from a backend process.</span></span>  
  
 <span data-ttu-id="502bf-165">Si vous ne recevez pas les données de réponse, l'instance de l'activité attend indéfiniment.</span><span class="sxs-lookup"><span data-stu-id="502bf-165">If you do not receive the response data, the activity instance waits indefinitely.</span></span> <span data-ttu-id="502bf-166">L'activité ne s'arrête jamais et les enregistrements restent dans les tables de la base de données d'importation principale BAM.</span><span class="sxs-lookup"><span data-stu-id="502bf-166">The activity will never complete and the records remain in the tables in the BAM Primary Import database.</span></span> <span data-ttu-id="502bf-167">Prenez le cas des transactions à long terme, où il n'est pas possible de connaître le moment d'arrivée des données.</span><span class="sxs-lookup"><span data-stu-id="502bf-167">Consider the case of long-running transactions, where there is no way to tell when the remaining data will arrive.</span></span> <span data-ttu-id="502bf-168">Il n'y a pas de délai d'expiration, puisque l'arrivée des données dépend de la logique ou des processus d'entreprise, après quoi l'activité est marquée comme étant terminée.</span><span class="sxs-lookup"><span data-stu-id="502bf-168">There is no time-out, as data arrival will depend on business logic or processes, after which the activity is marked as complete.</span></span> <span data-ttu-id="502bf-169">Les données peuvent arriver le jour même, ou dans de rares cas, l'année suivante.</span><span class="sxs-lookup"><span data-stu-id="502bf-169">The data could arrive the same day, or in extreme cases, the following year.</span></span>  
  
 <span data-ttu-id="502bf-170">La solution est d'utiliser des activités connexes.</span><span class="sxs-lookup"><span data-stu-id="502bf-170">The solution is to use related activities.</span></span>  
  
 <span data-ttu-id="502bf-171">Séparez votre activité en deux activités distinctes.</span><span class="sxs-lookup"><span data-stu-id="502bf-171">Split your activity into two activities.</span></span> <span data-ttu-id="502bf-172">Liez les deux activités entre elles, et liez la réponse à l'activité initiale.</span><span class="sxs-lookup"><span data-stu-id="502bf-172">Relate the two activities, and relate the response to the original activity.</span></span>  
  
 <span data-ttu-id="502bf-173">Pour plus d’informations sur les activités connexes, consultez [relations d’activité](../core/activity-relationships.md).</span><span class="sxs-lookup"><span data-stu-id="502bf-173">For more information about related activities, see [Activity Relationships](../core/activity-relationships.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="502bf-174">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="502bf-174">See Also</span></span>  
 [<span data-ttu-id="502bf-175">Éditeur de modèle de suivi</span><span class="sxs-lookup"><span data-stu-id="502bf-175">Tracking Profile Editor</span></span>](../core/tracking-profile-editor.md)