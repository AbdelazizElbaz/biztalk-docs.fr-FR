---
title: Adaptateur file | Documents Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- File adapters
ms.assetid: e4f6e94b-89b8-42ba-a4c2-a629f1107bb1
caps.latest.revision: 16
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ceb4f0728eb6fac66fb0fc5f84b117b37ba84121
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="file-adapter"></a><span data-ttu-id="7798a-102">Adaptateur FILE</span><span class="sxs-lookup"><span data-stu-id="7798a-102">File Adapter</span></span>
<span data-ttu-id="7798a-103">L'adaptateur FILE transfère les fichiers vers et à partir de Microsoft BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="7798a-103">The File adapter transfers files into and out of Microsoft BizTalk Server.</span></span> <span data-ttu-id="7798a-104">L’adaptateur File est constitué de deux adaptateurs : un adaptateur de réception et un adaptateur d’envoi.</span><span class="sxs-lookup"><span data-stu-id="7798a-104">The File adapter consists of two adapters — a receive adapter and a send adapter.</span></span>  
  
 <span data-ttu-id="7798a-105">Cette section décrit la prise en charge des workflows et traitements par lot pour les adaptateurs de réception et d'envoi FILE.</span><span class="sxs-lookup"><span data-stu-id="7798a-105">This section discusses the workflow and batching support for both the File receive adapter and the File send adapter.</span></span>  
 
## <a name="file-receive-adapter"></a><span data-ttu-id="7798a-106">Adaptateur de réception File</span><span class="sxs-lookup"><span data-stu-id="7798a-106">File receive adapter</span></span>  
  
<span data-ttu-id="7798a-107">Utilisez le fichier adaptateur de réception pour lire les messages à partir de fichiers et les envoyer au serveur.</span><span class="sxs-lookup"><span data-stu-id="7798a-107">Use the File receive adapter to read messages from files, and submit them to the server.</span></span> <span data-ttu-id="7798a-108">L’adaptateur de réception lit le fichier et crée un objet BizTalk Message, afin que BizTalk Server puisse traiter le message.</span><span class="sxs-lookup"><span data-stu-id="7798a-108">The receive adapter reads the file, and creates a BizTalk Message object, so that BizTalk Server can process the message.</span></span> <span data-ttu-id="7798a-109">Lors de la lecture à partir du fichier, l'adaptateur verrouille le fichier pour s'assurer qu'aucune modification ne puisse être apportée au contenu du fichier.</span><span class="sxs-lookup"><span data-stu-id="7798a-109">While reading from the file, the adapter locks the file to ensure that no modifications can be made to the file content.</span></span>  
  
> [!NOTE] 
> <span data-ttu-id="7798a-110">L'adaptateur de réception FILE ne récupère pas les fichiers en lecture seule ou les fichiers système.</span><span class="sxs-lookup"><span data-stu-id="7798a-110">The File receive adapter does not pick up read-only files or system files.</span></span>  
  
 <span data-ttu-id="7798a-111">L'adaptateur de réception FILE lit les messages à partir de fichiers présents sur des systèmes de fichiers locaux ou des partages réseau.</span><span class="sxs-lookup"><span data-stu-id="7798a-111">The File receive adapter reads the messages from files on local file systems or on network shares.</span></span> <span data-ttu-id="7798a-112">Lorsque l'emplacement spécifié sur un partage réseau est indisponible du fait de problèmes réseau, l'adaptateur de réception tente une nouvelle opération de lecture (le nombre de tentatives peut être configuré dans la console Administration de BizTalk Server).</span><span class="sxs-lookup"><span data-stu-id="7798a-112">When the specified location on a network share is unavailable due to network problems, the receive adapter retries the read operation (the number of retries is configurable in the BizTalk Server Administration console).</span></span> <span data-ttu-id="7798a-113">Après la lecture du message et son acceptation par le moteur de messagerie BizTalk, l'adaptateur de réception supprime le fichier du système de fichiers ou du partage réseau.</span><span class="sxs-lookup"><span data-stu-id="7798a-113">After the message has been read and successfully accepted by the BizTalk Messaging Engine, the receive adapter deletes the file from the file system or network share.</span></span> <span data-ttu-id="7798a-114">Si le message a été lu mais que le pipeline n'a pas pu traiter le message, l'adaptateur le place dans la file d'attente de messages interrompus, puis supprime le fichier du système de fichiers ou du partage réseau.</span><span class="sxs-lookup"><span data-stu-id="7798a-114">If the message was read but the pipeline did not successfully process the message, the adapter puts the message in the suspended queue and then deletes the file from the file system or network share.</span></span> <span data-ttu-id="7798a-115">Si l'adaptateur de réception FILE ne peut pas envoyer (ou interrompre) le message à la base de données MessageBox, il ne supprime pas le fichier original du système de fichiers ou du partage réseau.</span><span class="sxs-lookup"><span data-stu-id="7798a-115">If the File receive adapter cannot submit or suspend the message to the MessageBox database, it does not delete the original file from the file system or network share.</span></span>  
  
 <span data-ttu-id="7798a-116">Vous pouvez également configurer l'adaptateur de réception FILE pour renommer des fichiers lors de leur traitement.</span><span class="sxs-lookup"><span data-stu-id="7798a-116">You can also configure the File receive adapter to rename files when processing them.</span></span> <span data-ttu-id="7798a-117">Vous devez renommer des fichiers pour vous assurer que l'adaptateur de réception ne génère pas de messages en double si l'emplacement de réception est arrêté et redémarré.</span><span class="sxs-lookup"><span data-stu-id="7798a-117">You should rename files to ensure that the receive adapter does not generate duplicate messages if the receive location is shut down and restarted.</span></span> <span data-ttu-id="7798a-118">Il s'agit d'une option configurable pour les emplacements de réception FILE.</span><span class="sxs-lookup"><span data-stu-id="7798a-118">This is a configurable option for File receive locations.</span></span> <span data-ttu-id="7798a-119">Par défaut, le changement de nom est désactivé.</span><span class="sxs-lookup"><span data-stu-id="7798a-119">By default, renaming is disabled.</span></span> <span data-ttu-id="7798a-120">Lorsqu'il est activé, l'adaptateur de réception FILE ajoute l'extension .BTS-WIP au fichier.</span><span class="sxs-lookup"><span data-stu-id="7798a-120">When renaming is enabled, the File receive adapter appends the extension .BTS-WIP to the file.</span></span> <span data-ttu-id="7798a-121">L'adaptateur de réception lit ensuite les messages à partir du fichier renommé dans l'emplacement de réception, puis l'envoie au serveur.</span><span class="sxs-lookup"><span data-stu-id="7798a-121">The receive adapter then reads the messages from the renamed file in the receive location and submits it to the server.</span></span> <span data-ttu-id="7798a-122">Après l'envoi d'un fichier par l'adaptateur de réception, ce dernier supprime le fichier renommé du système de fichiers ou du partage réseau.</span><span class="sxs-lookup"><span data-stu-id="7798a-122">After the receive adapter has successfully submitted a file, the receive adapter deletes the renamed file from the file system or network share.</span></span> <span data-ttu-id="7798a-123">Si un message a été lu mais que son traitement a échoué dans le pipeline, l'adaptateur de réception le place dans la file d'attente de messages interrompus de la base de données MessageBox, puis supprime le fichier renommé du partage réseau.</span><span class="sxs-lookup"><span data-stu-id="7798a-123">If a message has been read but failed processing in the pipeline, the receive adapter places the message in the MessageBox database suspended queue, and deletes the renamed file from the network share.</span></span>  
  
> [!NOTE] 
> <span data-ttu-id="7798a-124">Renommer les fichiers n'a aucun impact sur les performances.</span><span class="sxs-lookup"><span data-stu-id="7798a-124">Renaming files has no impact on performance.</span></span>  
  
 <span data-ttu-id="7798a-125">Si l'adaptateur de réception FILE lit le message mais ne le stocke pas dans la base de données MessageBox, le fichier renommé retrouve son nom original, sans l'extension .BTS-WIP.</span><span class="sxs-lookup"><span data-stu-id="7798a-125">If the File receive adapter successfully reads the message but did not successfully store the message in the MessageBox database, the renamed file reverts to its original name, without the .BTS-WIP extension.</span></span> <span data-ttu-id="7798a-126">Notez que l'adaptateur de réception ne lit pas les fichiers avec l'extension .BTS-WIP si l'option de changement de nom est activée.</span><span class="sxs-lookup"><span data-stu-id="7798a-126">Note that the receive adapter does not read files with the extension .BTS-WIP if the renaming option is turned on.</span></span>  
  
#### <a name="using-file-change-notifications-and-polling"></a><span data-ttu-id="7798a-127">À l’aide de notifications de modification de fichier et d’interrogation</span><span class="sxs-lookup"><span data-stu-id="7798a-127">Using file change notifications and polling</span></span>
  
 <span data-ttu-id="7798a-128">L'adaptateur de réception FILE s'appuie sur les notifications de modification de fichier Windows pour déterminer quand récupérer un fichier du répertoire ou du partage spécifié.</span><span class="sxs-lookup"><span data-stu-id="7798a-128">The File receive adapter relies on Windows File Change Notifications to determine when to pick up a file from the specified directory or share.</span></span> <span data-ttu-id="7798a-129">Si l'adaptateur de réception FILE reçoit une notification de modification de fichier Windows avant l'écriture complète du fichier dans le répertoire ou le partage spécifié, alors le fichier est verrouillé et l'adaptateur de réception FILE ne récupère pas le fichier.</span><span class="sxs-lookup"><span data-stu-id="7798a-129">If the File receive adapter receives a Windows File Change Notification before the file has been completely written to the specified directory or share then the file will be locked and the File receive adapter will not retrieve the file.</span></span> <span data-ttu-id="7798a-130">Dans ce scénario, la réception de fichier adaptateur sera activement interroger le répertoire spécifié ou partager à le **l’intervalle d’interrogation (ms)** spécifié sur le **paramètres avancés** boîte de dialogue disponible lors de la configuration un Emplacement de réception du fichier.</span><span class="sxs-lookup"><span data-stu-id="7798a-130">In this scenario, the File receive adapter will actively poll the specified directory or share at the **Polling interval (ms)** specified on the **Advanced settings** dialog box available when configuring a File receive location.</span></span> <span data-ttu-id="7798a-131">Lorsque l'adaptateur de réception FILE interroge un répertoire ou un partage, il récupère les fichiers déverrouillés du partage et les envoie à la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="7798a-131">When the File receive adapter polls a directory or share it retrieves unlocked files from the share and submits the files to the MessageBox database.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7798a-132">L'adaptateur FILE [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] a été testé uniquement sur le système de fichiers NTFS qui le prend en charge.</span><span class="sxs-lookup"><span data-stu-id="7798a-132">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] File adapter has only been tested on, and is supported on, the NTFS file system.</span></span>  
  
 <span data-ttu-id="7798a-133">Avec les notifications de modification de fichier Windows suivantes, l'adaptateur de réception FILE récupère un fichier de l'emplacement spécifié :</span><span class="sxs-lookup"><span data-stu-id="7798a-133">The following Windows File Change Notifications will cause the File receive adapter to pick up a file from the specified location:</span></span>  
  
 `FILE_NOTIFY_CHANGE_ATTRIBUTES`
  
 <span data-ttu-id="7798a-134">Toute modification d'attribut dans la sous-arborescence ou le répertoire surveillé génère le renvoi d'une opération d'attente d'une notification de modification.</span><span class="sxs-lookup"><span data-stu-id="7798a-134">Any attribute change in the watched directory or subtree causes a change notification wait operation to return.</span></span>  
  
 `FILE_NOTIFY_CHANGE_FILE_NAME`  
  
 <span data-ttu-id="7798a-135">Toute modification de nom de fichier dans la sous-arborescence ou le répertoire surveillé génère le renvoi d'une opération d'attente d'une notification de modification.</span><span class="sxs-lookup"><span data-stu-id="7798a-135">Any file name change in the watched directory or subtree causes a change notification wait operation to return.</span></span> <span data-ttu-id="7798a-136">Les modifications incluent le changement, la création ou la suppression d'un nom de fichier.</span><span class="sxs-lookup"><span data-stu-id="7798a-136">Changes include renaming, creating, or deleting a file name.</span></span>  
  
 `FILE_NOTIFY_CHANGE_SIZE`  
  
 <span data-ttu-id="7798a-137">Toute modification de taille de fichier dans la sous-arborescence ou le répertoire surveillé génère le renvoi d'une opération d'attente d'une notification de modification.</span><span class="sxs-lookup"><span data-stu-id="7798a-137">Any file-size change in the watched directory or subtree causes a change notification wait operation to return.</span></span> <span data-ttu-id="7798a-138">Le système d'exploitation détecte une modification de la taille de fichier uniquement lorsque le fichier est écrit sur le disque.</span><span class="sxs-lookup"><span data-stu-id="7798a-138">The operating system detects a change in file size only when the file is written to the disk.</span></span> <span data-ttu-id="7798a-139">Pour les systèmes d'exploitation utilisant la mise en cache de manière intensive, la détection se produit uniquement lorsque le cache est suffisamment purgé.</span><span class="sxs-lookup"><span data-stu-id="7798a-139">For operating systems that use extensive caching, detection occurs only when the cache is sufficiently flushed.</span></span>  
  
 `FILE_NOTIFY_CHANGE_LAST_WRITE`  
  
 <span data-ttu-id="7798a-140">Toute modification de l'heure de dernière écriture des fichiers dans la sous-arborescence ou le répertoire surveillé génère le renvoi d'une opération d'attente d'une notification de modification.</span><span class="sxs-lookup"><span data-stu-id="7798a-140">Any change to the last write-time of files in the watched directory or subtree causes a change notification wait operation to return.</span></span> <span data-ttu-id="7798a-141">Le système d'exploitation détecte une modification de l'heure de dernière écriture uniquement lorsque le fichier est écrit sur le disque.</span><span class="sxs-lookup"><span data-stu-id="7798a-141">The operating system detects a change to the last write-time only when the file is written to the disk.</span></span> <span data-ttu-id="7798a-142">Pour les systèmes d'exploitation utilisant la mise en cache de manière intensive, la détection se produit uniquement lorsque le cache est suffisamment purgé.</span><span class="sxs-lookup"><span data-stu-id="7798a-142">For operating systems that use extensive caching, detection occurs only when the cache is sufficiently flushed.</span></span>  
  
 <span data-ttu-id="7798a-143">Pour plus d’informations sur la **FindFirstChangeNotification** fonction voir [https://msdn.microsoft.com/library/windows/desktop/aa364417(v=vs.85).aspx](https://msdn.microsoft.com/library/windows/desktop/aa364417(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="7798a-143">For more information about the **FindFirstChangeNotification** function see [https://msdn.microsoft.com/library/windows/desktop/aa364417(v=vs.85).aspx](https://msdn.microsoft.com/library/windows/desktop/aa364417(v=vs.85).aspx).</span></span>  
  
### <a name="file-receive-adapter-batching-support"></a><span data-ttu-id="7798a-144">Prise en charge du traitement par lot par l'adaptateur de réception FILE</span><span class="sxs-lookup"><span data-stu-id="7798a-144">File Receive Adapter Batching Support</span></span>
  
 <span data-ttu-id="7798a-145">L'adaptateur de réception FILE envoie des messages au serveur par lots.</span><span class="sxs-lookup"><span data-stu-id="7798a-145">The File receive adapter submits messages to the server in batches.</span></span> <span data-ttu-id="7798a-146">L'adaptateur de réception FILE commence par créer un seul lot par emplacement de réception en collectant tous les fichiers lisibles disponibles dans l'emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="7798a-146">The File receive adapter starts by building a single batch per receive location by collecting all the readable files available in the receive location.</span></span> <span data-ttu-id="7798a-147">Les lots sont envoyés à la base de données MessageBox par l'adaptateur de réception, une fois que tous les fichiers disponibles ont été collectés ou que le nombre de fichiers collectés dépasse la taille maximale du lot.</span><span class="sxs-lookup"><span data-stu-id="7798a-147">Batches are submitted to the MessageBox database by the receive adapter when all the available files have been collected or when the amount of files collected exceeds the maximum batch size.</span></span>  
  
 <span data-ttu-id="7798a-148">Une fois que tous les messages du lot ont été lus et envoyés à la base de données MessageBox, l'adaptateur de réception FILE supprime les fichiers correspondants de l'emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="7798a-148">After all the messages within the batch have been successfully read and submitted into the MessageBox database, the File receive adapter deletes the corresponding files from the receive location.</span></span> <span data-ttu-id="7798a-149">Si certains messages du lot n'ont pas été traités correctement, l'adaptateur de réception FILE les interrompt et supprime les fichiers correspondants de l'emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="7798a-149">If some of the messages within the batch failed processing, the File receive adapter suspends them and deletes the corresponding files from the receive location.</span></span> <span data-ttu-id="7798a-150">Si certains ou tous les messages ne peuvent pas être stockés dans la base de données MessageBox, toute l'opération de traitement par lot est annulée et tous les fichiers correspondants restent en l'état dans l'emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="7798a-150">If some or all of the messages fail to be stored in the MessageBox database, the entire batch operation is rolled back and all corresponding files are left unchanged in the receive location.</span></span>  
  
## <a name="file-send-adapter"></a><span data-ttu-id="7798a-151">Adaptateur d'envoi FILE</span><span class="sxs-lookup"><span data-stu-id="7798a-151">File Send Adapter</span></span>
  
 <span data-ttu-id="7798a-152">L'adaptateur d'envoi FILE transmet des messages depuis la base de données MessageBox vers une adresse de destination (URL) spécifiée.</span><span class="sxs-lookup"><span data-stu-id="7798a-152">The File send adapter transmits messages from the MessageBox database to a specified destination address (URL).</span></span> <span data-ttu-id="7798a-153">Vous définissez l'URL, composée d'un chemin d'accès et d'un nom de fichier, à l'aide de caractères génériques liés aux propriétés de contexte du message.</span><span class="sxs-lookup"><span data-stu-id="7798a-153">You define the URL, which is a file path and file name, by using wildcard characters related to the message context properties.</span></span> <span data-ttu-id="7798a-154">L'adaptateur d'envoi FILE fait correspondre les caractères génériques au nom de fichier réel avant d'écrire le message dans le fichier.</span><span class="sxs-lookup"><span data-stu-id="7798a-154">The File send adapter resolves the wildcard characters to the actual file name before writing the message to the file.</span></span>  
  
 <span data-ttu-id="7798a-155">Lors de l'écriture d'un message dans un fichier, l'adaptateur d'envoi FILE obtient le contenu du message du corps de l'objet de message BizTalk.</span><span class="sxs-lookup"><span data-stu-id="7798a-155">When writing a message to a file, the File send adapter gets the message content from the body part of the BizTalk Message object.</span></span> <span data-ttu-id="7798a-156">L'adaptateur d'envoi FILE ignore les autres parties du message dans l'objet de message BizTalk.</span><span class="sxs-lookup"><span data-stu-id="7798a-156">The File send adapter ignores other message parts in the BizTalk Message object.</span></span> <span data-ttu-id="7798a-157">Une fois que l'adaptateur FILE a écrit le message dans un fichier, il supprime le message de la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="7798a-157">After the File adapter writes the message to a file, it deletes the message from the MessageBox database.</span></span> <span data-ttu-id="7798a-158">L'adaptateur FILE écrit des fichiers dans le système de fichiers soit directement, soit à l'aide du cache du système de fichiers qui peut améliorer les performances, en particulier pour les fichiers volumineux.</span><span class="sxs-lookup"><span data-stu-id="7798a-158">The File adapter writes files to the file system either directly or by using the file system cache, which can improve performance, particularly for large files.</span></span>  
  
### <a name="file-send-adapter-batching-support"></a><span data-ttu-id="7798a-159">Prise en charge du traitement par lot par l'adaptateur d'envoi FILE</span><span class="sxs-lookup"><span data-stu-id="7798a-159">File Send Adapter Batching Support</span></span>
  
 <span data-ttu-id="7798a-160">L'adaptateur d'envoi FILE obtient des lots de messages de la base de données MessageBox et les écrit dans des fichiers dans des emplacements de destination, sur le système de fichiers ou le partage réseau.</span><span class="sxs-lookup"><span data-stu-id="7798a-160">The File send adapter gets batches of messages from the MessageBox database and writes them to files in destination locations on the file system or the network share.</span></span> <span data-ttu-id="7798a-161">La taille des lots de l'adaptateur d'envoi FILE ne peut pas être configurée ; elle est prédéfinie sur 20.</span><span class="sxs-lookup"><span data-stu-id="7798a-161">The size of File send adapter batches is not configurable and is preset to 20.</span></span> <span data-ttu-id="7798a-162">Si BizTalk Server ne peut pas écrire certains messages d'un lot dans des fichiers, le système renvoie ces messages à la base de données MessageBox pour une nouvelle tentative de traitement.</span><span class="sxs-lookup"><span data-stu-id="7798a-162">If BizTalk Server fails to write some of the messages within a batch to files, the system resubmits those messages to the MessageBox database for retry processing.</span></span> <span data-ttu-id="7798a-163">Vous pouvez configurer l'intervalle entre chaque tentative, ainsi que le nombre de tentatives, à l'aide de la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="7798a-163">You can configure the retry interval and retry count by using the BizTalk Server Administration console.</span></span>  
  
 
## <a name="in-this-section"></a><span data-ttu-id="7798a-164">Contenu de cette section</span><span class="sxs-lookup"><span data-stu-id="7798a-164">In this section</span></span>  
  
-   [<span data-ttu-id="7798a-165">Configurer l’adaptateur de fichier</span><span class="sxs-lookup"><span data-stu-id="7798a-165">Configure the File adapter</span></span>](../core/configure-the-file-adapter.md) 
  
-   [<span data-ttu-id="7798a-166">Restrictions relatives à la configuration de l’adaptateur de fichier</span><span class="sxs-lookup"><span data-stu-id="7798a-166">Restrictions when configuring the File adapter</span></span>](../core/restrictions-when-configuring-the-file-adapter.md)  
