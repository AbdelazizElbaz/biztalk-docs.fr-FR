---
title: "Définition de la taille de pool de threads de terminaison | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 9e170e76-5151-4306-9473-5b68e815219a
caps.latest.revision: "7"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 54afa88b51876d0ee56f548f263be1b00c37967a
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="setting-the-epm-threadpool-size"></a><span data-ttu-id="b01bb-102">Définition de la taille de la réserve de threads du Gestionnaire des points de terminaison</span><span class="sxs-lookup"><span data-stu-id="b01bb-102">Setting the EPM Threadpool Size</span></span>
<span data-ttu-id="b01bb-103">Cette rubrique explique comment définir la taille de la réserve de threads pour le Gestionnaire des points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="b01bb-103">This topic explains how to set the threadpool size for the End Point Manager (EPM).</span></span>  
  
 <span data-ttu-id="b01bb-104">Sur le **avancé** onglet dans le **propriétés de l’hôte** boîte de dialogue, il existe une propriété appelée **nombre maximal de moteur de messagerie threads par UC**.</span><span class="sxs-lookup"><span data-stu-id="b01bb-104">On the **Advanced** tab in the **Host Properties** dialog box, there is a property called **Maximum number of messaging engine threads per CPU**.</span></span> <span data-ttu-id="b01bb-105">Pour obtenir des instructions sur l’accès à cette boîte de dialogue, consultez [la création d’un nouvel hôte](../core/how-to-create-a-new-host.md).</span><span class="sxs-lookup"><span data-stu-id="b01bb-105">For instructions about accessing this dialog box, see [How to Create a New Host](../core/how-to-create-a-new-host.md).</span></span> <span data-ttu-id="b01bb-106">Utilisez cette propriété pour contrôler la taille de la réserve de threads de processus que le moteur de messagerie utilise pour traiter les messages.</span><span class="sxs-lookup"><span data-stu-id="b01bb-106">Use this property to control the size of the pool of process threads that the messaging engine uses to process messages.</span></span> <span data-ttu-id="b01bb-107">La valeur par défaut de cette propriété est 20, ce qui signifie que le moteur de messagerie n'utilisera pas plus de 20 threads par UC sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="b01bb-107">The default value for this property is 20, meaning that the messaging engine will use no more than 20 threads for each CPU on the server.</span></span>  
  
 <span data-ttu-id="b01bb-108">Étant donné que les lots de messages sont traités par chaque thread dans le pool, ajuster la valeur de **nombre maximal de moteur de messagerie threads par UC** peut affecter les performances en modifiant la dynamique d’utilisation des ressources sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="b01bb-108">Since batches of messages are processed by each thread in the pool, adjusting the value of **Maximum number of messaging engine threads per CPU** can affect performance by changing the dynamics of resource utilization on the server.</span></span> <span data-ttu-id="b01bb-109">Pour plus d’informations sur le fonctionne du pool de threads, consultez [à l’aide du moteur de messagerie BizTalk](../core/using-the-biztalk-messaging-engine.md).</span><span class="sxs-lookup"><span data-stu-id="b01bb-109">For more information about how the threadpool works, see [Using the BizTalk Messaging Engine](../core/using-the-biztalk-messaging-engine.md).</span></span>  
  
 <span data-ttu-id="b01bb-110">Les tests ont montré que dans les cas où l’UC ou SQL Server est surchargé, la diminution de la valeur de **nombre maximal de moteur de messagerie threads par UC** peut entraîner une nette amélioration du débit.</span><span class="sxs-lookup"><span data-stu-id="b01bb-110">Testing has shown that in cases where the CPU or the SQL Server is over utilized, decreasing the value of **Maximum number of messaging engine threads per CPU** can result in a net gain in throughput.</span></span> <span data-ttu-id="b01bb-111">Par exemple, dans les cas où le serveur de base de données MessageBox montre une utilisation de l'UC supérieure à 90 % ou lorsque les temps d'attente de verrouillage SQL dépassent 500 à 1000 millisecondes, la réduction du nombre de threads dans la réserve a pour effet de diminuer le nombre total de connexions vers le serveur SQL Server, ce qui se traduit par un traitement plus efficace des messages.</span><span class="sxs-lookup"><span data-stu-id="b01bb-111">For example, in cases where the MessageBox database server exhibits CPU utilization above 90% or the SQL lock wait times are elevated above 500-1000 milliseconds, reducing the number of threads in the pool will reduce the overall number connections being made to SQL Server, which results in more efficient message processing.</span></span> <span data-ttu-id="b01bb-112">Dans certains cas, abaisser la taille maximale de la réserve de threads jusqu'à une valeur de 2 peut se traduire par une amélioration notable du débit.</span><span class="sxs-lookup"><span data-stu-id="b01bb-112">In some cases, setting the maximum thread pool size to a value as low as 2 can result in measurable throughput gain.</span></span>  
  
## <a name="recommendation"></a><span data-ttu-id="b01bb-113">Recommandation</span><span class="sxs-lookup"><span data-stu-id="b01bb-113">Recommendation</span></span>  
 <span data-ttu-id="b01bb-114">Lors de l’optimisation d’une installation de BizTalk Server, il est recommandé de fine régler la valeur définie pour **nombre maximal de moteur de messagerie threads par UC**.</span><span class="sxs-lookup"><span data-stu-id="b01bb-114">When optimizing a BizTalk Server installation, it is recommended that you fine tune the value you set for **Maximum number of messaging engine threads per CPU**.</span></span>  <span data-ttu-id="b01bb-115">Si vous essayez de réduire l'utilisation du serveur de base de données MessageBox, envisagez de réduire la valeur de cette propriété.</span><span class="sxs-lookup"><span data-stu-id="b01bb-115">When you try to reduce the utilization of the MessageBox database server, consider reducing the value of this property.</span></span>  
  
 <span data-ttu-id="b01bb-116">Lorsque BizTalk server ou le serveur de base de données MessageBox n’est pas fortement utilisé, et appliquer une charge supplémentaire n’entraîne pas augmenter le débit, essayez d’augmenter la valeur de **nombre maximal de moteur de messagerie threads par UC** Pour tirer parti des ressources sous-utilisées.</span><span class="sxs-lookup"><span data-stu-id="b01bb-116">When the BizTalk server or the MessageBox database server is not highly utilized, and applying additional load does not result in additional throughput, try increasing the value of **Maximum number of messaging engine threads per CPU** to take advantage of underutilized resources.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b01bb-117">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="b01bb-117">See Also</span></span>  
 <span data-ttu-id="b01bb-118">[Comment créer un nouvel hôte](../core/how-to-create-a-new-host.md) </span><span class="sxs-lookup"><span data-stu-id="b01bb-118">[How to Create a New Host](../core/how-to-create-a-new-host.md) </span></span>  
 [<span data-ttu-id="b01bb-119">À l’aide du moteur de messagerie BizTalk</span><span class="sxs-lookup"><span data-stu-id="b01bb-119">Using the BizTalk Messaging Engine</span></span>](../core/using-the-biztalk-messaging-engine.md)