---
title: "Résolution des problèmes de latence de MessageBox | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: e9eb5789-80bd-40d4-8c27-7ae117fd9232
caps.latest.revision: "5"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 0e37fc970230bf218bcfd820611fb6b87322e535
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="troubleshooting-messagebox-latency-issues"></a><span data-ttu-id="50a5a-102">Résolution des problèmes de latence de MessageBox</span><span class="sxs-lookup"><span data-stu-id="50a5a-102">Troubleshooting MessageBox Latency Issues</span></span>
<span data-ttu-id="50a5a-103">Dans un monde parfait, tous les messages seraient traités et remis dès qu'ils seraient publiés dans la base de données MessageBox. Par ailleurs, cette dernière ne deviendrait jamais trop volumineuse.</span><span class="sxs-lookup"><span data-stu-id="50a5a-103">In a perfect world, all messages would be processed and delivered as soon as they were published to the MessageBox database and the MessageBox database would never grow to an excessive size.</span></span> <span data-ttu-id="50a5a-104">Tous les messages de la MessageBox n'étant plus référencés seraient immédiatement supprimés par les travaux de l'agent SQL qui nettoient régulièrement les tables de cette base de données.</span><span class="sxs-lookup"><span data-stu-id="50a5a-104">Any messages in the MessageBox that were no longer referenced would immediately be removed by the SQL agent jobs that periodically clean up the MessageBox database tables.</span></span>  
  
 <span data-ttu-id="50a5a-105">Dans la réalité, cependant, les messages ne sont généralement pas reçus de façon prévisible et linéaire, et les travaux de l'agent SQL ont besoin de temps pour nettoyer les tables de la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="50a5a-105">In real world scenarios, however, messages are not typically received in a predictable, linear fashion and the SQL agent jobs require time to clean up the MessageBox database tables.</span></span>  
  
 <span data-ttu-id="50a5a-106">Par conséquent, dans certains cas, la MessageBox peut grossir très rapidement.</span><span class="sxs-lookup"><span data-stu-id="50a5a-106">Therefore, in some scenarios; the MessageBox can grow fairly large very quickly.</span></span>  
  
 <span data-ttu-id="50a5a-107">Les éléments ci-dessous peuvent entraîner un accroissement excessif de la MessageBox et détériorer les performances générales :</span><span class="sxs-lookup"><span data-stu-id="50a5a-107">The following items can cause the MessageBox to grow excessively large and hinder overall performance:</span></span>  
  
-   <span data-ttu-id="50a5a-108">**Arrêt de l’instance d’hôte Biztalk qui a la valeur d’option « Autoriser le suivi de l’hôte »**.</span><span class="sxs-lookup"><span data-stu-id="50a5a-108">**The Biztalk Host instance that has the "allow Host tracking" option set is stopped**.</span></span> <span data-ttu-id="50a5a-109">C'est l'hôte qui est chargé de déplacer les données de suivi de la base de données MessageBox vers la base de données des suivis BizTalk (BizTalkDTADb).</span><span class="sxs-lookup"><span data-stu-id="50a5a-109">This is the host that is responsible for moving the tracking data from the MessageBox database to the Biztalk Tracking database(BizTalkDTADb).</span></span>  
  
-   <span data-ttu-id="50a5a-110">**L’Agent SQL Server n’est pas en cours d’exécution** cela peut se produire si les travaux SQL chargés de déplacement des données à partir de la base de données MessageBox vers la base de données BizTalkDTADb [puis de purger les données déplacées dans la MessageBox] ne sont pas en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="50a5a-110">**SQL Server Agent is not running** This can happen if the SQL jobs responsible for moving data from the MessageBox database to the BizTalkDTADb database [subsequently purging the moved data in the MessageBox] are not running.</span></span> <span data-ttu-id="50a5a-111">Pour éviter ce problème, le service de l'Agent SQL doit impérativement fonctionner tout le temps.</span><span class="sxs-lookup"><span data-stu-id="50a5a-111">It is imperative the SQL Agent Service be running all the time to avoid this problem.</span></span>  
  
-   <span data-ttu-id="50a5a-112">**Travaux de SQL Server sont désactivés** même si l’Agent SQL Server est en cours d’exécution, il est impératif qu’aucun des travaux de SQL Server par défaut désactivé.</span><span class="sxs-lookup"><span data-stu-id="50a5a-112">**SQL Server Jobs are disabled** Even if the SQL Server Agent is running, it is imperative that none of the default SQL Server jobs be disabled.</span></span>  
  
-   <span data-ttu-id="50a5a-113">**Base de données BizTalkDTADb augmente excessivement** cela peut se produire si la base de données BizTalkDTADb devient très volumineuse, à l’origine des insertions dans la base de données BizTalkDTADb prend plus de temps.</span><span class="sxs-lookup"><span data-stu-id="50a5a-113">**BizTalkDTADb database grows excessively** This can happen if the BizTalkDTADb database grows very large, causing inserts into the BizTalkDTADb database to take longer.</span></span> <span data-ttu-id="50a5a-114">Dans ce cas, le déplacement des données par le service TDDS (Tracking Data Delivery Service) ralentit, ce qui génère une accumulation des travaux en retard dans la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="50a5a-114">When this happens the movement of data by Tracking Data Delivery Service (TDDS) slows down, causing a backlog build up in the MessageBox database.</span></span> <span data-ttu-id="50a5a-115">Pour éviter ce problème, il est essentiel d'exécuter régulièrement les travaux de purge et d'archivage du serveur SQL sur les bases de données BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="50a5a-115">To avoid this problem it is important to run the SQL server archive and purge jobs periodically on the BizTalkDTADb databases.</span></span>  
  
-   <span data-ttu-id="50a5a-116">**Une latence d’e/s disque excessive** si la vitesse d’entrée de données dans la base de données MessageBox est plus rapide que le système peut traiter et déplacer les données vers la base de données BizTalkDTADb, file d’attente peut s’accumuler dans la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="50a5a-116">**Excessive Disk I/O Latency** If the incoming rate of data into the MessageBox database is faster than which the system can process and move the data to the BizTalkDTADb database, backlog can build up in the MessageBox database.</span></span> <span data-ttu-id="50a5a-117">Si cette accumulation se poursuit, le problème s'aggrave et les performances du système se dégradent peu à peu.</span><span class="sxs-lookup"><span data-stu-id="50a5a-117">If the backlog continues to grow unabated, this is a very serious problem and system performance will degrade over time.</span></span> <span data-ttu-id="50a5a-118">Pour résoudre ce problème, vous pouvez installer des disques plus rapides et/ou mettre à niveau le matériel afin que le système puisse se remettre des éventuels messages accumulés avec le temps.</span><span class="sxs-lookup"><span data-stu-id="50a5a-118">One way to alleviate this problem is to install faster disks and/or upgrade the hardware to help ensure that the system is capable of recovering from any message backlogs experienced over time.</span></span>  
  
## <a name="plan-for-the-future"></a><span data-ttu-id="50a5a-119">Prévoir l'avenir</span><span class="sxs-lookup"><span data-stu-id="50a5a-119">Plan for the Future</span></span>  
 <span data-ttu-id="50a5a-120">Même si toutes les recommandations ci-dessus sont respectées, avec le temps, le volume des données de suivi déplacées vers la base de données BizTalkDTADb devient très important.</span><span class="sxs-lookup"><span data-stu-id="50a5a-120">Even though all the best practices above are followed, over time the volume of tracking data moved to the BizTalkDTADb database will grow very large.</span></span> <span data-ttu-id="50a5a-121">Il est donc indispensable d'implémenter un plan de maintenance de cette base de données de façon à archiver régulièrement les données de suivi afin que le système présente toujours des performances optimales.</span><span class="sxs-lookup"><span data-stu-id="50a5a-121">It is important to implement a database maintenance plan to periodically archive tracking data so that the system can continue to perform optimally.</span></span>  
  
 <span data-ttu-id="50a5a-122">La quantité de données historiques pouvant être conservées dans la base de données BizTalkDTADb dépend du volume des messages transmis au sein du système.</span><span class="sxs-lookup"><span data-stu-id="50a5a-122">The amount of historical data that can be retained in the BizTalkDTADb database depends on the volume of messages pushed through the system.</span></span> <span data-ttu-id="50a5a-123">Dans les systèmes non soumis à un débit et un stress élevés, cette base de données grossit à un rythme plus lent et peut contenir plus de données historiques.</span><span class="sxs-lookup"><span data-stu-id="50a5a-123">For systems that are not subjected to high stress and throughput this database will grow at a slower rate and it will be possible to retain more historical data in the BizTalkDTADb database.</span></span>  
  
 <span data-ttu-id="50a5a-124">Il est recommandé de conserver un nombre de données minimal dans la base de données BizTalkDTADb afin de ne pas nuire aux performances du moteur d'exécution.</span><span class="sxs-lookup"><span data-stu-id="50a5a-124">It is recommended to retain minimal data in the BizTalkDTADb database so that runtime performance is not sacrificed.</span></span>