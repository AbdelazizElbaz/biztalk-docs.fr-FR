---
title: "Dans les étapes de traitement de commande de traitement | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 698005da-1ba8-4972-83db-f5ae45fd6a83
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1a8eae6b814af36d0ea07065726ca66518984703
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="processing-in-the-order-processing-stages"></a><span data-ttu-id="87474-102">Traitement dans les étapes de traitement de la commande</span><span class="sxs-lookup"><span data-stu-id="87474-102">Processing in the Order Processing Stages</span></span>
<span data-ttu-id="87474-103">La solution de gestion des processus d’entreprise comporte deux étapes le **CableOrder1** et **CableOrder2** orchestrations, qui effectuent des actions de traitement des commandes.</span><span class="sxs-lookup"><span data-stu-id="87474-103">The Business Process Management solution includes two stages, the **CableOrder1** and **CableOrder2** orchestrations, that perform the order processing actions.</span></span> <span data-ttu-id="87474-104">Pour plus d’informations sur la façon dont le processus de commande a été divisé en étapes, consultez [nombre d’étapes de traitement](../core/number-of-processing-stages.md).</span><span class="sxs-lookup"><span data-stu-id="87474-104">For more information about how the order process was divided into stages, see [Number of Processing Stages](../core/number-of-processing-stages.md).</span></span>  
  
 <span data-ttu-id="87474-105">Les deux étapes de traitement démarrent lorsqu’ils reçoivent un message de commande et répondent avec un message d’état pour le **OrderManager** orchestration une fois qu’ils ont démarré.</span><span class="sxs-lookup"><span data-stu-id="87474-105">Both processing stages begin when they receive an order message and both reply with a status message to the **OrderManager** orchestration once they have started.</span></span> <span data-ttu-id="87474-106">De même, les deux renvoient un message à la **OrderManager** pour indiquer si l’étape s’est terminée ou arrêtée avec une erreur.</span><span class="sxs-lookup"><span data-stu-id="87474-106">Similarly, both send a message back to the **OrderManager** to indicate whether the stage completed or terminated with an error.</span></span> <span data-ttu-id="87474-107">Pour plus d’informations sur la connexion entre le **OrderManager** d’orchestration et les étapes de traitement, consultez [Inverse liaison directe de partenaires](../core/inverse-direct-partner-binding.md).</span><span class="sxs-lookup"><span data-stu-id="87474-107">For details about the connection between the **OrderManager** orchestration and the processing stages, see [Inverse Direct Partner Binding](../core/inverse-direct-partner-binding.md).</span></span>  
  
 <span data-ttu-id="87474-108">Les deux étapes de traitement utilisent autocorrélation, les ports dynamiques pour envoyer des informations pour le **OrderManger**.</span><span class="sxs-lookup"><span data-stu-id="87474-108">Both processing stages use self-correlating, dynamic ports to send information back to the **OrderManger**.</span></span> <span data-ttu-id="87474-109">Grâce aux ports dynamiques, les orchestrations copient l'adresse de port du message envoyé au port d'envoi.</span><span class="sxs-lookup"><span data-stu-id="87474-109">With dynamic ports, the orchestrations copy the port address from the message to send port.</span></span>  
  
 <span data-ttu-id="87474-110">Tous les messages de commande les étapes de traitement de réception sont les messages d’ordre canonique normalisé créés dans le **OrderBroker**.</span><span class="sxs-lookup"><span data-stu-id="87474-110">All of the order messages the processing stages receive are the normalized, canonical order messages created in the **OrderBroker**.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="87474-111">En raison de la longueur de la **CableOrder1** et **CableOrder2** orchestrations, vous voudrez lire cette section avec les orchestrations ouvertes dans Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="87474-111">Because of the length of the **CableOrder1** and **CableOrder2** orchestrations, you may want to read this section with the orchestrations open in Microsoft Visual Studio.</span></span>  
  
## <a name="the-cableorder1-orchestration"></a><span data-ttu-id="87474-112">Orchestration CableOrder1</span><span class="sxs-lookup"><span data-stu-id="87474-112">The CableOrder1 Orchestration</span></span>  
 <span data-ttu-id="87474-113">Le **CableOrder1** orchestration démarre lorsqu’il reçoit un message de commande.</span><span class="sxs-lookup"><span data-stu-id="87474-113">The **CableOrder1** orchestration starts when it receives an order message.</span></span> <span data-ttu-id="87474-114">Elle copie l'adresse de réponse du message vers le port d'exécution de l'étape.</span><span class="sxs-lookup"><span data-stu-id="87474-114">It then copies the reply address from the message to the stage completion port.</span></span> <span data-ttu-id="87474-115">Ensuite, il génère un message d’accusé de réception et l’envoie en réponse à la **BeginStagePort** de port et enregistre les informations de routage dans une variable locale.</span><span class="sxs-lookup"><span data-stu-id="87474-115">Next, it constructs an acknowledgement message and sends it as a response to the **BeginStagePort** port, and then saves the routing information in a local variable.</span></span>  
  
 <span data-ttu-id="87474-116">L'orchestration obtient les informations de configuration de l'authentification unique.</span><span class="sxs-lookup"><span data-stu-id="87474-116">The orchestration next gets the configuration information from SSO.</span></span> <span data-ttu-id="87474-117">Pour plus d’informations sur la façon dont la solution utilise l’authentification unique, consultez [à l’aide de l’authentification unique efficacement dans la Solution de gestion des processus métier](../core/using-sso-efficiently-in-the-business-process-management-solution.md).</span><span class="sxs-lookup"><span data-stu-id="87474-117">For more information about how the solution uses SSO, see [Using SSO Efficiently in the Business Process Management Solution](../core/using-sso-efficiently-in-the-business-process-management-solution.md).</span></span>  
  
 <span data-ttu-id="87474-118">L’orchestration crée une instance de la **OrderHandler** de l’objet pour communiquer avec les processus principaux, vérifie la validité du message, analyse le message, détermine le type de service et l’action à effectuer.</span><span class="sxs-lookup"><span data-stu-id="87474-118">The orchestration then creates an instance of the **OrderHandler** object to communicate with the backend processes, checks the validity of the message, analyzes the message, determines the service type, and which action to take.</span></span> <span data-ttu-id="87474-119">Selon l’action à entreprendre, il appelle l’une des orchestrations d’action de commande **activer**, **modification**, ou **Annuler** et transmet le **OrderHandler** objet à l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="87474-119">Depending on the action to take, it calls one of the order action orchestrations **Activate**, **Change**, or **Cancel** and passes the **OrderHandler** object to the orchestration.</span></span>  
  
 <span data-ttu-id="87474-120">Le **CableOrder1** orchestration puis consigne une interruption éventuelle, envoie un message pour le groupe d’installations et les attentes à écouter.</span><span class="sxs-lookup"><span data-stu-id="87474-120">The **CableOrder1** orchestration then checks for an interrupt, sends a message to the facilities group and waits to hear back.</span></span> <span data-ttu-id="87474-121">Si elle reçoit une réponse du groupe d'installations, elle poursuit le traitement.</span><span class="sxs-lookup"><span data-stu-id="87474-121">If the orchestration gets a message back from the facilities group, it continues processing.</span></span> <span data-ttu-id="87474-122">Sinon, en cas d'interruption, elle génère une exception d'interruption.</span><span class="sxs-lookup"><span data-stu-id="87474-122">Otherwise, if there is an interrupt, the orchestration throws an interrupt exception.</span></span>  
  
 <span data-ttu-id="87474-123">L’orchestration se termine par la construction d’un message de fin et en l’envoyant via la **StageCompletion** port.</span><span class="sxs-lookup"><span data-stu-id="87474-123">The orchestration finishes by constructing a completion message and sending it through the **StageCompletion** port.</span></span>  
  
## <a name="the-cableorder2-orchestration"></a><span data-ttu-id="87474-124">Orchestration CableOrder2</span><span class="sxs-lookup"><span data-stu-id="87474-124">The CableOrder2 Orchestration</span></span>  
 <span data-ttu-id="87474-125">L’orchestration CableOrder2 effectue les mêmes étapes de démarrage que l’orchestration CableOrder1 pour les informations de routage, informations de configuration de l’authentification unique et la création d’une instance de la **OrderHandler** objet.</span><span class="sxs-lookup"><span data-stu-id="87474-125">The CableOrder2 orchestration performs the same starting steps as the CableOrder1 orchestration for the routing information, SSO configuration information, and creating an instance of the **OrderHandler** object.</span></span>  
  
 <span data-ttu-id="87474-126">L’orchestration puis vérifient une interruption éventuelle et transmet le **OrderHandler** objet dans un appel à la **Complete** orchestration.</span><span class="sxs-lookup"><span data-stu-id="87474-126">The orchestration then checks for an interrupt and passes the **OrderHandler** object in a call to the **Complete** orchestration.</span></span> <span data-ttu-id="87474-127">Ensuite, l’orchestration crée un message d’état de commande met à jour l’historique des commandes et envoie un message de saisie semi-automatique via la **StageCompletion** port.</span><span class="sxs-lookup"><span data-stu-id="87474-127">Next, the orchestration creates an order status message, updates the order history, and sends a completion message through the **StageCompletion** port.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="87474-128">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="87474-128">See Also</span></span>  
 <span data-ttu-id="87474-129">[Contrôle de version de la Solution gestion des processus d’entreprise](../core/versioning-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="87474-129">[Versioning the Business Process Management Solution](../core/versioning-the-business-process-management-solution.md) </span></span>  
 [<span data-ttu-id="87474-130">Traitement dans la Solution gestion des processus d’entreprise</span><span class="sxs-lookup"><span data-stu-id="87474-130">Processing in the Business Process Management Solution</span></span>](../core/processing-in-the-business-process-management-solution.md)