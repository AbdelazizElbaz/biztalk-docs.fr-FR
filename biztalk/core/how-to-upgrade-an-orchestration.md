---
title: "La mise à niveau d’une Orchestration | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: ef3f032f-28a1-4d52-9d85-d5748c9e9682
caps.latest.revision: "21"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: edd9fa8e98b62ec92b1313cc1028efc5320ce17e
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="how-to-upgrade-an-orchestration"></a><span data-ttu-id="00136-102">Mise à niveau d'une orchestration</span><span class="sxs-lookup"><span data-stu-id="00136-102">How to Upgrade an Orchestration</span></span>
<span data-ttu-id="00136-103">La mise à jour d’une orchestration qui s’exécute dans un environnement de production lorsque l’orchestration gère des transactions à long terme ou attend une réponse à partir d’un port de sollicitation-réponse.</span><span class="sxs-lookup"><span data-stu-id="00136-103">How to update an orchestration that is running in a production environment when the orchestration handles long-running transactions or is waiting for a response from a solicit-response port.</span></span>

## <a name="overview"></a><span data-ttu-id="00136-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="00136-104">Overview</span></span>
 <span data-ttu-id="00136-105">Lorsqu’une orchestration ne gère pas les transactions à long terme, vous pouvez mettre à jour comme décrit dans [liste de vérification : mise à jour les artefacts dans une Application BizTalk](../core/checklist-update-the-artifacts-in-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="00136-105">When an orchestration does not handle long-running transactions, you can update it as described in [Checklist: Update the Artifacts in a BizTalk Application](../core/checklist-update-the-artifacts-in-a-biztalk-application.md).</span></span> <span data-ttu-id="00136-106">Lorsqu'une orchestration gère des transactions à long terme, cependant, vous ne pouvez pas mettre immédiatement en service sa version mise à jour.</span><span class="sxs-lookup"><span data-stu-id="00136-106">When an orchestration handles long-running transactions, however, you cannot cut over to the updated version of the orchestration immediately.</span></span> <span data-ttu-id="00136-107">Vous devez permettre à la version d'origine de terminer le traitement de ses messages, afin qu'ils ne soient pas perdus.</span><span class="sxs-lookup"><span data-stu-id="00136-107">You must allow the original version to finish processing its messages, so that they are not lost.</span></span> <span data-ttu-id="00136-108">Pour ce faire, vous déployez l'orchestration mise à jour dans l'application utilisée par l'orchestration d'origine.</span><span class="sxs-lookup"><span data-stu-id="00136-108">To accomplish this, you deploy the updated orchestration into the same application as the original one.</span></span> <span data-ttu-id="00136-109">Vous arrêtez ensuite la version d'origine et démarrez la version mise à jour afin qu'elle reçoive tous les nouveaux messages tandis que l'ancienne version continue de traiter les éventuels messages en vol.</span><span class="sxs-lookup"><span data-stu-id="00136-109">You then stop the original version and start the updated version so that it receives all new messages while the previous version continues to process any in-flight messages.</span></span> <span data-ttu-id="00136-110">Une fois que l'orchestration d'origine a fini de traiter tous ses messages, vous annulez son déploiement dans l'application BizTalk dans laquelle elle a été déployée.</span><span class="sxs-lookup"><span data-stu-id="00136-110">After the original orchestration has finished processing all of its messages, you undeploy it from the BizTalk application in which it was deployed.</span></span>  
  
 <span data-ttu-id="00136-111">Pour plus d’informations sur ce scénario, consultez [scénario : mise à jour des artefacts de l’Application](../core/scenario-updating-application-artifacts.md).</span><span class="sxs-lookup"><span data-stu-id="00136-111">For more information about this scenario, see [Scenario: Updating Application Artifacts](../core/scenario-updating-application-artifacts.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="00136-112">Si plusieurs orchestrations sont liées au même port de réception et qu'elles sont toutes démarrées ou inscrites, vous créez des messages en double dans le système.</span><span class="sxs-lookup"><span data-stu-id="00136-112">If more than one orchestration is bound to the same receive port, and each orchestration is started or enlisted, you will introduce duplicate messages into the system.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="00136-113">Lorsque vous mettez à niveau vers une nouvelle orchestration, des instances d'orchestration peuvent prendre l'état Suspendu (peut être repris) sous forte sollicitation, du fait de la condition d'engorgement entre l'ancienne orchestration et la nouvelle pendant la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="00136-113">When upgrading to a new orchestration, some orchestration instances can become Suspended (resumable) under high stress because of the race condition between the old orchestration and the new orchestration during the upgrade.</span></span> <span data-ttu-id="00136-114">Pour reprendre manuellement ces instances d’orchestration, consultez [comment reprendre les Instances d’Orchestration suspendues](../core/how-to-resume-suspended-orchestration-instances.md).</span><span class="sxs-lookup"><span data-stu-id="00136-114">To manually resume these orchestration instances, see [How to Resume Suspended Orchestration Instances](../core/how-to-resume-suspended-orchestration-instances.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="00136-115">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="00136-115">Prerequisites</span></span>  
<span data-ttu-id="00136-116">Connectez-vous avec un compte qui est membre de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] groupe Administrateurs.</span><span class="sxs-lookup"><span data-stu-id="00136-116">Sign in with an account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span> <span data-ttu-id="00136-117">Votre compte doit également avoir l’autorisation de lecture/écriture sur le système de fichiers local et le global assembly cache.</span><span class="sxs-lookup"><span data-stu-id="00136-117">Your account also must have Read/Write permission on the local file system, and the global assembly cache.</span></span> <span data-ttu-id="00136-118">Le compte des administrateurs de l'ordinateur local dispose de cette autorisation.</span><span class="sxs-lookup"><span data-stu-id="00136-118">The Administrators account on the local computer has this permission.</span></span>  

<span data-ttu-id="00136-119">Pour plus d’informations sur les autorisations, consultez [autorisations requises pour déployer et gérer une Application BizTalk](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md), et [de sécurité minimales ](https://social.technet.microsoft.com/wiki/contents/articles/24590.minimum-security-rights-for-biztalk-server-2006-to-2016.aspx).</span><span class="sxs-lookup"><span data-stu-id="00136-119">For more detailed information about permissions, see [Permissions Required for Deploying and Managing a BizTalk Application](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md), and [Minimum Security Rights ](https://social.technet.microsoft.com/wiki/contents/articles/24590.minimum-security-rights-for-biztalk-server-2006-to-2016.aspx).</span></span> 
 
## <a name="update-an-orchestration"></a><span data-ttu-id="00136-120">Mise à jour d’une orchestration</span><span class="sxs-lookup"><span data-stu-id="00136-120">Update an orchestration</span></span>  
  
1.  <span data-ttu-id="00136-121">Modifiez l'orchestration en fonction de vos besoins.</span><span class="sxs-lookup"><span data-stu-id="00136-121">Make the necessary changes to the orchestration.</span></span>  
  
2.  <span data-ttu-id="00136-122">Incrémentez le numéro de version de l'assembly, de la façon suivante :</span><span class="sxs-lookup"><span data-stu-id="00136-122">Increment the assembly version number, as follows:</span></span>  
  
    1.  <span data-ttu-id="00136-123">Dans l’Explorateur de solutions, cliquez sur le projet BizTalk, puis cliquez sur **propriétés** pour lancer le Concepteur de projet pour le projet.</span><span class="sxs-lookup"><span data-stu-id="00136-123">In Solution Explorer, right-click the BizTalk project, and then click **Properties** to launch the Project Designer for the project.</span></span>  
  
    2.  <span data-ttu-id="00136-124">Cliquez sur le **Application** onglet si elle n’est pas déjà active, puis cliquez sur **informations de l’Assembly**.</span><span class="sxs-lookup"><span data-stu-id="00136-124">Click the **Application** tab if it is not already active, and then click **Assembly Information**.</span></span>  
  
    3.  <span data-ttu-id="00136-125">Dans le volet droit, augmentez le numéro de version de l'assembly.</span><span class="sxs-lookup"><span data-stu-id="00136-125">In the right pane, increase the assembly version number.</span></span> <span data-ttu-id="00136-126">Vous ne devez augmenter que le numéro de version majeure ou mineure.</span><span class="sxs-lookup"><span data-stu-id="00136-126">You should increase only the major or minor version number.</span></span> <span data-ttu-id="00136-127">Le numéro de version majeure est le premier chiffre de la séquence (**0**.0.0.0).) ; le numéro de version mineure est le deuxième chiffre de la séquence (0. **0**. 0.0).</span><span class="sxs-lookup"><span data-stu-id="00136-127">The major version number is the first digit in the sequence (**0**.0.0.0); the minor version number is the second digit in the sequence (0.**0**.0.0).</span></span> <span data-ttu-id="00136-128">BizTalk Server ne reconnaît pas une modification de numéro de version plus loin dans la séquence, telles que 0.0. **0**.0 ou 0.0.0. **0**.</span><span class="sxs-lookup"><span data-stu-id="00136-128">BizTalk Server will not recognize a version number change that is later in the sequence, such as 0.0.**0**.0 or 0.0.0.**0**.</span></span>  
  
    4.  <span data-ttu-id="00136-129">Cliquez sur **OK** pour fermer la **informations d’Assembly** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="00136-129">Click **OK** to close the **Assembly Information** dialog box.</span></span>  
  
    5.  <span data-ttu-id="00136-130">Enregistrez le projet.</span><span class="sxs-lookup"><span data-stu-id="00136-130">Save the project.</span></span>  
  
3.  <span data-ttu-id="00136-131">Déployez l'assembly à partir de Visual Studio dans une application BizTalk.</span><span class="sxs-lookup"><span data-stu-id="00136-131">Deploy the assembly from Visual Studio into a BizTalk application.</span></span> <span data-ttu-id="00136-132">Pour obtenir des instructions, consultez [déploiement des assemblys BizTalk à partir de Visual Studio dans une Application BizTalk](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="00136-132">For instructions, see [Deploying BizTalk Assemblies from Visual Studio into a BizTalk Application](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md).</span></span> <span data-ttu-id="00136-133">Veillez à bien sélectionner l'option de déploiement permettant d'installer l'assembly dans le GAC.</span><span class="sxs-lookup"><span data-stu-id="00136-133">Make sure you select the deployment option to install the assembly in the GAC.</span></span>  
  
4.  <span data-ttu-id="00136-134">Testez l'assembly contenant l'orchestration.</span><span class="sxs-lookup"><span data-stu-id="00136-134">Test the assembly containing the orchestration.</span></span>  
  
5.  <span data-ttu-id="00136-135">Exportez l’assembly à partir de l’application dans votre environnement de test dans un fichier .msi, comme décrit dans [comment exporter une Application BizTalk](../core/how-to-export-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="00136-135">Export the assembly from the application in your test environment into an .msi file, as described in [How to Export a BizTalk Application](../core/how-to-export-a-biztalk-application.md).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="00136-136">La suite de la procédure vous permet de tester l'assembly, ainsi que de le déployer dans votre environnement de production.</span><span class="sxs-lookup"><span data-stu-id="00136-136">You can use the following steps for testing the assembly as well as deploying it into your production environment.</span></span> <span data-ttu-id="00136-137">Pour plus d’informations sur les tâches de déploiement d’application dans le développement, test, intermédiaire et de production, consultez [tâches de déploiement d’Application](../core/application-deployment-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="00136-137">For more information about application deployment tasks in development, test, staging, and production, see [Application Deployment Tasks](../core/application-deployment-tasks.md).</span></span>  
  
6.  <span data-ttu-id="00136-138">Importer le fichier .msi dans l’application BizTalk dans votre environnement de production qui contient l’orchestration que vous souhaitez mettre à jour, comme décrit dans [comment importer une Application BizTalk](../core/how-to-import-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="00136-138">Import the .msi file into the BizTalk application in your production environment that contains the orchestration that you want to update, as described in [How to Import a BizTalk Application](../core/how-to-import-a-biztalk-application.md).</span></span>  
  
7.  <span data-ttu-id="00136-139">Liez l’orchestration mise à jour avec les mêmes liaisons que l’orchestration d’origine, comme décrit dans [comment configurer les liaisons d’une Orchestration](../core/how-to-configure-bindings-for-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="00136-139">Bind the updated orchestration using the same bindings as the original orchestration, as described in [How to Configure Bindings for an Orchestration](../core/how-to-configure-bindings-for-an-orchestration.md).</span></span>  
  
8.  <span data-ttu-id="00136-140">Désinscrivez l'orchestration d'origine, puis démarrez l'orchestration mise à jour.</span><span class="sxs-lookup"><span data-stu-id="00136-140">Unenlist the original orchestration, and then start the updated orchestration.</span></span> <span data-ttu-id="00136-141">Pour éviter toute suppression de messages, vous devez le faire par programme, comme décrit dans [déploiement et démarrage d’une nouvelle Version d’une Orchestration par programme](../core/deploying-and-starting-a-new-version-of-an-orchestration-programmatically.md).</span><span class="sxs-lookup"><span data-stu-id="00136-141">To avoid any dropped messages, you should do this programmatically, as described in [Deploying and Starting a New Version of an Orchestration Programmatically](../core/deploying-and-starting-a-new-version-of-an-orchestration-programmatically.md).</span></span> <span data-ttu-id="00136-142">Ou bien, vous pouvez effectuer ces étapes manuellement, comme décrit dans [comment désinscrire une Orchestration](../core/how-to-unenlist-an-orchestration.md), [comment inscrire une Orchestration](../core/how-to-enlist-an-orchestration.md), et [comment démarrer une Orchestration](../core/how-to-start-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="00136-142">Alternatively, you can perform these steps manually, as described in [How to Unenlist an Orchestration](../core/how-to-unenlist-an-orchestration.md), [How to Enlist an Orchestration](../core/how-to-enlist-an-orchestration.md), and [How to Start an Orchestration](../core/how-to-start-an-orchestration.md).</span></span>  
  
9. <span data-ttu-id="00136-143">Surveillance du système pour les instances de la version d’orchestration d’origine à l’aide de concentrateur du groupe page Affichage de la requête, comme décrit dans [comment afficher les informations d’Instance pour une Orchestration](../core/how-to-view-instance-information-for-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="00136-143">Monitor the system for instances of the original orchestration version using the Group Hub page query view, as described in [How to View Instance Information for an Orchestration](../core/how-to-view-instance-information-for-an-orchestration.md).</span></span>  
  
10. <span data-ttu-id="00136-144">Lorsque toutes ses instances actives, mises en attente et suspendues sont terminées, annuler le déploiement de l’orchestration d’origine à partir de l’application, comme décrit dans [comment supprimer une Orchestration à partir d’une Application](../core/how-to-remove-an-orchestration-from-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="00136-144">When all of its active, dehydrated, and suspended instances are complete, undeploy the original orchestration from the application, as described in [How to Remove an Orchestration from an Application](../core/how-to-remove-an-orchestration-from-an-application.md).</span></span>  
  
11. <span data-ttu-id="00136-145">Si vous le souhaitez désinstaller la version d’origine de l’assembly du GAC sur chaque ordinateur qui exécute l’application, comme décrit dans [comment désinstaller un Assembly du GAC](http://msdn.microsoft.com/library/464706a8-f902-4d05-a724-19169facd2b4).</span><span class="sxs-lookup"><span data-stu-id="00136-145">Optionally uninstall the original assembly version from the GAC on each computer running the application, as described in [How to Uninstall an Assembly from the GAC](http://msdn.microsoft.com/library/464706a8-f902-4d05-a724-19169facd2b4).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="00136-146">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="00136-146">See Also</span></span>  
 <span data-ttu-id="00136-147">[Mise à jour des Applications BizTalk](../core/updating-biztalk-applications.md) </span><span class="sxs-lookup"><span data-stu-id="00136-147">[Updating BizTalk Applications](../core/updating-biztalk-applications.md) </span></span>  
 [<span data-ttu-id="00136-148">La gestion des Orchestrations</span><span class="sxs-lookup"><span data-stu-id="00136-148">Managing Orchestrations</span></span>](../core/managing-orchestrations.md)