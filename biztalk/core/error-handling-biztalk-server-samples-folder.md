---
title: "(Dossier d’exemples BizTalk Server) de la gestion des erreurs | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- examples, errors
- errors, examples
- examples, messages
- messages, examples
- messages, errors
ms.assetid: b39791ed-277b-4625-b9a9-72480a1b6ff6
caps.latest.revision: "27"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2bfd309f332726efe2a13231ee1a337b428e3cff
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="error-handling-biztalk-server-samples-folder"></a><span data-ttu-id="5c253-102">Gestion des erreurs (dossier d'exemples BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="5c253-102">Error Handling (BizTalk Server Samples Folder)</span></span>
<span data-ttu-id="5c253-103">La fonction de cet exemple est de générer une fonctionnalité de gestion des erreurs pour l'application de routage basé sur le contenu (CBR).</span><span class="sxs-lookup"><span data-stu-id="5c253-103">The purpose of this sample is to build an error-handling functionality for the content-based routing (CBR) application.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="5c253-104">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="5c253-104">Prerequisites</span></span>  
 <span data-ttu-id="5c253-105">Pour exécuter l’exemple, il est recommandé que vous disposez de Microsoft Office InfoPath 2010 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="5c253-105">To run the sample, it is recommended that you have Microsoft Office InfoPath 2010 or later installed.</span></span> <span data-ttu-id="5c253-106">Vous pouvez exécuter l'exemple sans utiliser InfoPath, mais dans ce cas vous ne pouvez pas visualiser les bilans d'exploitation ni l'envoi des bilans d'exploitation via l'adaptateur HTTP.</span><span class="sxs-lookup"><span data-stu-id="5c253-106">You can run the sample without using InfoPath, but in that case you cannot see the expense reports and the submission of expense reports through the HTTP adapter.</span></span>  
  
## <a name="what-this-sample-does"></a><span data-ttu-id="5c253-107">Fonctions de l'exemple</span><span class="sxs-lookup"><span data-stu-id="5c253-107">What This Sample Does</span></span>  
 <span data-ttu-id="5c253-108">L'exemple implémente une partie d'un système de traitement de bilan d'exploitation.</span><span class="sxs-lookup"><span data-stu-id="5c253-108">The sample implements part of an expense report processing system.</span></span> <span data-ttu-id="5c253-109">Plus précisément, cet exemple effectue les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="5c253-109">Specifically, this sample does the following:</span></span>  
  
1.  <span data-ttu-id="5c253-110">Définit un schéma de bilan d'exploitation contenant des informations sur un bilan d'exploitation et le soumissionnaire individuel, dont le nom du département.</span><span class="sxs-lookup"><span data-stu-id="5c253-110">Defines an expense report schema containing information about an expense report and the individual submitter including department name.</span></span>  
  
2.  <span data-ttu-id="5c253-111">Fournit l'envoi du bilan d'exploitation via un répertoire ou via un service Web utilisant InfoPath.</span><span class="sxs-lookup"><span data-stu-id="5c253-111">Provides for the submission of the expense report through a directory or through a Web service using InfoPath.</span></span>  
  
3.  <span data-ttu-id="5c253-112">Promeut la **service** et **correlationID** propriétés dans le message document afin qu’il peut être utilisé dans un filtre de port pour contrôler le routage.</span><span class="sxs-lookup"><span data-stu-id="5c253-112">Promotes the **Department** and **correlationID** properties in the message document so that it can be used in a port filter to control routing.</span></span>  
  
4.  <span data-ttu-id="5c253-113">Achemine les bilans d'exploitation du département Marketing vers un fichier d'un répertoire, simulant la remise au système principal du département.</span><span class="sxs-lookup"><span data-stu-id="5c253-113">Routes expense reports belonging to the Marketing department to a file in a directory, simulating delivery to the department's back-end system.</span></span>  
  
5.  <span data-ttu-id="5c253-114">Génère un message ayant échoué pour les bilans d'exploitation appartenant aux départements autres que Marketing.</span><span class="sxs-lookup"><span data-stu-id="5c253-114">Generates a failed message for expense reports belonging to departments other than Marketing.</span></span> <span data-ttu-id="5c253-115">Le message ayant échoué inclut des informations sur l'erreur, dont le code d'erreur et la description de l'erreur.</span><span class="sxs-lookup"><span data-stu-id="5c253-115">The failed message includes information about the error including error code and error description.</span></span>  
  
6.  <span data-ttu-id="5c253-116">Achemine les messages ayant échoué vers un destinataire humain (utilisateur des activités ou opérateur d'application) en vue de la correction et du renvoi.</span><span class="sxs-lookup"><span data-stu-id="5c253-116">Routes failed messages to a human recipient (a business user or application operator) for correction and resubmission.</span></span>  
  
7.  <span data-ttu-id="5c253-117">Achemine les bilans d'exploitation renvoyés sur la base du département, comme décrit plus haut.</span><span class="sxs-lookup"><span data-stu-id="5c253-117">Routes resubmitted expense reports based on department as described above.</span></span>  
  
 <span data-ttu-id="5c253-118">Une grande partie de ces opérations est effectuée par le biais d'une planification d'orchestration BizTalk.</span><span class="sxs-lookup"><span data-stu-id="5c253-118">Much of this work is done through a BizTalk orchestration schedule.</span></span>  
  
## <a name="how-this-sample-is-designed-and-why"></a><span data-ttu-id="5c253-119">Cet exemple est conçu et pourquoi</span><span class="sxs-lookup"><span data-stu-id="5c253-119">How This Sample is Designed and Why</span></span>  
 <span data-ttu-id="5c253-120">La conception repose sur les pipelines XML d'envoi et de réception par défaut, la promotion des propriétés, les filtres d'abonnement, et les planifications d'orchestration dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] pour acheminer les messages.</span><span class="sxs-lookup"><span data-stu-id="5c253-120">The design relies on the default send and receive XML pipelines, property promotion, subscription filters, and orchestration schedules within [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to route messages.</span></span> <span data-ttu-id="5c253-121">Ces critères de conception et leur justification sont récapitulés dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="5c253-121">Design elements and their justification are listed in the following table.</span></span>  
  
|<span data-ttu-id="5c253-122">Élément de conception</span><span class="sxs-lookup"><span data-stu-id="5c253-122">Design element</span></span>|<span data-ttu-id="5c253-123">Raison(s) sélectionnée(s)</span><span class="sxs-lookup"><span data-stu-id="5c253-123">Reason(s) selected</span></span>|  
|--------------------|--------------------------|  
|<span data-ttu-id="5c253-124">Pipeline XML de réception par défaut</span><span class="sxs-lookup"><span data-stu-id="5c253-124">Default XML receive pipeline</span></span>|<span data-ttu-id="5c253-125">-Le pipeline XMLReceive prend en charge la promotion de propriétés ; le pipeline PassThruReceive ne fait pas.</span><span class="sxs-lookup"><span data-stu-id="5c253-125">-   The XMLReceive pipeline supports property promotion; the PassThruReceive pipeline does not.</span></span><br /><span data-ttu-id="5c253-126">-Le message entrant est déjà au format XML et ne nécessite pas de traitement dépasse le désassemblage de base et la résolution du tiers.</span><span class="sxs-lookup"><span data-stu-id="5c253-126">-   The inbound message is already in XML format and does not require processing beyond basic disassembly and party resolution.</span></span>|  
|<span data-ttu-id="5c253-127">Routage pour les messages ayant échoué</span><span class="sxs-lookup"><span data-stu-id="5c253-127">Routing for failed messages</span></span>|<span data-ttu-id="5c253-128">-Réception ports suspendre les messages ayant échouées et générer un accusé de réception négatif par défaut.</span><span class="sxs-lookup"><span data-stu-id="5c253-128">-   Receive ports suspend failed messages and generate a negative acknowledgment by default.</span></span> <span data-ttu-id="5c253-129">Si le routage est activé, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] lance une tentative d'acheminement des messages dont le traitement a échoué vers une application abonnée (un autre port de réception ou une planification d'orchestration).</span><span class="sxs-lookup"><span data-stu-id="5c253-129">When routing is enabled [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] attempts to route any message that fails processing to a subscribing application (such as another receive port or orchestration schedule).</span></span>|  
|<span data-ttu-id="5c253-130">Promotion des propriétés</span><span class="sxs-lookup"><span data-stu-id="5c253-130">Property promotion</span></span>|<span data-ttu-id="5c253-131">-BizTalk Server dépend des champs de propriété pour effectuer le routage.</span><span class="sxs-lookup"><span data-stu-id="5c253-131">-   BizTalk Server depends upon property fields to do routing.</span></span> <span data-ttu-id="5c253-132">Des champs distinctifs sont utilisés par les orchestrations et ne peuvent pas être utilisés à des fins de routage.</span><span class="sxs-lookup"><span data-stu-id="5c253-132">Distinguished fields are used by orchestrations and cannot be used for routing.</span></span>|  
|<span data-ttu-id="5c253-133">Filtre d'abonnement</span><span class="sxs-lookup"><span data-stu-id="5c253-133">Subscription filter</span></span>|<span data-ttu-id="5c253-134">-Le filtre d’abonnement réalise l’acheminement en capturant les messages qui répondent aux critères d’un ou plusieurs en fonction des champs de propriété.</span><span class="sxs-lookup"><span data-stu-id="5c253-134">-   The subscription filter performs the routing by capturing messages that meet one or more criteria based on property fields.</span></span>|  
|<span data-ttu-id="5c253-135">Planification d'orchestration BizTalk</span><span class="sxs-lookup"><span data-stu-id="5c253-135">BizTalk orchestration schedule</span></span>|<span data-ttu-id="5c253-136">-Fournit la possibilité d’ajouter des informations aux messages ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="5c253-136">-   Provides the opportunity to add information to failed messages.</span></span><br /><span data-ttu-id="5c253-137">-Permet le routage des messages ayant échoué vers un emplacement spécifique d’une intervention humaine.</span><span class="sxs-lookup"><span data-stu-id="5c253-137">-   Enables routing of failed messages to a dedicated location for human intervention.</span></span><br /><span data-ttu-id="5c253-138">-Processus bilans d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="5c253-138">-   Processes resubmitted expense reports.</span></span>|  
|<span data-ttu-id="5c253-139">XMLTransmit</span><span class="sxs-lookup"><span data-stu-id="5c253-139">XMLTransmit</span></span>|<span data-ttu-id="5c253-140">-Effectue l’assemblage de base des messages XML sortants.</span><span class="sxs-lookup"><span data-stu-id="5c253-140">-   Performs basic assembly of outgoing XML messages.</span></span> <span data-ttu-id="5c253-141">Le pipeline PassThruTransmit ne fournit aucune prise en charge supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="5c253-141">The PassThruTransmit pipeline provides no additional support.</span></span>|  
  
## <a name="where-to-find-this-sample"></a><span data-ttu-id="5c253-142">Accès à l'exemple</span><span class="sxs-lookup"><span data-stu-id="5c253-142">Where to Find This Sample</span></span>  
 <span data-ttu-id="5c253-143">Cet exemple se trouve dans <`Samples Path>`\Messaging\ErrorHandling\\.</span><span class="sxs-lookup"><span data-stu-id="5c253-143">This sample is located at <`Samples Path>`\Messaging\ErrorHandling\\.</span></span>  
  
 <span data-ttu-id="5c253-144">Le tableau suivant contient une liste de fichiers de cet exemple.</span><span class="sxs-lookup"><span data-stu-id="5c253-144">The following table contains a list of files for this sample.</span></span>  
  
|<span data-ttu-id="5c253-145">Fichier</span><span class="sxs-lookup"><span data-stu-id="5c253-145">File</span></span>|<span data-ttu-id="5c253-146"> Description</span><span class="sxs-lookup"><span data-stu-id="5c253-146">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="5c253-147">Cleanup.bat</span><span class="sxs-lookup"><span data-stu-id="5c253-147">Cleanup.bat</span></span>|<span data-ttu-id="5c253-148">Permet d'annuler le déploiement des assemblys et de supprimer ceux-ci du Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="5c253-148">Used to undeploy assemblies and remove them from the global assembly cache.</span></span><br /><br /> <span data-ttu-id="5c253-149">Supprime les ports d'envoi et de réception.</span><span class="sxs-lookup"><span data-stu-id="5c253-149">Removes send and receive ports.</span></span><br /><br /> <span data-ttu-id="5c253-150">Supprime les répertoires virtuels de Services Internet (IIS) si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="5c253-150">Removes Internet Information Services (IIS) virtual directories as needed.</span></span>|  
|<span data-ttu-id="5c253-151">ErrorHandling.sln</span><span class="sxs-lookup"><span data-stu-id="5c253-151">ErrorHandling.sln</span></span>|<span data-ttu-id="5c253-152">Fichier de solution Visual Studio pour l'exemple.</span><span class="sxs-lookup"><span data-stu-id="5c253-152">Visual Studio solution file for the sample.</span></span>|  
|<span data-ttu-id="5c253-153">ErrorHandlingBinding.xml</span><span class="sxs-lookup"><span data-stu-id="5c253-153">ErrorHandlingBinding.xml</span></span>|<span data-ttu-id="5c253-154">Fichier de liaison pour l'exemple.</span><span class="sxs-lookup"><span data-stu-id="5c253-154">Binding file for the sample.</span></span>|  
|<span data-ttu-id="5c253-155">Setup.bat</span><span class="sxs-lookup"><span data-stu-id="5c253-155">Setup.bat</span></span>|<span data-ttu-id="5c253-156">Utilisé pour créer et initialiser cet exemple.</span><span class="sxs-lookup"><span data-stu-id="5c253-156">Used to build and initialize this sample.</span></span>|  
|<span data-ttu-id="5c253-157">Bilan d'exploitation – John Doe.xml</span><span class="sxs-lookup"><span data-stu-id="5c253-157">Expense Report – John Doe.xml</span></span>|<span data-ttu-id="5c253-158">Exemple de document InfoPath de bilan d'exploitation.</span><span class="sxs-lookup"><span data-stu-id="5c253-158">Example expense report InfoPath document.</span></span>|  
|<span data-ttu-id="5c253-159">Bilan d'exploitation non valide – John Doe.xml</span><span class="sxs-lookup"><span data-stu-id="5c253-159">Invalid Expense Report – John Doe.xml</span></span>|<span data-ttu-id="5c253-160">Exemple de document InfoPath de bilan d'exploitation contenant des données non valides.</span><span class="sxs-lookup"><span data-stu-id="5c253-160">Example expense report InfoPath document with invalid data in it.</span></span>|  
|<span data-ttu-id="5c253-161">Dans le dossier ErrorHandler :</span><span class="sxs-lookup"><span data-stu-id="5c253-161">In ErrorHandler folder:</span></span><br /><br /> <span data-ttu-id="5c253-162">ErrorHandler.btproj</span><span class="sxs-lookup"><span data-stu-id="5c253-162">ErrorHandler.btproj</span></span>|<span data-ttu-id="5c253-163">Projet BizTalk pour l'orchestration.</span><span class="sxs-lookup"><span data-stu-id="5c253-163">BizTalk project for orchestration.</span></span>|  
|<span data-ttu-id="5c253-164">Dans le dossier ErrorHandler :</span><span class="sxs-lookup"><span data-stu-id="5c253-164">In ErrorHandler folder:</span></span><br /><br /> <span data-ttu-id="5c253-165">ResubmitLogic.odx</span><span class="sxs-lookup"><span data-stu-id="5c253-165">ResubmitLogic.odx</span></span>|<span data-ttu-id="5c253-166">Orchestration qui s'abonne à des messages ayant échoué, les envoie au destinataire humain en vue de la correction, puis renvoie les messages corrigés au serveur en vue du routage.</span><span class="sxs-lookup"><span data-stu-id="5c253-166">Orchestration that subscribes to failed messages, sends them to the human recipient for correction, and then resubmits corrected messages back into the server for routing.</span></span>|  
|<span data-ttu-id="5c253-167">Dans le dossier ErrorHandler :</span><span class="sxs-lookup"><span data-stu-id="5c253-167">In ErrorHandler folder:</span></span><br /><br /> <span data-ttu-id="5c253-168">SuspendMessage.odx</span><span class="sxs-lookup"><span data-stu-id="5c253-168">SuspendMessage.odx</span></span>|<span data-ttu-id="5c253-169">Orchestration permettant d'interrompre les messages qui ne peuvent pas être traités au sein de l'orchestration de gestion des erreurs.</span><span class="sxs-lookup"><span data-stu-id="5c253-169">Orchestration used for suspending messages that cannot be processed within the error-handling orchestration.</span></span>|  
|<span data-ttu-id="5c253-170">Dans le dossier InfoPathForms :</span><span class="sxs-lookup"><span data-stu-id="5c253-170">In InfoPathForms folder:</span></span><br /><br /> <span data-ttu-id="5c253-171">Expense Report.xsn</span><span class="sxs-lookup"><span data-stu-id="5c253-171">Expense Report.xsn</span></span><br /><br /> <span data-ttu-id="5c253-172">Bilan d'exploitation - Resubmit.xsn</span><span class="sxs-lookup"><span data-stu-id="5c253-172">Expense Report - Resubmit.xsn</span></span>|<span data-ttu-id="5c253-173">Formulaire InfoPath de bilan d'exploitation et formulaire utilisé pour visualiser et renvoyer les messages ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="5c253-173">Expense report InfoPath form and form used for viewing and resubmitting failed messages.</span></span>|  
|<span data-ttu-id="5c253-174">Dans le dossier PipelinesAndSchemas :</span><span class="sxs-lookup"><span data-stu-id="5c253-174">In PipelinesAndSchemas folder:</span></span><br /><br /> <span data-ttu-id="5c253-175">ExpenseReportSchema.xsd</span><span class="sxs-lookup"><span data-stu-id="5c253-175">ExpenseReportSchema.xsd</span></span>|<span data-ttu-id="5c253-176">Schéma XML pour le document de bilan d'exploitation.</span><span class="sxs-lookup"><span data-stu-id="5c253-176">XML schema for the expense report document.</span></span>|  
|<span data-ttu-id="5c253-177">Dans le dossier PipelinesAndSchemas :</span><span class="sxs-lookup"><span data-stu-id="5c253-177">In PipelinesAndSchemas folder:</span></span><br /><br /> <span data-ttu-id="5c253-178">PipelinesAndSchemas.btproj</span><span class="sxs-lookup"><span data-stu-id="5c253-178">PipelinesAndSchemas.btproj</span></span>|<span data-ttu-id="5c253-179">Projet BizTalk pour l'exemple.</span><span class="sxs-lookup"><span data-stu-id="5c253-179">BizTalk project for the sample.</span></span>|  
|<span data-ttu-id="5c253-180">Dans le dossier PipelinesAndSchemas :</span><span class="sxs-lookup"><span data-stu-id="5c253-180">In PipelinesAndSchemas folder:</span></span><br /><br /> <span data-ttu-id="5c253-181">PropertySchema.xsd</span><span class="sxs-lookup"><span data-stu-id="5c253-181">PropertySchema.xsd</span></span>|<span data-ttu-id="5c253-182">Schéma de propriété pour l'exemple.</span><span class="sxs-lookup"><span data-stu-id="5c253-182">Property schema for the sample.</span></span>|  
  
## <a name="how-to-use-this-sample"></a><span data-ttu-id="5c253-183">L’utilisation de cet exemple</span><span class="sxs-lookup"><span data-stu-id="5c253-183">How to Use This Sample</span></span>  
 <span data-ttu-id="5c253-184">Cet exemple fournit un point de départ pour créer votre propre procédure de gestion des erreurs.</span><span class="sxs-lookup"><span data-stu-id="5c253-184">This sample provides a starting point for creating your own error handling procedure.</span></span>  
  
## <a name="building-and-initializing-this-sample"></a><span data-ttu-id="5c253-185">Création et initialisation de cet exemple</span><span class="sxs-lookup"><span data-stu-id="5c253-185">Building and Initializing This Sample</span></span>  
  
#### <a name="to-build-and-initialize-the-compose-sample"></a><span data-ttu-id="5c253-186">Pour créer et initialiser l'exemple Compose</span><span class="sxs-lookup"><span data-stu-id="5c253-186">To build and initialize the Compose sample</span></span>  
  
1.  <span data-ttu-id="5c253-187">Dans une fenêtre de commande, accédez au dossier suivant :</span><span class="sxs-lookup"><span data-stu-id="5c253-187">In a command window, navigate to the following folder:</span></span>  
  
     <span data-ttu-id="5c253-188"><`Samples Path`>**\Messaging\ErrorHandling**</span><span class="sxs-lookup"><span data-stu-id="5c253-188"><`Samples Path`>**\Messaging\ErrorHandling**</span></span>  
  
2.  <span data-ttu-id="5c253-189">Exécutez **Setup.bat**, qui effectue les actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="5c253-189">Run **Setup.bat**, which performs the following actions:</span></span>  
  
    -   <span data-ttu-id="5c253-190">Crée trois dossiers : **ExpenseReportIn**, **ExpenseReportOut**, et **ResubmittedReportIn** sous le chemin d’accès suivant :</span><span class="sxs-lookup"><span data-stu-id="5c253-190">Creates three folders: **ExpenseReportIn**, **ExpenseReportOut**, and **ResubmittedReportIn** under the following path:</span></span>  
  
         <span data-ttu-id="5c253-191"><`Samples Path`>**\Messaging\ErrorHandling**</span><span class="sxs-lookup"><span data-stu-id="5c253-191"><`Samples Path`>**\Messaging\ErrorHandling**</span></span>  
  
    -   <span data-ttu-id="5c253-192">Copie et publie les formulaires InfoPath **Expense Report.xsn** et **Expense Report – Resubmit.xsn** dans le dossier **C:\Temp\InfoPathForms**.</span><span class="sxs-lookup"><span data-stu-id="5c253-192">Copies and publishes the InfoPath forms **Expense Report.xsn** and **Expense Report – Resubmit.xsn** into the folder **C:\Temp\InfoPathForms**.</span></span>  
  
    -   <span data-ttu-id="5c253-193">Compilation des projets [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] de cet exemple.</span><span class="sxs-lookup"><span data-stu-id="5c253-193">Compiles the [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] projects for this sample.</span></span>  
  
    -   <span data-ttu-id="5c253-194">Crée un répertoire virtuel appelé **ExpenseReports**.</span><span class="sxs-lookup"><span data-stu-id="5c253-194">Creates a virtual directory called **ExpenseReports**.</span></span>  
  
    -   <span data-ttu-id="5c253-195">Crée une application BizTalk appelée **exemple de gestion des erreurs** et déploie les assemblys de l’exemple dans celui-ci.</span><span class="sxs-lookup"><span data-stu-id="5c253-195">Creates a new BizTalk application called **Error Handling Sample** and deploys the sample assemblies into it.</span></span>  
  
    -   <span data-ttu-id="5c253-196">Création et liaison des emplacements de réception de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ainsi que des ports d'envoi et de réception.</span><span class="sxs-lookup"><span data-stu-id="5c253-196">Creates and binds the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receive locations, and the send and receive ports.</span></span>  
  
    -   <span data-ttu-id="5c253-197">Inscription et démarrage des orchestrations, activation des emplacements de réception et démarrage des ports d'envoi.</span><span class="sxs-lookup"><span data-stu-id="5c253-197">Enlists and starts orchestrations, enables the receive locations, and starts the send ports.</span></span>  
  
         <span data-ttu-id="5c253-198">Si vous décidez d'ouvrir et de créer les projets de cet exemple sans exécuter Setup.bat, vous devez commencer par créer une paire de clés de nom fort à l'aide de .NET Framework Strong Name Utility (sn.exe).</span><span class="sxs-lookup"><span data-stu-id="5c253-198">If you choose to open and build the projects in this sample without running Setup.bat, you must first create a strong name key pair using the .NET Framework Strong Name utility (sn.exe).</span></span> <span data-ttu-id="5c253-199">Celle-ci permet de signer les assemblys de l'exemple.</span><span class="sxs-lookup"><span data-stu-id="5c253-199">Use this key pair to sign the sample assemblies.</span></span>  
  
3.  <span data-ttu-id="5c253-200">Avant de tenter d'exécuter cet exemple, vous devez vérifier que [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] n'a pas signalé d'erreur durant le processus de création ou d'initialisation.</span><span class="sxs-lookup"><span data-stu-id="5c253-200">Before attempting to run this sample, confirm that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] did not report any errors during the build or initialization process.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="5c253-201">Pour annuler les modifications effectuées par Setup.bat, exécutez Cleanup.bat.</span><span class="sxs-lookup"><span data-stu-id="5c253-201">To undo changes made by Setup.bat, run Cleanup.bat.</span></span> <span data-ttu-id="5c253-202">Vous devez exécuter Cleanup.bat avant d'exécuter Cleanup.bat une seconde fois.</span><span class="sxs-lookup"><span data-stu-id="5c253-202">You must run Cleanup.bat before running Setup.bat a second time.</span></span>  
  
4.  <span data-ttu-id="5c253-203">Si vous utilisez Internet Information Services (IIS) 7.0, vous devez en outre modifier le paramètre de répertoire virtuel correspondant à l'emplacement de réception HTTP [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] utilisé par l'exemple.</span><span class="sxs-lookup"><span data-stu-id="5c253-203">If you are using Internet Information Services (IIS) 7.0, you need to perform additional configuration steps to adjust the setting for the virtual directory that corresponds to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] HTTP receive location used by the sample.</span></span> <span data-ttu-id="5c253-204">Configurez IIS en procédant comme suit :</span><span class="sxs-lookup"><span data-stu-id="5c253-204">Configure IIS by doing the following:</span></span>  
  
    1.  <span data-ttu-id="5c253-205">À l'aide du gestionnaire IIS 7.0 Manager, créez un nouveau pool d'applications pour le groupe d'utilisateurs d'hôtes BizTalk isolés.</span><span class="sxs-lookup"><span data-stu-id="5c253-205">Using IIS 7.0 Manager, create a new application pool for the BizTalk Isolated Host Users group.</span></span>  
  
    2.  <span data-ttu-id="5c253-206">Configurez le pool d'applications pour l'exécuter sous l'identité de l'utilisateur d'hôte isolé [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5c253-206">Configure the application pool to run under the identity of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Isolated Host user.</span></span> <span data-ttu-id="5c253-207">(Vous pouvez passer cette étape si vous disposez déjà d'un pool d'applications configuré pour d'autres emplacements de réception HTTP [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].)</span><span class="sxs-lookup"><span data-stu-id="5c253-207">(You may skip this step if you already have an application pool configured for other [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] HTTP receive locations.)</span></span>  
  
    3.  <span data-ttu-id="5c253-208">Configurez le répertoire virtuel **ExpenseReport** pour utiliser le protocole HTTP réception pool d’applications créé à l’étape précédente.</span><span class="sxs-lookup"><span data-stu-id="5c253-208">Configure the virtual directory **ExpenseReport** to use the HTTP receive application pool created in the previous step.</span></span>  
  
     <span data-ttu-id="5c253-209">Si vous ne disposez pas encore d'extension de serveur Web pour l'extension BTSHTTPReceive.dll ISAPI, créez-en une et activez-la en réglant son statut sur « Autorisé ».</span><span class="sxs-lookup"><span data-stu-id="5c253-209">If you do not already have a Web server extension for the BTSHTTPReceive.dll ISAPI extension, create and enable it by setting its status to "Allowed".</span></span> <span data-ttu-id="5c253-210">Cela à l’aide de la console de gestion IIS dans IIS 7.0 (soit directement sous **outils d’administration** ou via la console de gestion de l’ordinateur) comme suit :</span><span class="sxs-lookup"><span data-stu-id="5c253-210">You can do this in IIS 7.0 by using the IIS Management console (either directly under **Administrative Tools** or through the Computer Management console) as follows:</span></span>  
  
    1.  <span data-ttu-id="5c253-211">Développez le **Gestionnaire des Services Internet** arborescence.</span><span class="sxs-lookup"><span data-stu-id="5c253-211">Expand the **Internet Information Services Manager** tree.</span></span>  
  
    2.  <span data-ttu-id="5c253-212">Cliquez sur le **Extensions du Service Web** dossier.</span><span class="sxs-lookup"><span data-stu-id="5c253-212">Click the **Web Service Extensions** folder.</span></span>  
  
    3.  <span data-ttu-id="5c253-213">Dans le volet droit de la console de gestion, cliquez sur **ajouter une nouvelle extension de Service Web**.</span><span class="sxs-lookup"><span data-stu-id="5c253-213">In the right pane of the management console, click **Add a new Web Service extension**.</span></span>  
  
    4.  <span data-ttu-id="5c253-214">Dans le **nouvelle Extension de Service Web** boîte de dialogue, cliquez sur **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="5c253-214">In the **New Web Service Extension** dialog box, click **Add**.</span></span>  
  
    5.  <span data-ttu-id="5c253-215">Dans le **ajouter le fichier** boîte de dialogue, cliquez sur **Parcourir** pour sélectionner le fichier <`BizTalkInstallPath>`**\HttpReceive\BTSHTTPReceive.dll**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="5c253-215">In the **Add file** dialog box, click **Browse** to select the file <`BizTalkInstallPath>`**\HttpReceive\BTSHTTPReceive.dll**, and then click **OK**.</span></span>  
  
    6.  <span data-ttu-id="5c253-216">Configurez le répertoire virtuel **ExpenseReport** à utiliser le chemin d’accès local [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]HTTPReceive</span><span class="sxs-lookup"><span data-stu-id="5c253-216">Configure the virtual directory **ExpenseReport** to use local path [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]HTTPReceive</span></span>  
  
     <span data-ttu-id="5c253-217">Pour plus d’informations, consultez [comment configurer les services IIS pour un emplacement de réception HTTP](../core/how-to-configure-iis-for-an-http-receive-location.md).</span><span class="sxs-lookup"><span data-stu-id="5c253-217">For more information, see [How to Configure IIS for an HTTP Receive Location](../core/how-to-configure-iis-for-an-http-receive-location.md).</span></span>  
  
## <a name="running-the-sample"></a><span data-ttu-id="5c253-218">Exécution de l’exemple</span><span class="sxs-lookup"><span data-stu-id="5c253-218">Running the Sample</span></span>  
 <span data-ttu-id="5c253-219">Avant d'exécuter l'exemple avec le bilan d'exploitation correct, recourez à la procédure suivante pour s'assurer que l'exemple de cas « absence d'erreur » fonctionne correctement.</span><span class="sxs-lookup"><span data-stu-id="5c253-219">Before running the sample with the correct expense report, use the following procedure to verify that the "no errors" case sample works correctly.</span></span>  
  
#### <a name="to-verify-that-the-no-errors-case-sample-works-correctly"></a><span data-ttu-id="5c253-220">Pour vérifier le bon fonctionnement de l'exemple de cas « absence d'erreur »</span><span class="sxs-lookup"><span data-stu-id="5c253-220">To verify that the "no errors" case sample works correctly</span></span>  
  
1.  <span data-ttu-id="5c253-221">Ouvrez le formulaire InfoPath **Expense Report - John Doe.xml**.</span><span class="sxs-lookup"><span data-stu-id="5c253-221">Open the InfoPath form **Expense Report - John Doe.xml**.</span></span> <span data-ttu-id="5c253-222">Examinez le **service** champ dans le formulaire.</span><span class="sxs-lookup"><span data-stu-id="5c253-222">Look at the **Department** field within the form.</span></span> <span data-ttu-id="5c253-223">Ce champ doit être réglé sur « Marketing ».</span><span class="sxs-lookup"><span data-stu-id="5c253-223">This field should be set to "Marketing".</span></span>  
  
2.  <span data-ttu-id="5c253-224">Dans le coin supérieur gauche de la fenêtre InfoPath, cliquez sur **Submit** ou cliquez sur **renvoyer le bilan**.</span><span class="sxs-lookup"><span data-stu-id="5c253-224">In the upper-left corner of the InfoPath window, click **Submit** or click **Resubmit Expense Report**.</span></span> <span data-ttu-id="5c253-225">Attendez confirmation que le bilan d'exploitation a bien été envoyé.</span><span class="sxs-lookup"><span data-stu-id="5c253-225">Wait for a confirmation window that says the expense report was successfully submitted.</span></span>  
  
     <span data-ttu-id="5c253-226">-OU-</span><span class="sxs-lookup"><span data-stu-id="5c253-226">-OR-</span></span>  
  
     <span data-ttu-id="5c253-227">Copiez et collez ce fichier dans le **ExpenseReportIn** dossier.</span><span class="sxs-lookup"><span data-stu-id="5c253-227">Copy and paste this file into the **ExpenseReportIn** folder.</span></span>  
  
3.  <span data-ttu-id="5c253-228">Vous devez voir un nouveau fichier déposé dans le **ExpenseReportOut** dossier.</span><span class="sxs-lookup"><span data-stu-id="5c253-228">You should see a new file dropped into the **ExpenseReportOut** folder.</span></span> <span data-ttu-id="5c253-229">Ce fichier est le même formulaire de bilan d'exploitation envoyé à l'étape précédente.</span><span class="sxs-lookup"><span data-stu-id="5c253-229">This file is the same expense report form that was submitted during previous steps.</span></span>  
  
 <span data-ttu-id="5c253-230">Après avoir confirmé le cas « absence d'erreur », suivez la procédure suivante pour exécuter l'exemple avec un bilan d'exploitation incorrect afin de déclencher la fonctionnalité de gestion des erreurs.</span><span class="sxs-lookup"><span data-stu-id="5c253-230">After you confirm the "no errors" case, use the following procedure to run the sample with an incorrect expense report to trigger error-handling functionality.</span></span>  
  
#### <a name="to-trigger-error-handling"></a><span data-ttu-id="5c253-231">Pour déclencher la gestion des erreurs</span><span class="sxs-lookup"><span data-stu-id="5c253-231">To trigger error handling</span></span>  
  
1.  <span data-ttu-id="5c253-232">Ouvrez le formulaire InfoPath **Invalid Expense Report - John Doe.xml**.</span><span class="sxs-lookup"><span data-stu-id="5c253-232">Open the InfoPath form **Invalid Expense Report - John Doe.xml**.</span></span> <span data-ttu-id="5c253-233">Examinez le **service** champ dans le formulaire.</span><span class="sxs-lookup"><span data-stu-id="5c253-233">Look at the **Department** field within the form.</span></span> <span data-ttu-id="5c253-234">Ce champ est réglé sur une valeur non valide.</span><span class="sxs-lookup"><span data-stu-id="5c253-234">This field is set to some invalid value.</span></span>  
  
2.  <span data-ttu-id="5c253-235">Dans le coin supérieur gauche de la fenêtre InfoPath, cliquez sur **Submit**.</span><span class="sxs-lookup"><span data-stu-id="5c253-235">In the upper-left corner of the InfoPath window, click **Submit**.</span></span> <span data-ttu-id="5c253-236">Attendez confirmation que le bilan d'exploitation a bien été envoyé.</span><span class="sxs-lookup"><span data-stu-id="5c253-236">Wait for a confirmation window that says the expense report was successfully submitted.</span></span>  
  
     <span data-ttu-id="5c253-237">-OU-</span><span class="sxs-lookup"><span data-stu-id="5c253-237">-OR-</span></span>  
  
     <span data-ttu-id="5c253-238">Copiez et collez ce fichier dans le **ExpenseReportIn** dossier.</span><span class="sxs-lookup"><span data-stu-id="5c253-238">Copy and paste this file into the **ExpenseReportIn** folder.</span></span>  
  
3.  <span data-ttu-id="5c253-239">Vous devez voir un nouveau fichier appelé **ErrorReport_\<***date*_*temps***> .xml** déposé dans le  **ExpenseReportOut** dossier.</span><span class="sxs-lookup"><span data-stu-id="5c253-239">You should see a new file called **ErrorReport_\<***date*_*time***>.xml** dropped into the **ExpenseReportOut** folder.</span></span>  
  
     <span data-ttu-id="5c253-240">Ouvrez ce fichier et vérifiez qu'il s'agit du bilan d'exploitation envoyé à l'étape précédente mais avec les informations d'erreur ajoutées au début.</span><span class="sxs-lookup"><span data-stu-id="5c253-240">Open this file and observe that this is the expense report submitted in the previous step but with the error information added at the beginning.</span></span>  
  
4.  <span data-ttu-id="5c253-241">Remplacez la valeur de département erronée par « Marketing », puis cliquez sur **Submit** dans le coin supérieur gauche de la fenêtre InfoPath.</span><span class="sxs-lookup"><span data-stu-id="5c253-241">Replace the erroneous department value with "Marketing", and then click **Submit** in the upper-left corner of the InfoPath window.</span></span>  
  
     <span data-ttu-id="5c253-242">-OU-</span><span class="sxs-lookup"><span data-stu-id="5c253-242">-OR-</span></span>  
  
     <span data-ttu-id="5c253-243">Copiez et collez ce fichier dans le **ResubmittedReportIn** dossier.</span><span class="sxs-lookup"><span data-stu-id="5c253-243">Copy and paste this file into the **ResubmittedReportIn** folder.</span></span>  
  
5.  <span data-ttu-id="5c253-244">Vous devez voir un nouveau fichier créé dans le **ExpenseReportOut** dossier.</span><span class="sxs-lookup"><span data-stu-id="5c253-244">You should see a new file created in the **ExpenseReportOut** folder.</span></span> <span data-ttu-id="5c253-245">Ce fichier est le bilan d'exploitation corrigé qui a été renvoyé au serveur.</span><span class="sxs-lookup"><span data-stu-id="5c253-245">This file is the corrected expense report that was resubmitted into the server.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5c253-246">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="5c253-246">See Also</span></span>  
 <span data-ttu-id="5c253-247">[À l’aide de routage des messages ayant échoué](../core/using-failed-message-routing.md) </span><span class="sxs-lookup"><span data-stu-id="5c253-247">[Using Failed Message Routing](../core/using-failed-message-routing.md) </span></span>  
 [<span data-ttu-id="5c253-248">Messagerie (dossier d’exemples BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="5c253-248">Messaging (BizTalk Server Samples Folder)</span></span>](../core/messaging-biztalk-server-samples-folder.md)