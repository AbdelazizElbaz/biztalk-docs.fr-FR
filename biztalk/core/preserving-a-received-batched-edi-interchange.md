---
title: "En conservant un reçu par lot échange EDI | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 10d21b9b-9684-422a-8948-8bd71a4d5a10
caps.latest.revision: "20"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: de14760110eedd002ee01527d57f82c3d6a1aa02
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="preserving-a-received-batched-edi-interchange"></a><span data-ttu-id="e063f-102">Conservation d'un échange EDI reçu traité par lot</span><span class="sxs-lookup"><span data-stu-id="e063f-102">Preserving a Received Batched EDI Interchange</span></span>
> [!NOTE]
>  <span data-ttu-id="e063f-103">Toutes les options d’interface utilisateur mentionnées dans cette rubrique sont disponibles dans le **paramètres d’hôte Local** page (**paramètres du récepteur** section) des onglets d’accord bidirectionnel de la  **Propriétés de l’accord** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="e063f-103">All the user interface options mentioned in this topic are available in the **Local Host Settings** page (**Receiver’s Settings** section) of the bi-directional agreement tabs in the **Agreement Properties** dialog box.</span></span>  
  
 <span data-ttu-id="e063f-104">Lorsque le pipeline de réception EDI conserve un échange EDI entrant par lot, l'analyse normale de chaque document informatisé/message en fichiers XML intermédiaires distincts n'a pas lieu.</span><span class="sxs-lookup"><span data-stu-id="e063f-104">When the EDI receive pipeline preserves an inbound batched EDI interchange, the normal parsing of each transaction set/message into separate intermediate XML files is not performed.</span></span> <span data-ttu-id="e063f-105">Le pipeline de réception EDI traite l'échange comme un document unique sans fractionner les documents informatisés/messages.</span><span class="sxs-lookup"><span data-stu-id="e063f-105">The EDI receive pipeline processes the interchange as one document without splitting the transaction sets/messages.</span></span> <span data-ttu-id="e063f-106">Cela se produit lorsque le **entrants option de traitement par lots** est définie sur **préserver l’échange : suspendre l’échange en cas d’erreur** ou **préserver l’échange : suspendre les documents informatisés sur Erreur**.</span><span class="sxs-lookup"><span data-stu-id="e063f-106">This occurs when the **Inbound batch processing option** property is set to **Preserve Interchange - suspend Interchange on Error** or **Preserve Interchange - suspend Transaction Sets on Error**.</span></span>  
  
 <span data-ttu-id="e063f-107">**Validation de schéma**</span><span class="sxs-lookup"><span data-stu-id="e063f-107">**Schema Validation**</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="e063f-108"> valide l'enveloppe d'un lot préservé en utilisant les schémas de lot et les schémas de service.</span><span class="sxs-lookup"><span data-stu-id="e063f-108"> validates the envelope of a preserved batch using the batch schemas and the service schemas.</span></span> <span data-ttu-id="e063f-109">Le schéma de lot est utilisé pour valider le nœud racine du message préservé : les schémas de service sont utilisés pour valider les en-tête et les codes de fin d'échange, de groupe, et de document informatisé.</span><span class="sxs-lookup"><span data-stu-id="e063f-109">The batch schema is used to validate the root node of the preserved message; the service schemas are used to validate the interchange, group, and transaction set headers and trailers.</span></span> <span data-ttu-id="e063f-110">Pour plus d’informations sur les schémas de lot, consultez [schémas de lot EDI](../core/edi-batch-schemas.md).</span><span class="sxs-lookup"><span data-stu-id="e063f-110">For more information about the batch schemas, see [EDI Batch Schemas](../core/edi-batch-schemas.md).</span></span> <span data-ttu-id="e063f-111">Pour plus d’informations sur les schémas de service, consultez [Service EDI et des schémas de contrôle](../core/edi-service-and-control-schemas.md).</span><span class="sxs-lookup"><span data-stu-id="e063f-111">For more information on the service schemas, see [EDI Service and Control Schemas](../core/edi-service-and-control-schemas.md).</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="e063f-112"> valide les documents dans un échange traité par lot à l'aide des schémas de document de votre projet.</span><span class="sxs-lookup"><span data-stu-id="e063f-112"> validates the documents in a batched interchange using the document schemas in your project.</span></span>  
  
 <span data-ttu-id="e063f-113">**Traitement côté réception**</span><span class="sxs-lookup"><span data-stu-id="e063f-113">**Receive-Side Processing**</span></span>  
  
 <span data-ttu-id="e063f-114">Le Désassembleur EDI traite les lots conservés comme suit :</span><span class="sxs-lookup"><span data-stu-id="e063f-114">The EDI Disassembler processes preserved batches as follows:</span></span>  
  
-   <span data-ttu-id="e063f-115">Lorsque le Désassembleur EDI traite un lot pour le conserver, il convertit le format de fichier plat en format XML et ajoute X12InterchangeXML ou EdifactInterchangeXML comme nœud racine XML.</span><span class="sxs-lookup"><span data-stu-id="e063f-115">When the EDI Disassembler processes a batch to be preserved, it converts the flat file format to XML and adds the X12InterchangeXML or EdifactInterchangeXML as the XML root node.</span></span> <span data-ttu-id="e063f-116">Cette opération indique au pipeline d'envoi que l'échange par lot doit être conservé et que le schéma Edifact_BatchSchema ou X12_BatchSchema doit servir à valider le nœud racine.</span><span class="sxs-lookup"><span data-stu-id="e063f-116">This indicates to the send pipeline that the batched interchange should be preserved, and indicates that the Edifact_BatchSchema schema or X12_BatchSchema schema should be used to validate the root node.</span></span>  
  
-   <span data-ttu-id="e063f-117">Le Désassembleur ajoute l'attribut DelimiterSetSerializedData au nœud racine d'un message XML par lot afin d'indiquer les séparateurs que le pipeline d'envoi devra utiliser pour générer un échange EDI par lot à partir du message XML.</span><span class="sxs-lookup"><span data-stu-id="e063f-117">The Disassembler adds the DelimiterSetSerializedData attribute to the root node of a batched XML message to indicate the separators to be used by the send pipeline when generating a batched EDI interchange from the XML message.</span></span> <span data-ttu-id="e063f-118">Lorsque le message XML est un lot conservé, l'attribut est défini par le pipeline de réception à partir des séparateurs utilisés dans le message entrant.</span><span class="sxs-lookup"><span data-stu-id="e063f-118">When the XML message is a preserved batch, the attribute is populated by the receive pipeline from the separators used in the incoming message.</span></span> <span data-ttu-id="e063f-119">Lorsque le message XML par lot est produit par l'orchestration du traitement par lot, l'attribut est défini d'après la valeur spécifiée dans les propriétés de l'accord.</span><span class="sxs-lookup"><span data-stu-id="e063f-119">When the batched XML is produced by the batching orchestration, the attribute is populated from the value specified in agreement properties.</span></span>  
  
-   <span data-ttu-id="e063f-120">Le Désassembleur utilise l'un des espaces de noms suivants lorsqu'il crée un échange XML conservé : `http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006/InterchangeXML` ou `http://schemas.microsoft.com/BizTalk/EDI/X12/2006/InterchangeXML`.</span><span class="sxs-lookup"><span data-stu-id="e063f-120">The Disassembler uses one of the following namespaces when it creates an XML-encoded preserved interchange: `http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006/InterchangeXML` or `http://schemas.microsoft.com/BizTalk/EDI/X12/2006/InterchangeXML`.</span></span>  
  
-   <span data-ttu-id="e063f-121">Le Désassembleur promeut la propriété de contexte `EDI.ReuseEnvelope == True` pour identifier l'échange comme conservé.</span><span class="sxs-lookup"><span data-stu-id="e063f-121">The Disassembler promotes the context property `EDI.ReuseEnvelope == True` to identify the interchange as preserved.</span></span> <span data-ttu-id="e063f-122">Ceci vous permet de créer un port d'envoi qui s'abonne à tous les échanges par lot conservés.</span><span class="sxs-lookup"><span data-stu-id="e063f-122">This enables you to create a send port that subscribes to all batched interchanges that are preserved.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="e063f-123">Un document HIPAA n’est pas fractionné en sous-documents si le **entrants option de traitement par lots** a la valeur **préserver l’échange**.</span><span class="sxs-lookup"><span data-stu-id="e063f-123">A HIPAA document will not be split into subdocuments if the **Inbound batch processing option** is set to **Preserve Interchange**.</span></span> <span data-ttu-id="e063f-124">Ce sera le cas même si l'annotation subdocument creation break a la valeur « Oui » dans le schéma HIPAA.</span><span class="sxs-lookup"><span data-stu-id="e063f-124">This will be the case even if the subdocument creation break annotation within the HIPAA schema is set to "Yes".</span></span>  
  
 <span data-ttu-id="e063f-125">**Erreur lors du traitement**</span><span class="sxs-lookup"><span data-stu-id="e063f-125">**Error Processing**</span></span>  
  
 <span data-ttu-id="e063f-126">Si vous avez sélectionné **préserver l’échange : suspendre l’échange en cas d’erreur** pour le **entrants option de traitement par lots**, tout l’échange sera suspendu en cas d’erreur.</span><span class="sxs-lookup"><span data-stu-id="e063f-126">If you have selected **Preserve Interchange - suspend Interchange on Error** for the **Inbound batch processing option**, the entire interchange will be suspended as a result of any error.</span></span> <span data-ttu-id="e063f-127">Si [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] suspend l'ensemble de l'échange conservé, la structure de l'échange et le classement des documents informatisés dans l'échange sont conservés.</span><span class="sxs-lookup"><span data-stu-id="e063f-127">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] suspends the entire preserved interchange, the interchange structure and the ordering of the transaction sets within the interchange will be preserved.</span></span> <span data-ttu-id="e063f-128">Si une erreur se produit, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] publie une entrée d'erreur consolidée dans le journal des événements.</span><span class="sxs-lookup"><span data-stu-id="e063f-128">In the event of an error, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will post one consolidated error entry in the event log.</span></span> <span data-ttu-id="e063f-129">Cette entrée inclut toutes les erreurs au niveau de l'échange, du groupe fonctionnel et des documents informatisés.</span><span class="sxs-lookup"><span data-stu-id="e063f-129">This entry will include any errors in the interchange, functional group, and transaction set levels.</span></span>  
  
 <span data-ttu-id="e063f-130">Si vous avez sélectionné **préserver l’échange : suspendre les documents informatisés en cas d’erreur** pour le traitement par lot entrant option, de réception EDI pipeline supprime tout ensemble de transaction non valide à partir de l’échange et procède à la création de l’échange XML.</span><span class="sxs-lookup"><span data-stu-id="e063f-130">If you have selected **Preserve Interchange - suspend Transaction Sets on Error** for the inbound batch processing option, the EDI receive pipeline will drop any invalid transaction set from the interchange and proceed with the creation of the interchange XML.</span></span> <span data-ttu-id="e063f-131">Le fichier XML d'échange ainsi produit est nécessaire pour réutiliser les enveloppes des segments de contrôle (ISA, GS, GE et IEA pour les échanges X12 ou UNA, UNB, UNG, UNE et UNZ pour les échanges EDIFACT).</span><span class="sxs-lookup"><span data-stu-id="e063f-131">The resulting interchange XML is required to reuse the existing control segment envelopes (ISA, GS, GE, and IEA for X12-encoded interchanges or UNA, UNB, UNG, UNE, and UNZ for EDIFACT-encoded interchanges).</span></span> <span data-ttu-id="e063f-132">L’échange sera considéré comme un document a été correctement traité. Toutefois, l’erreur sera signalée dans l’Observateur d’événements, et si un accusé de réception fonctionnel est généré, il signale l’erreur.</span><span class="sxs-lookup"><span data-stu-id="e063f-132">The interchange will be considered a successfully processed document; however, the error will be reported in the event viewer and if a functional acknowledgment is generated, it will report the error.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="e063f-133">créera une entrée distincte dans le journal des événements pour chaque ensemble de la transaction qui comporte des erreurs.</span><span class="sxs-lookup"><span data-stu-id="e063f-133"> will create a separate entry in the event log for each transaction set that is in error.</span></span> <span data-ttu-id="e063f-134">Si [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] supprime un document informatisé erroné de l’échange, la structure d’échange et de classement ne soit pas conservé.</span><span class="sxs-lookup"><span data-stu-id="e063f-134">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] drops an erroneous transaction set from the interchange, the interchange structure and ordering may not be preserved.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="e063f-135">met à jour le nombre de documents informatisés dans l’échange.</span><span class="sxs-lookup"><span data-stu-id="e063f-135"> will update the number of transaction sets in the interchange.</span></span>  
  
 <span data-ttu-id="e063f-136">Voici les cas particuliers de suspension des documents informatisés en cas d'erreur :</span><span class="sxs-lookup"><span data-stu-id="e063f-136">The following special cases apply to suspending transaction sets on error:</span></span>  
  
-   <span data-ttu-id="e063f-137">Si tous les documents informatisés d'un groupe sont non valides, chaque document informatisé est suspendu individuellement mais les segments de contrôle du groupe (sans les documents informatisés puisqu'ils ont été abandonnés) sont inclus dans le fichier XML d'échange généré.</span><span class="sxs-lookup"><span data-stu-id="e063f-137">If all transaction sets in a group are invalid, then each transaction set is suspended individually; however, the group control segments (with no transaction sets, because they have been dropped) will be included in the generated interchange XML.</span></span>  
  
-   <span data-ttu-id="e063f-138">Si tous les documents informatisés d'un échange sont non valides, chaque document informatisé est suspendu individuellement mais les segments de contrôle de l'échange (sans les documents informatisés puisqu'ils ont été abandonnés) sont inclus dans le fichier XML d'échange généré.</span><span class="sxs-lookup"><span data-stu-id="e063f-138">If all transaction sets in an interchange are invalid, then each transaction set is suspended individually; however, the interchange control segments (with no transaction sets, because they have been dropped) will be included in the generated interchange XML.</span></span>  
  
-   <span data-ttu-id="e063f-139">Si les segments de contrôle du groupe sont non valides, tous les documents informatisés du groupe sont suspendus individuellement.</span><span class="sxs-lookup"><span data-stu-id="e063f-139">If the group control segments are invalid, all transaction sets in the group will be suspended individually.</span></span>  
  
-   <span data-ttu-id="e063f-140">Si les segments de contrôle de l'échange sont non valides, tous les documents informatisés de l'échange sont suspendus individuellement et le fichier XML de l'échange n'est pas généré.</span><span class="sxs-lookup"><span data-stu-id="e063f-140">If the interchange control segments are invalid, all transaction sets in the interchange will be suspended individually, and the interchange XML will not be generated.</span></span> <span data-ttu-id="e063f-141">Une entrée est créée dans l'observateur d'événements pour l'échange rejeté.</span><span class="sxs-lookup"><span data-stu-id="e063f-141">A log in the event viewer will be created for the rejected interchange.</span></span>