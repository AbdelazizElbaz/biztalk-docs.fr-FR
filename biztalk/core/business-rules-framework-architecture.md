---
title: "Architecture de l’infrastructure des règles d’entreprise | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- Business Rules Framework, caching
- Business Rules Framework, Rule Engine Update service
- rule store [Business Rules Framework]
- Policy class [Business Rules Engine]
- Business Rules Framework, architecture
- Business Rules Framework, RuleEngine class
- Business Rules Framework, Policy class
- Business Rules Framework, authoring tools
- RuleEngine class [Business Rules Engine]
- caching, Business Rules Framework
- Business Rules Framework, fact retrievers
- architecture, Business Rules Framework
- Business Rules Framework, rule store
ms.assetid: f5570cca-7664-4180-af9c-64ef90a0022b
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a4b23723d01a29606637689966cc07246cdfbc1d
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="business-rules-framework-architecture"></a><span data-ttu-id="68bef-102">Architecture de l'infrastructure des règles d'entreprise</span><span class="sxs-lookup"><span data-stu-id="68bef-102">Business Rules Framework Architecture</span></span>
<span data-ttu-id="68bef-103">L'illustration suivante représente l'architecture des composants de l'infrastructure des règles d'entreprise.</span><span class="sxs-lookup"><span data-stu-id="68bef-103">The following figure shows the component architecture of the Business Rules Framework.</span></span>  
  
 <span data-ttu-id="68bef-104">![Architecture de composant d’infrastructure des règles métier](../core/media/ebiz-rulesarch-new.gif "ebiz_rulesarch_new")</span><span class="sxs-lookup"><span data-stu-id="68bef-104">![Business Rules Framework component architecture](../core/media/ebiz-rulesarch-new.gif "ebiz_rulesarch_new")</span></span>  
<span data-ttu-id="68bef-105">Architecture de l'infrastructure des règles d'entreprise Microsoft</span><span class="sxs-lookup"><span data-stu-id="68bef-105">Microsoft Business Rules Framework Architecture</span></span>  
  
 <span data-ttu-id="68bef-106">Les paragraphes suivants décrivent certains des composants de l'infrastructure.</span><span class="sxs-lookup"><span data-stu-id="68bef-106">Some of the components of the framework are described in the following paragraphs.</span></span>  
  
## <a name="policy-class"></a><span data-ttu-id="68bef-107">Classe de stratégie</span><span class="sxs-lookup"><span data-stu-id="68bef-107">Policy Class</span></span>  
 <span data-ttu-id="68bef-108">A **stratégie** objet est une instance unique d’une stratégie d’entreprise et fournit l’interface utilisée par les applications basées sur une règle.</span><span class="sxs-lookup"><span data-stu-id="68bef-108">A **Policy** object is a single instance of a business policy, and provides the interface that is used by rule-based applications.</span></span> <span data-ttu-id="68bef-109">Il fournit une abstraction qui libère le développeur d'applications des problèmes d'emplacement du magasin de règles, en extrayant des ensembles de règles du magasin, en instanciant des instances du moteur de règles sous-jacent et en s'assurant que les faits à long terme sont déclarés dans le moteur.</span><span class="sxs-lookup"><span data-stu-id="68bef-109">It provides an abstraction that frees the application developer from concern about the location of the rule store, extracting rule sets from the rule store, instantiating instances of the underlying rule engine, and ensuring that long-term facts are asserted into the engine.</span></span> <span data-ttu-id="68bef-110">Dans de nombreux scénarios, une application basée sur la règle utilise des instances simultanées de la **stratégie** objet.</span><span class="sxs-lookup"><span data-stu-id="68bef-110">In many scenarios, a rule-based application uses concurrent instances of the **Policy** object.</span></span> <span data-ttu-id="68bef-111">Ces instances simultanées peuvent représenter la même stratégie, des versions différentes de la même stratégie ou des versions différentes de stratégies différentes.</span><span class="sxs-lookup"><span data-stu-id="68bef-111">These concurrent instances can represent the same policy, different versions of the same policy, or different versions of different policies.</span></span>  
  
## <a name="ruleengine-class"></a><span data-ttu-id="68bef-112">Classe RuleEngine</span><span class="sxs-lookup"><span data-stu-id="68bef-112">RuleEngine Class</span></span>  
 <span data-ttu-id="68bef-113">Le **RuleEngine** objet sert le moteur d’exécution pour les stratégies d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="68bef-113">The **RuleEngine** object serves as the execution engine for business policies.</span></span> <span data-ttu-id="68bef-114">Pour l'implémentation, il utilise trois composants plug-in (analyseur, convertisseur, moteur d'inférence et intercepteur de suivi).</span><span class="sxs-lookup"><span data-stu-id="68bef-114">It uses three plug-in components (translator, inference engine, and tracking interceptor) for implementation.</span></span> <span data-ttu-id="68bef-115">A **RuleEngine** de l’objet prend un **RuleSet** de l’objet qui représente une stratégie d’entreprise en tant qu’entrée et utilise le convertisseur, moteur d’inférence et intercepteur de suivi configuré pour l’ensemble de règles à implémenter le stratégie d’entreprise définie par l’ensemble de règles.</span><span class="sxs-lookup"><span data-stu-id="68bef-115">A **RuleEngine** object takes a **RuleSet** object representing a business policy as input and uses the translator, inference engine, and tracking interceptor configured for the rule set to implement the business policy defined by the rule set.</span></span>  
  
## <a name="fact-retriever"></a><span data-ttu-id="68bef-116">Extracteur de faits</span><span class="sxs-lookup"><span data-stu-id="68bef-116">Fact Retriever</span></span>  
 <span data-ttu-id="68bef-117">Un extracteur de faits est un composant plug-in optionnel, défini par l'utilisateur, qui est responsable de la collecte des faits à long terme qui seront utilisés avec des stratégies d'entreprise.</span><span class="sxs-lookup"><span data-stu-id="68bef-117">A fact retriever is an optional, user-defined, plug-in component that is responsible for gathering long-term facts for use by business policies.</span></span> <span data-ttu-id="68bef-118">Pour plus d’informations, consultez [la création d’un extracteur de faits](../core/how-to-create-a-fact-retriever.md).</span><span class="sxs-lookup"><span data-stu-id="68bef-118">For more information, see [How to Create a Fact Retriever](../core/how-to-create-a-fact-retriever.md).</span></span>  
  
 <span data-ttu-id="68bef-119">Avant l’exécution, un **stratégie** fournit de l’instance d’objet son **RuleEngine** mémoire de travail de l’instance à l’extracteur de faits, en lui donnant la possibilité de mettre à jour l’ensemble de faits dans le moteur de règles.</span><span class="sxs-lookup"><span data-stu-id="68bef-119">Before execution, a **Policy** object instance provides its **RuleEngine** instance to the fact retriever, giving it the opportunity to update the set of facts in the rule engine's working memory.</span></span> <span data-ttu-id="68bef-120">Pour plus d’informations, consultez [les faits à court terme vs. Faits à long terme](../core/short-term-facts-vs-long-term-facts.md).</span><span class="sxs-lookup"><span data-stu-id="68bef-120">For more information, see [Short-Term Facts vs. Long-Term Facts](../core/short-term-facts-vs-long-term-facts.md).</span></span>  
  
## <a name="rule-engine-update-service"></a><span data-ttu-id="68bef-121">Service de mise à jour du moteur des règles</span><span class="sxs-lookup"><span data-stu-id="68bef-121">Rule Engine Update Service</span></span>  
 <span data-ttu-id="68bef-122">Le service de mise à jour du moteur des règles fournit des mises à jour de stratégies d'entreprise dynamiques dans un environnement distribué.</span><span class="sxs-lookup"><span data-stu-id="68bef-122">The Rule Engine Update service provides dynamic business policy updates in a distributed environment.</span></span> <span data-ttu-id="68bef-123">Une application de service de Microsoft Windows NT autostart est responsable de l’abonnement aux événements de l’annulation du déploiement qui se produisent lorsque les stratégies d’entreprise sont modifiées et de déploiement de la stratégie.</span><span class="sxs-lookup"><span data-stu-id="68bef-123">An autostart Microsoft Windows NT service application is responsible for subscribing to policy deployment and undeployment events that occur when business policies are changed.</span></span>  
  
 <span data-ttu-id="68bef-124">Dans un scénario d'entreprise classique, les stratégies d'entreprise sont déployées une fois qu'elles ont été mises à jour, testées et classées en versions.</span><span class="sxs-lookup"><span data-stu-id="68bef-124">In a typical enterprise scenario, business policies are deployed after being updated, tested, and versioned.</span></span> <span data-ttu-id="68bef-125">Le déploiement consiste à ajouter la stratégie mise à jour à un magasin de règles sécurisé et persistant, et, éventuellement, à exécuter la logique sur le magasin pour publier auprès de toutes les parties intéressées des informations sur la stratégie mise à jour (notez que seules les informations relatives à la stratégie sont publiées, pas la stratégie proprement dite).</span><span class="sxs-lookup"><span data-stu-id="68bef-125">Deployment consists of adding the updated policy to a secure, persistent rule store and optionally executing logic on the store to publish information about the updated policy to all interested parties (note that information about the policy is published and not the policy itself).</span></span>  
  
 <span data-ttu-id="68bef-126">Le service de mise à jour du moteur des règles, qui s'exécute sur un serveur hébergeant les applications basées sur des règles, reçoit la notification de mise à jour de la stratégie et met en cache les informations pour une utilisation ultérieure.</span><span class="sxs-lookup"><span data-stu-id="68bef-126">The Rule Engine Update service, running on a server hosting rule-based applications, receives the policy update notification and caches the information for subsequent use.</span></span> <span data-ttu-id="68bef-127">L'utilisation d'un modèle de publication-abonnement pour les mises à jour de stratégies vous permet de modifier quasiment en temps réel des stratégies d'entreprise, sans temps d'arrêt de service ou interruption.</span><span class="sxs-lookup"><span data-stu-id="68bef-127">The use of a pub/sub model for policy updates enables you to change business policies in near real time without service downtime or interruption.</span></span>  
  
## <a name="policyvocabulary-authoring-tools"></a><span data-ttu-id="68bef-128">Outils de création de stratégies/vocabulaires</span><span class="sxs-lookup"><span data-stu-id="68bef-128">Policy/Vocabulary Authoring Tools</span></span>  
 <span data-ttu-id="68bef-129">Dans Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], l'Éditeur des règles d'entreprise fournit des fonctions de création de stratégies et de vocabulaires aux utilisateurs finaux et développeurs.</span><span class="sxs-lookup"><span data-stu-id="68bef-129">The Business Rule Composer in Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] provides policy and vocabulary authoring capabilities to both end users and developers.</span></span>  
  
## <a name="rule-store"></a><span data-ttu-id="68bef-130">Magasin de règles</span><span class="sxs-lookup"><span data-stu-id="68bef-130">Rule Store</span></span>  
 <span data-ttu-id="68bef-131">A *magasin de règles* est un référentiel pour les stratégies d’entreprise et des vocabulaires.</span><span class="sxs-lookup"><span data-stu-id="68bef-131">A *rule store* is a repository for business policies and vocabularies.</span></span> <span data-ttu-id="68bef-132">Le référentiel peut être un simple fichier ou une base de données sécurisée, évolutive, persistante et fiable, telle que Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="68bef-132">The repository can be a simple file or a secure, scalable, persistent, and reliable database such as Microsoft SQL Server.</span></span> <span data-ttu-id="68bef-133">(SQL Server est le magasin de règles par défaut de l'infrastructure).</span><span class="sxs-lookup"><span data-stu-id="68bef-133">(SQL Server is used as the default rule store for the framework).</span></span>  
  
## <a name="caching"></a><span data-ttu-id="68bef-134">Mise en cache</span><span class="sxs-lookup"><span data-stu-id="68bef-134">Caching</span></span>  
 <span data-ttu-id="68bef-135">L’infrastructure de moteur de règles métier fournit un mécanisme de mise en cache pour **RuleEngine** instances.</span><span class="sxs-lookup"><span data-stu-id="68bef-135">The Business Rules Engine Framework provides a caching mechanism for **RuleEngine** instances.</span></span> <span data-ttu-id="68bef-136">Chaque **RuleEngine** instance contient une représentation en mémoire d’une version de stratégie spécifique.</span><span class="sxs-lookup"><span data-stu-id="68bef-136">Each **RuleEngine** instance contains an in-memory representation of a specific policy version.</span></span>  
  
 <span data-ttu-id="68bef-137">Les étapes suivantes décrivent le processus lorsqu’un nouveau **stratégie** instance est instanciée (par un appel à l’API ou l’exécution de la **appeler règles** forme) :</span><span class="sxs-lookup"><span data-stu-id="68bef-137">The following steps describe the process when a new **Policy** instance is instantiated (either with a call on the API or execution of the **Call Rules** shape):</span></span>  
  
1.  <span data-ttu-id="68bef-138">Le **stratégie** objet demandes un **RuleEngine** instance dans le cache du moteur de règles.</span><span class="sxs-lookup"><span data-stu-id="68bef-138">The **Policy** object requests a **RuleEngine** instance from the rule engine cache.</span></span>  
  
2.  <span data-ttu-id="68bef-139">Si un **RuleEngine** d’instance pour la version de stratégie existe dans le cache, le **RuleEngine** est renvoyée à la **stratégie** objet.</span><span class="sxs-lookup"><span data-stu-id="68bef-139">If a **RuleEngine** instance for the policy version exists in the cache, the **RuleEngine** instance is returned to the **Policy** object.</span></span> <span data-ttu-id="68bef-140">Si un **RuleEngine** instance n’est pas disponible, le cache crée une nouvelle instance.</span><span class="sxs-lookup"><span data-stu-id="68bef-140">If a **RuleEngine** instance is not available, the cache creates a new instance.</span></span> <span data-ttu-id="68bef-141">Lorsqu’un **RuleEngine** instance est instanciée, elle ne, à son tour, créer une nouvelle instance d’extracteur de faits s’il est configuré pour la version de stratégie.</span><span class="sxs-lookup"><span data-stu-id="68bef-141">When a **RuleEngine** instance is instantiated, it does, in turn, create a new fact retriever instance if one is configured for the policy version.</span></span>  
  
 <span data-ttu-id="68bef-142">Lorsque le **Execute** méthode est appelée sur le **stratégie** de l’objet, les étapes suivantes se produisent :</span><span class="sxs-lookup"><span data-stu-id="68bef-142">When the **Execute** method is called on the **Policy** object, the following steps occur:</span></span>  
  
1.  <span data-ttu-id="68bef-143">L’objet stratégie appelle la **UpdateFacts**méthode sur l’instance d’extracteur de faits s’il existe un extracteur de faits.</span><span class="sxs-lookup"><span data-stu-id="68bef-143">The Policy object calls the **UpdateFacts**method on the fact retriever instance if a fact retriever exists.</span></span> <span data-ttu-id="68bef-144">Implémentation de l’extracteur de faits de la méthode peut déclarer des faits à long terme dans la mémoire de travail de le **RuleEngine**.</span><span class="sxs-lookup"><span data-stu-id="68bef-144">The fact retriever's implementation of the method may assert long term facts into the working memory of the **RuleEngine**.</span></span>  
  
2.  <span data-ttu-id="68bef-145">Le **stratégie** objet déclare les faits à court terme contenus dans le **tableau** qui a été passé dans le **Execute** appeler.</span><span class="sxs-lookup"><span data-stu-id="68bef-145">The **Policy** object asserts the short term facts contained in the **Array** that was passed in the **Execute** call.</span></span>  
  
3.  <span data-ttu-id="68bef-146">Le **stratégie** les appels de l’objet **Execute** sur la **RuleEngine**.</span><span class="sxs-lookup"><span data-stu-id="68bef-146">The **Policy** object calls **Execute** on the **RuleEngine**.</span></span>  
  
4.  <span data-ttu-id="68bef-147">Le **RuleEngine** termine l’exécution et retourne le contrôle à la **stratégie**objet.</span><span class="sxs-lookup"><span data-stu-id="68bef-147">The **RuleEngine** completes execution and returns control to the **Policy**object.</span></span>  
  
5.  <span data-ttu-id="68bef-148">Le**stratégie**objet retire les faits à court terme de la **RuleEngine**.</span><span class="sxs-lookup"><span data-stu-id="68bef-148">The**Policy**object retracts the short term facts from the **RuleEngine**.</span></span> <span data-ttu-id="68bef-149">Les faits à long terme déclarés par l'extracteur de faits demeurent quant à eux dans la mémoire de travail du moteur des règles.</span><span class="sxs-lookup"><span data-stu-id="68bef-149">The long term facts asserted by the fact retriever will remain in the working memory of the rule engine.</span></span>  
  
 <span data-ttu-id="68bef-150">Après le **Dispose** méthode est appelée sur le **stratégie** objet, le **RuleEngine** instance est libérée vers le cache du moteur de règles.</span><span class="sxs-lookup"><span data-stu-id="68bef-150">After the **Dispose** method is called on the **Policy** object, the **RuleEngine** instance is released back to the rule engine cache.</span></span>  
  
 <span data-ttu-id="68bef-151">Le cache du moteur de règles possédera donc plusieurs instances du moteur de règles pour une version de stratégie donnée si la charge le requiert et si chaque instance du moteur possède sa propre instance de l'extracteur de faits.</span><span class="sxs-lookup"><span data-stu-id="68bef-151">The rule engine cache will have multiple rule engine instances for a given policy version if the load requires it, and each rule engine instance has its own fact retriever instance.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="68bef-152">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="68bef-152">See Also</span></span>  
 [<span data-ttu-id="68bef-153">Moteur des règles d’entreprise</span><span class="sxs-lookup"><span data-stu-id="68bef-153">Business Rules Engine</span></span>](../core/business-rules-engine.md)