---
title: "Convois séquentiels | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- convoy sets
- correlation sets, sequential receive tasks
ms.assetid: f05ff42c-2236-42a3-8166-19700e0c3d97
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 329d0f56d9f092cd146a900c42ed48d5206a6393
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="sequential-convoys"></a><span data-ttu-id="81325-102">Convois séquentiels</span><span class="sxs-lookup"><span data-stu-id="81325-102">Sequential Convoys</span></span>
<span data-ttu-id="81325-103">Un convoi séquentiel permet à plusieurs messages distincts d'être assemblés afin d'obtenir le résultat souhaité.</span><span class="sxs-lookup"><span data-stu-id="81325-103">A sequential convoy enables multiple single messages to join together to achieve a required result.</span></span> <span data-ttu-id="81325-104">Il s'agit d'un ensemble de messages associés présentant un ordre prédéfini.</span><span class="sxs-lookup"><span data-stu-id="81325-104">A sequential convoy is a set of related messages that have a predefined order.</span></span> <span data-ttu-id="81325-105">Bien que ces messages n'aient pas à être exactement identiques, BizTalk Server doit les recevoir dans un ordre séquentiel.</span><span class="sxs-lookup"><span data-stu-id="81325-105">Although the messages do not have to be exactly the same, BizTalk Server must receive them in a sequential order.</span></span>  
  
 <span data-ttu-id="81325-106">Supposons, par exemple, qu'une entreprise de vente au détail en ligne reçoive de nouvelles commandes de la part de clients directs et de revendeurs tout au long de la journée.</span><span class="sxs-lookup"><span data-stu-id="81325-106">For example, suppose that an online retail company receives new orders from direct clients and from dealers throughout the course of the day.</span></span> <span data-ttu-id="81325-107">Toutes les commandes reçues avant 14h doivent être dirigées vers l'entrepôt en un seul lot, et l'ordre de réception de ces commandes doit être respecté.</span><span class="sxs-lookup"><span data-stu-id="81325-107">All orders received before 2:00 PM must go to the warehouse in a single batch, and the sequence of the receipt of the orders must be preserved.</span></span> <span data-ttu-id="81325-108">Vous pouvez ainsi accorder la priorité aux premières commandes en cas de rupture de stock d'un produit donné.</span><span class="sxs-lookup"><span data-stu-id="81325-108">This enables earlier orders to have priority in case any items are out of stock in the warehouse.</span></span> <span data-ttu-id="81325-109">Vous définissez l'ordre des lots en assemblant toutes les commandes du jour en un seul fichier comportant des informations d'en-tête de lot.</span><span class="sxs-lookup"><span data-stu-id="81325-109">You build this batch order by assembling all orders for the day in a single file that has batch header information.</span></span> <span data-ttu-id="81325-110">À 14h, toutes les commandes du jour partent à l'entrepôt afin d'y être traitées.</span><span class="sxs-lookup"><span data-stu-id="81325-110">At 2:00 PM, all orders for the day go to the warehouse for processing.</span></span> <span data-ttu-id="81325-111">Toutes les commandes reçues après 14h sont placées dans un nouveau lot de façon à être traitées le jour suivant.</span><span class="sxs-lookup"><span data-stu-id="81325-111">All orders received after 2:00 PM are put into a new batch for processing on the following day.</span></span>  
  
 <span data-ttu-id="81325-112">Ceci est un exemple de processus d'entreprise qui requiert un traitement séquentiel des messages entrants.</span><span class="sxs-lookup"><span data-stu-id="81325-112">The preceding scenario is an example of a business process that requires sequential convoy processing of incoming messages.</span></span> <span data-ttu-id="81325-113">Ces exigences stipulent que toutes les commandes reçues avant 14h doivent être rassemblées dans un lot.</span><span class="sxs-lookup"><span data-stu-id="81325-113">The business requirements state that all single orders received before 2:00 PM for a specific day should batch together.</span></span> <span data-ttu-id="81325-114">Ceci implique que le premier message reçu démarre une nouvelle instance d'orchestration et initialise un ensemble de corrélations.</span><span class="sxs-lookup"><span data-stu-id="81325-114">This requires the first message received to start a new orchestration instance and initialize a correlation set.</span></span> <span data-ttu-id="81325-115">À ce stade, toutes les autres commandes reçues associées à ce type de message sont acheminées vers l'instance d'orchestration déjà en cours d'exécution.</span><span class="sxs-lookup"><span data-stu-id="81325-115">At that point, all other orders received of that message type route to the already-running orchestration instance.</span></span> <span data-ttu-id="81325-116">Pour ce faire, vous positionnez un **écouter** forme (contenant une **réception** forme et un **délai** forme) à l’intérieur d’un **boucle** forme.</span><span class="sxs-lookup"><span data-stu-id="81325-116">To accomplish this, you position a **Listen** shape (containing a **Receive** shape and a **Delay** shape) inside a **Loop** shape.</span></span> <span data-ttu-id="81325-117">Une fois le délai atteint, la boucle prend fin.</span><span class="sxs-lookup"><span data-stu-id="81325-117">After reaching the delay, the loop ends.</span></span> <span data-ttu-id="81325-118">Ceci permet la réception d'un nombre inconnu de commandes dans le même processus d'entreprise.</span><span class="sxs-lookup"><span data-stu-id="81325-118">This allows for the receipt of an unknown number of orders in the same business process.</span></span>  
  
## <a name="implementing-sequential-convoys"></a><span data-ttu-id="81325-119">Implémentation de convois séquentiels</span><span class="sxs-lookup"><span data-stu-id="81325-119">Implementing Sequential Convoys</span></span>  
 <span data-ttu-id="81325-120">Vous avez la possibilité d'implémenter des convois séquentiels à l'aide du modèle de conception de message « réceptions séquentielles corrélées » dans BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="81325-120">You can implement sequential convoys by using the "sequential correlated receives" messaging design pattern in BizTalk Server.</span></span> <span data-ttu-id="81325-121">Les réceptions séquentielles corrélées sont des réceptions corrélées à de précédentes réceptions.</span><span class="sxs-lookup"><span data-stu-id="81325-121">Sequential correlated receives are receives that are correlated to previous receives.</span></span>  
  
 <span data-ttu-id="81325-122">Le traitement en convoi a lieu lorsque les ensembles de corrélations d'une réception sont initialisés par une autre réception.</span><span class="sxs-lookup"><span data-stu-id="81325-122">Convoy processing takes place for cases in which the correlation sets for a receive are initialized by another receive.</span></span>  
  
 <span data-ttu-id="81325-123">Pour les réceptions nécessitant un traitement en convoi, les restrictions suivantes s'appliquent :</span><span class="sxs-lookup"><span data-stu-id="81325-123">For receives that require convoy processing, the following restrictions apply:</span></span>  
  
-   <span data-ttu-id="81325-124">Les ensembles de corrélations constituant des ensembles de convois séquentiels pour une réception spécifique doivent être initialisés par une réception passée.</span><span class="sxs-lookup"><span data-stu-id="81325-124">The correlation sets that constitute a sequential convoy set for a particular receive must be initialized by one preceding receive.</span></span>  
  
-   <span data-ttu-id="81325-125">Le port associé à une réception nécessitant un traitement de convoi séquentiel doit être le port de la réception initialisant l'ensemble de convois.</span><span class="sxs-lookup"><span data-stu-id="81325-125">The port for a receive that requires sequential convoy processing must be the same as the port for the receive initializing the convoy set.</span></span> <span data-ttu-id="81325-126">Les convois multiport ne sont pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="81325-126">Cross-port convoys are not supported.</span></span>  
  
-   <span data-ttu-id="81325-127">Le type de message d'une réception nécessitant un traitement en convoi doit correspondre au type de message de la réception initialisant l'ensemble de convois, sauf si l'instruction de réception est exécutée sur un port de livraison chronologique.</span><span class="sxs-lookup"><span data-stu-id="81325-127">Message types for a receive that requires convoy processing must match the message type for the receive initializing the convoy set, unless the receive statement is operating on an ordered delivery port.</span></span>  
  
-   <span data-ttu-id="81325-128">Toutes les réceptions participant à un convoi séquentiel doivent suivre tous les ensembles de corrélations initialisés (ou suivis) par la réception d'initialisation, sauf si elles sont exécutées sur un port de livraison chronologique.</span><span class="sxs-lookup"><span data-stu-id="81325-128">All receives participating in a sequential convoy must follow all the correlation sets that are initialized (or followed) by the initializing receive, unless operating on an ordered delivery port.</span></span>  
  
-   <span data-ttu-id="81325-129">Si un convoi séquentiel est initialisé par une instruction de réception avec activation, cette réception avec activation ne peut pas avoir d'expression de filtre, sauf si elle est exécutée sur un port de livraison chronologique.</span><span class="sxs-lookup"><span data-stu-id="81325-129">If a sequential convoy is initialized by an activate receive statement, then the activate receive cannot have a filter expression unless operating on an ordered delivery port.</span></span>  
  
-   <span data-ttu-id="81325-130">Si un convoi séquentiel est initialisé par une réception avec activation, les réceptions suivantes ne peuvent pas figurer dans une orchestration imbriquée.</span><span class="sxs-lookup"><span data-stu-id="81325-130">If a sequential convoy is initialized by an activate receive, the following receives cannot be inside a nested orchestration.</span></span>  
  
 <span data-ttu-id="81325-131">Pour obtenir un exemple d’implémentation de convoi séquentiel, consultez [Aggregator (exemple BizTalk Server)](../core/aggregator-biztalk-server-sample.md).</span><span class="sxs-lookup"><span data-stu-id="81325-131">For an example of sequential convoy implementation, see [Aggregator (BizTalk Server Sample)](../core/aggregator-biztalk-server-sample.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="81325-132">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="81325-132">See Also</span></span>  
 <span data-ttu-id="81325-133">[Utilisation des convois](../core/working-with-convoy-scenarios.md) </span><span class="sxs-lookup"><span data-stu-id="81325-133">[Working with Convoy Scenarios](../core/working-with-convoy-scenarios.md) </span></span>  
 [<span data-ttu-id="81325-134">Convois parallèles</span><span class="sxs-lookup"><span data-stu-id="81325-134">Parallel Convoys</span></span>](../core/parallel-convoys.md)