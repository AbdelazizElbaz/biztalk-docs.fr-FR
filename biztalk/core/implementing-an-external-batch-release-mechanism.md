---
title: "Implémentation d’un mécanisme de déclenchement externe du lot | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 5633a448-cc29-4931-a3ad-206ae25c989b
caps.latest.revision: "17"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e88b6962cc0c83ab0ac4971f481b9ac1f185ca02
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="implementing-an-external-batch-release-mechanism"></a><span data-ttu-id="4c8cf-102">Implémentation d'un mécanisme externe de déclenchement d'un lot</span><span class="sxs-lookup"><span data-stu-id="4c8cf-102">Implementing an External Batch Release Mechanism</span></span>
<span data-ttu-id="4c8cf-103">Vous pouvez activer le déclenchement d'un lot à l'aide d'un déclencheur externe.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-103">You can trigger the release of a batch using an external release trigger.</span></span> <span data-ttu-id="4c8cf-104">Le déclenchement peut être activé automatiquement par une application sectorielle principale lorsqu'un seuil spécifique est atteint.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-104">The release could be automatically triggered by a back-end, line-of-business application upon reaching a certain threshold.</span></span> <span data-ttu-id="4c8cf-105">Ce mécanisme s’ajoute automatiquement le déclenchement du lot par une planification ou un nombre de documents informatisés ou de caractères de déclenchement ou déclencher manuellement le lot en cliquant sur le **remplacer** situé dans le **lot Configuration** page de l’onglet d’accord unidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-105">This mechanism is in addition to automatically triggering the batch release by a schedule or a count of transaction sets or characters, or manually triggering the batch by clicking the **Override** button in the **Batch Configuration** page of the one-way agreement tab.</span></span>  
  
 <span data-ttu-id="4c8cf-106">Pour implémenter un déclencheur externe, vous devez configurer un port et un emplacement de réception pour le traitement de OverrideControlMessage.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-106">To implement an external release trigger, you need to set up a receive port and location to process the OverrideControlMessage.</span></span> <span data-ttu-id="4c8cf-107">L'emplacement de réception utilise le pipeline de réception `Edi.BatchControlMessageRecvPipeline`.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-107">The receive location must use the `Edi.BatchControlMessageRecvPipeline` receive pipeline.</span></span> <span data-ttu-id="4c8cf-108">Ce pipeline est également utilisé par l'emplacement de réception BatchControlMessageRecvLoc, que [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] utilise pour traiter les messages de remplacement manuel.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-108">This is the same pipeline that is used by the BatchControlMessageRecvLoc receive location that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] uses to process manual override messages.</span></span> <span data-ttu-id="4c8cf-109">Toutefois, BatchControlMessageRecvLoc est un emplacement de réception SQL tandis que l'emplacement de réception que vous configurez pour un déclencheur externe peut utiliser un autre type d'adaptateur.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-109">However, BatchControlMessageRecvLoc is a SQL-type receive location, while the receive location that you set up for an external release trigger can use any adapter type.</span></span>  
  
 <span data-ttu-id="4c8cf-110">Un déclenchement externe est exécuté par un message de contrôle XML.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-110">An external batch release is triggered by an XML control message.</span></span> <span data-ttu-id="4c8cf-111">Pour déclencher le lot, l'application principale achemine le message de contrôle vers l'emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-111">To trigger the batch, the back-end application routes the control message to the receive location.</span></span> <span data-ttu-id="4c8cf-112">Vous pouvez modifier le message de contrôle pour activer, remplacer ou arrêter le lot.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-112">You can modify the control message to activate, override, or terminate the batch.</span></span> <span data-ttu-id="4c8cf-113">Consultez la procédure suivante de création du message de contrôle.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-113">See the procedure below for creating the control message.</span></span>  
  
 <span data-ttu-id="4c8cf-114">Pour activer le déclencheur externe, vous devez sélectionner le **déclencheur externe** propriété dans le **Configuration de lot** page de la **propriétés de l’accord** boîte de dialogue zone pour X12 ou EDIFACT.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-114">To enable the external release trigger, you must select the **External release trigger** property in the **Batch Configuration** page of the **Agreement Properties** dialog box for either X12 or EDIFACT.</span></span> <span data-ttu-id="4c8cf-115">Cette propriété indique qu'un message de déclenchement externe est nécessaire pour le déclenchement du lot.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-115">This property indicates that an external release message is required for batch release.</span></span> <span data-ttu-id="4c8cf-116">Le **remplacer** bouton, **arrêter** bouton, et **Activation** des contrôles de plage restent valides si la **déclencheur externe** a de propriété été sélectionné.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-116">The **Override** button, **Stop** button, and **Activation** range controls remain valid if the **External release trigger** property has been selected.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="4c8cf-117">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="4c8cf-117">Prerequisites</span></span>  
 <span data-ttu-id="4c8cf-118">Vous devez être connecté en tant que membre du groupe d'administrateurs [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ou du groupe Opérateurs B2B de  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4c8cf-118">You must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators or [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] B2B Operators group.</span></span>  
  
### <a name="to-create-a-receive-location-for-the-external-batch-release-trigger-message"></a><span data-ttu-id="4c8cf-119">Pour créer un emplacement de réception pour le message de déclenchement externe du lot</span><span class="sxs-lookup"><span data-stu-id="4c8cf-119">To create a receive location for the external batch release trigger message</span></span>  
  
1.  <span data-ttu-id="4c8cf-120">Dans la console Administration [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], créez un port de réception unidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-120">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, create a one-way receive port.</span></span> <span data-ttu-id="4c8cf-121">Pour obtenir des instructions sur la création d’un port de réception, consultez [la création d’un Port de réception](../core/how-to-create-a-receive-port.md).</span><span class="sxs-lookup"><span data-stu-id="4c8cf-121">For instructions on how to create a receive port, see [How to Create a Receive Port](../core/how-to-create-a-receive-port.md).</span></span>  
  
2.  <span data-ttu-id="4c8cf-122">Créez un emplacement de réception unidirectionnel dans le port de réception.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-122">Create a one-way receive location in the receive port.</span></span>  
  
3.  <span data-ttu-id="4c8cf-123">Sélectionnez le type de transport.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-123">Select the transport type.</span></span> <span data-ttu-id="4c8cf-124">Vous pouvez sélectionner un type quelconque pour cet emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-124">You can select any type for this receive location.</span></span> <span data-ttu-id="4c8cf-125">Une solution courante consiste à sélectionner le type FILE et à entrer un dossier pour la réception du fichier.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-125">A common solution is to select the FILE type, and enter a folder to receive the file.</span></span>  
  
4.  <span data-ttu-id="4c8cf-126">Pour le pipeline de réception, sélectionnez `BatchControlMessageRecvPipeline`.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-126">For Receive pipeline, select `BatchControlMessageRecvPipeline`.</span></span>  
  
5.  <span data-ttu-id="4c8cf-127">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-127">Click **OK**.</span></span>  
  
### <a name="to-create-the-external-batch-release-trigger-message"></a><span data-ttu-id="4c8cf-128">Pour créer le message de déclenchement externe du lot</span><span class="sxs-lookup"><span data-stu-id="4c8cf-128">To create the external batch release trigger message</span></span>  
  
1.  <span data-ttu-id="4c8cf-129">Dans le Bloc-notes, créez un fichier et nommez celui-ci avec une extension .xml.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-129">In Notepad, create a new file and name it with an .xml extension.</span></span>  
  
2.  <span data-ttu-id="4c8cf-130">Ajoutez le fragment de code suivant au fichier :</span><span class="sxs-lookup"><span data-stu-id="4c8cf-130">Add the following to the file:</span></span>  
  
    ```  
    <?xml version="1.0" encoding="utf-8"?>  
    <ControlMessage xmlns="http://SQLControlMessage.IssueSelect">  
      <PAM_Control xmlns="http://SQLControlMessage.IssueSelect">  
        <DestinationParty>[Party ID]</DestinationParty>  
        <EdiMessageType>[0 for X12\HIPAA|1 for Edifact]</EdiMessageType>  
        <ActionType>EdiBatchOverride</ActionType>  
        <ActionDateTime>[yyyy-mm-ddThh:mm:ss.sss]</ActionDateTime>  
        <UsedOnce>0</UsedOnce>  
        <BatchId>[Batch ID]</BatchId>  
        <BatchName>[Batch Name]</BatchName>  
        <DestinationPartyName>[Destination Party/Partner name]</DestinationPartyName>  
        <SenderPartyName>[Sender Party/Partner name]</SenderPartyName>  
        <AgreementName>[Agreement Name]</AgreementName>  
        <ReceiverPartyNameType>[Receiver Party/Partner name]</ReceiverPartyNameType>  
        <ToBeBatched>1</ToBeBatched>  
      </PAM_Control>  
    </ControlMessage>  
    ```  
  
     <span data-ttu-id="4c8cf-131">Remplacez les valeurs du fragment ci-dessus comme suit :</span><span class="sxs-lookup"><span data-stu-id="4c8cf-131">Replace the values in the above excerpt as follows:</span></span>  
  
    -   <span data-ttu-id="4c8cf-132">Spécifiez le type d'action.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-132">Specify the action type.</span></span> <span data-ttu-id="4c8cf-133">En règle générale, les **ActionType** doit avoir la valeur **EdiBatchOverride** pour remplacer les paramètres de lot définis dans l’accord.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-133">Typically, the **ActionType** must be set to **EdiBatchOverride** to override the batch settings done in the agreement.</span></span> <span data-ttu-id="4c8cf-134">Vous pouvez également définir cette option **EdiBatchTerminate** pour arrêter le lot via un déclencheur externe.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-134">You can also set this to **EdiBatchTerminate** to terminate the batch through an external trigger.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="4c8cf-135">Il est déconseillé d'utiliser un déclencheur externe pour activer un lot.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-135">Microsoft recommends you should not use external release trigger to activate a batch.</span></span> <span data-ttu-id="4c8cf-136">Par conséquent, vous ne devez pas spécifier **ActionType** en tant que **ActionType**.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-136">So, you should not specify **ActionType** as **EdiBatchActivate**.</span></span>  
  
    -   <span data-ttu-id="4c8cf-137">Déterminez l'ID et le nom du lot.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-137">Determine the Batch ID and Batch Name.</span></span> <span data-ttu-id="4c8cf-138">Pour ce faire, ouvrez le **propriétés de l’accord** boîte de dialogue, puis sur l’onglet d’accord unidirectionnel, cliquez sur **Configuration de lot**.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-138">To do so, open the **Agreement Properties** dialog box, and on the one-way agreement tab, click **Batch Configuration**.</span></span> <span data-ttu-id="4c8cf-139">Cliquez sur l’onglet du lot devant être remplacée et entrez la valeur de **nom** et **ID de lot** champs dans le **BatchName** et **BatchID**nœuds du message de contrôle.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-139">Click the tab for the batch to be overridden and enter the value of **Batch name** and **Batch ID** fields into the **BatchName** and **BatchID** nodes of the control message.</span></span>  
  
    -   <span data-ttu-id="4c8cf-140">Spécifiez le nom du tiers de destination.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-140">Specify the destination party name.</span></span> <span data-ttu-id="4c8cf-141">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, cliquez sur le **Parties** nœud et à partir de la **tiers et profils d’entreprise** page, obtenir le nom du tiers/partenaire qui recevra le par lot échanges.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-141">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, click the **Parties** node, and from the **Parties and Business Profiles** page, get the name of the party/partner that will be receiving the batched interchanges.</span></span> <span data-ttu-id="4c8cf-142">Entrez le nom dans la **ReceiverPartyNameType** nœud du message de contrôle.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-142">Enter the name in the **ReceiverPartyNameType** node of the control message.</span></span>  
  
    -   <span data-ttu-id="4c8cf-143">Spécifiez le nom du tiers expéditeur.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-143">Specify the sender party name.</span></span> <span data-ttu-id="4c8cf-144">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, cliquez sur le **Parties** nœud et à partir de la **tiers et profils d’entreprise** page, obtenir le nom du tiers/partenaire qui enverra les échanges traités par lot .</span><span class="sxs-lookup"><span data-stu-id="4c8cf-144">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, click the **Parties** node, and from the **Parties and Business Profiles** page, get the name of the party/partner that will be sending the batched interchanges.</span></span> <span data-ttu-id="4c8cf-145">Entrez le nom dans la **SenderPartyName** nœud du message de contrôle.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-145">Enter the name in the **SenderPartyName** node of the control message.</span></span>  
  
    -   <span data-ttu-id="4c8cf-146">Spécifiez le nom de l'accord.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-146">Specify the agreement name.</span></span> <span data-ttu-id="4c8cf-147">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, cliquez sur le **Parties** nœud et à partir de la **tiers et profils d’entreprise** page, dans le **accords** section, avec le bouton droit de l’accord contenant la configuration de lot devant être remplacée à l’aide du message de contrôle, puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-147">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, click the **Parties** node, and from the **Parties and Business Profiles** page, in the **Agreements** section, right-click the agreement that has the batch configuration that needs be to overridden using the control message, and then click **Properties**.</span></span> <span data-ttu-id="4c8cf-148">Dans le **propriétés de l’accord** boîte de dialogue le **général** sous l’onglet dans le **propriétés générales** page, copiez la valeur à partir de la **nom** champ dans le **paramètres de l’accord** section, puis collez-le dans le **AgreementName** nœud du message de contrôle.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-148">In the **Agreement Properties** dialog box, in the **General** tab, on the **General Properties** page, copy the value from the **Name** field in the **Agreement Parameters** section, and paste it in the **AgreementName** node of the control message.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="4c8cf-149">Il n'est pas nécessaire de spécifier un ID de tiers de destination.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-149">You do not need to specify a destination party ID.</span></span> <span data-ttu-id="4c8cf-150">Cet élément est requis dans le message de contrôle uniquement à des fins de compatibilité descendante.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-150">The element is required in the control message only for backward compatibility.</span></span>  
  
3.  <span data-ttu-id="4c8cf-151">Enregistrez le fichier.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-151">Save the file.</span></span>  
  
### <a name="to-enable-the-external-release-trigger"></a><span data-ttu-id="4c8cf-152">Pour activer le déclencheur externe</span><span class="sxs-lookup"><span data-stu-id="4c8cf-152">To enable the external release trigger</span></span>  
  
1.  <span data-ttu-id="4c8cf-153">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, cliquez sur le **Parties** nœud et à partir de la **tiers et profils d’entreprise** page, dans le **accords** section, avec le bouton droit de l’accord contenant la configuration de lot devant être remplacée à l’aide du message de contrôle, puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-153">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, click the **Parties** node, and from the **Parties and Business Profiles** page, in the **Agreements** section, right-click the agreement that has the batch configuration that needs be to overridden using the control message, and then click **Properties**.</span></span> <span data-ttu-id="4c8cf-154">Dans le **propriétés de l’accord** boîte de dialogue, sous l’onglet d’accord unidirectionnel, cliquez sur **Configuration de lot**.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-154">In the **Agreement Properties** dialog box, on the one-way agreement tab, click **Batch Configuration**.</span></span>  
  
2.  <span data-ttu-id="4c8cf-155">Dans le **Configuration de lot** , cliquez sur l’onglet du lot pour lequel vous voulez avoir un déclencheur externe, puis, sous la **Release** section, sélectionnez **déclencheur externe** .</span><span class="sxs-lookup"><span data-stu-id="4c8cf-155">In the **Batch Configuration** page, click the tab for the batch for which you want to have an external release trigger, and then under the **Release** section, select **External release trigger**.</span></span>  
  
3.  <span data-ttu-id="4c8cf-156">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="4c8cf-156">Click **OK**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4c8cf-157">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="4c8cf-157">See Also</span></span>  
 <span data-ttu-id="4c8cf-158">[Configuration des lots EDI](../core/configuring-edi-batches.md) </span><span class="sxs-lookup"><span data-stu-id="4c8cf-158">[Configuring EDI Batches](../core/configuring-edi-batches.md) </span></span>  
 [<span data-ttu-id="4c8cf-159">Comment créer un emplacement de réception</span><span class="sxs-lookup"><span data-stu-id="4c8cf-159">How to Create a Receive Location</span></span>](../core/how-to-create-a-receive-location.md)