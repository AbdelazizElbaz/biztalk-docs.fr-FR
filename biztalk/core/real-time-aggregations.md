---
title: "Les agrégations en temps réel | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- BAM, aggregations
- aggregations [BAM], real-time data
ms.assetid: 0ef44641-e067-4108-b318-f4373ca8fa8f
caps.latest.revision: "9"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c1bc335c1c53fe106c460b7dcb5a27b803db97b1
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="real-time-aggregations"></a><span data-ttu-id="4cc76-102">Agrégations RTA (Real-Time Aggregations)</span><span class="sxs-lookup"><span data-stu-id="4cc76-102">Real-Time Aggregations</span></span>
<span data-ttu-id="4cc76-103">Dans certains cas, des tranches spécifiques d'agrégations multidimensionnelles varient tellement rapidement dans le temps qu'elles doivent être disponibles en temps réel.</span><span class="sxs-lookup"><span data-stu-id="4cc76-103">In some cases, specific slices of the multidimensional aggregations are so time-sensitive that you want them to be available in real time.</span></span> <span data-ttu-id="4cc76-104">Supposons que votre entreprise vende des denrées périssables et que vous souhaitiez que l'agrégation des quantités de produits aux différentes étapes de la livraison soit disponible en temps réel.</span><span class="sxs-lookup"><span data-stu-id="4cc76-104">For example, your business is selling perishable products and you want the aggregation of product quantity in different stages of delivery to be available in real time.</span></span> <span data-ttu-id="4cc76-105">D'autre part, vous voulez disposer d'autres agrégations, comme celle de l'âge du consommateur moyen, mais uniquement à la fin du mois en vue d'une analyse Business Intelligence.</span><span class="sxs-lookup"><span data-stu-id="4cc76-105">At the same time, you want other aggregations such as the age of your typical customers, but only at the end of the month for business intelligence analysis.</span></span>  
  
 <span data-ttu-id="4cc76-106">Le composant BAM met alors en place une agrégation RTA sous forme de table gérée par des déclencheurs provenant eux-mêmes des tables de stockage de l'activité.</span><span class="sxs-lookup"><span data-stu-id="4cc76-106">BAM implements real-time aggregation (RTA) as a table maintained by triggers from the activity storage tables.</span></span> <span data-ttu-id="4cc76-107">En considérant que votre activité implique l'utilisation de bons de commandes (BC), l'agrégation RTA est susceptible de s'afficher comme présenté dans la figure ci-après.</span><span class="sxs-lookup"><span data-stu-id="4cc76-107">In the case when your business deals with purchase orders (PO), the RTA view may look like the example in the following figure.</span></span>  
  
 ![](../core/media/bam-realtime-aggregations.gif "bam_realtime_aggregations")  
<span data-ttu-id="4cc76-108">Agrégations RTA BAM</span><span class="sxs-lookup"><span data-stu-id="4cc76-108">BAM Real-time Aggregations</span></span>  
  
 <span data-ttu-id="4cc76-109">Dans ce schéma, si un nouveau bon de commande de 100 dollars provenant de Redmond est reçu, l'analyse BAM ajoute une contribution dans les cellules de la ligne {Redmond, InProcess} en effectuant une opération telle que `Count=Count+1` et `Amount=Amount+$100`.</span><span class="sxs-lookup"><span data-stu-id="4cc76-109">In this figure, if a new PO of $100 from Redmond is received, BAM adds a contribution to the cells in the corresponding row for {Redmond, InProcess} by performing an operation like `Count=Count+1` and `Amount=Amount+$100`.</span></span>  
  
 <span data-ttu-id="4cc76-110">Lorsque cette commande passe à l'étape de l'expédition, l'analyse BAM supprime la contribution de la ligne {Redmond, InProcess} et l'ajoute à la ligne {Redmond, Shipped}.</span><span class="sxs-lookup"><span data-stu-id="4cc76-110">Later, if the same order ships, then BAM removes this contribution from the row {Redmond, InProcess} and adds it to the row {Redmond, Shipped}.</span></span>  
  
 <span data-ttu-id="4cc76-111">L'analyse BAM gère les données d'une agrégation RTA pour une fenêtre en ligne donnée, puis les supprime.</span><span class="sxs-lookup"><span data-stu-id="4cc76-111">BAM maintains the data inside RTA for a given online window, and then deletes it.</span></span> <span data-ttu-id="4cc76-112">Vous pouvez configurer la fenêtre en ligne en modifiant la ligne correspondante de la table **bam_Metadata_RealTimeAggregations**.</span><span class="sxs-lookup"><span data-stu-id="4cc76-112">You can configure the online window by changing the corresponding row of the table **bam_Metadata_RealTimeAggregations**.</span></span>  
  
 <span data-ttu-id="4cc76-113">En matière d'agrégations en temps réél, prenez également en compte les considérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="4cc76-113">The following statements also apply to real-time aggregations:</span></span>  
  
-   <span data-ttu-id="4cc76-114">Les agrégations en temps réel ont un impact non négligeable sur la vitesse à laquelle le composant BAM peut écrire les données.</span><span class="sxs-lookup"><span data-stu-id="4cc76-114">Real-time aggregations significantly affect the speed at which BAM can write data.</span></span> <span data-ttu-id="4cc76-115">Il est donc recommandé de définir en tant qu'agrégations RTA uniquement les tranches de données les plus importantes de votre structure d'agrégations.</span><span class="sxs-lookup"><span data-stu-id="4cc76-115">Thus, you should only define the most important slices of the aggregation structure as RTA.</span></span>  
  
-   <span data-ttu-id="4cc76-116">La limitation des niveaux de dimension pour les agrégations en temps réel est 14.</span><span class="sxs-lookup"><span data-stu-id="4cc76-116">The limitation of the dimension levels for real-time aggregations is 14.</span></span> <span data-ttu-id="4cc76-117">Par exemple, si vous créez un emplacement de la Dimension de données pour l’état et ville, cela compte comme deux niveaux (état et ville).</span><span class="sxs-lookup"><span data-stu-id="4cc76-117">For example, if you create a Data Dimension Location for State and City, this counts as two levels (State and City).</span></span> <span data-ttu-id="4cc76-118">Pour les dimensions de la progression, le nombre de niveaux possible correspond à celui de l'arborescence et pour les dimensions de temps, le nombre de niveaux correspond au nombre de sous-éléments.</span><span class="sxs-lookup"><span data-stu-id="4cc76-118">For Progress Dimensions the number of levels is the depth of the tree, and for Time Dimensions it is the count of all sub-units.</span></span> <span data-ttu-id="4cc76-119">Par exemple, une Dimension de temps pour l’année, mois, jour, heure sera comptée comme quatre niveaux.</span><span class="sxs-lookup"><span data-stu-id="4cc76-119">For example, a Time Dimension for Year, Month, Day, Hour will count as four levels.</span></span>  
  
-   <span data-ttu-id="4cc76-120">BAM ne prend pas en charge les agrégations en temps réel de type **Min** et **Max**.</span><span class="sxs-lookup"><span data-stu-id="4cc76-120">BAM does not support real-time aggregations of type **Min** and **Max**.</span></span> <span data-ttu-id="4cc76-121">Les agrégations BAM prend en charge sont **nombre**, **somme**, et **moyenne**.</span><span class="sxs-lookup"><span data-stu-id="4cc76-121">The aggregations that BAM supports are **Count**, **Sum**, and **Average**.</span></span>  
  
-   <span data-ttu-id="4cc76-122">Vous devez systématiquement créer une dimension de temps pour une agrégation RTA et l'utiliser pour toutes les tranches de données. En effet, les données d'une agrégation RTA évoluent en fonction des date et heure du serveur et non des étapes majeures d'un processus d'entreprise particulier.</span><span class="sxs-lookup"><span data-stu-id="4cc76-122">You must always create a time dimension for RTA and always use it in all data slices, because the data in RTA is aged based on the server time stamp, and not on any specific business milestone.</span></span>  
  
-   <span data-ttu-id="4cc76-123">Ne définissez pas plusieurs RTA utilisant une même activité BAM.</span><span class="sxs-lookup"><span data-stu-id="4cc76-123">Do not define multiple RTAs that use the same BAM activity.</span></span> <span data-ttu-id="4cc76-124">Si vous le faites, les données RTA seront incorrectes lors de l'archivage des données BAM.</span><span class="sxs-lookup"><span data-stu-id="4cc76-124">If you do so, the RTA data will be incorrect when you archive the BAM data.</span></span>  
  
 <span data-ttu-id="4cc76-125">Les agrégations en temps réel ont un impact non négligeable sur la vitesse à laquelle le composant BAM peut écrire les données.</span><span class="sxs-lookup"><span data-stu-id="4cc76-125">Real-time aggregations significantly affect the speed at which BAM can write data.</span></span> <span data-ttu-id="4cc76-126">Il est donc recommandé de définir en tant qu'agrégations RTA uniquement les tranches de données les plus importantes de votre structure d'agrégations.</span><span class="sxs-lookup"><span data-stu-id="4cc76-126">Thus, you should only define the most important slices of the aggregation structure as RTA.</span></span>  
  
 <span data-ttu-id="4cc76-127">La limitation des niveaux de dimension pour les agrégations en temps réel est 14.</span><span class="sxs-lookup"><span data-stu-id="4cc76-127">The limitation of the dimension levels for real-time aggregations is 14.</span></span> <span data-ttu-id="4cc76-128">Par exemple, si vous créez un emplacement de la Dimension de données pour l’état et ville, cela compte comme deux niveaux (état et ville).</span><span class="sxs-lookup"><span data-stu-id="4cc76-128">For example, if you create a Data Dimension Location for State and City, this counts as two levels (State and City).</span></span> <span data-ttu-id="4cc76-129">Pour les dimensions de la progression, le nombre de niveaux possible correspond à celui de l'arborescence et pour les dimensions de temps, le nombre de niveaux correspond au nombre de sous-éléments.</span><span class="sxs-lookup"><span data-stu-id="4cc76-129">For Progress Dimensions the number of levels is the depth of the tree, and for Time Dimensions it is the count of all sub-units.</span></span> <span data-ttu-id="4cc76-130">Par exemple, une Dimension de temps pour l’année, mois, jour, heure sera comptée comme quatre niveaux.</span><span class="sxs-lookup"><span data-stu-id="4cc76-130">For example, a Time Dimension for Year, Month, Day, Hour will count as four levels.</span></span>  
  
 <span data-ttu-id="4cc76-131">BAM ne prend pas en charge les agrégations en temps réel de type **Min** et **Max**.</span><span class="sxs-lookup"><span data-stu-id="4cc76-131">BAM does not support real-time aggregations of type **Min** and **Max**.</span></span> <span data-ttu-id="4cc76-132">Les agrégations BAM prend en charge sont **nombre**, **somme**, et **moyenne**.</span><span class="sxs-lookup"><span data-stu-id="4cc76-132">The aggregations that BAM supports are **Count**, **Sum**, and **Average**.</span></span>  
  
 <span data-ttu-id="4cc76-133">Ne définissez pas plusieurs RTA utilisant une même activité BAM.</span><span class="sxs-lookup"><span data-stu-id="4cc76-133">Do not define multiple RTAs that use the same BAM activity.</span></span> <span data-ttu-id="4cc76-134">Si vous le faites, les données RTA seront incorrectes lors de l'archivage des données BAM.</span><span class="sxs-lookup"><span data-stu-id="4cc76-134">If you do so, the RTA data will be incorrect when you archive the BAM data.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4cc76-135">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="4cc76-135">See Also</span></span>  
 [<span data-ttu-id="4cc76-136">Qu’est une agrégation ?</span><span class="sxs-lookup"><span data-stu-id="4cc76-136">What Is an Aggregation?</span></span>](../core/what-is-an-aggregation.md)