---
title: "Élément structurel d’un Segment EDI | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 1f474a3d-004a-4981-b155-b0a5775918ba
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5b05d7a793fe515b8d0254d63b9b96994ddb35d9
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="edi-segment-structural-element"></a><span data-ttu-id="b91b9-102">Élément structurel d'un segment EDI</span><span class="sxs-lookup"><span data-stu-id="b91b9-102">EDI Segment Structural Element</span></span>
<span data-ttu-id="b91b9-103">Le segment contient un ou plusieurs éléments de données. Il s'agit d'une unité d'information intermédiaire dans le message.</span><span class="sxs-lookup"><span data-stu-id="b91b9-103">The segment contains one or more data elements, and is an intermediate unit of information in the message.</span></span> <span data-ttu-id="b91b9-104">Chaque segment commence par un identificateur de segment de données de trois caractères et se termine par un terminateur de segment (apostrophe (') par défaut).</span><span class="sxs-lookup"><span data-stu-id="b91b9-104">Each segment starts with a three-character data segment identifier, and ends with a segment terminator (by default the apostrophe (')).</span></span> <span data-ttu-id="b91b9-105">Les éléments de données au sein du segment sont séparées par un séparateurs d'éléments de données</span><span class="sxs-lookup"><span data-stu-id="b91b9-105">The data elements within the segment are separated by data element separators.</span></span> <span data-ttu-id="b91b9-106">(signe plus (+) par défaut).</span><span class="sxs-lookup"><span data-stu-id="b91b9-106">The data element separator is by default the plus sign (+).</span></span> <span data-ttu-id="b91b9-107">Les segments peuvent être obligatoires ou facultatifs.</span><span class="sxs-lookup"><span data-stu-id="b91b9-107">A segment is classified as Mandatory or Optional.</span></span> <span data-ttu-id="b91b9-108">Les séparateurs pour les échanges sortants peuvent être définis dans les accords entre deux partenaires commerciaux ou en tant qu'accord de partenariat commercial de secours.</span><span class="sxs-lookup"><span data-stu-id="b91b9-108">Separators for outgoing interchanges can be set in the agreements between two trading partners or as part of fallback trading partner agreement.</span></span>  
  
## <a name="nesting"></a><span data-ttu-id="b91b9-109">Imbrication</span><span class="sxs-lookup"><span data-stu-id="b91b9-109">Nesting</span></span>  
 <span data-ttu-id="b91b9-110">Segments peuvent être regroupés dans une relation hiérarchique appelée **d’imbrication**.</span><span class="sxs-lookup"><span data-stu-id="b91b9-110">Segments may be grouped in a hierarchical relationship called **nesting**.</span></span> <span data-ttu-id="b91b9-111">Il existe deux types d’imbrications : explicites et implicites.</span><span class="sxs-lookup"><span data-stu-id="b91b9-111">There are two distinct type of nesting: explicit and implicit.</span></span> <span data-ttu-id="b91b9-112">Un seul type d'imbrication peut être utilisé dans un échange.</span><span class="sxs-lookup"><span data-stu-id="b91b9-112">Within any one interchange only one type of nesting can be used.</span></span>  
  
-   <span data-ttu-id="b91b9-113">L'imbrication explicite indique de façon explicite que la boucle est imbriquée.</span><span class="sxs-lookup"><span data-stu-id="b91b9-113">Explicit nesting uses an explicit indication that the loop is nested.</span></span> <span data-ttu-id="b91b9-114">Lorsque l'imbrication explicite est utilisée, le segment de code est le premier élément de données composites dans la balise de segment.</span><span class="sxs-lookup"><span data-stu-id="b91b9-114">When explicit nesting is used, the first component data element in the segment tag will be the segment code.</span></span> <span data-ttu-id="b91b9-115">Il est suivi d'éléments de données composites conditionnels indiquant le niveau et la fréquence de répétition du segment.</span><span class="sxs-lookup"><span data-stu-id="b91b9-115">It will be followed by conditional component data elements indicating both the level and the incidence of repetition of the segment.</span></span> <span data-ttu-id="b91b9-116">Le nombre d'éléments de données composites utilisés à cette fin dépend du niveau hiérarchique de la structure de message dans lequel le segment apparaît.</span><span class="sxs-lookup"><span data-stu-id="b91b9-116">The number of component data elements used for this purpose depends upon the hierarchical level in which the segment appears in the message structure.</span></span> <span data-ttu-id="b91b9-117">Si le segment apparaît au premier niveau, l'élément de données composites juste après le segment de code est utilisé.</span><span class="sxs-lookup"><span data-stu-id="b91b9-117">If the segment is to appear at level one, the component data element immediately following the segment code will be used.</span></span> <span data-ttu-id="b91b9-118">Si le segment apparaît au deuxième niveau, l'élément de données composites juste après le segment de code et l'élément de données composites suivant sont utilisés.</span><span class="sxs-lookup"><span data-stu-id="b91b9-118">If the segment is to appear at level two, the component data element immediately following the segment code and the next component data element will both be used.</span></span> <span data-ttu-id="b91b9-119">Si le segment apparaît au troisième niveau, les trois éléments de données composites juste après le segment de code sont utilisés.</span><span class="sxs-lookup"><span data-stu-id="b91b9-119">If the segment is to appear at level three, the three component data elements following the segment code will be used.</span></span> <span data-ttu-id="b91b9-120">Les pipelines ne peuvent pas effectuer de vérification structurelle par comparaison des données à la hiérarchie.</span><span class="sxs-lookup"><span data-stu-id="b91b9-120">Pipelines cannot perform structural verification comparing data to hierarchy.</span></span>  
  
-   <span data-ttu-id="b91b9-121">Dans une imbrication implicite, l'ordre des segments spécifiés dans la structure de message est strictement suivi.</span><span class="sxs-lookup"><span data-stu-id="b91b9-121">In Implicit nesting, the order of the segments specified in the message structure is strictly followed.</span></span> <span data-ttu-id="b91b9-122">La relation d'imbrication entre les segments est évidente et aucune indication supplémentaire n'est requise pour le traitement.</span><span class="sxs-lookup"><span data-stu-id="b91b9-122">The nesting relationship between the segments is implicitly evident and no further indication is required for processing.</span></span>  
  
## <a name="loops"></a><span data-ttu-id="b91b9-123">Boucles</span><span class="sxs-lookup"><span data-stu-id="b91b9-123">Loops</span></span>  
 <span data-ttu-id="b91b9-124">Un ou plusieurs segments peuvent être répétés sous un **boucle** à l’intérieur d’une transaction définie.</span><span class="sxs-lookup"><span data-stu-id="b91b9-124">One or more segment can repeat as a **loop** inside a transaction set.</span></span> <span data-ttu-id="b91b9-125">Il existe deux types de boucles : non liée et liée.</span><span class="sxs-lookup"><span data-stu-id="b91b9-125">There are two distinct types of loops: unbounded and bounded.</span></span>  
  
### <a name="unbounded-loops"></a><span data-ttu-id="b91b9-126">Boucles non liées</span><span class="sxs-lookup"><span data-stu-id="b91b9-126">Unbounded Loops</span></span>  
 <span data-ttu-id="b91b9-127">Une boucle non liée ne contient pas de segment d'identification unique marquant le début et la fin de la boucle.</span><span class="sxs-lookup"><span data-stu-id="b91b9-127">An unbounded loop does not have a unique identifying segment to mark the beginning and end of the loop.</span></span> <span data-ttu-id="b91b9-128">La répétition d'une boucle non liée est déterminée par un nombre.</span><span class="sxs-lookup"><span data-stu-id="b91b9-128">An unbounded loop repeats according to a count.</span></span> <span data-ttu-id="b91b9-129">Si ce nombre n'est pas défini, la boucle est répétée deux fois.</span><span class="sxs-lookup"><span data-stu-id="b91b9-129">If the count does not have a value, the loop will repeat twice.</span></span> <span data-ttu-id="b91b9-130">Chaque segment de la boucle ne peut apparaître qu'une fois dans un ordre spécifié.</span><span class="sxs-lookup"><span data-stu-id="b91b9-130">Each segment in the loop can occur only once in a specified order.</span></span>  
  
 <span data-ttu-id="b91b9-131">Un premier élément de données unique établit le début d'une boucle non liée.</span><span class="sxs-lookup"><span data-stu-id="b91b9-131">The start of an unbounded loop is established by a first data element that is unique.</span></span> <span data-ttu-id="b91b9-132">Il ne peut apparaître qu'une fois dans chaque occurrence.</span><span class="sxs-lookup"><span data-stu-id="b91b9-132">The first element can appear once and only once in each occurrence.</span></span> <span data-ttu-id="b91b9-133">Les boucles non liées peuvent être imbriquées dans d'autres boucles. Dans ce cas, la boucle non liée interne ne peut pas débuter à la même position ordinale ou avec le même ID de segment que les autres boucles externes.</span><span class="sxs-lookup"><span data-stu-id="b91b9-133">Unbounded loops can be nested within loops; if so, the inner unbounded loop cannot start at the same ordinal position as any outer loop and cannot start with the same segment ID as any outer loop.</span></span> <span data-ttu-id="b91b9-134">La boucle imbriquée ne peut pas contenir de segment débutant une boucle externe au sein de la même structure d'imbrication.</span><span class="sxs-lookup"><span data-stu-id="b91b9-134">The nested loop cannot contain a segment that is also the beginning segment of any outer loop in the same nesting structure.</span></span>  
  
### <a name="bounded-loops"></a><span data-ttu-id="b91b9-135">Boucles liées</span><span class="sxs-lookup"><span data-stu-id="b91b9-135">Bounded Loops</span></span>  
 <span data-ttu-id="b91b9-136">Une boucle liée commence par le segment de début de boucle (LS, Loop Start) prédéfini et se termine par le segment de fin de boucle (LE, Loop End) prédéfini.</span><span class="sxs-lookup"><span data-stu-id="b91b9-136">A bounded loop starts with the predefined segment LS (Loop Start) and ends with the predefined segment LE (Loop End).</span></span> <span data-ttu-id="b91b9-137">Le caractère facultatif du segment LS doit correspondre à celui du premier segment de la boucle.</span><span class="sxs-lookup"><span data-stu-id="b91b9-137">The optionality of the LS segment must match that of the first segment in the loop.</span></span> <span data-ttu-id="b91b9-138">Une boucle liée peut contenir une autre boucle liée.</span><span class="sxs-lookup"><span data-stu-id="b91b9-138">A bounded loop can contain another bounded loop.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b91b9-139">Une boucle liée dans un échange X12 et une boucle explicite dans un échange EDIFACT sont équivalentes.</span><span class="sxs-lookup"><span data-stu-id="b91b9-139">A bounded loop in X12 and an explicit loop in EDIFACT are equivalent.</span></span>  
  
 <span data-ttu-id="b91b9-140">Une liaison permet de résoudre les ambiguïtés dans une boucle.</span><span class="sxs-lookup"><span data-stu-id="b91b9-140">Binding is used in a loop to resolve ambiguity.</span></span> <span data-ttu-id="b91b9-141">L'indicateur du caractère obligatoire des segments LS/LE correspond à celui du premier segment de la boucle.</span><span class="sxs-lookup"><span data-stu-id="b91b9-141">The requirement designator on the LS/LE segments matches the requirement designator of the first segment of the loop.</span></span> <span data-ttu-id="b91b9-142">Une liaison minimise les restrictions structurelles imposées sur l'utilisation de certains segments fréquemment répétés.</span><span class="sxs-lookup"><span data-stu-id="b91b9-142">Binding loosens structural restrictions imposed on the usage of certain commonly repeating segments.</span></span> <span data-ttu-id="b91b9-143">Segments liés n’ont aucune restriction en ce qui concerne l’ID de segment de début.</span><span class="sxs-lookup"><span data-stu-id="b91b9-143">Bounded segments have no restrictions with respect to the beginning segment ID.</span></span> <span data-ttu-id="b91b9-144">Cela permet le même segment débuter une boucle liée et être utilisé en dehors de la boucle, comme dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="b91b9-144">This enables the same segment to start a bounded loop and be used outside of the loop, as in the following example:</span></span>  
  
```  
AA  
LS  
BB  
CC  
LE  
BB  
```  
  
 <span data-ttu-id="b91b9-145">Les boucles subordonnées (boucles au sein de boucles) sont autorisées.</span><span class="sxs-lookup"><span data-stu-id="b91b9-145">Subordinate loops (loops within loops) are allowed.</span></span> <span data-ttu-id="b91b9-146">Si des boucles liées sont imbriquées au sein d'autres boucles, la boucle interne ne peut pas débuter à la même position ordinale que les autres boucles externes.</span><span class="sxs-lookup"><span data-stu-id="b91b9-146">If bounded loops are nested within loops, the inner loop cannot start at the same ordinal position as any outer loop.</span></span> <span data-ttu-id="b91b9-147">La boucle liée interne doit se terminer avant la boucle externe la plus proche.</span><span class="sxs-lookup"><span data-stu-id="b91b9-147">The inner bounded loop must end before the immediate outer loop.</span></span>  
  
 <span data-ttu-id="b91b9-148">Pour chaque boucle liée dans un document informatisé, une valeur <ID_boucle> unique doit être définie. Celle-ci peut inclure de un à quatre chiffres ou lettres majuscules.</span><span class="sxs-lookup"><span data-stu-id="b91b9-148">Each bounded loop within a transaction set must have a uniquely defined <loop_id> value of one to four uppercase letters or numeric digits.</span></span> <span data-ttu-id="b91b9-149">Il est recommandé d'utiliser la même valeur <ID_boucle> pour les segments LS et LE correspondants.</span><span class="sxs-lookup"><span data-stu-id="b91b9-149">It is recommended that the corresponding LS and LE segments contain the same unique <loop_id> value.</span></span> <span data-ttu-id="b91b9-150">L’élément de données < id_boucle > est traité comme un élément de données « standard » et validé pour le type de données, la longueur minimale/maximale, caractère facultatif, etc.. Validation de segment croisé (segments LS et LE) n’est pas effectuée. BizTalk Server vérifie uniquement la résolution des ambiguïtés via les segments LS et LE.</span><span class="sxs-lookup"><span data-stu-id="b91b9-150">The <loop_id> data element will be processed as a “regular” data element and validated for data type, min/max length, optionality, etc. Cross-segment validation (across LS and LE) will not be carried out. BizTalk Server will verify ambiguity resolution via the presence of the LS and LE segment and nothing else.</span></span> <span data-ttu-id="b91b9-151">En cas de violation d'une règle applicable aux éléments de données, le document informatisé est accepté avec des erreurs et BizTalk Server renvoie la valeur AK501=E et l'évaluation appropriée AK2/AK3 dans l'accusé de réception.</span><span class="sxs-lookup"><span data-stu-id="b91b9-151">In the case of data-element rule violation, the transaction set is accepted with errors, and BizTalk Server returns AK501=E and the appropriate valuation in AK2/AK3 in the ACK.</span></span>  
  
 <span data-ttu-id="b91b9-152">Les segments LS/LE doivent également être associés par paire.</span><span class="sxs-lookup"><span data-stu-id="b91b9-152">It is also required that pairing of LS/LE segments is enforced.</span></span> <span data-ttu-id="b91b9-153">En cas de non concordance, le document informatisé est rejeté en raison d'un problème de résolution des ambiguïtés, les valeurs AK501 = E et AK502 = 5 sont renvoyées dans l'Observateur d'événements et l'accusé de réception 997.</span><span class="sxs-lookup"><span data-stu-id="b91b9-153">In case of a mismatch, the transaction set is rejected due to an inherent ambiguity resolution issue, and AK501 = E and AK502 = 5 are returned in the Event Viewer and the 997 ACK.</span></span> <span data-ttu-id="b91b9-154">Si les segments LS et/ou LE sont manquants, mais que le document informatisé est dénué d'ambiguïté, celui-ci est accepté avec des erreurs et les valeurs AK501 = E et AK502 = 5 sont renvoyées.</span><span class="sxs-lookup"><span data-stu-id="b91b9-154">When  either or both LS/LE segments are missing, but the transaction set is not ambiguous, the transaction set will be accepted with errors, and AK501=E and AK502 = 5 returned.</span></span>  
  
 <span data-ttu-id="b91b9-155">Une paire de segments LS/LE peut être facultative ou obligatoire.</span><span class="sxs-lookup"><span data-stu-id="b91b9-155">An LS/LE pair can be optional or mandatory.</span></span> <span data-ttu-id="b91b9-156">La paire n'est toutefois jamais renouvelée, à moins d'être contenue dans une boucle parent renouvelable.</span><span class="sxs-lookup"><span data-stu-id="b91b9-156">However, unless the pair is contained in a parent loop that is repeatable, the pair can never be repeatable.</span></span> <span data-ttu-id="b91b9-157">Dans les deux cas, la valeur MaxOccurs d'une paire de segments LS/LE peut être égale à 1, mais pas supérieure à 1. Cette condition est vérifiée dans le cadre de la validation de schéma.</span><span class="sxs-lookup"><span data-stu-id="b91b9-157">In either case, both MaxOccurs for an LS/LE pair can be 1, but not greater than 1.This is enforced in schema validation.</span></span>  
  
 <span data-ttu-id="b91b9-158">Le Désassembleur EDI et l'Assembleur EDI gèrent les segments LS et LE.</span><span class="sxs-lookup"><span data-stu-id="b91b9-158">The EDI Disassembler and EDI Assembler handle LS and LE segments.</span></span> <span data-ttu-id="b91b9-159">Au cours de l'analyse, le Désassembleur crée des nœuds XML pour les segments LS et LE, puis valide les segments.</span><span class="sxs-lookup"><span data-stu-id="b91b9-159">During parsing, the Disassembler created XML nodes for the LS and LE segments, and validates the segments.</span></span> <span data-ttu-id="b91b9-160">Au cours de la sérialisation, l'Assembleur crée les segments LS et LE à partir des nœuds XML, puis valide ceux-ci.</span><span class="sxs-lookup"><span data-stu-id="b91b9-160">During serializing, the Assembler creates the LS and LE segments from XML nodes, and validates them.</span></span> <span data-ttu-id="b91b9-161">Si une LS attendu ou LE segment manquant, le document informatisé est rejeté/suspendu avec les valeurs AK501 = E et AK502 = 5.</span><span class="sxs-lookup"><span data-stu-id="b91b9-161">If an expected LS or LE segment is missing, the transaction set is suspended/rejected with an AK501 = E and AK502 = 5.</span></span> <span data-ttu-id="b91b9-162">Si les segments LS/LE sont présents sans élément de données correspondant, et la validation EDI est activée, le document informatisé est accepté avec des erreurs et les valeurs AK501 = E et AK502 = 5 sont renvoyées dans l’Observateur d’événements et le 997 accusé de réception.</span><span class="sxs-lookup"><span data-stu-id="b91b9-162">If LS/LE segments are present without corresponding data element, and EDI validation is enabled, the transaction set is accepted with errors and AK501 = E and AK502 = 5 are reported in the Event Viewer and the 997 ACK.</span></span>