---
title: Informations de configuration | Documents Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- Call Rules shape [Orchestration Designer], planning
- Call Rules shape [Orchestration Designer], configuring
ms.assetid: aa4924c6-4270-473b-aa0a-6d8b18375a39
caps.latest.revision: "11"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f9a35767815eaf7406a7baae5d9dccb833492287
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="configuration-information"></a><span data-ttu-id="1c8e0-102">Informations de configuration</span><span class="sxs-lookup"><span data-stu-id="1c8e0-102">Configuration Information</span></span>
<span data-ttu-id="1c8e0-103">Cette rubrique explique comment configurer le **appeler règles** forme.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-103">This topic describes how to configure the **Call Rules** shape.</span></span>  
  
## <a name="orchestration-variables-and-fact-types"></a><span data-ttu-id="1c8e0-104">Variables d'orchestration et types de faits</span><span class="sxs-lookup"><span data-stu-id="1c8e0-104">Orchestration variables and fact types</span></span>  
 <span data-ttu-id="1c8e0-105">Dans l’orchestration où le **appeler règles** forme se trouve, vous devez avoir des variables qui correspondent aux types utilisés dans la stratégie.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-105">In the orchestration where the **Call Rules** shape resides, you must have variables that match types used in the policy.</span></span> <span data-ttu-id="1c8e0-106">Si vous ne disposez pas des types de variables corrects, vous ne pouvez pas fournir les paramètres corrects à la stratégie.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-106">If you do not have the correct types of variables, you cannot supply the correct parameters to the policy.</span></span> <span data-ttu-id="1c8e0-107">Supposons que vous ayez un **appeler règles** forme dans une orchestration, CallMyRules et que vous utilisez CallMyRules pour appeler MyPolicy.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-107">Suppose that you have a **Call Rules** shape in an orchestration, CallMyRules, and you use CallMyRules to call MyPolicy.</span></span> <span data-ttu-id="1c8e0-108">Si une classe .NET, MyClass, est utilisée dans MyPolicy, vous devez créer une variable de type MyAssembly.MyClass dans l'orchestration.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-108">If a .NET class, MyClass, is used in MyPolicy, you must create a variable of a MyAssembly.MyClass type in the orchestration.</span></span> <span data-ttu-id="1c8e0-109">De même, si MyPolicy a **DataConnection** liaisons, vous devez créer une variable d’un **Microsoft.RuleEngine.DataConnection** type dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-109">Similarly, if MyPolicy has **DataConnection** bindings, you must create a variable of a **Microsoft.RuleEngine.DataConnection** type in the orchestration.</span></span>  
  
 <span data-ttu-id="1c8e0-110">En plus des variables dans l'orchestration, vous devez créer des instances pour ces variables.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-110">In addition to creating the variables in the orchestration, you must also create instances for these variables.</span></span> <span data-ttu-id="1c8e0-111">Vous pouvez le faire, ajoutez un **Expression** forme à votre orchestration.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-111">You can do this by adding an **Expression** shape to your orchestration.</span></span> <span data-ttu-id="1c8e0-112">À l’aide de l’exemple précédent, vous devez instancier une instance MyAssembly.MyClass et une **DataConnection** instance.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-112">Using the preceding example, you should instantiate a MyAssembly.MyClass instance and a **DataConnection** instance.</span></span> <span data-ttu-id="1c8e0-113">Pour instancier le **DataConnection** instance, vous procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="1c8e0-113">To instantiate the **DataConnection** instance, you do the following:</span></span>  
  
-   <span data-ttu-id="1c8e0-114">Créer un **SqlConnection** de l’instance et l’assigner à MySqlCon.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-114">Create a **SqlConnection** instance and assign it to MySqlCon.</span></span>  
  
-   <span data-ttu-id="1c8e0-115">Créer un **DataConnection** de l’instance et l’assigner à dataConnection (variable de **DataConnection** type), comme illustré dans le fragment de code suivant :</span><span class="sxs-lookup"><span data-stu-id="1c8e0-115">Create a **DataConnection** instance and assign it to dataConnection (variable of **DataConnection** type), as shown in the following code fragment:</span></span>  
  
    ```  
    dataConnection = new Microsoft.RuleEngine.DataConnection("NameOfSqlDatabaseHere", "NameOfYourTableHere", MySqlCon);  
    ```  
  
> [!NOTE]
>  <span data-ttu-id="1c8e0-116">Si vous n’avez pas de variables correspondant aux types de faits, ces types n’apparaissent pas en tant que paramètres dans le **spécifier les paramètres de stratégie** zone de liste dans le **configuration de la stratégie RèglesAppel** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-116">If you do not have variables matching the fact types, these types will not appear as parameters in the **Specify policy parameters** list box in the **CallRules policy configuration** dialog box.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1c8e0-117">Le moteur d’orchestration convertit automatiquement les variables de message que vous spécifiez en tant que paramètres à une stratégie BRE dans **TypedXmlDocument** objets et les déclare dans la mémoire de travail du moteur de règles avant l’exécution de la stratégie.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-117">The orchestration engine automatically converts the message variables you specify as parameters to a BRE policy into **TypedXmlDocument** objects, and asserts them into working memory of the rule engine prior to executing the policy.</span></span> <span data-ttu-id="1c8e0-118">Ainsi, vous ne devez pas déclarer les variables du type TypedXmlDocument comme vous le faisiez pour .NET et les faits de base de données.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-118">Therefore, you do not need to declare variables of type TypedXmlDocument as you did for .NET and database facts.</span></span>  
  
## <a name="message-type-and-document-type"></a><span data-ttu-id="1c8e0-119">Type de message et type de document</span><span class="sxs-lookup"><span data-stu-id="1c8e0-119">Message type and document type</span></span>  
 <span data-ttu-id="1c8e0-120">Vous devez vous assurer que le **DocumentType** propriété pour les nœuds XML utilisés dans votre règle d’entreprise (que vous implémentez dans l’éditeur des règles d’entreprise) est le même que le **MessageType** pour les nœuds XML définis dans le orchestration : elle doit correspondre à la **MessageType** du message ou partie du message qui sera transmis au moteur de règles dans le **appeler règles** forme.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-120">You must ensure that the **DocumentType** property for XML nodes used in your business rule (that you implement in the Business Rule Composer) is the same as the **MessageType** for those XML nodes defined in the orchestration—it must match the **MessageType** of the message or message part that will be passed to the rule engine in the **Call Rules** shape.</span></span>  
  
 <span data-ttu-id="1c8e0-121">Par exemple, si vous définissez un schéma XML de bon de commande (PO) dans un projet BizTalk, le **MessageType** défini pour ce schéma est **BTSProject.PO** (si **BTSProject** est le espace de noms ou le nom du projet à l’aide de l’espace de noms par défaut).</span><span class="sxs-lookup"><span data-stu-id="1c8e0-121">For example, if you define a purchase order (PO) XML schema in a BizTalk project, the **MessageType** defined for this schema is **BTSProject.PO** (if **BTSProject** is the namespace or the project name using the default namespace).</span></span>  
  
 <span data-ttu-id="1c8e0-122">Dans le cas de la **PO\Amount** élément, avant de le déposer dans une définition de règle, vous devez modifier son **DocumentType**propriété **BTSProject.PO** dans la fenêtre Propriétés .</span><span class="sxs-lookup"><span data-stu-id="1c8e0-122">In the case of the **PO\Amount** element, before you drop it into a rule definition, you must change its **DocumentType**property to **BTSProject.PO** in the properties window.</span></span> <span data-ttu-id="1c8e0-123">Vous pouvez accéder à la fenêtre Propriétés lorsque n’importe quel nœud dans le schéma est sélectionné dans le **schémas XML** onglet dans l’Explorateur de faits.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-123">You can access the properties window when any node in the schema is selected on the **XML Schemas** tab in the Facts Explorer.</span></span> <span data-ttu-id="1c8e0-124">Cette modification est appliquée à tous les éléments du schéma mais n'est pas conservée avec le schéma.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-124">This change is applied for all elements in the schema, but is not persisted with the schema.</span></span> <span data-ttu-id="1c8e0-125">Elle doit être réinitialisée lorsque l'Éditeur des règles d'entreprise est lancé ou quand le schéma est rechargé.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-125">It must be reset when the Business Rule Composer is launched or the schema is reloaded.</span></span> <span data-ttu-id="1c8e0-126">Cela est nécessaire pour les définitions de vocabulaire basées sur des schémas XML ou sur des règles créées directement à partir des schémas XML.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-126">This is required for vocabulary definitions based either on XML schemas or on rules built directly from XML schemas.</span></span> <span data-ttu-id="1c8e0-127">Si vous ne le faites pas, vous pouvez exécuter la stratégie, mais la **appeler règles** forme ne fonctionnera pas correctement et le type de message n’apparaît pas dans le **spécifier les paramètres de stratégie** zone de liste dans le  **Configuration de la stratégie RèglesAppel** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="1c8e0-127">If you do not do this, you can still execute the policy, but the **Call Rules** shape will not work correctly, and message type will not appear in the **Specify policy parameters** list box in the **CallRules policy configuration** dialog box.</span></span>