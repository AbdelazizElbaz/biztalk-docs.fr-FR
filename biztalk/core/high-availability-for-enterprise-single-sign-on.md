---
title: "Haute disponibilité pour Enterprise Single Sign-On | Documents Microsoft"
ms.custom: 
ms.date: 2016-02-29
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- Master Secret server, availability
- high availability, SSO
- Master Secret server, high availability
- SSO, high availability
ms.assetid: 6c631b5c-7147-4cc0-b58a-6749e83df9d3
caps.latest.revision: "27"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 023eaa82b11353347040dea13fc126f6044db3bc
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="high-availability-for-enterprise-single-sign-on"></a><span data-ttu-id="addb6-102">Haute disponibilité appliquée à l'authentification unique de l'entreprise</span><span class="sxs-lookup"><span data-stu-id="addb6-102">High Availability for Enterprise Single Sign-On</span></span>
<span data-ttu-id="addb6-103">Même si vous n'utilisez pas la fonctionnalité d'authentification unique de l'entreprise pour mapper les informations d'identification et l'authentification unique, cette fonctionnalité constitue un élément essentiel de l'infrastructure Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] puisque BizTalk Server s'en sert pour sécuriser les informations présentes sur les emplacements de réception.</span><span class="sxs-lookup"><span data-stu-id="addb6-103">Even if you do not use the Enterprise Single-Sign-On (SSO) functionality for mapping credentials and single sign-on, SSO is a critical part of the overall Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] infrastructure, because BizTalk Server uses SSO to help secure information for the receive locations.</span></span>  
  
 <span data-ttu-id="addb6-104">Vous devez configurer le premier ordinateur où vous installez le service d'authentification unique en tant que serveur de secret principal.</span><span class="sxs-lookup"><span data-stu-id="addb6-104">You must configure the first computer where you install the SSO service as the master secret server.</span></span> <span data-ttu-id="addb6-105">Le serveur de secret principal est le serveur d'authentification unique qui stocke le secret principal (clé de chiffrement).</span><span class="sxs-lookup"><span data-stu-id="addb6-105">The master secret server is the SSO server that stores the master secret (encryption key).</span></span> <span data-ttu-id="addb6-106">Celui-ci correspond à la clé de chiffrement utilisée par le système d'authentification unique pour chiffrer et déchiffrer les données stockées dans la base de données de l'authentification unique.</span><span class="sxs-lookup"><span data-stu-id="addb6-106">The master secret is the encryption key that the SSO system uses to encrypt and decrypt the data it stores in the SSO database.</span></span>  
  
 <span data-ttu-id="addb6-107">Si un serveur d'authentification unique s'arrête et que vous disposez d'autres ordinateurs serveurs BizTalk Server exécutant la même instance d'hôte, donc d'autres serveurs d'authentification unique, ces serveurs supplémentaires continuent de fonctionner normalement.</span><span class="sxs-lookup"><span data-stu-id="addb6-107">If an SSO server fails, and if you have other BizTalk Server computers (and therefore SSO servers) running the same host instance, the other SSO servers continue doing their work.</span></span> <span data-ttu-id="addb6-108">Par conséquent, le serveur de secret principal continue de remplir ses fonctions et les processus BizTalk Server ne sont pas interrompus.</span><span class="sxs-lookup"><span data-stu-id="addb6-108">This means that the master secret server still functions correctly, and therefore the BizTalk Server processing continues.</span></span>  
  
 <span data-ttu-id="addb6-109">Si le serveur de secret principal s'arrête, toutes les opérations en cours d'exécution au moment de la panne, y compris le déchiffrement des informations d'identification, continuent de s'exécuter correctement.</span><span class="sxs-lookup"><span data-stu-id="addb6-109">If the master secret server fails, all run-time operations that were running before it failed, including decryption of credentials, continue successfully.</span></span> <span data-ttu-id="addb6-110">Cependant, vous ne pouvez pas chiffrer les nouvelles informations d'identification.</span><span class="sxs-lookup"><span data-stu-id="addb6-110">However, you cannot encrypt new credentials.</span></span> <span data-ttu-id="addb6-111">L'environnement BizTalk Server est donc dépendant de la disponibilité du serveur de secret principal, comme l'indique le schéma suivant :</span><span class="sxs-lookup"><span data-stu-id="addb6-111">Therefore, the BizTalk Server environment has a dependency on the availability of the master secret server, as shown in the following figure.</span></span>  
  
 <span data-ttu-id="addb6-112">![Points de défaillance](../core/media/tdi-highava-pointsfailure-mss.gif "TDI_HighAva_PointsFailure_MSS")</span><span class="sxs-lookup"><span data-stu-id="addb6-112">![Points of Failure](../core/media/tdi-highava-pointsfailure-mss.gif "TDI_HighAva_PointsFailure_MSS")</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="addb6-113">Lorsque le serveur de secret principal devient indisponible, les instances d'hôte [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] peuvent encore effectuer des opérations d'exécution à l'aide de la copie du secret principal mise en mémoire cache jusqu'à ce que :</span><span class="sxs-lookup"><span data-stu-id="addb6-113">If the master secret server becomes unavailable, then [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host instances can still perform run-time operations by using the in-memory cached copy of the master secret until:</span></span>  
>   
>  -   <span data-ttu-id="addb6-114">les instances d'hôte soient redémarrées ;</span><span class="sxs-lookup"><span data-stu-id="addb6-114">The host instances are restarted.</span></span>  
> -   <span data-ttu-id="addb6-115">le service de l'authentification unique se trouvant sur l'ordinateur qui exécute les instances d'hôte BizTalk soit redémarré ;</span><span class="sxs-lookup"><span data-stu-id="addb6-115">The SSO service on the computer running the BizTalk host instances is restarted.</span></span>  
> -   <span data-ttu-id="addb6-116">le secret principal de l'authentification unique soit modifié.</span><span class="sxs-lookup"><span data-stu-id="addb6-116">The SSO master secret is changed.</span></span>  
>   
>  <span data-ttu-id="addb6-117">Si le service de l'authentification unique est redémarré sur les ordinateurs [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ou si le secret principal de l'authentification unique est modifié, la copie du secret principal mise en mémoire cache est libérée et [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] doit alors être en mesure de contacter le serveur de secret principal dans le but de récupérer une autre copie du secret principal.</span><span class="sxs-lookup"><span data-stu-id="addb6-117">If the SSO service is restarted on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers or if the SSO master secret is changed, then the cached copy of the master secret is released from memory and the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] must be able to contact the master secret server to obtain another copy of the master secret.</span></span> <span data-ttu-id="addb6-118">Si le serveur de secret principal n'est pas disponible, toute opération administrative qui nécessite l'accès à ce serveur à des fins de chiffrement échoue.</span><span class="sxs-lookup"><span data-stu-id="addb6-118">If the master secret server is unavailable then any administrative operations that require access to the master secret server for purposes of encryption will fail.</span></span>  
  
## <a name="making-the-master-secret-server-available"></a><span data-ttu-id="addb6-119">Obtention d'un serveur de secret principal disponible</span><span class="sxs-lookup"><span data-stu-id="addb6-119">Making the Master Secret Server Available</span></span>  
 <span data-ttu-id="addb6-120">Pour obtenir la disponibilité d'un système d'authentification unique, donc d'un environnement BizTalk Server, il est indispensable de sauvegarder le secret principal dès qu'il a été généré.</span><span class="sxs-lookup"><span data-stu-id="addb6-120">For availability of the SSO system, and therefore of the BizTalk Server environment, it is critical that you back up the master secret as soon as it is generated.</span></span> <span data-ttu-id="addb6-121">Sinon, vous perdez les données que le système d'authentification unique a chiffrées à l'aide de ce secret principal.</span><span class="sxs-lookup"><span data-stu-id="addb6-121">If you lose it, you lose the data that the SSO system encrypted by using that master secret.</span></span> <span data-ttu-id="addb6-122">Pour plus d’informations sur la sauvegarde du secret, consultez [comment revenir Up the Master Secret](../core/how-to-back-up-the-master-secret.md).</span><span class="sxs-lookup"><span data-stu-id="addb6-122">For more information about backing up the master secret, see [How to Back Up the Master Secret](../core/how-to-back-up-the-master-secret.md).</span></span>  
  
 <span data-ttu-id="addb6-123">Vous pouvez rendre le secret principal disponible de deux manières :</span><span class="sxs-lookup"><span data-stu-id="addb6-123">You can make the master secret server available in two ways:</span></span>  
  
-   <span data-ttu-id="addb6-124">**Disponible, mais pas hautement disponible.**</span><span class="sxs-lookup"><span data-stu-id="addb6-124">**Available, but not highly available.**</span></span> <span data-ttu-id="addb6-125">dans cette configuration, le secret principal est mis en mémoire cache pour tous les serveurs d'authentification unique et les opérations d'exécution fonctionnent normalement, même en cas de défaillance du serveur de secret principal.</span><span class="sxs-lookup"><span data-stu-id="addb6-125">All the SSO servers have the master secret cached in memory, and run-time operations will continue even if the master secret server fails.</span></span> <span data-ttu-id="addb6-126">Cependant, vous ne pouvez plus modifier la configuration des ports ou de l'authentification unique.</span><span class="sxs-lookup"><span data-stu-id="addb6-126">However, you will not be able to change the configuration of ports or the SSO configuration.</span></span> <span data-ttu-id="addb6-127">L'exécution de BizTalk Server ne rencontre pas de problèmes, mais aucune modification de la conception n'est possible.</span><span class="sxs-lookup"><span data-stu-id="addb6-127">The BizTalk Server runtime will continue working without problems, but you cannot make any design changes.</span></span>  
  
     <span data-ttu-id="addb6-128">Bien que cette configuration ne permette pas une disponibilité élevée, elle est suffisante dans la plupart des scénarios et compatible avec la mise à l'échelle des hôtes de réception, d'envoi et de traitement.</span><span class="sxs-lookup"><span data-stu-id="addb6-128">Even if this configuration is not highly available, it can be satisfactory for most scenarios and it is consistent with scaling out the receiving, sending, and processing hosts.</span></span>  
  
-   <span data-ttu-id="addb6-129">**Hautement disponible.**</span><span class="sxs-lookup"><span data-stu-id="addb6-129">**Highly available.**</span></span> <span data-ttu-id="addb6-130">Pour disposer d'un serveur de secret principal redondant, utilisez le clustering Windows sur un cluster de serveur de secret principal distinct ou configurez le serveur de secret principal sur un cluster de bases de données existant.</span><span class="sxs-lookup"><span data-stu-id="addb6-130">To provide redundancy for the master secret server, use Windows Clustering on a separate master secret server cluster, or configure the master secret server on an existing database cluster.</span></span> <span data-ttu-id="addb6-131">Lorsqu'ils sont installés sur un cluster de base de données, les services fournis par le serveur de secret principal n'utilisent pas beaucoup de ressources et n'ont généralement pas d'impact sur la fonctionnalité de base de données ou sur les performances.</span><span class="sxs-lookup"><span data-stu-id="addb6-131">The services provided by the master secret server do not consume many resources, and typically do not affect database functionality or performance when installed on a database cluster.</span></span> <span data-ttu-id="addb6-132">Le schéma suivant illustre la façon dont vous pouvez rendre le serveur de secret principal hautement disponible.</span><span class="sxs-lookup"><span data-stu-id="addb6-132">The following figure shows how you can make the master secret server highly available.</span></span>  
  
     <span data-ttu-id="addb6-133">![Serveur de secret principal hautement disponible](../core/media/tdi-highava-msscluster.gif "TDI_HighAva_MSSCluster")</span><span class="sxs-lookup"><span data-stu-id="addb6-133">![Highly Available Master Secret Server](../core/media/tdi-highava-msscluster.gif "TDI_HighAva_MSSCluster")</span></span>  
  
     <span data-ttu-id="addb6-134">Bien que cette configuration permette une disponibilité élevée, elle exige de disposer de ressources matérielles supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="addb6-134">While this configuration is highly available, it requires additional hardware resources.</span></span> <span data-ttu-id="addb6-135">Pour plus d’informations sur les options d’installation de haute disponibilité pour l’authentification unique, consultez [Options d’Installation de l’authentification unique de haute disponibilité](../core/high-availability-sso-installation-options.md).</span><span class="sxs-lookup"><span data-stu-id="addb6-135">For more information about high availability installation options for SSO, see [High-Availability SSO Installation Options](../core/high-availability-sso-installation-options.md).</span></span> <span data-ttu-id="addb6-136">Cette section fournit des informations détaillées sur la configuration du serveur de secret principal de l'authentification unique en tant que ressource de cluster à haute disponibilité sur un cluster de serveurs Windows Server.</span><span class="sxs-lookup"><span data-stu-id="addb6-136">This section includes detailed information about configuring the SSO master secret server as a highly available cluster resource on a Windows Server cluster.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="addb6-137">Afin de réduire les ressources matérielles nécessaires à une solution hautement disponible, vous pouvez ajouter le serveur de secret principal en tant que ressource de cluster sur le cluster SQL Server.</span><span class="sxs-lookup"><span data-stu-id="addb6-137">To reduce the hardware resources for a highly available solution, you can add the master secret server as a cluster resource in your SQL Server cluster.</span></span> <span data-ttu-id="addb6-138">Vous n’avez pas besoin d’acheter des licences supplémentaires pour installer le service d’authentification unique sur un autre ordinateur BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="addb6-138">You do not need to purchase additional BizTalk Server licenses to install the SSO service on another computer.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="addb6-139">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="addb6-139">See Also</span></span>  
 <span data-ttu-id="addb6-140">[Mise en cluster les bases de données BizTalk Server](../core/clustering-the-biztalk-server-databases1.md) </span><span class="sxs-lookup"><span data-stu-id="addb6-140">[Clustering the BizTalk Server Databases](../core/clustering-the-biztalk-server-databases1.md) </span></span>  
 <span data-ttu-id="addb6-141">[Création d’un environnement hautement disponible BizTalk Server](../core/creating-a-highly-available-biztalk-server-environment.md) </span><span class="sxs-lookup"><span data-stu-id="addb6-141">[Creating a Highly Available BizTalk Server Environment](../core/creating-a-highly-available-biztalk-server-environment.md) </span></span>  
 [<span data-ttu-id="addb6-142">Mise en Cluster du serveur de secret principal</span><span class="sxs-lookup"><span data-stu-id="addb6-142">How to Cluster the Master Secret Server</span></span>](../core/how-to-cluster-the-master-secret-server1.md)