---
title: "Étape 4 : Configurer la Solution BizTalk Server | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d60e6a82-51af-41e5-a755-5f337492ba2f
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6587e0a8ff84b352ba6f029a7687139daabb72a9
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="step-4-configure-the-biztalk-server-solution"></a><span data-ttu-id="6ca27-102">Étape 4 : Configurer la Solution BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="6ca27-102">Step 4: Configure the BizTalk Server Solution</span></span>
<span data-ttu-id="6ca27-103">Dans l'étape précédente, vous avez créé et déployé une application [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] pour recevoir une notification de Salesforce dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] et insérer les détails dans une base de données SQL Server sur site.</span><span class="sxs-lookup"><span data-stu-id="6ca27-103">In the previous step, you created and deployed a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application to receive Salesforce notification into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and insert the details into an on-premise SQL Server database.</span></span> <span data-ttu-id="6ca27-104">Dans cette étape, nous allons configurer l'application dans la console d'administration [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ca27-104">In this step, we’ll configure the application in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="6ca27-105">La configuration de l'application consiste principalement à créer des ports physiques correspondant aux ports logiques que nous avons créés dans l'orchestration.</span><span class="sxs-lookup"><span data-stu-id="6ca27-105">Configuring the application primarily involves creating physical ports corresponding to the logical ports we created in the orchestration.</span></span> <span data-ttu-id="6ca27-106">Il s'agit aussi de lier le port physique aux ports logiques.</span><span class="sxs-lookup"><span data-stu-id="6ca27-106">It also involves binding the physical port to the logical ports.</span></span> <span data-ttu-id="6ca27-107">Nous allons effectuer les étapes suivantes pour configurer l'application [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="6ca27-107">We’ll perform the following steps to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application:</span></span>  
  
-   <span data-ttu-id="6ca27-108">Configurer un emplacement de réception de requête-réponse WCF-BasicHttpRelay pour recevoir des notifications d'opportunité de Salesforce.</span><span class="sxs-lookup"><span data-stu-id="6ca27-108">Configure a request-response WCF-BasicHttpRelay receive location to receive opportunity notifications from Salesforce.</span></span>  
  
-   <span data-ttu-id="6ca27-109">Configurer un port d'envoi de requête-réponse WCF-WebHttp pour envoyer des requêtes à Salesforce afin de récupérer des détails du produit relatives à la notification d'opportunité reçue.</span><span class="sxs-lookup"><span data-stu-id="6ca27-109">Configure a request-response WCF-WebHttp send port to send query to Salesforce for retrieving product details related to the received opportunity notification.</span></span> <span data-ttu-id="6ca27-110">Ce port d'envoi reçoit également la réponse à la requête de Salesforce.</span><span class="sxs-lookup"><span data-stu-id="6ca27-110">This send port also receives the query response from Salesforce.</span></span>  
  
-   <span data-ttu-id="6ca27-111">Configurer un port d'envoi unidirectionnel WCF-SQL pour insérer la réponse à la requête de Salesforce dans une base de données SQL Server sur site.</span><span class="sxs-lookup"><span data-stu-id="6ca27-111">Configure a one-way WCF-SQL send port to insert the query response from Salesforce into an on-premise SQL Server database.</span></span>  
  
-   <span data-ttu-id="6ca27-112">Configurer l'application [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] en associant le port logique dans l'orchestration aux ports physiques créés dans la console d'administration [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ca27-112">Configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application by associating the logical port in the orchestration with the physical ports created in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
### <a name="to-configure-the-wcf-basichttprelay-receive-location"></a><span data-ttu-id="6ca27-113">Pour configurer l'emplacement de réception WCF-BasicHttpRelay</span><span class="sxs-lookup"><span data-stu-id="6ca27-113">To configure the WCF-BasicHttpRelay receive location</span></span>  
  
1.  <span data-ttu-id="6ca27-114">Ouvrez le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="6ca27-114">Open the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="6ca27-115">Développez le nœud Applications et recherchez le **SalesforceIntegration** application.</span><span class="sxs-lookup"><span data-stu-id="6ca27-115">Expand the Applications node and look for the **SalesforceIntegration** application.</span></span> <span data-ttu-id="6ca27-116">L'application est créée quand vous déployez le projet [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] à partir de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6ca27-116">This application is created when you deployed the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] project from Visual Studio.</span></span>  
  
2.  <span data-ttu-id="6ca27-117">Développez le **SalesforceIntegration** application, avec le bouton droit **Ports de réception**, pointez sur **nouveau**, puis cliquez sur **Port de réception requête-réponse**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-117">Expand the **SalesforceIntegration** application, right-click **Receive Ports**, point to **New**, and then click **Request-Response Receive Port**.</span></span> <span data-ttu-id="6ca27-118">Spécifiez le nom de port `ReceiveOppNotification` et dans le volet gauche, cliquez sur **emplacements de réception**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-118">Specify the port name as `ReceiveOppNotification` and from the left-pane, click **Receive Locations**.</span></span>  
  
3.  <span data-ttu-id="6ca27-119">Dans la boîte de dialogue Propriétés d'emplacement de réception, spécifiez les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ca27-119">In the Receive Location Properties dialog box, specify the following values:</span></span>  
  
    |||  
    |-|-|  
    |<span data-ttu-id="6ca27-120">Nom</span><span class="sxs-lookup"><span data-stu-id="6ca27-120">Name</span></span>|<span data-ttu-id="6ca27-121">Entrez `ReceiveOppNotification`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-121">Enter `ReceiveOppNotification`.</span></span>|  
    |<span data-ttu-id="6ca27-122">Type</span><span class="sxs-lookup"><span data-stu-id="6ca27-122">Type</span></span>|<span data-ttu-id="6ca27-123">Sélectionnez **WCF-BasicHttpRelay**</span><span class="sxs-lookup"><span data-stu-id="6ca27-123">Select **WCF-BasicHttpRelay**</span></span>|  
    |<span data-ttu-id="6ca27-124">Gestionnaire de réception</span><span class="sxs-lookup"><span data-stu-id="6ca27-124">Receive Handler</span></span>|<span data-ttu-id="6ca27-125">Sélectionnez **BizTalkServerApplication**</span><span class="sxs-lookup"><span data-stu-id="6ca27-125">Select **BizTalkServerApplication**</span></span>|  
    |<span data-ttu-id="6ca27-126">Pipeline de réception</span><span class="sxs-lookup"><span data-stu-id="6ca27-126">Receive Pipeline</span></span>|<span data-ttu-id="6ca27-127">Sélectionnez **XMLReceive**</span><span class="sxs-lookup"><span data-stu-id="6ca27-127">Select **XMLReceive**</span></span>|  
    |<span data-ttu-id="6ca27-128">Pipeline d'envoi</span><span class="sxs-lookup"><span data-stu-id="6ca27-128">Send Pipeline</span></span>|<span data-ttu-id="6ca27-129">Sélectionnez **PassThruTransmit**</span><span class="sxs-lookup"><span data-stu-id="6ca27-129">Select **PassThruTransmit**</span></span>|  
  
     <span data-ttu-id="6ca27-130">Cliquez sur **configurer** pour le type de port.</span><span class="sxs-lookup"><span data-stu-id="6ca27-130">Click **Configure** against the port type.</span></span>  
  
4.  <span data-ttu-id="6ca27-131">Dans la boîte de dialogue Propriétés du transport WCF-BasicHttpRelay, spécifiez les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ca27-131">In the WCF-BasicHttpRelay Transport Properties dialog box, specify the following values:</span></span>  
  
    1.  <span data-ttu-id="6ca27-132">Sur le **général** onglet, pour **adresse (URI)**, entrez `https://btssalesforce.servicebus.windows.net/notifications/opportunity`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-132">On the **General** tab, for **Address (URI)**, enter `https://btssalesforce.servicebus.windows.net/notifications/opportunity`.</span></span> <span data-ttu-id="6ca27-133">Ici, **btssalesforce** est créé à l’espace de noms [étape 1 : créer un Namespace de Bus de Service](../core/step-1-create-a-service-bus-namespace.md).</span><span class="sxs-lookup"><span data-stu-id="6ca27-133">Here, **btssalesforce** is namespace you created in [Step 1: Create a Service Bus Namespace](../core/step-1-create-a-service-bus-namespace.md).</span></span> <span data-ttu-id="6ca27-134">L’URL que vous spécifiez ici est la même URL que vous avez spécifié lors de la création d’un workflow dans Salesforce dans [étape 2 : configurer le système Salesforce](../core/step-2-set-up-the-salesforce-system.md).</span><span class="sxs-lookup"><span data-stu-id="6ca27-134">The URL you specify here is the same URL you specified while creating a workflow in Salesforce in [Step 2: Set up the Salesforce System](../core/step-2-set-up-the-salesforce-system.md).</span></span> <span data-ttu-id="6ca27-135">Permet de paramétrer un flux de travail dans lequel chaque fois que l’étape de l’opportunité est défini sur fermées/gagnées, Salesforce envoie une notification à l’URL *https://btssalesforce.servicebus.windows.net/notifications/opportunity*.</span><span class="sxs-lookup"><span data-stu-id="6ca27-135">You set up a workflow in which every time the stage of an opportunity is set to Closed Won, Salesforce sends a notification to the URL *https://btssalesforce.servicebus.windows.net/notifications/opportunity*.</span></span> <span data-ttu-id="6ca27-136">Nous spécifions la même URL ici dans le cadre de cette configuration d'emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="6ca27-136">We specify the same URL here as part of this receive location configuration.</span></span> <span data-ttu-id="6ca27-137">Lorsque l'emplacement de réception est activé, le point de terminaison de relais spécifié par l'URL est créé dans [!INCLUDE[winazure](../includes/winazure-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6ca27-137">When the receive location is enabled, the relay endpoint specified by the URL is created in [!INCLUDE[winazure](../includes/winazure-md.md)].</span></span>  
  
    2.  <span data-ttu-id="6ca27-138">Sur le **sécurité** onglet, spécifiez les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="6ca27-138">On the **Security** tab, specify the following:</span></span>  
  
        -   <span data-ttu-id="6ca27-139">Pour **mode de sécurité**, sélectionnez **Transport** et **type d’authentification client de relais**, sélectionnez **aucun**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-139">For **Security mode**, select **Transport** and for **Relay client authentication type**, select **None**.</span></span>  
  
        -   <span data-ttu-id="6ca27-140">Sélectionnez le **activer la découverte du service** case à cocher pour publier le comportement de service dans le [Registre du Service](http://msdn.microsoft.com/library/windowsazure/dd582704.aspx).</span><span class="sxs-lookup"><span data-stu-id="6ca27-140">Select the **Enable service discovery** check box to publish the service behavior in the [Service Registry](http://msdn.microsoft.com/library/windowsazure/dd582704.aspx).</span></span> <span data-ttu-id="6ca27-141">Spécifiez le **nom d’affichage** qui désigne le nom sous lequel le service est publié dans le Registre.</span><span class="sxs-lookup"><span data-stu-id="6ca27-141">Specify the **Display name** which denotes the name with which the service is published to the registry.</span></span> <span data-ttu-id="6ca27-142">Vous pouvez définir le **mode de découverte** sur public ou privé.</span><span class="sxs-lookup"><span data-stu-id="6ca27-142">You can set the **Discovery mode** to public or private.</span></span> <span data-ttu-id="6ca27-143">Pour ce didacticiel, définissez **nom d’affichage** à `SF Outbound Notification` et **mode de découverte** à **Public**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-143">For this tutorial, set **Display name** to `SF Outbound Notification` and **Discovery mode** to **Public**.</span></span>  
  
        -   <span data-ttu-id="6ca27-144">Dans la zone de service de contrôle de l’accès, cliquez sur **modifier**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-144">Under Access control service box, click **Edit**.</span></span> <span data-ttu-id="6ca27-145">Pour **Uri STS Service de contrôle d’accès**, entrez `https://btssalesforce-sb.accesscontrol.windows.net/`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-145">For **Access Control Service STS Uri**, enter `https://btssalesforce-sb.accesscontrol.windows.net/`.</span></span> <span data-ttu-id="6ca27-146">Pour **nom de l’émetteur** et **clé d’émetteur**, entrez les valeurs que vous avez enregistré dans [étape 1 : créer un Namespace de Bus de Service](../core/step-1-create-a-service-bus-namespace.md) pour **utilisateur par défaut** et **Clé par défaut** champs.</span><span class="sxs-lookup"><span data-stu-id="6ca27-146">For **Issuer Name** and **Issuer Key**, enter the values that you saved in [Step 1: Create a Service Bus Namespace](../core/step-1-create-a-service-bus-namespace.md) for **Default User** and **Default Key** fields.</span></span>  
  
    3.  <span data-ttu-id="6ca27-147">Cliquez sur **OK** jusqu'à ce que vous quittez toutes les boîtes de dialogue Ouvrir.</span><span class="sxs-lookup"><span data-stu-id="6ca27-147">Click **OK** until you exit all open dialog boxes.</span></span>  
  
### <a name="to-configure-the-wcf-webhttp-send-port"></a><span data-ttu-id="6ca27-148">Pour configurer le port d’envoi WCF-WebHttp</span><span class="sxs-lookup"><span data-stu-id="6ca27-148">To configure the WCF-WebHttp send port</span></span>  
  
1.  <span data-ttu-id="6ca27-149">Développez le **SalesforceIntegration** application, avec le bouton droit **Ports d’envoi**, pointez sur **nouveau**, puis cliquez sur **Port d’envoi statique avec sollicitation-réponse**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-149">Expand the **SalesforceIntegration** application, right-click **Send Ports**, point to **New**, and then click **Static Solicit-Response Send Port**.</span></span>  
  
2.  <span data-ttu-id="6ca27-150">Dans la boîte de dialogue Propriétés de port d'envoi, spécifiez les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ca27-150">In the Send Port Properties dialog box, specify the following values:</span></span>  
  
    |||  
    |-|-|  
    |<span data-ttu-id="6ca27-151">Nom</span><span class="sxs-lookup"><span data-stu-id="6ca27-151">Name</span></span>|<span data-ttu-id="6ca27-152">Entrez `SalesforceREST`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-152">Enter `SalesforceREST`.</span></span>|  
    |<span data-ttu-id="6ca27-153">Type</span><span class="sxs-lookup"><span data-stu-id="6ca27-153">Type</span></span>|<span data-ttu-id="6ca27-154">Sélectionnez **WCF-WebHttp**</span><span class="sxs-lookup"><span data-stu-id="6ca27-154">Select **WCF-WebHttp**</span></span>|  
    |<span data-ttu-id="6ca27-155">Gestionnaire d’envoi</span><span class="sxs-lookup"><span data-stu-id="6ca27-155">Send Handler</span></span>|<span data-ttu-id="6ca27-156">Sélectionnez **BizTalkServerApplication**</span><span class="sxs-lookup"><span data-stu-id="6ca27-156">Select **BizTalkServerApplication**</span></span>|  
    |<span data-ttu-id="6ca27-157">Pipeline d'envoi</span><span class="sxs-lookup"><span data-stu-id="6ca27-157">Send Pipeline</span></span>|<span data-ttu-id="6ca27-158">Sélectionnez **PassThruTransmit**</span><span class="sxs-lookup"><span data-stu-id="6ca27-158">Select **PassThruTransmit**</span></span>|  
    |<span data-ttu-id="6ca27-159">Pipeline de réception</span><span class="sxs-lookup"><span data-stu-id="6ca27-159">Receive Pipeline</span></span>|<span data-ttu-id="6ca27-160">Sélectionnez **AddNamespace** et cliquez sur le bouton de sélection sur le pipeline pour configurer le pipeline.</span><span class="sxs-lookup"><span data-stu-id="6ca27-160">Select **AddNamespace** and click the ellipsis button against the pipeline to configure the pipeline.</span></span><br /><br /> <span data-ttu-id="6ca27-161">-Sous **étape 1 : décoder**, pour **NamespaceBase**, entrez `http://BtsSalesforceIntegration.QueryResult`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-161">-   Under **Stage 1: Decode**, for **NamespaceBase**, enter `http://BtsSalesforceIntegration.QueryResult`.</span></span> <span data-ttu-id="6ca27-162">Il s’agit du schéma QueryResult.xsd que vous avez créé dans l’espace de noms [étape 3 b : récupérer les détails d’opportunité de Salesforce à l’aide de l’adaptateur WCF-WebHttp](../core/step-3b-retrieve-opportunities-from-salesforce-using-the-wcf-webhttp-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="6ca27-162">This is the namespace of the QueryResult.xsd schema that you created in [Step 3b: Retrieve Opportunity Details from Salesforce using the WCF-WebHttp Adapter](../core/step-3b-retrieve-opportunities-from-salesforce-using-the-wcf-webhttp-adapter.md).</span></span> <span data-ttu-id="6ca27-163">Lorsque le **AddNamespace** réception pipeline reçoit la réponse de Salesforce, il ajoute cet espace de noms au message de réponse.</span><span class="sxs-lookup"><span data-stu-id="6ca27-163">When the **AddNamespace** receive pipeline receives the response from Salesforce, it adds this namespace to the response message.</span></span> <span data-ttu-id="6ca27-164">Par défaut, le message de réponse de Salesforce n'inclut aucun espace de noms.</span><span class="sxs-lookup"><span data-stu-id="6ca27-164">By default, the response message from Salesforce does not include any namespace.</span></span><br />     <span data-ttu-id="6ca27-165">Pour **NamespacePrefix**, entrez `sf`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-165">For **NamespacePrefix**, enter `sf`.</span></span><br /><span data-ttu-id="6ca27-166">-Sous **phase 2 : désassembler**, acceptez les valeurs par défaut, puis sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-166">-   Under **Stage 2: Disassemble**, accept the default values and then click **OK**.</span></span>|  
  
     <span data-ttu-id="6ca27-167">Dans la boîte de dialogue Propriétés de Port d’envoi, cliquez sur **configurer** pour le type de port.</span><span class="sxs-lookup"><span data-stu-id="6ca27-167">On the Send Port Properties dialog box, click **Configure** against the port type.</span></span>  
  
3.  <span data-ttu-id="6ca27-168">Dans la boîte de dialogue Propriétés du transport WCF-WebHttp, spécifiez les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ca27-168">In the WCF-WebHttp Transport Properties dialog box, specify the following values:</span></span>  
  
    1.  <span data-ttu-id="6ca27-169">Sous l'onglet **Général** , effectuez les paramétrages suivants :</span><span class="sxs-lookup"><span data-stu-id="6ca27-169">On the **General** tab, do the following:</span></span>  
  
        -   <span data-ttu-id="6ca27-170">pour **adresse (URI)**, entrez `https://<Salesforce_instance_name>.salesforce.com/services/data/v24.0`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-170">for **Address (URI)**, enter `https://<Salesforce_instance_name>.salesforce.com/services/data/v24.0`.</span></span> <span data-ttu-id="6ca27-171">Vous pouvez récupérer le nom de l'instance Salesforce en copiant le texte entre https:// et Salesforce.com dans la barre d'adresse où le portail Salesforce.com est ouvert.</span><span class="sxs-lookup"><span data-stu-id="6ca27-171">You can retrieve the Salesforce instance name by copying the text between https:// and Salesforce.com in the address bar where you have the Salesforce.com portal open.</span></span> <span data-ttu-id="6ca27-172">Par exemple, si l’URL dans le portail Salesforce est *https://**na15**.salesforce.com/home/home.jsp*, le nom d’instance Salesforce est **na15**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-172">For example, if the URL in the Salesforce portal is *https://**na15**.salesforce.com/home/home.jsp*, the Salesforce instance name is **na15**.</span></span>  
  
        -   <span data-ttu-id="6ca27-173">Sous **méthode HTTP et mappage d’URL** , spécifiez les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="6ca27-173">Under **HTTP Method and URL Mapping** box, specify the following:</span></span>  
  
            ```  
            <BtsHttpUrlMapping>  
            <Operation Method="GET" Url="/query?q={VAR}" />  
            </BtsHttpUrlMapping>  
            ```  
  
             <span data-ttu-id="6ca27-174">Voici comment ce paramètre est utilisé, pour interroger Salesforce pour récupérer plus d’informations sur la notification d’opportunité, nous devons effectuer une opération GET sur le point de terminaison REST de Salesforce (spécifié dans le **adresse** champ) et ajouter le requête pour récupérer les détails de l’opportunité.</span><span class="sxs-lookup"><span data-stu-id="6ca27-174">Here’s how this setting is used— To query Salesforce for retrieving more information about the opportunity notification, we must perform a GET operation on the Salesforce REST endpoint (specified in the **Address** field) and append the query to retrieve the opportunity details.</span></span> <span data-ttu-id="6ca27-175">L'URL doit donc être de type :</span><span class="sxs-lookup"><span data-stu-id="6ca27-175">So, the URL should look like:</span></span>  
  
            ```  
            https://na15.salesforce.com/services/data/v24.0/query?q=<query_string>  
            ```  
  
             <span data-ttu-id="6ca27-176">Nous avons déjà le point de terminaison REST de Salesforce dans le cadre de la **adresse (URI)** champ.</span><span class="sxs-lookup"><span data-stu-id="6ca27-176">We already have the Salesforce REST endpoint as part of the **Address (URI)** field.</span></span> <span data-ttu-id="6ca27-177">Par conséquent, dans le cadre de **méthode HTTP et mappage d’URL** propriété, nous spécifions à l’aide de la méthode GET et en ajoutant le **{VAR}** en tant que variable.</span><span class="sxs-lookup"><span data-stu-id="6ca27-177">So, as part of **HTTP Method and URL Mapping** property, we specify using the GET method and appending the **{VAR}** as a variable.</span></span>  
  
        -   <span data-ttu-id="6ca27-178">Dans le **mappage de la Variable** , cliquez sur **modifier**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-178">In the **Variable Mapping** box, click **Edit**.</span></span> <span data-ttu-id="6ca27-179">Dans cette zone, vous spécifiez comment la valeur de la **{VAR}** variable est déduite lors de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="6ca27-179">In this box you specify how the value for the **{VAR}** variable is deduced at runtime.</span></span>  
  
             <span data-ttu-id="6ca27-180">Dans [étape 3 b : récupérer les détails d’opportunité de Salesforce à l’aide de l’adaptateur WCF-WebHttp](../core/step-3b-retrieve-opportunities-from-salesforce-using-the-wcf-webhttp-adapter.md), nous avions promu la propriété de requête, ce qui a entraîné la création d’un **PropertySchema.xsd**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-180">In [Step 3b: Retrieve Opportunity Details from Salesforce using the WCF-WebHttp Adapter](../core/step-3b-retrieve-opportunities-from-salesforce-using-the-wcf-webhttp-adapter.md), we had promoted the Query property, which resulted in creating a **PropertySchema.xsd**.</span></span> <span data-ttu-id="6ca27-181">Nous allons utiliser la **requête** élément dans ce schéma pour passer la chaîne de requête en mappant cet élément à la variable {VAR} dans l’URL.</span><span class="sxs-lookup"><span data-stu-id="6ca27-181">We’ll use the **Query** element in that schema to pass the query string by mapping that element to the {VAR} variable in the URL.</span></span>  
  
             <span data-ttu-id="6ca27-182">Dans la boîte de dialogue mappage de la Variable, le **Variable** colonne répertorie le nom de la variable que vous avez spécifié précédemment, par exemple, **VAR**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-182">In the Variable Mapping dialog box, the **Variable** column lists the name of the variable you specified earlier, for example, **VAR**.</span></span> <span data-ttu-id="6ca27-183">Dans le **nom de la propriété** colonne, spécifiez le nom de la propriété promue qui comporte la chaîne de requête à passer à la variable.</span><span class="sxs-lookup"><span data-stu-id="6ca27-183">In the **Property Name** column, specify the name of the promoted property that has the query string to be passed to the variable.</span></span> <span data-ttu-id="6ca27-184">Dans ce didacticiel, le nom de cette propriété est **requête**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-184">In this tutorial, that property name is **Query**.</span></span> <span data-ttu-id="6ca27-185">Enfin, pour **propriété Namespace**, spécifiez l’espace de noms pour le **PropertySchema.xsd**, qui est `https://BtsSalesforceIntegration.PropertySchema`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-185">Finally, for **Property Namespace**, specify the namespace for the **PropertySchema.xsd**, which is `https://BtsSalesforceIntegration.PropertySchema`.</span></span> <span data-ttu-id="6ca27-186">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-186">Click **OK**.</span></span>  
  
             <span data-ttu-id="6ca27-187">![Onglet Général de WCF &#45; Adaptateur WebHttp](../core/media/bts-sf-webhttp-general.jpg "BTS_SF_WebHttp_General")</span><span class="sxs-lookup"><span data-stu-id="6ca27-187">![General tab of WCF&#45;WebHttp Adapter](../core/media/bts-sf-webhttp-general.jpg "BTS_SF_WebHttp_General")</span></span>  
  
    2.  <span data-ttu-id="6ca27-188">Sur le **sécurité** onglet, pour **mode de sécurité**, sélectionnez **Transport**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-188">On the **Security** tab, for **Security mode**, select **Transport**.</span></span>  
  
    3.  <span data-ttu-id="6ca27-189">Sur le **comportement** onglet, utilisez le comportement personnalisé que vous avez créé dans [étape 3d : l’activation de BizTalk Server pour envoyer et recevoir des Messages de Salesforce](../core/step-3d-enabling-biztalk-server-to-send-and-receive-messages-from-salesforce.md) pour s’authentifier auprès de Salesforce.</span><span class="sxs-lookup"><span data-stu-id="6ca27-189">On the **Behavior** tab, use the custom behavior that you created in [Step 3d: Enabling BizTalk Server to Send and Receive Messages from Salesforce](../core/step-3d-enabling-biztalk-server-to-send-and-receive-messages-from-salesforce.md) to authenticate with Salesforce.</span></span> <span data-ttu-id="6ca27-190">Pour utiliser le comportement, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="6ca27-190">To use the behavior, do the following:</span></span>  
  
        -   <span data-ttu-id="6ca27-191">Avec le bouton droit **EndpointBehavior** , puis sélectionnez **ajouter une extension**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-191">Right-click **EndpointBehavior** and then select **Add extension**.</span></span>  
  
        -   <span data-ttu-id="6ca27-192">Dans le **sélectionner une Extension de comportement** boîte de dialogue, sélectionnez **Microsoft.BizTalk.Adapter.Behaviors.Demo.Salesforce**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-192">In the **Select Behavior Extension** dialog box, select **Microsoft.BizTalk.Adapter.Behaviors.Demo.Salesforce**.</span></span> <span data-ttu-id="6ca27-193">Nous avions utilisé ce nom de comportement tout en ajoutant le comportement à la machine.config.</span><span class="sxs-lookup"><span data-stu-id="6ca27-193">We had used this behavior name while adding the behavior to the machine.config.</span></span>  
  
        -   <span data-ttu-id="6ca27-194">Sélectionnez le comportement nouvellement ajouté puis spécifiez les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ca27-194">Select the newly added behavior and then specify the following values:</span></span>  
  
            |||  
            |-|-|  
            |<span data-ttu-id="6ca27-195">consumerKey (obligatoire)</span><span class="sxs-lookup"><span data-stu-id="6ca27-195">consumerKey (Required)</span></span>|<span data-ttu-id="6ca27-196">Spécifiez la clé utilisateur de votre compte Salesforce.</span><span class="sxs-lookup"><span data-stu-id="6ca27-196">Specify the consumer key for your Salesforce account.</span></span> <span data-ttu-id="6ca27-197">Vous pouvez récupérer la clé de consommateur en accédant à l’application Salesforce connectée que vous avez créé dans [étape 2 : configurer le système Salesforce](../core/step-2-set-up-the-salesforce-system.md).</span><span class="sxs-lookup"><span data-stu-id="6ca27-197">You can retrieve the consumer key by going to the Salesforce connected application you created in [Step 2: Set up the Salesforce System](../core/step-2-set-up-the-salesforce-system.md).</span></span>|  
            |<span data-ttu-id="6ca27-198">consumerSecret (obligatoire)</span><span class="sxs-lookup"><span data-stu-id="6ca27-198">consumerSecret (Required)</span></span>|<span data-ttu-id="6ca27-199">Récupérer la question secrète de la force de vente connecté l’application que vous avez créé dans [étape 2 : configurer le système Salesforce](../core/step-2-set-up-the-salesforce-system.md).</span><span class="sxs-lookup"><span data-stu-id="6ca27-199">Retrieve the consumer secret from the Salesforce connected application you created in [Step 2: Set up the Salesforce System](../core/step-2-set-up-the-salesforce-system.md).</span></span>|  
            |<span data-ttu-id="6ca27-200">Mot de passe (obligatoire)</span><span class="sxs-lookup"><span data-stu-id="6ca27-200">Password (Required)</span></span>|<span data-ttu-id="6ca27-201">Indiquer le mot de passe du compte Salesforce.</span><span class="sxs-lookup"><span data-stu-id="6ca27-201">Specify the password for the Salesforce account.</span></span> <span data-ttu-id="6ca27-202">Pour vous connecter à Salesforce à partir d'une application tierce, vous devez indiquer le mot de passe dans le format mot de passe suivi par le jeton de sécurité.</span><span class="sxs-lookup"><span data-stu-id="6ca27-202">To connect to Salesforce from a third party application, you must specify the password in the format password followed by the security token.</span></span> <span data-ttu-id="6ca27-203">Par exemple, si le mot de passe est **mot de passe** et le jeton est **XXXXXX**, vous devez entrer `passwordXXXXXX`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-203">For example, if the password is **password** and the token is **XXXXXX**, you must enter `passwordXXXXXX`.</span></span>|  
            |<span data-ttu-id="6ca27-204">sessionTimeout</span><span class="sxs-lookup"><span data-stu-id="6ca27-204">sessionTimeout</span></span>|<span data-ttu-id="6ca27-205">Ceci a la valeur par défaut 300.</span><span class="sxs-lookup"><span data-stu-id="6ca27-205">This has a default value of 300.</span></span>|  
            |<span data-ttu-id="6ca27-206">Username (obligatoire)</span><span class="sxs-lookup"><span data-stu-id="6ca27-206">Username (Required)</span></span>|<span data-ttu-id="6ca27-207">Spécifiez le compte de connexion du développeur Salesforce.</span><span class="sxs-lookup"><span data-stu-id="6ca27-207">Specify the Salesforce developer login account.</span></span>|  
  
             <span data-ttu-id="6ca27-208">![Onglet comportement pour WCF &#45; Adaptateur WebHttp](../core/media/bts-sf-webhttp-behavior.jpg "BTS_SF_WebHttp_Behavior")</span><span class="sxs-lookup"><span data-stu-id="6ca27-208">![Behavior tab for WCF&#45;WebHttp adapter](../core/media/bts-sf-webhttp-behavior.jpg "BTS_SF_WebHttp_Behavior")</span></span>  
  
    4.  <span data-ttu-id="6ca27-209">Sur le **Messages** sous l’onglet sous **Message sortant** boîte pour **supprimer le corps en fonction de verbes**, entrez `GET`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-209">On the **Messages** tab, under **Outbound Message** box, for **Suppress Body for Verbs**, enter `GET`.</span></span> <span data-ttu-id="6ca27-210">Ainsi, pour la méthode GET, il n'y a pas de charge du message dans la requête envoyée à Salesforce.</span><span class="sxs-lookup"><span data-stu-id="6ca27-210">This ensures for the GET method, there is no message payload in the request being sent to Salesforce.</span></span>  
  
    5.  <span data-ttu-id="6ca27-211">Cliquez sur **OK** jusqu'à ce que vous quittez toutes les boîtes de dialogue Ouvrir.</span><span class="sxs-lookup"><span data-stu-id="6ca27-211">Click **OK** until you exit all open dialog boxes.</span></span>  
  
### <a name="to-configure-the-wcf-sql-send-port"></a><span data-ttu-id="6ca27-212">Pour configurer le port d’envoi WCF-SQL</span><span class="sxs-lookup"><span data-stu-id="6ca27-212">To configure the WCF-SQL send port</span></span>  
  
1.  <span data-ttu-id="6ca27-213">Développez le **SalesforceIntegration** application, avec le bouton droit **Ports d’envoi**, pointez sur **nouveau**, puis cliquez sur **statique Port d’envoi unidirectionnel**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-213">Expand the **SalesforceIntegration** application, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
2.  <span data-ttu-id="6ca27-214">Dans la boîte de dialogue Propriétés de port d'envoi, spécifiez les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ca27-214">In the Send Port Properties dialog box, specify the following values:</span></span>  
  
    |||  
    |-|-|  
    |<span data-ttu-id="6ca27-215">Nom</span><span class="sxs-lookup"><span data-stu-id="6ca27-215">Name</span></span>|<span data-ttu-id="6ca27-216">Entrez `SendToSQL`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-216">Enter `SendToSQL`.</span></span>|  
    |<span data-ttu-id="6ca27-217">Type</span><span class="sxs-lookup"><span data-stu-id="6ca27-217">Type</span></span>|<span data-ttu-id="6ca27-218">Sélectionnez **WCF-SQL**</span><span class="sxs-lookup"><span data-stu-id="6ca27-218">Select **WCF-SQL**</span></span>|  
    |<span data-ttu-id="6ca27-219">Gestionnaire d’envoi</span><span class="sxs-lookup"><span data-stu-id="6ca27-219">Send Handler</span></span>|<span data-ttu-id="6ca27-220">Sélectionnez **BizTalkServerApplication**</span><span class="sxs-lookup"><span data-stu-id="6ca27-220">Select **BizTalkServerApplication**</span></span>|  
    |<span data-ttu-id="6ca27-221">Pipeline d'envoi</span><span class="sxs-lookup"><span data-stu-id="6ca27-221">Send Pipeline</span></span>|<span data-ttu-id="6ca27-222">Sélectionnez **XMLTransmit**</span><span class="sxs-lookup"><span data-stu-id="6ca27-222">Select **XMLTransmit**</span></span>|  
  
     <span data-ttu-id="6ca27-223">Dans la boîte de dialogue Propriétés de Port d’envoi, cliquez sur **configurer** pour le type de port.</span><span class="sxs-lookup"><span data-stu-id="6ca27-223">On the Send Port Properties dialog box, click **Configure** against the port type.</span></span>  
  
3.  <span data-ttu-id="6ca27-224">Dans la boîte de dialogue Propriétés du transport WCF-SQL, spécifiez les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ca27-224">In the WCF-SQL Transport Properties dialog box, specify the following values:</span></span>  
  
    1.  <span data-ttu-id="6ca27-225">Sous l'onglet **Général** , effectuez les paramétrages suivants :</span><span class="sxs-lookup"><span data-stu-id="6ca27-225">On the **General** tab, do the following:</span></span>  
  
        -   <span data-ttu-id="6ca27-226">Sous `Endpoint Address`, cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-226">Under `Endpoint Address`, click **Configure**.</span></span> <span data-ttu-id="6ca27-227">Pour le **InitialCatalog** propriété, spécifiez le nom de la base de données qui contient la table où les données à partir de la réponse de Salesforce doivent être entrées.</span><span class="sxs-lookup"><span data-stu-id="6ca27-227">For the **InitialCatalog** property, specify the database name that contains the table where the data from Salesforce response must be entered.</span></span> <span data-ttu-id="6ca27-228">Pour ce didacticiel, entrez la valeur `Orders`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-228">For this tutorial enter this value as `Orders`.</span></span> <span data-ttu-id="6ca27-229">Pour **Server** propriété, entrez le nom du serveur sur lequel la base de données SQL Server est installé.</span><span class="sxs-lookup"><span data-stu-id="6ca27-229">For **Server** property, enter the server name where SQL Server database is installed.</span></span>  
  
        -   <span data-ttu-id="6ca27-230">Sous **en-tête d’Action SOAP**, indiquez l’action à être utilisée pour insérer dans le **OrderDetails** table.</span><span class="sxs-lookup"><span data-stu-id="6ca27-230">Under **SOAP Action header**, specify the action to be used for inserting into the **OrderDetails** table.</span></span> <span data-ttu-id="6ca27-231">Vous devez entrer `TableOp/Insert/dbo/OrderDetails`.</span><span class="sxs-lookup"><span data-stu-id="6ca27-231">You must enter `TableOp/Insert/dbo/OrderDetails`.</span></span>  
  
    2.  <span data-ttu-id="6ca27-232">Sous l'onglet Informations d'identification, si vous laissez tout en blanc, l'adaptateur utilise l'authentification Windows pour se connecter à la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6ca27-232">On the Credentials tab, if you leave everything blank the adapter uses Windows Authentication to connect to the SQL Server database.</span></span> <span data-ttu-id="6ca27-233">Si vous voulez utiliser une autre forme d'authentification, vous pouvez spécifier les valeurs correspondantes.</span><span class="sxs-lookup"><span data-stu-id="6ca27-233">If you want to use any other form of authentication, you can specify the relevant values.</span></span>  
  
    3.  <span data-ttu-id="6ca27-234">Cliquez sur **OK** jusqu'à ce que vous quittez toutes les boîtes de dialogue Ouvrir.</span><span class="sxs-lookup"><span data-stu-id="6ca27-234">Click **OK** until you exit all open dialog boxes.</span></span>  
  
### <a name="to-configure-the-biztalk-server-application"></a><span data-ttu-id="6ca27-235">Pour configurer l'application BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="6ca27-235">To configure the BizTalk Server application</span></span>  
  
1.  <span data-ttu-id="6ca27-236">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, avec le bouton droit le **SalesforceIntegration** application, puis sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-236">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click the **SalesforceIntegration** application, and then click **Configure**.</span></span>  
  
2.  <span data-ttu-id="6ca27-237">Dans la boîte de dialogue Configurer l’Application, sélectionnez le **NotificationServiceClient** orchestration, dans le volet droit, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="6ca27-237">In the Configure Application dialog box, select the **NotificationServiceClient** orchestration, and from the right pane do the following:</span></span>  
  
    1.  <span data-ttu-id="6ca27-238">Pour l’ordinateur hôte, sélectionnez **BizTalkServerApplication**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-238">For Host, select **BizTalkServerApplication**.</span></span>  
  
    2.  <span data-ttu-id="6ca27-239">Port de réception de la logique de la carte **SalesforceNotificationPort** jusqu’au port de réception, **ReceiveOppNotification**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-239">Map the logical receive port **SalesforceNotificationPort** to the physical receive port, **ReceiveOppNotification**.</span></span>  
  
    3.  <span data-ttu-id="6ca27-240">Mappez le port d’envoi logique **SalesforceRESTInterface** jusqu’au port d’envoi, **SalesforceREST**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-240">Map the logical send port **SalesforceRESTInterface** to the physical send port, **SalesforceREST**.</span></span>  
  
    4.  <span data-ttu-id="6ca27-241">Mappez le port d’envoi logique **SendToSQL** jusqu’au port d’envoi, **SendToSQL**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-241">Map the logical send port **SendToSQL** to the physical send port, **SendToSQL**.</span></span>  
  
     <span data-ttu-id="6ca27-242">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-242">Click **OK**.</span></span>  
  
3.  <span data-ttu-id="6ca27-243">Cliquez sur le **SalesforceIntegration** application, puis sur **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="6ca27-243">Right-click the **SalesforceIntegration** application and then click **Start**.</span></span> <span data-ttu-id="6ca27-244">Cela démarre le **NotificationServiceClient** orchestration, permet à l’emplacement de réception et démarre le port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="6ca27-244">This starts the **NotificationServiceClient** orchestration, enables the receive location, and starts the send port.</span></span>  
  
 <span data-ttu-id="6ca27-245">Dans cette rubrique, nous avons effectué la configuration de la solution dans la console d'administration [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] en associant les ports logiques dans l'orchestration avec les ports physiques.</span><span class="sxs-lookup"><span data-stu-id="6ca27-245">In this topic, we finished configuring the solution in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console by associating the logical ports in the orchestration with the physical ports.</span></span>