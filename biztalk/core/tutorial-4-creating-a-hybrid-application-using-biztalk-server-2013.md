---
title: "Didacticiel 4 : Création d’une Application hybride à l’aide de BizTalk Server 2013 | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 3a9de95f-7d2c-437d-be5b-0062592f32c6
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5c11b163f34a1320052de585c7ddfc79afb03db4
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="tutorial-4-creating-a-hybrid-application-using-biztalk-server-2013"></a><span data-ttu-id="c9593-102">Didacticiel 4 : Création d’une Application hybride à l’aide de BizTalk Server 2013</span><span class="sxs-lookup"><span data-stu-id="c9593-102">Tutorial 4: Creating a Hybrid Application Using BizTalk Server 2013</span></span>
<span data-ttu-id="c9593-103">Cette section contient une procédure pas à pas pour la création d'une application hybride impliquant [!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)] et [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c9593-103">This section provides a step-by-step walkthrough on how to create a hybrid application involving [!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)] and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
## <a name="business-scenario"></a><span data-ttu-id="c9593-104">Scénario d'entreprise</span><span class="sxs-lookup"><span data-stu-id="c9593-104">Business Scenario</span></span>  
 <span data-ttu-id="c9593-105">Northwind est une entreprise qui reçoit des commandes client en provenance de ses partenaires, dont l'un d'eux est Contoso, sous la forme de messages EDI de type fichier plat.</span><span class="sxs-lookup"><span data-stu-id="c9593-105">Northwind is an enterprise that receives sales orders from its partners, one of them being Contoso, in the form of a flat-file EDI message.</span></span> <span data-ttu-id="c9593-106">Northwind souhaite configurer une application de bout en bout pour les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="c9593-106">Northwind wants to set up an end-to-end application that does the following:</span></span>  
  
-   <span data-ttu-id="c9593-107">**Gérer le traitement des messages EDI** : ce module de l’application doit vérifier que le message reçu à partir de Contoso est conforme aux formats de message EDI standards.</span><span class="sxs-lookup"><span data-stu-id="c9593-107">**Manage the EDI message processing** – This module of the application must verify that the message received from Contoso conforms to the standard EDI message formats.</span></span> <span data-ttu-id="c9593-108">Ce module doit également générer tous les accusés de réception nécessaires pour vérifier que le message a été correctement traité.</span><span class="sxs-lookup"><span data-stu-id="c9593-108">This module must also generate all the required acknowledgements to verify that the message is successfully processed.</span></span>  
  
-   <span data-ttu-id="c9593-109">**Utiliser la logique métier pour traiter les données** – une fois le message EDI est correctement vérifié et traité, Northwind doit exécuter le message par rapport à la logique métier pour un traitement ultérieur.</span><span class="sxs-lookup"><span data-stu-id="c9593-109">**Use business logic to process the data** – Once the EDI message is successfully verified and processed, Northwind must run the message against business logic for further processing.</span></span> <span data-ttu-id="c9593-110">Par exemple, si la quantité commandée figurant dans le message reçu est supérieure à une quantité donnée, les données sont stockées dans une base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9593-110">For example, if the order quantity in the received message is more than a given amount, the data is stored in a SQL Server database.</span></span> <span data-ttu-id="c9593-111">Sinon, les données sont envoyées dans un emplacement de fichier partagé.</span><span class="sxs-lookup"><span data-stu-id="c9593-111">Otherwise, the data is sent to a shared file location.</span></span>  
  
 <span data-ttu-id="c9593-112">Pour mettre en œuvre ce scénario, Northwind décide de configurer une application hybride dans laquelle le traitement des messages EDI est effectué dans le cloud, et le traitement des données pilotées par la logique métier est effectué en local.</span><span class="sxs-lookup"><span data-stu-id="c9593-112">To achieve this scenario, Northwind decides to set up a hybrid application where the EDI message processing is done on the cloud while the business-logic-driven data processing is done within the premises.</span></span> <span data-ttu-id="c9593-113">Pour configurer cette application hybride, Northwind utilise les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="c9593-113">To set up this hybrid application Northwind uses the following:</span></span>  
  
-   <span data-ttu-id="c9593-114">**[!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)]**– Le portail Azure BizTalk disponible avec [!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)] permet aux clients de configurer des partenaires commerciaux et des accords EDI sur [!INCLUDE[winazure](../includes/winazure-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c9593-114">**[!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)]**  – The Azure BizTalk Portal available with [!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)] enables customers to configure trading partners and EDI agreements on [!INCLUDE[winazure](../includes/winazure-md.md)].</span></span> <span data-ttu-id="c9593-115">Northwind utilise la version de [!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)] d'avril 2012 pour créer et déployer un accord servant à traiter le message EDI entrant, à le valider par rapport au schéma de commande client X12 840, à le transformer selon un schéma requis par Northwind, puis à l'envoyer vers une file d'attente Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9593-115">Northwind uses the [!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)] – April 2012 release to create and deploy an agreement that processes the incoming EDI message, validates it against the X12 840 sales order schema, transforms the message to a schema required by Northwind, and then sends the message to a Service Bus Queue.</span></span> <span data-ttu-id="c9593-116">En résumé, pour développer une application hybride, les données doivent être envoyées de la file d'attente Service Bus vers une application locale.</span><span class="sxs-lookup"><span data-stu-id="c9593-116">So, to develop a hybrid application, the data should be sent from the Service Bus Queue to an on-premises application.</span></span>  
  
-   <span data-ttu-id="c9593-117">**[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]**: Le nouvel adaptateur pour Service Bus (**SB-Messaging**) disponible avec [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] permet aux applications de recevoir des messages à partir des entités Service Bus, comme les files d’attente, rubriques, et ainsi de suite dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c9593-117">**[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]**  – The new adapter for Service Bus (**SB-Messaging**) available with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] enables applications to receive messages from Service Bus entities like Queues, Topics, and so on into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="c9593-118">Dans le cadre de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application, Northwind utilise une orchestration pour décider si la quantité demandée de la commande reçue est supérieure à 100.</span><span class="sxs-lookup"><span data-stu-id="c9593-118">As part of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application, Northwind uses an orchestration to decide whether the quantity requested in the received sales order is more than 100.</span></span> <span data-ttu-id="c9593-119">Si la quantité est supérieure à 100, le message est inséré dans une table de base de données SQL Server appelée **SalesOrder**.</span><span class="sxs-lookup"><span data-stu-id="c9593-119">If the quantity is more than 100, the message is inserted into a SQL Server database table called **SalesOrder**.</span></span> <span data-ttu-id="c9593-120">Si la quantité est inférieure à 100, le message est envoyé dans un emplacement de fichier partagé.</span><span class="sxs-lookup"><span data-stu-id="c9593-120">If the quantity is less than 100, the message is sent to a shared file location.</span></span>  
  
     <span data-ttu-id="c9593-121">Pour insérer le message dans une table de base de données SQL Server, Northwind utilise l'[!INCLUDE[adaptersql](../includes/adaptersql-md.md)] disponible dans le [!INCLUDE[adapterpacknoversion](../includes/adapterpacknoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c9593-121">To insert the message into a SQL Server database table, Northwind uses the [!INCLUDE[adaptersql](../includes/adaptersql-md.md)] available as part of the [!INCLUDE[adapterpacknoversion](../includes/adapterpacknoversion-md.md)].</span></span>  
  
### <a name="end-to-end-message-flow"></a><span data-ttu-id="c9593-122">Flux de messages de bout en bout</span><span class="sxs-lookup"><span data-stu-id="c9593-122">End-to-end Message Flow</span></span>  
 <span data-ttu-id="c9593-123">Voici le trajet du message dans l'application hybride :</span><span class="sxs-lookup"><span data-stu-id="c9593-123">This is how the message flows through the hybrid application:</span></span>  
  
1.  <span data-ttu-id="c9593-124">Contoso envoie un message de commande client X12 vers le point de terminaison où est déployé l'accord EDI dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="c9593-124">Contoso sends an X12 sales order message to the endpoint where the EDI agreement is deployed on the cloud.</span></span>  
  
2.  <span data-ttu-id="c9593-125">Une fois que le message a été correctement traité via l'accord EDI, il est envoyé vers la file d'attente Service Bus.</span><span class="sxs-lookup"><span data-stu-id="c9593-125">After the message is successfully processed through the EDI agreement, it is sent to the Service Bus Queue.</span></span>  
  
3.  <span data-ttu-id="c9593-126">L'adaptateur de réception SB-Messaging consomme le message en provenance de la file d'attente Service Bus et instancie l'orchestration déployée dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] de manière à envoyer le message vers différentes destinations, en fonction de la quantité commandée.</span><span class="sxs-lookup"><span data-stu-id="c9593-126">SB-Messaging receive adapter consumes the message from the Service Bus Queue and instantiates the orchestration deployed in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to send the message to different destinations based on the order quantity.</span></span>  
  
4.  <span data-ttu-id="c9593-127">Si la quantité commandée est supérieure à 100, l’orchestration insère le message à un **SalesOrder** table.</span><span class="sxs-lookup"><span data-stu-id="c9593-127">If the quantity ordered is greater than 100, the orchestration inserts the message to a **SalesOrder** table.</span></span> <span data-ttu-id="c9593-128">En revanche, si la quantité commandée est inférieure ou égale à 100, le message est écrit dans un emplacement de fichier partagé.</span><span class="sxs-lookup"><span data-stu-id="c9593-128">If the quantity ordered is less than or equal to 100, the message is written to a shared file location.</span></span>  
  
## <a name="set-up-your-computer"></a><span data-ttu-id="c9593-129">Configuration de votre ordinateur</span><span class="sxs-lookup"><span data-stu-id="c9593-129">Set up Your Computer</span></span>  
 <span data-ttu-id="c9593-130">Ce didacticiel nécessite que vous réalisiez quatre activités à caractère général.</span><span class="sxs-lookup"><span data-stu-id="c9593-130">This tutorial requires you to perform four broad activities.</span></span> <span data-ttu-id="c9593-131">Le tableau suivant répertorie les activités ainsi que la configuration logicielle requise pour chaque activité :</span><span class="sxs-lookup"><span data-stu-id="c9593-131">The following table lists the activities and the software requirements for each activity:</span></span>  
  
|<span data-ttu-id="c9593-132">Activité</span><span class="sxs-lookup"><span data-stu-id="c9593-132">Activity</span></span>|<span data-ttu-id="c9593-133">Logiciels requis</span><span class="sxs-lookup"><span data-stu-id="c9593-133">Required software</span></span>|  
|--------------|-----------------------|  
|<span data-ttu-id="c9593-134">Création des artefacts EDI nécessaires à l'accord EDI</span><span class="sxs-lookup"><span data-stu-id="c9593-134">Create the EDI artifacts required for the EDI agreement</span></span>|<span data-ttu-id="c9593-135">Ce didacticiel a été créé avec la version de [!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)] d'avril 2012 ainsi qu’avec le schéma de commande client X12 840.</span><span class="sxs-lookup"><span data-stu-id="c9593-135">This tutorial was created with the [!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)] – April 2012 release as well as the X12 840 sales order schema.</span></span> <span data-ttu-id="c9593-136">Ils peuvent être téléchargés à partir de [http://go.microsoft.com/fwlink/p/?LinkId=235057](http://go.microsoft.com/fwlink/p/?LinkId=235057).</span><span class="sxs-lookup"><span data-stu-id="c9593-136">These can be downloaded from [http://go.microsoft.com/fwlink/p/?LinkId=235057](http://go.microsoft.com/fwlink/p/?LinkId=235057).</span></span>|  
|<span data-ttu-id="c9593-137">Création et déploiement de l'accord EDI</span><span class="sxs-lookup"><span data-stu-id="c9593-137">Create and deploy the EDI agreement</span></span>|<span data-ttu-id="c9593-138">Étant donné que l'accord EDI est déployé sur Azure, vous avez uniquement besoin d'un navigateur Web (par exemple, Internet Explorer) pour vous connecter au Portail Azure BizTalk.</span><span class="sxs-lookup"><span data-stu-id="c9593-138">Because the EDI agreement is deployed on Azure, you only need a Web browser (e.g. Internet Explorer) to log in to the Azure BizTalk Portal.</span></span>|  
|<span data-ttu-id="c9593-139">Création, déploiement et configuration de l'application [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="c9593-139">Build, deploy, and configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application</span></span>|<span data-ttu-id="c9593-140">Si vous voulez configurer un [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ordinateur sur une machine virtuelle Azure, suivez les instructions à [http://msdn.microsoft.com/library/azure/jj248689.aspx](http://msdn.microsoft.com/library/azure/jj248689.aspx).</span><span class="sxs-lookup"><span data-stu-id="c9593-140">If you want to provision a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer on an Azure VM, follow the instructions at [http://msdn.microsoft.com/library/azure/jj248689.aspx](http://msdn.microsoft.com/library/azure/jj248689.aspx).</span></span>|  
|<span data-ttu-id="c9593-141">Envoi d'un message de test au point de terminaison de l'accord EDI</span><span class="sxs-lookup"><span data-stu-id="c9593-141">Send a test message to the EDI agreement endpoint</span></span>|<span data-ttu-id="c9593-142">Vous pouvez utiliser l'outil MessageSender disponible dans le package d'exemples fourni avec [!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c9593-142">You can use the MessageSender tool available in the samples package shipped with [!INCLUDE[appfabricintegration](../includes/appfabricintegration-md.md)].</span></span> <span data-ttu-id="c9593-143">Vous pouvez télécharger le package d’exemples [http://go.microsoft.com/fwlink/p/?LinkId=235057](http://go.microsoft.com/fwlink/p/?LinkId=235057).</span><span class="sxs-lookup"><span data-stu-id="c9593-143">You can download the samples package from [http://go.microsoft.com/fwlink/p/?LinkId=235057](http://go.microsoft.com/fwlink/p/?LinkId=235057).</span></span>|  
  
 <span data-ttu-id="c9593-144">Vous pouvez choisir d'installer tous ces éléments sur un même ordinateur, ou sur des ordinateurs distincts.</span><span class="sxs-lookup"><span data-stu-id="c9593-144">You can opt to install all these on the same computer or on different computers.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="c9593-145">Dans cette section</span><span class="sxs-lookup"><span data-stu-id="c9593-145">In This Section</span></span>  
  
-   [<span data-ttu-id="c9593-146">Étape 1 (pour Azure) : Créer le projet EDI</span><span class="sxs-lookup"><span data-stu-id="c9593-146">Step 1 (For Azure): Create the EDI Project</span></span>](../core/step-1-for-azure-create-the-edi-project.md)  
  
-   [<span data-ttu-id="c9593-147">Étape 2 (pour Azure) : Créer un accord EDI</span><span class="sxs-lookup"><span data-stu-id="c9593-147">Step 2 (For Azure): Create an EDI Agreement</span></span>](../core/step-2-for-azure-create-an-edi-agreement.md)  
  
-   [<span data-ttu-id="c9593-148">Étape 3 (pour Azure) : Créer une file d’attente du Bus de Service</span><span class="sxs-lookup"><span data-stu-id="c9593-148">Step 3 (For Azure): Create a Service Bus Queue</span></span>](../core/step-3-for-azure-create-a-service-bus-queue.md)  
  
-   [<span data-ttu-id="c9593-149">Étape 4 (sur site) : Créer la Table SQL Server</span><span class="sxs-lookup"><span data-stu-id="c9593-149">Step 4 (On Premises): Create the SQL Server Table</span></span>](../core/step-4-on-premises-create-the-sql-server-table.md)  
  
-   [<span data-ttu-id="c9593-150">Étape 5 (locaux) : Générer le schéma pour l’insertion d’un Message dans la SalesOrder Table</span><span class="sxs-lookup"><span data-stu-id="c9593-150">Step 5 (On Premises): Generate the Schema for Inserting a Message inito SalesOrder Table</span></span>](../core/step-5-generate-the-schema-for-inserting-a-message-into-salesorder-table.md)  
  
-   [<span data-ttu-id="c9593-151">Étape 6 (sur site) : Créer une transformation pour mapper le Message à partir de la file d’attente vers le schéma Insert</span><span class="sxs-lookup"><span data-stu-id="c9593-151">Step 6 (On Premises): Create a Transform to Map the Message from the Queue to the Insert Schema</span></span>](../core/step-6-map-the-message-from-the-queue-to-the-insert-schema.md)  
  
-   [<span data-ttu-id="c9593-152">Étape 7 (en local) : Création d’une Orchestration</span><span class="sxs-lookup"><span data-stu-id="c9593-152">Step 7 (On Premises): Create an Orchestration</span></span>](../core/step-7-on-premises-create-an-orchestration.md)  
  
-   [<span data-ttu-id="c9593-153">Étape 8 (en local) : Configurer l’Application BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="c9593-153">Step 8 (On Premises): Configure the BizTalk Server Application</span></span>](../core/step-8-on-premises-configure-the-biztalk-server-application.md)  
  
-   [<span data-ttu-id="c9593-154">Étape 9 : Tester la Solution</span><span class="sxs-lookup"><span data-stu-id="c9593-154">Step 9: Test the Solution</span></span>](../core/step-9-test-the-solution.md)