---
title: "Single Sign-prise en charge de l’adaptateur SOAP | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- SSO, SOAP adapters
- SOAP adapters, SharePoint Portal Server
- SOAP adapters, SSO
- SharePoint Portal server
ms.assetid: c7bf755c-c37d-4b19-9817-a7f42e1e9656
caps.latest.revision: "18"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7b6e604eaf7e1b0a9b6144dc20f8bdd59d03932f
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="single-sign-on-support-for-the-soap-adapter"></a><span data-ttu-id="67c97-102">Authentification prise en charge unique de l’adaptateur SOAP</span><span class="sxs-lookup"><span data-stu-id="67c97-102">Single Sign-On Support for the SOAP Adapter</span></span>
<span data-ttu-id="67c97-103">Vous pouvez utiliser la console Administration [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] pour configurer l'utilisation de l'authentification unique de l'entreprise (SSO) pour un emplacement de réception ou un port d'envoi SOAP.</span><span class="sxs-lookup"><span data-stu-id="67c97-103">You can use the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to configure Enterprise Single Sign-On (SSO) for use with the SOAP receive location or send port.</span></span> <span data-ttu-id="67c97-104">Cette rubrique décrit le fonctionnement de SSO avec l'adaptateur SOAP.</span><span class="sxs-lookup"><span data-stu-id="67c97-104">This topic describes how SSO works with the SOAP adapter.</span></span>  
  
 <span data-ttu-id="67c97-105">**Emplacements de réception unique authentification prise en charge de SOAP**</span><span class="sxs-lookup"><span data-stu-id="67c97-105">**Single Sign-On Support for SOAP Receive Locations**</span></span>  
  
 <span data-ttu-id="67c97-106">Les emplacements de réception SOAP prennent en charge deux versions de SSO—[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Enterprise SSO et Microsoft SharePoint Portal Server SSO.</span><span class="sxs-lookup"><span data-stu-id="67c97-106">SOAP receive locations support two versions of SSO—[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Enterprise SSO and Microsoft SharePoint Portal Server SSO.</span></span> <span data-ttu-id="67c97-107">Exécutez l'Assistant Publication de services Web BizTalk pour activer le support de SharePoint Portal Server SSO.</span><span class="sxs-lookup"><span data-stu-id="67c97-107">Run the BizTalk Web Services Publishing Wizard to enable support for SharePoint Portal Server SSO.</span></span> <span data-ttu-id="67c97-108">Pour plus d’informations sur l’activation de l’authentification unique de SharePoint Portal Server, consultez [publication de Services Web](../core/publishing-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="67c97-108">For more information about enabling SharePoint Portal Server SSO, see [Publishing Web Services](../core/publishing-web-services.md).</span></span> <span data-ttu-id="67c97-109">Activez l'utilisation de l'authentification unique de l'entreprise à l'aide des pages de propriétés de l'emplacement de réception SOAP.</span><span class="sxs-lookup"><span data-stu-id="67c97-109">Enable BizTalk Enterprise Single Sign-On by using the property pages for the SOAP receive location.</span></span> <span data-ttu-id="67c97-110">Pour plus d’informations sur l’activation de l’authentification unique de l’entreprise pour l’emplacement de réception SOAP, consultez [comment configurer un emplacement de réception SOAP](../core/how-to-configure-a-soap-receive-location.md).</span><span class="sxs-lookup"><span data-stu-id="67c97-110">For more information about enabling Enterprise SSO for the SOAP receive location, see [How to Configure a SOAP Receive Location](../core/how-to-configure-a-soap-receive-location.md).</span></span>  
  
 <span data-ttu-id="67c97-111">**Prise en charge d’Enterprise SSO pour SOAP des emplacements de réception**</span><span class="sxs-lookup"><span data-stu-id="67c97-111">**Enterprise SSO Support for SOAP Receive Locations**</span></span>  
  
 <span data-ttu-id="67c97-112">Les services Internet (IIS) reçoivent une demande SOAP d'un client Web, IIS authentifie l'utilisateur et transmet l'ID de sécurité à l'adaptateur SOAP.</span><span class="sxs-lookup"><span data-stu-id="67c97-112">Internet Information Services (IIS) receives a SOAP request from a Web client, and then IIS authenticates the user and passes the security identifier to the SOAP adapter.</span></span> <span data-ttu-id="67c97-113">Si la méthode d'authentification IIS est Authentification Digest, Authentification de base ou Authentification Windows intégrée, l'adaptateur SOAP contacte le magasin d'informations d'identification SSO pour obtenir un ticket chiffré basé sur l'utilisateur authentifié.</span><span class="sxs-lookup"><span data-stu-id="67c97-113">If the IIS authentication method is Digest authentication, Basic authentication, or Integrated Windows Authentication, the SOAP adapter calls the SSO credential store to obtain an encrypted ticket based on the authenticated user.</span></span> <span data-ttu-id="67c97-114">Ce ticket est stocké en tant que le **SSOTicket** propriété dans la propriété de contexte du message.</span><span class="sxs-lookup"><span data-stu-id="67c97-114">This ticket is stored as the **SSOTicket** property in the context property of the message.</span></span>  
  
 <span data-ttu-id="67c97-115">Dans le scénario de transfert, le moteur de messagerie BizTalk dirige le message vers la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="67c97-115">In the pass-through scenario, the BizTalk Messaging Engine directs the message to the MessageBox database.</span></span> <span data-ttu-id="67c97-116">Lorsqu'un adaptateur d'envoi reçoit le message de la base de données MessageBox, il appelle la méthode RedeemTicket avec le ticket chiffré, conjointement avec le nom de l'application, pour récupérer les informations de sécurité de l'application du magasin SSO.</span><span class="sxs-lookup"><span data-stu-id="67c97-116">When a send adapter receives the message from the MessageBox database, it calls the RedeemTicket method with the encrypted ticket along with the application name to retrieve the security credentials for the application from the SSO store.</span></span> <span data-ttu-id="67c97-117">L'adaptateur d'envoi utilise alors les informations d'identification externes pour se connecter à l'application et traiter la demande.</span><span class="sxs-lookup"><span data-stu-id="67c97-117">The send adapter then uses the external credentials to connect to the application and process the request.</span></span> <span data-ttu-id="67c97-118">Pour plus d’informations sur les applications associées, consultez [Applications associées SSO](../core/sso-affiliate-applications.md).</span><span class="sxs-lookup"><span data-stu-id="67c97-118">For more information about the affiliate applications, see [SSO Affiliate Applications](../core/sso-affiliate-applications.md).</span></span>  
  
 <span data-ttu-id="67c97-119">Dans les cas où une orchestration appelle l'adaptateur d'envoi, le moteur de messagerie BizTalk envoie le message à la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="67c97-119">In scenarios where an orchestration invokes the send adapter, the BizTalk Messaging Engine sends the message to the MessageBox database.</span></span> <span data-ttu-id="67c97-120">L’orchestration doit s’assurer à la fois le **SSOTicket** propriété de contexte et le **Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID** sont de la propriété de contexte du message qui contient le ticket conservée.</span><span class="sxs-lookup"><span data-stu-id="67c97-120">The orchestration should ensure that both the **SSOTicket** context property and the **Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID** context property of the message that contains the ticket are maintained.</span></span> <span data-ttu-id="67c97-121">Lorsque l'adaptateur reçoit ce message de la base de données MessageBox, il appelle la méthode RedeemTicket avec le ticket chiffré pour extraire les informations d'identification principales du magasin SSO.</span><span class="sxs-lookup"><span data-stu-id="67c97-121">When the adapter receives this message from the MessageBox database, the adapter calls the RedeemTicket method with the encrypted ticket to retrieve the back-end credentials from the SSO store.</span></span> <span data-ttu-id="67c97-122">L'utilisateur concevant l'orchestration doit copier spécifiquement cette propriété dans le message.</span><span class="sxs-lookup"><span data-stu-id="67c97-122">The user designing the orchestration should specifically copy this property to the message.</span></span>  
  
 <span data-ttu-id="67c97-123">**Prise en charge de SharePoint Portal Server SSO pour SOAP des emplacements de réception**</span><span class="sxs-lookup"><span data-stu-id="67c97-123">**SharePoint Portal Server SSO Support for SOAP Receive Locations**</span></span>  
  
 <span data-ttu-id="67c97-124">Lors de l'intégration avec SharePoint Portal Server, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ne prend en charge l'authentification unique Microsoft SharePoint Portal Server que via l'adaptateur SOAP.</span><span class="sxs-lookup"><span data-stu-id="67c97-124">When integrating with SharePoint Portal Server, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] supports the use of Microsoft SharePoint Portal Server SSO only through the SOAP adapter.</span></span> <span data-ttu-id="67c97-125">SharePoint Portal Server crée des tickets SSO qu'il envoie à BizTalk Server dans un en-tête SOAP de la demande SOAP.</span><span class="sxs-lookup"><span data-stu-id="67c97-125">SharePoint Portal Server creates SSO tickets and sends them to BizTalk Server in a SOAP header of the SOAP request.</span></span> <span data-ttu-id="67c97-126">Lorsque l’adaptateur SOAP reçoit une demande contenant un ticket d’authentification unique, le ticket est stocké en tant que le **SSOTicket** propriété dans la propriété de contexte du message.</span><span class="sxs-lookup"><span data-stu-id="67c97-126">When the SOAP adapter receives a request containing an SSO ticket, the ticket is stored as the **SSOTicket** property in the context property of the message.</span></span> <span data-ttu-id="67c97-127">La même propriété contient un ticket d'authentification unique de l'entreprise.</span><span class="sxs-lookup"><span data-stu-id="67c97-127">This same property would contain an Enterprise SSO ticket.</span></span> <span data-ttu-id="67c97-128">Un seul ticket d'authentification unique de l'entreprise peut être associé à un message BizTalk.</span><span class="sxs-lookup"><span data-stu-id="67c97-128">Only one SSO ticket can be associated with a BizTalk message.</span></span>  
  
 <span data-ttu-id="67c97-129">Dans les scénarios de transfert et d'orchestration, la gestion d'un ticket d'authentification unique émis par SharePoint Portal Server est identique à celui qui aurait été créé par l'adaptateur SOAP à l'aide de l'authentification unique de l'entreprise.</span><span class="sxs-lookup"><span data-stu-id="67c97-129">In both pass-through and orchestration scenarios, the handling of an SSO ticket received from SharePoint Portal Server is the same as if the ticket were created by the SOAP adapter using Enterprise SSO.</span></span> <span data-ttu-id="67c97-130">Lorsqu’un adaptateur d’envoi reçoit un message, il appelle la **RedeemTicket** méthode avec le texte chiffré de ticket par SharePoint Portal Server généré.</span><span class="sxs-lookup"><span data-stu-id="67c97-130">When a send adapter receives a message, it calls the **RedeemTicket** method with the encrypted ticket that SharePoint Portal Server generated.</span></span> <span data-ttu-id="67c97-131">L'adaptateur d'envoi n'a pas besoin de savoir que différents tickets d'authentification unique de l'entreprise existent.</span><span class="sxs-lookup"><span data-stu-id="67c97-131">The send adapter does not need to be aware that different SSO tickets exist.</span></span> <span data-ttu-id="67c97-132">Le **RedeemTicket** méthode déterminer quel système d’authentification unique généré le ticket et échangez-le depuis l’emplacement approprié.</span><span class="sxs-lookup"><span data-stu-id="67c97-132">The **RedeemTicket** method will determine which SSO system generated the ticket and redeem it from the appropriate place.</span></span>  
  
 <span data-ttu-id="67c97-133">**Utilisation combinée de Enterprise SSO de l’authentification unique et de SharePoint Portal Server**</span><span class="sxs-lookup"><span data-stu-id="67c97-133">**Combined Use of Enterprise SSO and SharePoint Portal Server SSO**</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="67c97-134"> prend en charge l'utilisation simultanée des deux systèmes d'authentification unique.</span><span class="sxs-lookup"><span data-stu-id="67c97-134"> supports the simultaneous use of both SSO systems.</span></span> <span data-ttu-id="67c97-135">L'API peut distinguer les tickets générés par chaque authentification unique et les échanger depuis la base de données de l'authentification.</span><span class="sxs-lookup"><span data-stu-id="67c97-135">The API can differentiate between the tickets generated by each SSO and will redeem them from the appropriate SSO database.</span></span> <span data-ttu-id="67c97-136">Si vous utilisez les deux systèmes d’authentification unique en même temps, les règles suivantes déterminent quel ticket d’authentification unique de réception SOAP promeut d’emplacement pour le **SSOTicket** propriété de contexte :</span><span class="sxs-lookup"><span data-stu-id="67c97-136">If you use both SSO systems at the same time, the following rules determine which SSO ticket the SOAP receive location promotes to the **SSOTicket** context property:</span></span>  
  
-   <span data-ttu-id="67c97-137">Si aucune authentification unique n'est activée, ne promouvez pas de ticket.</span><span class="sxs-lookup"><span data-stu-id="67c97-137">If neither SSO is enabled, do not promote a ticket.</span></span>  
  
-   <span data-ttu-id="67c97-138">Si l'authentification unique de l'entreprise est activée, mais l'authentification unique SharePoint Portal Server ne l'est pas, récupérez et promouvez le ticket d'authentification unique de l'entreprise.</span><span class="sxs-lookup"><span data-stu-id="67c97-138">If the Enterprise SSO is enabled, but the SharePoint Portal Server SSO is not enabled, retrieve and promote the Enterprise SSO ticket.</span></span>  
  
-   <span data-ttu-id="67c97-139">Si l'authentification unique SharePoint Portal Server est activée, mais l'authentification unique de l'entreprise ne l'est pas, promouvez le ticket d'authentification unique SharePoint Portal Server existant.</span><span class="sxs-lookup"><span data-stu-id="67c97-139">If the SharePoint Portal Server SSO is enabled, but the Enterprise SSO is not enabled, promote the existing SharePoint Portal Server SSO ticket.</span></span>  
  
-   <span data-ttu-id="67c97-140">Si les authentifications uniques de l'entreprise et SharePoint Portal Server sont activées :</span><span class="sxs-lookup"><span data-stu-id="67c97-140">If both the Enterprise and SharePoint Portal Server SSO are enabled:</span></span>  
  
    -   <span data-ttu-id="67c97-141">Si le ticket d'authentification SharePoint Portal Server est reçu, promouvez ce ticket.</span><span class="sxs-lookup"><span data-stu-id="67c97-141">If the SharePoint Portal Server SSO ticket is received, promote that ticket.</span></span>  
  
    -   <span data-ttu-id="67c97-142">Si le ticket d'authentification unique SharePoint Portal Server n'a pas été reçu, récupérez et promouvez le ticket d'authentification unique de l'entreprise.</span><span class="sxs-lookup"><span data-stu-id="67c97-142">If the SharePoint Portal Server SSO ticket is not received, retrieve and promote the Enterprise SSO ticket.</span></span>  
  
 <span data-ttu-id="67c97-143">**Seule l’authentification prise en charge de l’adaptateur d’envoi SOAP**</span><span class="sxs-lookup"><span data-stu-id="67c97-143">**Single Sign-On Support for the SOAP Send Adapter**</span></span>  
  
 <span data-ttu-id="67c97-144">Si l’authentification unique est activée, lorsqu’un port d’envoi SOAP reçoit un message avec le **Secure** propriété (**SSOTicket**), il appelle le serveur SSO pour valider et échanger le ticket pour une application associée.</span><span class="sxs-lookup"><span data-stu-id="67c97-144">If SSO is enabled, when a SOAP send port receives a message with the **Secure** property (**SSOTicket**), it calls the SSO server to validate and redeem the ticket for an affiliate application.</span></span> <span data-ttu-id="67c97-145">L'application d'administration, les administrateurs d'applications associées ou les administrateurs SSO de l'application associée peuvent appeler SSO pour échanger un ticket.</span><span class="sxs-lookup"><span data-stu-id="67c97-145">The administration application, affiliate administrators, or SSO administrators for the affiliate application can call SSO to redeem a ticket.</span></span> <span data-ttu-id="67c97-146">SSO déchiffre alors le ticket et obtient les informations d'identification principales.</span><span class="sxs-lookup"><span data-stu-id="67c97-146">SSO then decrypts the ticket and obtains the back-end credentials.</span></span> <span data-ttu-id="67c97-147">Les scénarios de transfert et d’orchestration sont les mêmes pour le port d’envoi SOAP, comme décrit dans la section « Enterprise SSO prise en charge pour les emplacements de réception SOAP » de la rubrique [unique authentification prise en charge de l’adaptateur SOAP](../core/single-sign-on-support-for-the-soap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="67c97-147">The pass-through and orchestration scenarios are the same for the SOAP send port, as described in the "Enterprise SSO Support for SOAP Receive Locations" section of the topic [Single Sign-On Support for the SOAP Adapter](../core/single-sign-on-support-for-the-soap-adapter.md).</span></span>  
  
 <span data-ttu-id="67c97-148">Par défaut, le port d'envoi SOAP n'active pas l'authentification unique.</span><span class="sxs-lookup"><span data-stu-id="67c97-148">By default, the SOAP send port does not enable SSO.</span></span> <span data-ttu-id="67c97-149">Pour plus d’informations sur l’activation de l’authentification unique pour le port d’envoi SOAP, consultez [comment configurer un Port d’envoi SOAP](../core/how-to-configure-a-soap-send-port.md).</span><span class="sxs-lookup"><span data-stu-id="67c97-149">For more information about enabling SSO for the SOAP send port, see [How to Configure a SOAP Send Port](../core/how-to-configure-a-soap-send-port.md).</span></span>