---
title: "Pour configurer un MSMQ emplacement de réception | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- MSMQ adapters, receive locations
- receive locations, MSMQ adapters
- configuring [MSMQ adapters], receive locations
ms.assetid: ba25cf43-18f1-4c19-84fb-74c7b82b95a9
caps.latest.revision: "43"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 795b72318054525485a64c9dd704b81ddf6cb6b9
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/01/2017
---
# <a name="how-to-configure-an-msmq-receive-location"></a><span data-ttu-id="8891a-102">Configuration d'un emplacement de réception MSMQ</span><span class="sxs-lookup"><span data-stu-id="8891a-102">How to Configure an MSMQ Receive Location</span></span>
<span data-ttu-id="8891a-103">Vous pouvez définir des variables d'adaptateur d'emplacement de réception MSMQ dans la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="8891a-103">You can set MSMQ receive location adapter variables in the BizTalk Server Administration console.</span></span> <span data-ttu-id="8891a-104">Si les propriétés ne sont pas définies pour l'emplacement de réception, les valeurs par défaut du gestionnaire de réception définies dans la console Administration de BizTalk Server sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="8891a-104">If properties are not set in the receive location, the default receive handler values set in the BizTalk Server Administration console are used.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8891a-105">Avant d'effectuer la procédure suivante, vous devez avoir ajouté un port de réception.</span><span class="sxs-lookup"><span data-stu-id="8891a-105">Before completing the following procedure you must have already added a receive port.</span></span> <span data-ttu-id="8891a-106">Pour plus d’informations, consultez [la création d’un Port de réception](../core/how-to-create-a-receive-port.md).</span><span class="sxs-lookup"><span data-stu-id="8891a-106">For more information see [How to Create a Receive Port](../core/how-to-create-a-receive-port.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="8891a-107">Si une instance de l'hôte est associée à un port d'envoi ou à un emplacement de réception MSMQ, vérifiez que le service MSMQ est en cours d'exécution sur cet ordinateur.</span><span class="sxs-lookup"><span data-stu-id="8891a-107">If a host instance is associated with an MSMQ send port or receive location, verify the MSMQ service is running on that machine.</span></span> <span data-ttu-id="8891a-108">Si le service ne fonctionne pas, les ports de réception MSMQ sont fermés peu de temps après leur démarrage, et l'envoi de messages aux ports d'envoi MSMQ est suspendu.</span><span class="sxs-lookup"><span data-stu-id="8891a-108">If the service is not running, the MSMQ receive ports will shut down shortly after they are started, and messages sent to the MSMQ send ports will be suspended.</span></span>  
>   
>  <span data-ttu-id="8891a-109">Dans un scénario de mise en cluster, non seulement l'instance MSMQ en cluster doit être en cours d'exécution, mais le service MSMQ sur chaque ordinateur du cluster doit l'être également.</span><span class="sxs-lookup"><span data-stu-id="8891a-109">In a clustered scenario, not only does the clustered MSMQ instance need to be running, but the local MSMQ service on each cluster machine should be running, as well.</span></span>  
  
## <a name="to-configure-variables-for-an-msmq-receive-location"></a><span data-ttu-id="8891a-110">Pour configurer les variables d'un emplacement de réception MSMQ</span><span class="sxs-lookup"><span data-stu-id="8891a-110">To configure variables for an MSMQ receive location</span></span>  
 <span data-ttu-id="8891a-111">Pour configurer les variables d'un emplacement de réception MSMQ, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="8891a-111">Follow these steps to configure variables for an MSMQ receive location:</span></span>  
  
1.  <span data-ttu-id="8891a-112">Dans la console Administration de BizTalk Server, développez **Administration de BizTalk Server**, développez **groupe BizTalk**, développez **Applications**, puis développez le vous souhaitez créer un emplacement de réception dans l’application.</span><span class="sxs-lookup"><span data-stu-id="8891a-112">In the BizTalk Server Administration console, expand **BizTalk Server Administration**, expand **BizTalk Group**, expand **Applications**, and then expand the application you want to create a receive location in.</span></span>  
  
2.  <span data-ttu-id="8891a-113">Dans la console Administration de BizTalk Server, dans le volet gauche, cliquez sur le **Port de réception** nœud.</span><span class="sxs-lookup"><span data-stu-id="8891a-113">In the BizTalk Server Administration console, in the left pane, click the **Receive Port** node.</span></span> <span data-ttu-id="8891a-114">Dans le volet droit, cliquez avec le bouton droit sur le port de réception associé à un emplacement de réception existant ou auquel associer un nouvel emplacement, puis cliquez sur **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="8891a-114">Then in the right pane, right-click the receive port that is associated with an existing receive location or that you want to associate with a new receive location, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="8891a-115">Dans le **propriétés du Port de réception** boîte de dialogue, dans le volet gauche, sélectionnez **emplacements de réception**, puis dans le volet droit, double-cliquez sur un existant emplacement de réception ou cliquez sur **nouveau**pour créer un nouvel emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="8891a-115">In the **Receive Port Properties** dialog box, in the left pane, select **Receive Locations**, and then in the right pane, double-click an existing receive location or click **New**to create a new receive location.</span></span>  
  
4.  <span data-ttu-id="8891a-116">Dans le **propriétés de l’emplacement de réception** boîte de dialogue le **Transport** section regard **Type**, sélectionnez **MSMQ** dans la liste déroulante, puis cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="8891a-116">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **MSMQ** from the drop-down list, and then click **Configure**.</span></span>  
  
5.  <span data-ttu-id="8891a-117">Dans le **propriétés du Transport MSMQ** boîte de dialogue zone, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="8891a-117">In the **MSMQ Transport Properties** dialog box, do the following:</span></span>  
  
    |<span data-ttu-id="8891a-118">Utiliser</span><span class="sxs-lookup"><span data-stu-id="8891a-118">Use this</span></span>|<span data-ttu-id="8891a-119">Pour effectuer cette opération</span><span class="sxs-lookup"><span data-stu-id="8891a-119">To do this</span></span>|<span data-ttu-id="8891a-120">Type de date</span><span class="sxs-lookup"><span data-stu-id="8891a-120">Date type</span></span>|<span data-ttu-id="8891a-121">Valeur par défaut</span><span class="sxs-lookup"><span data-stu-id="8891a-121">Default value</span></span>|  
    |--------------|----------------|---------------|-------------------|  
    |<span data-ttu-id="8891a-122">**Mot de passe**</span><span class="sxs-lookup"><span data-stu-id="8891a-122">**Password**</span></span>|<span data-ttu-id="8891a-123">Définir un mot de passe à utiliser pour une file d'attente distante.</span><span class="sxs-lookup"><span data-stu-id="8891a-123">Set a password to use for a remote queue.</span></span>|<span data-ttu-id="8891a-124">Chaîne</span><span class="sxs-lookup"><span data-stu-id="8891a-124">String</span></span>|<span data-ttu-id="8891a-125">Vide</span><span class="sxs-lookup"><span data-stu-id="8891a-125">Blank</span></span>|  
    |<span data-ttu-id="8891a-126">**Nom d'utilisateur**</span><span class="sxs-lookup"><span data-stu-id="8891a-126">**User Name**</span></span>|<span data-ttu-id="8891a-127">Indiquer le nom d'utilisateur à utiliser, en même temps que le mot de passe, pour accéder à une file d'attente distante.</span><span class="sxs-lookup"><span data-stu-id="8891a-127">Determine the user name to use, in combination with the password, for access to a remote queue.</span></span> <span data-ttu-id="8891a-128">Vous ne pouvez pas indiquer ici le nom de l'utilisateur local de l'ordinateur distant.</span><span class="sxs-lookup"><span data-stu-id="8891a-128">You cannot use the local user of the remote computer for the user name.</span></span>|<span data-ttu-id="8891a-129">Chaîne</span><span class="sxs-lookup"><span data-stu-id="8891a-129">String</span></span>|<span data-ttu-id="8891a-130">Vide</span><span class="sxs-lookup"><span data-stu-id="8891a-130">Blank</span></span>|  
    |<span data-ttu-id="8891a-131">**Taille de lot**</span><span class="sxs-lookup"><span data-stu-id="8891a-131">**Batch Size**</span></span>|<span data-ttu-id="8891a-132">Configurer la taille de lot.</span><span class="sxs-lookup"><span data-stu-id="8891a-132">Configure the batch size.</span></span> <span data-ttu-id="8891a-133">L'adaptateur MSMQ envoie des messages par lot à la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="8891a-133">The MSMQ adapter submits messages to the MessageBox database in batches.</span></span> <span data-ttu-id="8891a-134">La taille du lot par défaut est 20, et la taille minimale 1.</span><span class="sxs-lookup"><span data-stu-id="8891a-134">The default batch size is 20, and the minimum batch size is 1.</span></span> <span data-ttu-id="8891a-135">**Remarque :** si le **transactionnel** pour l’emplacement de réception est définie sur **True**; chaque lot de messages est envoyé à la base de données MessageBox dans le contexte d’un Microsoft Distributed Transaction Transaction Coordinator (MSDTC).</span><span class="sxs-lookup"><span data-stu-id="8891a-135">**Note:**  If the **Transactional** property for the receive location is set to **True**; each message batch is submitted to the MessageBox database under the context of a Microsoft Distributed Transaction Coordinator (MSDTC) transaction.</span></span> <span data-ttu-id="8891a-136">La transaction MSDTC qui est créée pour un lot de messages reste ouverte jusqu'à ce que chaque message du lot conservé dans la base de données MessageBox soit placé dans la file d'attente d'abonné appropriée.</span><span class="sxs-lookup"><span data-stu-id="8891a-136">The MSDTC transaction that is created for a message batch remains open until every message in the batch has been persisted to the MessageBox and placed in the appropriate subscriber queue.</span></span> <span data-ttu-id="8891a-137">Par conséquent, la durée de cette transaction MSDTC augmente proportionnellement les **taille de lot** paramètre est augmenté.</span><span class="sxs-lookup"><span data-stu-id="8891a-137">Therefore the duration of this MSDTC transaction is increased as the **Batch Size** parameter is increased.</span></span> <span data-ttu-id="8891a-138">Dans la mesure où un grand nombre de transactions MSDTC ouvertes simultanément risquant d’affecter les performances globales, les **taille de lot** paramètre ne doit pas être défini à une valeur très élevée lors de la prise en charge de la transaction est activée.</span><span class="sxs-lookup"><span data-stu-id="8891a-138">Since having a large number of MSDTC transactions open simultaneously can negatively impact overall performance, the **Batch Size** parameter should not be set to a very large value when transaction support is enabled.</span></span>|<span data-ttu-id="8891a-139">int</span><span class="sxs-lookup"><span data-stu-id="8891a-139">Int</span></span>|<span data-ttu-id="8891a-140">20</span><span class="sxs-lookup"><span data-stu-id="8891a-140">20</span></span>|  
    |<span data-ttu-id="8891a-141">**En cas d’échec**</span><span class="sxs-lookup"><span data-stu-id="8891a-141">**On Failure**</span></span>|<span data-ttu-id="8891a-142">Indiquer comment l'adaptateur doit réagir à une erreur.</span><span class="sxs-lookup"><span data-stu-id="8891a-142">Specify how the adapter should respond to an error.</span></span> <span data-ttu-id="8891a-143">Définir cette propriété sur l'une des valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="8891a-143">Set this property to one of the following values:</span></span><br /><br /> <span data-ttu-id="8891a-144">-   **Arrêter.**</span><span class="sxs-lookup"><span data-stu-id="8891a-144">-   **Stop.**</span></span> <span data-ttu-id="8891a-145">la réception des messages via cet emplacement de réception est interrompue si une condition d'erreur se produit.</span><span class="sxs-lookup"><span data-stu-id="8891a-145">Stop receiving messages through this receive location if an error condition occurs.</span></span><br /><span data-ttu-id="8891a-146">-   **Suspend(non-Resumable).**</span><span class="sxs-lookup"><span data-stu-id="8891a-146">-   **Suspend(non-resumable).**</span></span> <span data-ttu-id="8891a-147">les messages sont interrompus et marqués comme ne pouvant être repris.</span><span class="sxs-lookup"><span data-stu-id="8891a-147">Suspend messages and mark as non-resumable.</span></span><br /><span data-ttu-id="8891a-148">-   **Suspend(Resumable).**</span><span class="sxs-lookup"><span data-stu-id="8891a-148">-   **Suspend(resumable).**</span></span> <span data-ttu-id="8891a-149">les messages sont interrompus et marqués comme pouvant être repris.</span><span class="sxs-lookup"><span data-stu-id="8891a-149">Suspend messages and mark as resumable.</span></span> <span data-ttu-id="8891a-150">**Important :** si le **True** est définie sur **traitement chronologique** propriété, le **arrêter** est définie sur le **en cas d’échec** propriété et le **False** est définie sur le **transactionnel** propriété sont appliquées en même temps, puis tous les messages dont la remise échouent ne seront pas interrompus ou restant dans la file d’attente source.</span><span class="sxs-lookup"><span data-stu-id="8891a-150">**Important:**  If the **True** option for **Ordered Processing** property, the **Stop** option for the **On Failure** property, and the **False** option for the **Transactional** property are applied at the same time, then any messages that fail delivery will not be suspended or left in the source queue.</span></span> <span data-ttu-id="8891a-151">mais perdus.</span><span class="sxs-lookup"><span data-stu-id="8891a-151">In this scenario, message loss can occur.</span></span> <span data-ttu-id="8891a-152">Pour éviter la perte de données, lorsque vous utilisez la **traitement chronologique** fonctionnalité, le **arrêter** option pour le **en cas d’échec** propriété doit être appliquée uniquement si la **True**  est définie sur le **transactionnel** propriété est appliquée.</span><span class="sxs-lookup"><span data-stu-id="8891a-152">To prevent data loss, when using the **Ordered Processing** feature, the **Stop** option for the **On Failure** property should only be applied if the **True** option for the **Transactional** property is applied.</span></span> <span data-ttu-id="8891a-153">Par la suite, si la remise d'un message échoue, le message d'origine sera conservé dans la file d'attente MSMQ source.</span><span class="sxs-lookup"><span data-stu-id="8891a-153">Then, if a message delivery failure occurs, the original message will be left in the source MSMQ queue.</span></span> <span data-ttu-id="8891a-154">Si le **traitement chronologique** est définie sur une valeur de **False** le **en cas d’échec** propriété ne prendre effet et si un échec de remise de message produit le message est interrompu avec l’état **suspendu (peut être repris)**.</span><span class="sxs-lookup"><span data-stu-id="8891a-154">If the **Ordered Processing** property is set to a value of **False** then the **On Failure** property will not take effect and if a message delivery failure occurs the message will be suspended with a status of **Suspended (resumable)**.</span></span>|<span data-ttu-id="8891a-155">Chaîne</span><span class="sxs-lookup"><span data-stu-id="8891a-155">String</span></span>|<span data-ttu-id="8891a-156">Suspendu (peut être repris)</span><span class="sxs-lookup"><span data-stu-id="8891a-156">Suspend(resumable)</span></span>|  
    |<span data-ttu-id="8891a-157">**Traitement ordonné**</span><span class="sxs-lookup"><span data-stu-id="8891a-157">**Ordered Processing**</span></span>|<span data-ttu-id="8891a-158">Définissez cette propriété sur **True** ou **False**.</span><span class="sxs-lookup"><span data-stu-id="8891a-158">Set this property to **True** or **False**.</span></span> <span data-ttu-id="8891a-159">Cette option indique s'il faut traiter les messages en série.</span><span class="sxs-lookup"><span data-stu-id="8891a-159">This indicates whether to process messages serially.</span></span> <span data-ttu-id="8891a-160">La propriété **True** prend en charge les livraison chronologique des messages lorsqu’il est utilisé conjointement avec une orchestration ou la messagerie port d’envoi BizTalk a la **livraison chronologique des messages** lavaleurd’option **True**.</span><span class="sxs-lookup"><span data-stu-id="8891a-160">Setting the property to **True** will accommodate ordered message delivery when used in conjunction with a BizTalk messaging or orchestration send port that has the **Ordered Delivery** option set to **True**.</span></span> <span data-ttu-id="8891a-161">Pour plus d’informations, consultez [classés de remise de Messages](../core/ordered-delivery-of-messages.md).</span><span class="sxs-lookup"><span data-stu-id="8891a-161">For more information see [Ordered Delivery of Messages](../core/ordered-delivery-of-messages.md).</span></span><br /><br /> <span data-ttu-id="8891a-162">Si cette propriété **True** permet également d’optimiser l’utilisation des ressources lors du traitement des messages volumineux en rendant l’adaptateur monothread.</span><span class="sxs-lookup"><span data-stu-id="8891a-162">Setting this property to **True** also optimizes resource usage when handling large messages by making the adapter single-threaded.</span></span> <span data-ttu-id="8891a-163">Pour plus d’informations, consultez [envoyer et recevoir des Messages volumineux à l’aide de l’adaptateur MSMQ](../core/sending-and-receiving-large-messages-using-the-msmq-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="8891a-163">For more information, see [Sending and Receiving Large Messages Using the MSMQ Adapter](../core/sending-and-receiving-large-messages-using-the-msmq-adapter.md).</span></span>|<span data-ttu-id="8891a-164">Booléen</span><span class="sxs-lookup"><span data-stu-id="8891a-164">Boolean</span></span>|<span data-ttu-id="8891a-165">False</span><span class="sxs-lookup"><span data-stu-id="8891a-165">False</span></span>|  
    |<span data-ttu-id="8891a-166">**File d’attente**</span><span class="sxs-lookup"><span data-stu-id="8891a-166">**Queue**</span></span>|<span data-ttu-id="8891a-167">Taper un chemin d'accès valide à la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="8891a-167">Type a valid queue path.</span></span> <span data-ttu-id="8891a-168">En fonction du chemin spécifié, le système effectue les validations appropriées.</span><span class="sxs-lookup"><span data-stu-id="8891a-168">Depending on the queue path you specify, the system performs the appropriate validations.</span></span> <span data-ttu-id="8891a-169">**Remarque :** l’URI pour un envoi de port ou de réception emplacement ne peut pas dépasser 256 caractères.</span><span class="sxs-lookup"><span data-stu-id="8891a-169">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span> <span data-ttu-id="8891a-170">**Remarque :** adaptateur de réception MSMQ utilise un mécanisme d’interrogation pour surveiller la file d’attente MSMQ spécifié pour les nouveaux messages toutes les 0,5 secondes.</span><span class="sxs-lookup"><span data-stu-id="8891a-170">**Note:**  MSMQ Receive adapter uses a polling mechanism to monitor the specified MSMQ queue for new messages every 0.5 seconds.</span></span> <span data-ttu-id="8891a-171">Cet intervalle est fixe.</span><span class="sxs-lookup"><span data-stu-id="8891a-171">This 0.5 second interval is a fixed interval.</span></span>|<span data-ttu-id="8891a-172">Chaîne</span><span class="sxs-lookup"><span data-stu-id="8891a-172">String</span></span>|<span data-ttu-id="8891a-173">Vide</span><span class="sxs-lookup"><span data-stu-id="8891a-173">Blank</span></span>|  
    |<span data-ttu-id="8891a-174">**Transactionnelle**</span><span class="sxs-lookup"><span data-stu-id="8891a-174">**Transactional**</span></span>|<span data-ttu-id="8891a-175">Définissez cette propriété sur **True** ou **False**.</span><span class="sxs-lookup"><span data-stu-id="8891a-175">Set this property to **True** or **False**.</span></span> <span data-ttu-id="8891a-176">**Remarque :** l’adaptateur prend en charge les lectures transactionnelles des files d’attente distantes avec Message Queuing 4.0 ou version ultérieure uniquement.</span><span class="sxs-lookup"><span data-stu-id="8891a-176">**Note:**  The adapter supports transactional reads of remote queues with Message Queuing 4.0 or later only.</span></span> <span data-ttu-id="8891a-177">Dans ce scénario BizTalk Server et le serveur Message Queuing distant doivent exécuter Message Queuing 4.0 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="8891a-177">In this scenario both the BizTalk Server and the remote Message Queuing server must be running Message Queuing 4.0 or later.</span></span> <br /><br /> <span data-ttu-id="8891a-178">Pour plus d’informations, consultez [configuration de l’adaptateur MSMQ](../core/configuring-the-msmq-adapter.md) et [considérations pour les gestionnaires d’adaptateur en cours d’exécution au sein d’un ordinateur hôte en cluster](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span><span class="sxs-lookup"><span data-stu-id="8891a-178">For more information, see [Configuring the MSMQ Adapter](../core/configuring-the-msmq-adapter.md) and [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|<span data-ttu-id="8891a-179">Booléen</span><span class="sxs-lookup"><span data-stu-id="8891a-179">Boolean</span></span>|<span data-ttu-id="8891a-180">False</span><span class="sxs-lookup"><span data-stu-id="8891a-180">False</span></span>|  
  
    > [!NOTE]
    >  <span data-ttu-id="8891a-181">Le **nom d’utilisateur** et **mot de passe** s’appliquent uniquement aux comptes Windows utilisés pour accéder aux files d’attente distantes.</span><span class="sxs-lookup"><span data-stu-id="8891a-181">The **User Name** and **Password** apply only to Windows accounts used to access remote queues.</span></span>  
  
6.  <span data-ttu-id="8891a-182">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="8891a-182">Click **OK**.</span></span>  
  
7.  <span data-ttu-id="8891a-183">Dans le **propriétés de l’emplacement de réception** boîte de dialogue, entrez les valeurs appropriées pour terminer la configuration de l’emplacement de réception, puis cliquez sur **OK** pour enregistrer les paramètres.</span><span class="sxs-lookup"><span data-stu-id="8891a-183">In the **Receive Location Properties** dialog box, enter the appropriate values to complete the configuration of the receive location, and click **OK** to save settings.</span></span> <span data-ttu-id="8891a-184">Pour plus d’informations sur la **propriétés des emplacements de réception** boîte de dialogue, consultez [la création d’un emplacement de réception](../core/how-to-create-a-receive-location.md).</span><span class="sxs-lookup"><span data-stu-id="8891a-184">For information about the **Receive Locations Properties** dialog box, see [How to Create a Receive Location](../core/how-to-create-a-receive-location.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8891a-185">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8891a-185">See Also</span></span>  
 [<span data-ttu-id="8891a-186">Configuration de l’adaptateur MSMQ</span><span class="sxs-lookup"><span data-stu-id="8891a-186">Configuring the MSMQ Adapter</span></span>](../core/configuring-the-msmq-adapter.md)