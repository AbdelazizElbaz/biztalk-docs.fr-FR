---
title: "Qu'est-ce que le suivi des messages ? | Microsoft Docs"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- HAT, metadata
- HAT, messages
- messages, tracking
- data, HAT
- metadata, tracking
- tracking, metadata
- HAT, data security
- tracking, messages
- configuring [HAT tracking], messages
- data, security
ms.assetid: 51cec59d-b411-4d8f-b771-7b2cf0f38945
caps.latest.revision: "18"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 0d76a4bd4133906a7949fac9e63816168506f412
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2017
---
# <a name="what-is-message-tracking"></a><span data-ttu-id="2c098-103">Qu'est-ce que le suivi des messages ?</span><span class="sxs-lookup"><span data-stu-id="2c098-103">What is Message Tracking?</span></span>
<span data-ttu-id="2c098-104">Un message est une instance électronique de données, échangée, par exemple, entre deux processus d'entreprise ou applications en cours d'exécution.</span><span class="sxs-lookup"><span data-stu-id="2c098-104">A message is an electronic instance of data, as typically exchanged between two running business processes or applications.</span></span> <span data-ttu-id="2c098-105">Une instance de message est constituée d'un corps de message, de propriétés de message et de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="2c098-105">A message instance is made up of a message body, message properties, and metadata.</span></span>  
  
 <span data-ttu-id="2c098-106">Vous pouvez utiliser la console Administration de BizTalk Server pour activer le suivi des propriétés de message et des corps de message.</span><span class="sxs-lookup"><span data-stu-id="2c098-106">You can use the BizTalk Server Administration Console to enable message body and message property tracking.</span></span> <span data-ttu-id="2c098-107">Vous pouvez y consulter le corps de message suivi, notamment des informations sur le schéma, le nom fort et toutes les propriétés promues du message généré.</span><span class="sxs-lookup"><span data-stu-id="2c098-107">There you can also view the tracked message body, including schema information, strong name, and all the promoted properties for the generated message.</span></span>  
  
## <a name="message-body"></a><span data-ttu-id="2c098-108">Corps du message</span><span class="sxs-lookup"><span data-stu-id="2c098-108">Message Body</span></span>  
 <span data-ttu-id="2c098-109">Le suivi des corps de message permet de conserver une trace des messages envoyés et reçus.</span><span class="sxs-lookup"><span data-stu-id="2c098-109">Tracking the message body provides a record of messages sent and received.</span></span> <span data-ttu-id="2c098-110">Pour enregistrer des messages une fois le traitement des instances de service terminé, vous devez activer le suivi du corps des messages.</span><span class="sxs-lookup"><span data-stu-id="2c098-110">You must have message body tracking turned on in order to save messages after service instances processing is complete.</span></span> <span data-ttu-id="2c098-111">Après avoir activé les options de suivi, vous devez parfois attendre plusieurs minutes avant de pouvoir afficher les messages.</span><span class="sxs-lookup"><span data-stu-id="2c098-111">After you have set the tracking options, it can take a few minutes before you can view the messages.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2c098-112">Le service SQL Server Agent doit être en cours d'exécution sur toutes les bases de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="2c098-112">The SQL Server Agent service must be running on all MessageBox databases.</span></span> <span data-ttu-id="2c098-113">Le TrackedMessages_Copy_\<Nommessagebox\> au travail, les corps de message disponibles pour le suivi des requêtes et WMI.</span><span class="sxs-lookup"><span data-stu-id="2c098-113">The TrackedMessages_Copy_\<MessageBoxName\> job makes message bodies available to tracking queries and WMI.</span></span> <span data-ttu-id="2c098-114">Pour une copie efficace des corps de message, ils restent dans la base de données MessageBox et sont régulièrement copiés à la base de données des suivis BizTalk (BizTalkDTADb) par le TrackedMessages_Copy_\<Nommessagebox\> travail.</span><span class="sxs-lookup"><span data-stu-id="2c098-114">To efficiently copy the message bodies, they remain in the MessageBox database and are periodically copied to the BizTalk Tracking (BizTalkDTADb) database by the TrackedMessages_Copy_\<MessageBoxName\> job.</span></span> <span data-ttu-id="2c098-115">Pour que le processus d'archivage et de purge s'effectue correctement, le service SQL Server Agent doit également être en cours d'exécution.</span><span class="sxs-lookup"><span data-stu-id="2c098-115">Having the SQL Server Agent service running is also a prerequisite for the archiving and purging process to work correctly.</span></span>  
  
 <span data-ttu-id="2c098-116">Vous pouvez utiliser les messages suivis pour fournir une confirmation de réception, activer le dépannage et autoriser l'exploration des données des transactions historiques.</span><span class="sxs-lookup"><span data-stu-id="2c098-116">You can use tracked messages to provide confirmation of receipt, to enable troubleshooting, and to allow data mining of historical transactions.</span></span> <span data-ttu-id="2c098-117">Vous pouvez effectuer le suivi des corps de message au niveau des entrées et des sorties des ports, des pipelines et des orchestrations.</span><span class="sxs-lookup"><span data-stu-id="2c098-117">You can track the message bodies at the input and output of ports, pipelines, and orchestrations.</span></span> <span data-ttu-id="2c098-118">Vous pouvez récupérer ces messages à l'aide de la console Administration de BizTalk Server, du modèle OM (Operations object model) (recommandé) ou des API (interfaces de programmation d'application) WMI (Windows Management Instrumentation).</span><span class="sxs-lookup"><span data-stu-id="2c098-118">You can recover these messages using the BizTalk Server Administration Console, using the Operations object model (OM) (recommended) or through Windows Management Instrumentation (WMI) application programming interfaces (APIs).</span></span>  
  
 <span data-ttu-id="2c098-119">BizTalk Server n'effectue pas le suivi des messages qui ne franchissent pas correctement l'un des points de suivi.</span><span class="sxs-lookup"><span data-stu-id="2c098-119">BizTalk Server does not track messages that do not successfully make it through one of the tracking points.</span></span> <span data-ttu-id="2c098-120">Dans certains cas, par exemple, lorsqu'un message est interrompu parce qu'il n'est pas valide ou si aucun hôte n'attend le message, il peut être placé dans la file d'attente des messages interrompus sans suivi.</span><span class="sxs-lookup"><span data-stu-id="2c098-120">In some cases—such as when a message is suspended because it is invalid, or if no host is expecting the message—it may be placed in the Suspended queue without being tracked.</span></span> <span data-ttu-id="2c098-121">Si vous arrêtez le message, il n'y aura aucun enregistrement de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="2c098-121">If you terminate this message there will be no record of it.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2c098-122">Le suivi des corps de message ne peut pas remplacer l'audit et ne prend pas en charge la non-répudiation.</span><span class="sxs-lookup"><span data-stu-id="2c098-122">Message body tracking is not a substitute for legally binding auditing, and does not support nonrepudiation.</span></span>  
  
## <a name="message-properties"></a><span data-ttu-id="2c098-123">Propriétés du message</span><span class="sxs-lookup"><span data-stu-id="2c098-123">Message Properties</span></span>  
 <span data-ttu-id="2c098-124">Les propriétés de message incluent les propriétés promues, les informations de routage et les données relatives aux partenaires commerciaux.</span><span class="sxs-lookup"><span data-stu-id="2c098-124">Message properties include promoted properties, routing information, and trading partner data.</span></span> <span data-ttu-id="2c098-125">Le suivi des propriétés des messages vous permet de localiser un message particulier parmi les milliers de messages suivis, en fournissant un enregistrement des propriétés promues pour chaque message de la liste des résultats.</span><span class="sxs-lookup"><span data-stu-id="2c098-125">Message property tracking enables you to locate a specific message from the thousands that you may have tracked, by providing a record of promoted properties for each message in the results list.</span></span> <span data-ttu-id="2c098-126">Vous pouvez suivre un sous-ensemble du message lui-même, à l'aide de l'une de ces propriétés.</span><span class="sxs-lookup"><span data-stu-id="2c098-126">You can then track a subset of the message itself, using one of these properties.</span></span>  
  
 <span data-ttu-id="2c098-127">Pour suivre les propriétés de contexte, vous devez définir un schéma de propriété pour l'espace de noms utilisé dans le contexte pour stocker les propriétés.</span><span class="sxs-lookup"><span data-stu-id="2c098-127">To track context properties, you define a property schema for the namespace used in the context to store the properties.</span></span> <span data-ttu-id="2c098-128">À partir de cette vue, vous pouvez sélectionner les propriétés de contexte que vous souhaitez suivre. BizTalk Server opère de la même manière que lorsqu'il s'agit de propriétés de message promues.</span><span class="sxs-lookup"><span data-stu-id="2c098-128">From there, you can select the context properties you want to track. BizTalk Server tracks them in the same way it tracks promoted message properties.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2c098-129">Vérifiez que vous donnez des noms différents aux propriétés dans le schéma.</span><span class="sxs-lookup"><span data-stu-id="2c098-129">Make sure you give different names to the properties in the schema.</span></span> <span data-ttu-id="2c098-130">Un message d'erreur apparaît si vous créez des doublons.</span><span class="sxs-lookup"><span data-stu-id="2c098-130">An error message appears if you create duplicate names.</span></span>  
  
 <span data-ttu-id="2c098-131">Par exemple, vous pouvez utiliser l'Éditeur de schéma pour promouvoir le champ du numéro de commande depuis un schéma de bon de commande.</span><span class="sxs-lookup"><span data-stu-id="2c098-131">For example, you could use the Schema Editor to promote the PO Number field from a Purchase Order schema.</span></span> <span data-ttu-id="2c098-132">Ensuite, dans la vue Rechercher un message, vous pouvez rechercher les instances de message contenant une valeur pour le champ suivi, telle que Numéro de commande = 16995.</span><span class="sxs-lookup"><span data-stu-id="2c098-132">Then, using the Find Message View, you could find the message instances that contain a particular value for that tracked field, such as PO Number = 16995.</span></span>  
  
 <span data-ttu-id="2c098-133">Le suivi des propriétés de message génère bien moins de traitement que le suivi des corps de message car il n'intervient que sur les champs sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="2c098-133">Message property tracking creates much less overhead than message body tracking, because message property tracking only tracks the selected fields.</span></span> <span data-ttu-id="2c098-134">Après avoir défini les options de suivi des propriétés de message, vous devrez patienter quelques minutes avant de pouvoir consulter les propriétés.</span><span class="sxs-lookup"><span data-stu-id="2c098-134">After you set the tracking options for the message property, it can take a few minutes before you can view the properties.</span></span>  
  
## <a name="metadata"></a><span data-ttu-id="2c098-135">Métadonnées</span><span class="sxs-lookup"><span data-stu-id="2c098-135">Metadata</span></span>  
 <span data-ttu-id="2c098-136">Métadonnées, telles que l'identificateur d'instance de message, l'orchestration ou le pipeline consignant le message, le point auquel l'orchestration ou le pipeline consigne le message et d'autres détails de suivi pertinents.</span><span class="sxs-lookup"><span data-stu-id="2c098-136">Metadata, such as the message instance identifier, the orchestration or pipeline logging the message, the point at which the orchestration or pipeline logs the message, and other relevant tracking details.</span></span> <span data-ttu-id="2c098-137">Pour qu'un message de la base de données MessageBox puisse être acheminé vers un processus d'entreprise, il doit contenir des propriétés de contexte, telles que le type et l'origine du message.</span><span class="sxs-lookup"><span data-stu-id="2c098-137">For a message in the MessageBox database to route to a business process, it must contain context properties such as message type and origin.</span></span> <span data-ttu-id="2c098-138">Ces propriétés deviennent des métadonnées.</span><span class="sxs-lookup"><span data-stu-id="2c098-138">These properties become metadata.</span></span> <span data-ttu-id="2c098-139">Le suivi des messages et des instances de service utilise les critères d'abonnement pour exécuter une requête sur ces métadonnées.</span><span class="sxs-lookup"><span data-stu-id="2c098-139">Message and service instance tracking uses subscription criteria to query against this metadata.</span></span>  
  
 <span data-ttu-id="2c098-140">Via la console Administration de BizTalk Server, vous pouvez promouvoir des propriétés de contexte en sélectionnant un schéma système.</span><span class="sxs-lookup"><span data-stu-id="2c098-140">Through the BizTalk Server Administration Console, you can promote context properties by selecting the particular system schema.</span></span> <span data-ttu-id="2c098-141">Les schémas système se trouvent dans le nœud Applications\BizTalk.System\Schemas.</span><span class="sxs-lookup"><span data-stu-id="2c098-141">The system schemas are located in the Applications\BizTalk.System\Schemas node.</span></span> <span data-ttu-id="2c098-142">BizTalk Server effectue le suivi de ces propriétés de contexte de manière globale, c'est-à-dire que tous les messages contenant une propriété de contexte sont suivis.</span><span class="sxs-lookup"><span data-stu-id="2c098-142">BizTalk Server tracks these context properties globally—that is, all messages now track the particular context property.</span></span> <span data-ttu-id="2c098-143">Par conséquent, la taille de la base de données des suivis BizTalk peut augmenter considérablement.</span><span class="sxs-lookup"><span data-stu-id="2c098-143">This may significantly increase the size of the BizTalk Tracking database.</span></span>  
  
## <a name="sensitive-data"></a><span data-ttu-id="2c098-144">Données sensibles</span><span class="sxs-lookup"><span data-stu-id="2c098-144">Sensitive Data</span></span>  
 <span data-ttu-id="2c098-145">Vous pouvez sécuriser les données ci-dessous de sorte qu'elles n'apparaissent pas dans la fenêtre des propriétés de schéma correspondante et qu'ainsi, elles ne puissent pas faire l'objet d'un suivi.</span><span class="sxs-lookup"><span data-stu-id="2c098-145">You can secure the following data ensuring that it does not appear in corresponding schemas property window and therefore becomes unavailable for tracking.</span></span>  
  
-   <span data-ttu-id="2c098-146">Appliquer le **isSensitive** attribut à des propriétés sensibles dans un schéma de propriété, il n’est plus visible dans la propriété de Message de suivi des sélections de configuration.</span><span class="sxs-lookup"><span data-stu-id="2c098-146">Apply the **isSensitive** attribute to any sensitive properties in a property schema, so that it is no longer visible in the Message Property tracking configuration selections.</span></span>  
  
-   <span data-ttu-id="2c098-147">Tous les transports prêts à l'emploi contiennent des mots de passe considérés comme données sensibles. Par conséquent, les transports ne peuvent pas être suivis.</span><span class="sxs-lookup"><span data-stu-id="2c098-147">All out-of-box transports contain passwords marked as sensitive, so the transports cannot be tracked.</span></span>  
  
-   <span data-ttu-id="2c098-148">En outre, les données sensibles ne figurent plus dans la base de données de gestion. Par conséquent, si vous définissez des options de suivi directement dans la base de données, ces données ne feront pas l'objet d'un suivi.</span><span class="sxs-lookup"><span data-stu-id="2c098-148">In addition, these sensitive properties are no longer in the Management database, so if you are setting tracking options directly in the database, they are unavailable for tracking.</span></span>  
  
-   <span data-ttu-id="2c098-149">Si vous suivez un corps de message en cours de transmission vers l'extérieur, le suivi des messages supprime toutes les propriétés de transport du raccourci du corps de message suivi.</span><span class="sxs-lookup"><span data-stu-id="2c098-149">If you track outbound on-the-wire message bodies, message tracking removes all the transport properties from the shortcut of the tracked message body.</span></span> <span data-ttu-id="2c098-150">Par conséquent, outre la suppression des propriétés du transport sortant, figurant dans le raccourci du corps de message suivi, le suivi des messages supprime également les propriétés des transports entrants.</span><span class="sxs-lookup"><span data-stu-id="2c098-150">Therefore, in addition to removing outbound transport properties from the shortcut of the tracked message body, message tracking also removes properties from inbound transports.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="2c098-151">Une propriété promue peut contenir des données sensibles.</span><span class="sxs-lookup"><span data-stu-id="2c098-151">A promoted property can contain sensitive data.</span></span> <span data-ttu-id="2c098-152">Si les requêtes de suivi de la page Hub du groupe effectuent le suivi d'une propriété incluant des données sensibles, les utilisateurs autorisés à exécuter des requêtes de suivi peuvent consulter ces données.</span><span class="sxs-lookup"><span data-stu-id="2c098-152">If tracking queries from the Group Hub page track a property which includes sensitive data, any user with permissions to run the tracking queries can view this data.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2c098-153">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="2c098-153">See Also</span></span>  
 [<span data-ttu-id="2c098-154">Configuration du suivi à l’aide de la Console Administration de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="2c098-154">Configuring Tracking Using the BizTalk Server Administration Console</span></span>](http://msdn.microsoft.com/en-us/49b7f9d3-60b5-41bd-ba8b-029253926bef)