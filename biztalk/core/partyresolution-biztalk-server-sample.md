---
title: PartyResolution (exemple BizTalk Server) | Documents Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- examples, parties
- orchestrations, examples
- parties, examples
- parties, orchestrations
- examples, routing
- orchestrations, parties
- examples, orchestrations
- examples, messages
- routing, messages
- messages, routing
ms.assetid: 220e6bc5-6f04-4f37-b0d0-f11c2cc14422
caps.latest.revision: "33"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: abf8944c3f55422189c0866608a3fd412dafe21d
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="partyresolution-biztalk-server-sample"></a><span data-ttu-id="72597-102">PartyResolution (exemple BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="72597-102">PartyResolution (BizTalk Server Sample)</span></span>
<span data-ttu-id="72597-103">L'exemple PartyResolution illustre l'utilisation des orchestrations BizTalk avec la résolution de tiers pour acheminer les messages vers l'un des deux destinataires possibles.</span><span class="sxs-lookup"><span data-stu-id="72597-103">The PartyResolution sample demonstrates how to use BizTalk orchestrations with party resolution to route messages to one of two possible recipients.</span></span>  
  
## <a name="what-this-sample-does"></a><span data-ttu-id="72597-104">Fonctions de l'exemple</span><span class="sxs-lookup"><span data-stu-id="72597-104">What This Sample Does</span></span>  
 <span data-ttu-id="72597-105">Cet exemple exécute plusieurs orchestrations qui illustrent les rôles suivants :</span><span class="sxs-lookup"><span data-stu-id="72597-105">This sample runs multiple orchestrations that demonstrate the following different roles:</span></span>  
  
-   <span data-ttu-id="72597-106">orchestration de l'acheteur, qui permet de lancer le traitement des messages relatifs aux bons de commande ;</span><span class="sxs-lookup"><span data-stu-id="72597-106">Buyer orchestration, used to initiate the purchase order (PO) message processing.</span></span>  
  
-   <span data-ttu-id="72597-107">orchestration du fournisseur, qui illustre la résolution de tiers entrants et sortants ;</span><span class="sxs-lookup"><span data-stu-id="72597-107">Supplier orchestration, which demonstrates both inbound and outbound party resolution.</span></span>  
  
-   <span data-ttu-id="72597-108">orchestrations ShipmentAgency1 et ShipmentAgency2, qui répondent à l'orchestration du fournisseur sur la base de l'adresse de livraison figurant sur le bon de commande.</span><span class="sxs-lookup"><span data-stu-id="72597-108">ShipmentAgency1 and ShipmentAgency2 orchestrations, which respond to the supplier orchestration based on the shipment destination in the PO.</span></span>  
  
## <a name="how-this-sample-is-designed-and-why"></a><span data-ttu-id="72597-109">Cet exemple est conçu et pourquoi</span><span class="sxs-lookup"><span data-stu-id="72597-109">How This Sample is Designed and Why</span></span>  
 <span data-ttu-id="72597-110">La résolution de tiers fait référence au processus qui consiste à déterminer l'expéditeur (tiers) d'un message.</span><span class="sxs-lookup"><span data-stu-id="72597-110">Party resolution refers to the process of determining who (that is, what party) sends a message.</span></span> <span data-ttu-id="72597-111">Par exemple, vous pouvez autoriser uniquement les tiers connus à envoyer un message.</span><span class="sxs-lookup"><span data-stu-id="72597-111">For example, you may want to enable only known parties to send a message.</span></span> <span data-ttu-id="72597-112">La résolution de tiers sortants est le processus qui consiste à déterminer les tiers destinataires d'un message.</span><span class="sxs-lookup"><span data-stu-id="72597-112">Outbound party resolution is the process by which you determine which parties should be sent a message.</span></span>  
  
 <span data-ttu-id="72597-113">Outre la résolution de tiers, cet exemple présente l'implémentation et l'utilisation des rôles.</span><span class="sxs-lookup"><span data-stu-id="72597-113">In addition to party resolution, this sample demonstrates how to implement and use roles.</span></span> <span data-ttu-id="72597-114">Par exemple, pour traiter la livraison d'un produit, vous créez un port d'envoi auquel vous envoyez un document demandant à un expéditeur de livrer le produit.</span><span class="sxs-lookup"><span data-stu-id="72597-114">For example, to process the shipment of your product, you create a send port to which you send a document instructing a shipper to ship your product.</span></span> <span data-ttu-id="72597-115">Si vous avez le choix entre plusieurs expéditeurs, vous pouvez créer un rôle Expéditeur dans votre orchestration, plutôt que de créer plusieurs ports d'envoi dont la seule différence réside dans l'URL de l'expéditeur.</span><span class="sxs-lookup"><span data-stu-id="72597-115">If you have multiple shippers to choose from, you can create a shipper role in your orchestration rather than create multiple send ports whose only difference is the shipper's URL.</span></span> <span data-ttu-id="72597-116">Vous pouvez ensuite envoyer des messages relatifs à la livraison du produit au rôle Expéditeur.</span><span class="sxs-lookup"><span data-stu-id="72597-116">You can then send messages relating to product shipment to the shipper role.</span></span> <span data-ttu-id="72597-117">Vous créez des tiers, puis associez un port d'envoi à chaque tiers et certificat de tiers.</span><span class="sxs-lookup"><span data-stu-id="72597-117">You create parties and associate a send port to each party and party certificate.</span></span> <span data-ttu-id="72597-118">Pour terminer, vous inscrivez chaque tiers au rôle Expéditeur pour l'activer.</span><span class="sxs-lookup"><span data-stu-id="72597-118">Finally, you enlist each party to the shipper role to enable it.</span></span> <span data-ttu-id="72597-119">Dans l'orchestration, vous pouvez ensuite spécifier dynamiquement l'expéditeur auquel vous envoyez le message.</span><span class="sxs-lookup"><span data-stu-id="72597-119">In the orchestration, you can then dynamically specify which shipper you are sending the message to.</span></span>  
  
 <span data-ttu-id="72597-120">Cet exemple illustre également l'utilisation de la corrélation afin de faire correspondre le message entrant à l'instance d'orchestration adéquate.</span><span class="sxs-lookup"><span data-stu-id="72597-120">This sample also demonstrates how to use correlation to match the incoming message to the right orchestration instance.</span></span>  
  
-   <span data-ttu-id="72597-121">Les flux de processus d'entreprise pour l'acheteur, le fournisseur et les expéditeurs sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="72597-121">The business process flows for the buyer, supplier, and shipping agencies are as follows:</span></span>  
  
-   <span data-ttu-id="72597-122">Flux de processus d'entreprise de l'acheteur :</span><span class="sxs-lookup"><span data-stu-id="72597-122">Buyer business process flow:</span></span>  
  
    1.  <span data-ttu-id="72597-123">Recevez le message de bon de commande envoyé par le service interne au format .xml.</span><span class="sxs-lookup"><span data-stu-id="72597-123">Receive PO message from internal department as an .xml file.</span></span>  
  
    2.  <span data-ttu-id="72597-124">Envoyez le message de bon de commande au fournisseur.</span><span class="sxs-lookup"><span data-stu-id="72597-124">Send PO message to supplier.</span></span>  
  
-   <span data-ttu-id="72597-125">Flux de processus d'entreprise du fournisseur :</span><span class="sxs-lookup"><span data-stu-id="72597-125">Supplier business process flow:</span></span>  
  
    1.  <span data-ttu-id="72597-126">Résolvez le tiers (résolution de tiers entrant) pour mettre à jour le tiers source sur la base d'un certificat de signature.</span><span class="sxs-lookup"><span data-stu-id="72597-126">Resolve the party (inbound party resolution) to update the source party based on signature certificate.</span></span>  
  
    2.  <span data-ttu-id="72597-127">Recevez un message d'activation (bon de commande) de l'acheteur.</span><span class="sxs-lookup"><span data-stu-id="72597-127">Receive an activation message (PO) from buyer.</span></span>  
  
    3.  <span data-ttu-id="72597-128">Envoyez un accusé de réception de bon de commande à l'acheteur.</span><span class="sxs-lookup"><span data-stu-id="72597-128">Send a PO Acknowledgement message to buyer.</span></span>  
  
    4.  <span data-ttu-id="72597-129">Vérifiez le pays ou la région de la livraison.</span><span class="sxs-lookup"><span data-stu-id="72597-129">Verify the delivery country/region.</span></span>  
  
    5.  <span data-ttu-id="72597-130">Résolvez le tiers sortant pour rechercher l'agence d'expédition à utiliser.</span><span class="sxs-lookup"><span data-stu-id="72597-130">Resolve the outbound party to find which shipping agency to use.</span></span> <span data-ttu-id="72597-131">Aux États-Unis, l'agence d'expédition est ShipmentAgency2.</span><span class="sxs-lookup"><span data-stu-id="72597-131">If the country/region is U.S., the shipping agency is ShipmentAgency2.</span></span> <span data-ttu-id="72597-132">Au Canada, l'agence d'expédition est ShipmentAgency1.</span><span class="sxs-lookup"><span data-stu-id="72597-132">If the country/region is Canada, the shipping agency is ShipmentAgency1.</span></span>  
  
    6.  <span data-ttu-id="72597-133">Envoyez un message de demande d'ordre de livraison à l'agence d'expédition appropriée.</span><span class="sxs-lookup"><span data-stu-id="72597-133">Send a Shipment Order Request message to the appropriate shipping agency.</span></span>  
  
    7.  <span data-ttu-id="72597-134">Recevez l'accusé de réception d'ordre de livraison provenant de l'agence d'expédition appropriée.</span><span class="sxs-lookup"><span data-stu-id="72597-134">Receive the Shipment Order Acknowledgement message from the appropriate shipping agency.</span></span>  
  
    8.  <span data-ttu-id="72597-135">Envoyez un message d'avis d'expédition à l'agence d'expédition appropriée.</span><span class="sxs-lookup"><span data-stu-id="72597-135">Send a Shipment Advice message to the appropriate shipping agency.</span></span>  
  
    9. <span data-ttu-id="72597-136">Recevez un accusé de réception d'avis d'expédition provenant de l'agence d'expédition appropriée.</span><span class="sxs-lookup"><span data-stu-id="72597-136">Receive a Shipment Advice Acknowledgement message from the appropriate shipping agency.</span></span>  
  
    10. <span data-ttu-id="72597-137">Envoyez un message d'accusé de réception du bon de commande à l'acheteur.</span><span class="sxs-lookup"><span data-stu-id="72597-137">Send a final PO Delivery Receipt message to the buyer.</span></span>  
  
-   <span data-ttu-id="72597-138">Flux de processus d'entreprise de l'agence d'expédition (identique pour les deux agences d'expédition) :</span><span class="sxs-lookup"><span data-stu-id="72597-138">Shipping agency business process flow (same for both shipping agencies):</span></span>  
  
    1.  <span data-ttu-id="72597-139">Recevez un message de demande d'ordre de livraison provenant du fournisseur.</span><span class="sxs-lookup"><span data-stu-id="72597-139">Receive the Shipment Order Request message from the supplier.</span></span>  
  
    2.  <span data-ttu-id="72597-140">Générez et envoyez un message d'accusé de réception du message de demande d'ordre de livraison.</span><span class="sxs-lookup"><span data-stu-id="72597-140">Generate and send an Acknowledgement message for the Shipment Order Request message.</span></span>  
  
    3.  <span data-ttu-id="72597-141">Recevez un message d'avis d'expédition du fournisseur.</span><span class="sxs-lookup"><span data-stu-id="72597-141">Receive a Shipment Advice message from the supplier.</span></span>  
  
    4.  <span data-ttu-id="72597-142">Générez et envoyez un message d'accusé de réception du message d'avis d'expédition.</span><span class="sxs-lookup"><span data-stu-id="72597-142">Generate and send an Acknowledgement message for the Shipment Advice message.</span></span>  
  
 <span data-ttu-id="72597-143">Les énoncés suivants décrivent la conception de cet exemple :</span><span class="sxs-lookup"><span data-stu-id="72597-143">The following statements explain how this sample is designed:</span></span>  
  
-   <span data-ttu-id="72597-144">L'orchestration BuyerProcess.odx reçoit un message et utilise le pipeline personnalisé MimePartyResSendPipeline pour l'encoder et l'envoyer au fournisseur.</span><span class="sxs-lookup"><span data-stu-id="72597-144">The BuyerProcess.odx orchestration receives a message and uses the custom pipeline MimePartyResSendPipeline to encode the message and send it to the supplier.</span></span> <span data-ttu-id="72597-145">Cette opération est effectuée à l'aide du Concepteur de pipeline pour générer et déployer un pipeline d'envoi personnalisé.</span><span class="sxs-lookup"><span data-stu-id="72597-145">This is done by using Pipeline Designer to build and deploy a custom send pipeline.</span></span> <span data-ttu-id="72597-146">Avant d'envoyer le message au fournisseur, celui-ci est signé numériquement à l'aide de la clé privée de l'acheteur, spécifiée dans les propriétés de groupe BizTalk dans la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="72597-146">Before sending the message to the supplier, the message is digitally signed with buyer's private key, which is specified in BizTalk Group Properties in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
-   <span data-ttu-id="72597-147">L'orchestration SupplierProcess.odx utilise le pipeline personnalisé MimePartyResReceivePipeline, qui inclut le Composant Décodeur MIME/SMIME, pour décoder le message et procéder à une résolution de tiers entrant à l'aide de la clé publique de l'acheteur pour résoudre et valider l'identité de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="72597-147">The SupplierProcess.odx orchestration uses the custom pipeline MimePartyResReceivePipeline, which includes a MIME/SMIME decoder component, to decode the message and perform inbound party resolution by using the buyer's public key to resolve and validate the buyer's identity.</span></span> <span data-ttu-id="72597-148">Cette opération est effectuée en générant et en déployant un pipeline de réception personnalisé.</span><span class="sxs-lookup"><span data-stu-id="72597-148">This is done by building and deploying a custom receive pipeline.</span></span>  
  
-   <span data-ttu-id="72597-149">L'orchestration du fournisseur lance ensuite POCorrelationSets, qui se base sur la propriété promue PONo.</span><span class="sxs-lookup"><span data-stu-id="72597-149">The supplier orchestration then initiates the POCorrelationSets which is defined to base on a promoted property - PONo.</span></span> <span data-ttu-id="72597-150">Celle-ci permettra de faire correspondre les messages entrants et sortants avec cette instance d'orchestration ultérieurement, car plusieurs actions d'envoi et de réception transitent par l'orchestration entière.</span><span class="sxs-lookup"><span data-stu-id="72597-150">The PONo is used to match the inbound and outbound messages to this orchestration instance in the later stage, because there are multiple send and receive actions throughout the entire orchestration.</span></span>  
  
-   <span data-ttu-id="72597-151">L'orchestration du fournisseur implémente les liens de rôle pour traiter la résolution des tiers entrants et sortants.</span><span class="sxs-lookup"><span data-stu-id="72597-151">The supplier orchestration implements role links to deal with inbound and outbound party resolution.</span></span> <span data-ttu-id="72597-152">Elle utilise deux types de liens de rôle :</span><span class="sxs-lookup"><span data-stu-id="72597-152">The supplier orchestration uses two role link types:</span></span>  
  
    -   <span data-ttu-id="72597-153">Type de lien de rôle Buyer_Supplier</span><span class="sxs-lookup"><span data-stu-id="72597-153">Buyer_Supplier role link type</span></span>  
  
    -   <span data-ttu-id="72597-154">Type de lien de rôle Supplier_Shipment</span><span class="sxs-lookup"><span data-stu-id="72597-154">Supplier_Shipment role link type</span></span>  
  
-   <span data-ttu-id="72597-155">Dans le Buyer_Supplier **lien de rôle** forme, le fournisseur est dans le rôle de fournisseur et l’acheteur au rôle consommateur car le fournisseur reçoit le premier message de l’acheteur.</span><span class="sxs-lookup"><span data-stu-id="72597-155">In the Buyer_Supplier **Role Link** shape, the supplier is in the Provider role and the buyer is in the Consumer role because the supplier receives the first message from the buyer.</span></span> <span data-ttu-id="72597-156">Lorsque l'orchestration du fournisseur envoie l'accusé de réception au rôle de l'acheteur, un port d'envoi est associé à l'acheteur et le message est envoyé à celui-ci via le port d'envoi spécifié.</span><span class="sxs-lookup"><span data-stu-id="72597-156">When the supplier orchestration sends the acknowledgment to the buyer role, there is a send port associated with the buyer, and the message is sent to the buyer through the specified send port.</span></span> <span data-ttu-id="72597-157">Pour trouver le port d’envoi, cliquez sur **BuyerAgency** dans les [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="72597-157">To find the send port, right-click **BuyerAgency** in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console and then click **Properties**.</span></span> <span data-ttu-id="72597-158">Le port d’envoi s’affiche sous **Ports d’envoi**.</span><span class="sxs-lookup"><span data-stu-id="72597-158">The send port is displayed under **Send Ports**.</span></span>  
  
-   <span data-ttu-id="72597-159">L'orchestration utilise ensuite l'expression suivante pour renvoyer les informations du partenaire, puis génère un fichier XML dans un dossier via un appel à un assembly externe nommé CheckPartyName.</span><span class="sxs-lookup"><span data-stu-id="72597-159">The orchestration then uses the following expression to return the partner information, and writes an XML file to a folder through a call to an external assembly named CheckPartyName.</span></span>  
  
    ```  
    Buyer_Supplier(Microsoft.XLANGs.BaseTypes.SourceParty)  
    ```  
  
-   <span data-ttu-id="72597-160">Dans le Supplier_Shipment **lien de rôle** forme, le rôle livraison inclut un port d’envoi contenant deux opérations qui sont utilisés pour envoyer le message du fournisseur à l’agence d’expédition appropriée en fonction du tiers de destination.</span><span class="sxs-lookup"><span data-stu-id="72597-160">In the Supplier_Shipment **Role Link** shape, the Shipment role contains a send port with two operations that are used to send the message from the supplier to the appropriate shipping agency depending on the destination party.</span></span> <span data-ttu-id="72597-161">Le rôle Fournisseur inclut un port de réception contenant deux opérations permettant de recevoir la réponse de l'agence d'expédition.</span><span class="sxs-lookup"><span data-stu-id="72597-161">The Supplier role contains a receive port with two operations that are used to receive the response from the shipping agency.</span></span> <span data-ttu-id="72597-162">La corrélation, basée sur la propriété PONo, est utilisée lors de l'envoi et de la réception de ces messages.</span><span class="sxs-lookup"><span data-stu-id="72597-162">The correlation is used when sending and receiving these messages, and it is based on the PONo.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="72597-163">Lorsque vous lierez l'orchestration du fournisseur, vous remarquerez que seul un port d'envoi et deux ports de réception doivent être liés.</span><span class="sxs-lookup"><span data-stu-id="72597-163">When you bind the supplier orchestration, you will find that only one send port and two receive ports need to be bound.</span></span> <span data-ttu-id="72597-164">Ceci s'explique par le fait que les ports d'envoi vers les tiers de destination sont déjà liés aux tiers.</span><span class="sxs-lookup"><span data-stu-id="72597-164">This is because the send ports to the destination parties are already bound with the parties.</span></span> <span data-ttu-id="72597-165">En outre, un des ports de réception dans l’orchestration contient deux opérations de réception, c’est le cas même si vous voyez trois **réception** formes, seulement deux d'entre elles doivent être liés.</span><span class="sxs-lookup"><span data-stu-id="72597-165">Moreover, one of the receive ports in the orchestration contains two receive operations, so even if you see three **Receive** shapes, only two of them need to be bound.</span></span>  
  
-   <span data-ttu-id="72597-166">L'orchestration du fournisseur utilise la première ligne du code suivant pour obtenir l'agence d'expédition en appelant un assembly externe nommé QueryShipmentCatalogComponent.</span><span class="sxs-lookup"><span data-stu-id="72597-166">The supplier orchestration uses the first line in the following code to get the shipment agency by calling an external assembly named QueryShipmentCatalogComponent.</span></span> <span data-ttu-id="72597-167">Elle utilise ensuite la deuxième ligne pour définir le tiers de destination pour le rôle Livraison.</span><span class="sxs-lookup"><span data-stu-id="72597-167">It then uses the second line to set the destination party for the shipment role.</span></span>  
  
    ```  
    strShipmentName= objQueryShipmentCatalog.GetShipmentDetails(POMessage.MessagePart_1.POHeader.Address.Country);  
    Supplier_Shipment(Microsoft.XLANGs.BaseTypes.DestinationParty) = new Microsoft.XLANGs.BaseTypes.Party(strShipmentName,"OrganizationName");  
    ```  
  
-   <span data-ttu-id="72597-168">Shipper1Process.odx et Shipper2Process.odx sont générés pour recevoir le bordereau de livraison et l'avis d'expédition de SupplierProcess.odx, ainsi que pour renvoyer la réponse à SupplierProcess.odx.</span><span class="sxs-lookup"><span data-stu-id="72597-168">Shipper1Process.odx and Shipper2Process.odx are built to receive the shipping order and the shipping advice from SupplierProcess.odx and to send the response back to SupplierProcess.odx.</span></span> <span data-ttu-id="72597-169">Dans les deux orchestrations d'expéditeur, la corrélation est utilisée et son type est basé sur la propriété promue PONo.</span><span class="sxs-lookup"><span data-stu-id="72597-169">In both of the shipper orchestrations, correlation is used, and the correlation type is based on the promoted property PONo.</span></span>  
  
## <a name="where-to-find-this-sample"></a><span data-ttu-id="72597-170">Accès à l'exemple</span><span class="sxs-lookup"><span data-stu-id="72597-170">Where to Find This Sample</span></span>  
 <span data-ttu-id="72597-171">*\<Exemples de chemin d’accès >*\Orchestrations\PartyResolution\\</span><span class="sxs-lookup"><span data-stu-id="72597-171">*\<Samples Path>*\Orchestrations\PartyResolution\\</span></span>  
  
 <span data-ttu-id="72597-172">Le tableau suivant présente les fichiers de cet exemple et décrit leur fonction.</span><span class="sxs-lookup"><span data-stu-id="72597-172">The following table shows the files in this sample and describes their purpose.</span></span>  
  
|<span data-ttu-id="72597-173">Fichier(s)</span><span class="sxs-lookup"><span data-stu-id="72597-173">File(s)</span></span>|<span data-ttu-id="72597-174"> Description</span><span class="sxs-lookup"><span data-stu-id="72597-174">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="72597-175">BuyerBinding.xml, ShippingAgency1Binding.xml, ShippingAgency2Binding.xml, SupplierBinding.xml</span><span class="sxs-lookup"><span data-stu-id="72597-175">BuyerBinding.xml, ShippingAgency1Binding.xml, ShippingAgency2Binding.xml, SupplierBinding.xml</span></span>|<span data-ttu-id="72597-176">Utilisé pour l’installation automatique, notamment la liaison de port.</span><span class="sxs-lookup"><span data-stu-id="72597-176">Used for automated setup such as port binding.</span></span>|  
|<span data-ttu-id="72597-177">Cleanup.bat</span><span class="sxs-lookup"><span data-stu-id="72597-177">Cleanup.bat</span></span>|<span data-ttu-id="72597-178">Permet d'annuler le déploiement des assemblys et de supprimer ceux-ci du Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="72597-178">Used to undeploy assemblies and remove them from the global assembly cache.</span></span> <span data-ttu-id="72597-179">Supprime les ports d'envoi et de réception.</span><span class="sxs-lookup"><span data-stu-id="72597-179">Removes send and receive ports.</span></span> <span data-ttu-id="72597-180">Supprime les répertoires virtuels Microsoft Internet Information Services (IIS) le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="72597-180">Removes Microsoft Internet Information Services (IIS) virtual directories as needed.</span></span>|  
|<span data-ttu-id="72597-181">PartyResolution.sln</span><span class="sxs-lookup"><span data-stu-id="72597-181">PartyResolution.sln</span></span>|<span data-ttu-id="72597-182">Fichier de solution qui inclut tous les projets des sous-dossiers.</span><span class="sxs-lookup"><span data-stu-id="72597-182">Solution file that contains all of the projects in the various subfolders.</span></span>|  
|<span data-ttu-id="72597-183">PurchaseOrder.xml</span><span class="sxs-lookup"><span data-stu-id="72597-183">PurchaseOrder.xml</span></span>|<span data-ttu-id="72597-184">Exemple d'entrée de bon de commande.</span><span class="sxs-lookup"><span data-stu-id="72597-184">Sample input PO.</span></span>|  
|<span data-ttu-id="72597-185">Setup.bat</span><span class="sxs-lookup"><span data-stu-id="72597-185">Setup.bat</span></span>|<span data-ttu-id="72597-186">Il permet de créer et d'initialiser des parties de cet exemple.</span><span class="sxs-lookup"><span data-stu-id="72597-186">Used to build and initialize portions of this sample.</span></span>|  
|<span data-ttu-id="72597-187">Dans le dossier \Buyer :</span><span class="sxs-lookup"><span data-stu-id="72597-187">In the \Buyer folder:</span></span><br /><br /> <span data-ttu-id="72597-188">Buyer.btproj, BuyerProcess.odx</span><span class="sxs-lookup"><span data-stu-id="72597-188">Buyer.btproj, BuyerProcess.odx</span></span>|<span data-ttu-id="72597-189">Projet et orchestration BizTalk qui permettent d'implémenter l'acheteur dans cet exemple.</span><span class="sxs-lookup"><span data-stu-id="72597-189">BizTalk project and orchestration used to implement the buyer in this sample.</span></span>|  
|<span data-ttu-id="72597-190">Dans le dossier \Catalog :</span><span class="sxs-lookup"><span data-stu-id="72597-190">In the \Catalog folder:</span></span><br /><br /> <span data-ttu-id="72597-191">Catalog.xml</span><span class="sxs-lookup"><span data-stu-id="72597-191">Catalog.xml</span></span>|<span data-ttu-id="72597-192">Permet de déterminer l'agence d'expédition selon la destination de livraison spécifiée dans le bon de commande.</span><span class="sxs-lookup"><span data-stu-id="72597-192">Used to determine shipment agency based on shipping destination specified in the PO.</span></span>|  
|<span data-ttu-id="72597-193">Dans le dossier \CheckPartyName :</span><span class="sxs-lookup"><span data-stu-id="72597-193">In the \CheckPartyName folder:</span></span><br /><br /> <span data-ttu-id="72597-194">AssemblyInfo.cs, CheckPartyName.csproj, Class1.cs</span><span class="sxs-lookup"><span data-stu-id="72597-194">AssemblyInfo.cs, CheckPartyName.csproj, Class1.cs</span></span>|<span data-ttu-id="72597-195">Projet et fichiers sources Microsoft Visual C# pour l'application CheckPartyName permettant d'accéder aux propriétés du tiers source.</span><span class="sxs-lookup"><span data-stu-id="72597-195">Microsoft Visual C# project and source files for the CheckPartyName application used to access the properties of the source party.</span></span>|  
|<span data-ttu-id="72597-196">Dans le dossier \FilePolling :</span><span class="sxs-lookup"><span data-stu-id="72597-196">In the \FilePolling folder:</span></span><br /><br /> <span data-ttu-id="72597-197">App.ico, AssemblyInfo.cs, FilePolling.cs, FilePolling.csproj, FilePolling.resx, FilePolling.sln,</span><span class="sxs-lookup"><span data-stu-id="72597-197">App.ico, AssemblyInfo.cs, FilePolling.cs, FilePolling.csproj, FilePolling.resx, FilePolling.sln,</span></span>|<span data-ttu-id="72597-198">Solution, projet et source Visual c#, ainsi que les fichiers associés pour l'application FilePolling.</span><span class="sxs-lookup"><span data-stu-id="72597-198">Visual C# solution, project, source, and associated files for the FilePolling application.</span></span><br /><br /> <span data-ttu-id="72597-199">Cette application permet de rester informé sur l'état de progression de ce scénario automatisé.</span><span class="sxs-lookup"><span data-stu-id="72597-199">Use this application to keep informed about the progressing state of this automated scenario.</span></span>|  
|<span data-ttu-id="72597-200">Dans le dossier \Pipeline\projectschema :</span><span class="sxs-lookup"><span data-stu-id="72597-200">In the \Pipeline\projectschema folder:</span></span><br /><br /> <span data-ttu-id="72597-201">MimePartyResReceivePipeline.btp, MimePartyResSendPipeline.btp</span><span class="sxs-lookup"><span data-stu-id="72597-201">MimePartyResReceivePipeline.btp, MimePartyResSendPipeline.btp</span></span>|<span data-ttu-id="72597-202">Fichiers de pipeline de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] utilisés par les différents rôles de cet exemple.</span><span class="sxs-lookup"><span data-stu-id="72597-202">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] pipeline files used by the different roles in this sample.</span></span>|  
|<span data-ttu-id="72597-203">Dans le dossier \QueryShipmentCatalogComponent :</span><span class="sxs-lookup"><span data-stu-id="72597-203">In the \QueryShipmentCatalogComponent folder:</span></span><br /><br /> <span data-ttu-id="72597-204">AssemblyInfo.cs, QueryShipmentCatalog.cs, QueryShipmentCatalogComponent.csproj</span><span class="sxs-lookup"><span data-stu-id="72597-204">AssemblyInfo.cs, QueryShipmentCatalog.cs, QueryShipmentCatalogComponent.csproj</span></span>|<span data-ttu-id="72597-205">Projet et fichiers sources Visual C# pour le composant QueryShipmentCatalog permettant d'accéder au catalogue de livraison défini dans le fichier Catalog.xml.</span><span class="sxs-lookup"><span data-stu-id="72597-205">Visual C# project and source files for the QueryShipmentCatalog component used to access the shipment catalog defined in the file Catalog.xml.</span></span><br /><br /> <span data-ttu-id="72597-206">Le composant QueryShipmentCatalog détermine l'agence d'expédition utilisée par le fournisseur.</span><span class="sxs-lookup"><span data-stu-id="72597-206">The QueryShipmentCatalog component determines which shipment agency the supplier will use.</span></span> <span data-ttu-id="72597-207">Il utilise les données du fichier Catalog.xml pour déterminer l'expéditeur le plus approprié en fonction de sa situation géographique.</span><span class="sxs-lookup"><span data-stu-id="72597-207">It uses data from Catalog.xml to determine the best shipper based on geography.</span></span>|  
|<span data-ttu-id="72597-208">Dans le dossier \Schemas :</span><span class="sxs-lookup"><span data-stu-id="72597-208">In the \Schemas folder:</span></span><br /><br /> <span data-ttu-id="72597-209">PODeliveryReceipt.xsd, POPropertySchema.xsd, PurchaseOrder.xsd, PurchaseOrderAcknowledgement.xsd, Schemas.btproj, ShipmentAdvice.xsd, ShipmentAdviceAcknowledgement.xsd, ShipmentOrderAcknowledgement.xsd, ShipmentOrderRequest.xsd</span><span class="sxs-lookup"><span data-stu-id="72597-209">PODeliveryReceipt.xsd, POPropertySchema.xsd, PurchaseOrder.xsd, PurchaseOrderAcknowledgement.xsd, Schemas.btproj, ShipmentAdvice.xsd, ShipmentAdviceAcknowledgement.xsd, ShipmentOrderAcknowledgement.xsd, ShipmentOrderRequest.xsd</span></span>|<span data-ttu-id="72597-210">Schémas utilisés par les divers rôles de cet exemple.</span><span class="sxs-lookup"><span data-stu-id="72597-210">Schemas used by the various roles in this sample.</span></span>|  
|<span data-ttu-id="72597-211">Dans le dossier \ShipmentAgency1 :</span><span class="sxs-lookup"><span data-stu-id="72597-211">In the \ShipmentAgency1 folder:</span></span><br /><br /> <span data-ttu-id="72597-212">ShipmentAdviceAck.btm, ShipmentAgency1.btproj, ShipmentOrderAck.btm, Shipper1Process.odx</span><span class="sxs-lookup"><span data-stu-id="72597-212">ShipmentAdviceAck.btm, ShipmentAgency1.btproj, ShipmentOrderAck.btm, Shipper1Process.odx</span></span>|<span data-ttu-id="72597-213">Projet, orchestration et mappages BizTalk qui permettent d'implémenter ShipmentAgency1 dans cet exemple.</span><span class="sxs-lookup"><span data-stu-id="72597-213">BizTalk project, orchestration, and maps used to implement ShipmentAgency1 in this sample.</span></span>|  
|<span data-ttu-id="72597-214">Dans le dossier \ShipmentAgency2 :</span><span class="sxs-lookup"><span data-stu-id="72597-214">In the \ShipmentAgency2 folder:</span></span><br /><br /> <span data-ttu-id="72597-215">ShipmentAdviceAck.btm, ShipmentAgency2.btproj, ShipmentOrderAck.btm, Shipper2Process.odx</span><span class="sxs-lookup"><span data-stu-id="72597-215">ShipmentAdviceAck.btm, ShipmentAgency2.btproj, ShipmentOrderAck.btm, Shipper2Process.odx</span></span>|<span data-ttu-id="72597-216">Projet, orchestration et mappages BizTalk qui permettent d'implémenter ShipmentAgency2 dans cet exemple.</span><span class="sxs-lookup"><span data-stu-id="72597-216">BizTalk project, orchestration, and maps used to implement ShipmentAgency2 in this sample.</span></span>|  
|<span data-ttu-id="72597-217">Dans le dossier \Supplier :</span><span class="sxs-lookup"><span data-stu-id="72597-217">In the \Supplier folder:</span></span><br /><br /> <span data-ttu-id="72597-218">PO_POAck.btm, PO_ShipmentOrderRequest.btm, ShipmentAdviceAck_PODeliveryReceipt.btm, ShipmentOrder_ShipmentAdvice.btm, Supplier.btproj, SupplierProcess.odx</span><span class="sxs-lookup"><span data-stu-id="72597-218">PO_POAck.btm, PO_ShipmentOrderRequest.btm, ShipmentAdviceAck_PODeliveryReceipt.btm, ShipmentOrder_ShipmentAdvice.btm, Supplier.btproj, SupplierProcess.odx</span></span>|<span data-ttu-id="72597-219">Projet, orchestration et mappages BizTalk qui permettent d'implémenter le fournisseur dans cet exemple.</span><span class="sxs-lookup"><span data-stu-id="72597-219">BizTalk project, orchestration, and maps used to implement the supplier in this sample.</span></span>|  
  
## <a name="building-and-initializing-this-sample"></a><span data-ttu-id="72597-220">Création et initialisation de cet exemple</span><span class="sxs-lookup"><span data-stu-id="72597-220">Building and Initializing This Sample</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="72597-221">Avant de générer et d'initialiser l'exemple, vous devez veiller à ce que l'hôte BizTalk de type In-Process par défaut soit configuré comme étant approuvé par authentification.</span><span class="sxs-lookup"><span data-stu-id="72597-221">Before you build and initialize this sample, you need to make sure that the default BizTalk In-Process Host is configured as Authentication Trusted.</span></span> <span data-ttu-id="72597-222">Pour plus d’informations, consultez [recommandations de sécurité de BizTalk Server Runtime](../core/biztalk-server-runtime-security-recommendations.md).</span><span class="sxs-lookup"><span data-stu-id="72597-222">For more information, see [BizTalk Server Runtime Security Recommendations](../core/biztalk-server-runtime-security-recommendations.md).</span></span>  
  
 <span data-ttu-id="72597-223">Le composant de pipeline MIME n'est pas pris en charge dans une instance d'hôte 64 bits.</span><span class="sxs-lookup"><span data-stu-id="72597-223">The MIME pipeline component is not supported in a 64-bit host instance.</span></span> <span data-ttu-id="72597-224">L'hôte associé au gestionnaire d'envoi et de réception pour l'adaptateur de FILE doit être configuré en tant qu'hôte 32 bits uniquement.</span><span class="sxs-lookup"><span data-stu-id="72597-224">The host associated with the send and receive handler for the file adapter must be configured as a 32-bit only host.</span></span> <span data-ttu-id="72597-225">Pour plus d’informations à ce sujet, consultez [comment modifier les propriétés de l’hôte](../core/how-to-modify-host-properties.md).</span><span class="sxs-lookup"><span data-stu-id="72597-225">For more information on this see [How to Modify Host Properties](../core/how-to-modify-host-properties.md).</span></span> <span data-ttu-id="72597-226">Si vous 32 bits seul un hôte est configuré sur le système et souhaitez l’utiliser, consultez [configuration de l’adaptateur de fichier](../core/configure-the-file-adapter.md) pour obtenir des instructions sur la configuration du ou des hôtes associés à l’adaptateur de fichier envoi et le Gestionnaire de réception.</span><span class="sxs-lookup"><span data-stu-id="72597-226">If you already have a 32-bit only host configured on the system, and want to use it, see [Configuring the File Adapter](../core/configure-the-file-adapter.md) for instructions on configuring the host(s) associated to the file adapter’s send and receive handler.</span></span>  
  
 <span data-ttu-id="72597-227">Le certificat mentionné dans cette section doit être ajouté au magasin personnel du compte de connexion configuré pour l'instance d'hôte BizTalk de type In-Process par défaut qui signera les messages.</span><span class="sxs-lookup"><span data-stu-id="72597-227">The certificate mentioned in this section must to be added to the Personal store of the Logon account configured for the default BizTalk In-Process host instance which will be signing messages.</span></span>  
  
 <span data-ttu-id="72597-228">Par défaut, le fichier setup.bat indiqué ci-dessous installera l'exemple PartyResolution dans l'application [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] par défaut.</span><span class="sxs-lookup"><span data-stu-id="72597-228">By default the setup.bat file mentioned below will install the Party Resolution sample into the default [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application.</span></span> <span data-ttu-id="72597-229">Vous pouvez modifier ce fichier de manière à déployer l'exemple dans une nouvelle application [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] en l'ouvrant et en remplaçant la section précédée par l'instruction `@ECHO Deploy Assemblies...` par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="72597-229">You can modify the setup.bat file to deploy the sample into a new [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application by opening the setup.bat file and replacing the section preceded by the statement `@ECHO Deploy Assemblies...` with the following:</span></span>  
  
```  
@ECHO Deploy Assemblies...  
  
btstask AddApp -ApplicationName:PartyResolutionSample -Description:"Party Resolution Orchestration sample from the SDK"  
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:Schemas\bin\Release\Schemas.dll -Options:GacOnAdd  
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:Pipeline\projectschema\bin\Release\ProjectSchema.dll -Options:GacOnAdd   
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:Buyer\bin\Release\Buyer.dll -Options:GacOnAdd  
btstask ImportBindings -ApplicationName:PartyResolutionSample -Source:%BuyerBindingFileName%  
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:ShipmentAgency1\bin\Release\ShipmentAgency1.dll -Options:GacOnAdd  
btstask ImportBindings -ApplicationName:PartyResolutionSample -Source:%ShipmentAgency1BindingFileName%  
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:ShipmentAgency2\bin\Release\ShipmentAgency2.dll -Options:GacOnAdd  
btstask ImportBindings -ApplicationName:PartyResolutionSample -Source:%ShipmentAgency2BindingFileName%  
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:Supplier\bin\Release\Supplier.dll -Options:GacOnAdd  
btstask ImportBindings -ApplicationName:PartyResolutionSample -Source:%SupplierBindingFileName%  
```  
  
#### <a name="to-build-and-initialize-the-partyresolution-sample"></a><span data-ttu-id="72597-230">Pour créer et initialiser l'exemple PartyResolution</span><span class="sxs-lookup"><span data-stu-id="72597-230">To build and initialize the PartyResolution sample</span></span>  
  
1.  <span data-ttu-id="72597-231">Dans une fenêtre de commande, accédez au dossier suivant :</span><span class="sxs-lookup"><span data-stu-id="72597-231">In a command window, navigate to the following folder:</span></span>  
  
     <span data-ttu-id="72597-232">\<*Exemples de chemin d’accès*> \Orchestrations\PartyResolution</span><span class="sxs-lookup"><span data-stu-id="72597-232">\<*Samples Path*>\Orchestrations\PartyResolution</span></span>  
  
2.  <span data-ttu-id="72597-233">Exécutez le fichier Setup.bat, qui effectue les actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="72597-233">Run the file Setup.bat, which performs the following actions:</span></span>  
  
    -   <span data-ttu-id="72597-234">Compilation des projets de [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] pour cet exemple, puis déploiement des assemblys qui en résultent.</span><span class="sxs-lookup"><span data-stu-id="72597-234">Compiles the [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] projects for this sample, and deploys the resulting assemblies.</span></span>  
  
    -   <span data-ttu-id="72597-235">Crée et lie les ports d'envoi et de réception de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="72597-235">Creates and binds the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] send and receive ports.</span></span>  
  
         <span data-ttu-id="72597-236">Au cours de l'installation, vous pouvez recevoir les avertissements suivants ou des avertissements similaires.</span><span class="sxs-lookup"><span data-stu-id="72597-236">You may receive the following or similar warnings during the setup process.</span></span> <span data-ttu-id="72597-237">Vous pouvez les ignorer en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="72597-237">You can safely ignore them.</span></span>  
  
        ```  
        "C:\Program Files\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\PartyResolution.sln" (Buildtarget) (1) ->  
        "C:\Program Files\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\Supplier.btproj" (default target) (5) ->  
        "C:\Program Files\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\Supplier.btproj" (default target) (5:2) ->  
        (CompileODX target) ->  
          C:\Program Files\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\SupplierProcess.odx(831,13): warning X4014: convoy processing will not occur -- check your protocol if you were expecting it [C:\ProgramFiles\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\Supplier.btproj]  
          C:\Program Files\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\SupplierProcess.odx(841,13): warning X4014: convoy processing will not occur -- check your protocol if you were expecting it [C:\ProgramFiles\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\Supplier.btproj]  
  
        ```  
  
3.  <span data-ttu-id="72597-238">Démarrer **invite de commandes Visual Studio**.</span><span class="sxs-lookup"><span data-stu-id="72597-238">Start **Visual Studio Command Prompt**.</span></span>  
  
4.  <span data-ttu-id="72597-239">Tapez les commandes suivantes pour installer les assemblys dans le Global Assembly Cache :</span><span class="sxs-lookup"><span data-stu-id="72597-239">Type the following commands to install the assemblies to the global assembly cache:</span></span>  
  
    -   <span data-ttu-id="72597-240">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Schemas\bin\Release\schemas.dll</span><span class="sxs-lookup"><span data-stu-id="72597-240">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Schemas\bin\Release\schemas.dll</span></span>  
  
    -   <span data-ttu-id="72597-241">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Pipeline\projectschema\bin\Release\ProjectSchema.dll</span><span class="sxs-lookup"><span data-stu-id="72597-241">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Pipeline\projectschema\bin\Release\ProjectSchema.dll</span></span>  
  
    -   <span data-ttu-id="72597-242">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Buyer\bin\Release\Buyer.dll</span><span class="sxs-lookup"><span data-stu-id="72597-242">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Buyer\bin\Release\Buyer.dll</span></span>  
  
    -   <span data-ttu-id="72597-243">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\ShipmentAgency1\bin\Release\ShipmentAgency1.dll</span><span class="sxs-lookup"><span data-stu-id="72597-243">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\ShipmentAgency1\bin\Release\ShipmentAgency1.dll</span></span>  
  
    -   <span data-ttu-id="72597-244">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\ShipmentAgency2\bin\Release\ShipmentAgency2.dll</span><span class="sxs-lookup"><span data-stu-id="72597-244">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\ShipmentAgency2\bin\Release\ShipmentAgency2.dll</span></span>  
  
    -   <span data-ttu-id="72597-245">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Supplier\bin\Release\Supplier.dll</span><span class="sxs-lookup"><span data-stu-id="72597-245">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Supplier\bin\Release\Supplier.dll</span></span>  
  
5.  <span data-ttu-id="72597-246">Obtenez un certificat de messagerie sécurisé auprès d'une autorité de certification</span><span class="sxs-lookup"><span data-stu-id="72597-246">Obtain a secured e-mail certificate from a certificate authority (CA).</span></span> <span data-ttu-id="72597-247">(autorité tierce ou autorité de votre organisation).</span><span class="sxs-lookup"><span data-stu-id="72597-247">The CA could be a third-party authority or the authority within your organization.</span></span> <span data-ttu-id="72597-248">Une fois le certificat obtenu, exportez les clés publique et privée.</span><span class="sxs-lookup"><span data-stu-id="72597-248">After you obtain the certificate, export the public key and private key.</span></span>  
  
6.  <span data-ttu-id="72597-249">Pour importer la clé privée dans le magasin personnel du compte de connexion de l'instance d'hôte et la clé publique dans le magasin Autres personnes de l'ordinateur local, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="72597-249">To import the private key to the Personal store of the Host instance logon account and the public key to the Local Computer Other People store, do the following:</span></span>  
  
    1.  <span data-ttu-id="72597-250">Dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Console d’Administration, développez le groupe BizTalk, puis **paramètres de plateforme**.</span><span class="sxs-lookup"><span data-stu-id="72597-250">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, expand the BizTalk Group, and then expand **Platform Settings**.</span></span>  
  
    2.  <span data-ttu-id="72597-251">Cliquez sur **Instances d’hôte** et recherchez le compte d’ouverture de session pour l’instance d’hôte In-Process par défaut.</span><span class="sxs-lookup"><span data-stu-id="72597-251">Click on **Host Instances** and find the Logon account shown for the default In-Process host instance.</span></span> <span data-ttu-id="72597-252">Dans une installation par défaut, l'hôte de type In-Process par défaut doit être nommé BizTalkServerApplication.</span><span class="sxs-lookup"><span data-stu-id="72597-252">In a default installation the default In-Process host should be named BizTalkServerApplication.</span></span>  
  
    3.  <span data-ttu-id="72597-253">Cliquez sur **Démarrer**, puis sur **Exécuter**.</span><span class="sxs-lookup"><span data-stu-id="72597-253">Click **Start**, and then click **Run**.</span></span> <span data-ttu-id="72597-254">Dans le **exécuter** , tapez **mmc.exe**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="72597-254">In the **Run** box, type **mmc.exe**, and then click **OK**.</span></span> <span data-ttu-id="72597-255">Entrez le mot de passe correct du compte de connexion de l'instance d'hôte pour ouvrir la console MMC (Microsoft Management Console) sous ce compte.</span><span class="sxs-lookup"><span data-stu-id="72597-255">Enter the correct password for the host instance logon account to open the Microsoft Management Console (MMC) under that account.</span></span>  
  
    4.  <span data-ttu-id="72597-256">Dans le menu **Fichier** , cliquez sur **Ajouter/Supprimer un composant logiciel enfichable**.</span><span class="sxs-lookup"><span data-stu-id="72597-256">On the **File** menu, click **Add/Remove Snap-in**.</span></span>  
  
    5.  <span data-ttu-id="72597-257">Dans le **ajouter ou supprimer des composants logiciel enfichables** boîte de dialogue, sélectionnez **certificats**, puis cliquez sur **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="72597-257">In the **Add or Remove Snap-ins** dialog box, select **Certificates**, and then click **Add**.</span></span>  
  
    6.  <span data-ttu-id="72597-258">Dans le **enfichable Certificats** boîte de dialogue, sélectionnez **mon compte d’utilisateur**, puis cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="72597-258">In the **Certificates snap-in** dialog box, select **My user account**, and then click **Finish**.</span></span>  
  
    7.  <span data-ttu-id="72597-259">Dans le **ajouter ou supprimer des composants logiciel enfichables** boîte de dialogue, sélectionnez **certificats**, puis cliquez sur **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="72597-259">In the **Add or Remove Snap-ins** dialog box, select **Certificates**, and then click **Add**.</span></span>  
  
    8.  <span data-ttu-id="72597-260">Dans le **enfichable Certificats** boîte de dialogue, sélectionnez **compte d’ordinateur**, puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="72597-260">In the **Certificates snap-in** dialog box, select **Computer account**, and then click **Next**.</span></span>  
  
    9. <span data-ttu-id="72597-261">Dans le **sélectionner un ordinateur** boîte de dialogue, sélectionnez **ordinateur Local**, puis cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="72597-261">In the **Select Computer** dialog box, select **Local computer**, and then click **Finish**.</span></span>  
  
    10. <span data-ttu-id="72597-262">Dans le **ajouter ou supprimer des composants logiciel enfichables** boîte de dialogue, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="72597-262">In the **Add or Remove Snap-ins** dialog box, click **OK**.</span></span>  
  
    11. <span data-ttu-id="72597-263">Développez le **certificats - utilisateur actuel** nœud, puis **personnel**.</span><span class="sxs-lookup"><span data-stu-id="72597-263">Expand the **Certificates - Current User** node and then expand **Personal**.</span></span> <span data-ttu-id="72597-264">Avec le bouton droit **certificats**, cliquez sur **toutes les tâches**, puis cliquez sur **importation**.</span><span class="sxs-lookup"><span data-stu-id="72597-264">Right-click **Certificates**, click **All Tasks**, and then click **Import**.</span></span>  
  
    12. <span data-ttu-id="72597-265">Importez la clé privée et indiquez un mot de passe dans l'Assistant.</span><span class="sxs-lookup"><span data-stu-id="72597-265">Import the private key and provide a password in the wizard.</span></span>  
  
    13. <span data-ttu-id="72597-266">Développez le **certificats (ordinateur Local)** nœud, puis **autres personnes**.</span><span class="sxs-lookup"><span data-stu-id="72597-266">Expand the **Certificates (Local Computer)** node and then expand **Other People**.</span></span> <span data-ttu-id="72597-267">Avec le bouton droit **certificats**, cliquez sur **toutes les tâches**, puis cliquez sur **importation**.</span><span class="sxs-lookup"><span data-stu-id="72597-267">Right-click **Certificates**, click **All Tasks**, and then click **Import**.</span></span>  
  
    14. <span data-ttu-id="72597-268">Importez la clé publique.</span><span class="sxs-lookup"><span data-stu-id="72597-268">Import the public key.</span></span>  
  
7.  <span data-ttu-id="72597-269">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, avec le bouton droit le **groupe BizTalk** nœud, puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="72597-269">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click the **BizTalk Group** node and then click **Properties**.</span></span> <span data-ttu-id="72597-270">Dans le **groupe BizTalk - propriétés du groupe** boîte de dialogue, sélectionnez **certificat**.</span><span class="sxs-lookup"><span data-stu-id="72597-270">In the **BizTalk Group - Group Properties** dialog box, select **Certificate**.</span></span>  
  
8.  <span data-ttu-id="72597-271">Dans le **certificat** boîte de dialogue, cliquez sur **Parcourir** et sélectionnez la clé privée que vous venez d’importer.</span><span class="sxs-lookup"><span data-stu-id="72597-271">In the **Certificate** dialog box, click **Browse** and select the private key you just imported.</span></span> <span data-ttu-id="72597-272">Le certificat spécifié ici permet de signer le message sortant.</span><span class="sxs-lookup"><span data-stu-id="72597-272">The certificate specified here is used to sign the outbound message.</span></span> <span data-ttu-id="72597-273">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="72597-273">Click **OK**.</span></span>  
  
9. <span data-ttu-id="72597-274">Pour mettre à jour le tiers BuyerAgency dans cet exemple, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="72597-274">To update the BuyerAgency party in this sample do the following:</span></span>  
  
    1.  <span data-ttu-id="72597-275">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, sélectionnez **Parties**.</span><span class="sxs-lookup"><span data-stu-id="72597-275">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, select **Parties**.</span></span>  
  
    2.  <span data-ttu-id="72597-276">Avec le bouton droit **BuyerAgency** puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="72597-276">Right-click **BuyerAgency** and then click **Properties**.</span></span> <span data-ttu-id="72597-277">Dans le **BuyerAgency - propriétés de tiers** boîte de dialogue, sélectionnez **général**.</span><span class="sxs-lookup"><span data-stu-id="72597-277">In the **BuyerAgency - Party Properties** dialog box, select **General**.</span></span>  
  
    3.  <span data-ttu-id="72597-278">Sous le **alias** section de la boîte de dialogue Ajouter un nouvel alias avec le nom et un jeu de qualificatifs sur **WindowsUser**.</span><span class="sxs-lookup"><span data-stu-id="72597-278">Under the **Aliases** section of the dialog, add a new alias with the name and qualifier set to **WindowsUser**.</span></span> <span data-ttu-id="72597-279">Définissez la valeur sur un nom d’utilisateur au format de \<domaine\nom d’utilisateur > (par exemple, domaine\utilisateur).</span><span class="sxs-lookup"><span data-stu-id="72597-279">Set the Value to a user name in format of \<domain\user name> (e.g. SOMEDOMAIN\someuser).</span></span>  
  
    4.  <span data-ttu-id="72597-280">Sélectionnez **certificat** puis cliquez sur **Parcourir** et sélectionnez la clé publique que vous venez d’importer.</span><span class="sxs-lookup"><span data-stu-id="72597-280">Select **Certificate** and then click **Browse** and select the public key you just imported.</span></span> <span data-ttu-id="72597-281">Le certificat spécifié ici permet de valider l'identité de l'expéditeur du message entrant.</span><span class="sxs-lookup"><span data-stu-id="72597-281">The certificate specified here is used to validate the sender identity of the inbound message.</span></span> <span data-ttu-id="72597-282">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="72597-282">Click **OK**.</span></span>  
  
10. <span data-ttu-id="72597-283">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **paramètres de plateforme**, puis sélectionnez **hôtes**.</span><span class="sxs-lookup"><span data-stu-id="72597-283">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, and then select **Hosts**.</span></span>  
  
11. <span data-ttu-id="72597-284">Avec le bouton droit **BizTalkServerApplication** puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="72597-284">Right-click **BizTalkServerApplication** and then click **Properties**.</span></span> <span data-ttu-id="72597-285">Dans le **BizTalkServerApplication - propriétés de l’hôte** boîte de dialogue, sélectionnez **certificats**.</span><span class="sxs-lookup"><span data-stu-id="72597-285">In the **BizTalkServerApplication - Host Properties** dialog box, select **Certificates**.</span></span>  
  
12. <span data-ttu-id="72597-286">Cliquez sur **Parcourir** et sélectionnez la clé privée que vous venez d’importer.</span><span class="sxs-lookup"><span data-stu-id="72597-286">Click **Browse** and select the private key you just imported.</span></span> <span data-ttu-id="72597-287">Le certificat spécifié ici permet de déchiffrer les messages entrants.</span><span class="sxs-lookup"><span data-stu-id="72597-287">The certificate specified here is used to decrypt the inbound messages.</span></span> <span data-ttu-id="72597-288">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="72597-288">Click **OK**.</span></span>  
  
13. <span data-ttu-id="72597-289">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **paramètres de plateforme**, puis sélectionnez **Instances d’hôte**.</span><span class="sxs-lookup"><span data-stu-id="72597-289">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, and then select **Host Instances**.</span></span>  
  
14. <span data-ttu-id="72597-290">Avec le bouton droit **BizTalkServerApplication** puis cliquez sur **redémarrer**.</span><span class="sxs-lookup"><span data-stu-id="72597-290">Right-click **BizTalkServerApplication** and then click **Restart**.</span></span>  
  
## <a name="running-this-sample"></a><span data-ttu-id="72597-291">Cet exemple en cours d’exécution</span><span class="sxs-lookup"><span data-stu-id="72597-291">Running This Sample</span></span>  
  
#### <a name="to-run-the-partyresolution-sample"></a><span data-ttu-id="72597-292">Pour exécuter l'exemple PartyResolution</span><span class="sxs-lookup"><span data-stu-id="72597-292">To run the PartyResolution sample</span></span>  
  
1.  <span data-ttu-id="72597-293">Exécutez FilePolling.exe à partir du dossier suivant :</span><span class="sxs-lookup"><span data-stu-id="72597-293">Run FilePolling.exe from the following folder:</span></span>  
  
     <span data-ttu-id="72597-294">*\<Exemples de chemin d’accès >*\Orchestrations\PartyResolution\FilePolling\bin\Debug</span><span class="sxs-lookup"><span data-stu-id="72597-294">*\<Samples Path>*\Orchestrations\PartyResolution\FilePolling\bin\Debug</span></span>  
  
2.  <span data-ttu-id="72597-295">Cliquez sur **d’interrogation de démarrer**.</span><span class="sxs-lookup"><span data-stu-id="72597-295">Click **Start polling**.</span></span>  
  
3.  <span data-ttu-id="72597-296">Collez une copie du fichier d'instance de bon de commande fourni, PurchaseOrder.xml, dans le dossier suivant :</span><span class="sxs-lookup"><span data-stu-id="72597-296">Paste a copy of the provided PO instance file, PurchaseOrder.xml, in the following folder:</span></span>  
  
     <span data-ttu-id="72597-297">*\<Exemples de chemin d’accès >*\Orchestrations\PartyResolution\FileDrop\PurchaseOrder</span><span class="sxs-lookup"><span data-stu-id="72597-297">*\<Samples Path>*\Orchestrations\PartyResolution\FileDrop\PurchaseOrder</span></span>  
  
4.  <span data-ttu-id="72597-298">Observez la séquence de messages fournis sous forme de MessageBoxes qui vous informent de la progression de l'exemple :</span><span class="sxs-lookup"><span data-stu-id="72597-298">Observe the sequence of messages that are provided in the form of message boxes that keep you informed about the progress of the sample:</span></span>  
  
    1.  <span data-ttu-id="72597-299">Lorsque le fournisseur reçoit le bon de commande de l'acheteur.</span><span class="sxs-lookup"><span data-stu-id="72597-299">When the supplier receives the PO from the buyer.</span></span>  
  
    2.  <span data-ttu-id="72597-300">Lorsqu'une demande d'ordre de livraison est reçue de l'agence d'expédition 1 ou 2.</span><span class="sxs-lookup"><span data-stu-id="72597-300">When a shipment order request is received from shipment agency 1 or 2.</span></span>  
  
    3.  <span data-ttu-id="72597-301">Lorsqu'un avis d'expédition est reçu par l'agence d'expédition 1 ou 2.</span><span class="sxs-lookup"><span data-stu-id="72597-301">When a shipment advice is received by shipment agency 1 or 2.</span></span>  
  
    4.  <span data-ttu-id="72597-302">Lorsque le fournisseur envoie l'accusé de réception du bon de commande à l'acheteur.</span><span class="sxs-lookup"><span data-stu-id="72597-302">When the supplier sends the PO delivery receipt to the buyer.</span></span>  
  
5.  <span data-ttu-id="72597-303">Cliquez sur **Exit** pour fermer le programme interrogation de fichiers.</span><span class="sxs-lookup"><span data-stu-id="72597-303">Click **Exit** to close the File Polling program.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="72597-304">Modifiez la balise Pays dans PurchaseOrder.xml sur « FR », puis répétez les étapes 2 et 3.</span><span class="sxs-lookup"><span data-stu-id="72597-304">You can edit the Country tag in PurchaseOrder.xml to "US" and then repeat step 2 and step 3.</span></span> <span data-ttu-id="72597-305">Vous noterez que l'ordre de livraison est désormais envoyé à l'agence d'expédition 2.</span><span class="sxs-lookup"><span data-stu-id="72597-305">Observe that the shipment order is now sent to shipment agency 2.</span></span>  
  
## <a name="uninstalling-this-sample"></a><span data-ttu-id="72597-306">Désinstallation de l'exemple</span><span class="sxs-lookup"><span data-stu-id="72597-306">Uninstalling This Sample</span></span>  
  
#### <a name="to-uninstall-the-partyresolution-sample"></a><span data-ttu-id="72597-307">Pour désinstaller l'exemple PartyResolution</span><span class="sxs-lookup"><span data-stu-id="72597-307">To uninstall the PartyResolution sample</span></span>  
  
1.  <span data-ttu-id="72597-308">À un [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] invite de commandes, accédez au répertoire (**cd**) à \< *exemples de chemin*> \Orchestrations\ PartyResolution\\.</span><span class="sxs-lookup"><span data-stu-id="72597-308">At a [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] command prompt, change directory (**cd**) to \<*Samples Path*>\Orchestrations\ PartyResolution\\.</span></span>  
  
2.  <span data-ttu-id="72597-309">Exécutez Cleanup.bat.</span><span class="sxs-lookup"><span data-stu-id="72597-309">Run Cleanup.bat.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="72597-310">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="72597-310">See Also</span></span>  
 <span data-ttu-id="72597-311">[Composant de Pipeline résolution du tiers](../core/party-resolution-pipeline-component.md) </span><span class="sxs-lookup"><span data-stu-id="72597-311">[Party Resolution Pipeline Component](../core/party-resolution-pipeline-component.md) </span></span>  
 <span data-ttu-id="72597-312">[Comment configurer le composant de Pipeline encodeur MIME-SMIME](../core/how-to-configure-the-mime-smime-encoder-pipeline-component.md) </span><span class="sxs-lookup"><span data-stu-id="72597-312">[How to Configure the MIME-SMIME Encoder Pipeline Component](../core/how-to-configure-the-mime-smime-encoder-pipeline-component.md) </span></span>  
 <span data-ttu-id="72597-313">[Comment configurer le composant de Pipeline décodeur MIME-SMIME](../core/how-to-configure-the-mime-smime-decoder-pipeline-component.md) </span><span class="sxs-lookup"><span data-stu-id="72597-313">[How to Configure the MIME-SMIME Decoder Pipeline Component](../core/how-to-configure-the-mime-smime-decoder-pipeline-component.md) </span></span>  
 [<span data-ttu-id="72597-314">Orchestrations (dossier d’exemples BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="72597-314">Orchestrations (BizTalk Server Samples Folder)</span></span>](../core/orchestrations-biztalk-server-samples-folder.md)