---
title: "Adaptateur d’envoi HTTP | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: e69308b4-421f-4d7c-b9bb-ee086df03272
caps.latest.revision: "24"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ce8bfdfd380fac422f79ba175ae075a94f313dec
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="http-send-adapter"></a><span data-ttu-id="cf2d6-102">Adaptateur d’envoi HTTP</span><span class="sxs-lookup"><span data-stu-id="cf2d6-102">HTTP Send Adapter</span></span>
<span data-ttu-id="cf2d6-103">L'adaptateur d'envoi HTTP obtient des messages de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] et les envoie à une URL de destination via une requête HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-103">The HTTP send adapter gets messages from [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and sends them to a destination URL on an HTTP POST request.</span></span> <span data-ttu-id="cf2d6-104">L'adaptateur d'envoi HTTP obtient le contenu du message du corps de l'objet de message BizTalk.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-104">The HTTP send adapter gets the message content from the body part of the BizTalk Message object.</span></span> <span data-ttu-id="cf2d6-105">L'adaptateur d'envoi HTTP ignore toutes les autres parties de l'objet de message BizTalk.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-105">The HTTP send adapter ignores all other parts of the BizTalk Message object.</span></span>  
  
 <span data-ttu-id="cf2d6-106">Une fois que l'adaptateur a envoyé le message à une URL de destination et que le moteur de messagerie BizTalk a reçu le code d'état de réussite HTTP, l'adaptateur d'envoi HTTP supprime le message de la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-106">After the adapter sends the message to a destination URL and the BizTalk Messaging Engine receives the HTTP success status code, the HTTP send adapter deletes the message from the MessageBox database.</span></span>  
  
 <span data-ttu-id="cf2d6-107">La redirection des messages HTTP est prise en charge et peut être configurée sur le port d'envoi.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-107">Redirection of HTTP messages is supported and can be configured on the send port.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="cf2d6-108"> héberge l'adaptateur d'envoi HTTP comme une application BizTalk native.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-108"> hosts the HTTP send adapter as a native BizTalk application.</span></span> <span data-ttu-id="cf2d6-109">Il prend en charge l'envoi unidirectionnel de messages ainsi qu'une transmission de type sollicitation-réponse.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-109">It supports one-way sending of messages as well a solicit-response transmission.</span></span> <span data-ttu-id="cf2d6-110">L'emplacement d'envoi de l'adaptateur d'envoi HTTP est une URL distincte que vous configurez par le biais du port d'envoi.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-110">The send location for the HTTP send adapter is a distinct URL that you configure through the send port.</span></span> <span data-ttu-id="cf2d6-111">Cette URL unique peut inclure des chaînes de requête ajoutées à l'URL de base.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-111">This unique URL can include query strings appended to the base URL.</span></span>  
  
## <a name="batching-support-for-the-http-send-adapter"></a><span data-ttu-id="cf2d6-112">Prise en charge du traitement par lot pour l'adaptateur d'envoi HTTP</span><span class="sxs-lookup"><span data-stu-id="cf2d6-112">Batching Support for the HTTP Send Adapter</span></span>  
 <span data-ttu-id="cf2d6-113">L'adaptateur d'envoi HTTP ne prend pas en charge les opérations de traitement par lot.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-113">The HTTP send adapter does not support batching operations.</span></span>  
  
## <a name="chunked-encoding-support-for-the-http-send-adapter"></a><span data-ttu-id="cf2d6-114">Prise en charge du codage mémorisé en bloc pour l'adaptateur d'envoi HTTP</span><span class="sxs-lookup"><span data-stu-id="cf2d6-114">Chunked Encoding Support for the HTTP Send Adapter</span></span>  
 <span data-ttu-id="cf2d6-115">Si le **activer le codage segmenté** option de configuration est activée, puis l’adaptateur d’envoi HTTP envoie des messages de demande à l’aide du codage mémorisé en bloc si la taille de la demande dépasse 8 Ko.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-115">If the **Enable chunked encoding** configuration option is enabled, then the HTTP send adapter sends request messages using chunked encoding if the request size exceeds 8 KB.</span></span> <span data-ttu-id="cf2d6-116">Si le serveur proxy HTTP est utilisé, l'adaptateur d'envoi HTTP n'utilise pas le codage mémorisé en bloc et organise toujours les données avant leur envoi.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-116">If the HTTP proxy server is used, the HTTP send adapter does not use chunked encoding and always stages the data before sending.</span></span> <span data-ttu-id="cf2d6-117">Le **activer le codage segmenté** option de configuration est activée par défaut.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-117">The **Enable chunked encoding** configuration option is enabled by default.</span></span>  
  
 <span data-ttu-id="cf2d6-118">Lorsque l'adaptateur d'envoi reçoit un message de réponse, il peut accepter les messages à corps codé mémorisé en bloc.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-118">When the send adapter receives a response message, it can accept response messages with a chunked encoded body part.</span></span>  
  
## <a name="client-authentication-for-the-http-send-adapter"></a><span data-ttu-id="cf2d6-119">Authentification du client pour l'adaptateur d'envoi HTTP</span><span class="sxs-lookup"><span data-stu-id="cf2d6-119">Client Authentication for the HTTP Send Adapter</span></span>  
 <span data-ttu-id="cf2d6-120">L'adaptateur d'envoi HTTP s'authentifie auprès du serveur de destination à l'aide de l'un des types d'authentification suivants :</span><span class="sxs-lookup"><span data-stu-id="cf2d6-120">The HTTP send adapter authenticates with the destination server by using one of the following authentication types:</span></span>  
  
-   <span data-ttu-id="cf2d6-121">**Anonyme.**</span><span class="sxs-lookup"><span data-stu-id="cf2d6-121">**Anonymous.**</span></span> <span data-ttu-id="cf2d6-122">L'adaptateur HTTP n'envoie pas d'informations d'identification lors de la connexion au serveur de destination.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-122">The HTTP adapter does not send any credentials when connecting to the destination server.</span></span> <span data-ttu-id="cf2d6-123">Si le serveur de destination autorise l'authentification anonyme, les informations d'identification du compte anonyme configuré sur le serveur de destination sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-123">If the destination server permits anonymous authentication then the credentials of the configured anonymous account on the destination server are used.</span></span>  
  
-   <span data-ttu-id="cf2d6-124">**De base.**</span><span class="sxs-lookup"><span data-stu-id="cf2d6-124">**Basic.**</span></span> <span data-ttu-id="cf2d6-125">L'adaptateur HTTP envoie le nom d'utilisateur et le mot de passe via une connexion HTTP, en texte clair.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-125">The HTTP adapter sends the user name and password over an HTTP connection in plain text.</span></span>  
  
-   <span data-ttu-id="cf2d6-126">**Digest.**</span><span class="sxs-lookup"><span data-stu-id="cf2d6-126">**Digest.**</span></span> <span data-ttu-id="cf2d6-127">L'adaptateur HTTP envoie des mots de passe dans un format chiffré via la connexion HTTP.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-127">The HTTP adapter sends passwords in an encrypted format over the HTTP connection.</span></span>  
  
-   <span data-ttu-id="cf2d6-128">**Kerberos.**</span><span class="sxs-lookup"><span data-stu-id="cf2d6-128">**Kerberos.**</span></span> <span data-ttu-id="cf2d6-129">Ni le nom d'utilisateur ni le mot de passe n'est envoyé via une connexion HTTP.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-129">Neither the user name nor the password is sent over an HTTP connection.</span></span> <span data-ttu-id="cf2d6-130">L'adaptateur HTTP utilise les informations d'identification du processus sous lequel l'adaptateur d'envoi HTTP s'exécute pour ce type d'authentification.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-130">The HTTP adapter uses the credentials of the process under which the HTTP send adapter runs for this authentication type.</span></span>  
  
 <span data-ttu-id="cf2d6-131">En outre, l'adaptateur d'envoi HTTP peut fournir un certificat SSL (Secure Sockets Layer) au serveur Web si le serveur le demande ou l'accepte.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-131">Additionally, the HTTP send adapter can provide a client Secure Sockets Layer (SSL) certificate to the Web server if the server requires or accepts it.</span></span>  
  
## <a name="client-certificates-for-the-http-send-adapter"></a><span data-ttu-id="cf2d6-132">Certificats clients pour l'adaptateur d'envoi HTTP</span><span class="sxs-lookup"><span data-stu-id="cf2d6-132">Client Certificates for the HTTP Send Adapter</span></span>  
 <span data-ttu-id="cf2d6-133">L'adaptateur d'envoi HTTP peut établir une connexion sécurisée avec les serveurs qui acceptent ou demandent des certificats clients.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-133">The HTTP send adapter can establish a secure connection with servers that accept or require client certificates.</span></span> <span data-ttu-id="cf2d6-134">Si un certificat client est spécifié, l'adaptateur d'envoi HTTP utilise le certificat lors de la connexion aux serveurs qui demandent ou acceptent des certificats clients.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-134">If a client certificate is specified, the HTTP send adapter uses the certificate when connecting with servers that require or accept client certificates.</span></span> <span data-ttu-id="cf2d6-135">Si le certificat client n'est pas spécifié et que le serveur de destination demande des certificats clients, l'adaptateur d'envoi HTTP ne peut pas envoyer le message et suit la logique standard pour les nouvelles tentatives.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-135">If the client certificate is not specified and the destination server requires client certificates, the HTTP send adapter fails to send the message and follows the standard retry logic.</span></span>  
  
 <span data-ttu-id="cf2d6-136">L'adaptateur d'envoi HTTP utilise le certificat client du magasin Personnel du compte sous lequel le processus [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] est exécuté.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-136">The HTTP send adapter uses the client certificate from the personal store of the account under which the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process is running.</span></span> <span data-ttu-id="cf2d6-137">Le certificat est spécifié par son empreinte.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-137">The certificate is specified by its thumbprint.</span></span> <span data-ttu-id="cf2d6-138">Si l'adaptateur d'envoi HTTP ne peut pas charger le certificat pour une raison quelconque, le message envoyé est interrompu.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-138">If the HTTP send adapter fails to load the certificate for any reason, the message that it was sending is suspended.</span></span>  
  
## <a name="single-sign-on-support-for-the-http-adapter"></a><span data-ttu-id="cf2d6-139">Prise en charge de l'authentification unique pour l'adaptateur HTTP</span><span class="sxs-lookup"><span data-stu-id="cf2d6-139">Single Sign-On Support for the HTTP Adapter</span></span>  
 <span data-ttu-id="cf2d6-140">Vous pouvez configurer l'utilisation de l'authentification unique de l'entreprise (SSO) pour un emplacement de réception ou un port d'envoi HTTP à l'aide de la console Administration de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-140">You can configure Enterprise Single Sign-On (SSO) for use with the HTTP receive location or send port by using BizTalk Administration console.</span></span> <span data-ttu-id="cf2d6-141">Cette rubrique décrit le fonctionnement de l'authentification unique avec l'adaptateur HTTP.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-141">This topic describes how SSO works with the HTTP adapter.</span></span>  
  
 <span data-ttu-id="cf2d6-142">**Emplacement de réception unique authentification prise en charge pour le protocole HTTP**</span><span class="sxs-lookup"><span data-stu-id="cf2d6-142">**Single Sign-On Support for the HTTP Receive Location**</span></span>  
  
 <span data-ttu-id="cf2d6-143">Lorsqu'une requête HTTP est reçue par Microsoft Internet Information Services (IIS) à partir d'un client Web, IIS authentifie l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-143">When an HTTP request is received by Microsoft Internet Information Services (IIS) from a Web client, IIS authenticates the user.</span></span> <span data-ttu-id="cf2d6-144">L'extension ISAPI (Internet Server Application Programming Interface) se fait passer pour l'utilisateur Microsoft Windows, puis appelle le magasin d'informations d'identification SSO pour obtenir un ticket chiffré.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-144">The Internet Server Application Programming Interface (ISAPI) extension impersonates the Microsoft Windows user and then calls the SSO credential store to obtain an encrypted ticket.</span></span> <span data-ttu-id="cf2d6-145">Ce ticket est stocké en tant que le **SSOTicket** propriété dans le contexte du message.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-145">This ticket is stored as the **SSOTicket** property in the context of the message.</span></span>  
  
 <span data-ttu-id="cf2d6-146">Dans le scénario de transfert, le moteur de messagerie BizTalk dirige le message vers la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-146">In the pass-through scenario, the BizTalk Messaging Engine directs the message to the MessageBox database.</span></span> <span data-ttu-id="cf2d6-147">Lorsque l’adaptateur reçoit le message à partir de la base de données MessageBox, l’adaptateur HTTP appelle la **méthode ISSOTicket.RedeemTicket** avec le ticket chiffré, ainsi que le nom de l’application pour récupérer les informations d’identification du principal à partir de la Magasin de l’authentification unique.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-147">When the adapter receives the message from the MessageBox database, the HTTP adapter calls the **ISSOTicket.RedeemTicket Method** with the encrypted ticket along with the application name to retrieve the back-end credentials from the SSO store.</span></span> <span data-ttu-id="cf2d6-148">L'adaptateur HTTP utilise alors les informations d'identification externes pour se connecter au système principal et traiter la demande.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-148">The HTTP adapter then uses the external credentials to connect to the back-end system and process the request.</span></span> <span data-ttu-id="cf2d6-149">Pour plus d’informations sur les applications associées, consultez [Applications associées SSO](../core/sso-affiliate-applications.md).</span><span class="sxs-lookup"><span data-stu-id="cf2d6-149">For more information about the affiliate applications, see [SSO Affiliate Applications](../core/sso-affiliate-applications.md).</span></span>  
  
 <span data-ttu-id="cf2d6-150">Dans le cas où une orchestration appelle l'adaptateur, le moteur de messagerie BizTalk envoie ce message à la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-150">In the scenario where an orchestration invokes the adapter, the BizTalk Messaging Engine sends this message to the MessageBox database.</span></span> <span data-ttu-id="cf2d6-151">L’orchestration doit s’assurer à la fois le **SSOTicket** propriété de contexte et le **Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID** sont de la propriété de contexte du message qui contient le ticket conservée.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-151">The orchestration should ensure that both the **SSOTicket** context property and the **Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID** context property of the message that contains the ticket are maintained.</span></span> <span data-ttu-id="cf2d6-152">Lorsque l’adaptateur reçoit ce message à partir de la base de données MessageBox, il appelle **RedeemTicket** avec le ticket chiffré pour extraire les informations d’identification du principal à partir du magasin SSO.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-152">When the adapter receives this message from the MessageBox database, the adapter calls **RedeemTicket** with the encrypted ticket to retrieve the back-end credentials from the SSO store.</span></span> <span data-ttu-id="cf2d6-153">L'utilisateur concevant la planification doit copier spécifiquement cette propriété dans le message.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-153">The user designing the schedule should specifically copy this property to the message.</span></span>  
  
 <span data-ttu-id="cf2d6-154">**Seule l’authentification prise en charge pour les adaptateurs d’envoi HTTP**</span><span class="sxs-lookup"><span data-stu-id="cf2d6-154">**Single Sign-On Support for the HTTP Send Adapters**</span></span>  
  
 <span data-ttu-id="cf2d6-155">Si l’authentification unique est activée, lorsqu’un port d’envoi HTTP reçoit un message avec le **Secure** propriété, il appelle le serveur SSO pour valider et échanger le ticket pour une application associée.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-155">If SSO is enabled, when an HTTP send port receives a message with the **Secure** property, it calls the SSO server to validate and redeem the ticket for an affiliate application.</span></span> <span data-ttu-id="cf2d6-156">L'application d'administration, les administrateurs d'applications associées ou les administrateurs SSO de l'application associée peuvent appeler SSO pour échanger un ticket.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-156">The administration application, affiliate administrators, or SSO administrators for the affiliate application can call SSO to redeem a ticket.</span></span> <span data-ttu-id="cf2d6-157">SSO déchiffre alors le ticket et obtient les informations d'identification principales.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-157">SSO then decrypts the ticket and obtains the back-end credentials.</span></span> <span data-ttu-id="cf2d6-158">Les scénarios de transfert et d'orchestration sont les mêmes que pour le port d'envoi HTTP.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-158">The pass-through and orchestration scenario are the same as for the HTTP send port.</span></span>  
  
 <span data-ttu-id="cf2d6-159">Par défaut, SSO est désactivé pour le port d'envoi HTTP.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-159">By default, SSO is disabled for the HTTP send port.</span></span> <span data-ttu-id="cf2d6-160">Pour plus d’informations sur l’activation de l’authentification unique pour le port d’envoi HTTP, consultez [configuration d’un Port d’envoi HTTP](../core/configuring-an-http-send-port.md).</span><span class="sxs-lookup"><span data-stu-id="cf2d6-160">For more information about enabling SSO for the HTTP send port, see [Configuring an HTTP Send Port](../core/configuring-an-http-send-port.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="cf2d6-161">Vous pouvez utiliser l'authentification unique seulement avec l'authentification De base et Digest.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-161">You can only use Single Sign-On with basic and digest authentication.</span></span>  
  
 <span data-ttu-id="cf2d6-162">Pour implémenter correctement la prise en charge de l'authentification unique pour l'adaptateur d'envoi et de réception HTTP, les conditions suivantes doivent être remplies :</span><span class="sxs-lookup"><span data-stu-id="cf2d6-162">To correctly implement Single Sign On support for the HTTP receive and send adapter the following conditions must be met:</span></span>  
  
-   <span data-ttu-id="cf2d6-163">Le même compte d'utilisateur doit être spécifié dans les endroits suivants :</span><span class="sxs-lookup"><span data-stu-id="cf2d6-163">The same user account must be specified in the following places:</span></span>  
  
    -   <span data-ttu-id="cf2d6-164">L'identité de pool d'applications (IIS 7.0) ou l'identité de l'application COM+ hôte pour le répertoire virtuel IIS qui est surveillé par l'adaptateur de réception HTTP.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-164">The application pool identity (IIS 7.0) or hosting COM+ application identity for the IIS virtual directory that is monitored by the HTTP receive adapter.</span></span> <span data-ttu-id="cf2d6-165">Pour plus d’informations sur la configuration d’IIS pour HTTP des emplacements de réception, consultez [comment configurer les services IIS pour un emplacement de réception HTTP](../core/how-to-configure-iis-for-an-http-receive-location.md).</span><span class="sxs-lookup"><span data-stu-id="cf2d6-165">For more information about configuring IIS for HTTP receive locations, see [How to Configure IIS for an HTTP Receive Location](../core/how-to-configure-iis-for-an-http-receive-location.md).</span></span>  
  
    -   <span data-ttu-id="cf2d6-166">Les informations d'identification utilisées pour l'instance de l'hôte isolé dans laquelle l'adaptateur HTTP est exécuté.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-166">The logon credentials used for the isolated host instance that the HTTP adapter is running in.</span></span> <span data-ttu-id="cf2d6-167">Pour plus d’informations sur la façon de configurer les informations d’identification d’ouverture de session pour une instance d’hôte, consultez [comment modifier les propriétés d’Instance hôte](../core/how-to-modify-host-instance-properties.md).</span><span class="sxs-lookup"><span data-stu-id="cf2d6-167">For information about how to configure the logon credentials for a host instance, see [How to Modify Host Instance Properties](../core/how-to-modify-host-instance-properties.md).</span></span>  
  
-   <span data-ttu-id="cf2d6-168">L'hôte isolé que l'adaptateur HTTP utilise doit être configuré comme Approuvé par authentification.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-168">The isolated host that the HTTP adapter is using must be configured as Authentication Trusted.</span></span> <span data-ttu-id="cf2d6-169">Pour plus d’informations sur la façon de configurer un hôte comme approuvé par authentification, consultez [comment modifier les propriétés de l’hôte](../core/how-to-modify-host-properties.md).</span><span class="sxs-lookup"><span data-stu-id="cf2d6-169">For information about how to configure a host as Authentication Trusted, see [How to Modify Host Properties](../core/how-to-modify-host-properties.md).</span></span>  
  
## <a name="negative-acknowledgment-nack-messages-generated-for-failed-transmissions-by-the-http-or-soap-adapter"></a><span data-ttu-id="cf2d6-170">Messages d’accusé de réception négatif (NACK) générés pour les Transmissions échouées par l’adaptateur HTTP ou SOAP</span><span class="sxs-lookup"><span data-stu-id="cf2d6-170">Negative Acknowledgment (NACK) Messages Generated for Failed Transmissions by the HTTP or SOAP Adapter</span></span>  
 <span data-ttu-id="cf2d6-171">Lorsqu’un message est transmis avec succès, le moteur de messagerie BizTalk publie un message d’accusé de réception associé (ACK) vers la MessageBox si les notifications de remise sont activées.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-171">When a message is successfully transmitted, the BizTalk Messaging Engine publishes an associated acknowledgment (ACK) message to the MessageBox if delivery notifications are enabled.</span></span> <span data-ttu-id="cf2d6-172">De même, lorsqu'un message est interrompu par le moteur de messagerie BizTalk ou qu'une orchestration est interrompue par le moteur d'orchestration, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] publie un message d'accusé de réception négatif (NACK) associé dans la MessageBox.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-172">Likewise, when a message is suspended by the BizTalk Messaging Engine or an orchestration is suspended by the orchestration engine, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] publishes an associated negative acknowledgment (NACK) message to the MessageBox.</span></span> <span data-ttu-id="cf2d6-173">Le message d'accusé de réception négatif contient des propriétés de contexte et un corps de message qui consiste en une erreur SOAP.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-173">The NACK message contains context properties and a message body part that consists of a SOAP fault.</span></span> <span data-ttu-id="cf2d6-174">Si le message d'accusé de réception négatif est généré en raison de l'échec d'une transmission à partir de l'adaptateur HTTP ou SOAP, l'erreur SOAP contient l'élément En-têtes et l'élément Corps de la réponse du serveur Web de destination.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-174">If the NACK message is generated due to a failed transmission from the HTTP or SOAP adapter, the SOAP fault contains the Headers element and the Body element of the response from the destination Web server.</span></span> <span data-ttu-id="cf2d6-175">Voici un exemple d'erreur SOAP dans un accusé de réception négatif généré en raison de l'échec d'une transmission HTTP :</span><span class="sxs-lookup"><span data-stu-id="cf2d6-175">The following is an example of the SOAP fault in a NACK generated for a failed HTTP transmission:</span></span>  
  
```  
<SOAP:Envelope xmlns:SOAP="http://schemas.xmlsoap.org/soap/envelope/" SOAP:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">  
   <SOAP:Body>  
      <SOAP:Fault>  
         <faultcode>Microsoft BizTalk Server Negative Acknowledgment</faultcode>   
         <faultstring>An error occurred while processing the message, refer to the details section for more information</faultstring>   
         <faultactor>http://localhost/receivestandard.asp</faultactor>   
         <detail>  
            <ns0:NACK Type="NACK" xmlns:ns0="http://schema.microsoft.com/BizTalk/2003/NACKMessage.xsd">  
            <NAckID>{4E646707-03AA-4493-95C7-A64B09E2987D}</NAckID>  
            <ErrorCode>0x80131600</ErrorCode>  
            <ErrorCategory>0</ErrorCategory>  
            <ErrorDescription>The remote server returned an error: (404) Not Found.</ErrorDescription>  
            <ErrorDetail>  
            <HttpErrorDetail xmlns="http://schema.microsoft.com/BizTalk/2006/HttpErrorDetails.xsd">  
               <Headers>Server: Microsoft-IIS/5.1 Date: Wed, 21 Apr 2005 00:27:47 GMT X-Powered-By: ASP.NET Connection: close Content-Type: text/html Content-Length: 67 </Headers>  
               <Body>We could not locate the page you requested. Please check the URL.</Body>  
            </HttpErrorDetail>  
            </ErrorDetail>  
            </ns0:NACK>  
         </detail>  
      </SOAP:Fault>  
   </SOAP:Body>  
</SOAP:Envelope>  
```  
  
> [!NOTE]
>  <span data-ttu-id="cf2d6-176">L'élément En-têtes et l'élément Corps sont limités à 48 Ko.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-176">The Headers element and the Body element are limited to 48 KB.</span></span> <span data-ttu-id="cf2d6-177">L'élément En-têtes est arrondi à la paire en-tête-valeur complète la plus proche sans dépasser la limite.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-177">The Headers element is rounded to the nearest complete header value pair without exceeding the limit.</span></span> <span data-ttu-id="cf2d6-178">L'élément Corps est tronqué à 48 Ko.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-178">The Body element is truncated to 48 KB.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="cf2d6-179">Les messages NACK et ACK sont ignorés si aucun abonnement ne correspond pour eux.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-179">NACK and ACK messages are discarded if there are no matching subscriptions for them.</span></span> <span data-ttu-id="cf2d6-180">Ils ne sont pas interrompus par le moteur de messagerie BizTalk.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-180">NACK and ACK messages are not suspended by the BizTalk Messaging Engine.</span></span>  
  
 <span data-ttu-id="cf2d6-181">Pour vous abonner à un accusé de réception négatif, vous pouvez effectuer l'une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="cf2d6-181">To subscribe to a NACK message, you can do one of the following:</span></span>  
  
-   <span data-ttu-id="cf2d6-182">Créer un port d'envoi avec un filtre pour la propriété de contexte de message appropriée.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-182">Create a send port with a filter for the appropriate message context property.</span></span> <span data-ttu-id="cf2d6-183">Consultez **propriétés de contexte de Message** [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)] pour obtenir la liste des propriétés de contexte de message système, y compris ceux liés à accusé de réception de message.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-183">See **Message Context Properties** [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)] for a listing of system message context properties including those related to message acknowledgment.</span></span>  
  
-   <span data-ttu-id="cf2d6-184">Envoyer à partir d’un port d’orchestration marqué avec **accusé de réception = transmis**.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-184">Send from an orchestration port marked with **Delivery Notification = Transmitted**.</span></span> <span data-ttu-id="cf2d6-185">Si un port d’orchestration est marqué avec **accusé de réception = transmis**, l’orchestration attend jusqu'à ce qu’il reçoit un accusé de réception ou un accusé de réception négatif pour le message a été transmis.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-185">If an orchestration port is marked with **Delivery Notification = Transmitted**, the orchestration will wait until it receives either an ACK or a NACK for the message that was transmitted.</span></span> <span data-ttu-id="cf2d6-186">Si un accusé de réception négatif est généré, il est routé vers l'orchestration, qui génère une exception DeliveryFailureException.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-186">If a NACK is generated then it will be routed to the orchestration and the orchestration will throw a DeliveryFailureException.</span></span> <span data-ttu-id="cf2d6-187">DeliveryFailureException est désérialisée à partir de l'erreur SOAP contenue dans le corps du message d'accusé de réception négatif.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-187">The DeliveryFailureException is deserialized from the SOAP fault that is contained within the NACK message body.</span></span> <span data-ttu-id="cf2d6-188">Pour extraire la chaîne de message d'exception de l'erreur SOAP renvoyée à l'orchestration, convertissez DeliveryFailureException en SoapException, puis accédez à InnerXml depuis la section relative aux détails SOAP.</span><span class="sxs-lookup"><span data-stu-id="cf2d6-188">To retrieve the exception message string from the SOAP fault that is returned to the orchestration, cast the DeliveryFailureException to a SoapException and then access the InnerXml from the SOAP Detail section.</span></span> <span data-ttu-id="cf2d6-189">L'exemple de code suivant illustre comment procéder :</span><span class="sxs-lookup"><span data-stu-id="cf2d6-189">The following code sample demonstrates how to do this:</span></span>  
  
    ```  
    // Cast the DeliveryFailureException to a SoapException…  
    System.Web.Services.Protocols.SoapException se = (System.Web.Services.Protocols.SoapException)e.InnerException;  
    System.Diagnostics.Trace.WriteLine(se.Detail.InnerXml);  
    //e is an Microsoft.XLANGs.BaseTypes.DeliveryFailureException  
    //object type created in an Exception handler  
  
    ```  
  
     <span data-ttu-id="cf2d6-190">L'exemple de code précédent renvoie un fragment XML semblable à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="cf2d6-190">The code sample above will return an XML fragment similar to the following:</span></span>  
  
    ```  
    <ns0:NACK Type="NACK" xmlns:ns0="http://schema.microsoft.com/BizTalk/2003/NACKMessage.xsd">  
    <NAckID>{4E646707-03AA-4493-95C7-A64B09E2987D}</NAckID>  
    <ErrorCode>0x80131600</ErrorCode>  
    <ErrorCategory>0</ErrorCategory>  
    <ErrorDescription>The remote server returned an error: (404) Not Found.</ErrorDescription>  
    <ErrorDetail>  
    <HttpErrorDetail xmlns="http://schema.microsoft.com/BizTalk/2006/HttpErrorDetails.xsd">  
       <Headers>Server: Microsoft-IIS/5.1 Date: Wed, 21 Apr 2005 00:27:47 GMT X-Powered-By: ASP.NET Connection: close Content-Type: text/html Content-Length: 67 </Headers>  
       <Body>We could not locate the page you requested. Please check the URL.</Body>  
    </HttpErrorDetail>  
    </ErrorDetail>  
    </ns0:NACK>  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="cf2d6-191">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="cf2d6-191">See Also</span></span>  
 [<span data-ttu-id="cf2d6-192">Adaptateur HTTP</span><span class="sxs-lookup"><span data-stu-id="cf2d6-192">HTTP Adapter</span></span>](../core/http-adapter.md)  
<span data-ttu-id="cf2d6-193">**Objets COM de l’authentification unique**[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]</span><span class="sxs-lookup"><span data-stu-id="cf2d6-193">**SSO COM objects** [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]</span></span>