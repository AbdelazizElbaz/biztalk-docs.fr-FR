---
title: "À l’aide du routage de Message ayant échoué | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
f1_keywords: bts10.ops.tsroutingfailure
ms.assetid: d081934c-600e-44ce-8ba4-fb646d494589
caps.latest.revision: "33"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: af6d006aeebd5e2a5f8625a994c8a6f9b0cb6f6a
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="using-failed-message-routing"></a><span data-ttu-id="8212d-102">Utilisation du routage pour les messages ayant échoué</span><span class="sxs-lookup"><span data-stu-id="8212d-102">Using Failed Message Routing</span></span>
<span data-ttu-id="8212d-103">La fonctionnalité de gestion des erreurs permet au concepteur de désigner la gestion automatique des échecs relatifs à la messagerie comme une alternative au comportement traditionnel (par défaut désormais) qui consiste à placer les messages ayant échoué dans la file d'attente des messages interrompus.</span><span class="sxs-lookup"><span data-stu-id="8212d-103">The error-handling facility allows the designer to designate automated handling of messaging failures as an alternative to the traditional (now default) behavior of placing failed messages in the Suspended queue.</span></span> <span data-ttu-id="8212d-104">Cette gestion automatique achemine les messages d'erreur vers n'importe quelle destination de routage abonnée, telle qu'un port d'envoi ou une orchestration.</span><span class="sxs-lookup"><span data-stu-id="8212d-104">This automated handling routes an error message to any subscribing routing destination, such as a send port or orchestration.</span></span> <span data-ttu-id="8212d-105">Le message d'erreur est un clone du message d'origine. Les propriétés précédemment promues sont désormais toutes rétrogradées et les propriétés sélectionnées associées à l'échec spécifique de la messagerie sont promues vers le contexte de message.</span><span class="sxs-lookup"><span data-stu-id="8212d-105">The error message is a clone of the original message with all previously promoted properties now demoted and with selected properties related to the specific messaging failure promoted to the message context.</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="8212d-106">Les messages ayant échoué contiennent une copie du message d'origine.</span><span class="sxs-lookup"><span data-stu-id="8212d-106">Failed messages contain a copy of the original message.</span></span> <span data-ttu-id="8212d-107">Si le message d'origine contient des informations sensibles, concevez vos processus automatique et manuel de messages ayant échoué de manière à ce qu'une divulgation accidentelle soit évitée.</span><span class="sxs-lookup"><span data-stu-id="8212d-107">If the original message contains sensitive information, design your manual and automatic failed message processes so that they avoid accidental disclosure.</span></span>  
  
## <a name="what-does-failed-message-routing-consist-of"></a><span data-ttu-id="8212d-108">En quoi consiste le routage des messages ayant échoué ?</span><span class="sxs-lookup"><span data-stu-id="8212d-108">What Does Failed Message Routing Consist Of?</span></span>  
 <span data-ttu-id="8212d-109">Lorsque le routage des messages ayant échoué est activé, BizTalk Server achemine le message au lieu de le suspendre.</span><span class="sxs-lookup"><span data-stu-id="8212d-109">When failed message routing is enabled, BizTalk Server does not suspend the message—it routes the message instead.</span></span> <span data-ttu-id="8212d-110">Le routage des messages ayant échoué peut être activé sur les ports de réception et d'envoi, avec les résultats suivants :</span><span class="sxs-lookup"><span data-stu-id="8212d-110">Failed message routing can be enabled on both receive and send ports, with the following results:</span></span>  
  
-   <span data-ttu-id="8212d-111">Si le routage des messages ayant échoué est activé sur un port de réception et qu'un message échoue dans le pipeline de réception ou pendant le routage, un message ayant échoué est généré.</span><span class="sxs-lookup"><span data-stu-id="8212d-111">If failed message routing is enabled on a receive port and a message fails in the receive pipeline or in routing, a failed message is generated.</span></span> <span data-ttu-id="8212d-112">Dans le cas où une erreur se produit pendant ou avant la phase de désassemblage, le message d'erreur est un clone de l'échange d'origine.</span><span class="sxs-lookup"><span data-stu-id="8212d-112">In the case where an error occurs in or before the disassembly phase, the error message is a clone of the original interchange.</span></span>  
  
-   <span data-ttu-id="8212d-113">Si le routage des messages ayant échoué est activé sur un port d'envoi et que le message échoue dans le pipeline d'envoi, un message ayant échoué est généré.</span><span class="sxs-lookup"><span data-stu-id="8212d-113">If failed message routing is enabled on a send port and the message fails in the send pipeline, a failed message is generated.</span></span>  
  
 <span data-ttu-id="8212d-114">Lorsqu'un message ayant échoué est généré, BizTalk Server promeut des propriétés de contexte de message de rapport d'erreur et rétrograde des propriétés de contexte de message normal avant de publier le message ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="8212d-114">When a failed message is generated, BizTalk Server promotes error-report-related message context properties and demotes regular message context properties before publishing the failed message.</span></span> <span data-ttu-id="8212d-115">Comparez ce comportement à celui par défaut quand le routage des messages ayant échoué n'est pas activé : les messages qui échouent sont suspendus.</span><span class="sxs-lookup"><span data-stu-id="8212d-115">Compare this to the default behavior when failed message routing is not enabled: Messages that fail are suspended.</span></span>  
  
## <a name="what-kinds-of-messaging-failures-trigger-an-error-message"></a><span data-ttu-id="8212d-116">Quels types d'échecs de messagerie déclenchent un message d'erreur ?</span><span class="sxs-lookup"><span data-stu-id="8212d-116">What Kinds of Messaging Failures Trigger an Error Message?</span></span>  
 <span data-ttu-id="8212d-117">Tout échec survenant lors du traitement de l'adaptateur ou du pipeline, du mappage, ou du routage des messages provoque un message d'erreur si le routage des messages ayant échoué est activé.</span><span class="sxs-lookup"><span data-stu-id="8212d-117">Any failure that occurs in adapter processing, pipeline processing, mapping, or message routing results in an error message if routing for failed messages is enabled.</span></span> <span data-ttu-id="8212d-118">Lorsqu'une erreur de messagerie se produit au moment où une orchestration reçoit des données d'un port de réception ou envoie des données à un port d'envoi, le message d'erreur qui en résulte est associé aux ports de messagerie auxquels l'orchestration est liée.</span><span class="sxs-lookup"><span data-stu-id="8212d-118">When a messaging error occurs while an orchestration is receiving from a receive port or sending to a send port, the resulting error message is associated with the messaging ports to which the orchestration is bound.</span></span>  
  
## <a name="subscribing-to-an-error-message"></a><span data-ttu-id="8212d-119">Abonnement à un message d'erreur</span><span class="sxs-lookup"><span data-stu-id="8212d-119">Subscribing to an Error Message</span></span>  
 <span data-ttu-id="8212d-120">Les messages d'erreur sont remis aux orchestrations ou aux ports d'envoi qui s'y sont abonnés.</span><span class="sxs-lookup"><span data-stu-id="8212d-120">Error messages are delivered to orchestrations or send ports that have subscribed to receive them.</span></span> <span data-ttu-id="8212d-121">Un abonnement sélectionne généralement un message d'erreur sur la base du nom du port (un port d'envoi ou de réception) dans lequel l'erreur de messagerie s'est produite.</span><span class="sxs-lookup"><span data-stu-id="8212d-121">A subscription typically selects an error message based on the name of the port in which the messaging error occurred (either a send or a receive port).</span></span> <span data-ttu-id="8212d-122">Un abonnement peut également filtrer d'autres propriétés promues vers le contexte de message de l'erreur (par exemple **InboundTransportLocation** ou **FailureCode**).</span><span class="sxs-lookup"><span data-stu-id="8212d-122">A subscription might also filter on other properties promoted to the error's message context (for example, **InboundTransportLocation** or **FailureCode**).</span></span>  
  
## <a name="error-message-specification"></a><span data-ttu-id="8212d-123">Spécification de message d'erreur</span><span class="sxs-lookup"><span data-stu-id="8212d-123">Error Message Specification</span></span>  
 <span data-ttu-id="8212d-124">Un message d'erreur est un clone du message d'origine ayant échoué. Les propriétés précédemment promues sont toutes rétrogradées et un ensemble des propriétés propres à l'erreur est promu vers le contexte de message.</span><span class="sxs-lookup"><span data-stu-id="8212d-124">An error message is a clone of the original failed message, with all previously promoted properties demoted and with a set of error-specific properties promoted to the message context.</span></span> <span data-ttu-id="8212d-125">Les propriétés promues précédemment sont rétrogradées pour éviter toute remise involontaire à des abonnés n'étant pas censés recevoir le message d'erreur.</span><span class="sxs-lookup"><span data-stu-id="8212d-125">Previously promoted properties are demoted to avoid unintended delivery to subscribers not designated to receive the error message.</span></span> <span data-ttu-id="8212d-126">Le message d'erreur est publié afin d'être distribué aux abonnés (orchestrations, ports d'envoi et groupes de ports d'envoi).</span><span class="sxs-lookup"><span data-stu-id="8212d-126">The error message is published for distribution to subscribers (orchestrations, send ports, and send port groups).</span></span>  
  
 <span data-ttu-id="8212d-127">Les propriétés sont promues vers le contexte de message d’erreur qui se trouvent toutes dans le **/errorreport** espace de noms dans BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="8212d-127">The properties that are promoted to the context of an error message all fall under the **ErrorReport** namespace in BizTalk Server.</span></span> <span data-ttu-id="8212d-128">Il s'agit des propriétés suivantes :</span><span class="sxs-lookup"><span data-stu-id="8212d-128">They are as follows:</span></span>  
  
|<span data-ttu-id="8212d-129">Nom de la propriété</span><span class="sxs-lookup"><span data-stu-id="8212d-129">Property name</span></span>|<span data-ttu-id="8212d-130">Type de données</span><span class="sxs-lookup"><span data-stu-id="8212d-130">Data type</span></span>|<span data-ttu-id="8212d-131">Promue</span><span class="sxs-lookup"><span data-stu-id="8212d-131">Promoted</span></span>|<span data-ttu-id="8212d-132">Description</span><span class="sxs-lookup"><span data-stu-id="8212d-132">Description</span></span>|  
|-------------------|---------------|--------------|-----------------|  
|<span data-ttu-id="8212d-133">FailureCode</span><span class="sxs-lookup"><span data-stu-id="8212d-133">FailureCode</span></span>|<span data-ttu-id="8212d-134">System.String</span><span class="sxs-lookup"><span data-stu-id="8212d-134">System.String</span></span>|<span data-ttu-id="8212d-135">Oui</span><span class="sxs-lookup"><span data-stu-id="8212d-135">Yes</span></span>|<span data-ttu-id="8212d-136">Code d'erreur</span><span class="sxs-lookup"><span data-stu-id="8212d-136">Error code.</span></span> <span data-ttu-id="8212d-137">Il s'agit d'une valeur hexadécimale reportée dans la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="8212d-137">A hexadecimal value that is reported in the BizTalk Server Administration console.</span></span>|  
|<span data-ttu-id="8212d-138">FailureCategory</span><span class="sxs-lookup"><span data-stu-id="8212d-138">FailureCategory</span></span>|<span data-ttu-id="8212d-139">System.Int32</span><span class="sxs-lookup"><span data-stu-id="8212d-139">System.Int32</span></span>|<span data-ttu-id="8212d-140">Oui</span><span class="sxs-lookup"><span data-stu-id="8212d-140">Yes</span></span>|<span data-ttu-id="8212d-141">Cette propriété n'est pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="8212d-141">This property is not used.</span></span> <span data-ttu-id="8212d-142">Sa valeur n'est pas définie.</span><span class="sxs-lookup"><span data-stu-id="8212d-142">Its value is undefined.</span></span>|  
|<span data-ttu-id="8212d-143">Description</span><span class="sxs-lookup"><span data-stu-id="8212d-143">Description</span></span>|<span data-ttu-id="8212d-144">System.String</span><span class="sxs-lookup"><span data-stu-id="8212d-144">System.String</span></span>|<span data-ttu-id="8212d-145">Non</span><span class="sxs-lookup"><span data-stu-id="8212d-145">No</span></span>|<span data-ttu-id="8212d-146">Description d'erreur.</span><span class="sxs-lookup"><span data-stu-id="8212d-146">Error description.</span></span> <span data-ttu-id="8212d-147">Même texte de diagnostic que celui consigné dans le journal d'événements d'applications en ce qui concerne cet échec de messagerie.</span><span class="sxs-lookup"><span data-stu-id="8212d-147">Same diagnostic text as is written to the Application Event Log regarding this messaging failure.</span></span>|  
|<span data-ttu-id="8212d-148">MessageType</span><span class="sxs-lookup"><span data-stu-id="8212d-148">MessageType</span></span>|<span data-ttu-id="8212d-149">System.String</span><span class="sxs-lookup"><span data-stu-id="8212d-149">System.String</span></span>|<span data-ttu-id="8212d-150">Oui</span><span class="sxs-lookup"><span data-stu-id="8212d-150">Yes</span></span>|<span data-ttu-id="8212d-151">Type de message ayant échoué, ou vide si le type de message est indéterminé.</span><span class="sxs-lookup"><span data-stu-id="8212d-151">Message type of failed message, or empty if message type is indeterminate.</span></span><br /><br /> <span data-ttu-id="8212d-152">BizTalk Server utilise le type de message pour associer des messages à leurs schémas XML.</span><span class="sxs-lookup"><span data-stu-id="8212d-152">BizTalk Server uses the message type to associate messages with their XML schemas.</span></span> <span data-ttu-id="8212d-153">Le type de message est formé en concaténant l'espace de noms du schéma et le nœud racine du schéma : http://mynamespace#rootnode</span><span class="sxs-lookup"><span data-stu-id="8212d-153">Message type is formed by concatenating the schema namespace with the schema root node: http://mynamespace#rootnode.</span></span> <span data-ttu-id="8212d-154">**Remarque :** les Messages qui échouent avant que leur type de message est déterminé ne pas cette propriété est définie.</span><span class="sxs-lookup"><span data-stu-id="8212d-154">**Note:**  Messages that fail before their message type is determined do not have this property set.</span></span>|  
|<span data-ttu-id="8212d-155">ReceivePortName</span><span class="sxs-lookup"><span data-stu-id="8212d-155">ReceivePortName</span></span>|<span data-ttu-id="8212d-156">System.String</span><span class="sxs-lookup"><span data-stu-id="8212d-156">System.String</span></span>|<span data-ttu-id="8212d-157">**Promue** si l'échec s'est produit pendant le traitement entrant (dans un port de réception).</span><span class="sxs-lookup"><span data-stu-id="8212d-157">**Promoted** if the failure happened during inbound processing (in a receive port)</span></span><br /><br /> <span data-ttu-id="8212d-158">**Non promue** si l'échec s'est produit dans un port d'envoi.</span><span class="sxs-lookup"><span data-stu-id="8212d-158">**Not promoted** if the failure happened in a send port.</span></span>|<span data-ttu-id="8212d-159">Nom du port de réception où l'échec s'est produit.</span><span class="sxs-lookup"><span data-stu-id="8212d-159">Name of the receive port where the failure happened.</span></span>|  
|<span data-ttu-id="8212d-160">InboundTransportLocation</span><span class="sxs-lookup"><span data-stu-id="8212d-160">InboundTransportLocation</span></span>|<span data-ttu-id="8212d-161">System.String</span><span class="sxs-lookup"><span data-stu-id="8212d-161">System.String</span></span>|<span data-ttu-id="8212d-162">**Promue** si l'échec s'est produit pendant le traitement entrant (dans un port de réception).</span><span class="sxs-lookup"><span data-stu-id="8212d-162">**Promoted** if the failure happened during inbound processing (in a receive port)</span></span><br /><br /> <span data-ttu-id="8212d-163">**Non promue** si l'échec s'est produit dans un port d'envoi.</span><span class="sxs-lookup"><span data-stu-id="8212d-163">**Not promoted** if the failure happened in a send port.</span></span>|<span data-ttu-id="8212d-164">URI de l'emplacement de réception où l'échec s'est produit.</span><span class="sxs-lookup"><span data-stu-id="8212d-164">URI of the receive location where the failure happened.</span></span>|  
|<span data-ttu-id="8212d-165">SendPortName</span><span class="sxs-lookup"><span data-stu-id="8212d-165">SendPortName</span></span>|<span data-ttu-id="8212d-166">System.String</span><span class="sxs-lookup"><span data-stu-id="8212d-166">System.String</span></span>|<span data-ttu-id="8212d-167">**Promue** si l'échec s'est produit pendant le traitement sortant (dans un port d'envoi).</span><span class="sxs-lookup"><span data-stu-id="8212d-167">**Promoted** if the failure happened during outbound processing (in a send port)</span></span><br /><br /> <span data-ttu-id="8212d-168">**Non promue** si l'échec s'est produit dans un port de réception.</span><span class="sxs-lookup"><span data-stu-id="8212d-168">**Not promoted** if the failure happened in a receive port.</span></span>|<span data-ttu-id="8212d-169">Nom du port d'envoi où l'échec s'est produit.</span><span class="sxs-lookup"><span data-stu-id="8212d-169">Name of the send port where the failure happened.</span></span>|  
|<span data-ttu-id="8212d-170">OutboundTransportLocation</span><span class="sxs-lookup"><span data-stu-id="8212d-170">OutboundTransportLocation</span></span>|<span data-ttu-id="8212d-171">System.String</span><span class="sxs-lookup"><span data-stu-id="8212d-171">System.String</span></span>|<span data-ttu-id="8212d-172">**Promue** si l'échec s'est produit pendant le traitement sortant (dans un port d'envoi).</span><span class="sxs-lookup"><span data-stu-id="8212d-172">**Promoted** if the failure happened during outbound processing (in a send port)</span></span><br /><br /> <span data-ttu-id="8212d-173">**Non promue** si l'échec s'est produit dans un port de réception.</span><span class="sxs-lookup"><span data-stu-id="8212d-173">**Not promoted** if the failure happened in a receive port.</span></span>|<span data-ttu-id="8212d-174">URI de l'emplacement d'envoi où l'échec s'est produit.</span><span class="sxs-lookup"><span data-stu-id="8212d-174">URI of the send location where the failure happened.</span></span>|  
|<span data-ttu-id="8212d-175">ErrorType</span><span class="sxs-lookup"><span data-stu-id="8212d-175">ErrorType</span></span>|<span data-ttu-id="8212d-176">System.String</span><span class="sxs-lookup"><span data-stu-id="8212d-176">System.String</span></span>|<span data-ttu-id="8212d-177">Oui</span><span class="sxs-lookup"><span data-stu-id="8212d-177">Yes</span></span>|<span data-ttu-id="8212d-178">Indique le type de message que l'erreur contient.</span><span class="sxs-lookup"><span data-stu-id="8212d-178">Indicates the type of message that the error contains.</span></span> <span data-ttu-id="8212d-179">Cette propriété contient toujours la valeur **FailedMessage**, ce qui signifie que l'erreur contient le message ayant échoué d'origine.</span><span class="sxs-lookup"><span data-stu-id="8212d-179">This property always contains the value **FailedMessage**, meaning that the error contains the original failed message.</span></span>|  
|<span data-ttu-id="8212d-180">RoutingFailureReportID</span><span class="sxs-lookup"><span data-stu-id="8212d-180">RoutingFailureReportID</span></span>|<span data-ttu-id="8212d-181">System.String</span><span class="sxs-lookup"><span data-stu-id="8212d-181">System.String</span></span>|<span data-ttu-id="8212d-182">Oui</span><span class="sxs-lookup"><span data-stu-id="8212d-182">Yes</span></span>|<span data-ttu-id="8212d-183">Cette propriété fournit l'ID du rapport d'échec de routage généré par BizTalk Server en cas d'échec de routage.</span><span class="sxs-lookup"><span data-stu-id="8212d-183">This property provides the ID of the routing failure report that BizTalk Server generates when there is a routing failure.</span></span> <span data-ttu-id="8212d-184">Un rapport d'échec de routage est un message spécial que BizTalk Server génère et suspend.</span><span class="sxs-lookup"><span data-stu-id="8212d-184">A routing failure report is a special message that BizTalk Server generates and suspends.</span></span> <span data-ttu-id="8212d-185">Ce message est dépourvu de corps, mais possède le contexte du message ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="8212d-185">This message does not have a body, but it has the context of the failed message.</span></span> <span data-ttu-id="8212d-186">À l'aide de cet ID, une orchestration de gestion des erreurs ou un port d'envoi peuvent interroger la base de données MessageBox et traiter le rapport d'échec de routage.</span><span class="sxs-lookup"><span data-stu-id="8212d-186">Using this ID, an error-handling orchestration or a send port can query the MessageBox database and process the routing failure report.</span></span> <span data-ttu-id="8212d-187">Une orchestration peut par exemple souhaiter mettre fin au rapport d'échec de routage après avoir reçu le message ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="8212d-187">For example, an orchestration may want to terminate the routing failure report after it gets the failed message.</span></span>|  
  
## <a name="handling-error-messages"></a><span data-ttu-id="8212d-188">Gestion des messages d'erreur</span><span class="sxs-lookup"><span data-stu-id="8212d-188">Handling Error Messages</span></span>  
 <span data-ttu-id="8212d-189">La gestion des erreurs est spécifiée par un abonnement à une orchestration ou un port d'envoi, abonnement dont le filtre correspond aux propriétés qui ont été promues vers le contexte de message du message d'erreur.</span><span class="sxs-lookup"><span data-stu-id="8212d-189">Error handling is specified by an orchestration or send-port subscription whose filter matches the properties that have been promoted to the message context of the error message.</span></span>  
  
## <a name="security-implications"></a><span data-ttu-id="8212d-190">Incidence sur la sécurité</span><span class="sxs-lookup"><span data-stu-id="8212d-190">Security Implications</span></span>  
 <span data-ttu-id="8212d-191">L'identité associée au message d'origine (son identité initiale ou son identité finale déterminée par la phase de résolution de tiers du pipeline de réception) est affectée au message d'erreur.</span><span class="sxs-lookup"><span data-stu-id="8212d-191">The identity associated with the original message—either its initial identity or its final identity determined by the Resolve Party stage of the receive pipeline—is assigned to the error message.</span></span>  
  
 <span data-ttu-id="8212d-192">Les mécanismes de sécurité qui restreignent la remise de messages aux ports et aux orchestrations abonnés autorisés s'appliquent aussi aux messages d'erreur.</span><span class="sxs-lookup"><span data-stu-id="8212d-192">The security mechanisms that restrict delivery of messages to authorized subscribing ports and orchestrations also apply to error messages.</span></span>  
  
 <span data-ttu-id="8212d-193">Un port d'envoi qui s'abonne à un message d'erreur, mais qui n'est pas configuré avec un certificat de déchiffrement approprié, ne reçoit pas de messages d'erreur résultant d'échecs de messagerie durant ou avant l'étape de déchiffrement du pipeline de réception via lequel le message d'origine a pénétré dans BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="8212d-193">A send port that subscribes to an error message, but is not configured with an appropriate decryption certificate, does not receive error messages that result from messaging failures at or before the decrypt stage of the receive pipeline through which the original message entered BizTalk Server.</span></span> <span data-ttu-id="8212d-194">Au lieu de cela, les messages ayant échoué sont placés dans la file d'attente des messages interrompus.</span><span class="sxs-lookup"><span data-stu-id="8212d-194">Instead, the failed messages are placed in the Suspended queue.</span></span>  
  
## <a name="adapter-messaging-failure"></a><span data-ttu-id="8212d-195">Échec de messagerie de l'adaptateur</span><span class="sxs-lookup"><span data-stu-id="8212d-195">Adapter Messaging Failure</span></span>  
 <span data-ttu-id="8212d-196">Si un adaptateur suspend un message, un message d'erreur est publié.</span><span class="sxs-lookup"><span data-stu-id="8212d-196">If an adapter suspends a message, an error message is published.</span></span> <span data-ttu-id="8212d-197">Aucun message d'erreur n'est généré si le message n'est pas suspendu.</span><span class="sxs-lookup"><span data-stu-id="8212d-197">No error message is generated if the message is not suspended.</span></span>  
  
## <a name="transactional-receive-pipelines"></a><span data-ttu-id="8212d-198">Pipelines de réception transactionnels</span><span class="sxs-lookup"><span data-stu-id="8212d-198">Transactional Receive Pipelines</span></span>  
 <span data-ttu-id="8212d-199">Si un pipeline de réception transactionnel lève une exception (spécifie que la transaction doit être abandonnée), la transaction est abandonnée et un message d'erreur est publié.</span><span class="sxs-lookup"><span data-stu-id="8212d-199">If a transactional receive pipeline throws an exception (specifies that the transaction should be aborted), then the transaction is aborted and an error message is published.</span></span>  
  
 <span data-ttu-id="8212d-200">Si un pipeline de réception transactionnel suspend explicitement un message (spécifie que MessageDestination = SuspendQueue), la transaction actuelle est autorisée à se poursuivre (et peut être validée sauf si les étapes suivantes spécifient son abandon) et le message d'erreur résultant est publié.</span><span class="sxs-lookup"><span data-stu-id="8212d-200">If a transactional receive pipeline explicitly suspends a message (specifies that MessageDestination = SuspendQueue), then the current transaction is allowed to proceed (and may be committed unless subsequent stages specify to abort it) and the resulting error message is published.</span></span>  
  
## <a name="solicit-response-send-ports"></a><span data-ttu-id="8212d-201">Ports d'envoi avec sollicitation-réponse</span><span class="sxs-lookup"><span data-stu-id="8212d-201">Solicit-Response Send Ports</span></span>  
 <span data-ttu-id="8212d-202">Lorsqu'un message de requête est envoyé à partir d'une orchestration et que sa transmission ou le traitement entrant de sa réponse échoue, l'orchestration obtient une exception, que le message ayant échoué ait été routé ou non.</span><span class="sxs-lookup"><span data-stu-id="8212d-202">When a request message is sent from an orchestration and it fails transmission or its response fails inbound processing, the orchestration gets an exception, regardless of whether the failed message has been routed.</span></span>  
  
 <span data-ttu-id="8212d-203">Dans le cas où un port d'envoi avec sollicitation-réponse est connecté à un port de réception de requête-réponse, le port de réception reçoit soit un message de réponse (si la transmission réussit), soit un accusé NACK (si la transmission échoue), que le message ayant échoué ait été routé ou non.</span><span class="sxs-lookup"><span data-stu-id="8212d-203">In the case where a solicit-response send port is connected to a request-response receive port, the receive port gets either a response message (if the transmission succeeds) or a NACK (if the transmission fails), regardless of whether the failed message has been routed.</span></span>  
  
## <a name="one-way-send-ports"></a><span data-ttu-id="8212d-204">Ports d'envoi unidirectionnels</span><span class="sxs-lookup"><span data-stu-id="8212d-204">One-Way Send Ports</span></span>  
 <span data-ttu-id="8212d-205">Lorsqu'un message est envoyé à partir d'une orchestration via un port d'envoi configuré pour les accusés de réception, l'orchestration reçoit un accusé de réception que le message d'erreur ait été routé ou non.</span><span class="sxs-lookup"><span data-stu-id="8212d-205">When a message is sent from an orchestration through a send port configured for delivery notification, then the orchestration receives a delivery notification regardless of whether the error message has been routed.</span></span> <span data-ttu-id="8212d-206">Autrement dit, le port d'envoi génère un accusé de réception pour l'orchestration même si le port est confronté à un échec de messagerie pendant le traitement.</span><span class="sxs-lookup"><span data-stu-id="8212d-206">In other words, the send port generates a delivery notification for the orchestration even if the port encounters a messaging failure during processing.</span></span> <span data-ttu-id="8212d-207">L'accusé se borne à confirmer la remise faite au port, il ne mentionne pas si le traitement via ce dernier a réussi.</span><span class="sxs-lookup"><span data-stu-id="8212d-207">The notification confirms delivery to the port, but does not address successful processing through the port.</span></span>  
  
## <a name="resuming-suspended-messages"></a><span data-ttu-id="8212d-208">Reprise des messages suspendus</span><span class="sxs-lookup"><span data-stu-id="8212d-208">Resuming Suspended Messages</span></span>  
 <span data-ttu-id="8212d-209">La plupart des messages dont le traitement entrant échoue (autrement dit, le traitement allant de l'adaptateur de réception, ce dernier inclus, à la publication, non comprise, dans la MessageBox) et dont les erreurs ne sont pas gérées sont suspendus et peuvent être repris.</span><span class="sxs-lookup"><span data-stu-id="8212d-209">Most messages that fail inbound processing (that is, processing from and including the receive adapter and up to but not including publication to the message box), and whose failures are not handled, are suspended as resumable.</span></span> <span data-ttu-id="8212d-210">Ce n'est en revanche pas le cas des messages de requête issus des ports de réception bidirectionnels, qui sont suspendus et ne peuvent pas être repris.</span><span class="sxs-lookup"><span data-stu-id="8212d-210">The exception is that request messages from two-way receive ports are suspended as nonresumable.</span></span>  
  
 <span data-ttu-id="8212d-211">Le format des messages suspendus est généralement celui qu'ils avaient à l'origine (avant le traitement de pipeline). Il y a cependant deux exceptions à cette règle :</span><span class="sxs-lookup"><span data-stu-id="8212d-211">Messages are typically suspended in their original form (as they were before pipeline processing), with two exceptions:</span></span>  
  
-   <span data-ttu-id="8212d-212">**Messages suspendus par des composants de pipeline.**</span><span class="sxs-lookup"><span data-stu-id="8212d-212">**Messages suspended by pipeline components.**</span></span> <span data-ttu-id="8212d-213">BizTalk Server suspend ce type de message selon le même format que celui fourni au composant de pipeline défaillant.</span><span class="sxs-lookup"><span data-stu-id="8212d-213">BizTalk Server suspends this type of message in the same form as it was provided to the failing pipeline component.</span></span> <span data-ttu-id="8212d-214">Dès que le message est repris, il subit un traitement de pipeline depuis le début du même pipeline.</span><span class="sxs-lookup"><span data-stu-id="8212d-214">When the message is resumed, it undergoes pipeline processing from the beginning of the same pipeline.</span></span> <span data-ttu-id="8212d-215">Cela signifie qu'un composant de pipeline situé dans une phase de pipeline précédant la phase où la défaillance d'origine a eu lieu doit être préparé à gérer le « même » message dans un format différent du format d'origine dans lequel il a traité ce message.</span><span class="sxs-lookup"><span data-stu-id="8212d-215">This implies that a pipeline component in a pipeline stage that precedes the stage where the original failure occurred must be prepared to handle the "same" message in a form that is different from the original form in which it processed that message.</span></span>  
  
-   <span data-ttu-id="8212d-216">**Le code machine qui provoquant l’échec de routage d’échange de messages restaurable.**</span><span class="sxs-lookup"><span data-stu-id="8212d-216">**Messages from recoverable interchange disassembly that subsequently fail routing.**</span></span> <span data-ttu-id="8212d-217">BizTalk Server suspend ce type de message selon le même format que celui avec lequel il a été publié.</span><span class="sxs-lookup"><span data-stu-id="8212d-217">BizTalk Server suspends this type of message in the same form as it was published.</span></span> <span data-ttu-id="8212d-218">Il s'agit du format qui était celui du message **après** l'exécution du pipeline.</span><span class="sxs-lookup"><span data-stu-id="8212d-218">This is the form the message had **after** pipeline execution.</span></span> <span data-ttu-id="8212d-219">Dès que le message est repris, il ignore le traitement de pipeline et est publié directement dans la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="8212d-219">When the message is resumed, it skips pipeline processing and is published directly to the MessageBox database.</span></span>  
  
## <a name="scenarios-leading-to-suspended-non-resumable-messages"></a><span data-ttu-id="8212d-220">Scénarios générant des messages suspendus (sans reprise possible)</span><span class="sxs-lookup"><span data-stu-id="8212d-220">Scenarios Leading to Suspended (Non-Resumable) Messages</span></span>  
 <span data-ttu-id="8212d-221">Bien que les messages suspendus puissent généralement être repris, certains scénarios génèrent des messages sans reprise possible :</span><span class="sxs-lookup"><span data-stu-id="8212d-221">While it is more common for messages to be suspended as resumable, there are some scenarios that lead to non-resumable messages:</span></span>  
  
-   <span data-ttu-id="8212d-222">Dans un port d'envoi Livraison chronologique des messages pour lequel l'option « Continuer après un échec » est activé, en cas de défaillance au niveau du pipeline, du mappage ou de la transmission</span><span class="sxs-lookup"><span data-stu-id="8212d-222">In an Ordered Delivery send port with continue on failure enabled, if there is a failure in the pipeline, mapping or transmission.</span></span>  
  
-   <span data-ttu-id="8212d-223">Dans un port de réception Livraison chronologique des messages, si l'adaptateur est configuré pour suspendre les messages sans reprise possible en cas d'échec.</span><span class="sxs-lookup"><span data-stu-id="8212d-223">In an Ordered Delivery receive port, if the adapter is configured to suspend messages on non-resumable on failure.</span></span> <span data-ttu-id="8212d-224">Par exemple, si le paramètre d'adaptateur MSMQ « En cas d'échec » est défini sur « Suspendre (sans reprise) » ou si pour l'adaptateur MQSeries, l'option « Suspendre sans réponse possible » est activée, les messages ayant échoué seront suspendus sans reprise possible.</span><span class="sxs-lookup"><span data-stu-id="8212d-224">For example, if the MSMQ adapter setting "On Failure" is set to "Suspend (non-resumable)" or the MQSeries adapter has "Suspend as Non Resumable" enabled, failed messages will be suspended as non-resumable.</span></span>  
  
-   <span data-ttu-id="8212d-225">Dans un port de réception bidirectionnel, en cas d'échec du message de réponse dans le pipeline, le mappage ou la transmission</span><span class="sxs-lookup"><span data-stu-id="8212d-225">In a two-way receive port, if the response message fails in the pipeline, mapping, or transmission.</span></span>  
  
-   <span data-ttu-id="8212d-226">Dans un port de réception bidirectionnel, en cas d'échec de la réception d'un message dans le pipeline, le mappage ou la transmission.</span><span class="sxs-lookup"><span data-stu-id="8212d-226">In a two-way receive port, if the receive message fails in the pipeline, mapping or transmission.</span></span> <span data-ttu-id="8212d-227">Le comportement des adaptateurs individuels peut être différent.</span><span class="sxs-lookup"><span data-stu-id="8212d-227">Individual adapter behavior may be different.</span></span> <span data-ttu-id="8212d-228">Par exemple, par défaut l'adaptateur HTTP ne suspend pas de messages, mais il peut être également configuré pour les suspendre.</span><span class="sxs-lookup"><span data-stu-id="8212d-228">For example, the HTTP adapter does not suspend messages by default but can be configured to do so.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8212d-229">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8212d-229">See Also</span></span>  
 <span data-ttu-id="8212d-230">[Gestion des erreurs](../core/error-handling.md) </span><span class="sxs-lookup"><span data-stu-id="8212d-230">[Error Handling](../core/error-handling.md) </span></span>  
 <span data-ttu-id="8212d-231">[À l’aide des accusés de réception](../core/using-acknowledgments.md) </span><span class="sxs-lookup"><span data-stu-id="8212d-231">[Using Acknowledgments](../core/using-acknowledgments.md) </span></span>  
 [<span data-ttu-id="8212d-232">Livraison chronologique des messages</span><span class="sxs-lookup"><span data-stu-id="8212d-232">Ordered Delivery of Messages</span></span>](../core/ordered-delivery-of-messages.md)