---
title: "Procédure pas à pas : À l’aide du Mode de sécurité de Message avec l’adaptateur WCF-NetTcp | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c7f6e892-34ce-4132-8867-54cc3bbfe507
caps.latest.revision: "47"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 850d0ee715984c7465063addd778828c727e0233
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/01/2017
---
# <a name="walkthrough-using-the-message-security-mode-with-the-wcf-nettcp-adapter"></a><span data-ttu-id="af618-102">Procédure pas à pas : À l’aide du Mode de sécurité de Message avec l’adaptateur WCF-NetTcp</span><span class="sxs-lookup"><span data-stu-id="af618-102">Walkthrough: Using the Message Security Mode with the WCF-NetTcp Adapter</span></span>
  
> [!NOTE]
>  <span data-ttu-id="af618-103">Pour plus d’informations à propos des adaptateurs, consultez [adaptateurs dans BizTalk Server](../core/adapters-in-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="af618-103">For more information about adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  
  
## <a name="introduction"></a><span data-ttu-id="af618-104">Introduction</span><span class="sxs-lookup"><span data-stu-id="af618-104">Introduction</span></span>
  
 <span data-ttu-id="af618-105">Cette procédure pas à pas détaille la configuration de l'adaptateur WCF-NetTcp pour l'utilisation du mode de sécurité Message [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)], qui utilise la spécification WS-Security pour sécuriser les messages que transmet l'adaptateur.</span><span class="sxs-lookup"><span data-stu-id="af618-105">This walkthrough shows how to configure the WCF-NetTcp adapter to use the [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] Message security mode, which uses the WS-Security specification to help secure messages that the adapter transmits.</span></span> <span data-ttu-id="af618-106">Cette spécification présente les améliorations apportées au protocole de messagerie SOAP pour assurer la confidentialité, l'intégrité et l'authentification au niveau des messages SOAP.</span><span class="sxs-lookup"><span data-stu-id="af618-106">This specification describes enhancements to the SOAP messaging protocol to accomplish confidentiality, integrity, and authentication at the SOAP message level.</span></span> <span data-ttu-id="af618-107">Le mode de sécurité Message nécessite que le certificat de service soit spécifié pour des opérations telles que le chiffrement/déchiffrement et la signature/vérification en fonction des combinaisons de modes de sécurité.</span><span class="sxs-lookup"><span data-stu-id="af618-107">Message security mode requires the service certificate to be specified for operations such as encryption/decryption and signing/verification purposes depending on the security mode combinations.</span></span>  
  
 <span data-ttu-id="af618-108">L’adaptateur WCF-NetTcp utilise la liaison NetTcpBinding pour communiquer entre [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] les clients et [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services à distance.</span><span class="sxs-lookup"><span data-stu-id="af618-108">The WCF-NetTcp adapter uses the NetTcpBinding binding to communicate between [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] clients and [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] remote services.</span></span> <span data-ttu-id="af618-109">Il fournit un accès total aux fonctionnalités de sécurité, de fiabilité et de transaction SOAP.</span><span class="sxs-lookup"><span data-stu-id="af618-109">It provides full access to SOAP security, reliability, and transaction features.</span></span> <span data-ttu-id="af618-110">Il permet la publication d'orchestrations et de schémas en tant que services [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], et offre à une orchestration la possibilité d'utiliser des services WCF externes.</span><span class="sxs-lookup"><span data-stu-id="af618-110">It allows orchestrations and schemas to be published as [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services, and also provides the ability for an orchestration to consume external WCF services.</span></span> <span data-ttu-id="af618-111">Cet adaptateur utilise le transport TCP et les messages ont un codage binaire.</span><span class="sxs-lookup"><span data-stu-id="af618-111">This adapter uses the TCP transport, and messages have binary encoding.</span></span> <span data-ttu-id="af618-112">L'adaptateur WCF-NetTcp consiste en un adaptateur d'envoi et un adaptateur de réception.</span><span class="sxs-lookup"><span data-stu-id="af618-112">The WCF-NetTcp adapter consists of both a send adapter and a receive adapter.</span></span>  
  
 <span data-ttu-id="af618-113">Cette procédure pas à pas détaille la création de certificats pour le mode de sécurité Message à l'aide du service de certificats Active Directory.</span><span class="sxs-lookup"><span data-stu-id="af618-113">This walkthrough shows how to create certificates for Message security mode by using the Active Directory Certificate Service.</span></span> <span data-ttu-id="af618-114">Vous allez créer des certificats pour le client et le serveur, puis configurer un emplacement de réception WCF-NetTcp pour utiliser ces certificats dans le mode de sécurité Message.</span><span class="sxs-lookup"><span data-stu-id="af618-114">You will create certificates for the server and the client, and then configure a WCF-NetTcp receive location to use the certificates in Message security mode.</span></span> <span data-ttu-id="af618-115">À l'aide d'un client [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], vous enverrez à cet emplacement de réception des messages à l'état chiffré selon le traitement et la syntaxe du chiffrement XML.</span><span class="sxs-lookup"><span data-stu-id="af618-115">By using a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client, you will send messages to that receive location in an encrypted state according to XML Encryption Syntax and Processing.</span></span>  
  
 <span data-ttu-id="af618-116">Une fois cette procédure pas à pas terminée, vous saurez comment effectuer les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="af618-116">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  
  
-   <span data-ttu-id="af618-117">utiliser le service de certificats Active Directory pour créer une demande de certificat et terminer le processus par l'émission du certificat ;</span><span class="sxs-lookup"><span data-stu-id="af618-117">Use the Active Directory Certificate Service to create a certificate request and complete the process by issuing the certificate.</span></span>  
  
-   <span data-ttu-id="af618-118">configurer l'adaptateur WCF-NetTcp à partir de la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] pour utiliser le mode de sécurité Message.</span><span class="sxs-lookup"><span data-stu-id="af618-118">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure the WCF-NetTcp adapter to use the Message security mode.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="af618-119">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="af618-119">Prerequisites</span></span>  
 <span data-ttu-id="af618-120">Pour exécuter la procédure décrite dans cet exemple, assurez-vous que votre environnement installe les composants requis suivants :</span><span class="sxs-lookup"><span data-stu-id="af618-120">To perform the steps in this sample ensure that your environment installs the following prerequisites;</span></span>  
  
-   <span data-ttu-id="af618-121">L’ordinateur qui génère les assemblys et exécute le processus de déploiement et l’ordinateur qui exécute l’exemple, requièrent Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)]et Microsoft BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="af618-121">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)], and Microsoft BizTalk Server.</span></span>  
  
-   <span data-ttu-id="af618-122">L’ordinateur utilisé pour générer les assemblys et exécuter le processus de déploiement requiert Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="af618-122">The computer used to build the assemblies and run the deployment process requires Microsoft Visual Studio.</span></span>  
  
-   <span data-ttu-id="af618-123">L'ordinateur qui exécute l'exemple requiert les adaptateurs [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] et les outils d'administration de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="af618-123">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="af618-124">Il s’agit des options d’installation lors de l’installation de Microsoft BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="af618-124">These are options to install during setup of Microsoft BizTalk Server.</span></span>  
  
-   <span data-ttu-id="af618-125">Sur les ordinateurs utilisés pour effectuer des tâches d'administration, vous devez exécuter un compte d'utilisateur membre du groupe Administrateurs [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] pour configurer les paramètres d'application de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] à l'intérieur de la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="af618-125">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="af618-126">Ce compte d'utilisateur doit également être membre du groupe Administrateurs local pour le déploiement d'application, la gestion d'instances de l'hôte et d'autres tâches éventuellement requises.</span><span class="sxs-lookup"><span data-stu-id="af618-126">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  
  
-   <span data-ttu-id="af618-127">Sur n’importe quel ordinateur qui nécessite [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] fonctionnalité, effectuez la procédure d’installation unique pour le [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] exemples [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span><span class="sxs-lookup"><span data-stu-id="af618-127">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  
  
-   <span data-ttu-id="af618-128">Sur l'ordinateur qui exécute l'exemple et importe une liaison ou un fichier .msi dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], assurez-vous que l'hôte n'est pas un hôte approuvé, sans quoi l'importation échoue.</span><span class="sxs-lookup"><span data-stu-id="af618-128">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  
  
-   <span data-ttu-id="af618-129">Sur l'ordinateur qui exécute l'exemple, assurez-vous que les services de certificats Active Directory sont installés.</span><span class="sxs-lookup"><span data-stu-id="af618-129">On the computer that runs the sample ensure that Active Directory Certificate Services is installed.</span></span>  
  
-   <span data-ttu-id="af618-130">Vous devez télécharger le code de procédure pas à pas et l’extraire sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="af618-130">You must download the walkthrough code and extract it to your computer.</span></span>  <span data-ttu-id="af618-131">Cette procédure pas à pas est une partie de l’ensemble du [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] package de la procédure pas à pas de carte.</span><span class="sxs-lookup"><span data-stu-id="af618-131">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="af618-132">Vous pouvez télécharger le fichier **WCFAdapterWalkthroughs.exe** à partir de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] centre de développement sur [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span><span class="sxs-lookup"><span data-stu-id="af618-132">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  
  
## <a name="create-the-certificates-for-this-walkthrough"></a><span data-ttu-id="af618-133">Créer les certificats pour cette procédure pas à pas</span><span class="sxs-lookup"><span data-stu-id="af618-133">Create the certificates for this walkthrough</span></span>  
  
1.  <span data-ttu-id="af618-134">Dans cette section, vous allez effectuer des demandes de certificats pour le service et le client, émettre ces certificats et les installer dans les magasins appropriés.</span><span class="sxs-lookup"><span data-stu-id="af618-134">In this section you will request service and client certificates, issue the certificates, and install them into the appropriate stores.</span></span> <span data-ttu-id="af618-135">Les services de certificats Active Directory permettent de créer un certificat contenant une chaîne de certificats approuvée.</span><span class="sxs-lookup"><span data-stu-id="af618-135">Active Directory Certificate Services is used to create a certificate with a trusted certificate chain.</span></span> <span data-ttu-id="af618-136">Si vous n'avez pas installé les services de certificats Active Directory dans le cadre de la configuration requise, installez-les maintenant sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="af618-136">If you did not install Active Directory Certificate Services as part of the Prerequisites, then install Active Directory Certificate Services on your computer.</span></span> <span data-ttu-id="af618-137">S'ils sont déjà installés, passez à l'étape 2.</span><span class="sxs-lookup"><span data-stu-id="af618-137">If it is already installed, go to step 2.</span></span>  
  
    1.  <span data-ttu-id="af618-138">Cliquez sur **Démarrer**, pointez sur **outils d’administration**, puis cliquez sur **le Gestionnaire de serveur**.</span><span class="sxs-lookup"><span data-stu-id="af618-138">Click **Start**, point to **Administrative Tools**, and then click **Server Manager**.</span></span>  
  
    2.  <span data-ttu-id="af618-139">Sous le **le Gestionnaire de serveur** nœud, cliquez sur **ajouter**, puis cliquez sur **rôles**.</span><span class="sxs-lookup"><span data-stu-id="af618-139">Under the **Server Manager** node, click **Add**, and then click **Roles**.</span></span>  
  
    3.  <span data-ttu-id="af618-140">Ceci fait apparaître la **avant de commencer** boîte de dialogue pour le **Assistant Ajout de rôles**.</span><span class="sxs-lookup"><span data-stu-id="af618-140">This brings up the **Before you begin** dialog for the **Add Roles Wizard**.</span></span> <span data-ttu-id="af618-141">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="af618-141">Click **Next**.</span></span>  
  
    4.  <span data-ttu-id="af618-142">Sur le **sélectionner des rôles de serveur** , sélectionnez **Active Directory Certificate Services**, cliquez sur **suivant**, puis suivez l’à l’écran des instructions pour terminer le installation.</span><span class="sxs-lookup"><span data-stu-id="af618-142">On the **Select Server Roles** page, select **Active Directory Certificate Services**, click **Next**, and then follow the on-screen instructions to complete the installation.</span></span>  
  
2.  <span data-ttu-id="af618-143">Créez une demande de certificat pour l'authentification du service comme suit :</span><span class="sxs-lookup"><span data-stu-id="af618-143">Create a certificate request for the service authentication as follows:</span></span>  
  
    1.  <span data-ttu-id="af618-144">Dans Internet Explorer, visitez le site Web `http://localhost/certsrv`.</span><span class="sxs-lookup"><span data-stu-id="af618-144">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span> <span data-ttu-id="af618-145">Sur le **Bienvenue** , cliquez sur **demander un certificat**, puis cliquez sur **demande de certificat avancée** sur la **demander un certificat** page.</span><span class="sxs-lookup"><span data-stu-id="af618-145">On the **Welcome** page, click **Request a Certificate**, and then click **Advanced certificate request** on the **Request a Certificate** page.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="af618-146">Lorsque vous utilisez [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] en tant que l’autorité de certification et de la demande d’une demande de certificat à partir d’un [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] ordinateur, vous risquez d’obtenir l’erreur **« afin de terminer l’inscription de certificats, le site Web de l’autorité de certification doit être configuré pour utiliser le protocole HTTPS l’authentification »**.</span><span class="sxs-lookup"><span data-stu-id="af618-146">When using [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] as the certificate authority and requesting a certificate request from a [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] computer, you may get the error **“In order to complete certificate enrollment, the Web site for the CA must be configured to use HTTPS authentication”**.</span></span> <span data-ttu-id="af618-147">Si cette erreur se produit, le site Web d'inscription doit être configuré à l'aide d'un certificat Web (SSL).</span><span class="sxs-lookup"><span data-stu-id="af618-147">If this error occurs, the enrollment website needs to be configured with a Web Certificate (SSL).</span></span> <span data-ttu-id="af618-148">Pour plus d'informations sur l'accomplissement de cette tâche, consultez les liens suivants :</span><span class="sxs-lookup"><span data-stu-id="af618-148">Refer to these links for details in accomplishing this task:</span></span>  
        >   
        >  [<span data-ttu-id="af618-149">Les services AD CS : Inscription par le Web</span><span class="sxs-lookup"><span data-stu-id="af618-149">AD CS: Web Enrollment</span></span>](http://technet.microsoft.com/library/cc732517.aspx)  
        >   
        >  [<span data-ttu-id="af618-150">Instructions d’Installation du certificat serveur IIS</span><span class="sxs-lookup"><span data-stu-id="af618-150">IIS Server Certificate Installation Instructions</span></span>](http://msdn.microsoft.com/library/ms751408.aspx)  
  
    2.  <span data-ttu-id="af618-151">Sur le **demande de certificat avancée** , cliquez sur **créer et soumettre une demande à cette autorité de certification**.</span><span class="sxs-lookup"><span data-stu-id="af618-151">On the **Advanced Certificate Request** page, click **Create and submit a request to this CA**.</span></span>  
  
    3.  <span data-ttu-id="af618-152">Sur le **demande de certificat avancée** , tapez `localhost` dans les **nom** zone de texte, sélectionnez **certificat d’authentification serveur** à partir de la  **Type de certificat nécessaire** liste déroulante, puis cliquez sur **Submit**.</span><span class="sxs-lookup"><span data-stu-id="af618-152">On the **Advanced Certificate Request** page, type `localhost` in the **Name** text box, select **Server Authentication Certificate** from the **Type of Certificate Needed** drop-down list, and then click **Submit**.</span></span>  
  
3.  <span data-ttu-id="af618-153">Créez une demande de certificat pour l'authentification du client comme suit :</span><span class="sxs-lookup"><span data-stu-id="af618-153">Create a certificate request for client authentication as follows:</span></span>  
  
    1.  <span data-ttu-id="af618-154">Dans Internet Explorer, visitez le site Web `http://localhost/certsrv`.</span><span class="sxs-lookup"><span data-stu-id="af618-154">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span> <span data-ttu-id="af618-155">Sur le **Bienvenue** , cliquez sur **demander un certificat**, puis cliquez sur **demande de certificat avancée** sur la **demander un certificat** page.</span><span class="sxs-lookup"><span data-stu-id="af618-155">On the **Welcome** page, click **Request a Certificate**, and then click **Advanced certificate request** on the **Request a Certificate** page.</span></span>  
  
    2.  <span data-ttu-id="af618-156">Sur le **demande de certificat avancée** , cliquez sur **créer et soumettre une demande à cette autorité de certification**.</span><span class="sxs-lookup"><span data-stu-id="af618-156">On the **Advanced Certificate Request** page, click **Create and submit a request to this CA**.</span></span>  
  
    3.  <span data-ttu-id="af618-157">Sur le **demande de certificat avancée** , tapez `contoso` dans les **nom** zone de texte, sélectionnez **certificat d’authentification Client** à partir de la  **Type de certificat nécessaire** liste déroulante, puis cliquez sur **Submit**.</span><span class="sxs-lookup"><span data-stu-id="af618-157">On the **Advanced Certificate Request** page, type `contoso` in the **Name** text box, select **Client Authentication Certificate** from the **Type of Certificate Needed** drop-down list, and then click **Submit**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="af618-158">Le certificat d’authentification client est utilisé si vous exécutez BizTalk Server sur un ordinateur distinct du contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="af618-158">The client authentication certificate is used if you are running BizTalk Server on machine other than the Domain Controller.</span></span> <span data-ttu-id="af618-159">La configuration s'effectue dans la boîte de dialogue des propriétés de l'adaptateur.</span><span class="sxs-lookup"><span data-stu-id="af618-159">This will be configured in the adapter’s property dialog.</span></span>  
  
4.  <span data-ttu-id="af618-160">Émettez les certificats à l'aide de la console de gestion d’autorité de certification comme suit :</span><span class="sxs-lookup"><span data-stu-id="af618-160">Issue the certificates by using the Certification Authority management console as follows:</span></span>  
  
    1.  <span data-ttu-id="af618-161">Cliquez sur **Démarrer**, pointez sur **outils d’administration**, puis cliquez sur **autorité de Certification**.</span><span class="sxs-lookup"><span data-stu-id="af618-161">Click **Start**, point to **Administrative Tools**, and then click **Certification Authority**.</span></span>  
  
    2.  <span data-ttu-id="af618-162">Dans le **autorité de Certification** console d’administration, développez le nom de votre autorité de certification, puis double-cliquez sur **demande en attente**.</span><span class="sxs-lookup"><span data-stu-id="af618-162">In the **Certification Authority** management console, expand your certification authority's name, and then double-click **Pending Request**.</span></span>  
  
    3.  <span data-ttu-id="af618-163">Dans le volet droit de la **autorité de Certification** console de gestion, cliquez sur la demande pour le certificat d’authentification de service, pointez sur **toutes les tâches**, puis cliquez sur **problème** .</span><span class="sxs-lookup"><span data-stu-id="af618-163">In the right pane of the **Certification Authority** management console, right-click the request for the service authentication certificate, point to **All Tasks**, and then click **Issue**.</span></span>  
  
    4.  <span data-ttu-id="af618-164">Dans le volet droit de la **autorité de Certification** console de gestion, avec le bouton droit de la demande de certificat d’authentification client, pointez sur **toutes les tâches**, puis cliquez sur **problème** .</span><span class="sxs-lookup"><span data-stu-id="af618-164">In the right pane of the **Certification Authority** management console, right-click the request for the client authentication certificate, point to **All Tasks**, and then click **Issue**.</span></span>  
  
    5.  <span data-ttu-id="af618-165">Fermer le **autorité de Certification** console de gestion.</span><span class="sxs-lookup"><span data-stu-id="af618-165">Close the **Certification Authority** management console.</span></span>  
  
5.  <span data-ttu-id="af618-166">Installez les certificats émis sur votre ordinateur comme suit :</span><span class="sxs-lookup"><span data-stu-id="af618-166">Install the issued certificates on your computer as follows:</span></span>  
  
    1.  <span data-ttu-id="af618-167">Dans Internet Explorer, visitez le site Web `http://localhost/certsrv`.</span><span class="sxs-lookup"><span data-stu-id="af618-167">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span>  
  
    2.  <span data-ttu-id="af618-168">Sur le **Bienvenue** , cliquez sur **afficher l’état d’une demande de certificat en attente**.</span><span class="sxs-lookup"><span data-stu-id="af618-168">On the **Welcome** page, click **View the status of a pending certificate request**.</span></span>  
  
    3.  <span data-ttu-id="af618-169">Sur le **afficher l’état d’une demande de certificat en attente** , cliquez sur le certificat d’authentification serveur.</span><span class="sxs-lookup"><span data-stu-id="af618-169">On the **View the Status of a Pending Certificate Request** page, click the server authentication certificate.</span></span>  
  
    4.  <span data-ttu-id="af618-170">Sur le **délivré** , cliquez sur **installer ce certificat**.</span><span class="sxs-lookup"><span data-stu-id="af618-170">On the **Certificate Issued** page, click **Install this Certificate**.</span></span>  
  
    5.  <span data-ttu-id="af618-171">Dans Internet Explorer, visitez le site Web `http://localhost/certsrv`.</span><span class="sxs-lookup"><span data-stu-id="af618-171">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span>  
  
    6.  <span data-ttu-id="af618-172">Sur le **Bienvenue** , cliquez sur **afficher l’état d’une demande de certificat en attente**.</span><span class="sxs-lookup"><span data-stu-id="af618-172">On the **Welcome** page, click **View the status of a pending certificate request**.</span></span>  
  
    7.  <span data-ttu-id="af618-173">Sur le **afficher l’état d’une demande de certificat en attente** , cliquez sur le certificat d’authentification client.</span><span class="sxs-lookup"><span data-stu-id="af618-173">On the **View the Status of a Pending Certificate Request** page, click the client authentication certificate.</span></span>  
  
    8.  <span data-ttu-id="af618-174">Sur le **délivré** , cliquez sur **installer ce certificat**.</span><span class="sxs-lookup"><span data-stu-id="af618-174">On the **Certificate Issued** page, click **Install this Certificate**.</span></span>  
  
6.  <span data-ttu-id="af618-175">Assurez-vous que les certificats émis sont correctement installés comme suit :</span><span class="sxs-lookup"><span data-stu-id="af618-175">Make sure that the issued certificates are installed properly as follows:</span></span>  
  
    1.  <span data-ttu-id="af618-176">Ouvrez Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="af618-176">Open Microsoft Management Console (MMC).</span></span> <span data-ttu-id="af618-177">Pour ce faire, cliquez sur **Démarrer**, cliquez sur **exécuter**, type `mmc`, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="af618-177">To do so, click **Start**, click **Run**, type `mmc`, and then click **OK**.</span></span>  
  
    2.  <span data-ttu-id="af618-178">Dans la console MMC, sur le **fichier** menu, cliquez sur **ajouter/supprimer un composant logiciel enfichable**.</span><span class="sxs-lookup"><span data-stu-id="af618-178">In the MMC, on the **File** menu, click **Add/Remove Snap-in**.</span></span>  
  
    3.  <span data-ttu-id="af618-179">Dans la boîte de dialogue **Ajouter/Supprimer un composant logiciel enfichable** , cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="af618-179">In the **Add/Remove Snap-in** dialog box, click **Add**.</span></span>  
  
    4.  <span data-ttu-id="af618-180">Dans le **ajouter Standalone Snap-in** boîte de dialogue, sélectionnez **certificats** à partir de la **le composant logiciel enfichable autonome disponible** liste, puis cliquez sur **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="af618-180">In the **Add Standalone Snap-in** dialog box, select **Certificates** from the **Available standalone snap-in** list, and then click **Add**.</span></span>  
  
    5.  <span data-ttu-id="af618-181">Dans le **enfichable Certificats** boîte de dialogue, sélectionnez le **mon compte d’utilisateur** option, puis cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="af618-181">In the **Certificate snap-in** dialog box, select the **My user account** option, and then click **Finish**.</span></span>  
  
    6.  <span data-ttu-id="af618-182">Fermez toutes les boîtes de dialogue ouvertes.</span><span class="sxs-lookup"><span data-stu-id="af618-182">Close all of the open dialog boxes.</span></span>  
  
    7.  <span data-ttu-id="af618-183">Dans la console MMC, dans la fenêtre racine de la Console, développez **certificats - utilisateur actuel**, développez **personnel**, développez **certificats**et vérifiez que les certificats que vous avez installé à l’étape précédente sont affichés.</span><span class="sxs-lookup"><span data-stu-id="af618-183">In the MMC, in the Console Root window, expand **Certificates - Current User**, expand **Personal**, expand **Certificates**, and then make sure that the certificates that you installed in the previous step are displayed.</span></span>  
  
## <a name="create-the-biztalk-application-for-this-walkthrough"></a><span data-ttu-id="af618-184">Créer l’application BizTalk pour cette procédure pas à pas</span><span class="sxs-lookup"><span data-stu-id="af618-184">Create the BizTalk application for this walkthrough</span></span>  
  
1.  <span data-ttu-id="af618-185">Cliquez sur **Démarrer**, pointez sur **tous les programmes**, pointez sur [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], puis cliquez sur **Administration de BizTalk Server**.</span><span class="sxs-lookup"><span data-stu-id="af618-185">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
2.  <span data-ttu-id="af618-186">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **groupe BizTalk**, avec le bouton droit **Applications**, pointez sur **nouveau**, puis cliquez sur **Application** .</span><span class="sxs-lookup"><span data-stu-id="af618-186">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, right-click **Applications**, point to **New**, and then click **Application**.</span></span>  
  
3.  <span data-ttu-id="af618-187">Dans le **propriétés de l’Application** boîte de dialogue le **général** , tapez `WcfMessageSecurity`, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="af618-187">In the **Application Properties** dialog box, on the **General** tab, type `WcfMessageSecurity`, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="af618-188">Créez un emplacement de réception à l'aide de l'adaptateur WCF-NetTcp pour l'application BizTalk comme suit :</span><span class="sxs-lookup"><span data-stu-id="af618-188">Create a receive location using the WCF-NetTcp adapter for the BizTalk application as follows:</span></span>  
  
    1.  <span data-ttu-id="af618-189">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **WcfMessageSecurity**, avec le bouton droit **Ports de réception**, pointez sur **nouveau**, puis cliquez sur  **Unidirectionnel Port de réception.**</span><span class="sxs-lookup"><span data-stu-id="af618-189">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WcfMessageSecurity**, right-click **Receive Ports**, point to **New**, and then click **One-way Receive Port.**</span></span>  
  
    2.  <span data-ttu-id="af618-190">Dans le **propriétés du Port de réception** boîte de dialogue le **nom** zone de texte, tapez `WcfMessageSecurity.OrderRequest.Receive`, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="af618-190">In the **Receive Port Properties** dialog box, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Receive`, and then click **OK**.</span></span> <span data-ttu-id="af618-191">Le nom de ce port de réception est totalement arbitraire, mais il possède une signification logique.</span><span class="sxs-lookup"><span data-stu-id="af618-191">The name of this receive port is strictly arbitrary but this name makes logical sense.</span></span>  
  
    3.  <span data-ttu-id="af618-192">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, avec le bouton droit **emplacements de réception**, cliquez sur **nouveau**, puis cliquez sur **emplacement de réception unidirectionnel**.</span><span class="sxs-lookup"><span data-stu-id="af618-192">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **Receive Locations**, click **New**, and then click **One-way Receive Location**.</span></span> <span data-ttu-id="af618-193">Le client [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] envoie un message [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] à cet emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="af618-193">The [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client will send a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message to this receive location.</span></span> <span data-ttu-id="af618-194">Sélectionnez le **WcfMessageSecurity.OrderRequest.Receive** port de réception, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="af618-194">Select the **WcfMessageSecurity.OrderRequest.Receive** recive port, and then click **OK**.</span></span>  
  
    4.  <span data-ttu-id="af618-195">Dans le **propriétés de l’emplacement de réception** boîte de dialogue le **nom** zone de texte, tapez `WcfMessageSecurity.OrderRequest.Receive.NetTcp`.</span><span class="sxs-lookup"><span data-stu-id="af618-195">In the **Receive Location Properties** dialog box, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Receive.NetTcp`.</span></span> <span data-ttu-id="af618-196">Le nom de cet emplacement de réception est totalement arbitraire, mais il possède une signification logique.</span><span class="sxs-lookup"><span data-stu-id="af618-196">The name of this receive location is strictly arbitrary but this name makes logical sense.</span></span>  
  
    5.  <span data-ttu-id="af618-197">Dans le **propriétés de l’emplacement de réception** boîte de dialogue le **Transport** section à côté **Type**, sélectionnez **WCF-NetTcp** dans la liste déroulante. liste, puis cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="af618-197">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **WCF-NetTcp** from the drop-down list, and then click **Configure**.</span></span>  
  
    6.  <span data-ttu-id="af618-198">Dans le **propriétés du Transport WCF-NetTcp** boîte de dialogue le **général** sous l’onglet du **adresse (URI)** zone de texte, tapez `net.tcp://localhost/WcfMessageSecurity`.</span><span class="sxs-lookup"><span data-stu-id="af618-198">In the **WCF-NetTcp Transport Properties** dialog box, on the **General** tab, in the **Address (URI)** text box, type `net.tcp://localhost/WcfMessageSecurity`.</span></span>  
  
    7.  <span data-ttu-id="af618-199">Dans le **propriétés du Transport WCF-NetTcp** boîte de dialogue le **sécurité** onglet, sélectionnez **Message** à partir de la **mode de sécurité** liste déroulante liste, puis sélectionnez **certificat** à partir de la **type d’informations d’identification de client de Message** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="af618-199">In the **WCF-NetTcp Transport Properties** dialog box, on the **Security** tab, select **Message** from the **Security mode** drop-down list, and then select **Certificate** from the **Message client credential type** drop-down list.</span></span> <span data-ttu-id="af618-200">Cela a pour effet de configurer l'adaptateur WCF-NetTcp de manière à utiliser le mode de sécurité Message.</span><span class="sxs-lookup"><span data-stu-id="af618-200">This configures the WCF-NetTcp adapter to use the Message security mode.</span></span>  
  
    8.  <span data-ttu-id="af618-201">Configurez le certificat de service à utiliser avec le mode de sécurité Message.</span><span class="sxs-lookup"><span data-stu-id="af618-201">Configure the service certificate to use with Message security mode.</span></span> <span data-ttu-id="af618-202">Dans le **propriétés du Transport WCF-NetTcp** boîte de dialogue le **certification du Service** , cliquez sur **Parcourir**.</span><span class="sxs-lookup"><span data-stu-id="af618-202">In the **WCF-NetTcp Transport Properties** dialog box, in the **Service certification** section, click **Browse**.</span></span> <span data-ttu-id="af618-203">Dans le **certificat de service Select** boîte de dialogue, sélectionnez le certificat d’authentification serveur installé dans la procédure précédente, puis cliquez sur **OK** pour fermer la boîte de dialogue et enregistrer les modifications.</span><span class="sxs-lookup"><span data-stu-id="af618-203">In the **Select service certificate** dialog box, select the server authentication certificate you installed in the previous procedure, and then click **OK** to close the dialog box and save the changes.</span></span>  
  
    9. <span data-ttu-id="af618-204">Fermez toutes les boîtes de dialogue ouvertes.</span><span class="sxs-lookup"><span data-stu-id="af618-204">Close all of the open dialog boxes.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="af618-205">Pour authentifier les certificats clients à l'aide des adaptateurs de réception [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], la chaîne de certificat de l'autorité de certification des certificats clients doit être installée dans le magasin de certificats Autorités de certification racine approuvées de l'ordinateur exécutant les instances d'hôte des adaptateurs [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="af618-205">To authenticate the client certificates with the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] receive adapters, the CA certificate chain for the client certificates must be installed in the Trusted Root Certification Authorities certificate store of the computer running the host instances for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapters.</span></span> <span data-ttu-id="af618-206">Étant donné que cette procédure pas à pas suppose que le service de certificat soit installé sur le même ordinateur que le client [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] et les adaptateurs [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], il est inutile d'installer la chaîne de certificats de l'autorité de certification sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="af618-206">Because this walkthrough assumes that the certificate service is installed on the same computer as the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapters, you do not have to install the CA certificate chain on your computer.</span></span>  
  
5.  <span data-ttu-id="af618-207">Créez un port d'envoi FILE pour l'application BizTalk.</span><span class="sxs-lookup"><span data-stu-id="af618-207">Create a FILE send port for the BizTalk application.</span></span> <span data-ttu-id="af618-208">Il s'agit de l'emplacement où le message sortant de la demande de commande est envoyé par l'orchestration représentant le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="af618-208">This is the location where the order request output message will be sent by the orchestration representing the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
    1.  <span data-ttu-id="af618-209">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **WcfMessageSecurity**, avec le bouton droit **Ports d’envoi**, pointez sur **nouveau**, puis cliquez sur **statique Port d’envoi unidirectionnel.**</span><span class="sxs-lookup"><span data-stu-id="af618-209">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WcfMessageSecurity**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port.**</span></span>  
  
    2.  <span data-ttu-id="af618-210">Dans le **propriétés de Port d’envoi** boîte de dialogue le **général** sous l’onglet du **nom** zone de texte, tapez `WcfMessageSecurity.OrderRequest.Send.FILE`.</span><span class="sxs-lookup"><span data-stu-id="af618-210">In the **Send Port Properties** dialog box, on the **General**  tab, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Send.FILE`.</span></span>  
  
    3.  <span data-ttu-id="af618-211">Dans le **propriétés de Port d’envoi** boîte de dialogue le **Transport** section à côté **Type**, sélectionnez **fichier** dans la liste déroulante, puis Cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="af618-211">In the **Send Port Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    4.  <span data-ttu-id="af618-212">Dans le **propriétés du Transport FILE** boîte de dialogue le **général** , tapez `C:\WCFMessageSecurity\OrderRequestOut` dans les **dossier de Destination** zone de texte, puis cliquez sur **OK** .</span><span class="sxs-lookup"><span data-stu-id="af618-212">In the **FILE Transport Properties** dialog box, on the **General**  tab, type `C:\WCFMessageSecurity\OrderRequestOut` in the **Destination folder** text box, and then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="af618-213">Dans le **propriétés de Port d’envoi** boîte de dialogue le **filtres** onglet, sélectionnez **BTS. ReceivePortName** pour le **propriété** , entrez `WcfMessageSecurity.OrderRequest.Receive` pour le **valeur** champ, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="af618-213">In the **Send Port Properties** dialog box, on the **Filters** tab, select **BTS.ReceivePortName** for the **Property** field, enter `WcfMessageSecurity.OrderRequest.Receive` for the **Value** field, and then click **OK**.</span></span> <span data-ttu-id="af618-214">Cette expression de filtre route entrant [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] des messages du client dans le **WcfMessageSecurity.OrderRequest.Receive** port de réception pour ce port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="af618-214">This filter expression routes the incoming [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from the client into the **WcfMessageSecurity.OrderRequest.Receive** receive port to this send port.</span></span>  
  
## <a name="test-the-wcf-client-against-the-biztalk-application"></a><span data-ttu-id="af618-215">Tester le client WCF par rapport à l’application BizTalk</span><span class="sxs-lookup"><span data-stu-id="af618-215">Test the WCF client against the BizTalk application</span></span>  
  
1.  <span data-ttu-id="af618-216">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, cliquez sur **WcfMessageSecurity**, puis cliquez sur **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="af618-216">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WcfMessageSecurity**, and then click **Start**.</span></span> <span data-ttu-id="af618-217">Dans le **Démarrer** boîte de dialogue, cliquez sur **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="af618-217">In the **Start** dialog box, click **Start**.</span></span>  
  
2.  <span data-ttu-id="af618-218">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **paramètres de plateforme**, développez **Instances d’hôte**, avec le bouton droit **BizTalkServerApplication** ou un autre approprié d’instance d’hôte, puis cliquez sur **redémarrer**.</span><span class="sxs-lookup"><span data-stu-id="af618-218">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, expand **Host Instances**, right-click **BizTalkServerApplication** or another appropriate host instance, and then click **Restart**.</span></span>  
  
3.  <span data-ttu-id="af618-219">Créez un dossier nommé **C:\WCFMessageSecurity** pour le dossier de travail pour cette procédure pas à pas.</span><span class="sxs-lookup"><span data-stu-id="af618-219">Create a folder named **C:\WCFMessageSecurity** for the working folder for this walkthrough.</span></span> <span data-ttu-id="af618-220">Extrayez les fichiers de la procédure pas à pas dans ce dossier.</span><span class="sxs-lookup"><span data-stu-id="af618-220">Extract the walkthrough files to this folder.</span></span>  
  
4.  <span data-ttu-id="af618-221">Dans [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], ouvrez le **WcfMessageSecurity.sln** de fichiers dans le **C:\WCFMessageSecurity** dossier.</span><span class="sxs-lookup"><span data-stu-id="af618-221">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], open the **WcfMessageSecurity.sln** file in the **C:\WCFMessageSecurity** folder.</span></span>  
  
5.  <span data-ttu-id="af618-222">Dans [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], dans l’Explorateur de solutions, développez **WcfClient**, puis ouvrez **Program.cs** pour passer en revue.</span><span class="sxs-lookup"><span data-stu-id="af618-222">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], in Solution Explorer, expand **WcfClient**, and then open **Program.cs** to review.</span></span>  
  
    -   <span data-ttu-id="af618-223">Le client envoie un message à l'emplacement de réception WCF-NetTcp que vous avez créé dans la procédure précédente.</span><span class="sxs-lookup"><span data-stu-id="af618-223">The client sends a message to the WCF-NetTcp receive location that you created in the previous procedure.</span></span>  
  
    -   <span data-ttu-id="af618-224">Le client crée un canal avec le **NetTcpBinding**, puis configure la liaison à utiliser des certificats pour le type d’informations d’identification du client.</span><span class="sxs-lookup"><span data-stu-id="af618-224">The client creates a channel with the **NetTcpBinding**, and then configures the binding to use certificates for the client credential type.</span></span>  
  
    -   <span data-ttu-id="af618-225">Le client configure le comportement du point de terminaison pour qu'il utilise le certificat d'authentification client que vous avez installé dans la procédure précédente pour l'authentification du client.</span><span class="sxs-lookup"><span data-stu-id="af618-225">The client configures the endpoint behavior to use the client authentication certificate that you installed in the previous procedure for the client authentication.</span></span>  
  
    -   <span data-ttu-id="af618-226">La classe, **programme**, implémente la **IClientMessageInspector** et **IEndpointBehavior** interfaces pour afficher la sortie [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages à partir de ce client à une invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="af618-226">The class, **Program**, implements the **IClientMessageInspector** and **IEndpointBehavior** interfaces to display outgoing [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from this client at a command prompt.</span></span>  
  
6.  <span data-ttu-id="af618-227">Dans [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], dans l’Explorateur de solutions, cliquez sur le **WcfMessageSecurity** solution, puis cliquez sur **reconstruire**.</span><span class="sxs-lookup"><span data-stu-id="af618-227">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], in Solution Explorer, right-click the **WcfMessageSecurity** solution, and then click **Rebuild**.</span></span>  
  
7.  <span data-ttu-id="af618-228">Dans [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], dans le **déboguer** menu, cliquez sur **démarrer sans débogage** pour exécuter WCFClient de manière à envoyer des emplacements de réception d’un message WCF-NetTcp.</span><span class="sxs-lookup"><span data-stu-id="af618-228">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], on the **Debug** menu, click **Start Without Debugging** to run the WcfClient to send a message to the WCF-NetTcp receive locations.</span></span> <span data-ttu-id="af618-229">Une invite de commandes apparaît pour afficher le résultat de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="af618-229">A command prompt appears to show the execution result.</span></span>  
  
    1.  <span data-ttu-id="af618-230">À l'invite de commandes, examinez le message de demande de commande.</span><span class="sxs-lookup"><span data-stu-id="af618-230">At the command prompt, review the order request message.</span></span> <span data-ttu-id="af618-231">Faites attention à la **OrderId** champ et la structure du message.</span><span class="sxs-lookup"><span data-stu-id="af618-231">Pay attention to the **OrderId** field and the structure of the message.</span></span>  
  
    2.  <span data-ttu-id="af618-232">À l’invite de commandes, accédez à la `C:\WCFMessageSecurity\OrderRequestOut` dossier, puis assurez-vous que le message de demande de commande envoyé par le [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client s’affiche.</span><span class="sxs-lookup"><span data-stu-id="af618-232">At the command prompt, go to the `C:\WCFMessageSecurity\OrderRequestOut` folder, and then make sure the order request message sent by the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client appears.</span></span>  
  
    3.  <span data-ttu-id="af618-233">Fermez l'invite de commande.</span><span class="sxs-lookup"><span data-stu-id="af618-233">Close the command prompt.</span></span>