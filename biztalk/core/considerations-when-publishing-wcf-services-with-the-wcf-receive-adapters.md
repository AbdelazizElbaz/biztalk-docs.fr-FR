---
title: "Considérations relatives à la publication de Services WCF avec WCF des adaptateurs de réception | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- publishing, WCF services
- WCF adapters, best practices
- WCF adapters, receive adapters
- WCF services, publishing
- best practices, WCF adapters
ms.assetid: 797b7ffd-534c-4f09-9738-fb17b208bc96
caps.latest.revision: "34"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 30175e7966d565306c45820f1a6c2e22e4611876
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2017
---
# <a name="considerations-when-publishing-wcf-services-with-the-wcf-receive-adapters"></a><span data-ttu-id="d341c-102">Considérations relatives à la publication de services WCF à l'aide des adaptateurs de réception WCF</span><span class="sxs-lookup"><span data-stu-id="d341c-102">Considerations When Publishing WCF Services with the WCF Receive Adapters</span></span>
<span data-ttu-id="d341c-103">Cette rubrique fournit des informations à prendre en compte lors de la publication des services WCF à l'aide des adaptateurs de réception WCF.</span><span class="sxs-lookup"><span data-stu-id="d341c-103">This topic provides information that you should take into consideration when publishing WCF services with the WCF receive adapters.</span></span>  <span data-ttu-id="d341c-104">La publication d'un service à l'aide d'un adaptateur WCF permet son appel par un client WCF comme s'il s'agissait d'un service WCF classique.</span><span class="sxs-lookup"><span data-stu-id="d341c-104">Publishing a service using a WCF adapter allows it to be called by a WCF client as if it were a typical WCF service.</span></span>  
  
## <a name="in-process-hosting"></a><span data-ttu-id="d341c-105">Hébergement in-process</span><span class="sxs-lookup"><span data-stu-id="d341c-105">In-Process Hosting</span></span>  
 <span data-ttu-id="d341c-106">L'hébergement de l'emplacement de réception dans l'espace de processus [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], btsntsvc.exe, offre les avantages d'un développement et d'un déploiement simplifiés.</span><span class="sxs-lookup"><span data-stu-id="d341c-106">Hosting the receive location within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process space, btsntsvc.exe, allows the benefits of simplified development and deployment.</span></span> <span data-ttu-id="d341c-107">En outre, il crée plus d'instances d'hôte que l'hébergement dans IIS afin de bénéficier de la haute disponibilité et des fonctionnalités d'équilibrage de charge de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d341c-107">Additionally, it creates more host instances than hosting in IIS to take advantage of the high-availability and load balancing capabilities of  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  <span data-ttu-id="d341c-108">Pour plus d’informations d’hébergement en dehors de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] faire des processus dans IIS [de configurer IIS pour les adaptateurs de réception WCF isolés](../core/configuring-iis-for-the-isolated-wcf-receive-adapters.md).</span><span class="sxs-lookup"><span data-stu-id="d341c-108">For information in hosting outside of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process in IIS refer to [Configuring IIS for the Isolated WCF Receive Adapters](../core/configuring-iis-for-the-isolated-wcf-receive-adapters.md).</span></span>  
  
## <a name="set-the-isoneway-property-of-wcf-services-published-with-the-wcf-adapters-except-for-the-wcf-netmsmq-receive-adapter-to-false"></a><span data-ttu-id="d341c-109">Définition sur false de la propriété IsOneWay des services WCF publiés à l'aide des adaptateurs WCF (à l'exception de l'adaptateur de réception WCF-NetMsmq)</span><span class="sxs-lookup"><span data-stu-id="d341c-109">Set the IsOneWay property of WCF services published with the WCF adapters (except for the WCF-NetMsmq receive adapter) to false</span></span>  
 <span data-ttu-id="d341c-110">Le **System.ServiceModel.OperationContractAttribute.IsOneWay** propriété des services WCF publiés avec les adaptateurs WCF, à l’exception des services publiés avec WCF-NetMsmq où elle est définie sur l’adaptateur de réception **true**  , a la valeur **false** même pour les emplacements de réception l’unidirectionnels.</span><span class="sxs-lookup"><span data-stu-id="d341c-110">The **System.ServiceModel.OperationContractAttribute.IsOneWay** property of WCF services published with the WCF adapters—except for services published with the WCF-NetMsmq receive adapter where it is set to **true** —is set to **false** even for the one-way receive locations.</span></span> <span data-ttu-id="d341c-111">Si le **IsOneWay** est définie sur **false**, même les méthodes qui retournent un **void** génèrent un message de réponse.</span><span class="sxs-lookup"><span data-stu-id="d341c-111">If the **IsOneWay** property is set to **false**, even methods that return a **void** result in a reply message.</span></span> <span data-ttu-id="d341c-112">Dans ce cas, l'infrastructure crée et envoie un message vide pour indiquer à l'appelant que la méthode est renvoyée.</span><span class="sxs-lookup"><span data-stu-id="d341c-112">In this case, the infrastructure creates and sends an empty message to indicate to the caller that the method has returned.</span></span> <span data-ttu-id="d341c-113">Grâce à cette approche, l'infrastructure peut renvoyer au client des exceptions générées par l'opération du service.</span><span class="sxs-lookup"><span data-stu-id="d341c-113">Using this approach enables the infrastructure to send exceptions thrown by the service operation back to the client.</span></span>  
  
 <span data-ttu-id="d341c-114">Pour consommer des services WCF publiés avec les adaptateurs WCF (sauf l’adaptateur de réception WCF-netmsmq) dans lequel **IsOneWay** est **false**, le **IsOneWay** propriété sur le côté client doit être définie sur **false** comme suit :</span><span class="sxs-lookup"><span data-stu-id="d341c-114">To consume WCF services published with the WCF adapters (except for the WCF-NetMsmq receive adapter) in which **IsOneWay** is **false**, the **IsOneWay** property on the client side must be set to **false** as follows:</span></span>  
  
```  
[ServiceContract(Namespace="Microsoft.WCF.Documentation")]  
  public interface ISampleService{  
    [OperationContract(IsOneWay=false, ReplyAction="*",Action="…"]  
    string SampleMethod(string msg);  
}  
```  
  
> [!NOTE]
>  <span data-ttu-id="d341c-115">Étant donné que la valeur par défaut de la **IsOneWay** propriété **false**, vous n’êtes pas obligé de spécifier la propriété dans le code.</span><span class="sxs-lookup"><span data-stu-id="d341c-115">Because the default value of the **IsOneWay** property is **false**, you do not have to specify the property in the code.</span></span>  
  
## <a name="the-replyaction-property-of-the-operationcontractattribute-on-the-client-side-should-be-set-to--an-asterisk-when-consuming-wcf-services-published-with-one-way-receive-locations"></a><span data-ttu-id="d341c-116">La propriété ReplyAction de OperationContractAttribute côté client doit être définie sur « * » (astérisque) lors de l'utilisation de services WCF publiés à l'aide d'emplacements de réception unidirectionnels</span><span class="sxs-lookup"><span data-stu-id="d341c-116">The ReplyAction property of the OperationContractAttribute on the client side should be set to "*" (an asterisk) when consuming WCF services published with one-way receive locations</span></span>  
 <span data-ttu-id="d341c-117">Le **System.ServiceModel.OperationContractAttribute.ReplyAction** propriété de la **System.ServiceModel.OperationContractAttribute** peut être utilisé côté client pour spécifier la valeur de la Action SOAP pour les messages de réponse des services WCF.</span><span class="sxs-lookup"><span data-stu-id="d341c-117">The **System.ServiceModel.OperationContractAttribute.ReplyAction** property of the **System.ServiceModel.OperationContractAttribute** can be used on the client side to specify the value of the SOAP action for the response messages from WCF services.</span></span>  
  
 <span data-ttu-id="d341c-118">En plus d'attribuer une valeur particulière à l'en-tête d'action du message de réponse (pour informer le client qu'il s'agit d'une réponse et lui indiquer l'action à effectuer), vous pouvez spécifier la chaîne « * » (astérisque).</span><span class="sxs-lookup"><span data-stu-id="d341c-118">In addition to specifying a particular value for the action header of the reply message (to notify the client this is a reply and what action to be taken), you can also specify the string "*" (an asterisk).</span></span> <span data-ttu-id="d341c-119">Dans une application cliente, cet astérisque permet de demander au client de ne pas valider l'action de réponse dans les messages de réponse envoyés par le service.</span><span class="sxs-lookup"><span data-stu-id="d341c-119">Specifying an asterisk in a client application instructs the client not to validate the reply action in response messages that the service sends.</span></span>  
  
 <span data-ttu-id="d341c-120">Pour consommer un service WCF service publié par unidirectionnel emplacement de réception, la méthode proxy pour le service WCF doit retourner **void**, auquel cas la méthode proxy attend que le service WCF envoie un message vide pour indiquer à l’appelant qui la méthode est renvoyée.</span><span class="sxs-lookup"><span data-stu-id="d341c-120">To consume a WCF service published by a one-way receive location, the proxy method for the WCF service must return **void**, in which case the proxy method expects that the WCF service will send an empty message to indicate to the caller that the method has returned.</span></span> <span data-ttu-id="d341c-121">Pour la méthode proxy reçoive ce message vide, le **ReplyAction** propriété de la **OperationContractAttribute** doit être défini sur « * » (astérisque) comme suit :</span><span class="sxs-lookup"><span data-stu-id="d341c-121">For the proxy method to receive this empty message, the **ReplyAction** property of the **OperationContractAttribute** should be set to "*" (an asterisk) as follows:</span></span>  
  
```  
[ServiceContract(Namespace="Microsoft.WCF.Documentation")]  
  public interface ISampleService{  
    [OperationContract(IsOneWay=false, ReplyAction="*",Action="…"]  
    string SampleMethod(string msg);  
}  
```  
  
> [!NOTE]
>  <span data-ttu-id="d341c-122">Vous n’êtes pas obligé de définir le **ReplyAction** propriété »\*» (astérisque) pour l’adaptateur WCF-NetMsmq, car l’adaptateur WCF-NetMsmq requiert les clients WCF définir le **IsOneWay** propriété **true**.</span><span class="sxs-lookup"><span data-stu-id="d341c-122">You do not have to set the **ReplyAction** property to "\*" (an asterisk) for the WCF-NetMsmq adapter, because the WCF-NetMsmq adapter requires the WCF clients to set the **IsOneWay** property to **true**.</span></span>  
  
## <a name="an-isolated-host-instance-can-run-only-one-adapter"></a><span data-ttu-id="d341c-123">Une instance d'hôte isolé ne peut exécuter qu'un seul adaptateur</span><span class="sxs-lookup"><span data-stu-id="d341c-123">An isolated host instance can run only one adapter</span></span>  
 <span data-ttu-id="d341c-124">Une instance d'hôte isolé ne peut exécuter qu'un seul adaptateur.</span><span class="sxs-lookup"><span data-stu-id="d341c-124">An isolated host instance can run only one adapter.</span></span> <span data-ttu-id="d341c-125">Si vous configurez les gestionnaires de réception de plusieurs adaptateurs isolés, tels que des adaptateurs HTTP, SOAP et WCF, avec un seul hôte isolé, vous devez créer plusieurs pools d'applications, soit un pool d'applications par adaptateur.</span><span class="sxs-lookup"><span data-stu-id="d341c-125">If you configure the receive handlers of multiple isolated adapters such as HTTP, SOAP, and WCF adapters with one isolated host, you must create multiple application pools, one application pool for each adapter.</span></span> <span data-ttu-id="d341c-126">Pour plus d’informations sur les hôtes BizTalk isolé, consultez [activation des Services Web](../core/enabling-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="d341c-126">For more information about BizTalk isolated hosts, see [Enabling Web Services](../core/enabling-web-services.md).</span></span>  
  
## <a name="use-the-template----content-specified-by-template-option-when-sending-non-xml-content-as-response-messages"></a><span data-ttu-id="d341c-127">Utilisation de l'option « Modèle -- contenu spécifié par le modèle » lors de l'envoi de contenu non-XML en tant que messages de réponse</span><span class="sxs-lookup"><span data-stu-id="d341c-127">Use the "Template -- content specified by template" option when sending non-XML content as response messages</span></span>  
 <span data-ttu-id="d341c-128">Les adaptateurs WCF avec **corps--corps du message de réponse BizTalk** (la valeur par défaut) option n’autorisent pas l’envoi de messages non-XML tels que des images bitmap et des données de caractères.</span><span class="sxs-lookup"><span data-stu-id="d341c-128">The WCF adapters with **Body -- BizTalk response message body** (the default value) option do not allow sending non-XML messages such as character data and bitmap images.</span></span> <span data-ttu-id="d341c-129">Vous pouvez utiliser la **modèle--contenu spécifié par le modèle** option pour les adaptateurs WCF envoyer des messages non XML.</span><span class="sxs-lookup"><span data-stu-id="d341c-129">You can use the **Template -- content specified by template** option for the WCF adapters to send non-XML messages.</span></span> <span data-ttu-id="d341c-130">Pour plus d’informations sur la façon d’utiliser le modèle, consultez [spécifiant le corps du Message pour les adaptateurs WCF](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span><span class="sxs-lookup"><span data-stu-id="d341c-130">For more information about how to use the template, see [Specifying the Message Body for the WCF Adapters](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span></span>  
  
## <a name="setting-up-the-permissions-for-a-wcf-service-published-with-the-wcf-service-publishing-wizard"></a><span data-ttu-id="d341c-131">Configuration des autorisations pour un service WCF publié à l'aide de l'Assistant Publication de services WCF</span><span class="sxs-lookup"><span data-stu-id="d341c-131">Setting up the permissions for a WCF service published with the WCF Service Publishing Wizard</span></span>  
 <span data-ttu-id="d341c-132">Lors de l'utilisation d'applications ASP.NET créées à l'aide de l'Assistant Publication de services WCF sur la plateforme [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] ou [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], des erreurs relatives à l'accès aux DLL lors de l'appel du service WCF peuvent se produire.</span><span class="sxs-lookup"><span data-stu-id="d341c-132">When using ASP.NET applications created with the WCF Service Publishing Wizard on the [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] or [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] platform, errors relating to accessing DLLs during WCF service invocation may occur.</span></span> <span data-ttu-id="d341c-133">Ces erreurs sont généralement associées aux problèmes liés à la sécurité par défaut sous [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] et [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d341c-133">These errors are typically related to issues with default [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] and [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] security.</span></span> <span data-ttu-id="d341c-134">Pour plus d’informations sur ces erreurs, consultez l’article Microsoft Help and Support intitulé « You Receive a « System.IO.FileNotFoundException » erreur lorsque le Client Application appelle un Service Web » sur le site Web aide et Support [http:// go.Microsoft.com/fwlink/ ? LinkId = 43659](http://go.microsoft.com/fwlink/?LinkId=43659).</span><span class="sxs-lookup"><span data-stu-id="d341c-134">For more information about these errors, see the Microsoft Help and Support article called "You Receive a "System.IO.FileNotFoundException" Error When the Client Application Calls a Web Service" on the Help and Support Web site at [http://go.microsoft.com/fwlink/?LinkId=43659](http://go.microsoft.com/fwlink/?LinkId=43659).</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="d341c-135"> requiert que le processus exécutant le service WCF dispose des autorisations appropriées si un hôte in-process ou un hôte isolé exécute le service.</span><span class="sxs-lookup"><span data-stu-id="d341c-135"> requires that the process running the WCF service is granted the appropriate permissions whether an in-process host or an isolated host runs the service.</span></span> <span data-ttu-id="d341c-136">Sous [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] et [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], le groupe Windows par défaut pour les hôtes isolés est le Groupe d'utilisateurs d'hôtes isolés. Ainsi, l'ajout des autorisations au Groupe d'utilisateurs d'hôtes isolés devrait résoudre ce problème.</span><span class="sxs-lookup"><span data-stu-id="d341c-136">Under [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] and [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] the default Windows group for isolated hosts is the Isolated Host Users Group, so adding the permissions to the Isolated Host Users Group should resolve this issue.</span></span>  
  
#### <a name="to-add-the-permissions-to-the-isolated-host-users-group"></a><span data-ttu-id="d341c-137">Pour ajouter les autorisations au Groupe d'utilisateurs d'hôtes isolés</span><span class="sxs-lookup"><span data-stu-id="d341c-137">To add the permissions to the Isolated Host Users Group</span></span>  
  
1.  <span data-ttu-id="d341c-138">Dans l'Explorateur Microsoft Windows, localisez le répertoire % windir%\temp.</span><span class="sxs-lookup"><span data-stu-id="d341c-138">In Microsoft Windows Explorer, locate the %windir%\temp directory.</span></span>  
  
2.  <span data-ttu-id="d341c-139">Cliquez sur % windir%\temp, puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="d341c-139">Right-click %windir%\temp, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="d341c-140">Dans le **propriétés** boîte de dialogue, cliquez sur le **sécurité** onglet.</span><span class="sxs-lookup"><span data-stu-id="d341c-140">In the **Properties** dialog box, click the **Security** tab.</span></span>  
  
4.  <span data-ttu-id="d341c-141">Cliquez sur **ajouter**, sélectionnez **le groupe utilisateurs d’hôtes isolés**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="d341c-141">Click **Add**, select **the Isolated Host Users Group**, and then click **OK**.</span></span>  
  
## <a name="setting-up-the-permissions-for-a-wcf-receive-location-with-the-wcf-netmsmq-adapter"></a><span data-ttu-id="d341c-142">Configuration des autorisations pour un emplacement de réception WCF à l'aide de l'adaptateur WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="d341c-142">Setting up the permissions for a WCF receive location with the WCF-NetMsmq adapter</span></span>  
 <span data-ttu-id="d341c-143">Lorsqu'un client WCF utilisant NetMsmqBinding envoie un message à un service WCF publié à l'aide de l'adaptateur WCF-NetMsmq, il adresse le message à la file d'attente cible, qui est la file d'attente gérée par le gestionnaire de files d'attente du service.</span><span class="sxs-lookup"><span data-stu-id="d341c-143">When a WCF client using the NetMsmqBinding sends a message to a WCF service published with the WCF-NetMsmq adapter, it addresses the message to the target queue, which is the queue managed by the service's queue manager.</span></span> <span data-ttu-id="d341c-144">Le gestionnaire de files d'attente sur le client envoie le message à une file d'attente de transmission (ou sortante).</span><span class="sxs-lookup"><span data-stu-id="d341c-144">The queue manager on the client sends the message to a transmission (or outgoing) queue.</span></span> <span data-ttu-id="d341c-145">La file d'attente de transmission est une file d'attente, située sur le gestionnaire de files d'attente côté client, qui stocke des messages pour les transmettre à la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="d341c-145">The transmission queue is a queue on the client-side queue manager that stores messages for transmission to the target queue.</span></span>  
  
 <span data-ttu-id="d341c-146">Le gestionnaire de files d'attente du service accepte des messages adressés aux files d'attente cibles qu'il possède et stocke les messages.</span><span class="sxs-lookup"><span data-stu-id="d341c-146">The service's queue manager accepts messages addressed to the target queues it owns and stores the messages.</span></span> <span data-ttu-id="d341c-147">Ensuite, le service lance des demandes de lecture à partir de la file d'attente cible. Le gestionnaire de files d'attente livre alors les messages au service.</span><span class="sxs-lookup"><span data-stu-id="d341c-147">Then, the service makes requests to read from the target queue, and the queue manager delivers the messages to the service.</span></span> <span data-ttu-id="d341c-148">C'est la raison pour laquelle le compte de service pour l'instance d'hôte BizTalk hébergeant l'emplacement de réception doit disposer des autorisations de lecture à partir de la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="d341c-148">For this reason, the service account for the BizTalk host instance hosting the receive location should have the permissions to read from the target queue.</span></span>  
  
## <a name="use-an-empty-body-path-expression-to-receive-a-soap-message-with-character-data-in-the-content-of-the-soap-body-element"></a><span data-ttu-id="d341c-149">Utilisation d'une expression de chemin de corps vide pour recevoir un message SOAP contenant des données de type caractère dans l'élément SOAP Body</span><span class="sxs-lookup"><span data-stu-id="d341c-149">Use an empty body path expression to receive a SOAP message with character data in the content of the SOAP Body element</span></span>  
 <span data-ttu-id="d341c-150">Pour un service WCF de réception pour créer un message BizTalk à partir d’un message de réponse entrante avec des données de caractères dans le contenu de SOAP **corps** élément, comme indiqué dans l’exemple suivant, vous devez laisser le **le chemin du corps expression** zone de texte vide sur le **Message** onglet dans la boîte de dialogue Propriétés du transport WCF adaptateur.</span><span class="sxs-lookup"><span data-stu-id="d341c-150">For a WCF receive adapter to create a BizTalk message from an incoming response message with character data in the content of the SOAP **Body** element, as shown in the following example, you should leave the **Body path expression** text box empty on the **Message** tab in the WCF adapter transport properties dialog box.</span></span>  
  
```  
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">  
    <s:Header>  
      ...  
    </s:Header>  
    <s:Body>Contoso</s:Body>  
</s:Envelope>  
```  
  
 <span data-ttu-id="d341c-151">Si vous sélectionnez le **enveloppe** ou **corps** option, l’adaptateur ne peut pas créer le message BizTalk à partir du précédent message entrant.</span><span class="sxs-lookup"><span data-stu-id="d341c-151">If you select the **Envelope** or **Body** option, the adapter cannot create the BizTalk message from the previous incoming message.</span></span> <span data-ttu-id="d341c-152">Le message n'est pas interrompu car les messages échouant au cours du traitement de marshaling SOAP entrant ne sont pas interrompus.</span><span class="sxs-lookup"><span data-stu-id="d341c-152">The message is not suspended because messages that fail in the inbound SOAP marshaling processing are not suspended.</span></span> <span data-ttu-id="d341c-153">Pour plus d’informations sur l’utilisation de l’expression de chemin de corps sur le **Message** , consultez la rubrique [spécifiant le corps du Message pour les adaptateurs WCF](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span><span class="sxs-lookup"><span data-stu-id="d341c-153">For more information about how to use the body path expression on the **Message** tab, see [Specifying the Message Body for the WCF Adapters](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d341c-154">Vous pouvez utiliser l'outil TraceViewer (SvcTraceViewer.exe) du Kit de développement Windows SDK en configurant le fichier BTSNTSvc.exe.config.</span><span class="sxs-lookup"><span data-stu-id="d341c-154">You can use the TraceViewer tool (SvcTraceViewer.exe) in the Windows SDK by configuring the BTSNTSvc.exe.config.file.</span></span> <span data-ttu-id="d341c-155">Pour plus d’informations sur le Kit de développement logiciel Windows, consultez « Nouveautés dans le Kit de développement logiciel Windows » à [http://go.microsoft.com/fwlink/?LinkId=75219](http://go.microsoft.com/fwlink/?LinkId=75219).</span><span class="sxs-lookup"><span data-stu-id="d341c-155">For more information about the Windows SDK, see "What's New in the Windows SDK" at [http://go.microsoft.com/fwlink/?LinkId=75219](http://go.microsoft.com/fwlink/?LinkId=75219).</span></span> <span data-ttu-id="d341c-156">Pour plus d’informations sur l’outil TraceViewer, consultez « TraceViewer Tool (SvcTraceViewer.exe) » à [http://go.microsoft.com/fwlink/?LinkId=75218](http://go.microsoft.com/fwlink/?LinkId=75218).</span><span class="sxs-lookup"><span data-stu-id="d341c-156">For more information about the TraceViewer tool, see "TraceViewer Tool (SvcTraceViewer.exe)" at [http://go.microsoft.com/fwlink/?LinkId=75218](http://go.microsoft.com/fwlink/?LinkId=75218).</span></span>  
  
## <a name="using-schemas-that-reference-other-schemas"></a><span data-ttu-id="d341c-157">Utilisation des schémas faisant référence à d'autres schémas</span><span class="sxs-lookup"><span data-stu-id="d341c-157">Using schemas that reference other schemas</span></span>  
 <span data-ttu-id="d341c-158">Vous pouvez utiliser la **redéfinir**, **incluent**, et **importer** éléments lorsque vos schémas gagnent en taille et complexes, ou lorsque les schémas représentant vos différents types de messages d’instance comportent plusieurs portions en commun.</span><span class="sxs-lookup"><span data-stu-id="d341c-158">You can use the **redefine**, **include**, and **import** elements when your schemas become large and complex, or when the schemas that represent your different types of instance messages have some portions in common.</span></span> <span data-ttu-id="d341c-159">Il peut être utile de combiner des schémas plus petits en des schémas qui définiront la structure finale des messages d'instance que vous prévoyez d'échanger avec des partenaires commerciaux.</span><span class="sxs-lookup"><span data-stu-id="d341c-159">It can be useful to combine smaller schemas into the schemas that ultimately define the structure of the instance messages you plan to exchange with trading partners.</span></span> <span data-ttu-id="d341c-160">Vous pouvez publier ces schémas sous la forme de services WCF à l'aide de l'Assistant Publication de services WCF BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d341c-160">You can publish these schemas as WCF services by using the BizTalk WCF Service Publishing Wizard.</span></span>  
  
 <span data-ttu-id="d341c-161">Vous devez utiliser l'Assistant Consommation de service WCF BizTalk pour créer les artefacts de BizTalk nécessaires à l'utilisation des services WCF à partir d'un projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d341c-161">You should use the BizTalk WCF Service Consuming Wizard to create the BizTalk artifacts necessary to consume the WCF services from a BizTalk project.</span></span> <span data-ttu-id="d341c-162">Si vous voulez utiliser les services WCF à partir d'une application .NET, vous devez utiliser l'outil Service Model Metadata Utility (Svcutil.exe) pour créer la classe proxy pour les services WCF.</span><span class="sxs-lookup"><span data-stu-id="d341c-162">If you want to consume the WCF services from a .NET application, you should use the Service Model Metadata Utility tool (Svcutil.exe) to create the proxy class for the WCF services.</span></span> <span data-ttu-id="d341c-163">Pour plus d’informations sur la façon d’utiliser des schémas qui référencent d’autres schémas, consultez [schémas qui utilisent d’autres schémas](../core/schemas-that-use-other-schemas.md) et [comment créer des schémas qui utilisent d’autres schémas](../core/how-to-create-schemas-that-use-other-schemas.md).</span><span class="sxs-lookup"><span data-stu-id="d341c-163">For more information about how to use schemas that reference other schemas, see [Schemas That Use Other Schemas](../core/schemas-that-use-other-schemas.md) and [How to Create Schemas That Use Other Schemas](../core/how-to-create-schemas-that-use-other-schemas.md).</span></span> <span data-ttu-id="d341c-164">Pour plus d’informations sur Svcutil.exe, consultez « Service Model Metadata utilitaire Tool (Svcutil.exe) » à [http://go.microsoft.com/fwlink/?LinkID=74696](http://go.microsoft.com/fwlink/?LinkID=74696).</span><span class="sxs-lookup"><span data-stu-id="d341c-164">For more information about Svcutil.exe, see "Service Model Metadata Utility Tool (Svcutil.exe)" at [http://go.microsoft.com/fwlink/?LinkID=74696](http://go.microsoft.com/fwlink/?LinkID=74696).</span></span>  
  
 <span data-ttu-id="d341c-165">Le tableau suivant montre les restrictions et considérations à prendre en compte lors de l'utilisation de services WCF publiés à l'aide de schémas utilisant d'autres schémas.</span><span class="sxs-lookup"><span data-stu-id="d341c-165">The following table shows the limitations and considerations that you need to know when consuming published WCF services with schemas that use other schemas.</span></span>  
  
|<span data-ttu-id="d341c-166">Élément de schéma XML</span><span class="sxs-lookup"><span data-stu-id="d341c-166">XML schema element</span></span>|<span data-ttu-id="d341c-167">Utilisation de services WCF publiés à l'aide de l'Assistant Publication de services WCF BizTalk</span><span class="sxs-lookup"><span data-stu-id="d341c-167">Consuming WCF services published with the BizTalk WCF Service Publishing Wizard</span></span>|<span data-ttu-id="d341c-168">Utilisation de services WCF hébergés par des applications .NET</span><span class="sxs-lookup"><span data-stu-id="d341c-168">Consuming WCF services hosted by .NET applications</span></span>|  
|------------------------|-------------------------------------------------------------------------------------|--------------------------------------------------------|  
|<span data-ttu-id="d341c-169">\<importation\></span><span class="sxs-lookup"><span data-stu-id="d341c-169">\<import\></span></span>|<span data-ttu-id="d341c-170">Prise en charge par l'Assistant Consommation de service WCF BizTalk et Svcutil.exe</span><span class="sxs-lookup"><span data-stu-id="d341c-170">Supported with both the BizTalk WCF Service Consuming Wizard and Svcutil.exe</span></span>|<span data-ttu-id="d341c-171">Prise en charge par l'Assistant Consommation de service WCF BizTalk et Svcutil.exe</span><span class="sxs-lookup"><span data-stu-id="d341c-171">Supported with both the BizTalk WCF Service Consuming Wizard and Svcutil.exe</span></span>|  
|<span data-ttu-id="d341c-172">\<inclure\></span><span class="sxs-lookup"><span data-stu-id="d341c-172">\<include\></span></span>|<span data-ttu-id="d341c-173">Prise en charge avec l’Assistant consommation de Service WCF de BizTalk et Svcutil.exe **Remarque :** Svcutil.exe peut générer un message d’avertissement lors de la création de la classe proxy.</span><span class="sxs-lookup"><span data-stu-id="d341c-173">Supported with both the BizTalk WCF Service Consuming Wizard and Svcutil.exe **Note:**  Svcutil.exe may raise a warning message when creating the proxy class.</span></span>|<span data-ttu-id="d341c-174">Prise en charge avec l’Assistant consommation de Service WCF de BizTalk et Svcutil.exe **Remarque :** Svcutil.exe peut générer un message d’avertissement lors de la création de la classe proxy.</span><span class="sxs-lookup"><span data-stu-id="d341c-174">Supported with both the BizTalk WCF Service Consuming Wizard and Svcutil.exe **Note:**  Svcutil.exe may raise a warning message when creating the proxy class.</span></span>|  
|<span data-ttu-id="d341c-175">\<redéfinir\></span><span class="sxs-lookup"><span data-stu-id="d341c-175">\<redefine\></span></span>|<span data-ttu-id="d341c-176">-Prise en charge avec l’Assistant consommation de Service WCF BizTalk</span><span class="sxs-lookup"><span data-stu-id="d341c-176">-   Supported with the BizTalk WCF Service Consuming Wizard</span></span><br /><span data-ttu-id="d341c-177">-Limitée de prise en charge par Svcutil.exe **Remarque :** Svcutil.exe connaît la même restriction pour le **redéfinir** a de l’élément en tant que XSD.exe.</span><span class="sxs-lookup"><span data-stu-id="d341c-177">-   Limited support by Svcutil.exe **Note:**  Svcutil.exe has the same limitation for the **redefine** element as XSD.exe has.</span></span>|<span data-ttu-id="d341c-178">Prise en charge avec l’Assistant consommation de Service WCF de BizTalk et Svcutil.exe **Remarque :** Svcutil.exe peut générer un message d’avertissement lors de la création de la classe proxy.</span><span class="sxs-lookup"><span data-stu-id="d341c-178">Supported with both the BizTalk WCF Service Consuming Wizard and Svcutil.exe **Note:**  Svcutil.exe may raise a warning message when creating the proxy class.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="d341c-179">SvcUtil.exe peut générer un message d’avertissement lors de la création de la classe proxy sur le service WCF BizTalk publié avec les schémas à l’aide de la **incluent** et **redéfinir** éléments.</span><span class="sxs-lookup"><span data-stu-id="d341c-179">Svcutil.exe may raise a warning message when creating the proxy class against the published BizTalk WCF service with the schemas using the **include** and **redefine** elements.</span></span> <span data-ttu-id="d341c-180">Par exemple, « L'élément global a déjà été déclaré ».</span><span class="sxs-lookup"><span data-stu-id="d341c-180">For example, "The global element has already been declared."</span></span>  
  
## <a name="ensure-that-an-in-process-wcf-receive-location-is-not-disabled-after-you-change-the-computer-name-part-in-its-service-endpoint-address"></a><span data-ttu-id="d341c-181">Vérification qu'un emplacement de réception WCF in-process n'est pas désactivé après la modification du nom de l'ordinateur indiqué dans l'adresse de point de terminaison de son service</span><span class="sxs-lookup"><span data-stu-id="d341c-181">Ensure that an in-process WCF receive location is not disabled after you change the computer name part in its service endpoint address</span></span>  
 <span data-ttu-id="d341c-182">Si vous modifiez la partie nom d’ordinateur dans le **adresse (URI)** emplacement de réception de zone de texte d’un processus en cours d’exécution de WCF, nous vous recommandons d’utiliser la console Administration de BizTalk pour vérifier si l’emplacement de réception est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d341c-182">If you change the computer name part in the **Address (URI)** text box of a running in-process WCF receive location, we recommend that you use the BizTalk Administration console to check whether the receive location is still running.</span></span> <span data-ttu-id="d341c-183">Par exemple, si vous modifiez une adresse de point de terminaison de service à l’aide de WCF-NetTcp adaptateur de réception, **net.tcp://\<***nom de votre ordinateur***\>/samplepath**, **net.tcp://localhost/samplepath**, l’emplacement de réception peut être désactivé avec un **Service.InvalidOperationException**.</span><span class="sxs-lookup"><span data-stu-id="d341c-183">For example, if you change a service endpoint address using the WCF-NetTcp receive adapter, **net.tcp://\<***Your Computer Name***\>/samplepath**, to **net.tcp://localhost/samplepath**, the receive location may be disabled with a **Service.InvalidOperationException**.</span></span> <span data-ttu-id="d341c-184">Si vous modifiez uniquement le nom de l'ordinateur indiqué dans l'adresse de point de terminaison de service sans changer le chemin d'accès, assurez-vous que l'emplacement de réception n'est pas désactivé et activez-le si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="d341c-184">If you change only the computer name part in the service endpoint address without modifying the path part, make sure that the receive location is not disabled, and enable it if necessary.</span></span>  
  
## <a name="set-the-appropriate-msdtc-security-configuration-options-on-client-computers-communicating-with-remote-wcf-receive-locations-through-a-transaction-protocol"></a><span data-ttu-id="d341c-185">Définition des options de configuration de la sécurité MSDTC appropriées sur les ordinateurs clients communiquant avec des emplacements de réception WCF distants via un protocole de transaction</span><span class="sxs-lookup"><span data-stu-id="d341c-185">Set the appropriate MSDTC Security Configuration options on client computers communicating with remote WCF receive locations through a transaction protocol</span></span>  
 <span data-ttu-id="d341c-186">Adaptateurs de réception WCF-NetTcp, WCF-WSHttp et WCF-NetNamedPipe peut participer au processus de coordination transactionnelle clients WCF gèrent à la **WS-AtomicTransaction** et **OleTransaction**protocoles de transaction.</span><span class="sxs-lookup"><span data-stu-id="d341c-186">WCF-NetTcp, WCF-WSHttp, and WCF-NetNamedPipe receive adapters can participate in transactional coordination processes that WCF clients manage with the **WS-AtomicTransaction** and **OleTransaction** transaction protocols.</span></span> <span data-ttu-id="d341c-187">Les messages peuvent être transmis aux emplacements de réception de destination et supprimés de la base de données MessageBox, dans un contexte transactionnel, à l'aide des protocoles de transaction.</span><span class="sxs-lookup"><span data-stu-id="d341c-187">Messages can be transmitted to the destination receive locations and deleted from the MessageBox database in a transactional context by using the transaction protocols.</span></span>  
  
 <span data-ttu-id="d341c-188">Pour communiquer à distance les emplacements de réception WCF à l’aide de protocoles de transaction, vous devez correctement configurer MSDTC **Configuration de la sécurité** options sur les ordinateurs clients WCF.</span><span class="sxs-lookup"><span data-stu-id="d341c-188">To communicate with remote WCF receive locations by using the transaction protocols, you must appropriately configure MSDTC **Security Configuration** options on WCF client computers.</span></span> <span data-ttu-id="d341c-189">Le tableau suivant répertorie les valeurs requises pour les options qui sont disponibles dans le service MSDTC **Configuration de la sécurité** boîte de dialogue :</span><span class="sxs-lookup"><span data-stu-id="d341c-189">The following table lists the required values for the options that are available in the MSDTC **Security Configuration** dialog box:</span></span>  
  
|<span data-ttu-id="d341c-190">Option de configuration</span><span class="sxs-lookup"><span data-stu-id="d341c-190">Configuration option</span></span>|<span data-ttu-id="d341c-191">Valeur par défaut</span><span class="sxs-lookup"><span data-stu-id="d341c-191">Default value</span></span>|<span data-ttu-id="d341c-192">Valeur recommandée</span><span class="sxs-lookup"><span data-stu-id="d341c-192">Recommended value</span></span>|  
|--------------------------|-------------------|-----------------------|  
|<span data-ttu-id="d341c-193">Accès DTC réseau</span><span class="sxs-lookup"><span data-stu-id="d341c-193">Network DTC Access</span></span>|<span data-ttu-id="d341c-194">Désactivé</span><span class="sxs-lookup"><span data-stu-id="d341c-194">Disabled</span></span>|<span data-ttu-id="d341c-195">Activé</span><span class="sxs-lookup"><span data-stu-id="d341c-195">Enabled</span></span>|  
|<span data-ttu-id="d341c-196">Autoriser les transactions sortantes</span><span class="sxs-lookup"><span data-stu-id="d341c-196">Allow Outbound</span></span>|<span data-ttu-id="d341c-197">Désactivé</span><span class="sxs-lookup"><span data-stu-id="d341c-197">Disabled</span></span>|<span data-ttu-id="d341c-198">Activé</span><span class="sxs-lookup"><span data-stu-id="d341c-198">Enabled</span></span>|  
|<span data-ttu-id="d341c-199">Authentification mutuelle requise</span><span class="sxs-lookup"><span data-stu-id="d341c-199">Mutual Authentication Required</span></span>|<span data-ttu-id="d341c-200">Activé</span><span class="sxs-lookup"><span data-stu-id="d341c-200">Enabled</span></span>|<span data-ttu-id="d341c-201">Activé si l’instance distante correspondante recevez emplacements exécutent Windows Server 2003 SP1 ou SP2 et sont configurés avec **authentification mutuelle requise**.</span><span class="sxs-lookup"><span data-stu-id="d341c-201">Enabled if the corresponding remote receive locations are running Windows Server 2003 SP1 or SP2, and are configured with **Mutual Authentication Required**.</span></span>|  
|<span data-ttu-id="d341c-202">Autorisation de l'appelant entrant requise</span><span class="sxs-lookup"><span data-stu-id="d341c-202">Incoming Caller Authentication Required</span></span>|<span data-ttu-id="d341c-203">Désactivé</span><span class="sxs-lookup"><span data-stu-id="d341c-203">Disabled</span></span>|<span data-ttu-id="d341c-204">Activé si MSDTC est exécuté sur un cluster.</span><span class="sxs-lookup"><span data-stu-id="d341c-204">Enabled if running MSDTC on a cluster.</span></span>|  
  
 <span data-ttu-id="d341c-205">Après avoir appliqué ces modifications, vous devez redémarrer le service MSDTC.</span><span class="sxs-lookup"><span data-stu-id="d341c-205">After you apply these changes, you have to restart the MSDTC service.</span></span>  
  
 <span data-ttu-id="d341c-206">Pour accéder à la ressource MSDTC **Configuration de la sécurité** boîte de dialogue zone, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="d341c-206">To access the MSDTC **Security Configuration** dialog box, follow these steps:</span></span>  
  
1.  <span data-ttu-id="d341c-207">Cliquez sur **Démarrer**, cliquez sur **exécuter**et le type **dcomcnfg** pour lancer le **Services de composants** console de gestion.</span><span class="sxs-lookup"><span data-stu-id="d341c-207">Click **Start**, click **Run**, and type **dcomcnfg** to launch the **Component Services** Management console.</span></span>  
  
2.  <span data-ttu-id="d341c-208">Développez **Services de composants**, développez **ordinateurs**, avec le bouton droit **poste**, puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="d341c-208">Expand **Component Services**, expand **Computers**, right-click **My Computer**, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="d341c-209">Dans le **propriétés Poste de travail** boîte de dialogue, cliquez sur le **MSDTC** onglet, puis cliquez sur **Configuration de la sécurité** pour afficher les **Configuration de la sécurité**  boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="d341c-209">In the **My Computer Properties** dialog box, click the **MSDTC** tab, and then click **Security Configuration** to display the **Security Configuration** dialog box.</span></span>  
  
## <a name="explanation-of-the-soap-wrapper-when-using-the-biztalk-wcf-service-publishing-wizard"></a><span data-ttu-id="d341c-210">Wrapper SOAP avec l'Assistant Publication de services WCF BizTalk</span><span class="sxs-lookup"><span data-stu-id="d341c-210">Explanation of the SOAP wrapper when using the BizTalk WCF Service Publishing Wizard</span></span>  
 <span data-ttu-id="d341c-211">Lorsqu'une orchestration est exposée en tant que service [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] à l'aide de l'Assistant Publication de services [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], un wrapper est généré.</span><span class="sxs-lookup"><span data-stu-id="d341c-211">When an orchestration is exposed as a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service by using the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Service Publishing Wizard, a wrapper is generated.</span></span> <span data-ttu-id="d341c-212">Ce wrapper utilise le nom de méthode du port, présent dans le message XML, auquel le message est envoyé.</span><span class="sxs-lookup"><span data-stu-id="d341c-212">This wrapper uses the method name of the port in the XML message to which the message is sent.</span></span> <span data-ttu-id="d341c-213">Ce wrapper est la valeur par défaut pour les enveloppes SOAP de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d341c-213">This wrapper is the default for Microsoft SOAP envelopes.</span></span> <span data-ttu-id="d341c-214">Il permet à [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de wrapper le message SOAP à parties multiples dans un seul message WCF à transmettre au point de terminaison par l'adaptateur.</span><span class="sxs-lookup"><span data-stu-id="d341c-214">It allows [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] to wrap the multi-part SOAP message in one WCF message to be transmitted to the endpoint by the adapter.</span></span>  
  
 <span data-ttu-id="d341c-215">Il est recommandé que l'expéditeur utilise un wrapper et que le destinataire l'attende ou que l'expéditeur n'utilise pas de wrapper et que le destinataire attende un message [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] brut.</span><span class="sxs-lookup"><span data-stu-id="d341c-215">As a best practice, either the sender should use a wrapper and the receiver should expect it, or the sender should not use a wrapper and the receiver should expect the raw [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message.</span></span> <span data-ttu-id="d341c-216">L'absence d'accord préalable sur l'utilisation ou non d'un wrapper peut causer des problèmes d'incompatibilité entre ce qui est envoyé et ce qui est reçu.</span><span class="sxs-lookup"><span data-stu-id="d341c-216">Failure to agree ahead of time on whether to use a wrapper can cause incompatibility issues between what is sent and what is received.</span></span>