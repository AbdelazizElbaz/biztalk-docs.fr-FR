---
title: Comment configurer le travail de sauvegarde de BizTalk Server | Documents Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- Tracking database, backing up
- backing up, Tracking database
- backing up, user accounts
- backing up, MessageBox database
- databases, backing up
- MessageBox database, backing up
- backing up, databases
- backing up, prerequisites
- configuring, backup jobs
- backing up, warnings
- backing up, backup jobs
- user accounts, backing up
- backing up, configuring
ms.assetid: 026622c9-fcb4-4db0-af48-1379feb30372
caps.latest.revision: "42"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 488e76c3d29c58107e85ad58ed4fad50de671315
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="how-to-configure-the-backup-biztalk-server-job"></a><span data-ttu-id="66695-102">Comment configurer le travail de sauvegarde de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="66695-102">How to Configure the Backup BizTalk Server Job</span></span>
<span data-ttu-id="66695-103">Cette rubrique répertorie les étapes nécessaires pour configurer le travail de sauvegarde de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="66695-103">This topic lists the steps necessary to configure the Backup BizTalk Server job.</span></span>  
  
 <span data-ttu-id="66695-104">Vous devez configurer le travail de sauvegarde de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] avant de sauvegarder [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="66695-104">You must configure the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job before you can back up [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="66695-105">Pour configurer la sauvegarde, vous devez effectuer la plupart (voire l'ensemble) des tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="66695-105">To configure the backup, you need to perform most or all of the following tasks:</span></span>  
  
-   <span data-ttu-id="66695-106">modifier le travail de l'Agent SQL Server **Sauvegarde de BizTalk Server (BizTalkMgmtDb)** pour identifier les serveurs SQL principal et de destination, ainsi que les autres options de sauvegarde ;</span><span class="sxs-lookup"><span data-stu-id="66695-106">Edit the SQL Server Agent **Backup BizTalk Server (BizTalkMgmtDb)** job to identify the primary and destination SQL Servers and other backup options.</span></span>  
  
-   <span data-ttu-id="66695-107">choisir un compte d'utilisateur Windows pour sauvegarder vos bases de données et créer une connexion SQL Server pour ce compte ;</span><span class="sxs-lookup"><span data-stu-id="66695-107">Choose a Windows user account to back up your databases and create a SQL Server login for this account.</span></span>  
  
-   <span data-ttu-id="66695-108">mapper les connexions SQL Server au rôle de base de données BTS_BACKUP_USERS dans les bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="66695-108">Map SQL Server logins to the BTS_BACKUP_USERS database role in the BizTalk Server databases.</span></span>  
  
-   <span data-ttu-id="66695-109">Assurez-vous que le service MSDTC est actif sur tous les nœuds.</span><span class="sxs-lookup"><span data-stu-id="66695-109">Ensure MSDTC service is active on all nodes.</span></span> <span data-ttu-id="66695-110">Sinon, l'ajout d'un serveur lié entre le nœud source et le nœud de destination échoue.</span><span class="sxs-lookup"><span data-stu-id="66695-110">Else, adding a linked server between the source node and the destination node fails.</span></span>  
  
## <a name="before-you-begin"></a><span data-ttu-id="66695-111">Avant de commencer</span><span class="sxs-lookup"><span data-stu-id="66695-111">Before you begin</span></span>  
  
-   <span data-ttu-id="66695-112">Certaines opérations de configuration et de sauvegarde telles que celle-ci requièrent l'appartenance au rôle SQL Server sysadmin.</span><span class="sxs-lookup"><span data-stu-id="66695-112">Certain configuration and backup operations such as this one require membership in the sysadmin SQL Server role.</span></span> <span data-ttu-id="66695-113">Pour sauvegarder votre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de données, vous devez ouvrir une session sur le serveur principal avec un compte qui est membre du rôle serveur sysadmin SQL Server sur le serveur principal.</span><span class="sxs-lookup"><span data-stu-id="66695-113">To back up your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, you must be logged on at the primary server with an account that is a member of the SQL Server sysadmin Server role on the primary server.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="66695-114">configuration ajoute un rôle de base de données nommé BTS_BACKUP_USERS afin que le compte d’utilisateur utilisé pour sauvegarder vos bases de données ne nécessite pas d’autorisations de l’administrateur système (rôle sysadmin SQL Server) sur tous les serveurs SQL qui peuvent être impliqués dans une sauvegarde, à l’exception de la serveur principal.</span><span class="sxs-lookup"><span data-stu-id="66695-114"> configuration adds a database role named BTS_BACKUP_USERS so that the user account you use to back up your databases does not require System Administrator (sysadmin SQL Server role) permissions on all of the SQL Servers that may be involved in a backup, except for the primary server.</span></span>  
  
-   <span data-ttu-id="66695-115">Vous devez décider quel compte de connexion que vous utilisez pour effectuer votre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] les sauvegardes de base de données.</span><span class="sxs-lookup"><span data-stu-id="66695-115">You need to decide which login account you use to perform your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database backups.</span></span> <span data-ttu-id="66695-116">Vous pouvez utiliser un compte local, voire plusieurs comptes. Toutefois, il est souvent plus simple de créer un compte d'utilisateur de domaine Windows dédié à cette fin.</span><span class="sxs-lookup"><span data-stu-id="66695-116">You can use a local account, and you can use more than one account, but it is generally simpler and more secure to create one dedicated Windows domain user account specifically for this purpose.</span></span> <span data-ttu-id="66695-117">Vous devez configurer un compte de connexion SQL Server pour cet utilisateur. Celui-ci doit être mappé à une connexion SQL Server pour tous les serveurs SQL participant au processus de sauvegarde, en tant que serveur principal (source) ou secondaire (destination).</span><span class="sxs-lookup"><span data-stu-id="66695-117">You must configure a SQL Server logon account for this user, and the user must be mapped to a SQL Server login for all of the SQL Servers that participate in the backup process, either as primary (source) or secondary (destination) servers.</span></span> <span data-ttu-id="66695-118">Affecter l’utilisateur au rôle de base de données BizTalk BTS_BACKUP_USERS pour chacune de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de données vous sauvegardez.</span><span class="sxs-lookup"><span data-stu-id="66695-118">Assign this user to the BizTalk BTS_BACKUP_USERS database role for each of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases you back up.</span></span>  
  
-   <span data-ttu-id="66695-119">Le travail de sauvegarde de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ne supprime pas les fichiers de sauvegarde obsolètes. Vous devez donc gérer ceux-ci manuellement afin de conserver de l'espace libre sur le disque.</span><span class="sxs-lookup"><span data-stu-id="66695-119">The Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job does not delete outdated backup files, so you need to manually manage those backup files to conserve disk space.</span></span> <span data-ttu-id="66695-120">Une fois que vous avez créé une sauvegarde complète de vos bases de données, vous devez déplacer les fichiers de sauvegarde obsolètes vers un périphérique de stockage d'archives pour libérer de l'espace sur le disque principal.</span><span class="sxs-lookup"><span data-stu-id="66695-120">After you have created a new full backup of your databases, you should move the outdated backup files onto an archival storage device to reclaim space on the primary disk.</span></span> <span data-ttu-id="66695-121">« BizTalk Bill » a téléchargeable [packages SSIS](http://www.biztalkbill.com/2015/05/26/ssis-packages-to-help-management-biztalk-server-environments/) pour gérer ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="66695-121">"BizTalk Bill" has downloadable [SSIS packages](http://www.biztalkbill.com/2015/05/26/ssis-packages-to-help-management-biztalk-server-environments/) to manage these files.</span></span>  
  
-   [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="66695-122"> n'écrit pas les données de suivi directement dans la base de données des suivis BizTalk : elle les met en cache dans la base de données MessageBox, puis les déplace vers la base de données des suivis BizTalk.</span><span class="sxs-lookup"><span data-stu-id="66695-122"> does not write tracking data directly to the BizTalk Tracking database; rather it caches the data in the MessageBox database and then moves it to the BizTalk Tracking database.</span></span> <span data-ttu-id="66695-123">Si des données MessageBox sont perdues, certaines données de suivi peuvent l'être également.</span><span class="sxs-lookup"><span data-stu-id="66695-123">If MessageBox data loss occurs, some tracking data may also be lost.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="66695-124">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="66695-124">Prerequisites</span></span>  
* <span data-ttu-id="66695-125">Connectez-vous à SQL Server à l’aide d’un compte qui est membre du rôle sysadmin SQL Server.</span><span class="sxs-lookup"><span data-stu-id="66695-125">Sign in to SQL Server using an account that is a member of the sysadmin SQL Server role.</span></span>  
  
* <span data-ttu-id="66695-126">Configurez l'exécution du service SQL Server Agent sous un compte de domaine (recommandé, même si des comptes locaux peuvent être utilisés), avec une connexion d'utilisateur mappée sur chaque instance de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="66695-126">Configure the SQL Server Agent service to run under a domain account (recommended, although local accounts can be used), with a mapped user login on each instance of SQL Server.</span></span>  
  
## <a name="configure-the-backup-biztalk-server-job"></a><span data-ttu-id="66695-127">Configurer le travail de sauvegarde de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="66695-127">Configure the Backup BizTalk Server job</span></span>  
  
1.  <span data-ttu-id="66695-128">Sur le serveur SQL qui héberge la base de données de gestion BizTalk, ouvrez **SQL Server Management Studio**et vous connecter à votre [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="66695-128">On the SQL Server that hosts the BizTalk Management database, open **SQL Server Management Studio**, and connect to your [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span>  
  
2.  <span data-ttu-id="66695-129">Développez **Agent SQL Server**, puis **Travaux**.</span><span class="sxs-lookup"><span data-stu-id="66695-129">Expand **SQL Server Agent**, and expand **Jobs**.</span></span>  
  
3.  <span data-ttu-id="66695-130">Cliquez avec le bouton droit sur **Sauvegarde de BizTalk Server (BizTalkMgmtDb)** et sélectionnez **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="66695-130">Right-click **Backup BizTalk Server (BizTalkMgmtDb)** and select **Properties**.</span></span> <span data-ttu-id="66695-131">Dans les propriétés du travail, sélectionnez **Étapes**.</span><span class="sxs-lookup"><span data-stu-id="66695-131">In the job properties, select **Steps**.</span></span>  
  
4.  <span data-ttu-id="66695-132">Sélectionnez l'étape **Définir l'option de compression** et sélectionnez **Modifier**.</span><span class="sxs-lookup"><span data-stu-id="66695-132">Select the **Set Compression Option** step and select **Edit**.</span></span> <span data-ttu-id="66695-133">Dans la zone **Commande** , définissez la valeur sur 1 :</span><span class="sxs-lookup"><span data-stu-id="66695-133">In the **Command** box, change the value to 1:</span></span>  
  
    ```  
    exec [dbo].[sp_SetBackupCompression] @bCompression = 1 /*0 - Do not use Compression, 1 - Use Compression */  
    ```  
  
     <span data-ttu-id="66695-134">Sélectionnez **OK**.</span><span class="sxs-lookup"><span data-stu-id="66695-134">Select **OK**.</span></span>  
  
5.  <span data-ttu-id="66695-135">Sélectionnez l'étape **BackupFull** , puis **Modifier**.</span><span class="sxs-lookup"><span data-stu-id="66695-135">Select the **BackupFull** step and select **Edit**.</span></span> <span data-ttu-id="66695-136">Dans la zone **Commande** , modifiez les valeurs des paramètres :</span><span class="sxs-lookup"><span data-stu-id="66695-136">In the **Command** box, edit the parameter values:</span></span>  
  
    1.  <span data-ttu-id="66695-137">**Frequency**(Fréquence) : la valeur par défaut est **d** (quotidienne).</span><span class="sxs-lookup"><span data-stu-id="66695-137">**Frequency**: The default is **d** (daily).</span></span> <span data-ttu-id="66695-138">Il s'agit du paramètre recommandé.</span><span class="sxs-lookup"><span data-stu-id="66695-138">This is the recommended setting.</span></span> <span data-ttu-id="66695-139">Les valeurs **h** (horaire), **w** (hebdomadaire), **m** (mensuelle) et **y** (annuelle) sont également disponibles.</span><span class="sxs-lookup"><span data-stu-id="66695-139">Other values include **h** (hourly), **w** (weekly), **m** (monthly), or **y** (yearly).</span></span>  
  
    2.  <span data-ttu-id="66695-140">**Name**: la valeur par défaut est **BTS**.</span><span class="sxs-lookup"><span data-stu-id="66695-140">**Name**: The default is **BTS**.</span></span> <span data-ttu-id="66695-141">Cette valeur est utilisée dans le nom du fichier de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="66695-141">The name is used as part of the backup file name.</span></span>  
  
    3.  <span data-ttu-id="66695-142">**Emplacement des fichiers de sauvegarde**: remplacez '*\<chemin d’accès de destination >*» avec le chemin d’accès complet (le chemin d’accès doit inclure les guillemets simples) à l’ordinateur et le dossier dans lequel vous souhaitez sauvegarder le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de données.</span><span class="sxs-lookup"><span data-stu-id="66695-142">**Location of backup files**: Replace '*\<destination path>*' with the full path (the path must include the single quotes) to the computer and folder where you want to back up the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span>  
  
        > [!IMPORTANT]
        >  -   <span data-ttu-id="66695-143">Si vous spécifiez un chemin d'accès local, vous devez copier manuellement tous les fichiers dans le même dossier sur le système de destination chaque fois que le travail de sauvegarde de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] crée de nouveaux fichiers.</span><span class="sxs-lookup"><span data-stu-id="66695-143">If you specify a local path, then you have to manually copy all the files to the same folder on the destination system whenever the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job creates new files.</span></span>  
        >   
        >      <span data-ttu-id="66695-144">Pour spécifier un chemin d’accès à distance, entrez un partage UNC tel que \\ \\  *\<nom_serveur >*\\*\<SharedDrive >* \\ , où  *\<nom_serveur >* est le nom du serveur où vous voulez les fichiers, et  *\<SharedDrive >* est le nom du lecteur partagé ou du dossier.</span><span class="sxs-lookup"><span data-stu-id="66695-144">To specify a remote path, enter a UNC share such as \\\\*\<ServerName>*\\*\<SharedDrive>*\\, where *\<ServerName>* is the name of the server where you want the files, and *\<SharedDrive>* is name of the shared drive or folder.</span></span>  
        >   
        >      <span data-ttu-id="66695-145">La sauvegarde de données sur un réseau peut faire l’objet d’éventuels problèmes réseau.</span><span class="sxs-lookup"><span data-stu-id="66695-145">Backing up data over a network is subject to any network issues.</span></span> <span data-ttu-id="66695-146">Si vous utilisez un emplacement distant, vérifiez que la sauvegarde a réussi lorsque le travail de sauvegarde de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] termine.</span><span class="sxs-lookup"><span data-stu-id="66695-146">When using a remote location, verify the backup succeeded when the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job finishes.</span></span>  
        > -   <span data-ttu-id="66695-147">Pour éviter de perdre des données, configurez un disque distinct pour la sauvegarde et le stockage des données des bases de données et des journaux.</span><span class="sxs-lookup"><span data-stu-id="66695-147">To avoid potential data loss, configure the backup disk to be a different disk than the database data and log disks.</span></span> <span data-ttu-id="66695-148">Cette étape est nécessaire afin que vous puissiez accéder aux sauvegardes en cas de défaillance du disque de stockage des données ou des journaux.</span><span class="sxs-lookup"><span data-stu-id="66695-148">This is necessary so you can access the backups if the data or log disk fails.</span></span>  
  
    4.  <span data-ttu-id="66695-149">**Force full backup after partial backup failures**(Forcer la sauvegarde complète en cas d'échec de sauvegarde partielle) : la valeur par défaut est **0** lorsque l'option n'est pas spécifiée. Cela signifie qu'en cas d'échec d'une sauvegarde de journal, aucune sauvegarde complète n'est effectuée jusqu'au prochain intervalle de sauvegarde complète.</span><span class="sxs-lookup"><span data-stu-id="66695-149">**Force full backup after partial backup failures**: The default is **0** when not specified, which means that if a log backup fails, no full backups are done until the next full backup frequency interval is reached.</span></span> <span data-ttu-id="66695-150">Remplacez par la valeur **1** si vous souhaitez qu'une sauvegarde complète soit effectuée après un échec de sauvegarde de journal.</span><span class="sxs-lookup"><span data-stu-id="66695-150">Replace with **1** if you want a full backup to be made whenever a log backup failure occurs.</span></span>  
  
    5.  <span data-ttu-id="66695-151">**Heure de l’heure locale pour le processus de sauvegarde à exécuter**: la valeur par défaut est NULL lorsque ne pas spécifié, ce qui signifie que le travail sauvegarde n’est pas associé avec le fuseau horaire de le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ordinateur et est exécuté à minuit UTC (0000) de temps.</span><span class="sxs-lookup"><span data-stu-id="66695-151">**Local time hour for the backup process to run**: The default is NULL when not specified, which means that backup job is not associated with the time zone of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer and therefore runs at midnight UTC time (0000).</span></span> <span data-ttu-id="66695-152">Si vous souhaitez pour effectuer sur une heure dans le fuseau horaire de la sauvegarde la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ordinateur, entrez une valeur entière comprise entre 0 (minuit) et 23 (11 PM) en tant que l’heure de l’heure locale pour le **BackupHour** paramètre.</span><span class="sxs-lookup"><span data-stu-id="66695-152">If you want to backup to run at a particular hour in the time zone of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer, enter an integer value from 0 (midnight) to 23 (11 PM) as the local time hour for the **BackupHour** parameter.</span></span>  
  
     <span data-ttu-id="66695-153">Dans l'exemple suivant, les sauvegardes quotidiennes sont créées à 14 h 00 et stockées sur le lecteur m:\ :</span><span class="sxs-lookup"><span data-stu-id="66695-153">In the following example, daily backups are created at 2am and stored in the m:\ drive:</span></span>  
  
    ```  
    exec [dbo].[sp_BackupAllFull_Schedule]   
    'd' /* Frequency */,   
    'BTS' /* Name */,   
    'm:\BizTalkBackups' /* location of backup files */,   
    0 /* 0 (default) or 1 ForceFullBackupAfterPartialSetFailure */,   
    '2' /* local time hour for the backup process to run */  
    ```  
  
     <span data-ttu-id="66695-154">Sélectionnez **OK**.</span><span class="sxs-lookup"><span data-stu-id="66695-154">Select **OK**.</span></span>  
  
6.  <span data-ttu-id="66695-155">Sélectionnez l'étape **MarkAndBackupLog** , puis **Modifier**.</span><span class="sxs-lookup"><span data-stu-id="66695-155">Select the **MarkAndBackupLog** step and select **Edit**.</span></span> <span data-ttu-id="66695-156">Dans le **commande** zone, remplacez **'***\<chemin d’accès de destination >***'** avec le chemin d’accès complet (y compris les guillemets simples) à la ordinateur et le dossier dans lequel vous voulez stocker le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] des journaux de base de données.</span><span class="sxs-lookup"><span data-stu-id="66695-156">In the **Command** box, replace **'***\<destination path>***'** with the full path (including single quotes) to the computer and folder where you want to store the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database logs.</span></span> <span data-ttu-id="66695-157">Le  *\<chemin d’accès de destination >* peut être local ou un chemin d’accès UNC vers un autre serveur.</span><span class="sxs-lookup"><span data-stu-id="66695-157">The *\<destination path>* may be local or a UNC path to another server.</span></span>  
  
     <span data-ttu-id="66695-158">L'étape MarkAndBackupLog marque les journaux pour la sauvegarde, puis les sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="66695-158">The MarkAndBackupLog step marks the logs for backup, and then backs them up.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="66695-159">Pour éviter de perdre des données, le  *\<chemin d’accès de destination >* doit spécifier un ordinateur pour stocker les journaux de base de données qui est différent de celui sur lequel les journaux de base de données d’origine.</span><span class="sxs-lookup"><span data-stu-id="66695-159">To avoid potential data loss, the *\<destination path>* should specify a computer to store the database logs that is different from the computer with the original database logs.</span></span>  
  
     <span data-ttu-id="66695-160">Sélectionnez **OK**.</span><span class="sxs-lookup"><span data-stu-id="66695-160">Select **OK**.</span></span>  
  
7.  <span data-ttu-id="66695-161">Sélectionnez l'étape **Effacer l'historique de sauvegarde** , puis **Modifier**.</span><span class="sxs-lookup"><span data-stu-id="66695-161">Select the **Clear Backup History** step and select **Edit**.</span></span> <span data-ttu-id="66695-162">Dans le **commande** , changez **DaysToKeep =***\<nombre >* au nombre de jours pendant lesquels vous souhaitez conserver l’historique de sauvegarde :</span><span class="sxs-lookup"><span data-stu-id="66695-162">In the **Command** box, change **DaysToKeep=***\<number>* to the number of days you want to keep the backup history:</span></span>  
  
    ```  
    exec [dbo].[sp_DeleteBackupHistory] @DaysToKeep=14  
    ```  
  
    > [!NOTE]
    >  <span data-ttu-id="66695-163">Le paramètre **DaysToKeep** spécifie le délai pendant lequel l'historique des sauvegardes est conservé dans la table Adm_BackupHistory.</span><span class="sxs-lookup"><span data-stu-id="66695-163">The **DaysToKeep** parameter specifies how long the backup history is kept in the Adm_BackupHistory table.</span></span> <span data-ttu-id="66695-164">La suppression régulière de l'historique des sauvegardes permet de maintenir une taille appropriée pour la table Adm_BackupHistory.</span><span class="sxs-lookup"><span data-stu-id="66695-164">Periodically clearing the backup history helps to maintain the Adm_BackupHistory table at an appropriate size.</span></span> <span data-ttu-id="66695-165">La valeur par défaut du paramètre **DaysToKeep** est 14 jours.</span><span class="sxs-lookup"><span data-stu-id="66695-165">The default value for the **DaysToKeep** parameter is 14 days.</span></span>  
  
     <span data-ttu-id="66695-166">Sélectionnez **OK** et fermez toutes les fenêtres de propriétés.</span><span class="sxs-lookup"><span data-stu-id="66695-166">Select **OK** and close all property windows.</span></span>  
  
8.  <span data-ttu-id="66695-167">Ce paramètre est facultatif.</span><span class="sxs-lookup"><span data-stu-id="66695-167">Optional.</span></span> <span data-ttu-id="66695-168">Modifiez la planification de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="66695-168">Change the backup schedule.</span></span> <span data-ttu-id="66695-169">Consultez [comment planifier le travail de sauvegarde de BizTalk Server](../core/how-to-schedule-the-backup-biztalk-server-job.md).</span><span class="sxs-lookup"><span data-stu-id="66695-169">See [How to Schedule the Backup BizTalk Server Job](../core/how-to-schedule-the-backup-biztalk-server-job.md).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="66695-170">Le travail de sauvegarde de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] est exécuté la première fois que vous le configurez.</span><span class="sxs-lookup"><span data-stu-id="66695-170">The Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job runs the first time you configure it.</span></span> <span data-ttu-id="66695-171">Par défaut, le travail de sauvegarde de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] effectue ensuite une sauvegarde complète une fois par jour et des sauvegardes de journal toutes les 15 minutes.</span><span class="sxs-lookup"><span data-stu-id="66695-171">By default, on subsequent runs, the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job performs a full backup once a day and performs log backups every 15 minutes.</span></span>  
  
9. <span data-ttu-id="66695-172">Cliquez avec le bouton droit sur le travail **Sauvegarde de BizTalk Server** et sélectionnez **Activer**.</span><span class="sxs-lookup"><span data-stu-id="66695-172">Right-click the **Backup BizTalk Server** job and select **Enable**.</span></span> <span data-ttu-id="66695-173">L'état doit passer à **Réussite**.</span><span class="sxs-lookup"><span data-stu-id="66695-173">The status should change to **Success**.</span></span>  
  
## <a name="spforcefullbackup-stored-procedure"></a><span data-ttu-id="66695-174">Procédure stockée sp_ForceFullBackup</span><span class="sxs-lookup"><span data-stu-id="66695-174">sp_ForceFullBackup stored procedure</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="66695-175">La procédure stockée sp_ForceFullBackup dans la base de données BizTalkMgmtDb permet de réaliser une sauvegarde complète ad hoc des données et des fichiers journaux.</span><span class="sxs-lookup"><span data-stu-id="66695-175">The sp_ForceFullBackup stored procedure in the BizTalkMgmtDb database can be used to help perform an ad-hoc full backup of the data and log files.</span></span> <span data-ttu-id="66695-176">La procédure stockée met à jour la table adm_ForceFullBackup avec la valeur 1.</span><span class="sxs-lookup"><span data-stu-id="66695-176">The stored procedure updates the adm_ForceFullBackup table with a value 1.</span></span> <span data-ttu-id="66695-177">Lors de la prochaine exécution du travail de sauvegarde de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], un jeu de sauvegarde de base de données complète est créé.</span><span class="sxs-lookup"><span data-stu-id="66695-177">The next time the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job is ran, a full database backup set is created.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="66695-178">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="66695-178">Next Steps</span></span>  
 [<span data-ttu-id="66695-179">Comment configurer le système de Destination pour l’envoi de journaux</span><span class="sxs-lookup"><span data-stu-id="66695-179">How to Configure the Destination System for Log Shipping</span></span>](../core/how-to-configure-the-destination-system-for-log-shipping.md)  
  
## <a name="see-also"></a><span data-ttu-id="66695-180">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="66695-180">See Also</span></span>  
 [<span data-ttu-id="66695-181">Comment planifier le travail de sauvegarde de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="66695-181">How to Schedule the Backup BizTalk Server Job</span></span>](../core/how-to-schedule-the-backup-biztalk-server-job.md)