---
title: 'Procédure pas à pas : Utilisation des Services WCF avec l’adaptateur WCF-BasicHttp | Documents Microsoft'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2d280198-ba55-4937-91c9-19d6d0ed3194
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f3c85d550e7a1429e18035629517017c90b44c9e
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/23/2018
---
# <a name="walkthrough-consuming-wcf-services-with-the-wcf-basichttp-adapter"></a><span data-ttu-id="516ad-102">Procédure pas à pas : Utilisation des Services WCF avec l’adaptateur WCF-BasicHttp</span><span class="sxs-lookup"><span data-stu-id="516ad-102">Walkthrough: Consuming WCF Services with the WCF-BasicHttp Adapter</span></span>
  
> [!NOTE]
>  <span data-ttu-id="516ad-103">Pour plus d’informations à propos des adaptateurs, consultez [adaptateurs dans BizTalk Server](../core/adapters-in-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="516ad-103">For more information about adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  
  
## <a name="introduction"></a><span data-ttu-id="516ad-104">Introduction</span><span class="sxs-lookup"><span data-stu-id="516ad-104">Introduction</span></span>
  
 <span data-ttu-id="516ad-105">Dans le cadre de cette procédure pas à pas, vous allez utiliser un service [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] hébergé dans les services Internet (IIS) en vous servant de la messagerie BizTalk et de l'adaptateur d'envoi WCF-BasicHttp.</span><span class="sxs-lookup"><span data-stu-id="516ad-105">In this walkthrough, you will consume a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service hosted inside Internet Information Services (IIS) using BizTalk messaging and the WCF-BasicHttp send adapter.</span></span> <span data-ttu-id="516ad-106">Cet adaptateur utilise le **BasicHttpBinding** liaison pour fournir une implémentation de pile de transport/protocole compatible avec les versions antérieures des services Web pour faire Office de pont entre Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] et [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="516ad-106">This adapter uses the **BasicHttpBinding** binding to provide a transport/protocol stack implementation compatible with earlier versions of Web services to serve as a bridge between Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] functionality.</span></span> <span data-ttu-id="516ad-107">Une orchestration peut lier à un port d'envoi utilisant un adaptateur [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] pour appeler un service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] et exploiter ses fonctionnalités dans son processus d'entreprise logique.</span><span class="sxs-lookup"><span data-stu-id="516ad-107">An orchestration can bind to a send port that uses a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapter to call a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service and leverage its functionality within its logical business processing.</span></span>  
  
 <span data-ttu-id="516ad-108">L'adaptateur WCF-BasicHttp consiste en un adaptateur d'envoi et un adaptateur de réception.</span><span class="sxs-lookup"><span data-stu-id="516ad-108">The WCF-BasicHttp adapter consists of both a send adapter and a receive adapter.</span></span> <span data-ttu-id="516ad-109">Dans cet exemple, vous allez utiliser uniquement le côté réception de cet adaptateur pour établir des demandes de service WCF adressées à un service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] via le protocole HTTP.</span><span class="sxs-lookup"><span data-stu-id="516ad-109">In this sample you will use only the send side of this adapter to make WCF service requests through the HTTP protocol to a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  <span data-ttu-id="516ad-110">Pour un port d'envoi sollicitation-réponse, l'adaptateur d'envoi envoie une sollicitation à un service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] et reçoit un résultat en réponse.</span><span class="sxs-lookup"><span data-stu-id="516ad-110">For a Solicit-Response send port, the send adapter sends to a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service and receives back a result response.</span></span>  <span data-ttu-id="516ad-111">Inversement, un adaptateur de réception [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] permet à une application cliente [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] de publier et d'appeler de l'extérieur une orchestration [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-111">Conversely, a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] receive adapter allows a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] orchestration to be published and called externally by a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client application.</span></span> <span data-ttu-id="516ad-112">Reportez-vous à la [publication des Services WCF](../core/publishing-wcf-services.md) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="516ad-112">Refer to the [Publishing WCF Services](../core/publishing-wcf-services.md) for additional information.</span></span>  
  
 <span data-ttu-id="516ad-113">Une fois cette procédure pas à pas terminée, vous saurez comment effectuer les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="516ad-113">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  
  
-   <span data-ttu-id="516ad-114">Depuis [!INCLUDE[btsCoName](../includes/btsconame-md.md)]Visual Studio, utilisez le **déployer** commande pour déployer les assemblys contenant le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution et le [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service à une instance locale de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-114">From within [!INCLUDE[btsCoName](../includes/btsconame-md.md)]Visual Studio, use the **Deploy** command to deploy the assemblies containing the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to a local instance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="516ad-115">Vous créerez ainsi une application BizTalk contenant ces assemblys.</span><span class="sxs-lookup"><span data-stu-id="516ad-115">This creates a BizTalk application that is populated with the assemblies.</span></span>  
  
-   <span data-ttu-id="516ad-116">Depuis Visual Studio, utilisez le **Assistant consommation de Service WCF de BizTalk** pour générer le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] schémas et les types nécessaires à l’utilisation du [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="516ad-116">From within Visual Studio, use the **BizTalk WCF Service Consuming Wizard** to generate the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] schemas and types necessary to consume the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="516ad-117">Une orchestration vide est également générée, que vous pouvez utiliser et lier à un port logique.</span><span class="sxs-lookup"><span data-stu-id="516ad-117">An empty orchestration is generated as well that you can use and bind to a logical port.</span></span> <span data-ttu-id="516ad-118">Celle-ci est compilée et déployée en même temps que les schémas et les types.</span><span class="sxs-lookup"><span data-stu-id="516ad-118">This orchestration is complied and deployed along with schemas and types.</span></span> <span data-ttu-id="516ad-119">En revanche, le traitement de workflow d'orchestration est vide et non utilisé dans cet exemple car il s'agit simplement d'un pur scénario de messagerie [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-119">But the orchestration workflow processing is empty here and not used in this sample as this is merely a pure [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] messaging scenario.</span></span>  
  
-   <span data-ttu-id="516ad-120">Dans la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], configurez le routage basé sur le contenu à l'aide du port d'envoi WCF-BasicHttp.</span><span class="sxs-lookup"><span data-stu-id="516ad-120">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure content-based routing by using the WCF-BasicHttp send port.</span></span> <span data-ttu-id="516ad-121">Vous allez configurer le **SOAPAction** en-tête que la cible [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service s’attend à recevoir.</span><span class="sxs-lookup"><span data-stu-id="516ad-121">You will configure the **SOAPAction** header that the target [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service expects to receive.</span></span>  
  
-   <span data-ttu-id="516ad-122">Dans la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], configurez l'expression de filtre pour router tout message d'erreur SOAP qu'un service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] peut envoyer à un dossier de sortie.</span><span class="sxs-lookup"><span data-stu-id="516ad-122">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure the filter expression to route any SOAP fault messages that a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service can send to an output folder.</span></span>  
  
-   <span data-ttu-id="516ad-123">Dans le Gestionnaire des services Internet, configurez l'application Web hébergeant le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] pour exposer ses métadonnées.</span><span class="sxs-lookup"><span data-stu-id="516ad-123">From within Internet Information Services (IIS) Manager, configure the Web application hosting the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to expose its metadata.</span></span> <span data-ttu-id="516ad-124">Une fois qu’il est activé, le **Assistant consommation de Service WCF de BizTalk** peut obtenir ces métadonnées pour générer des types et des schémas pour accéder à la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="516ad-124">After it is enabled, the **BizTalk WCF Service Consuming Wizard** can obtain this metadata to generate types and schemas to access the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="516ad-125">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="516ad-125">Prerequisites</span></span>  
 <span data-ttu-id="516ad-126">Pour exécuter la procédure décrite dans cet exemple, assurez-vous que votre environnement est conforme à la configuration requise décrite ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="516ad-126">To perform the steps in this sample ensure that your environment installs the following prerequisites:</span></span>  
  
-   <span data-ttu-id="516ad-127">L’ordinateur qui génère les assemblys et exécute le processus de déploiement et l’ordinateur qui exécute l’exemple, requièrent Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)]et Microsoft BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="516ad-127">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)], and Microsoft BizTalk Server.</span></span>  
  
-   <span data-ttu-id="516ad-128">L’ordinateur utilisé pour générer les assemblys et exécuter le processus de déploiement requiert Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="516ad-128">The computer used to build the assemblies and run the deployment process requires Microsoft Visual Studio.</span></span>  
  
-   <span data-ttu-id="516ad-129">L'ordinateur qui exécute l'exemple requiert les adaptateurs [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] et les outils d'administration de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-129">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="516ad-130">Il s’agit des options d’installation lors de l’installation de Microsoft BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="516ad-130">These are options to install during setup of Microsoft BizTalk Server.</span></span>  
  
-   <span data-ttu-id="516ad-131">Sur les ordinateurs utilisés pour effectuer des tâches d'administration, vous devez exécuter un compte d'utilisateur membre du groupe Administrateurs [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] pour configurer les paramètres d'application de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] à l'intérieur de la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-131">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="516ad-132">Ce compte d'utilisateur doit également être membre du groupe Administrateurs local pour le déploiement d'application, la gestion d'instances de l'hôte et d'autres tâches éventuellement requises.</span><span class="sxs-lookup"><span data-stu-id="516ad-132">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  
  
-   <span data-ttu-id="516ad-133">Sur n’importe quel ordinateur qui nécessite [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] fonctionnalité, effectuez la procédure d’installation unique pour le [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] exemples [ http://go.microsoft.com/fwlink/?LinkId=135510 ](http://go.microsoft.com/fwlink/?LinkId=135510).</span><span class="sxs-lookup"><span data-stu-id="516ad-133">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  
  
-   <span data-ttu-id="516ad-134">Sur l'ordinateur qui exécute l'exemple et importe une liaison ou un fichier .msi dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], assurez-vous que l'hôte n'est pas un hôte approuvé, sans quoi l'importation échoue.</span><span class="sxs-lookup"><span data-stu-id="516ad-134">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  
  
-   <span data-ttu-id="516ad-135">Vous devez télécharger le code de procédure pas à pas et l’extraire sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="516ad-135">You must download the walkthrough code and extract it to your computer.</span></span>  <span data-ttu-id="516ad-136">Cette procédure pas à pas est une partie de l’ensemble du [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] package de la procédure pas à pas de carte.</span><span class="sxs-lookup"><span data-stu-id="516ad-136">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="516ad-137">Vous pouvez télécharger le fichier **WCFAdapterWalkthroughs.exe** à partir de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] centre de développement sur[http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span><span class="sxs-lookup"><span data-stu-id="516ad-137">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at[http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  
  
## <a name="deploy-the-sample-wcf-service"></a><span data-ttu-id="516ad-138">Déployer l’exemple de service WCF</span><span class="sxs-lookup"><span data-stu-id="516ad-138">Deploy the sample WCF service</span></span>  
  
1.  <span data-ttu-id="516ad-139">Exécutez le fichier auto-extractible **WCFBasicHttpSendAdapter.exe** de fichiers et d’extraire les fichiers dans le **C:\WCFBasicHttpSendAdapter** dossier.</span><span class="sxs-lookup"><span data-stu-id="516ad-139">Run the self-extracting **WCFBasicHttpSendAdapter.exe** file and extract the files into the **C:\WCFBasicHttpSendAdapter** folder.</span></span>  
  
2.  <span data-ttu-id="516ad-140">Ouvrez le **C:\WCFBasicHttpSendAdapter\WCFBasicHttpSendAdapter.sln** dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="516ad-140">Open the **C:\WCFBasicHttpSendAdapter\WCFBasicHttpSendAdapter.sln** in Visual Studio.</span></span>  
  
3.  <span data-ttu-id="516ad-141">Dans l’Explorateur de solutions, développez le **BasicHttpWCFServiceConsuming** projet.</span><span class="sxs-lookup"><span data-stu-id="516ad-141">In Solution Explorer, expand the **BasicHttpWCFServiceConsuming** project.</span></span> <span data-ttu-id="516ad-142">Ce projet est le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] qui sera appelé par le port d'envoi.</span><span class="sxs-lookup"><span data-stu-id="516ad-142">This project is the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service that will be called by the send port.</span></span> <span data-ttu-id="516ad-143">Il sera hébergé dans un environnement d'hôte géré à l'aide des services Internet.</span><span class="sxs-lookup"><span data-stu-id="516ad-143">It will be hosted in a managed host environment using Internet Information Services (IIS).</span></span> <span data-ttu-id="516ad-144">Dans les services Internet, l'hébergement utilise une activation basée sur les messages pour gérer l'activation et la durée du service.</span><span class="sxs-lookup"><span data-stu-id="516ad-144">Hosting in IIS uses message-based activation to manage the activation and lifetime of the service.</span></span> <span data-ttu-id="516ad-145">Développez **App_Code**, puis ouvrez **OrderProcess.cs** pour passer en revue.</span><span class="sxs-lookup"><span data-stu-id="516ad-145">Expand **App_Code**, and then open **OrderProcess.cs** to review.</span></span> <span data-ttu-id="516ad-146">Cela [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service reçoit des messages de demande de commande via le **OrderRequest** (méthode).</span><span class="sxs-lookup"><span data-stu-id="516ad-146">This [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service receives order request messages through the **OrderRequest** method.</span></span> <span data-ttu-id="516ad-147">Le fichier OrderProcess.cs contient la définition et l'implémentation de l'interface du service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-147">The OrderProcess.cs file contains the interface defition and implementation of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="516ad-148">Il renvoie simplement ordre des messages de réponse via la **OrderResponse** (méthode).</span><span class="sxs-lookup"><span data-stu-id="516ad-148">It simply returns order response messages through the **OrderResponse** method.</span></span>  
  
4.  <span data-ttu-id="516ad-149">Examinez le fichier OrderProcess.svc.</span><span class="sxs-lookup"><span data-stu-id="516ad-149">Review the OrderProcess.svc file.</span></span> <span data-ttu-id="516ad-150">Il contient une seule ligne utilisée pour indiquer aux services Internet d'activer le service pour une application cliente.</span><span class="sxs-lookup"><span data-stu-id="516ad-150">It contains only one line which is used to tell IIS to activate the service for a client application.</span></span> <span data-ttu-id="516ad-151">Le **@ServiceHost** attribut utilisé pour héberger le service est un point d’extensibilité dans le [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] modèle de programmation.</span><span class="sxs-lookup"><span data-stu-id="516ad-151">The **@ServiceHost** attribute used to host the service is a point of extensibility within the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] programming model.</span></span> <span data-ttu-id="516ad-152">Un modèle de fabrique utilise **ServiceHostFactory** pour créer une instance de **ServiceHost** avec une instance de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service pour gérer les demandes entrantes.</span><span class="sxs-lookup"><span data-stu-id="516ad-152">A factory pattern uses **ServiceHostFactory** to create an instance of **ServiceHost** with an instance of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to handle incoming requests.</span></span> <span data-ttu-id="516ad-153">L’instanciation de cette instance est basée sur le **ServiceBehaviorAttribute.ConcurrencyMode** propriété qui détermine si un service prend en charge un seul thread, plusieurs threads ou des appels réentrants.</span><span class="sxs-lookup"><span data-stu-id="516ad-153">Instantiation of this instance is based upon the **ServiceBehaviorAttribute.ConcurrencyMode** property, which determines whether a service supports one thread, multiple threads, or reentrant calls.</span></span> <span data-ttu-id="516ad-154">L’instanciation est également déterminée par le **ServiceBehavior.InstanceMode** propriété qui détermine si une seule instance servira tous les appelants (singleton), si une instance sera créée par appel (sans état), ou si une seule instance va être créée pour chaque session (stateful).</span><span class="sxs-lookup"><span data-stu-id="516ad-154">Instantiation is also determined by the **ServiceBehavior.InstanceMode** property, which determines if a only one instance will serve all callers (singleton), if one instance will be created per call (stateless), or if one instance will be created for each session (stateful).</span></span>  
  
    ```  
    <%@ServiceHost language=c# Debug="true" Service="Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming.OrderProcessServiceType" %>  
    ```  
  
5.  <span data-ttu-id="516ad-155">Dans Visual Studio, dans l’Explorateur de solutions, ouvrez **Web.config** pour passer en revue.</span><span class="sxs-lookup"><span data-stu-id="516ad-155">In Visual Studio, in Solution Explorer, open **Web.config** to review.</span></span> <span data-ttu-id="516ad-156">Un service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] hébergé dans les services Internet est configuré à l'aide d'un fichier Web.config au lieu d'un fichier app.config comme c'est le cas quand il est hébergé dans une application console.</span><span class="sxs-lookup"><span data-stu-id="516ad-156">When hosted in IIS, a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service is configured using a Web.config file instead of an app.config file as when hosted in a console application.</span></span>  
  
    -   <span data-ttu-id="516ad-157">Assurez-vous que le **httpGetEnabled** attribut de la \< **serviceMetaData** \> a la valeur `true` afin que le **le Service WCF BizTalk Assistant consommation** peuvent consommer les métadonnées pour le service.</span><span class="sxs-lookup"><span data-stu-id="516ad-157">Make sure that the **httpGetEnabled** attribute of the \<**serviceMetaData**\> element is set to `true` so that the **BizTalk WCF Service Consuming Wizard** can consume the metadata for the service.</span></span>  
  
    -   <span data-ttu-id="516ad-158">Assurez-vous que le **mode** attribut de la \< **sécurité** \> a la valeur **aucun**.</span><span class="sxs-lookup"><span data-stu-id="516ad-158">Make sure that the **mode** attribute of the \<**security**\> element is set to **None**.</span></span> <span data-ttu-id="516ad-159">Étant donné que cette procédure pas à pas utilise le **aucun** mode de sécurité, le site Web application hébergeant ce service doit être configurée pour autoriser l’accès anonyme.</span><span class="sxs-lookup"><span data-stu-id="516ad-159">Because this walkthrough uses the **None** security mode, the Web application hosting this service must be configured to allow anonymous access.</span></span>  
  
6.  <span data-ttu-id="516ad-160">Étant donné que la **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming** assembly doit être installé dans le GAC, vous devez un fichier de clé de nom fort pour terminer le processus de déploiement.</span><span class="sxs-lookup"><span data-stu-id="516ad-160">Because the **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming** assembly must be installed in the GAC, it will need a strong name key file to complete the deployment process.</span></span> <span data-ttu-id="516ad-161">Cliquez sur le **BasicHttpWcfServiceConsuming** de projet, puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="516ad-161">Right-click the **BasicHttpWcfServiceConsuming** project, and then click **Properties**.</span></span> <span data-ttu-id="516ad-162">Sur le **propriétés** , cliquez sur **signature**, puis sélectionnez **signer l’assembly**.</span><span class="sxs-lookup"><span data-stu-id="516ad-162">On the **Properties** page, click **Signing**, and select **Sign the assembly**.</span></span> <span data-ttu-id="516ad-163">Cliquez sur la flèche vers le bas dans la **choisir un fichier de clé de nom fort** la liste déroulante, cliquez sur  **\<nouveau\>**et entrez `keyfile.snk` dans le **le nom de fichier de clé**zone de texte.</span><span class="sxs-lookup"><span data-stu-id="516ad-163">Click the down arrow in the **Choose a strong name key file** drop-down list, click **\<New\>**, and enter `keyfile.snk` in the **key file name** textbox.</span></span>  <span data-ttu-id="516ad-164">Décochez la case **protéger mon fichier de clé avec un mot de passe**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="516ad-164">Uncheck **Protect my key file with a password**, and then click **OK**.</span></span>  
  
7.  <span data-ttu-id="516ad-165">Dans l’Explorateur de solutions, cliquez sur **BasicHttpWcfServiceConsuming**, puis cliquez sur **reconstruire**.</span><span class="sxs-lookup"><span data-stu-id="516ad-165">In Solution Explorer, right-click **BasicHttpWcfServiceConsuming**, and then click **Rebuild**.</span></span>  
  
8.  <span data-ttu-id="516ad-166">À l’aide de l’Explorateur Windows, copiez le contenu du **C:\WCFBasicHttpSendAdapter\BasicHttpWCFServiceConsuming** à la **C:\InetPub\wwwroot** dossier.</span><span class="sxs-lookup"><span data-stu-id="516ad-166">Using Windows Explorer, copy the contents of **C:\WCFBasicHttpSendAdapter\BasicHttpWCFServiceConsuming** to the **C:\InetPub\wwwroot** folder.</span></span>  
  
9. <span data-ttu-id="516ad-167">Configurez l'application Web pour héberger le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] comme suit :</span><span class="sxs-lookup"><span data-stu-id="516ad-167">Configure the Web application to host the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service as follows:</span></span>  
  
    1.  <span data-ttu-id="516ad-168">Cliquez sur **Démarrer**, pointez sur **outils d’administration**, puis cliquez sur **Gestionnaire des Services Internet (IIS)**.</span><span class="sxs-lookup"><span data-stu-id="516ad-168">Click **Start**, point to **Administrator Tools**, and then click **Internet Information Services (IIS) Manager**.</span></span>  
  
    2.  <span data-ttu-id="516ad-169">Créer un pool d'applications dans lequel ce service s'exécutera.</span><span class="sxs-lookup"><span data-stu-id="516ad-169">Create an application pool within which this service will run.</span></span> <span data-ttu-id="516ad-170">Avec le bouton droit **Pools d’applications**, cliquez sur **ajouter un Pool d’applications...** , entrez un nom pour le pool d’applications, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="516ad-170">Right-click **Application Pools**, click **Add Application Pool…**, enter a name for the application pool, and then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="516ad-171">Développez **Pools d’applications**, cliquez sur le pool d’applications que vous venez de créée, puis sélectionnez **paramètres avancés**.</span><span class="sxs-lookup"><span data-stu-id="516ad-171">Expand **Application Pools**, right-click the application pool you just created, and then select **Advanced Settings**.</span></span> <span data-ttu-id="516ad-172">Sous **modèle de processus** section, entrez le compte a accès à la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] des bases de données sous le **identité** champ.</span><span class="sxs-lookup"><span data-stu-id="516ad-172">Under **Process Model** section, enter the account which has access to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases under the **Identity** field.</span></span>  
  
    4.  <span data-ttu-id="516ad-173">Développez **Sites**, développez **Site Web par défaut**, avec le bouton droit **BasicHttpWCFServiceConsuming**, puis cliquez sur **convertir en Application**pour créer une application Web pour ce [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="516ad-173">Expand **Sites**, expand **Default Web Site**, right-click **BasicHttpWCFServiceConsuming**, and then click **Convert to Application** to create a Web application for this [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
    5.  <span data-ttu-id="516ad-174">Dans le **convertir en Application** boîte de dialogue, cliquez sur **sélectionnez** pour sélectionner le pool d’applications créé précédemment, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="516ad-174">In the **Convert to Application** dialog box, click **Select** to select the application pool created earlier, and then click **OK**.</span></span>  
  
    6.  <span data-ttu-id="516ad-175">Dans l’affichage des fonctionnalités, cliquez sur le **authentification** icône et vérifiez que le **l’authentification anonyme** option est **activé**.</span><span class="sxs-lookup"><span data-stu-id="516ad-175">In Features View, click the **Authentication** icon and ensure that the **Anonymous Authentication** option is **enabled**.</span></span> <span data-ttu-id="516ad-176">Il prend en charge [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services avec le **aucun** mode de sécurité.</span><span class="sxs-lookup"><span data-stu-id="516ad-176">This supports [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services with the **None** security mode.</span></span>  
  
10. <span data-ttu-id="516ad-177">Testez le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] publié comme suit :</span><span class="sxs-lookup"><span data-stu-id="516ad-177">Test the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service as follows:</span></span>  
  
    1.  <span data-ttu-id="516ad-178">Dans le Gestionnaire IIS, développez **Sites Web**, puis développez **BasicHttpWCFServiceConsuming**.</span><span class="sxs-lookup"><span data-stu-id="516ad-178">In IIS Manager, expand **Web Sites**, and then expand **BasicHttpWCFServiceConsuming**.</span></span>  
  
    2.  <span data-ttu-id="516ad-179">Dans le Gestionnaire des services Internet, dans le volet droit, cliquez sur **OrderProcess.svc**, puis cliquez sur **Parcourir**.</span><span class="sxs-lookup"><span data-stu-id="516ad-179">In IIS Manager, in the right pane, right-click **OrderProcess.svc**, and then click **Browse**.</span></span> <span data-ttu-id="516ad-180">Cela ouvre Internet Explorer pour afficher le **OrderProcessServiceType Service** page indiquant que vous avez créé avec succès en cours d’exécution [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="516ad-180">This opens Internet Explorer to display the **OrderProcessServiceType Service** page that indicates you have successfully created a running [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="516ad-181">Cette page inclut également une adresse WSDL complète, que vous pouvez copier et utiliser avec l'outil de métadonnées de service (svcutil.exe) pour créer un code proxy et un fichier de configuration utilisables pour développer une application cliente pour le service.</span><span class="sxs-lookup"><span data-stu-id="516ad-181">The page also includes a full WSDL address that you can copy and use with the Service Metadata Tool (svcutil.exe) to create proxy code and a configuration file that can be used to develop a client application for the service.</span></span>  
  
    3.  <span data-ttu-id="516ad-182">Copiez l'adresse WSDL complète dans le Presse-papiers système.</span><span class="sxs-lookup"><span data-stu-id="516ad-182">Copy the full WSDL address to the system Clipboard.</span></span> <span data-ttu-id="516ad-183">Ne copiez pas le **« svcutil.exe »** partie : **http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc?wsdl**</span><span class="sxs-lookup"><span data-stu-id="516ad-183">Do not copy the **“svcutil.exe”** part: **http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc?wsdl**</span></span>  
  
## <a name="add-the-schemas-and-types-for-the-wcf-basichttp-adapter-to-the-sample-biztalk-application"></a><span data-ttu-id="516ad-184">Ajoutez les schémas et les types de l’adaptateur WCF-BasicHttp à l’exemple d’application BizTalk</span><span class="sxs-lookup"><span data-stu-id="516ad-184">Add the schemas and types for the WCF-BasicHttp adapter to the sample BizTalk application</span></span>  
  
1.  <span data-ttu-id="516ad-185">Comme l'adaptateur appellera le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], il a besoin d'informations de schémas et de types concernant la manière d'appeler ce service à l'aide des métadonnées.</span><span class="sxs-lookup"><span data-stu-id="516ad-185">Since the adapter will call the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service it needs information from schemas and types about how to make that call to that service using the metadata.</span></span> <span data-ttu-id="516ad-186">**BizTalkApp** fournit les artefacts pour utiliser la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="516ad-186">**BizTalkApp** provides the artifacts to consume the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="516ad-187">Dans Visual Studio, dans l’Explorateur de solutions, cliquez sur **BizTalkApp**, cliquez sur **ajouter**, puis cliquez sur **ajouter les éléments générés**.</span><span class="sxs-lookup"><span data-stu-id="516ad-187">In Visual Studio, in Solution Explorer, right-click **BizTalkApp**, click **Add**, and then click **Add Generated Items**.</span></span>  
  
2.  <span data-ttu-id="516ad-188">Dans le **ajouter les éléments générés** boîte de dialogue le **modèles** section, sélectionnez **utiliser le Service WCF**, puis cliquez sur **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="516ad-188">In the **Add Generated Items** dialog box, in the **Templates** section, select **Consume WCF Service**, and then click **Add**.</span></span>  
  
3.  <span data-ttu-id="516ad-189">Sur le **Bienvenue dans l’Assistant de consommation de Service WCF BizTalk** , cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="516ad-189">On the **Welcome to the BizTalk WCF Service Consuming Wizard** page, click **Next**.</span></span> <span data-ttu-id="516ad-190">Cet Assistant lit les métadonnées et crée les schémas et les types.</span><span class="sxs-lookup"><span data-stu-id="516ad-190">This wizard will read the metadata and create schemas and types.</span></span>  
  
4.  <span data-ttu-id="516ad-191">Sur le **source des métadonnées** page, sélectionnez le **point de terminaison MEX (Metadata Exchange)** option pour utiliser les métadonnées de l’URL que vous avez copié dans le Presse-papiers dans la procédure précédente, puis cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="516ad-191">On the **Metadata source** page, select the **Metadata Exchange (MEX) endpoint** option to consume metadata from the URL that you copied to the Clipboard in the previous procedure, and then click **Next**.</span></span>  
  
5.  <span data-ttu-id="516ad-192">Sur le **point de terminaison de métadonnées** page, collez l’adresse WSDL complète que vous avez copié dans la procédure précédente pour le **adresse des métadonnées** liste déroulante, puis cliquez sur **obtenir** obtenir le document de métadonnées pour l’exemple [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="516ad-192">On the **Metadata Endpoint** page, paste the full WSDL address that you copied in the previous procedure to the **Metadata Address** drop-down list, and then click **Get** to get the metadata document for the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="516ad-193">L’obtention des métadonnées permet le **suivant** bouton.</span><span class="sxs-lookup"><span data-stu-id="516ad-193">Obtaining the metadata enables the **Next** button.</span></span> <span data-ttu-id="516ad-194">Cliquez sur **Suivant** pour continuer.</span><span class="sxs-lookup"><span data-stu-id="516ad-194">Click **Next** to continue.</span></span>  
  
6.  <span data-ttu-id="516ad-195">Sur le **récapitulatif des métadonnées de Service WCF importation** page, vérifiez vos paramètres.</span><span class="sxs-lookup"><span data-stu-id="516ad-195">On the **Import WCF Service Metadata Summary** page, review your settings.</span></span> <span data-ttu-id="516ad-196">Cette boîte de dialogue présente les récapitulatifs d'espace de noms, XSD et WSDL des métadonnées à importer.</span><span class="sxs-lookup"><span data-stu-id="516ad-196">This dialog box shows the namespace, XSD, and WSDL summaries of the metadata to be imported.</span></span> <span data-ttu-id="516ad-197">Elle indique également où les fichiers d'orchestration (.odx), de liaisons (.xml) et de schéma (.xsd) seront écrits durant le processus d'importation.</span><span class="sxs-lookup"><span data-stu-id="516ad-197">It also shows where orchestration (.odx), bindings (.xml), and schema (.xsd) files will be written during the import process.</span></span> <span data-ttu-id="516ad-198">Cliquez sur **importation** pour créer les artefacts BizTalk et les types à utiliser pour consommer l’exemple [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="516ad-198">Click **Import** to create the BizTalk artifacts and types to be used for consuming the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
7.  <span data-ttu-id="516ad-199">Sur le **fin de l’Assistant de consommation de Service WCF BizTalk** , cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="516ad-199">On the **Completing the BizTalk WCF Service Consuming Wizard** page, click **Finish**.</span></span>  
  
8.  <span data-ttu-id="516ad-200">Dans Visual Studio, dans l’Explorateur de solutions, le **Assistant consommation de Service WCF de BizTalk** génère les fichiers suivants :</span><span class="sxs-lookup"><span data-stu-id="516ad-200">In Visual Studio, in Solution Explorer, the **BizTalk WCF Service Consuming Wizard** generates the following files:</span></span>  
  
    -   <span data-ttu-id="516ad-201">Un fichier d’orchestration **OrderProcessServiceType.odx**.</span><span class="sxs-lookup"><span data-stu-id="516ad-201">An orchestration file **OrderProcessServiceType.odx**.</span></span> <span data-ttu-id="516ad-202">Cette orchestration ne comprend pas d'étape du flux de travail.</span><span class="sxs-lookup"><span data-stu-id="516ad-202">There are no workflow stages in this orchestration.</span></span> <span data-ttu-id="516ad-203">En revanche, vous pouvez l'ajouter et la lier à des ports logiques pour utiliser le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-203">However, you could add to it and bind it to logical ports to consume the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="516ad-204">Elle ne contient pas de types BizTalk importants, tels que des types de ports et de messages à parties multiples, utilisés dans cet exemple.</span><span class="sxs-lookup"><span data-stu-id="516ad-204">It does contain the important BizTalk types such as port types and multipart message types, which are used in this sample.</span></span> <span data-ttu-id="516ad-205">Pour afficher ces informations, double-cliquez sur le **OrderProcessServiceType.odx** orchestration.</span><span class="sxs-lookup"><span data-stu-id="516ad-205">To view this information, double-click the **OrderProcessServiceType.odx** orchestration.</span></span> <span data-ttu-id="516ad-206">Cliquez sur **vue**, cliquez sur **autres fenêtres**, puis cliquez sur **Vue Orchestration**.</span><span class="sxs-lookup"><span data-stu-id="516ad-206">Click **View**, click **Other Windows**, and click **Orchestration View**.</span></span> <span data-ttu-id="516ad-207">Développez **Types**, développez **Types de ports**, puis développez **IOrderProcess**.</span><span class="sxs-lookup"><span data-stu-id="516ad-207">Expand **Types**, expand **Port Types**, and then expand **IOrderProcess**.</span></span> <span data-ttu-id="516ad-208">Vous verrez la **Submit** (méthode).</span><span class="sxs-lookup"><span data-stu-id="516ad-208">You will see the **Submit** method.</span></span> <span data-ttu-id="516ad-209">Développez cette méthode, et vous verrez la **OrderRequest** et **OrderResponse** types de ports.</span><span class="sxs-lookup"><span data-stu-id="516ad-209">Expand that method and you will see the **OrderRequest** and **OrderResponse** port types.</span></span> <span data-ttu-id="516ad-210">Cliquez sur chaque type de port et la vue de leur **Description** champs dans l’Explorateur de propriétés et voir le WSDL différents messages d’entrée et de sortie.</span><span class="sxs-lookup"><span data-stu-id="516ad-210">Click each port type and view their **Description** fields in the property browser and see the different WSDL input and output messages.</span></span> <span data-ttu-id="516ad-211">Cliquez sur **Types Message à parties multiples** et afficher le **OrderRequest** et **OrderResponse** les types de message à parties multiples.</span><span class="sxs-lookup"><span data-stu-id="516ad-211">Click **Multi-Part Message Types** and view the **OrderRequest** and **OrderResponse** multi-part message types.</span></span> <span data-ttu-id="516ad-212">Cliquez sur leurs **Description** champs et afficher le WDSL des noms pour chaque type de message de message.</span><span class="sxs-lookup"><span data-stu-id="516ad-212">Click their **Description** fields and view the WDSL message names for each message type.</span></span>  
  
    -   <span data-ttu-id="516ad-213">Deux fichiers de schéma sont générés.</span><span class="sxs-lookup"><span data-stu-id="516ad-213">Two schema files are generated.</span></span> <span data-ttu-id="516ad-214">Le premier fichier de schéma (**OrderProcessServiceType_biztalk_WCF_basichttpsendadapter_basichttpWCFserviceconsuming.xsd**) définit les types de messages que l’exemple [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service utilise.</span><span class="sxs-lookup"><span data-stu-id="516ad-214">The first schema file (**OrderProcessServiceType_biztalk_WCF_basichttpsendadapter_basichttpWCFserviceconsuming.xsd**) defines the message types that the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service uses.</span></span> <span data-ttu-id="516ad-215">Elle utilise le **OrderID** champ à la fois dans **OrderRequest** et **OrderResponse** appels.</span><span class="sxs-lookup"><span data-stu-id="516ad-215">It uses the **OrderID** field in both **OrderRequest** and **OrderResponse** calls.</span></span>  
  
    -   <span data-ttu-id="516ad-216">Le deuxième fichier de schéma (**OrderProcessServiceType_schemas_microsoft_com_2003_10_Serialization.xsd**) n’est exportée par [DataContractSerializer](http://go.microsoft.com/fwlink/?LinkId=81722) pour les types, les éléments et les attributs à partir de la espace de noms, http://schemas.microsoft.com/2003/10/Serialization/.</span><span class="sxs-lookup"><span data-stu-id="516ad-216">The second schema file (**OrderProcessServiceType_schemas_microsoft_com_2003_10_Serialization.xsd**) is exported by [DataContractSerializer](http://go.microsoft.com/fwlink/?LinkId=81722) for the types, elements, and attributes from the namespace, http://schemas.microsoft.com/2003/10/Serialization/.</span></span>  
  
    -   <span data-ttu-id="516ad-217">Deux fichiers de liaison sont générés, qui sera utilisé ultérieurement pour créer l’application BizTalk : **OrderProcessServiceType.BindingInfo.xml** et **OrderProcessServiceType_Custom.BindingInfo.xml**.</span><span class="sxs-lookup"><span data-stu-id="516ad-217">Two binding files are generated, which will be used later to create the BizTalk application: **OrderProcessServiceType.BindingInfo.xml** and **OrderProcessServiceType_Custom.BindingInfo.xml**.</span></span> <span data-ttu-id="516ad-218">En règle générale, vous utiliserez le fichier de liaison non personnalisée.</span><span class="sxs-lookup"><span data-stu-id="516ad-218">In the general case you will typically use the non-custom binding file.</span></span> <span data-ttu-id="516ad-219">Toutefois, dans les rares situations où vous avez un élément de liaison personnalisée, utilisez le fichier de liaison personnalisée.</span><span class="sxs-lookup"><span data-stu-id="516ad-219">But in some rare situations where you have a custom binding element use the custom binding file.</span></span> <span data-ttu-id="516ad-220">L'élément de liaison personnalisée crée des ports d'envoi pour les applications.</span><span class="sxs-lookup"><span data-stu-id="516ad-220">The custom binding element creates send ports for the applications.</span></span> <span data-ttu-id="516ad-221">Double-cliquez sur le **OrderProcessServiceType.BindingInfo.xml** de fichiers et recherchez le **SendPort** ligne de définition et vérifier que le port d’envoi qui sera créé lorsque vous importez cette liaison de fichiers dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="516ad-221">Double-click the **OrderProcessServiceType.BindingInfo.xml** file and search for the **SendPort** definition line, and review the send port that will be created when you import this binding file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span></span>  
  
        ```  
        <SendPort Name="WCFSendPort_OrderProcessServiceType_ServiceEndpoint" …  >  
        ```  
  
    -   <span data-ttu-id="516ad-222">Ces fichiers sont utilisés par le port d'envoi utilisant l'adaptateur [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] pour consommer l'exemple de service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] décrit dans les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="516ad-222">These files are used for the send port using the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapter to consume the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service described in the metadata.</span></span>  
  
## <a name="deploy-the-sample-biztalk-solution-biztalkapp"></a><span data-ttu-id="516ad-223">Déployer l’exemple de solution BizTalk, BizTalkApp</span><span class="sxs-lookup"><span data-stu-id="516ad-223">Deploy the sample BizTalk solution, BizTalkApp</span></span>  
  
1.  <span data-ttu-id="516ad-224">Déployez l'application [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] comme suit :</span><span class="sxs-lookup"><span data-stu-id="516ad-224">Deploy the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application as follows:</span></span>  
  
    1.  <span data-ttu-id="516ad-225">Dans Visual Studio, dans l’Explorateur de solutions, cliquez sur **BizTalkApp**, puis cliquez sur **propriétés** .</span><span class="sxs-lookup"><span data-stu-id="516ad-225">In Visual Studio, in Solution Explorer, right-click **BizTalkApp**, and then click **Properties** .</span></span>  
  
    2.  <span data-ttu-id="516ad-226">Dans le **Concepteur de projets** fenêtre, cliquez sur **déploiement** onglet, puis modifiez le **Server** propriété si vous utilisez un serveur de base de données différente pour la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Base de données de gestion.</span><span class="sxs-lookup"><span data-stu-id="516ad-226">In the **Project Designer** window, click **Deployment** tab, and then change the **Server** property if you use a different database server for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Management database.</span></span> <span data-ttu-id="516ad-227">Vérifiez que le nom de l’application est **WCFBasicHttpSendAdapter**.</span><span class="sxs-lookup"><span data-stu-id="516ad-227">Ensure the application name is **WCFBasicHttpSendAdapter**.</span></span>  
  
    3.  <span data-ttu-id="516ad-228">Dans Visual Studio, dans l’Explorateur de solutions, cliquez sur **BizTalkApp**, puis cliquez sur **reconstruire**.</span><span class="sxs-lookup"><span data-stu-id="516ad-228">In Visual Studio, in Solution Explorer, right-click **BizTalkApp**, and then click **Rebuild**.</span></span>  
  
    4.  <span data-ttu-id="516ad-229">Dans Visual Studio, dans l’Explorateur de solutions, cliquez sur **BizTalkApp**, puis cliquez sur **déployer**.</span><span class="sxs-lookup"><span data-stu-id="516ad-229">In Visual Studio, in Solution Explorer, right-click **BizTalkApp**, and then click **Deploy**.</span></span>  <span data-ttu-id="516ad-230">Cela déploie l’assembly Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp dans le GAC et les artefacts à le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application nommée **WCFBasicHttpSendAdapter**.</span><span class="sxs-lookup"><span data-stu-id="516ad-230">This deploys the Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp assembly to the GAC, and the artifacts to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application named **WCFBasicHttpSendAdapter**.</span></span>  
  
2.  <span data-ttu-id="516ad-231">Configurez un port d'envoi WCF-BasicHttp dans l'application BizTalk comme suit :</span><span class="sxs-lookup"><span data-stu-id="516ad-231">Configure a WCF-BasicHttp send port in the BizTalk application as follows:</span></span>  
  
    1.  <span data-ttu-id="516ad-232">Cliquez sur **Démarrer**, pointez sur **tous les programmes**, pointez sur [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], puis cliquez sur **Administration de BizTalk Server**.</span><span class="sxs-lookup"><span data-stu-id="516ad-232">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
    2.  <span data-ttu-id="516ad-233">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **groupe BizTalk**, développez **Applications**, avec le bouton droit **WCFBasicHttpSendAdapter**, pointez sur **Importation**, puis cliquez sur **liaisons**.</span><span class="sxs-lookup"><span data-stu-id="516ad-233">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, expand **Applications**, right-click **WCFBasicHttpSendAdapter**, point to **Import**, and then click **Bindings**.</span></span>  
  
    3.  <span data-ttu-id="516ad-234">Dans le **importer les liaisons** boîte de dialogue, accédez à la **C:\WCFBasicHttpSendAdapter\BizTalkApp** dossier, sélectionnez **OrderProcessServiceType.BindingInfo.xml**, puis cliquez sur **Ouvrir**.</span><span class="sxs-lookup"><span data-stu-id="516ad-234">In the **Import Bindings** dialog box, go to the **C:\WCFBasicHttpSendAdapter\BizTalkApp** folder, select **OrderProcessServiceType.BindingInfo.xml**, and then click **Open**.</span></span> <span data-ttu-id="516ad-235">Il s’agit d’un des fichiers de liaison créés par le **Assistant consommation de Service WCF de BizTalk** précédemment.</span><span class="sxs-lookup"><span data-stu-id="516ad-235">This is one of the binding files created by the **BizTalk WCF Service Consuming Wizard** previously.</span></span> <span data-ttu-id="516ad-236">Cette opération crée le **WCFSendPort_OrderProcessServiceType_ServiceEndpoint** port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="516ad-236">This creates the **WCFSendPort_OrderProcessServiceType_ServiceEndpoint** send port.</span></span>  
  
    4.  <span data-ttu-id="516ad-237">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **WCFBasicHttpSendAdapter**, puis cliquez sur **Ports d’envoi**.</span><span class="sxs-lookup"><span data-stu-id="516ad-237">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, and then click **Send Ports**.</span></span>  
  
    5.  <span data-ttu-id="516ad-238">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, dans le volet droit, double-cliquez sur **WCFSendPort_OrderProcessServiceType_ServiceEndpoint**, lequel a été créée en important le fichier de liaison OrderProcessServiceType.BindingInfo.xml.</span><span class="sxs-lookup"><span data-stu-id="516ad-238">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, in the right pane, double-click **WCFSendPort_OrderProcessServiceType_ServiceEndpoint**, which was created by importing the binding file OrderProcessServiceType.BindingInfo.xml.</span></span> <span data-ttu-id="516ad-239">Ceci fait apparaître la **propriétés de Port d’envoi** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="516ad-239">This brings up the **Send Port Properties** dialog box.</span></span>  
  
    6.  <span data-ttu-id="516ad-240">Dans le **propriétés de Port d’envoi** boîte de dialogue, cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="516ad-240">In the **Send Port Properties** dialog box, click **Configure**.</span></span>  
  
    7.  <span data-ttu-id="516ad-241">Sur le **général** onglet vérifier les **adresse (URI)** champ **http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc**.</span><span class="sxs-lookup"><span data-stu-id="516ad-241">On the **General** tab review the **Address(URI)** field of **http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc**.</span></span> <span data-ttu-id="516ad-242">Il s'agit de l'adresse du service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] hébergé dans les services Internet que l'adaptateur WCF-BasicHttp appellera.</span><span class="sxs-lookup"><span data-stu-id="516ad-242">This is the address of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service hosted in IIS that the WCF-BasicHttp adapter will call.</span></span>  
  
    8.  <span data-ttu-id="516ad-243">Passez en revue le contenu de la **en-tête d’Action SOAP/Action** zone de texte :</span><span class="sxs-lookup"><span data-stu-id="516ad-243">Review the contents of the **SOAP Action header/Action** text box:</span></span>  
  
        ```  
        <BtsActionMapping xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">  
          <Operation Name="Submit" Action="http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming/IOrderProcess/Submit" />  
        </BtsActionMapping>  
        ```  
  
         <span data-ttu-id="516ad-244">Ce champ indique l'intention du message de demande SOAP HTTP sortant.</span><span class="sxs-lookup"><span data-stu-id="516ad-244">This field indicates the intent of the outgoing SOAP HTTP request message.</span></span> <span data-ttu-id="516ad-245">Dans ce cas, il s'agit d'appeler l'opération d'envoi sur l'interface IOrderProcess à partir de l'espace de noms Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming.</span><span class="sxs-lookup"><span data-stu-id="516ad-245">Here it is to call the Submit operation on the IOrderProcess interface from the Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming namespace.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="516ad-246">Le fichier de liaison le **Assistant consommation de Service WCF de BizTalk** génère utilise l’action de mappage de format pour le **StaticAction** propriété.</span><span class="sxs-lookup"><span data-stu-id="516ad-246">The binding file that the **BizTalk WCF Service Consuming Wizard** generates uses the action mapping format for the **StaticAction** property.</span></span> <span data-ttu-id="516ad-247">Lorsque vous utilisez le routage basé sur le contenu pour envoyer des messages aux services WCF, les adaptateurs d’envoi WCF, vous devez définir le **BTS. Opération** propriété dans les composants de pipeline pour le format de mappage d’action que le champ à utiliser pour le routage basé sur le contenu.</span><span class="sxs-lookup"><span data-stu-id="516ad-247">When using content-based routing for the WCF send adapters to send messages to WCF services, you need to set the **BTS.Operation** property in pipeline components for the action mapping format as the field to be used for content-based routing.</span></span> <span data-ttu-id="516ad-248">Vous pouvez également utiliser le format d'action unique pour le routage basé sur le contenu.</span><span class="sxs-lookup"><span data-stu-id="516ad-248">Alternatively, you can use the single action format for content-based routing.</span></span> <span data-ttu-id="516ad-249">Dans cette procédure pas à pas, vous utilisez le format d'action unique.</span><span class="sxs-lookup"><span data-stu-id="516ad-249">In this walkthrough, you use the single action format.</span></span> <span data-ttu-id="516ad-250">Pour plus d’informations sur le format d’action unique et le format de mappage d’action, consultez le **boîte de dialogue Propriétés du Transport WCF-BasicHttp, envoi, général** onglet [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-250">For more information about the single action format and the action mapping format, see the **WCF-BasicHttp Transport Properties Dialog Box, Send, General** tab [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)].</span></span>  
  
    9. <span data-ttu-id="516ad-251">Cliquez sur **OK** à deux reprises pour revenir à la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="516ad-251">Click **OK** twice to return to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
3.  <span data-ttu-id="516ad-252">Créez un port de réception statique unidirectionnel et un emplacement de réception FILE.</span><span class="sxs-lookup"><span data-stu-id="516ad-252">Create a one-way static receive port and a FILE receive location.</span></span> <span data-ttu-id="516ad-253">Un port de réception est un conteneur logique pour un ou plusieurs emplacements de réception.</span><span class="sxs-lookup"><span data-stu-id="516ad-253">A receive port is a logical container for one or more receive locations.</span></span> <span data-ttu-id="516ad-254">C'est l'emplacement où vous allez déposer un exemple de message [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] qui sera récupéré par l'adaptateur FILE, puis envoyé au service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-254">This is where you will drop a sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message that will be picked up by the File adapter, and then sent to the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
    1.  <span data-ttu-id="516ad-255">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **WCFBasicHttpSendAdapter**, avec le bouton droit **Ports de réception**, pointez sur **nouveau**, puis cliquez sur  **Unidirectionnel Port de réception**.</span><span class="sxs-lookup"><span data-stu-id="516ad-255">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, right-click **Receive Ports**, point to **New**, and then click **One-way Receive Port**.</span></span>  
  
    2.  <span data-ttu-id="516ad-256">Dans le **propriétés du Port de réception** boîte de dialogue le **nom** zone de texte, tapez `WCFBasicSendAdapter.ReceivePurchaseOrder`, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="516ad-256">In the **Receive Port Properties** dialog box, in the **Name** text box, type `WCFBasicSendAdapter.ReceivePurchaseOrder`, and then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="516ad-257">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, avec le bouton droit **WCFBasicHttpSendAdapter.ReceivePurchaseOrder**, pointez sur **nouveau**, puis cliquez sur **un emplacement de réception** .</span><span class="sxs-lookup"><span data-stu-id="516ad-257">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFBasicHttpSendAdapter.ReceivePurchaseOrder**, point to **New**, and then click **Receive Location**.</span></span>  
  
    4.  <span data-ttu-id="516ad-258">Dans le **propriétés de l’emplacement de réception** boîte de dialogue le **nom** zone de texte, tapez `WCFBasicSendAdapter.ReceivePurchaseOrder.FILE`.</span><span class="sxs-lookup"><span data-stu-id="516ad-258">In the **Receive Location Properties** dialog box, in the **Name** text box, type `WCFBasicSendAdapter.ReceivePurchaseOrder.FILE`.</span></span>  
  
    5.  <span data-ttu-id="516ad-259">Dans le **propriétés de l’emplacement de réception** boîte de dialogue le **Transport** section regard **Type**, sélectionnez **fichier** dans la liste déroulante, puis cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="516ad-259">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    6.  <span data-ttu-id="516ad-260">Dans le **propriétés du Transport FILE** boîte de dialogue le **général** sous l’onglet du **dossier de réception** zone de texte, tapez `C:\WCFBasicHttpSendAdapter\OrderRequestIn`, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="516ad-260">In the **FILE Transport Properties** dialog box, on the **General**  tab, in the **Receive folder** text box, type `C:\WCFBasicHttpSendAdapter\OrderRequestIn`, and then click **OK**.</span></span>  
  
    7.  <span data-ttu-id="516ad-261">Dans le **propriétés de l’emplacement de réception** boîte de dialogue, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="516ad-261">In the **Receive Location Properties** dialog box, click **OK**.</span></span>  
  
4.  <span data-ttu-id="516ad-262">Créez un fichier pour router les messages vers le port d'envoi WCF-BasicHttp à partir de l'emplacement de réception FILE que vous avez créé à l'étape précédente.</span><span class="sxs-lookup"><span data-stu-id="516ad-262">Create a filter to route messages to the WCF-BasicHttp send port from the FILE receive location that you created in the previous step.</span></span> <span data-ttu-id="516ad-263">Un filtre associé à un port agit comme une clause SQL « where » dans la mesure où si son évaluation est vraie, le message est transmis à ce port.</span><span class="sxs-lookup"><span data-stu-id="516ad-263">A filter associated with a port acts like a SQL “where” clause in that if it evaluates to true the message will be given to that port.</span></span>  
  
    1.  <span data-ttu-id="516ad-264">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **WCFBasicHttpSendAdapter**, cliquez sur **Ports d’envoi**, puis double-cliquez sur **WCFSendPort_OrderProcessServiceType_ ServiceEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="516ad-264">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, click **Send Ports**, and then double-click **WCFSendPort_OrderProcessServiceType_ServiceEndpoint**.</span></span>  
  
    2.  <span data-ttu-id="516ad-265">Dans le **propriétés de Port d’envoi** boîte de dialogue le **filtres** onglet, sélectionnez **BTS. ReceivePortName** dans les **propriété** , tapez `WCFBasicSendAdapter.ReceivePurchaseOrder` dans les **valeur** champ, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="516ad-265">In the **Send Port Properties** dialog box, on the **Filters** tab, select **BTS.ReceivePortName** in the **Property** field, type `WCFBasicSendAdapter.ReceivePurchaseOrder` in the **Value** field, and then click **OK**.</span></span> <span data-ttu-id="516ad-266">Cette expression de filtre route les messages entrants du port de réception WCFBasicSendAdapter.ReceivePurchaseOrder vers ce port d'envoi WCF-BasicHttp.</span><span class="sxs-lookup"><span data-stu-id="516ad-266">This filter expression routes incoming messages from the WCFBasicSendAdapter.ReceivePurchaseOrder receive port to this WCF-BasicHttp send port.</span></span>  
  
5.  <span data-ttu-id="516ad-267">Créez deux ports d'envoi FILE pour l'exemple d'application.</span><span class="sxs-lookup"><span data-stu-id="516ad-267">Create two FILE send ports for the sample application.</span></span> <span data-ttu-id="516ad-268">Le premier port d'envoi envoie des messages de réponse au port FILE à partir du service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-268">The first send port sends output response messages to the FILE port from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="516ad-269">Le deuxième port est utilisé pour gérer les messages d'erreur envoyés par le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] au client.</span><span class="sxs-lookup"><span data-stu-id="516ad-269">The second send port is used to handle fault messages sent from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service destined for the client.</span></span>  
  
    1.  <span data-ttu-id="516ad-270">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **WCFBasicHttpSendAdapter**, avec le bouton droit **Ports d’envoi**, pointez sur **nouveau**, puis cliquez sur  **Port d’envoi unidirectionnel statique**.</span><span class="sxs-lookup"><span data-stu-id="516ad-270">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
    2.  <span data-ttu-id="516ad-271">Dans le **propriétés de Port d’envoi** boîte de dialogue le **nom** zone de texte, tapez `WCFBasicSendAdapter.SendPurchaseOrder.FILE`.</span><span class="sxs-lookup"><span data-stu-id="516ad-271">In the **Send Port Properties** dialog box, in the **Name** text box, type `WCFBasicSendAdapter.SendPurchaseOrder.FILE`.</span></span>  
  
    3.  <span data-ttu-id="516ad-272">Dans le **propriétés de Port d’envoi** boîte de dialogue le **Transport** section en regard de Type, sélectionnez **fichier** dans la liste déroulante, puis cliquez sur **configurer** .</span><span class="sxs-lookup"><span data-stu-id="516ad-272">In the **Send Port Properties** dialog box, in the **Transport** section next to Type, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    4.  <span data-ttu-id="516ad-273">Dans le **propriétés du Transport FILE** boîte de dialogue le **général** sous l’onglet du **dossier de Destination** zone de texte, tapez `C:\WCFBasicHttpSendAdapter\OrderResponseOut`, puis cliquez sur **OK** .</span><span class="sxs-lookup"><span data-stu-id="516ad-273">In the **FILE Transport Properties** dialog box, on the **General** tab, in the **Destination folder** text box, type `C:\WCFBasicHttpSendAdapter\OrderResponseOut`, and then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="516ad-274">Dans le **propriétés de Port d’envoi** boîte de dialogue le **filtres** onglet, sélectionnez **BTS. MessageType** dans les **propriété** , tapez `http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse` dans les **valeur** champ pour spécifier le type de message de réponse à partir de l’exemple [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, et puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="516ad-274">In the **Send Port Properties** dialog box, on the **Filters** tab, select **BTS.MessageType** in the **Property** field, type `http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse` in the **Value** field to specify the response message type from the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, and then click **OK**.</span></span> <span data-ttu-id="516ad-275">Cette expression de filtre route les messages de réponse de l'exemple de service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] vers ce port d'envoi FILE.</span><span class="sxs-lookup"><span data-stu-id="516ad-275">This filter expression routes response messages from the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to this FILE send port.</span></span> <span data-ttu-id="516ad-276">Le port d'envoi s'abonne aux messages du type OrderResponse en spécifiant celui-ci dans la propriété de filtre.</span><span class="sxs-lookup"><span data-stu-id="516ad-276">The send port subscribes to messages of the OrderResponse type by specifying that type in the filter property.</span></span> <span data-ttu-id="516ad-277">Il s'agit du type du message de réponse du service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="516ad-277">This is the message type of the response message from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
    6.  <span data-ttu-id="516ad-278">Dans le **propriétés de Port d’envoi** boîte de dialogue, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="516ad-278">In the **Send Port Properties** dialog box, click **OK**.</span></span>  
  
    7.  <span data-ttu-id="516ad-279">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **WCFBasicHttpSendAdapter**, avec le bouton droit **Ports d’envoi**, pointez sur **nouveau**, puis cliquez sur  **Port d’envoi unidirectionnel statique**.</span><span class="sxs-lookup"><span data-stu-id="516ad-279">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
    8.  <span data-ttu-id="516ad-280">Dans le **propriétés de Port d’envoi** boîte de dialogue le **nom** zone de texte, tapez `WCFAdapterErrorSend.FILE`.</span><span class="sxs-lookup"><span data-stu-id="516ad-280">In the **Send Port Properties** dialog box, in the **Name** text box, type `WCFAdapterErrorSend.FILE`.</span></span>  
  
    9. <span data-ttu-id="516ad-281">Dans le **propriétés de Port d’envoi** boîte de dialogue le **Transport** section à côté **Type**, sélectionnez **fichier** dans la liste déroulante, puis Cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="516ad-281">In the **Send Port Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    10. <span data-ttu-id="516ad-282">Dans le **propriétés du Transport FILE** boîte de dialogue le **général** sous l’onglet du **dossier de Destination** zone de texte, tapez `C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut\`, puis cliquez sur **OK** .</span><span class="sxs-lookup"><span data-stu-id="516ad-282">In the **FILE Transport Properties** dialog box, on the **General** tab, in the **Destination folder** text box, type `C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut\`, and then click **OK**.</span></span>  
  
    11. <span data-ttu-id="516ad-283">Dans le **propriétés de Port d’envoi** boîte de dialogue le **filtres** onglet, sélectionnez **WCF. IsFault** dans les **propriété** , tapez `True` dans les **valeur** champ, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="516ad-283">In the **Send Port Properties** dialog box, on the **Filters** tab, select **WCF.IsFault** in the **Property** field, type `True` in the **Value** field, and then click **OK**.</span></span> <span data-ttu-id="516ad-284">Dans une application, une exception ou une erreur peut être détectée en vérifiant la **WCF. IsFault** propriété du message envoyé à l’appelant.</span><span class="sxs-lookup"><span data-stu-id="516ad-284">Within an application an exception or fault can be detected by checking the **WCF.IsFault** property of the message sent back to the caller.</span></span> <span data-ttu-id="516ad-285">Cette propriété est fixée à **True** si le message envoyé est un message d’erreur SOAP.</span><span class="sxs-lookup"><span data-stu-id="516ad-285">This property will be set to **True** if the message being sent is a SOAP fault message.</span></span> <span data-ttu-id="516ad-286">Cette expression de filtre route les messages d'erreur de l'exemple de service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] vers ce port d'envoi FILE.</span><span class="sxs-lookup"><span data-stu-id="516ad-286">This filter expression routes fault messages from the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to this FILE send port.</span></span>  
  
6.  <span data-ttu-id="516ad-287">Spécifiez le nom d'hôte et les liaisons pour l'exemple d'application comme suit :</span><span class="sxs-lookup"><span data-stu-id="516ad-287">Specify the host name and bindings for the sample application as follows:</span></span>  
  
     <span data-ttu-id="516ad-288">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **WCFBasicHttpSendAdapter**, développez **Orchestrations**, avec le bouton droit le  **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp.OrderProcessServiceTypeClient** orchestration, cliquez sur **propriétés**, cliquez sur **liaisons**, définissez **Hôte** à **BizTalkServerApplication**, puis cliquez sur **OK** pour enregistrer la configuration.</span><span class="sxs-lookup"><span data-stu-id="516ad-288">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, expand **Orchestrations**, right-click the **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp.OrderProcessServiceTypeClient** orchestration, click **Properties**, click **Bindings**, set **Host** to **BizTalkServerApplication**, and then click **OK** to save the configuration.</span></span>  
  
## <a name="test-the-sample-solution-with-the-wcf-basichttp-send-adapter"></a><span data-ttu-id="516ad-289">Test de l’exemple de solution avec WCF-BasicHttp l’adaptateur d’envoi</span><span class="sxs-lookup"><span data-stu-id="516ad-289">Test the sample solution with the WCF-BasicHttp send adapter</span></span>  
  
1.  <span data-ttu-id="516ad-290">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, cliquez sur **WCFBasicHttpSendAdapter**, puis cliquez sur **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="516ad-290">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFBasicHttpSendAdapter**, and then click **Start**.</span></span>  
  
2.  <span data-ttu-id="516ad-291">Dans le **Démarrer** boîte de dialogue, cliquez sur **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="516ad-291">In the **Start** dialog box, click **Start**.</span></span>  
  
3.  <span data-ttu-id="516ad-292">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **paramètres de plateforme**, développez **Instances d’hôte**, avec le bouton droit **BizTalkServerApplication** ou un autre approprié d’instance d’hôte, puis cliquez sur **redémarrer**.</span><span class="sxs-lookup"><span data-stu-id="516ad-292">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, expand **Host Instances**, right-click **BizTalkServerApplication** or another appropriate host instance, and then click **Restart**.</span></span>  
  
4.  <span data-ttu-id="516ad-293">Ouvrez une invite de commandes, taper **iisreset** à recycler IIS et ses services dépendants, puis appuyez sur ENTRÉE.</span><span class="sxs-lookup"><span data-stu-id="516ad-293">Open a command prompt, type **iisreset** to recycle IIS and its dependent services, and then press ENTER.</span></span>  
  
5.  <span data-ttu-id="516ad-294">À l’invite de commandes, copiez **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Sample.xml** à la **C:\WCFBasicHttpSendAdapter\OrderRequestIn** dossier.</span><span class="sxs-lookup"><span data-stu-id="516ad-294">At the command prompt, copy **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Sample.xml** to the **C:\WCFBasicHttpSendAdapter\OrderRequestIn** folder.</span></span> <span data-ttu-id="516ad-295">Ce message est routé vers bidirectionnel **WcfSendPort_OrderProcessServiceType_ServiceEndpoint** port d’envoi statique avec sollicitation-réponse.</span><span class="sxs-lookup"><span data-stu-id="516ad-295">This message is routed to the two-way **WcfSendPort_OrderProcessServiceType_ServiceEndpoint** static Solicit-Response send port.</span></span>  <span data-ttu-id="516ad-296">L’envoi de ce bidirectionnelle envoyer des appels de port **Submit** méthode sur la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service hébergé dans IIS.</span><span class="sxs-lookup"><span data-stu-id="516ad-296">The send side of this two-way send port calls **Submit** method on the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service hosted in IIS.</span></span> <span data-ttu-id="516ad-297">Le résultat est retourné pour le port de réponse de la **WcfSendPort_OrderProcessServiceType_ServiceEndpoint** port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="516ad-297">The result is returned to the response port of the **WcfSendPort_OrderProcessServiceType_ServiceEndpoint** send port.</span></span>  <span data-ttu-id="516ad-298">Le **WCFBasicSendAdapter.SendPurchaseOrder.FILE** port d’envoi comporte un abonnement qui est déclenché lorsque le type du message est **http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse**. Il sera le message traité avec succès et écrire dans le **C:\WCFBasicHttpSendAdapter\OrderResponseOut** dossier.</span><span class="sxs-lookup"><span data-stu-id="516ad-298">The **WCFBasicSendAdapter.SendPurchaseOrder.FILE** send port has a subscription that will be triggered when the type of the message is **http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse**.It will get the successfully processed message and write it out to the **C:\WCFBasicHttpSendAdapter\OrderResponseOut** folder.</span></span>  
  
6.  <span data-ttu-id="516ad-299">Vérifiez le **C:\WCFBasicHttpSendAdapter\OrderResponseOut** dossier pour un message de réponse de le [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="516ad-299">Check the **C:\WCFBasicHttpSendAdapter\OrderResponseOut** folder for a response message from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
7.  <span data-ttu-id="516ad-300">À l’invite de commandes, **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Invalid.xml** à la **C:\WCFBasicHttpSendAdapter\OrderRequestIn** dossier.</span><span class="sxs-lookup"><span data-stu-id="516ad-300">At the command prompt, **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Invalid.xml** to the **C:\WCFBasicHttpSendAdapter\OrderRequestIn** folder.</span></span> <span data-ttu-id="516ad-301">Ce message contient un espace de noms non valide pour que le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] renvoie un message d'erreur.</span><span class="sxs-lookup"><span data-stu-id="516ad-301">This message contains an invalid namespace so that the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service returns a fault message.</span></span>  
  
8.  <span data-ttu-id="516ad-302">Vérifiez le **C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut** dossier pour un fichier XML contenant le message d’erreur à partir de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="516ad-302">Check the **C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut** folder for an XML file containing the fault message from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="516ad-303">Examinez le \< **faultstring** \> champ indiquant la cause du message d’erreur à un corps de message non valide.</span><span class="sxs-lookup"><span data-stu-id="516ad-303">Look at the \<**faultstring**\> field showing the cause of the fault message to be an invalid message body.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="516ad-304">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="516ad-304">See Also</span></span>  
 <span data-ttu-id="516ad-305">[Procédure pas à pas : Publication de Services WCF avec l’adaptateur WCF-BasicHttp](../core/walkthrough-publishing-wcf-services-with-the-wcf-basichttp-adapter.md) </span><span class="sxs-lookup"><span data-stu-id="516ad-305">[Walkthrough: Publishing WCF Services with the WCF-BasicHttp Adapter](../core/walkthrough-publishing-wcf-services-with-the-wcf-basichttp-adapter.md) </span></span>  
 <span data-ttu-id="516ad-306">[Comment utiliser l’Assistant consommation de Service WCF BizTalk pour utiliser un Service WCF](../core/how-to-use-the-biztalk-wcf-service-consuming-wizard-to-consume-a-wcf-service.md) </span><span class="sxs-lookup"><span data-stu-id="516ad-306">[How to Use the BizTalk WCF Service Consuming Wizard to Consume a WCF Service](../core/how-to-use-the-biztalk-wcf-service-consuming-wizard-to-consume-a-wcf-service.md) </span></span>  
 [<span data-ttu-id="516ad-307">Spécification du corps de message pour les adaptateurs WCF</span><span class="sxs-lookup"><span data-stu-id="516ad-307">Specifying the Message Body for the WCF Adapters</span></span>](../core/specifying-the-message-body-for-the-wcf-adapters.md)