---
title: "Procédure pas à pas : Publication de Services WCF avec l’adaptateur WCF-NetMsmq | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: e623b6dc-32e5-467c-bb7d-68b7a75723c1
caps.latest.revision: "46"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2bf5ba8aef29476f58bfa000b75fbe481238eb62
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/01/2017
---
# <a name="walkthrough-publishing-wcf-services-with-the-wcf-netmsmq-adapter"></a><span data-ttu-id="e38b5-102">Procédure pas à pas : Publication de Services WCF avec l’adaptateur WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="e38b5-102">Walkthrough: Publishing WCF Services with the WCF-NetMsmq Adapter</span></span>
  
> [!NOTE]
>  <span data-ttu-id="e38b5-103">Pour plus d’informations à propos des adaptateurs, consultez [adaptateurs dans BizTalk Server](../core/adapters-in-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="e38b5-103">For more information about adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  
  
## <a name="introduction"></a><span data-ttu-id="e38b5-104">Introduction</span><span class="sxs-lookup"><span data-stu-id="e38b5-104">Introduction</span></span>
  
 <span data-ttu-id="e38b5-105">Dans BizTalk Server, une orchestration peut être publiée comme un [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="e38b5-105">In BizTalk Server, an orchestration can be published as a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="e38b5-106">Par l'intermédiaire d'un emplacement de réception BizTalk, une orchestration peut exposer un point de terminaison [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] qui lui permet d'être appelée par un client [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e38b5-106">Through a BizTalk receive location, an orchestration can expose a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] endpoint, which allows it to be called by a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client.</span></span> <span data-ttu-id="e38b5-107">Le **Assistant Publication du Service WCF BizTalk** fournit un moyen simple pour exposer une orchestration comme emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="e38b5-107">The **BizTalk WCF Service Publishing Wizard** provides a simple way to expose an orchestration as a receive location.</span></span>  
  
 <span data-ttu-id="e38b5-108">L’adaptateur WCF-NetMsmq utilise le **NetMsmqBinding** liaison pour prendre en charge à l’aide de Microsoft Message Queuing (également appelé MSMQ) comme son transport sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="e38b5-108">The WCF-NetMsmq adapter uses the **NetMsmqBinding** binding to provide support for using Microsoft Message Queuing (also known as MSMQ) as its underlying transport.</span></span> <span data-ttu-id="e38b5-109">Le client d'un service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] envoie des messages [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] à une file d'attente MSMQ à l'aide de l'emplacement de réception configuré pour utiliser l'adaptateur WCF-NetMSMQ.</span><span class="sxs-lookup"><span data-stu-id="e38b5-109">The client of a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service sends [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages to an MSMQ queue by using the receive location configured to use the WCF-NetMSMQ adapter.</span></span> <span data-ttu-id="e38b5-110">L'adaptateur récupère ces [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages dans la file d'attente MSMQ, les convertit au format [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] et les écrit dans la base de données MessageBox de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e38b5-110">The adapter picks up the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from the MSMQ queue, converts them into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] format, and writes them to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database.</span></span>  
  
 <span data-ttu-id="e38b5-111">Cette procédure pas à pas illustre la manière dont une application console cliente [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] exploite l'adaptateur WCF-NetMsmq afin de communiquer avec un service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], hébergé dans une application console .NET, via une file d'attente des messages MSMQ.</span><span class="sxs-lookup"><span data-stu-id="e38b5-111">This walkthrough shows how a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client console application uses the WCF-NetMsmq adapter to communicate with a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, hosted in a .NET console application, through an MSMQ message queue.</span></span> <span data-ttu-id="e38b5-112">Elle présente une méthode de publication de métadonnées pour un emplacement de réception à l'aide de l'Assistant Publication de services WCF BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e38b5-112">It demonstrates how to publish metadata for a receive location with the BizTalk WCF Service Publishing Wizard.</span></span> <span data-ttu-id="e38b5-113">Elle décrit également la configuration d'une application Web pour prendre en charge la publication des métadonnées.</span><span class="sxs-lookup"><span data-stu-id="e38b5-113">It also shows how to configure a Web application to support publishing metadata.</span></span>  
  
 <span data-ttu-id="e38b5-114">Une fois cette procédure pas à pas terminée, vous saurez comment effectuer les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="e38b5-114">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  
  
-   <span data-ttu-id="e38b5-115">Depuis Visual Studio, utilisez le **déployer** commande pour déployer des assemblys BizTalk à une instance locale de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e38b5-115">From within Visual Studio, use the **Deploy** command to deploy BizTalk assemblies to a local instance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="e38b5-116">Vous créerez ainsi une application BizTalk contenant ces assemblys.</span><span class="sxs-lookup"><span data-stu-id="e38b5-116">This creates a BizTalk application that is populated with the assemblies.</span></span> <span data-ttu-id="e38b5-117">Un assembly BizTalk contient des informations sur les ressources utilisées dans une solution BizTalk Server (par exemple, des orchestrations, des pipelines, des schémas et des mappages).</span><span class="sxs-lookup"><span data-stu-id="e38b5-117">A BizTalk assembly contains resource information such as orchestrations, pipelines, schemas, and maps to be used in a BizTalk solution.</span></span>  
  
-   <span data-ttu-id="e38b5-118">À partir de la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], configurez un emplacement de réception WCF-NetMsmq de manière à héberger le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] publié.</span><span class="sxs-lookup"><span data-stu-id="e38b5-118">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure a WCF-NetMsmq receive location to host the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
-   <span data-ttu-id="e38b5-119">À partir de la **Assistant Publication du Service WCF BizTalk**, créer l’application Web pour publier des métadonnées pour l’emplacement de réception existant.</span><span class="sxs-lookup"><span data-stu-id="e38b5-119">From the **BizTalk WCF Service Publishing Wizard**, create the Web application to publish metadata for an existing receive location.</span></span> <span data-ttu-id="e38b5-120">Ces métadonnées sont exploitées par le client qui envoie des messages vers cet emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="e38b5-120">This metadata is used by the client that submits messages to the receive location.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="e38b5-121">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="e38b5-121">Prerequisites</span></span>  
 <span data-ttu-id="e38b5-122">Pour exécuter la procédure décrite dans cet exemple, assurez-vous que votre environnement est conforme à la configuration requise décrite ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="e38b5-122">To perform the steps in this sample ensure that your environment installs the following prerequisites:</span></span>  
  
-   <span data-ttu-id="e38b5-123">L’ordinateur qui génère les assemblys et exécute le processus de déploiement et de l’ordinateur qui exécute l’exemple, requièrent Microsoft Windows Server, .NET Framework et BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="e38b5-123">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft Windows Server, .NET Framework, and BizTalk Server.</span></span>  
  
-   <span data-ttu-id="e38b5-124">L’ordinateur utilisé pour générer les assemblys et exécuter le processus de déploiement requiert Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e38b5-124">The computer used to build the assemblies and run the deployment process requires Microsoft Visual Studio.</span></span>  
  
-   <span data-ttu-id="e38b5-125">L'ordinateur qui exécute l'exemple requiert les adaptateurs [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] et les outils d'administration de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e38b5-125">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="e38b5-126">Il s’agit des options d’installation lors de l’installation de Microsoft BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="e38b5-126">These are options to install during setup of Microsoft BizTalk Server.</span></span>  
  
-   <span data-ttu-id="e38b5-127">Sur les ordinateurs utilisés pour effectuer des tâches d'administration, vous devez exécuter un compte d'utilisateur membre du groupe Administrateurs [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] pour configurer les paramètres d'application de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] à l'intérieur de la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e38b5-127">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="e38b5-128">Ce compte d'utilisateur doit également être membre du groupe Administrateurs local pour le déploiement d'application, la gestion d'instances de l'hôte et d'autres tâches éventuellement requises.</span><span class="sxs-lookup"><span data-stu-id="e38b5-128">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  
  
-   <span data-ttu-id="e38b5-129">Sur n’importe quel ordinateur qui nécessite [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] fonctionnalité, effectuez la procédure d’installation unique pour le [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] exemples [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span><span class="sxs-lookup"><span data-stu-id="e38b5-129">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  
  
-   <span data-ttu-id="e38b5-130">Sur l'ordinateur qui exécute l'exemple et importe une liaison ou un fichier .msi dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], assurez-vous que l'hôte n'est pas un hôte approuvé, sans quoi l'importation échoue.</span><span class="sxs-lookup"><span data-stu-id="e38b5-130">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  
  
-   <span data-ttu-id="e38b5-131">Vous devez télécharger le code de procédure pas à pas et l’extraire sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="e38b5-131">You must download the walkthrough code and extract it to your computer.</span></span> <span data-ttu-id="e38b5-132">Cette procédure pas à pas est une partie de l’ensemble du [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] package de la procédure pas à pas de carte.</span><span class="sxs-lookup"><span data-stu-id="e38b5-132">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="e38b5-133">Vous pouvez télécharger le fichier **WCFAdapterWalkthroughs.exe** à partir de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] centre de développement sur [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span><span class="sxs-lookup"><span data-stu-id="e38b5-133">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  
  
## <a name="build-and-deploy-the-biztalk-solution-biztalkapp"></a><span data-ttu-id="e38b5-134">Générer et déployer la solution BizTalk, BizTalkApp</span><span class="sxs-lookup"><span data-stu-id="e38b5-134">Build and deploy the BizTalk solution, BizTalkApp</span></span>  
  
1.  <span data-ttu-id="e38b5-135">Extrayez WCFNetMsmqAdapterPublishing.exe à **C:\WCFNetMsmqAdapterPublishing**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-135">Extract WCFNetMsmqAdapterPublishing.exe to **C:\WCFNetMsmqAdapterPublishing**.</span></span>  
  
2.  <span data-ttu-id="e38b5-136">Dans Visual Studio, ouvrez le **WCFNetMsmqAdapterPublishing.sln** fichier.</span><span class="sxs-lookup"><span data-stu-id="e38b5-136">In Visual Studio, open the **WCFNetMsmqAdapterPublishing.sln** file.</span></span>  
  
3.  <span data-ttu-id="e38b5-137">Dans l’Explorateur de solutions, développez **BizTalkApp**, puis ouvrez **OrderProcess.odx** pour passer en revue.</span><span class="sxs-lookup"><span data-stu-id="e38b5-137">In Solution Explorer, expand **BizTalkApp**, and then open **OrderProcess.odx** to review.</span></span> <span data-ttu-id="e38b5-138">L'exemple d'orchestration reçoit des messages de demande de commande et renvoie simplement des messages de réponse de commande.</span><span class="sxs-lookup"><span data-stu-id="e38b5-138">The sample orchestration receives order request messages, and simply returns the order response messages.</span></span>  
  
4.  <span data-ttu-id="e38b5-139">Étant donné que la **BizTalkApp** assembly doit être installé dans le GAC, vous devez un fichier de clé de nom fort pour terminer le processus de déploiement.</span><span class="sxs-lookup"><span data-stu-id="e38b5-139">Because the **BizTalkApp** assembly must be installed in the GAC, it will need a strong name key file to complete the deployment process.</span></span> <span data-ttu-id="e38b5-140">Cliquez sur le **BizTalkApp** de projet, puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-140">Right-click the **BizTalkApp** project, and then click **Properties**.</span></span> <span data-ttu-id="e38b5-141">Sur le **propriétés** , cliquez sur **signature**, puis sélectionnez **signer l’assembly**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-141">On the **Properties** page, click **Signing**, and select **Sign the assembly**.</span></span> <span data-ttu-id="e38b5-142">Cliquez sur la flèche vers le bas dans la **choisir un fichier de clé de nom fort** la liste déroulante, cliquez sur  **\<nouveau\>**  et entrez `keyfile.snk` dans le **le nom de fichier de clé**zone de texte.</span><span class="sxs-lookup"><span data-stu-id="e38b5-142">Click the down arrow in the **Choose a strong name key file** drop-down list, click **\<New\>** and enter `keyfile.snk` in the **key file name** textbox.</span></span> <span data-ttu-id="e38b5-143">Décochez la case **protéger mon fichier de clé avec un mot de passe**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-143">Uncheck **Protect my key file with a password**, and then click **OK**.</span></span>  
  
5.  <span data-ttu-id="e38b5-144">Cliquez sur le **déploiement** onglet, puis modifiez le **Server** propriété si vous utilisez un serveur de base de données différente pour la base de données de gestion BizTalk en plus de **LOCALHOST**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-144">Click the **Deployment** tab, and then change the **Server** property if you use a different database server for the BizTalk Management database besides **LOCALHOST**.</span></span>  <span data-ttu-id="e38b5-145">Vérifiez **Application BizTalk** a la valeur **WCFNetMsmqAdapterPublishing**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-145">Ensure **BizTalk Application** value is set to **WCFNetMsmqAdapterPublishing**.</span></span> <span data-ttu-id="e38b5-146">Vérifiez **installer dans le Global Assembly Cache** a la valeur **True**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-146">Ensure **Install to Global Assembly Cache** is set to **True**.</span></span>  
  
6.  <span data-ttu-id="e38b5-147">Dans l’Explorateur de solutions, cliquez sur le **BizTalkApp** de projet, puis cliquez sur **reconstruire**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-147">In Solution Explorer, right-click the **BizTalkApp**  project and then click **Rebuild**.</span></span>  
  
7.  <span data-ttu-id="e38b5-148">Dans l’Explorateur de solutions, cliquez sur **BizTalkApp**, puis cliquez sur **déployer**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-148">In Solution Explorer, right-click **BizTalkApp**, and then click **Deploy**.</span></span>  
  
## <a name="configure-the-application"></a><span data-ttu-id="e38b5-149">Configurez l'application</span><span class="sxs-lookup"><span data-stu-id="e38b5-149">Configure the application</span></span>  
  
1.  <span data-ttu-id="e38b5-150">Assurez-vous que le composant Microsoft Message Queuing (MSMQ) est installé sur votre ordinateur en procédant comme suit :</span><span class="sxs-lookup"><span data-stu-id="e38b5-150">Make sure that the Microsoft Message Queuing (MSMQ) component is installed on your computer as follows:</span></span>  
  
    1.  <span data-ttu-id="e38b5-151">Cliquez sur **Démarrer**, avec le bouton droit **ordinateur**, puis cliquez sur **gérer** pour ouvrir **le Gestionnaire de serveur**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-151">Click **Start**, right-click **Computer**, and then click **Manage** to open **Server Manager**.</span></span>  
  
    2.  <span data-ttu-id="e38b5-152">Développez le **fonctionnalités** nœud.</span><span class="sxs-lookup"><span data-stu-id="e38b5-152">Expand the **Features** node.</span></span>  <span data-ttu-id="e38b5-153">Si **Message Queuing** est ne pas installé, cliquez sur **fonctionnalités**, puis sélectionnez **ajouter des fonctionnalités**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-153">If **Message Queuing** is not installed, right-click **Features**, and select **Add Features**.</span></span> <span data-ttu-id="e38b5-154">Vérifiez **Message Queuing**, cliquez sur **suivant**, puis cliquez sur **installer** pour installer MSMQ sur ce système.</span><span class="sxs-lookup"><span data-stu-id="e38b5-154">Check **Message Queuing**, click **Next**, and then click **Install** to install MSMQ on that system.</span></span>  
  
2.  <span data-ttu-id="e38b5-155">Assurez-vous que le service Message Queuing est en cours d'exécution sur l'ordinateur destiné à être utilisé par l'adaptateur WCF-NetMsmq en procédant comme suit :</span><span class="sxs-lookup"><span data-stu-id="e38b5-155">Make sure that the MSMQ message queuing service is started on your computer to be used by the WCF-NetMsmq adapter as follows:</span></span>  
  
    1.  <span data-ttu-id="e38b5-156">Cliquez sur **Démarrer**, pointez sur **outils d’administration**, puis cliquez sur **Services**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-156">Click **Start**, point to **Administrative Tools**, and then click **Services**.</span></span>  
  
    2.  <span data-ttu-id="e38b5-157">Dans **Services**, assurez-vous que le **état** de la **Message Queuing** service est **démarré**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-157">In **Services**, make sure that the **Status** of the **Message Queuing** service is **Started**.</span></span> <span data-ttu-id="e38b5-158">Si le service n’est pas démarré, cliquez sur **Message Queuing**, puis cliquez sur **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-158">If the service is not started, right-click **Message Queuing**, and then click **Start**.</span></span>  
  
3.  <span data-ttu-id="e38b5-159">Créez la file d'attente cible que l'emplacement de réception utilise et à partir de laquelle l'adaptateur WCF-NetMsmq récupère les messages [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] entrants en provenance des clients.</span><span class="sxs-lookup"><span data-stu-id="e38b5-159">Create the target queue that the receive location uses from which the WCF-NetMsmq adapter picks up incoming [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from the clients.</span></span>  
  
    1.  <span data-ttu-id="e38b5-160">Cliquez sur **Démarrer**, pointez sur **outils d’administration**, puis cliquez sur **gestion de l’ordinateur**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-160">Click **Start**, point to **Administrative Tools**, and then click **Computer Management**.</span></span>  
  
    2.  <span data-ttu-id="e38b5-161">Dans **gestion de l’ordinateur**, développez **Services et Applications**, développez **Message Queuing**, avec le bouton droit **files d’attente privées**, pointez sur **Nouveau**, puis cliquez sur **file d’attente privée**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-161">In **Computer Management**, expand **Services and Applications**, expand **Message Queuing**, right-click **Private Queues**, point to **New**, and then click **Private Queue**.</span></span>  
  
    3.  <span data-ttu-id="e38b5-162">Dans le **nouvelle file d’attente privée** boîte de dialogue, tapez `WCFNetMsmqAdapterPublishing` dans les **nom de la file d’attente** zone de texte, sélectionnez le **transactionnel** case à cocher, puis cliquez sur **OK** .</span><span class="sxs-lookup"><span data-stu-id="e38b5-162">In the **New Private Queue** dialog box, type `WCFNetMsmqAdapterPublishing` in the **Queue name** text box, select the **Transactional** check box, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="e38b5-163">Créez un emplacement de réception WCF-NetMsmq pour l'exemple d'application en procédant comme suit :</span><span class="sxs-lookup"><span data-stu-id="e38b5-163">Create a WCF-NetMsmq receive location for the sample application as follows:</span></span>  
  
    1.  <span data-ttu-id="e38b5-164">Cliquez sur **Démarrer**, pointez sur **tous les programmes**, pointez sur [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], puis cliquez sur **Administration de BizTalk Server**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-164">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
    2.  <span data-ttu-id="e38b5-165">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **groupe BizTalk**, développez **Applications**, développez **WCFNetMsmqAdapterPublishing**, avec le bouton droit **Ports de réception**, pointez sur **nouveau**, puis cliquez sur **Port de réception unidirectionnel.**</span><span class="sxs-lookup"><span data-stu-id="e38b5-165">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, expand **Applications**, expand **WCFNetMsmqAdapterPublishing**, right-click **Receive Ports**, point to **New**, and then click **One-way Receive Port.**</span></span>  
  
    3.  <span data-ttu-id="e38b5-166">Dans le **propriétés du Port de réception** boîte de dialogue le **nom** zone de texte, tapez `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder`, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-166">In the **Receive Port Properties** dialog box, in the **Name** text box, type `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder`, and then click **OK**.</span></span>  
  
    4.  <span data-ttu-id="e38b5-167">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, avec le bouton droit **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder**, pointez sur **nouveau**, puis cliquez sur **un emplacement de réception**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-167">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder**, point to **New**, and then click **Receive Location**.</span></span>  
  
    5.  <span data-ttu-id="e38b5-168">Dans le **propriétés de l’emplacement de réception** boîte de dialogue le **nom** zone de texte, tapez `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq`.</span><span class="sxs-lookup"><span data-stu-id="e38b5-168">In the **Receive Location Properties** dialog box, in the **Name** text box, type `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq`.</span></span>  
  
    6.  <span data-ttu-id="e38b5-169">Dans le **propriétés de l’emplacement de réception** boîte de dialogue le **Transport** section ensuite **Type**, sélectionnez **WCF-NetMsmq** à partir de la liste déroulante, puis cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-169">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **WCF-NetMsmq** from the drop-down list, and then click **Configure**.</span></span>  
  
    7.  <span data-ttu-id="e38b5-170">Dans le **propriétés du Transport WCF-NetMsmq** boîte de dialogue le **général** sous l’onglet du **adresse (URI)** zone de texte, tapez `net.msmq://localhost/private/WCFNetMsmqAdapterPublishing`.</span><span class="sxs-lookup"><span data-stu-id="e38b5-170">In the **WCF-NetMsmq Transport Properties** dialog box, on the **General**  tab, in the **Address (URI)** text box, type `net.msmq://localhost/private/WCFNetMsmqAdapterPublishing`.</span></span>  
  
    8.  <span data-ttu-id="e38b5-171">Dans le **propriétés du Transport WCF-NetMsmq** boîte de dialogue le **liaison** onglet, vérifiez que le **transactionnel** case à cocher est activée.</span><span class="sxs-lookup"><span data-stu-id="e38b5-171">In the **WCF-NetMsmq Transport Properties** dialog box, on the **Binding**  tab, make sure that the **Transactional** check box is selected.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="e38b5-172">Étant donné que la file d'attente cible que vous avez créée est transactionnelle, vous devez activer cette case à cocher.</span><span class="sxs-lookup"><span data-stu-id="e38b5-172">Because you created the target queue as a transactional queue, you must select this check box.</span></span> <span data-ttu-id="e38b5-173">Si elle ne l'est pas, l'emplacement de réception ne sera pas activé, car il y aura une différence entre les exigences transactionnelles de cet emplacement de réception et celles de la file d'attente MSMQ sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="e38b5-173">If this box is not selected, the receive location will not be enabled because there will be a discrepancy between the transactional requirement of the receive location and that of the underlying MSMQ queue.</span></span>  
  
    9. <span data-ttu-id="e38b5-174">Dans le **propriétés du Transport WCF-NetMsmq** boîte de dialogue le **sécurité** onglet, sélectionnez **aucun** à partir de la **mode de sécurité** liste déroulante .</span><span class="sxs-lookup"><span data-stu-id="e38b5-174">In the **WCF-NetMsmq Transport Properties** dialog box, on the **Security**  tab, select **None** from the **Security mode** drop-down list.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="e38b5-175">Cette procédure pas à pas implique que MSMQ soit installé avec l'intégration [!INCLUDE[btsAD](../includes/btsad-md.md)] désactivée sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="e38b5-175">This walkthrough assumes that MSMQ is installed with [!INCLUDE[btsAD](../includes/btsad-md.md)] integration disabled on your computer.</span></span> <span data-ttu-id="e38b5-176">La valeur par défaut, **WindowsDomain**, pour le **mode d’authentification MSMQ** propriété n’est disponible lorsque [!INCLUDE[btsAD](../includes/btsad-md.md)] l’intégration est activée.</span><span class="sxs-lookup"><span data-stu-id="e38b5-176">The default value, **WindowsDomain**, for the **MSMQ authentication mode** property is available when [!INCLUDE[btsAD](../includes/btsad-md.md)] integration is enabled.</span></span>  
  
    10. <span data-ttu-id="e38b5-177">Dans le **propriétés de l’emplacement de réception** boîte de dialogue, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-177">In the **Receive Location Properties** dialog box, click **OK**.</span></span>  
  
5.  <span data-ttu-id="e38b5-178">Créez un port d'envoi FILE pour l'exemple d'application.</span><span class="sxs-lookup"><span data-stu-id="e38b5-178">Create a FILE send port for the sample application.</span></span> <span data-ttu-id="e38b5-179">Ce port permet d'acheminer la réponse du bon de commande via l'orchestration sous-jacente du service.</span><span class="sxs-lookup"><span data-stu-id="e38b5-179">This port is used to route the response from the purchase order from the service's underlying orchestration.</span></span>  
  
    1.  <span data-ttu-id="e38b5-180">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **WCFNetMsmqAdapterPublishing**, avec le bouton droit **Ports d’envoi**, pointez sur **nouveau**, puis cliquez sur **Port d’envoi unidirectionnel statique**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-180">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFNetMsmqAdapterPublishing**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
    2.  <span data-ttu-id="e38b5-181">Dans le **propriétés de Port d’envoi** boîte de dialogue le **nom** zone de texte, tapez `WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File`.</span><span class="sxs-lookup"><span data-stu-id="e38b5-181">In the **Send Port Properties** dialog box, in the **Name** text box, type `WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File`.</span></span>  
  
    3.  <span data-ttu-id="e38b5-182">Dans le **propriétés de Port d’envoi** boîte de dialogue le **Transport** section à côté **Type**, sélectionnez **fichier** dans la liste déroulante, puis Cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-182">In the **Send Port Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    4.  <span data-ttu-id="e38b5-183">Dans le **propriétés du Transport FILE** boîte de dialogue le **général** sous l’onglet du **dossier de Destination** zone de texte, tapez `C:\WCFNetMsmqAdapterPublishing\Out`, puis cliquez sur **OK** .</span><span class="sxs-lookup"><span data-stu-id="e38b5-183">In the **FILE Transport Properties** dialog box, on the **General** tab, in the **Destination folder** text box, type `C:\WCFNetMsmqAdapterPublishing\Out`, and then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="e38b5-184">Dans le **propriétés de Port d’envoi** boîte de dialogue, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-184">In the **Send Port Properties** dialog box, click **OK**.</span></span>  
  
6.  <span data-ttu-id="e38b5-185">Spécifiez le nom d'hôte et les liaisons pour l'exemple d'application comme suit :</span><span class="sxs-lookup"><span data-stu-id="e38b5-185">Specify the host name and bindings for the sample application as follows:</span></span>  
  
    1.  <span data-ttu-id="e38b5-186">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **WCFNetMsmqAdapterPublishing**, développez **Orchestrations**, avec le bouton droit de l’exemple d’orchestration, cliquez sur **depropriétés**, cliquez sur **liaisons**et la valeur **hôte** à **BizTalkServerApplication** ou un autre hôte approprié.</span><span class="sxs-lookup"><span data-stu-id="e38b5-186">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFNetMsmqAdapterPublishing**, expand **Orchestrations**, right-click the sample orchestration, click **Properties**, click **Bindings**, and set **Host** to **BizTalkServerApplication** or another appropriate host.</span></span>  
  
    2.  <span data-ttu-id="e38b5-187">Dans le **propriétés d’Orchestration** boîte de dialogue, sélectionnez **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder** à partir de la **Ports de réception** liste déroulante pour le  **PurchaseOrderRequestPort**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-187">In the **Orchestration Properties** dialog box, select **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder** from the **Receive Ports** drop-down list for the **PurchaseOrderRequestPort**.</span></span>  
  
    3.  <span data-ttu-id="e38b5-188">Dans le **propriétés d’Orchestration** boîte de dialogue, sélectionnez **WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File** à partir de la **groupes de ports d’envoi d’envoi** liste déroulante pour le **PurchaseOrderResponsePort**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-188">In the **Orchestration Properties** dialog box, select **WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File** from the **Send Ports/Send Port Groups** drop-down list for the **PurchaseOrderResponsePort**.</span></span>  
  
    4.  <span data-ttu-id="e38b5-189">Dans le **propriétés d’Orchestration** boîte de dialogue, cliquez sur **OK** pour enregistrer la configuration.</span><span class="sxs-lookup"><span data-stu-id="e38b5-189">In the **Orchestration Properties** dialog box, click **OK** to save the configuration.</span></span>  
  
## <a name="publish-the-metadata-for-the-wcf-netmsmq-receive-location"></a><span data-ttu-id="e38b5-190">Publier les métadonnées pour l’emplacement de réception WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="e38b5-190">Publish the metadata for the WCF-NetMsmq receive location</span></span>  
  
1.  <span data-ttu-id="e38b5-191">Cliquez sur **Démarrer**, pointez sur **tous les programmes**, pointez sur [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], puis cliquez sur **Assistant Publication du Service WCF BizTalk**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-191">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk WCF Service Publishing Wizard**.</span></span>  
  
2.  <span data-ttu-id="e38b5-192">Sur le **Bienvenue dans l’Assistant de publication des services WCF BizTalk** , cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-192">On the **Welcome to the BizTalk WCF Service Publishing Wizard** page, click **Next**.</span></span>  
  
3.  <span data-ttu-id="e38b5-193">Sur le **Type de Service WCF** page, sélectionnez le **point de terminaison métadonnées uniquement (MEX)** case à cocher pour publier les métadonnées pour le WCFNetMsmq l’emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="e38b5-193">On the **WCF Service Type** page, select the **Metadata only endpoint (MEX)** check box to publish the metadata for the WCFNetMsmq receive location.</span></span> <span data-ttu-id="e38b5-194">Sélectionnez **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq** à partir de la **emplacement de réception de publier les métadonnées pour** liste déroulante, puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-194">Select **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq** from the **Publish metadata for receive location** drop-down list, and then click **Next**.</span></span>  
  
4.  <span data-ttu-id="e38b5-195">Sur le **créer un Service WCF** page, sélectionnez **publier des orchestrations BizTalk en tant que service WCF**, puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-195">On the **Create WCF Service** page, select **Publish BizTalk orchestrations as WCF service**, and then click **Next**.</span></span>  
  
5.  <span data-ttu-id="e38b5-196">Sur le **BizTalk Assembly** page, dans le **fichier d’assembly BizTalk (\*.dll)** zone de texte, cliquez sur **Parcourir** pour accéder à la **C:\ WCFNetMsmqAdapterPublishing\BizTalkApp\bin\Development** dossier, double-cliquez sur l’assembly contenant l’exemple d’orchestration à publier, puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-196">On the **BizTalk Assembly** page, in the **BizTalk assembly file (\*.dll)** text box, click **Browse** to browse to the **C:\WCFNetMsmqAdapterPublishing\BizTalkApp\bin\Development** folder, double-click the assembly containing the sample orchestration to publish, and then click **Next**.</span></span>  
  
6.  <span data-ttu-id="e38b5-197">Sur le **Orchestrations et Ports** , assurez-vous que le **Port : PurchaseOrderRequestPort** nœud est sélectionné dans la page, puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-197">On the **Orchestrations and Ports** page, make sure that the **Port: PurchaseOrderRequestPort** node is selected on the page, and then click **Next**.</span></span>  
  
     <span data-ttu-id="e38b5-198">Le point de terminaison MEX de l'emplacement de réception est publié et utilisé par le client afin d'envoyer des messages vers l'emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="e38b5-198">The MEX for the receive port will be published and used by the client to submit messages to the receive location.</span></span>  
  
7.  <span data-ttu-id="e38b5-199">Sur le **propriétés du Service WCF** page, dans le **espace de noms cible du service WCF** zone de texte, tapez l’URI que vous souhaitez que cette publication [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de service pour l’utiliser, puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-199">On the **WCF Service Properties** page, in the **Target namespace of WCF service** text box, type a URI that you want this published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to use, and then click **Next**.</span></span> <span data-ttu-id="e38b5-200">Pour cette procédure pas à pas, laissez l’URI, par défaut `http://tempuri.org/`.</span><span class="sxs-lookup"><span data-stu-id="e38b5-200">For this walkthrough, leave the default URI, `http://tempuri.org/`.</span></span>  
  
8.  <span data-ttu-id="e38b5-201">Sur le **l’emplacement du Service WCF** page, procédez comme suit pour spécifier l’emplacement de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services à créer, puis cliquez sur **suivant**:</span><span class="sxs-lookup"><span data-stu-id="e38b5-201">On the **WCF Service Location** page, perform the following actions to specify the location of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services to create, and then click **Next**:</span></span>  
  
    1.  <span data-ttu-id="e38b5-202">Dans le **emplacement** zone de texte, tapez nom du répertoire Web où le [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de service s’exécute, ou cliquez sur **Parcourir** et sélectionnez un répertoire Web.</span><span class="sxs-lookup"><span data-stu-id="e38b5-202">In the **Location** text box, type the Web directory name where the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service runs or click **Browse** and select a Web directory.</span></span> <span data-ttu-id="e38b5-203">Pour cette procédure pas à pas, conservez l’emplacement par défaut (http://localhost/*\<nom de l’Assembly BizTalk\>*) dans le **emplacement** zone de texte.</span><span class="sxs-lookup"><span data-stu-id="e38b5-203">For this walkthrough, leave the default location (http://localhost/*\<BizTalk Assembly Name\>*) in the **Location** text box.</span></span>  
  
    2.  <span data-ttu-id="e38b5-204">Sélectionnez le **autorise l’accès anonyme au service WCF** option.</span><span class="sxs-lookup"><span data-stu-id="e38b5-204">Select the **Allow anonymous access to WCF service** option.</span></span> <span data-ttu-id="e38b5-205">Cette option permet d'ajouter un accès anonyme au répertoire virtuel créé.</span><span class="sxs-lookup"><span data-stu-id="e38b5-205">This option adds anonymous access to the created virtual directory.</span></span> <span data-ttu-id="e38b5-206">Vous devez sélectionner cette option afin d'autoriser une authentification anonyme pour l'application Web que cet Assistant va créer.</span><span class="sxs-lookup"><span data-stu-id="e38b5-206">This option needs to be selected to allow anonymous authentication for the Web application that this wizard will create.</span></span>  
  
9. <span data-ttu-id="e38b5-207">Sur le **récapitulatif du Service WCF** , cliquez sur **créer** pour créer le [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="e38b5-207">On the **WCF Service Summary** page, click **Create** to create the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
10. <span data-ttu-id="e38b5-208">Sur le **fin Service Assistant Publication WCF BizTalk** , cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-208">On the **Completing BizTalk WCF Service Publishing Wizard** page, click **Finish**.</span></span>  
  
## <a name="configure-the-web-application-hosting-the-published-metadata-service"></a><span data-ttu-id="e38b5-209">Configurer l’application Web hébergeant le service de métadonnées publié</span><span class="sxs-lookup"><span data-stu-id="e38b5-209">Configure the Web application hosting the published metadata service</span></span>  
  
1.  <span data-ttu-id="e38b5-210">Ouvrez une invite de commandes, accédez à la **C:\inetpub\wwwroot\Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp** dossier où le **Assistant Publication du Service WCF BizTalk** créé le [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]service.</span><span class="sxs-lookup"><span data-stu-id="e38b5-210">Open a command prompt, go to the **C:\inetpub\wwwroot\Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp** folder where the **BizTalk WCF Service Publishing Wizard** created the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="e38b5-211">Ouvrez le **Web.config** fichier à l’aide du bloc-notes.</span><span class="sxs-lookup"><span data-stu-id="e38b5-211">Open the **Web.config** file using Notepad.</span></span>  
  
2.  <span data-ttu-id="e38b5-212">Dans le bloc-notes, ajoutez la ligne suivante à l’intérieur de la  **\<system.web\>**  élément :</span><span class="sxs-lookup"><span data-stu-id="e38b5-212">In Notepad, add the following line inside the **\<system.web\>** element:</span></span>  
  
    ```  
    <trust level="Full" originUrl="" />  
    ```  
  
    > [!NOTE]
    >  <span data-ttu-id="e38b5-213">Ce paramètre est facultatif.</span><span class="sxs-lookup"><span data-stu-id="e38b5-213">This setting is optional.</span></span> <span data-ttu-id="e38b5-214">Il autorise l'accès de l'application ASP.NET hébergeant le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] publié à n'importe quelle ressource exposée à la sécurité du système d'exploitation.</span><span class="sxs-lookup"><span data-stu-id="e38b5-214">It grants the ASP.NET application hosting the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service access to any resource that is subject to operating system security.</span></span>  
  
3.  <span data-ttu-id="e38b5-215">Testez le service [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] publié à l'aide d'Internet Explorer en procédant comme suit :</span><span class="sxs-lookup"><span data-stu-id="e38b5-215">Test the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service by using Internet Explorer as follows:</span></span>  
  
    1.  <span data-ttu-id="e38b5-216">Cliquez sur **Démarrer**, pointez sur **outils d’administration**, puis cliquez sur **Gestionnaire des Services Internet (IIS)**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-216">Click **Start**, point to **Administrator Tools**, and then click **Internet Information Services (IIS) Manager**.</span></span>  
  
    2.  <span data-ttu-id="e38b5-217">Dans le Gestionnaire des services Internet, créez un pool d'applications au sein duquel ce service sera exécuté qui dispose des autorisations d'accès à la base de données BizTalk appropriées.</span><span class="sxs-lookup"><span data-stu-id="e38b5-217">In IIS Manager, create an application pool within which this service will run that has the correct BizTalk database permissions.</span></span> <span data-ttu-id="e38b5-218">Avec le bouton droit **Pools d’applications**, cliquez sur **ajouter un Pool d’applications**, entrez un nom pour le pool d’applications, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-218">Right-click **Application Pools**, click **Add Application Pool**, enter a name for the application pool, and then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="e38b5-219">Développez **Pools d’applications**, cliquez sur le pool d’applications que vous venez de créée, puis sélectionnez **paramètres avancés**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-219">Expand **Application Pools**, right-click the application pool you just created, and then select **Advanced Settings**.</span></span> <span data-ttu-id="e38b5-220">Sous **modèle de processus** section, entrez le compte a accès à la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] des bases de données sous le **identité** champ.</span><span class="sxs-lookup"><span data-stu-id="e38b5-220">Under **Process Model** section, enter the account which has access to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases under the **Identity** field.</span></span>  
  
    4.  <span data-ttu-id="e38b5-221">Développez **Sites Web**, développez **Site Web par défaut**, puis développez l’application Web créés par l’Assistant de publication des services WCF BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e38b5-221">Expand **Web Sites**, expand **Default Web Site**, and then expand the Web application that the BizTalk WCF Service Publishing Wizard created.</span></span>  
  
    5.  <span data-ttu-id="e38b5-222">Dans le Gestionnaire des services Internet, dans le volet central, cliquez sur **affichage du contenu** pour afficher les fichiers de l’application.</span><span class="sxs-lookup"><span data-stu-id="e38b5-222">In IIS Manager, in the center pane, click **Content View** to display the files for the application.</span></span>  
  
    6.  <span data-ttu-id="e38b5-223">Avec le bouton droit le **Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc** service de fichiers qui le **Assistant Publication du Service WCF BizTalk** créé, puis cliquez sur **Parcourir**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-223">Right-click the **Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc** service file that the **BizTalk WCF Service Publishing Wizard** created, and then click **Browse**.</span></span> <span data-ttu-id="e38b5-224">S’ouvre Internet Explorer pour afficher le **BizTalkServerInstance Service** page indiquant qu’une instance de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="e38b5-224">This opens Internet Explorer to display the **BizTalkServerInstance Service** page indicating that an instance of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service is running.</span></span> <span data-ttu-id="e38b5-225">La page affiche une adresse WSDL complète que vous pouvez copier et utiliser avec l’outil de métadonnées de Service (svcutil.exe) ou à partir de Visual Studio, pour récupérer le proxy code et une fichier de configuration qui peut être utilisé pour créer une application cliente pour le service.</span><span class="sxs-lookup"><span data-stu-id="e38b5-225">The page displays a full WSDL address that you can copy and use with the Service Metadata Tool (svcutil.exe), or from within Visual Studio, to retrieve proxy code and a configuration file that can be used to create a client application for the service.</span></span>  
  
    7.  <span data-ttu-id="e38b5-226">Copier dans le Presse-papiers la ligne de commande avec l’adresse WSDL complète à partir de **BizTalkServerInstance Service** page Internet Explorer s’affiche à l’étape précédente.</span><span class="sxs-lookup"><span data-stu-id="e38b5-226">Copy to the Clipboard the command line with the full WSDL address from **BizTalkServerInstance Service** page that Internet Explorer shows in the previous step.</span></span>  
  
         <span data-ttu-id="e38b5-227">**SvcUtil.exe http://localhost/Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp/Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc?wsdl**</span><span class="sxs-lookup"><span data-stu-id="e38b5-227">**svcutil.exe http://localhost/Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp/Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc?wsdl**</span></span>  
  
## <a name="build-the-client-application"></a><span data-ttu-id="e38b5-228">Générez l’application cliente</span><span class="sxs-lookup"><span data-stu-id="e38b5-228">Build the client application</span></span>  
  
1.  <span data-ttu-id="e38b5-229">Ouvrez une invite de commandes de Visual Studio en tant qu’administrateur et accédez à la **C:\WCFNetMsmqAdapterPublishing\WCFClient** dossier.</span><span class="sxs-lookup"><span data-stu-id="e38b5-229">Open a Visual Studio command prompt as Administrator and go to the **C:\WCFNetMsmqAdapterPublishing\WCFClient** folder.</span></span> <span data-ttu-id="e38b5-230">Il s'agit de l'emplacement où vous allez placer la classe de proxy et le fichier de configuration de l'application.</span><span class="sxs-lookup"><span data-stu-id="e38b5-230">This is where you will place the proxy class and application configuration file.</span></span>  
  
2.  <span data-ttu-id="e38b5-231">Collez la ligne de commande svcutil.exe entière contenant l'adresse WSDL complète que vous avez copiée dans la procédure précédente, puis appuyez sur ENTRÉE.</span><span class="sxs-lookup"><span data-stu-id="e38b5-231">Paste the entire svcutil.exe command line containing the full WSDL address that you copied in the previous procedure, and then press ENTER.</span></span> <span data-ttu-id="e38b5-232">Cela crée la classe proxy, **BizTalkServiceInstance.cs**et le fichier de configuration d’application, **output.config**. Conservez la fenêtre de l'invite de commandes ouverte pour l'utiliser dans la dernière section.</span><span class="sxs-lookup"><span data-stu-id="e38b5-232">This creates the proxy class, **BizTalkServiceInstance.cs**, and application configuration file, **output.config**. Keep the command prompt window open for use during the final section.</span></span>  
  
3.  <span data-ttu-id="e38b5-233">Dans Visual Studio, dans l’Explorateur de solutions, cliquez sur **WCFClient**, pointez sur **ajouter**, puis cliquez sur **élément existant**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-233">In Visual Studio, in Solution Explorer, right-click **WCFClient**, point to **Add**, and then click **Existing Item**.</span></span>  
  
4.  <span data-ttu-id="e38b5-234">Dans le **ajouter un élément existant** boîte de dialogue, cliquez sur Parcourir pour le **WCFClient** dossier, sélectionnez **tous les fichiers (\*.\*)**  dans les **types de fichiers** la liste déroulante, sélectionnez le **BizTalkServiceInstance.cs** et **output.config** fichiers, puis cliquez sur  **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-234">In the **Add Existing Item** dialog box, browse to the **WCFClient** folder, select **All Files (\*.\*)** in the **Files of type** drop-down list, select the **BizTalkServiceInstance.cs** and **output.config** files, and then click **Add**.</span></span>  
  
5.  <span data-ttu-id="e38b5-235">Développez **WCFClient**, avec le bouton droit **output.config**, cliquez sur **renommer**, puis tapez `App.config` comme nouveau nom.</span><span class="sxs-lookup"><span data-stu-id="e38b5-235">Expand **WCFClient**, right-click **output.config**, click **Rename**, and then type `App.config` as the new name.</span></span>  
  
6.  <span data-ttu-id="e38b5-236">Double-cliquez sur **Program.cs** pour voir comment appeler publié [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service à l’aide de la classe proxy générée par svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="e38b5-236">Double-click **Program.cs** to review how to call the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service using the proxy class generated by svcutil.exe.</span></span>  
  
7.  <span data-ttu-id="e38b5-237">Développez **références**et assurez-vous que le **WCFClient** projet a **System.ServiceModel.dll** référencé.</span><span class="sxs-lookup"><span data-stu-id="e38b5-237">Expand **References**, and then make sure that the **WCFClient** project has **System.ServiceModel.dll** referenced.</span></span>  
  
8.  <span data-ttu-id="e38b5-238">Avec le bouton droit le **WCFClient** de projet et sélectionnez **Build**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-238">Right-click the **WCFClient** project and select **Build**.</span></span> <span data-ttu-id="e38b5-239">Laissez Visual Studio ouvert et passez à la section suivante.</span><span class="sxs-lookup"><span data-stu-id="e38b5-239">Keep Visual Studio open and go to the next section.</span></span>  
  
## <a name="test-the-sample-solution-with-the-wcf-netmsmq-adapter"></a><span data-ttu-id="e38b5-240">Tester l’exemple de solution avec l’adaptateur WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="e38b5-240">Test the sample solution with the WCF-NetMsmq adapter</span></span>  
  
1.  <span data-ttu-id="e38b5-241">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration, avec le bouton droit le **WCFNetMsmqAdapterPublishing** application, puis sur **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-241">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click the **WCFNetMsmqAdapterPublishing** application, and then click **Start**.</span></span> <span data-ttu-id="e38b5-242">Dans le **Démarrer** boîte de dialogue, cliquez sur **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-242">In the **Start** dialog box, click **Start**.</span></span>  
  
2.  <span data-ttu-id="e38b5-243">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **paramètres de plateforme**, développez **Instances d’hôte**, avec le bouton droit **BizTalkServerApplication** ou un autre approprié d’instance d’hôte, puis cliquez sur **redémarrer**.</span><span class="sxs-lookup"><span data-stu-id="e38b5-243">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, expand **Host Instances**, right-click **BizTalkServerApplication** or another appropriate host instance, and then click **Restart**.</span></span> <span data-ttu-id="e38b5-244">Si cette étape n'est pas obligatoire, il est conseillé de vérifier que l'exemple fonctionne correctement à ce stade.</span><span class="sxs-lookup"><span data-stu-id="e38b5-244">While this step is not required, it is a good idea to ensure the sample works correctly up to this point.</span></span>  
  
3.  <span data-ttu-id="e38b5-245">Dans Visual Studio, sur le **déboguer** menu, cliquez sur **démarrer sans débogage** pour exécuter l’application WCFClient.</span><span class="sxs-lookup"><span data-stu-id="e38b5-245">In Visual Studio, on the **Debug** menu, click **Start Without Debugging** to run the WCFClient application.</span></span> <span data-ttu-id="e38b5-246">Cela envoie un exemple de message vers l'emplacement de réception WCF-NetMsmq.</span><span class="sxs-lookup"><span data-stu-id="e38b5-246">This sends a sample message to the WCF-NetMsmq receive location.</span></span> <span data-ttu-id="e38b5-247">Vous visualiserez le message sortant ci-dessous indiquant que le message a été envoyé.</span><span class="sxs-lookup"><span data-stu-id="e38b5-247">You will see the output message below stating the message was sent.</span></span>  
  
     <span data-ttu-id="e38b5-248">**Emplacement de réception de l’appel de l’opération d’envoi WCF-NetMsmq**</span><span class="sxs-lookup"><span data-stu-id="e38b5-248">**Calling the Submit operation on the WCF-NetMsmq receive location**</span></span>  
  
     <span data-ttu-id="e38b5-249">**Appuyez sur n’importe quelle touche pour fermer l’application cliente WCF**</span><span class="sxs-lookup"><span data-stu-id="e38b5-249">**Press any key to close WCF client application**</span></span>  
  
4.  <span data-ttu-id="e38b5-250">Appuyez sur n'importe quelle touche pour fermer l'application WCFClient.</span><span class="sxs-lookup"><span data-stu-id="e38b5-250">Press any key to close the WCFClient application.</span></span>  
  
5.  <span data-ttu-id="e38b5-251">Dans le Visual Studio invite de commandes, accédez à la **C:\WCFNetMsmqAdapterPublishing\Out** dossier, puis assurez-vous que le message de réponse que l’application WCFClient a renvoyé existe.</span><span class="sxs-lookup"><span data-stu-id="e38b5-251">In the Visual Studio Command Prompt, go to the **C:\WCFNetMsmqAdapterPublishing\Out** folder, and then make sure the response message that the WCFClient application sent back exists.</span></span>  
  
6.  <span data-ttu-id="e38b5-252">Double-cliquez sur le fichier {GUID} .xml pour l’ouvrir dans Internet Explorer et afficher la **OrderID** valeur traitée par le service.</span><span class="sxs-lookup"><span data-stu-id="e38b5-252">Double-click the {GUID}.xml file to open it in Internet Explorer and view the **OrderID** value processed by the service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e38b5-253">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="e38b5-253">See Also</span></span>  
 <span data-ttu-id="e38b5-254">[Configurer un WCF-NetMsmq emplacement de réception](../core/how-to-configure-a-wcf-netmsmq-receive-location.md) </span><span class="sxs-lookup"><span data-stu-id="e38b5-254">[Configure a WCF-NetMsmq Receive Location](../core/how-to-configure-a-wcf-netmsmq-receive-location.md) </span></span>  
 <span data-ttu-id="e38b5-255">[Procédures pas à pas l’adaptateur WCF](../core/wcf-adapter-walkthroughs.md) </span><span class="sxs-lookup"><span data-stu-id="e38b5-255">[WCF Adapter Walkthroughs](../core/wcf-adapter-walkthroughs.md) </span></span>  
 [<span data-ttu-id="e38b5-256">Publication des métadonnées de service pour les adaptateurs de réception WCF</span><span class="sxs-lookup"><span data-stu-id="e38b5-256">Publishing Service Metadata for the WCF Receive Adapters</span></span>](../core/publishing-service-metadata-for-the-wcf-receive-adapters.md)