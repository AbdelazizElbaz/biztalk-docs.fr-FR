---
title: "Activer les Points d’extensibilité WCF avec les adaptateurs WCF | Documents Microsoft"
description: "Installer des assemblys, configurer le fichier machine.config, ajouter l’extension à l’administrateur de BizTalk, créez emplacement de réception pour activer les points d’extensibilité WCF pour les adaptateurs WCF dans BizTalk Server"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 0c2af105-5272-4a6a-95d2-066312ab788e
caps.latest.revision: "14"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: be2980f3235552f263efbd4fce92c0042216b88c
ms.sourcegitcommit: dd7c54feab783ae2f8fe75873363fe9ffc77cd66
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/07/2017
---
# <a name="how-to-enable-the-wcf-extensibility-points-with-the-wcf-adapters"></a><span data-ttu-id="73fe1-103">Procédure d'activation des points d'extensibilité WCF avec les adaptateurs WCF</span><span class="sxs-lookup"><span data-stu-id="73fe1-103">How to Enable the WCF Extensibility Points with the WCF Adapters</span></span>
<span data-ttu-id="73fe1-104">Activer les trois points d’extensibilité WCF : extension de comportement, extension d’élément de liaison et extension de liaison, avec les adaptateurs WCF-Custom et WCF-CustomIsolated.</span><span class="sxs-lookup"><span data-stu-id="73fe1-104">Enable three WCF extensibility points—behavior extension, binding element extension, and binding extension—with the WCF-Custom and WCF-CustomIsolated adapters.</span></span> <span data-ttu-id="73fe1-105">Pour ce faire, installez tout d'abord les assemblys implémentant les points d'extensibilité WCF dans le Global Assembly Cache (GAC), modifiez le fichier machine.config sur vos ordinateurs, puis configurez l'adaptateur WCF-Custom ou WCF-CustomIsolated à l'aide de la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="73fe1-105">To do so, you first install the assemblies implementing the WCF extensibility points in the global assembly cache (GAC), then modify the machine.config file on your computers, and then configure the WCF-Custom or the WCF-CustomIsolated adapter by using the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
<span data-ttu-id="73fe1-106">Consultez [extension de WCF](https://docs.microsoft.com/dotnet/framework/wcf/extending/extending-wcf) pour plus d’informations sur les points d’extensibilité WCF.</span><span class="sxs-lookup"><span data-stu-id="73fe1-106">See [Extending WCF](https://docs.microsoft.com/dotnet/framework/wcf/extending/extending-wcf) for more info on WCF extensibility points.</span></span>
  
 
## <a name="prerequisites"></a><span data-ttu-id="73fe1-107">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="73fe1-107">Prerequisites</span></span>  
<span data-ttu-id="73fe1-108">Connectez-vous avec un compte qui est membre de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] groupe Administrateurs.</span><span class="sxs-lookup"><span data-stu-id="73fe1-108">Sign in with an account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span> <span data-ttu-id="73fe1-109">[Autorisations requises pour déployer et gérer une Application BizTalk](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md) fournit plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="73fe1-109">[Permissions Required for Deploying and Managing a BizTalk Application](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md) provides more info.</span></span>  
  
## <a name="install-assemblies-implementing-a-wcf-extensibility-point-in-the-gac"></a><span data-ttu-id="73fe1-110">Installer les assemblys implémentant un point d’extensibilité WCF dans le GAC</span><span class="sxs-lookup"><span data-stu-id="73fe1-110">Install assemblies implementing a WCF extensibility point in the GAC</span></span>  
  
1.  <span data-ttu-id="73fe1-111">Copiez les assemblys implémentant le point d'extensibilité WCF dans un dossier sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="73fe1-111">Copy the assemblies implementing the WCF extensibility point to a folder on your local computer.</span></span>  
  
2.  <span data-ttu-id="73fe1-112">Copiez les assemblys utilisés par le point d'extensibilité WCF (le cas échéant) dans un dossier sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="73fe1-112">Copy the assemblies that the WCF extensibility point uses, if any, to a folder on your local computer.</span></span>  
  
3.  <span data-ttu-id="73fe1-113">Démarrer le **invite de commandes Visual Studio**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-113">Start the **Visual Studio Command Prompt**.</span></span>  
  
4.  <span data-ttu-id="73fe1-114">Tapez la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="73fe1-114">Type the following command:</span></span>  
  
     <span data-ttu-id="73fe1-115">**Gacutil.exe /if «\<**  *chemin d’accès du fichier d’assembly .dll* **> »**</span><span class="sxs-lookup"><span data-stu-id="73fe1-115">**gacutil.exe /if "\<** *path to the assembly .dll file* **>"**</span></span>  
  
5.  <span data-ttu-id="73fe1-116">Cette procédure installe l'assembly dans le GAC, en remplaçant tout autre assembly existant sous le même nom.</span><span class="sxs-lookup"><span data-stu-id="73fe1-116">This installs the assembly to the GAC, overwriting any existing assembly that has the same assembly name.</span></span>  
  
6.  <span data-ttu-id="73fe1-117">À l'invite de commandes [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], répétez les étapes 4 et 5 sur tous les assemblys que vous avez copiés aux étapes 1 et 2 de cette procédure.</span><span class="sxs-lookup"><span data-stu-id="73fe1-117">At the [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] command prompt, repeat steps 4 and 5 against all the assemblies you copied in steps 1 and 2 of this procedure.</span></span>  
  
7.  <span data-ttu-id="73fe1-118">Si vous disposez de plusieurs [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ordinateurs d’exécution et d’administration, répétez les étapes 1 à 6 de cette procédure sur tous les ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="73fe1-118">If you have multiple [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] runtime computers and administration computers, repeat steps 1 through 6 of this procedure on all the computers.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="73fe1-119">Pour activer les points d'extensibilité WCF pour les adaptateurs WCF, l'instance de l'hôte BizTalk exécutant l'adaptateur doit être capable de charger, au moment de l'exécution, les assemblys où les points d'extensibilité WCF sont implémentés.</span><span class="sxs-lookup"><span data-stu-id="73fe1-119">To enable WCF extensibility points for the WCF adapters, the BizTalk Host instance running the adapter must be able to load at run time the assemblies where the WCF extensibility points are implemented.</span></span>  
  
## <a name="configure-the-machineconfig-file-for-a-wcf-binding-extension"></a><span data-ttu-id="73fe1-120">Configurer le fichier machine.config pour une extension de liaison WCF</span><span class="sxs-lookup"><span data-stu-id="73fe1-120">Configure the machine.config file for a WCF binding extension</span></span>  
  
1.  <span data-ttu-id="73fe1-121">À une invite de commandes, accédez au répertoire % FrameworkDir%\v4. X.XXXXX\CONFIG, puis ouvrez le **machine.config** fichier à l’aide du bloc-notes.</span><span class="sxs-lookup"><span data-stu-id="73fe1-121">At a command prompt, go to the %FrameworkDir%\v4.X.XXXXX\CONFIG folder, and then open the **machine.config** file by using Notepad.</span></span>  
  
2.  <span data-ttu-id="73fe1-122">Dans le bloc-notes, si le fichier machine.config n’a pas la  **\<system.serverModel >\\< extensions\>**  éléments, ajoutez-les dans le  **\< configuration >** élément du fichier machine.config de fichier, puis ajoutez le  **\<bindingExtensions >** élément pour une extension de liaison WCF à l’intérieur de la  **\< system.serverModel >\\< extensions\>**  éléments.</span><span class="sxs-lookup"><span data-stu-id="73fe1-122">In Notepad, if the machine.config file does not have the **\<system.serverModel>\\<extensions\>** elements, add those elements inside the **\<configuration>** element of the machine.config file, and then add the **\<bindingExtensions>** element for a WCF binding extension inside the **\<system.serverModel>\\<extensions\>** elements.</span></span> <span data-ttu-id="73fe1-123">Par exemple, pour activer une extension de liaison personnalisée, netHttpBinding, ajoutez le code suivant à l’intérieur de la  **\<configuration >** élément du fichier machine.config :</span><span class="sxs-lookup"><span data-stu-id="73fe1-123">For example, to enable a custom binding extension, netHttpBinding, add the following code inside the **\<configuration>** element of the machine.config file:</span></span>  
  
    ```  
    <system.serviceModel>  
      <extensions>  
        <bindingExtensions>  
          <add name="netHttpBinding" type="Microsoft.Samples.Channels.NetHttpBindingCollectionElement, NetHttpBinding, Version=3.0.0.0, Culture=neutral, PublicKeyToken=5b637b51c4aaa2a8" />  
        </bindingExtensions>        
      </extensions>  
    </system.serviceModel>  
    ```  
  
    > [!NOTE]
    >  - <span data-ttu-id="73fe1-124">Vous pouvez obtenir les informations pour les assemblys à inscrire à l’aide de la commande, **gacutil /lr** *< assembly_name>*.</span><span class="sxs-lookup"><span data-stu-id="73fe1-124">You can find the information for the assemblies to register by using the command, **gacutil /lr** *<assembly_name>*.</span></span>  
    >  - <span data-ttu-id="73fe1-125">Consultez [bindingExtensions](https://docs.microsoft.com/dotnet/framework/configure-apps/file-schema/wcf/bindingextensions) sur cet élément.</span><span class="sxs-lookup"><span data-stu-id="73fe1-125">See [bindingExtensions](https://docs.microsoft.com/dotnet/framework/configure-apps/file-schema/wcf/bindingextensions) on this element.</span></span>
  
3.  <span data-ttu-id="73fe1-126">Dans le Bloc-notes, enregistrez le fichier machine.config.</span><span class="sxs-lookup"><span data-stu-id="73fe1-126">In Notepad, save the machine.config file.</span></span>  
  
4.  <span data-ttu-id="73fe1-127">Si vous avez plusieurs ordinateurs d'exécution et d'administration [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], répétez les étapes 1 à 3 de cette procédure sur tous les ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="73fe1-127">If you have multiple [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] runtime computers and administration computers, repeat steps 1 through 3 of this procedure on all the computers.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="73fe1-128">Vous devez répéter ces étapes sur tous les ordinateurs pour l'infrastructure WCF afin de traiter le point d'extensibilité WCF pour l'instance de l'hôte BizTalk et la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="73fe1-128">You have to repeat these steps on all the computers for the WCF infrastructure to process the WCF extensibility point for the BizTalk Host instance and the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
## <a name="configure-a-wcf-binding-extension-by-using-the-biztalk-administration-console"></a><span data-ttu-id="73fe1-129">Configurer une extension de liaison WCF à l’aide de la console Administration de BizTalk</span><span class="sxs-lookup"><span data-stu-id="73fe1-129">Configure a WCF binding extension by using the BizTalk Administration console</span></span>  
  
1.  <span data-ttu-id="73fe1-130">Ouvrez **Administration de BizTalk Server.**</span><span class="sxs-lookup"><span data-stu-id="73fe1-130">Open **BizTalk Server Administration**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="73fe1-131">Si le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration est déjà ouverte, redémarrez le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="73fe1-131">If the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console is already opened, restart the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
2.  <span data-ttu-id="73fe1-132">Si vous utilisez l'adaptateur WCF-Custom, dans la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], développez Paramètres de plateforme, puis Instances de l'hôte, puis redémarrez l'instance de l'hôte BizTalk exécutant l'adaptateur.</span><span class="sxs-lookup"><span data-stu-id="73fe1-132">If you use the WCF-Custom adapter, in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand Platform Settings, expand Host Instances, and then restart the BizTalk Host instance running the adapter.</span></span>  
  
3.  <span data-ttu-id="73fe1-133">Si vous utilisez l'adaptateur WCF-CustomIsolated, dans la console de gestion IIS, redémarrez le pool d'applications associé à l'emplacement de réception WCF.</span><span class="sxs-lookup"><span data-stu-id="73fe1-133">If you use the WCF-CustomIsolated adapter, in the IIS Management console, restart the application pool associated with the WCF receive location.</span></span>  
  
4.  <span data-ttu-id="73fe1-134">Si vous souhaitez configurer un emplacement de réception pour utiliser un point d’extensibilité WCF, dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **groupe BizTalk**, développez  *\<application BizTalk >* , développez **emplacements de réception**, puis, dans le volet droit, double-cliquez sur  *\<emplacement de réception>*.</span><span class="sxs-lookup"><span data-stu-id="73fe1-134">If you want to configure a receive location to use a WCF extensibility point, in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, expand *\<BizTalk application>*, expand **Receive Locations**, and then in the right pane, double-click *\<Receive location>*.</span></span>  
  
    -   <span data-ttu-id="73fe1-135">Dans le **propriétés de l’emplacement de réception** boîte de dialogue le **Type** la liste déroulante, sélectionnez **WCF-Custom** ou **WCF-CustomIsolated** selon l’adaptateur WCF que vous souhaitez utiliser, puis cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-135">In the **Receive Location Properties** dialog box, in the **Type** drop-down list, select **WCF-Custom** or **WCF-CustomIsolated** depending on the WCF adapter that you want to use, and then click **Configure**.</span></span>  
  
5.  <span data-ttu-id="73fe1-136">Si vous souhaitez configurer un port d’envoi pour utiliser un point d’extensibilité WCF, dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **groupe BizTalk**, développez  *\<application BizTalk >*, développez **Ports d’envoi**, puis, dans le volet droit, double-cliquez sur  *\<port d’envoi>*.</span><span class="sxs-lookup"><span data-stu-id="73fe1-136">If you want to configure a send port to use a WCF extensibility point, in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, expand *\<BizTalk application>*, expand **Send Ports**, and then in the right pane, double-click *\<Send port>*.</span></span>  
  
    -   <span data-ttu-id="73fe1-137">Dans le **propriétés de Port d’envoi** boîte de dialogue le **Type** la liste déroulante, sélectionnez **WCF-Custom**, puis cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-137">In the **Send Port Properties** dialog box, in the **Type** drop-down list, select **WCF-Custom**, and then click **Configure**.</span></span>  
  
6.  <span data-ttu-id="73fe1-138">Dans la boîte de dialogue Propriétés du transport, sur le **liaison** onglet, sélectionnez l’extension de liaison, puis configurez le reste des paramètres pour le transport.</span><span class="sxs-lookup"><span data-stu-id="73fe1-138">In the transport properties dialog box, on the **Binding** tab, select the binding extension, and then configure the rest of the settings for the transport.</span></span>  
  
7.  <span data-ttu-id="73fe1-139">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, fermez toutes les boîtes de dialogue ouvertes en cliquant sur le **OK** boutons et assurez-vous qu’aucun messages d’erreur et le journal des événements erroné s’affichent.</span><span class="sxs-lookup"><span data-stu-id="73fe1-139">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, close all open dialog boxes by clicking the **OK** buttons, and then make sure that no error messages and erroneous event logs appear.</span></span>  
  
## <a name="configure-the-machineconfig-file-for-a-wcf-binding-element-extension"></a><span data-ttu-id="73fe1-140">Configurer le fichier machine.config pour une extension d’élément de liaison WCF</span><span class="sxs-lookup"><span data-stu-id="73fe1-140">Configure the machine.config file for a WCF binding element extension</span></span>  
  
1.  <span data-ttu-id="73fe1-141">À une invite de commandes, accédez au répertoire % FrameworkDir%\v4. X.XXXXX\CONFIG, puis ouvrez le **machine.config** fichier à l’aide du bloc-notes.</span><span class="sxs-lookup"><span data-stu-id="73fe1-141">At a command prompt, go to the %FrameworkDir%\v4.X.XXXXX\CONFIG folder, and then open the **machine.config** file by using Notepad.</span></span>  
  
2.  <span data-ttu-id="73fe1-142">Dans le bloc-notes, si le fichier machine.config n’a pas la  **\<system.serverModel >\\< extensions\>**  éléments, ajoutez-les dans le  **\< configuration >** élément du fichier machine.config de fichier, puis ajoutez le  **\<bindingElementExtensions >** élément pour une extension d’élément de liaison WCF à l’intérieur de la  **\<system.serverModel >\\< extensions\>**  éléments.</span><span class="sxs-lookup"><span data-stu-id="73fe1-142">In Notepad, if the machine.config file does not have the **\<system.serverModel>\\<extensions\>** elements, add those elements inside the **\<configuration>** element of the machine.config file, and then add the **\<bindingElementExtensions>** element for a WCF binding element extension inside the **\<system.serverModel>\\<extensions\>** elements.</span></span> <span data-ttu-id="73fe1-143">Par exemple, pour activer une extension d’élément de liaison personnalisée, droppingInterceptor, ajoutez le code suivant à l’intérieur de la  **\<configuration >** élément du fichier machine.config :</span><span class="sxs-lookup"><span data-stu-id="73fe1-143">For example, to enable a custom binding element extension, droppingInterceptor, add the following code inside the **\<configuration>** element of the machine.config file:</span></span>  
  
    ```  
    <system.serviceModel>  
      <extensions>  
        <bindingElementExtensions>  
          <add name="droppingInterceptor" type="Microsoft.ServiceModel.Samples.DroppingServerElement, MessageInterceptor, Version=0.0.0.0, Culture=neutral, PublicKeyToken=098514eef14aa34a"/>  
        </bindingElementExtensions>  
      </extensions>  
    </system.serviceModel>  
    ```  
  
    > [!NOTE]
    > - <span data-ttu-id="73fe1-144">Vous pouvez obtenir les informations pour les assemblys à inscrire à l’aide de la commande, **gacutil /lr** *< assembly_name>*.</span><span class="sxs-lookup"><span data-stu-id="73fe1-144">You can find the information for the assemblies to register by using the command, **gacutil /lr** *<assembly_name>*.</span></span>  
    > - <span data-ttu-id="73fe1-145">Consultez [bindingElementExtensions](https://docs.microsoft.com/dotnet/framework/configure-apps/file-schema/wcf/bindingelementextensions) sur cet élément.</span><span class="sxs-lookup"><span data-stu-id="73fe1-145">See [bindingElementExtensions](https://docs.microsoft.com/dotnet/framework/configure-apps/file-schema/wcf/bindingelementextensions) on this element.</span></span>
  
3.  <span data-ttu-id="73fe1-146">Dans le Bloc-notes, enregistrez le fichier machine.config.</span><span class="sxs-lookup"><span data-stu-id="73fe1-146">In Notepad, save the machine.config file.</span></span>  
  
4.  <span data-ttu-id="73fe1-147">Si vous avez plusieurs ordinateurs d'exécution et d'administration [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], répétez les étapes 1 à 3 de cette procédure sur tous les ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="73fe1-147">If you have multiple [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] runtime computers and administration computers, repeat steps 1 through 3 of this procedure on all the computers.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="73fe1-148">Vous devez répéter ces étapes sur tous les ordinateurs pour l'infrastructure WCF afin de traiter le point d'extensibilité WCF pour l'instance de l'hôte BizTalk et la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="73fe1-148">You have to repeat these steps on all the computers for the WCF infrastructure to process the WCF extensibility point for the BizTalk Host instance and the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
## <a name="configure-a-wcf-binding-element-extension-by-using-the-biztalk-administration-console"></a><span data-ttu-id="73fe1-149">Configurer une extension d’élément de liaison WCF à l’aide de la console Administration de BizTalk</span><span class="sxs-lookup"><span data-stu-id="73fe1-149">Configure a WCF binding element extension by using the BizTalk Administration console</span></span>  
  
1.  <span data-ttu-id="73fe1-150">Ouvrez **Administration de BizTalk Server.**</span><span class="sxs-lookup"><span data-stu-id="73fe1-150">Open **BizTalk Server Administration**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="73fe1-151">Si le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration est déjà ouverte, redémarrez le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="73fe1-151">If the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console is already opened, restart the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
2.  <span data-ttu-id="73fe1-152">Si vous utilisez l'adaptateur WCF-Custom, dans la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], développez Paramètres de plateforme, puis Instances de l'hôte, puis redémarrez l'instance de l'hôte BizTalk exécutant l'adaptateur.</span><span class="sxs-lookup"><span data-stu-id="73fe1-152">If you use the WCF-Custom adapter, in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand Platform Settings, expand Host Instances, and then restart the BizTalk Host instance running the adapter.</span></span>  
  
3.  <span data-ttu-id="73fe1-153">Si vous utilisez l'adaptateur WCF-CustomIsolated, dans la console de gestion IIS, redémarrez le pool d'applications associé à l'emplacement de réception WCF.</span><span class="sxs-lookup"><span data-stu-id="73fe1-153">If you use the WCF-CustomIsolated adapter, in the IIS Management console, restart the application pool associated with the WCF receive location.</span></span>  
  
4.  <span data-ttu-id="73fe1-154">Si vous souhaitez configurer un emplacement de réception pour utiliser un point d’extensibilité WCF, dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **groupe BizTalk**, développez  *\<application BizTalk >* , développez **emplacements de réception**, puis, dans le volet droit, double-cliquez sur  *\<emplacement de réception>*.</span><span class="sxs-lookup"><span data-stu-id="73fe1-154">If you want to configure a receive location to use a WCF extensibility point, in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, expand *\<BizTalk application>*, expand **Receive Locations**, and then in the right pane, double-click *\<Receive location>*.</span></span>  
  
    -   <span data-ttu-id="73fe1-155">Dans le **propriétés de l’emplacement de réception** boîte de dialogue le **Type** la liste déroulante, sélectionnez **WCF-Custom** ou **WCF-CustomIsolated** selon l’adaptateur WCF que vous souhaitez utiliser, puis cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-155">In the **Receive Location Properties** dialog box, in the **Type** drop-down list, select **WCF-Custom** or **WCF-CustomIsolated** depending on the WCF adapter that you want to use, and then click **Configure**.</span></span>  
  
5.  <span data-ttu-id="73fe1-156">Si vous souhaitez configurer un port d’envoi pour utiliser un point d’extensibilité WCF, dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, développez **groupe BizTalk**, développez  *\<application BizTalk >*, développez **Ports d’envoi**, puis, dans le volet droit, double-cliquez sur  *\<port d’envoi>*.</span><span class="sxs-lookup"><span data-stu-id="73fe1-156">If you want to configure a send port to use a WCF extensibility point, in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, expand *\<BizTalk application>*, expand **Send Ports**, and then in the right pane, double-click *\<Send port>*.</span></span>  
  
    -   <span data-ttu-id="73fe1-157">Dans le **propriétés de Port d’envoi** boîte de dialogue le **Type** la liste déroulante, sélectionnez **WCF-Custom**, puis cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-157">In the **Send Port Properties** dialog box, in the **Type** drop-down list, select **WCF-Custom**, and then click **Configure**.</span></span>  
  
6.  <span data-ttu-id="73fe1-158">Dans la boîte de dialogue Propriétés du transport, sur le **liaison** sous l’onglet du **Type de liaison** la liste déroulante, sélectionnez **customBinding**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-158">In the transport properties dialog box, on the **Binding** tab, in the **Binding Type** drop-down list, select **customBinding**.</span></span>  
  
7.  <span data-ttu-id="73fe1-159">Dans la boîte de dialogue Propriétés du transport, sur le **liaison** onglet, avec le bouton droit de la zone cliente de la **liaison** liste, puis cliquez sur **ajouter une extension**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-159">In the transport properties dialog box, on the **Binding** tab, right-click the client area of the **Binding** list, and then click **Add extension**.</span></span>  
  
8.  <span data-ttu-id="73fe1-160">Dans le **Extension d’élément de liaison sélectionnez** boîte de dialogue, sélectionnez une extension d’élément de liaison, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-160">In the **Select Binding Element Extension** dialog box, select a binding element extension, and then click **OK**.</span></span>  
  
9. <span data-ttu-id="73fe1-161">Dans la boîte de dialogue Propriétés du transport, sur le **liaison** onglet, ajustez l’ordre des éléments de liaison ajouté dans le **liaison** liste selon le type de l’extension d’élément de liaison ajouté à la étape précédente comme suit :</span><span class="sxs-lookup"><span data-stu-id="73fe1-161">In the transport properties dialog box, on the **Binding** tab, adjust the order of the binding elements added in the **Binding** list depending on the type of the binding element extension you added in the previous step as follows:</span></span>  
  
    -   <span data-ttu-id="73fe1-162">Dans le **liaison** liste, cliquez sur une extension d’élément de liaison, puis cliquez sur **monter l’extension** ou **descendre l’extension**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-162">In the **Binding** list, right-click a binding element extension, and then click **Move extension up** or **Move extension down**.</span></span> <span data-ttu-id="73fe1-163">L’extension d’élément de liaison la plus faible dans le **liaison** liste correspond au composant du bas de la pile de canaux.</span><span class="sxs-lookup"><span data-stu-id="73fe1-163">The lowest binding element extension in the **Binding** list corresponds to the bottom component of the channel stack.</span></span> <span data-ttu-id="73fe1-164">L’élément de liaison la plus élevée dans la **liaison** liste correspond à un composant en haut de la pile de communication.</span><span class="sxs-lookup"><span data-stu-id="73fe1-164">The highest binding element in the **Binding** list corresponds to the top component of the communication stack.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="73fe1-165">Consultez [des liaisons personnalisées](https://docs.microsoft.com/dotnet/framework/wcf/extending/custom-bindings) pour plus d’informations sur l’ordre spécifique des éléments de liaison pour la liaison personnalisée.</span><span class="sxs-lookup"><span data-stu-id="73fe1-165">See [Custom Bindings](https://docs.microsoft.com/dotnet/framework/wcf/extending/custom-bindings) for details about the specific order of the binding elements for the custom binding.</span></span>
  
10. <span data-ttu-id="73fe1-166">Dans la boîte de dialogue Propriétés du transport, configurez le reste des paramètres de transport.</span><span class="sxs-lookup"><span data-stu-id="73fe1-166">In the transport properties dialog box, configure the rest of the settings for the transport.</span></span>  
  
11. <span data-ttu-id="73fe1-167">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, fermez toutes les boîtes de dialogue ouvertes en cliquant sur le **OK** boutons et assurez-vous qu’aucun messages d’erreur et le journal des événements erroné s’affichent.</span><span class="sxs-lookup"><span data-stu-id="73fe1-167">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, close all open dialog boxes by clicking the **OK** buttons, and then make sure that no error messages and erroneous event logs appear.</span></span>  
  
## <a name="configure-the-machineconfig-file-for-a-wcf-behavior-extension"></a><span data-ttu-id="73fe1-168">Configurer le fichier machine.config pour une extension de comportement WCF</span><span class="sxs-lookup"><span data-stu-id="73fe1-168">Configure the machine.config file for a WCF behavior extension</span></span>  
  
1.  <span data-ttu-id="73fe1-169">À une invite de commandes, accédez au répertoire % FrameworkDir%\v4. X.XXXXX\CONFIG, puis ouvrez le **machine.config** fichier à l’aide du bloc-notes.</span><span class="sxs-lookup"><span data-stu-id="73fe1-169">At a command prompt, go to the %FrameworkDir%\v4.X.XXXXX\CONFIG folder, and then open the **machine.config** file by using Notepad.</span></span>  
  
2.  <span data-ttu-id="73fe1-170">Dans le bloc-notes, si le fichier machine.config n’a pas la  **\<system.serverModel >\\< extensions\>**  éléments, ajoutez-les dans le  **\< configuration >** élément du fichier machine.config de fichier, puis ajoutez le  **\<behaviorExtensions >** élément pour une extension de comportement WCF à l’intérieur de la  **\< system.serverModel >\\< extensions\>**  éléments.</span><span class="sxs-lookup"><span data-stu-id="73fe1-170">In Notepad, if the machine.config file does not have the **\<system.serverModel>\\<extensions\>** elements, add those elements inside the **\<configuration>** element of the machine.config file, and then add the **\<behaviorExtensions>** element for a WCF behavior extension inside the **\<system.serverModel>\\<extensions\>** elements.</span></span> <span data-ttu-id="73fe1-171">Par exemple, pour activer une extension de comportement personnalisée, schemaValidator, ajoutez le code suivant à l’intérieur de la  **\<configuration >** élément du fichier machine.config :</span><span class="sxs-lookup"><span data-stu-id="73fe1-171">For example, To enable a custom behavior extension, schemaValidator, add the following code inside the **\<configuration>** element of the machine.config file:</span></span>  
  
    ```  
    <system.serviceModel>  
      <extensions>  
        <behaviorExtensions>  
          <add name="schemaValidator" type="Microsoft.ServiceModel.Samples.SchemaValidationBehaviorExtensionElement, MessageInspectors, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ad307e213604f592"/>  
        </behaviorExtensions>  
      </extensions>  
    </system.serviceModel>  
    ```  
  
    > [!NOTE]
    >  - <span data-ttu-id="73fe1-172">Vous pouvez obtenir les informations pour les assemblys à inscrire à l’aide de la commande, **gacutil /lr** *< assembly_name>*.</span><span class="sxs-lookup"><span data-stu-id="73fe1-172">You can find the information for the assemblies to register by using the command, **gacutil /lr** *<assembly_name>*.</span></span>  
    >  - <span data-ttu-id="73fe1-173">Consultez [behaviorExtensions](https://docs.microsoft.com/dotnet/framework/configure-apps/file-schema/wcf/behaviorextensions) sur cet élément.</span><span class="sxs-lookup"><span data-stu-id="73fe1-173">See [behaviorExtensions](https://docs.microsoft.com/dotnet/framework/configure-apps/file-schema/wcf/behaviorextensions) on this element.</span></span>
  
3.  <span data-ttu-id="73fe1-174">Dans le Bloc-notes, enregistrez le fichier machine.config.</span><span class="sxs-lookup"><span data-stu-id="73fe1-174">In Notepad, save the machine.config file.</span></span>  
  
4.  <span data-ttu-id="73fe1-175">Si vous avez plusieurs ordinateurs d'exécution et d'administration [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], répétez les étapes 1 à 3 de cette procédure sur tous les ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="73fe1-175">If you have multiple [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] runtime computers and administration computers, repeat steps 1 through 3 of this procedure on all the computers.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="73fe1-176">Vous devez répéter ces étapes sur tous les ordinateurs pour l'infrastructure WCF afin de traiter le point d'extensibilité WCF pour l'instance de l'hôte BizTalk et la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="73fe1-176">You have to repeat these steps on all the computers for the WCF infrastructure to process the WCF extensibility point for the BizTalk Host instance and the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
## <a name="configure-a-wcf-behavior-extension-by-using-the-biztalk-administration-console"></a><span data-ttu-id="73fe1-177">Configurer une extension de comportement WCF à l’aide de la console Administration de BizTalk</span><span class="sxs-lookup"><span data-stu-id="73fe1-177">Configure a WCF behavior extension by using the BizTalk Administration console</span></span>  
  
1.  <span data-ttu-id="73fe1-178">Ouvrez **Administration de BizTalk Server.**</span><span class="sxs-lookup"><span data-stu-id="73fe1-178">Open **BizTalk Server Administration**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="73fe1-179">Si le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration est déjà ouverte, redémarrez le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="73fe1-179">If the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console is already opened, restart the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
2.  <span data-ttu-id="73fe1-180">Si vous utilisez l'adaptateur WCF-Custom, dans la console Administration de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], développez Paramètres de plateforme, puis Instances de l'hôte, puis redémarrez l'instance de l'hôte BizTalk exécutant l'adaptateur.</span><span class="sxs-lookup"><span data-stu-id="73fe1-180">If you use the WCF-Custom adapter, in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand Platform Settings, expand Host Instances, and then restart the BizTalk Host instance running the adapter.</span></span>  
  
3.  <span data-ttu-id="73fe1-181">Si vous utilisez l'adaptateur WCF-CustomIsolated, dans la console de gestion IIS, redémarrez le pool d'applications associé à l'emplacement de réception WCF.</span><span class="sxs-lookup"><span data-stu-id="73fe1-181">If you use the WCF-CustomIsolated adapter, in the IIS Management console, restart the application pool associated with the WCF receive location.</span></span>  
  
4.  <span data-ttu-id="73fe1-182">Si vous souhaitez configurer un emplacement de réception à utiliser un point d’extensibilité WCF, dans la console Administration de BizTalk, développez **groupe BizTalk**, développez  *\<application BizTalk >*, développez **Emplacements de réception**, puis, dans le volet droit, double-cliquez sur  *\<emplacement de réception>*.</span><span class="sxs-lookup"><span data-stu-id="73fe1-182">If you want to configure a receive location to use a WCF extensibility point, in the BizTalk Administration console, expand **BizTalk Group**, expand *\<BizTalk application>*, expand **Receive Locations**, and then in the right pane, double-click *\<Receive location>*.</span></span>  
  
    -   <span data-ttu-id="73fe1-183">Dans le **propriétés de l’emplacement de réception** boîte de dialogue le **Type** la liste déroulante, sélectionnez **WCF-Custom** ou **WCF-CustomIsolated** selon l’adaptateur WCF que vous souhaitez utiliser, puis cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-183">In the **Receive Location Properties** dialog box, in the **Type** drop-down list, select **WCF-Custom** or **WCF-CustomIsolated** depending on the WCF adapter that you want to use, and then click **Configure**.</span></span>  
  
5.  <span data-ttu-id="73fe1-184">Si vous souhaitez configurer un port d’envoi à utiliser un point d’extensibilité WCF, dans la console Administration de BizTalk, développez **groupe BizTalk**, développez  *\<application BizTalk >*, développez  **Ports d’envoi**, puis, dans le volet droit, double-cliquez sur  *\<port d’envoi>*.</span><span class="sxs-lookup"><span data-stu-id="73fe1-184">If you want to configure a send port to use a WCF extensibility point, in the BizTalk Administration console, expand **BizTalk Group**, expand *\<BizTalk application>*, expand **Send Ports**, and then in the right pane, double-click *\<Send port>*.</span></span>  
  
    -   <span data-ttu-id="73fe1-185">Dans le **propriétés de Port d’envoi** boîte de dialogue le **Type** la liste déroulante, sélectionnez **WCF-Custom**, puis cliquez sur **configurer**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-185">In the **Send Port Properties** dialog box, in the **Type** drop-down list, select **WCF-Custom**, and then click **Configure**.</span></span>  
  
6.  <span data-ttu-id="73fe1-186">Dans la boîte de dialogue Propriétés du transport, sur le **comportement** droit **ServiceBehavior** ou **EndpointBehavior** selon le type de l’extension de comportement puis, dans le **sélectionner une Extension de comportement** boîte de dialogue, sélectionnez l’extension de comportement, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="73fe1-186">In the transport properties dialog box, on the **Behavior** tab, right-click **ServiceBehavior** or **EndpointBehavior** depending on the type of the behavior extension, and then, in the **Select Behavior Extension** dialog box, select the behavior extension, and then click **OK**.</span></span>  
  
7.  <span data-ttu-id="73fe1-187">Dans la boîte de dialogue Propriétés du transport, configurez le reste des paramètres de transport.</span><span class="sxs-lookup"><span data-stu-id="73fe1-187">In the transport properties dialog box, configure the rest of the settings for the transport.</span></span>  
  
8.  <span data-ttu-id="73fe1-188">Dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration de la console, fermez toutes les boîtes de dialogue ouvertes en cliquant sur le **OK** boutons et assurez-vous qu’aucun messages d’erreur et le journal des événements erroné s’affichent.</span><span class="sxs-lookup"><span data-stu-id="73fe1-188">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, close all open dialog boxes by clicking the **OK** buttons, and then make sure that no error messages and erroneous event logs appear.</span></span>  
  
## <a name="configure-a-wcf-custom-receive-location-with-an-ssl-certificate"></a><span data-ttu-id="73fe1-189">Configurer un WCF-Custom emplacement de réception avec un certificat SSL</span><span class="sxs-lookup"><span data-stu-id="73fe1-189">Configure a WCF-Custom receive location with an SSL certificate</span></span>  
  
-   <span data-ttu-id="73fe1-190">Si un emplacement de réception WCF-Custom se produit à utiliser le pilote du noyau HTTP (HTTP.sys) tels que les **httpsTransport** élément de liaison pour les communications Secure Sockets Layer (SSL), l’emplacement de réception doit disposer d’un certificat inscrit pour chaque socket (combinaison adresse IP/port).</span><span class="sxs-lookup"><span data-stu-id="73fe1-190">If a WCF-Custom receive location happens to use the HTTP kernel-mode driver (HTTP.sys) such as the **httpsTransport** binding element, for Secure Sockets Layer (SSL) communications, the receive location must have a certificate registered for each socket (IP address/port combination).</span></span> <span data-ttu-id="73fe1-191">Utilisez l'outil HttpCfg.exe pour lier un certificat SSL à un port sur l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="73fe1-191">Use the HttpCfg.exe tool to bind an SSL certificate to a port on the computer.</span></span> <span data-ttu-id="73fe1-192">Pour plus d’informations, consultez [comment faire : configurer un Port avec un certificat SSL](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate).</span><span class="sxs-lookup"><span data-stu-id="73fe1-192">For more information, see [How To: Configure a Port with An SSL Certificate](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate).</span></span>