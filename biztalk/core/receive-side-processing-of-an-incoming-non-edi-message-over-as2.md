---
title: "Traitement d’un Message Non-EDI entrant via AS2 côté réception | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: fee10cba-8b1a-4d2c-b9d9-efbb74c3f461
caps.latest.revision: "31"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7a313c7351f40ba3dbdaf33d15008598dac2ad73
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="receive-side-processing-of-an-incoming-non-edi-message-over-as2"></a><span data-ttu-id="8333e-102">Traitement côté réception d'un message entrant non-EDI via AS2</span><span class="sxs-lookup"><span data-stu-id="8333e-102">Receive-Side Processing of an Incoming Non-EDI Message over AS2</span></span>
<span data-ttu-id="8333e-103">Les pipelines AS2 livrés avec [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] peuvent être utilisés pour traiter un message EDI ou non-EDI via le transport AS2.</span><span class="sxs-lookup"><span data-stu-id="8333e-103">The AS2 pipelines shipped with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] can be used to process an EDI message or a non-EDI message over AS2 transport.</span></span> <span data-ttu-id="8333e-104">Différents pipelines sont utilisés pour les deux différents types de charges.</span><span class="sxs-lookup"><span data-stu-id="8333e-104">Different pipelines are used for the two different types of payloads.</span></span> <span data-ttu-id="8333e-105">Utilisez le pipeline AS2EdiReceive pour traiter un message EDI entrant via AS2 et le pipeline AS2Send pour retourner le MDN associé (s'il est activé).</span><span class="sxs-lookup"><span data-stu-id="8333e-105">You use the AS2EdiReceive pipeline to process an incoming EDI message over AS2, and the AS2Send pipeline to return the associated MDN (if enabled).</span></span> <span data-ttu-id="8333e-106">Utilisez le pipeline AS2Receive pour traiter un message non-EDI entrant via AS2, et le pipeline AS2Send pour retourner le MDN associé (s'il est activé).</span><span class="sxs-lookup"><span data-stu-id="8333e-106">You use the AS2Receive pipeline to process an incoming non-EDI message over AS2, and the AS2Send pipeline to return the associated MDN (if enabled).</span></span> <span data-ttu-id="8333e-107">Le message non-EDI peut correspondre à toute charge binaire.</span><span class="sxs-lookup"><span data-stu-id="8333e-107">The non-EDI message can be any binary payload.</span></span>  
  
 <span data-ttu-id="8333e-108">Le pipeline de réception AS2Receive décode le message AS2, puis procède au désassemblage sur le message AS2.</span><span class="sxs-lookup"><span data-stu-id="8333e-108">The AS2Receive receive pipeline decodes the AS2 message, and then performs disassembly on the AS2 message.</span></span> <span data-ttu-id="8333e-109">Un pipeline d'envoi AS2Send code le MDN.</span><span class="sxs-lookup"><span data-stu-id="8333e-109">An AS2Send send pipeline encodes the MDN.</span></span> <span data-ttu-id="8333e-110">Vous pouvez inclure les pipelines AS2Receive et AS2Send dans un port d'envoi HTTP avec sollicitation-réponse bidirectionnel (si le MDN est synchrone), ou dans un port d'envoi HTTP unidirectionnel et un port de réception HTTP unidirectionnel (si le MDN est asynchrone).</span><span class="sxs-lookup"><span data-stu-id="8333e-110">You can include the AS2Receive and AS2Send pipelines in an HTTP two-way solicit response send port (if the MDN is synchronous), or in a one-way HTTP send port and a one-way HTTP receive port (if the MDN is asynchronous).</span></span> <span data-ttu-id="8333e-111">Si vous devez effectuer le désassemblage d'une charge non-EDI, vous devez le faire dans un autre pipeline de réception car [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]n'autorise qu'un seul désassembleur dans un pipeline de réception.</span><span class="sxs-lookup"><span data-stu-id="8333e-111">If you need to perform disassembly of a non-EDI payload, you will have to do that in another receive pipeline, because [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] only allows one disassembler in a receive pipeline.</span></span> <span data-ttu-id="8333e-112">Cette opération nécessite un port d’envoi de bouclage et l’emplacement de réception (consultez la [du traitement de la charge Non-EDI reçu](../core/receive-side-processing-of-an-incoming-non-edi-message-over-as2.md#BKMK_NonEDI) section ci-dessous).</span><span class="sxs-lookup"><span data-stu-id="8333e-112">This will require a loopback send port and receive location (see the [Processing the Received Non-EDI Payload](../core/receive-side-processing-of-an-incoming-non-edi-message-over-as2.md#BKMK_NonEDI) section below).</span></span>  
  
 <span data-ttu-id="8333e-113">Pour recevoir un échange non-EDI via AS2, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="8333e-113">To receive a non-EDI interchange over AS2, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will perform the following steps:</span></span>  
  
-   <span data-ttu-id="8333e-114">Traitement du message AS2 reçu</span><span class="sxs-lookup"><span data-stu-id="8333e-114">Processing the received AS2 message</span></span>  
  
-   <span data-ttu-id="8333e-115">Envoi d'un MDN</span><span class="sxs-lookup"><span data-stu-id="8333e-115">Sending an MDN</span></span>  
  
-   <span data-ttu-id="8333e-116">Traitement de la charge non-EDI reçue</span><span class="sxs-lookup"><span data-stu-id="8333e-116">Processing the received non-EDI payload</span></span>  
  
## <a name="processing-the-received-as2-message"></a><span data-ttu-id="8333e-117">Le traitement du message reçu de AS2</span><span class="sxs-lookup"><span data-stu-id="8333e-117">Processing the Received AS2 message</span></span>  
 <span data-ttu-id="8333e-118">Le décodeur AS2 dans le pipeline de réception AS2Receive traite un message AS2 entrant.</span><span class="sxs-lookup"><span data-stu-id="8333e-118">The AS2 Decoder in the AS2Receive receive pipeline processes an incoming AS2 message.</span></span> <span data-ttu-id="8333e-119">Pour ce faire, il utilise la propriété de contexte `InboundHTTPHeaders` créée par l'adaptateur HTTP à partir des en-têtes HTTP du message AS2.</span><span class="sxs-lookup"><span data-stu-id="8333e-119">It does so using the `InboundHTTPHeaders` context property, which the HTTP adapter creates from the HTTP headers in the AS2 message.</span></span> <span data-ttu-id="8333e-120">Ces en-têtes comprennent les en-têtes AS2 suivants :</span><span class="sxs-lookup"><span data-stu-id="8333e-120">These headers include the following AS2 headers:</span></span>  
  
-   <span data-ttu-id="8333e-121">AS2-To</span><span class="sxs-lookup"><span data-stu-id="8333e-121">AS2-To</span></span>  
  
-   <span data-ttu-id="8333e-122">AS2-From</span><span class="sxs-lookup"><span data-stu-id="8333e-122">AS2-From</span></span>  
  
-   <span data-ttu-id="8333e-123">AS2-Version</span><span class="sxs-lookup"><span data-stu-id="8333e-123">AS2-Version</span></span>  
  
-   <span data-ttu-id="8333e-124">MessageID</span><span class="sxs-lookup"><span data-stu-id="8333e-124">MessageID</span></span>  
  
-   <span data-ttu-id="8333e-125">OriginalMessageID (pour MDN uniquement)</span><span class="sxs-lookup"><span data-stu-id="8333e-125">OriginalMessageID (for MDNs only)</span></span>  
  
-   <span data-ttu-id="8333e-126">Disposition-Notification-To (si un MDN est demandé)</span><span class="sxs-lookup"><span data-stu-id="8333e-126">Disposition-Notification-To (if an MDN is requested)</span></span>  
  
-   <span data-ttu-id="8333e-127">Receipt-Delivery-Option (si un MDN est demandé)</span><span class="sxs-lookup"><span data-stu-id="8333e-127">Receipt-Delivery-Option (if an MDN is requested)</span></span>  
  
-   <span data-ttu-id="8333e-128">Signed-Receipt-MICalg (si un MDN est demandé)</span><span class="sxs-lookup"><span data-stu-id="8333e-128">Signed-Receipt-MICalg (if an MDN is requested)</span></span>  
  
 <span data-ttu-id="8333e-129">Le décodeur AS2 promeut ces en-têtes dans le contexte du message.</span><span class="sxs-lookup"><span data-stu-id="8333e-129">The AS2 Decoder will promote these headers to the context of the message.</span></span> <span data-ttu-id="8333e-130">Puis il effectue les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="8333e-130">It then does the following:</span></span>  
  
-   <span data-ttu-id="8333e-131">Procède à la résolution de l'accord afin de déterminer les propriétés à utiliser pour traiter le message entrant.</span><span class="sxs-lookup"><span data-stu-id="8333e-131">Performs agreement resolution to determine the properties to be used to process the incoming message.</span></span> <span data-ttu-id="8333e-132">Pour plus d’informations, consultez [résolution d’accord pour les Messages AS2 entrants](../core/agreement-resolution-for-incoming-as2-messages.md).</span><span class="sxs-lookup"><span data-stu-id="8333e-132">For more information, see [Agreement Resolution for Incoming AS2 Messages](../core/agreement-resolution-for-incoming-as2-messages.md).</span></span>  
  
-   <span data-ttu-id="8333e-133">Authentifie l'expéditeur à l'aide des propriétés AS2-From et AS2-To.</span><span class="sxs-lookup"><span data-stu-id="8333e-133">Authenticates the sender using the AS2-From and AS2-To properties.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="8333e-134">Pour plus d’informations sur le traitement AS2 des pipelines de réception sur les messages AS2 entrants, consultez la rubrique [du traitement d’un Message AS2 entrant](../core/processing-an-incoming-as2-message.md).</span><span class="sxs-lookup"><span data-stu-id="8333e-134">For more information about the processing that the AS2 receive pipelines perform on incoming AS2 messages, see [Processing an Incoming AS2 Message](../core/processing-an-incoming-as2-message.md).</span></span>  
  
## <a name="sending-an-mdn"></a><span data-ttu-id="8333e-135">Envoi d'un MDN</span><span class="sxs-lookup"><span data-stu-id="8333e-135">Sending an MDN</span></span>  
 <span data-ttu-id="8333e-136">Si un MDN a été activé, le pipeline AS2Receive génère un MDN et le dépose dans la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="8333e-136">If an MDN was enabled, the AS2Receive pipeline generates an MDN and drops it into the MessageBox.</span></span> <span data-ttu-id="8333e-137">La façon dont le MDN est retourné à l'expéditeur du message original varie selon que le transport AS2 est synchrone ou asynchrone.</span><span class="sxs-lookup"><span data-stu-id="8333e-137">How the MDN is returned to the sender of the original message depends upon whether the AS2 transport is synchronous or asynchronous.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8333e-138">Pour plus d’informations sur le traitement AS2 des pipelines de réception sur les MDN sortants, consultez la rubrique [générer un MDN sortant](../core/generating-an-outgoing-mdn.md).</span><span class="sxs-lookup"><span data-stu-id="8333e-138">For more information about the processing that the AS2 receive pipelines perform on outgoing MDNs, see [Generating an Outgoing MDN](../core/generating-an-outgoing-mdn.md).</span></span>  
  
 <span data-ttu-id="8333e-139">**Mode synchrone**</span><span class="sxs-lookup"><span data-stu-id="8333e-139">**Synchronous Mode**</span></span>  
  
 <span data-ttu-id="8333e-140">Si un message non-EDI est envoyé via AS2 en mode synchrone, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] retourne le MDN via cette connexion synchrone puis ferme la connexion.</span><span class="sxs-lookup"><span data-stu-id="8333e-140">If a non-EDI message is sent over AS2 in synchronous mode, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will return the MDN over that synchronous connection and then close the connection.</span></span> <span data-ttu-id="8333e-141">Le MDN est généré par le pipeline AS2Receive, acheminé par ce pipeline vers la base de données MessageBox, puis récupéré automatiquement par le pipeline AS2Send qui fait partie du port de réception avec requête-réponse.</span><span class="sxs-lookup"><span data-stu-id="8333e-141">The MDN will be generated by the AS2Receive pipeline, routed by that pipeline to the MessageBox, and then automatically picked up by the AS2Send pipeline that is part of the request response receive port.</span></span>  
  
 <span data-ttu-id="8333e-142">**Mode asynchrone**</span><span class="sxs-lookup"><span data-stu-id="8333e-142">**Asynchronous Mode**</span></span>  
  
 <span data-ttu-id="8333e-143">Si un message non-EDI est envoyé via le transport HTTP/HTTPS en mode asynchrone, vous devez créer un port d'envoi pour retourner le MDN séparément.</span><span class="sxs-lookup"><span data-stu-id="8333e-143">If a non-EDI message is sent over HTTP/HTTPS transport in asynchronous mode, you must create a send port to return the MDN separately.</span></span> <span data-ttu-id="8333e-144">S'il s'agit d'un port d'envoi dynamique, il utilise l'adresse située sur la ligne Receipt-Delivery-Notification de l'en-tête du message pour acheminer le message vers le partenaire commercial.</span><span class="sxs-lookup"><span data-stu-id="8333e-144">If it is a dynamic send port, it will use the address in the Receipt-Delivery-Notification line in the header of the message to route the message to the trading partner.</span></span> <span data-ttu-id="8333e-145">S'il s'agit d'un port d'envoi statique, il utilise l'adresse définie dans les propriétés du port.</span><span class="sxs-lookup"><span data-stu-id="8333e-145">If it is a static send port, it will use the address defined in port properties.</span></span> <span data-ttu-id="8333e-146">Ce port d'envoi s'abonne au MDN asynchrone à l'aide d'une expression de filtre `EdiIntAS.IsAS2AsynchronousMDN==True`.</span><span class="sxs-lookup"><span data-stu-id="8333e-146">This send port subscribes to the asynchronous MDN by using an `EdiIntAS.IsAS2AsynchronousMDN==True` filter expression.</span></span> <span data-ttu-id="8333e-147">Lors du traitement asynchrone, le pipeline AS2Receive génère une réponse HTTP en plus du MDN.</span><span class="sxs-lookup"><span data-stu-id="8333e-147">In asynchronous processing, the AS2Receive pipeline will generate an HTTP response in addition to the MDN.</span></span> <span data-ttu-id="8333e-148">Le port de réception retourne la réponse HTTP à l'expéditeur d'origine via la connexion HTTP entre le port de réception et le tiers à l'origine de l'envoi, ce qui a pour effet de fermer cette connexion.</span><span class="sxs-lookup"><span data-stu-id="8333e-148">The receive port returns the HTTP response to the original sender over the HTTP connection between the receive port and the sending party, which closes that connection.</span></span> <span data-ttu-id="8333e-149">Ceci est nécessaire car la connexion synchrone n'est pas fermée par le MDN.</span><span class="sxs-lookup"><span data-stu-id="8333e-149">This is necessary because the synchronous connection is not closed by the MDN.</span></span>  
  
##  <span data-ttu-id="8333e-150"><a name="BKMK_NonEDI"></a>Traitement de la charge Non-EDI reçue</span><span class="sxs-lookup"><span data-stu-id="8333e-150"><a name="BKMK_NonEDI"></a> Processing the Received Non-EDI Payload</span></span>  
 <span data-ttu-id="8333e-151">Lorsqu'un message qui n'est pas codé dans EDI est reçu via AS2 et que vous devez effectuer le désassemblage sur la charge, vous devez le faire dans un pipeline de réception différent du pipeline AS2Receive.</span><span class="sxs-lookup"><span data-stu-id="8333e-151">When a message that is not encoded in EDI is received over AS2, and you need to perform disassembly on the payload, you will have to do that in a different receive pipeline than the AS2Receive pipeline.</span></span> <span data-ttu-id="8333e-152">Cela est nécessaire car [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] n'autorise qu'un désassembleur dans un pipeline de réception.</span><span class="sxs-lookup"><span data-stu-id="8333e-152">This is required because [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] only allows one disassembler in a receive pipeline.</span></span> <span data-ttu-id="8333e-153">Ce scénario requiert un mécanisme de bouclage faisant appel à un port d'envoi et à un emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="8333e-153">This scenario will require a loopback mechanism using a send port and receive location.</span></span> <span data-ttu-id="8333e-154">Lors du premier passage, le pipeline EDIReceive traite le message AS2 et envoie le message dans son format natif vers la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="8333e-154">In the first pass, the EDIReceive pipeline processes the AS2 message and sends the message in its native format to the MessageBox.</span></span> <span data-ttu-id="8333e-155">Lors du deuxième passage, un pipeline de réception génère un message XML à partir du format natif du message.</span><span class="sxs-lookup"><span data-stu-id="8333e-155">In the second pass, a receive pipeline generates XML from the message's native format.</span></span>  
  
 <span data-ttu-id="8333e-156">BizTalk Server effectue le traitement côté réception suivant sur un message non-EDI via AS2 BizTalk Server :</span><span class="sxs-lookup"><span data-stu-id="8333e-156">BizTalk Server will perform the following receive-side processing on a non-EDI message over AS2 BizTalk Server:</span></span>  
  
-   <span data-ttu-id="8333e-157">Le pipeline de réception AS2Receive associé à l'emplacement de réception bidirectionnel avec requête-réponse analyse les en-têtes AS2 du message non-EDI, puis achemine le message non-EDI vers la base de données MessageBox de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="8333e-157">The AS2Receive receive pipeline associated with the two-way request response receive location parses the AS2 headers from the non-EDI message, and then routes the non-EDI message to the BizTalk MessageBox.</span></span>  
  
-   <span data-ttu-id="8333e-158">Un port d'envoi de bouclage (FILE ou MSMQ) récupère le message non-EDI depuis la base de données MessageBox, car le filtrage s'effectue en fonction de la propriété BizTalk `IsAS2PayloadMessage == True`.</span><span class="sxs-lookup"><span data-stu-id="8333e-158">A loopback send port (either FILE or MSMQ) picks the non-EDI message up from the MessageBox, because it filters on the BizTalk property `IsAS2PayloadMessage == True`.</span></span> <span data-ttu-id="8333e-159">Le pipeline d'envoi PassThruTransmit associé à ce port d'envoi transmet le message dans son format non-EDI, en l'acheminant vers un dossier ou une file d'attente MSMQ.</span><span class="sxs-lookup"><span data-stu-id="8333e-159">The PassThruTransmit send pipeline associated with this send port passes the message through in its non-EDI format, routing the message to either a folder or an MSMQ queue.</span></span>  
  
-   <span data-ttu-id="8333e-160">Un emplacement de réception de bouclage récupère le message.</span><span class="sxs-lookup"><span data-stu-id="8333e-160">A loopback receive location picks up the message.</span></span> <span data-ttu-id="8333e-161">Le pipeline de réception associé à l'emplacement de réception de bouclage génère un message XML à partir du message non-EDI et l'achemine vers la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="8333e-161">The receive pipeline associated with the loopback receive location generates an XML message from the non-EDI message, and routes it to the MessageBox.</span></span>  
  
-   <span data-ttu-id="8333e-162">Si le message doit être acheminé à une application principale, un port d'envoi récupère le message XML et l'achemine vers l'application en question.</span><span class="sxs-lookup"><span data-stu-id="8333e-162">If the message is to be routed to a back-end application, a send port picks up the XML message and routes it to the application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8333e-163">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8333e-163">See Also</span></span>  
 <span data-ttu-id="8333e-164">[Réception des Messages AS2 par BizTalk Server](../core/how-biztalk-server-receives-as2-messages.md) </span><span class="sxs-lookup"><span data-stu-id="8333e-164">[How BizTalk Server Receives AS2 Messages](../core/how-biztalk-server-receives-as2-messages.md) </span></span>  
 [<span data-ttu-id="8333e-165">Traitement côté envoi d’un Message EDI sortant sur AS2</span><span class="sxs-lookup"><span data-stu-id="8333e-165">Send-Side Processing of an Outgoing EDI Message over AS2</span></span>](../core/send-side-processing-of-an-outgoing-edi-message-over-as2.md)