---
title: "Envoi d’un échange par lot conservé | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d9bc2207-e34d-4d06-a224-bd7f8e498c27
caps.latest.revision: "14"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 22572f01f1e76dae36cbdcb34a4321c2db1c44c6
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="sending-a-preserved-batch-interchange"></a><span data-ttu-id="7fcbf-102">Envoi d'un échange de lot préservé</span><span class="sxs-lookup"><span data-stu-id="7fcbf-102">Sending a Preserved Batch Interchange</span></span>
<span data-ttu-id="7fcbf-103">Quand le pipeline d'envoi EDI traite un échange de lot préservé sortant, il traite l'échange traité par lot comme un tout.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-103">When the EDI send pipeline processes an outbound preserved batch interchange, it processes the batched interchange as a whole.</span></span> <span data-ttu-id="7fcbf-104">Il réutilise normalement les segments (de contrôle) existants de l'enveloppe pour créer l'échange EDI, plutôt que d'appliquer une enveloppe basée sur l'accord.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-104">It normally reuses the existing envelope (control) segments in creating the EDI interchange, rather than applying an envelope based upon the agreement.</span></span> <span data-ttu-id="7fcbf-105">Cela se produit lorsque le **entrants option de traitement par lots** est définie sur **préserver l’échange : suspendre l’échange en cas d’erreur** ou **préserver l’échange : suspendre les documents informatisés sur Erreur**.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-105">This occurs when the **Inbound batch processing option** property is set to **Preserve Interchange - suspend Interchange on Error** or **Preserve Interchange - suspend Transaction Sets on Error**.</span></span>  
  
## <a name="schema-validation"></a><span data-ttu-id="7fcbf-106">Validation de schéma</span><span class="sxs-lookup"><span data-stu-id="7fcbf-106">Schema Validation</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="7fcbf-107"> valide l'enveloppe d'un lot préservé en utilisant les schémas de lot et les schémas de service.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-107"> validates the envelope of a preserved batch using the batch schemas and the service schemas.</span></span> <span data-ttu-id="7fcbf-108">Le schéma de lot est utilisé pour valider le nœud racine du message préservé : les schémas de service sont utilisés pour valider les en-tête et les codes de fin d'échange, de groupe, et de document informatisé.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-108">The batch schema is used to validate the root node of the preserved message; the service schemas are used to validate the interchange, group, and transaction set headers and trailers.</span></span> <span data-ttu-id="7fcbf-109">Pour plus d’informations sur les schémas de lot, consultez [schémas de lot EDI](../core/edi-batch-schemas.md).</span><span class="sxs-lookup"><span data-stu-id="7fcbf-109">For more information about the batch schemas, see [EDI Batch Schemas](../core/edi-batch-schemas.md).</span></span> <span data-ttu-id="7fcbf-110">Pour plus d’informations sur les schémas de service, consultez [Service EDI et des schémas de contrôle](../core/edi-service-and-control-schemas.md).</span><span class="sxs-lookup"><span data-stu-id="7fcbf-110">For more information on the service schemas, see [EDI Service and Control Schemas](../core/edi-service-and-control-schemas.md).</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="7fcbf-111"> valide les documents dans un échange traité par lot à l'aide des schémas de document de votre projet.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-111"> validates the documents in a batched interchange using the document schemas in your project.</span></span>  
  
## <a name="send-side-processing"></a><span data-ttu-id="7fcbf-112">Traitement côté envoi</span><span class="sxs-lookup"><span data-stu-id="7fcbf-112">Send-Side Processing</span></span>  
 <span data-ttu-id="7fcbf-113">Lorsque l'assembleur EDI traite un échange préservé, il utilise normalement les mêmes en-têtes d'échange, de groupe, et de document informatisé qui existaient dans l'échange traité par lot lorsque celui-ci a été reçu.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-113">When the EDI Assembler processes a preserved interchange, it normally uses the same interchange, group, and transaction-set headers that existed in the batched interchange when it was received.</span></span>  
  
-   <span data-ttu-id="7fcbf-114">Pour les échanges de X12, les paramètres de propriété dans différentes pages de l’onglet d’accord unidirectionnel de la **propriétés de l’accord** boîte de dialogue (qui déterminent comment [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] crée les en-têtes ISA, GS et ST de sortante échange) ne s’appliquent pas.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-114">For X12 interchanges, the property settings on different pages in the one-way agreement tab in the **Agreement Properties** dialog box (which determine how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will create the ISA, GS, and ST headers of an outgoing interchange) do not normally apply.</span></span>  
  
-   <span data-ttu-id="7fcbf-115">Pour des échanges EDIFACT, les paramètres UNA des propriétés de l'accord sont normalement utilisés.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-115">For EDIFACT interchanges, the UNA settings in the agreement properties are normally used.</span></span> <span data-ttu-id="7fcbf-116">Le segment UNA est facultatif dans un message encodé en EDIFACT, mais il est nécessaire pour sérialiser un échange de lot préservé.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-116">The UNA segment is optional in an EDIFACT-encoded message, but it is required for serializing a preserved batch interchange.</span></span> <span data-ttu-id="7fcbf-117">S'il n'y a pas de valeur pour le segment UNA dans l'instance XML, les valeurs des propriétés par défaut pour le composant de pipeline d'envoi sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-117">If there is no value for the UNA segment in the XML instance, the default property values for the send pipeline component will be used.</span></span> <span data-ttu-id="7fcbf-118">Si les propriétés du composant de pipeline d'envoi ne sont pas évaluées, alors le message XML intermédiaire de lot préservé est interrompu.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-118">If the send pipeline component properties are not valued, then the preserved batch intermediate XML message will be suspended.</span></span>  
  
-   <span data-ttu-id="7fcbf-119">Si vous promouvez la propriété de contexte `EDI.PopulateInterchangeValues` sur "True" dans l'échange en cours de préservation (dans un composant personnalisé), l'EdiAssembler du port d'envoi attribue à tous les en-têtes d'échange, de groupe, et de document informatisé les valeurs établies dans les propriétés de l'accord.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-119">If you promote the `EDI.PopulateInterchangeValues` context property to "True" on the interchange being preserved (in a custom component), the EdiAssembler in the send port will populate all of the interchange, group, and transaction-set headers to the values set in the agreement properties.</span></span>  
  
-   <span data-ttu-id="7fcbf-120">Si vous promouvez la propriété de contexte `EDIOverride.OverrideEdiHeader` sur “True” dans l'échange avant qu'il ne soit traité par le pipeline d'envoi, vous pouvez remplacer les valeurs d'enveloppe pour le document sortant en affectant des valeurs appropriées de propriété de contexte `EDIOverride`.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-120">If you promote the `EDIOverride.OverrideEdiHeader` context property to “True” on the interchange before it is processed by the send pipeline, you can override the envelope values for the outbound document by setting the appropriate `EDIOverride` context property values.</span></span> <span data-ttu-id="7fcbf-121">Pour plus d’informations, consultez [remplaçant les en-têtes EDI](../core/overriding-edi-headers.md).</span><span class="sxs-lookup"><span data-stu-id="7fcbf-121">For more information, see [Overriding EDI Headers](../core/overriding-edi-headers.md).</span></span>  
  
 <span data-ttu-id="7fcbf-122">Pour qu'un échange préservé ne présente pas d'erreurs, l'assembleur préserve la séquence des documents informatisés dans un groupe de l'échange et la séquence des groupes dans l'échange.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-122">For a preserved interchange that has no errors, the Assembler will preserve the sequence of transaction sets in a group of the interchange and the sequence of groups in the interchange.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7fcbf-123">Vous pouvez envoyez un lot préservé avec un pipeline d'envoi XML.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-123">You can send a preserved batch with an XML send pipeline.</span></span> <span data-ttu-id="7fcbf-124">Cette manière de faire nécessite cependant que vous changiez l'espace de noms pour le schéma de lot.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-124">However, to do so requires that you change the namespace for the batch schema.</span></span> <span data-ttu-id="7fcbf-125">Pour plus d’informations, consultez [envoi d’un lot conservé avec un Pipeline d’envoi XML](../core/sending-a-preserved-batch-with-an-xml-send-pipeline.md).</span><span class="sxs-lookup"><span data-stu-id="7fcbf-125">For more information, see [Sending a Preserved Batch with an XML Send Pipeline](../core/sending-a-preserved-batch-with-an-xml-send-pipeline.md).</span></span>  
  
## <a name="error-processing"></a><span data-ttu-id="7fcbf-126">Erreur lors du traitement</span><span class="sxs-lookup"><span data-stu-id="7fcbf-126">Error Processing</span></span>  
 <span data-ttu-id="7fcbf-127">Grâce à une balise réservée dans le XML, le pipeline d'envoi EDI identifie un échange EDI en tant que lot préservé.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-127">The EDI send pipeline recognizes a batched EDI interchange as a preserved batch because of a reserved tag in the XML.</span></span> <span data-ttu-id="7fcbf-128">Cette balise soit \<X12InterchangeXml > ou \<EdifactInterchangeXml >, est appliquée au document XML en EDI pipeline de réception.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-128">This tag, either \<X12InterchangeXml> or \<EdifactInterchangeXml>, is applied to the XML by the EDI receive pipeline.</span></span>  
  
 <span data-ttu-id="7fcbf-129">Voici les cas particuliers de suspension des documents informatisés en cas d'erreur :</span><span class="sxs-lookup"><span data-stu-id="7fcbf-129">The following special cases apply to suspending transaction sets on error:</span></span>  
  
-   <span data-ttu-id="7fcbf-130">Si tous les documents informatisés d'un groupe ne sont pas valides, alors le pipeline d'envoi EDI inclut des segments de contrôle de groupe dans l'EDI généré, mais le groupe ne contient aucun document informatisé (car ils ont été supprimés).</span><span class="sxs-lookup"><span data-stu-id="7fcbf-130">If all transaction sets in a group are invalid, then the EDI send pipeline will include group control segments in the generated EDI, but the group will not contain any transaction sets (because they will have been dropped).</span></span> <span data-ttu-id="7fcbf-131">Les totaux de pied de page de groupe sont remis à zéro.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-131">The group footer totals are updated to zero.</span></span> <span data-ttu-id="7fcbf-132">Les segments de contrôle d'échange demeurent inchangés.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-132">The interchange control segments remain unchanged.</span></span>  
  
-   <span data-ttu-id="7fcbf-133">Si tous les documents informatisés d'un échange ne sont pas valides, alors les segments de contrôle d'échange sont toujours inclus dans l'échange EDI généré, mais l'échange ne contient aucun document informatisé (car ils ont été supprimés).</span><span class="sxs-lookup"><span data-stu-id="7fcbf-133">If all transaction sets in an interchange are invalid, then the interchange control segments will still be included in the generated EDI interchange, but the interchange will not contain any transaction sets (because they will have been dropped).</span></span> <span data-ttu-id="7fcbf-134">Cela constitue un échange vide.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-134">This would constitute an empty interchange.</span></span>  
  
-   <span data-ttu-id="7fcbf-135">Si les segments de contrôle de groupe ou les segments de contrôle d'échange ne sont pas valides, un échange encodé en EDI n'est pas généré.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-135">If the group control segments or the interchange control segments are invalid, an EDI-encoded interchange will not be generated.</span></span> <span data-ttu-id="7fcbf-136">Un journal est créé dans l'observateur d'événements, et indique si l'échange a été rejeté.</span><span class="sxs-lookup"><span data-stu-id="7fcbf-136">A log will be created in the event viewer indicating that the interchange was rejected.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7fcbf-137">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="7fcbf-137">See Also</span></span>  
 [<span data-ttu-id="7fcbf-138">Le traitement par lot des Messages EDI sortants</span><span class="sxs-lookup"><span data-stu-id="7fcbf-138">Batching Outgoing EDI Messages</span></span>](../core/batching-outgoing-edi-messages.md)