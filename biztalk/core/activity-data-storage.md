---
title: "Stockage des données d’activité | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- performance, BAM
- databases [BAM], performance
- activities [BAM], peformance
- databases [BAM], partitioning
- BAM, performance
ms.assetid: 1f736599-3d16-496e-a459-8b0507d57fcb
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 0139e76512eb9ca60089cb3c5f1e71b4f5524690
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2017
---
# <a name="activity-data-storage"></a><span data-ttu-id="54218-102">Stockage des données d'activité</span><span class="sxs-lookup"><span data-stu-id="54218-102">Activity Data Storage</span></span>
<span data-ttu-id="54218-103">Cette rubrique décrit le stockage des données d'activité, les problèmes de performances engendrés par l'augmentation progressive de la taille des tables de l'activité et la manière dont le composant BAM permet de résoudre ces difficultés en séparant les tables des activités en cours de celles des activités terminées.</span><span class="sxs-lookup"><span data-stu-id="54218-103">This topic describes activity data storage, the performance problems caused by the growth of activity tables over time, and how BAM solves these performance problems with separate tables for activities in progress and completed activities.</span></span> <span data-ttu-id="54218-104">Cette rubrique traite également des fenêtres en ligne permettant d'interroger les données et de l'utilisation du partitionnement dans les analyses BAM pour augmenter les performances.</span><span class="sxs-lookup"><span data-stu-id="54218-104">This topic also describes the online window for querying data, and how you can use partitioning in BAM for higher performance.</span></span>  
  
 <span data-ttu-id="54218-105">Le principe fondamental du stockage des données d'activité consiste à disposer d'une table par type d'activité, où chaque enregistrement représente une instance d'activité différente (par exemple, une instance en cours ou terminée).</span><span class="sxs-lookup"><span data-stu-id="54218-105">The basic idea of activity data storage is to have a separate table for each activity type, in which each record represents a different activity instance (for example, in-progress or completed).</span></span>  
  
 <span data-ttu-id="54218-106">Dans l'exemple développé ci-après, l'activité considérée est le traitement d'un bon de commande. La table se présente alors de la manière suivante :</span><span class="sxs-lookup"><span data-stu-id="54218-106">In this example, if the activity were Purchase Order the table would look as follows:</span></span>  
  
|<span data-ttu-id="54218-107">Bon de cmde n°</span><span class="sxs-lookup"><span data-stu-id="54218-107">PO#</span></span>|<span data-ttu-id="54218-108">Heure réception</span><span class="sxs-lookup"><span data-stu-id="54218-108">RecvTime</span></span>|<span data-ttu-id="54218-109">Ville</span><span class="sxs-lookup"><span data-stu-id="54218-109">City</span></span>|<span data-ttu-id="54218-110">Quantité</span><span class="sxs-lookup"><span data-stu-id="54218-110">Quantity</span></span>|<span data-ttu-id="54218-111">Heure expédition</span><span class="sxs-lookup"><span data-stu-id="54218-111">ShipTime</span></span>|<span data-ttu-id="54218-112">Heure livraison</span><span class="sxs-lookup"><span data-stu-id="54218-112">DeliveryTime</span></span>|  
|----------|--------------|----------|--------------|--------------|------------------|  
|<span data-ttu-id="54218-113">123</span><span class="sxs-lookup"><span data-stu-id="54218-113">123</span></span>|<span data-ttu-id="54218-114">8:00 am</span><span class="sxs-lookup"><span data-stu-id="54218-114">8:00am</span></span>|<span data-ttu-id="54218-115">Seattle</span><span class="sxs-lookup"><span data-stu-id="54218-115">Seattle</span></span>|<span data-ttu-id="54218-116">150</span><span class="sxs-lookup"><span data-stu-id="54218-116">150</span></span>|<span data-ttu-id="54218-117">8:24 heures</span><span class="sxs-lookup"><span data-stu-id="54218-117">8:24am</span></span>|<span data-ttu-id="54218-118">12h45</span><span class="sxs-lookup"><span data-stu-id="54218-118">12:45pm</span></span>|  
|<span data-ttu-id="54218-119">124</span><span class="sxs-lookup"><span data-stu-id="54218-119">124</span></span>|<span data-ttu-id="54218-120">8 h 30</span><span class="sxs-lookup"><span data-stu-id="54218-120">8:30am</span></span>|<span data-ttu-id="54218-121">Seattle</span><span class="sxs-lookup"><span data-stu-id="54218-121">Seattle</span></span>|<span data-ttu-id="54218-122">234</span><span class="sxs-lookup"><span data-stu-id="54218-122">234</span></span>|<span data-ttu-id="54218-123">8:45 am</span><span class="sxs-lookup"><span data-stu-id="54218-123">8:45am</span></span>|<span data-ttu-id="54218-124">1:20 pm</span><span class="sxs-lookup"><span data-stu-id="54218-124">1:20pm</span></span>|  
|<span data-ttu-id="54218-125">125</span><span class="sxs-lookup"><span data-stu-id="54218-125">125</span></span>|<span data-ttu-id="54218-126">8:35 am</span><span class="sxs-lookup"><span data-stu-id="54218-126">8:35am</span></span>|<span data-ttu-id="54218-127">Redmond</span><span class="sxs-lookup"><span data-stu-id="54218-127">Redmond</span></span>|<span data-ttu-id="54218-128">87</span><span class="sxs-lookup"><span data-stu-id="54218-128">87</span></span>|<span data-ttu-id="54218-129">9:05 am</span><span class="sxs-lookup"><span data-stu-id="54218-129">9:05am</span></span>|<span data-ttu-id="54218-130">2 h 30</span><span class="sxs-lookup"><span data-stu-id="54218-130">2:30pm</span></span>|  
|<span data-ttu-id="54218-131">126</span><span class="sxs-lookup"><span data-stu-id="54218-131">126</span></span>|<span data-ttu-id="54218-132">8:45 am</span><span class="sxs-lookup"><span data-stu-id="54218-132">8:45am</span></span>|<span data-ttu-id="54218-133">Seattle</span><span class="sxs-lookup"><span data-stu-id="54218-133">Seattle</span></span>|<span data-ttu-id="54218-134">450</span><span class="sxs-lookup"><span data-stu-id="54218-134">450</span></span>|<span data-ttu-id="54218-135">9 h 20</span><span class="sxs-lookup"><span data-stu-id="54218-135">9:20am</span></span>|<span data-ttu-id="54218-136">3:10 pm</span><span class="sxs-lookup"><span data-stu-id="54218-136">3:10pm</span></span>|  
|<span data-ttu-id="54218-137">127</span><span class="sxs-lookup"><span data-stu-id="54218-137">127</span></span>|<span data-ttu-id="54218-138">8:55:00</span><span class="sxs-lookup"><span data-stu-id="54218-138">8:55am</span></span>|<span data-ttu-id="54218-139">Redmond</span><span class="sxs-lookup"><span data-stu-id="54218-139">Redmond</span></span>|<span data-ttu-id="54218-140">200</span><span class="sxs-lookup"><span data-stu-id="54218-140">200</span></span>|<span data-ttu-id="54218-141">9 h 30</span><span class="sxs-lookup"><span data-stu-id="54218-141">9:30am</span></span>|<span data-ttu-id="54218-142">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="54218-142">\<NULL\></span></span>|  
|<span data-ttu-id="54218-143">128</span><span class="sxs-lookup"><span data-stu-id="54218-143">128</span></span>|<span data-ttu-id="54218-144">8:57 am</span><span class="sxs-lookup"><span data-stu-id="54218-144">8:57am</span></span>|<span data-ttu-id="54218-145">Seattle</span><span class="sxs-lookup"><span data-stu-id="54218-145">Seattle</span></span>|<span data-ttu-id="54218-146">340</span><span class="sxs-lookup"><span data-stu-id="54218-146">340</span></span>|<span data-ttu-id="54218-147">9 h 20</span><span class="sxs-lookup"><span data-stu-id="54218-147">9:20am</span></span>|<span data-ttu-id="54218-148">15:05:00</span><span class="sxs-lookup"><span data-stu-id="54218-148">3:05pm</span></span>|  
|<span data-ttu-id="54218-149">129</span><span class="sxs-lookup"><span data-stu-id="54218-149">129</span></span>|<span data-ttu-id="54218-150">9 h 12</span><span class="sxs-lookup"><span data-stu-id="54218-150">9:12am</span></span>|<span data-ttu-id="54218-151">Seattle</span><span class="sxs-lookup"><span data-stu-id="54218-151">Seattle</span></span>|<span data-ttu-id="54218-152">120</span><span class="sxs-lookup"><span data-stu-id="54218-152">120</span></span>|<span data-ttu-id="54218-153">9 h 45</span><span class="sxs-lookup"><span data-stu-id="54218-153">9:45am</span></span>|<span data-ttu-id="54218-154">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="54218-154">\<NULL\></span></span>|  
|<span data-ttu-id="54218-155">130</span><span class="sxs-lookup"><span data-stu-id="54218-155">130</span></span>|<span data-ttu-id="54218-156">9 h 30</span><span class="sxs-lookup"><span data-stu-id="54218-156">9:30am</span></span>|<span data-ttu-id="54218-157">Redmond</span><span class="sxs-lookup"><span data-stu-id="54218-157">Redmond</span></span>|<span data-ttu-id="54218-158">25</span><span class="sxs-lookup"><span data-stu-id="54218-158">25</span></span>|<span data-ttu-id="54218-159">10:15:00</span><span class="sxs-lookup"><span data-stu-id="54218-159">10:15am</span></span>|<span data-ttu-id="54218-160">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="54218-160">\<NULL\></span></span>|  
|<span data-ttu-id="54218-161">131</span><span class="sxs-lookup"><span data-stu-id="54218-161">131</span></span>|<span data-ttu-id="54218-162">9:45</span><span class="sxs-lookup"><span data-stu-id="54218-162">9:45</span></span>|<span data-ttu-id="54218-163">Seattle</span><span class="sxs-lookup"><span data-stu-id="54218-163">Seattle</span></span>|<span data-ttu-id="54218-164">250</span><span class="sxs-lookup"><span data-stu-id="54218-164">250</span></span>|<span data-ttu-id="54218-165">10:35:00</span><span class="sxs-lookup"><span data-stu-id="54218-165">10:35am</span></span>|<span data-ttu-id="54218-166">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="54218-166">\<NULL\></span></span>|  
|<span data-ttu-id="54218-167">132</span><span class="sxs-lookup"><span data-stu-id="54218-167">132</span></span>|<span data-ttu-id="54218-168">10:00 am</span><span class="sxs-lookup"><span data-stu-id="54218-168">10:00am</span></span>|<span data-ttu-id="54218-169">Redmond</span><span class="sxs-lookup"><span data-stu-id="54218-169">Redmond</span></span>|<span data-ttu-id="54218-170">100</span><span class="sxs-lookup"><span data-stu-id="54218-170">100</span></span>|<span data-ttu-id="54218-171">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="54218-171">\<NULL\></span></span>|<span data-ttu-id="54218-172">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="54218-172">\<NULL\></span></span>|  
|<span data-ttu-id="54218-173">133</span><span class="sxs-lookup"><span data-stu-id="54218-173">133</span></span>|<span data-ttu-id="54218-174">10:15:00</span><span class="sxs-lookup"><span data-stu-id="54218-174">10:15am</span></span>|<span data-ttu-id="54218-175">Seattle</span><span class="sxs-lookup"><span data-stu-id="54218-175">Seattle</span></span>|<span data-ttu-id="54218-176">230</span><span class="sxs-lookup"><span data-stu-id="54218-176">230</span></span>|<span data-ttu-id="54218-177">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="54218-177">\<NULL\></span></span>|<span data-ttu-id="54218-178">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="54218-178">\<NULL\></span></span>|  
|<span data-ttu-id="54218-179">134</span><span class="sxs-lookup"><span data-stu-id="54218-179">134</span></span>|<span data-ttu-id="54218-180">10:25:00</span><span class="sxs-lookup"><span data-stu-id="54218-180">10:25am</span></span>|<span data-ttu-id="54218-181">Redmond</span><span class="sxs-lookup"><span data-stu-id="54218-181">Redmond</span></span>|<span data-ttu-id="54218-182">45</span><span class="sxs-lookup"><span data-stu-id="54218-182">45</span></span>|<span data-ttu-id="54218-183">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="54218-183">\<NULL\></span></span>|<span data-ttu-id="54218-184">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="54218-184">\<NULL\></span></span>|  
  
 <span data-ttu-id="54218-185">Dans cette table, lorsque le composant BAM reçoit un nouveau bon de commande, une nouvelle ligne est insérée et des valeurs autres que « null » sont attribuées à certaines colonnes (heure de réception, ville, quantité, etc.).</span><span class="sxs-lookup"><span data-stu-id="54218-185">In this table, when BAM receives a new purchase order, it inserts a new row and some sets some of the columns to non-null values (RecvTime, City, Quantity, and so on).</span></span> <span data-ttu-id="54218-186">Ensuite, une fois que vous avez validé l'expédition du bon de commande, l'analyse BAM définit une valeur non « null » dans la colonne correspondant à l'heure d'expédition.</span><span class="sxs-lookup"><span data-stu-id="54218-186">Later, when you approve and ship this purchase order, BAM sets ShipTime to a non-null value.</span></span> <span data-ttu-id="54218-187">Enfin, lorsque la commande a été livrée, l'analyse BAM attribue une valeur autre que « null » pour l'heure de livraison.</span><span class="sxs-lookup"><span data-stu-id="54218-187">Finally, when you receive and confirm the shipment, BAM sets DeliveryTime to a non-null value.</span></span>  
  
 <span data-ttu-id="54218-188">Les performances de cette implémentation simplifiée se détériorent rapidement au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="54218-188">The performance of this simplistic implementation quickly degrades over time.</span></span> <span data-ttu-id="54218-189">Au départ, le nombre de transactions pouvant être effectuées par le serveur SQL étant limité (restriction principalement due au processeur), l'impact sur les performances est réduit. En revanche, au bout d'un certain temps, les performances diminuent considérablement.</span><span class="sxs-lookup"><span data-stu-id="54218-189">In the beginning, the performance is limited by the number of the transactions the SQL server can perform (essentially CPU bound), but after some time, it drops drastically.</span></span> <span data-ttu-id="54218-190">Dans le même temps, la longueur moyenne de la file d'attente pour les E/S du disque augmente jusqu'à dépasser les capacités :</span><span class="sxs-lookup"><span data-stu-id="54218-190">At the same time, the average queue length for disk IO increases beyond the acceptable limits:</span></span>  
  
 <span data-ttu-id="54218-191">![](../core/media/ebiz-prog-bam-data-maint-fig4.gif "ebiz_prog_bam_data_maint_fig4")</span><span class="sxs-lookup"><span data-stu-id="54218-191">![](../core/media/ebiz-prog-bam-data-maint-fig4.gif "ebiz_prog_bam_data_maint_fig4")</span></span>  
<span data-ttu-id="54218-192">Rapport performances de l'analyse BAM en écriture / longueur de la file d'attente du disque</span><span class="sxs-lookup"><span data-stu-id="54218-192">BAM Write Performance versus Disk Queue Length</span></span>  
  
 <span data-ttu-id="54218-193">Cette évolution est due à l'augmentation de la taille de la table au fur et à mesure que de nouvelles instances du processus d'entreprise prennent fin.</span><span class="sxs-lookup"><span data-stu-id="54218-193">The reason for this is that the size of the table grows as more instances of the business process complete.</span></span> <span data-ttu-id="54218-194">Par exemple, un premier appel à la procédure stockée (instruction UPDATE) entraîne une recherche sur les numéros de bon de commande dans l'index mis en cluster ainsi qu'une lecture de certaines pages en mémoire.</span><span class="sxs-lookup"><span data-stu-id="54218-194">For example, the first time, the UPDATE statement of the stored procedure causes a search on the clustered index for purchase order number and reads some pages in memory.</span></span> <span data-ttu-id="54218-195">Les instances du processus de bon de commande étant indépendantes les unes des autres (certaines sont longues, d'autres très brèves), l'appel à la procédure stockée suivant peut concerner une autre instance de bon de commande et donc nécessiter la lecture de pages de données en mémoire différentes.</span><span class="sxs-lookup"><span data-stu-id="54218-195">Since the instances of the purchase order process are independent (some take a long time, but some are short), the next call to the stored procedure may be for some other purchase order instance and therefore will require reading of different data pages in memory.</span></span> <span data-ttu-id="54218-196">Tant que le nombre total d'enregistrements de bon de commande est réduit, le serveur SQL met en mémoire cache toutes les pages de données.</span><span class="sxs-lookup"><span data-stu-id="54218-196">As long as the total number of purchase order records is small, SQL Server will cache all data pages in memory.</span></span> <span data-ttu-id="54218-197">Lorsque le nombre de ces enregistrements devient trop important, la fréquence d'accès au cache diminue et chaque opération requiert une lecture sur le disque physique.</span><span class="sxs-lookup"><span data-stu-id="54218-197">When the number of the records grows large enough, the cache-hit ratio decreases and each operation requires a physical disk read.</span></span> <span data-ttu-id="54218-198">Il semble que dans une telle situation, aucune activité d'interrogation de la table ne soit possible.</span><span class="sxs-lookup"><span data-stu-id="54218-198">Apparently, in this situation no query activity against the table is possible.</span></span>  
  
## <a name="bam-tables"></a><span data-ttu-id="54218-199">Tables BAM</span><span class="sxs-lookup"><span data-stu-id="54218-199">BAM tables</span></span>  
 <span data-ttu-id="54218-200">Pour contourner ce problème, l'analyse BAM utilise deux tables distinctes : dans le schéma ci-après, une table est consacrée aux activités en cours et une autre aux activités terminées.</span><span class="sxs-lookup"><span data-stu-id="54218-200">To avoid this problem BAM uses two separate tables – one for the activities still in progress, and another for the completed ones in the following figure:</span></span>  
  
 <span data-ttu-id="54218-201">![](../core/media/ebiz-prog-bam-data-maint-fig5.gif "ebiz_prog_bam_data_maint_fig5")</span><span class="sxs-lookup"><span data-stu-id="54218-201">![](../core/media/ebiz-prog-bam-data-maint-fig5.gif "ebiz_prog_bam_data_maint_fig5")</span></span>  
<span data-ttu-id="54218-202">Tables BAM</span><span class="sxs-lookup"><span data-stu-id="54218-202">BAM Tables</span></span>  
  
 <span data-ttu-id="54218-203">Dans ce schéma, l'objectif est d'obtenir, d'une part, une table dont la taille reste raisonnable et où ont lieu les mises à jour et, d'autre part, une table dont la taille peut augmenter et qui est accessible de façon incrémentielle (instructions INSERT uniquement).</span><span class="sxs-lookup"><span data-stu-id="54218-203">In this figure, the idea is to keep a relatively small table that updates occur in and another that grows large, but is incrementally accessed (INSERTs only).</span></span> <span data-ttu-id="54218-204">Dans l'exemple présenté ici, seules les commandes en cours de traitement sont placées dans la table active tandis que celles qui ont déjà été livrées sont placées dans la table des activités terminées.</span><span class="sxs-lookup"><span data-stu-id="54218-204">In the example, only the orders being processed at the moment will be in the active table, while all orders that were already delivered will go to the completed table.</span></span>  
  
 <span data-ttu-id="54218-205">Au départ, cette structure à tables multiples est plus lente qu'une table unique fonctionnant à l'aide d'instructions INSERT/UPDATE en raison du système de déclenchement utilisé, mais à long terme, ses performances en écriture restent stables.</span><span class="sxs-lookup"><span data-stu-id="54218-205">Because of the trigger, this structure of tables is slower than an INSERT/UPDATE of a single table at the beginning, but maintains stable write performance over time.</span></span>  
  
## <a name="online-window-for-activity-data"></a><span data-ttu-id="54218-206">Fenêtre en ligne et données d'activité</span><span class="sxs-lookup"><span data-stu-id="54218-206">Online Window for activity data</span></span>  
 <span data-ttu-id="54218-207">Dans un premier temps, le stockage d'activité gère les requêtes relatives aux activités en cours ou venant de se terminer.</span><span class="sxs-lookup"><span data-stu-id="54218-207">Activity storage primarily handles queries for current or recently completed activities.</span></span> <span data-ttu-id="54218-208">L'analyse BAM se charge ensuite d'archiver et de supprimer de la base de données d'importation principale BAM les activités terminées depuis un certain temps.</span><span class="sxs-lookup"><span data-stu-id="54218-208">BAM archives and then purges very old, completed activities from the BAM Primary Import database.</span></span> <span data-ttu-id="54218-209">Les données d'activité transitent par le composant BAM et sont disponibles pour d'éventuelles requêtes pendant une période définie par la fenêtre en ligne.</span><span class="sxs-lookup"><span data-stu-id="54218-209">Thus the activity data flows through BAM and is available for queries during a configurable Online Window.</span></span>  
  
## <a name="bam-partitioning"></a><span data-ttu-id="54218-210">Partitionnement BAM</span><span class="sxs-lookup"><span data-stu-id="54218-210">BAM partitioning</span></span>  
 <span data-ttu-id="54218-211">Pour obtenir des performances élevées et éviter les temps d'arrêt, le stockage d'activité utilise un partitionnement en fonction de la date et de l'heure de fin de l'activité.</span><span class="sxs-lookup"><span data-stu-id="54218-211">To allow for higher performance and avoid downtime, activity storage uses partitioning based on the time stamp when the activity was completed.</span></span> <span data-ttu-id="54218-212">Le composant BAM réalise cette opération en remplaçant régulièrement la table des activités terminées par une table vide de format identique.</span><span class="sxs-lookup"><span data-stu-id="54218-212">BAM achieves this by regular swapping of the completed table with another empty table of exactly the same format.</span></span> <span data-ttu-id="54218-213">Les nouvelles activités terminées sont ensuite placées dans la table vide tandis que l'analyse BAM conserve l'ancienne table pour d'éventuelles requêtes, comme indiqué dans le schéma ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="54218-213">Once BAM does this, the further completed activities go into the new table, while BAM keeps the old one only for queries, as in the following figure:</span></span>  
  
 <span data-ttu-id="54218-214">![](../core/media/ebiz-prog-bam-data-maint-fig8.gif "ebiz_prog_bam_data_maint_fig8")</span><span class="sxs-lookup"><span data-stu-id="54218-214">![](../core/media/ebiz-prog-bam-data-maint-fig8.gif "ebiz_prog_bam_data_maint_fig8")</span></span>  
<span data-ttu-id="54218-215">Remplacement de partition BAM</span><span class="sxs-lookup"><span data-stu-id="54218-215">BAM Partition Swapping</span></span>  
  
 <span data-ttu-id="54218-216">Une fois qu'une partition se trouve en dehors de la fenêtre en ligne spécifiée, le composant BAM l'archive puis la supprime.</span><span class="sxs-lookup"><span data-stu-id="54218-216">Once a partition is completely outside the online window, BAM archives and then drops it.</span></span> <span data-ttu-id="54218-217">Afin de rendre cette opération moins complexe pour l'utilisateur, l'analyse BAM gère également une vue partitionnée du formulaire :</span><span class="sxs-lookup"><span data-stu-id="54218-217">To minimize this complexity from the user, BAM also maintains a partitioned view of the form:</span></span>  
  
```  
SELECT * FROM Active   
UNION ALL   
SELECT * FROM Completed   
UNION ALL  
  
```  
  
 <span data-ttu-id="54218-218">Cette vue est automatiquement régénérée à chaque création ou suppression d'une partition.</span><span class="sxs-lookup"><span data-stu-id="54218-218">BAM automatically re-creates this view each time it creates or drops a partition.</span></span>  
  
 <span data-ttu-id="54218-219">Notez les remarques suivantes concernant le partitionnement de l'analyse BAM :</span><span class="sxs-lookup"><span data-stu-id="54218-219">Note the following about BAM partitioning:</span></span>  
  
-   <span data-ttu-id="54218-220">Le nom de la vue partitionnée est **bam_\<Nomactivité\>_AllInstances**.</span><span class="sxs-lookup"><span data-stu-id="54218-220">The name of the partitioned view is **bam_\<ActivityName\>_AllInstances**.</span></span> <span data-ttu-id="54218-221">Cette vue n'est pas destinée à des interrogations directes mais peut être utile lors du dépannage des outils BAM.</span><span class="sxs-lookup"><span data-stu-id="54218-221">This view is not meant for direct queries, but may be useful when troubleshooting the BAM instrumentation.</span></span> <span data-ttu-id="54218-222">Pour effectuer des requêtes sur les données provenant des vues que vous avez créées pour chaque catégorie d'utilisateurs d'activités, utilisez une nouvelle vue.</span><span class="sxs-lookup"><span data-stu-id="54218-222">You should query the data from the specific views for each category of business users that you create on top of this view.</span></span> <span data-ttu-id="54218-223">Pour plus d’informations, consultez [Querying Instance Data](../core/querying-instance-data.md).</span><span class="sxs-lookup"><span data-stu-id="54218-223">For more information, see [Querying Instance Data](../core/querying-instance-data.md).</span></span>  
  
-   <span data-ttu-id="54218-224">Vous définissez la fenêtre en ligne en modifiant les valeurs de **OnlineWindowTimeUnit** et **OnlineWindowLength** dans l’enregistrement de l’activité actuelle dans la table **bam_Metadata_Activities** dans la base de données d’importation principale.</span><span class="sxs-lookup"><span data-stu-id="54218-224">You set the online window by modifying the values for **OnlineWindowTimeUnit** and **OnlineWindowLength** in the record for the current activity in the table **bam_Metadata_Activities** in the Primary Import database.</span></span>  
  
-   <span data-ttu-id="54218-225">Le package DTS, **BAM_DM_\<Nomactivité\>**, effectue le partitionnement et l’archivage/purge.</span><span class="sxs-lookup"><span data-stu-id="54218-225">The DTS package, **BAM_DM_\<ActivityName\>**, performs the partitioning and archiving/purging.</span></span> <span data-ttu-id="54218-226">À chaque exécution, ce lot tronque une nouvelle partition et archive et supprime toutes les partitions se trouvant en dehors de la fenêtre en ligne spécifiée.</span><span class="sxs-lookup"><span data-stu-id="54218-226">Each time this package runs, it truncates another partition and archives/drops all partitions that are outside the online window.</span></span>  
  
-   <span data-ttu-id="54218-227">Si vous n'avez pas configuré de base de données pour archiver les partitions, le composant BAM supprime les anciennes données d'activité sans les archiver au préalable.</span><span class="sxs-lookup"><span data-stu-id="54218-227">If you do not have Archiving Database configured, then BAM drops the aged activity data without archiving.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="54218-228">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="54218-228">See Also</span></span>  
 [<span data-ttu-id="54218-229">Infrastructure dynamique de l’analyse BAM</span><span class="sxs-lookup"><span data-stu-id="54218-229">BAM Dynamic Infrastructure</span></span>](../core/bam-dynamic-infrastructure.md)