---
title: Messages MDN | Documents Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 16ac6253-0be5-4636-b102-bf5af8956261
caps.latest.revision: "20"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5a6600237961b59e440a460263a8f4315b2c4773
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="mdn-messages"></a><span data-ttu-id="8097a-102">Messages MDN</span><span class="sxs-lookup"><span data-stu-id="8097a-102">MDN Messages</span></span>
<span data-ttu-id="8097a-103">Le MDN (Message Disposition Notification) est l'accusé de réception envoyé en réponse à un message AS2.</span><span class="sxs-lookup"><span data-stu-id="8097a-103">The Message Disposition Notification (MDN) is the acknowledgment sent in response to an AS2 message.</span></span> <span data-ttu-id="8097a-104">Si un MDN est activé, la transmission AS2 n’est pas terminée tant que le MDN a été reçu et vérifié.</span><span class="sxs-lookup"><span data-stu-id="8097a-104">If an MDN is enabled, the AS2 transmission is not complete until the MDN has been received and verified.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="8097a-105">tente toujours de renvoyer un MDN pour indiquer l’état de traitement du message, même si une erreur s’est produite lors du traitement du message AS2.</span><span class="sxs-lookup"><span data-stu-id="8097a-105"> will always attempt to return an MDN to indicate the status of message processing, even if an error occurred in processing the AS2 message.</span></span>  
  
 <span data-ttu-id="8097a-106">Le MDN vérifie les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="8097a-106">The MDN provides verification of the following:</span></span>  
  
-   <span data-ttu-id="8097a-107">**Que le message d’origine a été correctement reçu par le destinataire**.</span><span class="sxs-lookup"><span data-stu-id="8097a-107">**That the original message was successfully received by the receiving party**.</span></span> <span data-ttu-id="8097a-108">L'expéditeur du message d'origine vérifie ceci en comparant l'ID du message initialement envoyé au champ original-message-id inclus par le récepteur dans le MDN.</span><span class="sxs-lookup"><span data-stu-id="8097a-108">The sender of the original message verifies this by comparing the MessageID of the original sent message with the original-message-id field that the receiver included in the MDN.</span></span>  
  
-   <span data-ttu-id="8097a-109">**Que l’intégrité des données échangées a été vérifiée par le partenaire destinataire**.</span><span class="sxs-lookup"><span data-stu-id="8097a-109">**That the integrity of the data exchanged was verified by the receiving partner**.</span></span> <span data-ttu-id="8097a-110">L'expéditeur du message d'origine s'en assure en comparant le MIC calculé à partir de la charge du message d'origine envoyé au MIC calculé par le récepteur sur la charge du message reçu et inclus dans le champ Received-content-MIC du MDN (s'il est signé).</span><span class="sxs-lookup"><span data-stu-id="8097a-110">The sender of the original message verifies this by comparing the MIC that was calculated from the original sent message payload, with the MIC that the receiver calculated on the received message payload and included in the Received-content-MIC field of the MDN (if signed).</span></span>  
  
-   <span data-ttu-id="8097a-111">**Qu’il existe une non-répudiation de réception**.</span><span class="sxs-lookup"><span data-stu-id="8097a-111">**That there is a non-repudiation of receipt**.</span></span> <span data-ttu-id="8097a-112">L'expéditeur s'en assure en comparant le MDN signé à la clé publique du partenaire destinataire et en vérifiant que la valeur de MIC renvoyée dans le MDN est identique au MIC de la charge du message d'origine conservé dans la base de données de non-répudiation.</span><span class="sxs-lookup"><span data-stu-id="8097a-112">The sender does this by verifying the signed MDN with the receiving partner's public key, and by verifying that the returned MIC value in the MDN is the same as the MIC for the original message payload stored in the non-repudiation database.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="8097a-113">Une MDN synchrone sert de réponse HTTP (par exemple : 200 OK).</span><span class="sxs-lookup"><span data-stu-id="8097a-113">A synchronous MDN serves as an HTTP Response, e.g., 200 OK.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="8097a-114">Pour plus d’informations sur le traitement côté réception de MDN, consultez [du traitement d’un MDN entrant](../core/processing-an-incoming-mdn.md).</span><span class="sxs-lookup"><span data-stu-id="8097a-114">For more information about receive-side processing of MDNs, see [Processing an Incoming MDN](../core/processing-an-incoming-mdn.md).</span></span> <span data-ttu-id="8097a-115">Pour plus d’informations sur le traitement côté envoi de MDN, consultez [envoyer un MDN sortant](../core/sending-an-outgoing-mdn.md).</span><span class="sxs-lookup"><span data-stu-id="8097a-115">For more information about send-side processing of MDNs, see [Sending an Outgoing MDN](../core/sending-an-outgoing-mdn.md).</span></span>  
  
## <a name="properties-used-to-generate-the-mdn"></a><span data-ttu-id="8097a-116">Propriétés utilisées pour générer le MDN</span><span class="sxs-lookup"><span data-stu-id="8097a-116">Properties Used to Generate the MDN</span></span>  
 <span data-ttu-id="8097a-117">Le AS2Receive de réception pipeline génère un MDN à l’aide des propriétés de l’accord AS2 d’un tiers si les **utiliser les paramètres de l’accord pour validation et MDN au lieu de l’en-tête de message** propriété est sélectionnée sous l’onglet d’accord unidirectionnel dans la  **Propriétés de l’accord** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="8097a-117">The AS2Receive receive pipeline will generate an MDN using a party's AS2 agreement properties if the **Use agreement settings for validation and MDN instead of message header** property is selected on the one-way agreement tab in the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="8097a-118">Dans ce cas, la propriété AS2-From de l'en-tête du message sert à générer le MDN, mais les autres propriétés sont extraites des paramètres de l'accord AS2 du tiers.</span><span class="sxs-lookup"><span data-stu-id="8097a-118">In this instance, the AS2-From property in the message header will be used in generating the MDN, but other properties will be taken from the party's AS2 agreement settings.</span></span>  
  
 <span data-ttu-id="8097a-119">Si l'option de remplacement de la propriété AS2 n'est pas sélectionnée, ou que l'accord AS2 du tiers est disponible, le pipeline de réception génère le MDN à l'aide des balises d'en-tête AS2 dans le message entrant.</span><span class="sxs-lookup"><span data-stu-id="8097a-119">If the option to override AS2 property is not selected, or the party’s AS2 agreement is available, the receive pipeline will generate the MDN using the AS2 header tags in the incoming message.</span></span>  
  
 <span data-ttu-id="8097a-120">Un MDN peut être signé, mais il ne peut être ni chiffré ni compressé.</span><span class="sxs-lookup"><span data-stu-id="8097a-120">An MDN can be signed, but it cannot be encrypted or compressed.</span></span>  
  
## <a name="mdn-context-properties"></a><span data-ttu-id="8097a-121">Propriétés de contexte MDN</span><span class="sxs-lookup"><span data-stu-id="8097a-121">MDN Context Properties</span></span>  
 <span data-ttu-id="8097a-122">Les propriétés de contexte utilisées pour traiter les messages MDN incluent les propriétés qui peuvent être promues et celles qui ne sont pas exposées publiquement, mais peuvent être vues dans les messages suspendus et suivis.</span><span class="sxs-lookup"><span data-stu-id="8097a-122">Context properties used in processing MDN messages include properties that can be promoted as well as properties that are not publicly exposed, but can be viewed in suspended and tracked messages.</span></span> <span data-ttu-id="8097a-123">Pour obtenir la liste de ces propriétés de contexte, consultez [propriétés de contexte AS2](../core/as2-context-properties.md).</span><span class="sxs-lookup"><span data-stu-id="8097a-123">For a list of these context properties, see [AS2 Context Properties](../core/as2-context-properties.md).</span></span>  
  
 <span data-ttu-id="8097a-124">Les propriétés de contexte DispositionMode et DispositionType doivent toutes deux être promues pour qu'un MDN soit généré.</span><span class="sxs-lookup"><span data-stu-id="8097a-124">Both the DispositionMode and DispositionType context properties must be promoted in order for an MDN to be generated.</span></span> <span data-ttu-id="8097a-125">Si une erreur se produit dans la charge AS2 ou EDI, la propriété DispositionType indique une erreur.</span><span class="sxs-lookup"><span data-stu-id="8097a-125">If an error occurs in the AS2 or EDI payload, the DispositionType property will indicate the error.</span></span> <span data-ttu-id="8097a-126">Vous pouvez voir cette propriété dans le **détails du Message** boîte de dialogue qui s’affiche (via la boîte de dialogue Détails du Service) à partir des instances de service suspendu dans le **Hub du groupe** page de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Console d’administration.</span><span class="sxs-lookup"><span data-stu-id="8097a-126">You can see this property in the **Message Details** dialog box that is displayed (via the Service Details dialog box) from the Suspended service instances in the **Group Hub** page of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console.</span></span> <span data-ttu-id="8097a-127">Si une erreur se produit dans l'en-tête, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] signale l'erreur dans la propriété DispositionType et tente d'envoyer le MDN. Cependant, selon l'erreur, il peut ne pas y parvenir.</span><span class="sxs-lookup"><span data-stu-id="8097a-127">If an error occurs in the header, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will indicate the error in the DispositionType property, and will attempt to send the MDN, but depending on the error, may not be able to do so.</span></span>  
  
## <a name="mdn-headers"></a><span data-ttu-id="8097a-128">En-têtes MDN</span><span class="sxs-lookup"><span data-stu-id="8097a-128">MDN Headers</span></span>  
 <span data-ttu-id="8097a-129">Le MDN contient les en-têtes suivants :</span><span class="sxs-lookup"><span data-stu-id="8097a-129">The MDN contains the following headers:</span></span>  
  
-   <span data-ttu-id="8097a-130">**En-têtes HTTP/AS2**.</span><span class="sxs-lookup"><span data-stu-id="8097a-130">**HTTP/AS2 headers**.</span></span> <span data-ttu-id="8097a-131">Pour plus d’informations, consultez [les Messages AS2](../core/as2-messages.md).</span><span class="sxs-lookup"><span data-stu-id="8097a-131">For more information, see [AS2 Messages](../core/as2-messages.md).</span></span>  
  
-   <span data-ttu-id="8097a-132">**Transfert de couche**.</span><span class="sxs-lookup"><span data-stu-id="8097a-132">**Transfer Layer**.</span></span> <span data-ttu-id="8097a-133">Elle inclut l'en-tête Content-Type, qui inclut le message signé à parties multiples, l'algorithme du MIC, le protocole de formatage de la signature et les sous-en-têtes de limite de parties multiples les plus externes.</span><span class="sxs-lookup"><span data-stu-id="8097a-133">This includes the Content-Type header that includes the signed multipart message, the algorithm for the MIC, the signature formatting protocol, and the outermost multipart boundary sub-headers.</span></span>  
  
-   <span data-ttu-id="8097a-134">**Première partie**.</span><span class="sxs-lookup"><span data-stu-id="8097a-134">**First Part**.</span></span> <span data-ttu-id="8097a-135">La première partie d'un message signé à parties multiples est le MDN incorporé.</span><span class="sxs-lookup"><span data-stu-id="8097a-135">The first part of the multipart signed message is the embedded MDN.</span></span> <span data-ttu-id="8097a-136">Elle est lisible par l'homme.</span><span class="sxs-lookup"><span data-stu-id="8097a-136">It is human readable.</span></span>  
  
-   <span data-ttu-id="8097a-137">**Deuxième partie**.</span><span class="sxs-lookup"><span data-stu-id="8097a-137">**Second Part**.</span></span> <span data-ttu-id="8097a-138">La deuxième partie d'un message signé à parties multiples contient la signature numérique, une référence au message d'origine, le type de disposition et l'état, ainsi que la valeur du MIC.</span><span class="sxs-lookup"><span data-stu-id="8097a-138">The second part of the multipart signed message contains the digital signature, a reference to the original message, the disposition type and status, and the MIC value.</span></span> <span data-ttu-id="8097a-139">Elle est lisible par une machine.</span><span class="sxs-lookup"><span data-stu-id="8097a-139">It is machine readable.</span></span>  
  
 <span data-ttu-id="8097a-140">Les en-têtes AS2-From et AS2-To et la propriété de contexte MessageID servent à corréler un MDN au message AS2 auquel il répond.</span><span class="sxs-lookup"><span data-stu-id="8097a-140">The AS2-From header, AS2-To header, and MessageID context property are used to correlate an MDN to the AS2 message that it is responding to.</span></span> <span data-ttu-id="8097a-141">L'en-tête Original-Message-ID d'un MDN provient de l'en-tête Message-ID du message AS2 auquel le MDN répond.</span><span class="sxs-lookup"><span data-stu-id="8097a-141">The Original-Message-ID header in an MDN comes from the Message-ID header of the AS2 message that the MDN is responding to.</span></span>  
  
## <a name="mic"></a><span data-ttu-id="8097a-142">MIC</span><span class="sxs-lookup"><span data-stu-id="8097a-142">MIC</span></span>  
 <span data-ttu-id="8097a-143">Le MIC (Message Integrity Check) permet de vérifier qu'un MDN est corrélé à la charge du message d'origine envoyé.</span><span class="sxs-lookup"><span data-stu-id="8097a-143">The Message Integrity Check (MIC) is used to verify that an MDN correlates to the original sent message payload.</span></span> <span data-ttu-id="8097a-144">Le Digest du MIC est inclus dans le champ d'extension Received-Content-MIC, dans la deuxième partie du message MDN signé à parties multiples.</span><span class="sxs-lookup"><span data-stu-id="8097a-144">The MIC digest is included in the Received-Content-MIC extension field in the second part of the multipart signed MDN message.</span></span>  
  
 <span data-ttu-id="8097a-145">Si un MDN est activé et qu'un pipeline d'envoi AS2 traite un message sortant, le pipeline calcule une valeur MICHashValue à partir de la charge du message.</span><span class="sxs-lookup"><span data-stu-id="8097a-145">If an MDN is enabled, when the AS2 send pipeline processes an outbound message, it computes a MICHashValue from the message payload.</span></span> <span data-ttu-id="8097a-146">Le pipeline d'envoi enregistre la valeur de hachage dans la table EdiInt_Mic de la base de données BizTalkMsgBoxDb.</span><span class="sxs-lookup"><span data-stu-id="8097a-146">The send pipeline saves the hash value in the EdiInt_Mic table of the BizTalkMsgBoxDb database.</span></span> <span data-ttu-id="8097a-147">Les messages AS2 sont soumis à un suivi dans cette table et identifiés de façon unique par les valeurs AS2From, AS2To et MessageID, ainsi que par la colonne MICHashValue les accompagnant.</span><span class="sxs-lookup"><span data-stu-id="8097a-147">AS2 messages are tracked in this table, identified uniquely by the AS2From, AS2To, and MessageID values, with an accompanying MICHashValue column.</span></span> <span data-ttu-id="8097a-148">Le récepteur du message calcule la valeur de hachage du MIC lorsqu'il traite la charge du message et il inclut cette valeur de hachage dans le MDN renvoyé.</span><span class="sxs-lookup"><span data-stu-id="8097a-148">The receiver of the message calculates the MIC hash value when it processes the message payload, and includes the hash value in the MDN that it returns.</span></span> <span data-ttu-id="8097a-149">L'expéditeur du message d'origine compare la valeur de hachage du MIC figurant dans le MDN qu'il reçoit à la valeur de hachage qu'il a enregistrée.</span><span class="sxs-lookup"><span data-stu-id="8097a-149">The sender of the original message will compare the MIC hash value in the MDN that it receives with the hash value that it saved.</span></span> <span data-ttu-id="8097a-150">Si ces valeurs correspondent, il supprime le MDN, ainsi que l'entrée dans le tableau EdiInt_Mic, et la transmission est terminée.</span><span class="sxs-lookup"><span data-stu-id="8097a-150">If they match, it disposes of the MDN, deletes the entry in the EdiInt_Mic table, and the transmission is complete.</span></span>  
  
 <span data-ttu-id="8097a-151">Le MIC est codé en Base64.</span><span class="sxs-lookup"><span data-stu-id="8097a-151">The MIC is base64 encoded.</span></span> <span data-ttu-id="8097a-152">L'algorithme appliqué au MIC peut être SHA1 ou MD5.</span><span class="sxs-lookup"><span data-stu-id="8097a-152">The algorithm to be applied for the MIC can be SHA1 or MD5.</span></span> <span data-ttu-id="8097a-153">Il est déterminé à partir de la **algorithme de signature** déroulante (activée si **exiger le MDN signé** propriété est activée) dans le **paramètres MDN de l’expéditeur** page de l’accord unidirectionnel onglet dans le **propriétés de l’accord** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="8097a-153">It is determined from the **Signing Algorithm** drop-down (enabled if **Request Signed MDN** property is checked) in the **Sender MDN Settings** page of the one-way agreement tab in the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="8097a-154">Il est également déterminé à partir de l'en-tête AS2 Signed-Receipt-MICalg du message d'origine.</span><span class="sxs-lookup"><span data-stu-id="8097a-154">It is also determined from the Signed-Receipt-MICalg AS2 header of the original message.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8097a-155">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8097a-155">See Also</span></span>  
 <span data-ttu-id="8097a-156">[Messages AS2](../core/as2-messages.md) </span><span class="sxs-lookup"><span data-stu-id="8097a-156">[AS2 Messages](../core/as2-messages.md) </span></span>  
 <span data-ttu-id="8097a-157">[Traitement d’un MDN entrant](../core/processing-an-incoming-mdn.md) </span><span class="sxs-lookup"><span data-stu-id="8097a-157">[Processing an Incoming MDN](../core/processing-an-incoming-mdn.md) </span></span>  
 [<span data-ttu-id="8097a-158">Envoi d’un MDN sortant</span><span class="sxs-lookup"><span data-stu-id="8097a-158">Sending an Outgoing MDN</span></span>](../core/sending-an-outgoing-mdn.md)