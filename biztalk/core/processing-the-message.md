---
title: Le traitement du Message | Documents Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- processing
- messages, pipelines
- routing, about routing
- adapters, about adapters
- routing, message types
- processing, messages
- messages, processing
- routing
- messages, routing
- pipelines, about pipelines
- message types
- messages, message types
- messages, adapters
ms.assetid: e6d1f969-20c9-41f6-85cb-46cf92656348
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 829fffc773bfc19100ad03448baf68b5846996f7
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="processing-the-message"></a><span data-ttu-id="a8463-102">Traitement du message</span><span class="sxs-lookup"><span data-stu-id="a8463-102">Processing the Message</span></span>
<span data-ttu-id="a8463-103">Tous les composants décrits jusqu'à présent jouent un rôle dans le traitement des messages lorsqu'ils passent dans BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a8463-103">All of the components described so far play a part in the processing of messages as they flow through BizTalk Server.</span></span> <span data-ttu-id="a8463-104">Cette section fournit des détails supplémentaires sur l'interaction fonctionnelle de ces composants, et notamment, sur la réception d'un message.</span><span class="sxs-lookup"><span data-stu-id="a8463-104">This section provides more detail about how these components interact functionally, beginning with receiving a message.</span></span> <span data-ttu-id="a8463-105">La figure suivante illustre la composition d'un port de réception et le flux d'un message dans le processus de réception.</span><span class="sxs-lookup"><span data-stu-id="a8463-105">The following figure shows the make-up of a receive port and the flow of a message through the receive process.</span></span>  
  
 <span data-ttu-id="a8463-106">Un *port de réception* se compose d'un ou de plusieurs emplacements de réception, et de plusieurs mappages, ou d'aucun.</span><span class="sxs-lookup"><span data-stu-id="a8463-106">A *receive port* consists of one or more receive locations and zero or more maps.</span></span> <span data-ttu-id="a8463-107">Les mappages sont des feuilles de styles XSLT (Extensible Stylesheet Language Transformations) qui servent à transformer les messages XML d'une structure ou d'un format dans un autre. Ils sont souvent utilisés dans le processus de réception pour normaliser les messages dans un format interne.</span><span class="sxs-lookup"><span data-stu-id="a8463-107">Maps are Extensible Stylesheet Language Transformations (XSLT) style sheets used to transform XML messages from one structure or format to another and are often used in the receive process to normalize messages into an internal format.</span></span> <span data-ttu-id="a8463-108">Les emplacements de réception contrôlent les points de terminaison qui reçoivent les messages.</span><span class="sxs-lookup"><span data-stu-id="a8463-108">Receive locations control the endpoints that receive the messages.</span></span> <span data-ttu-id="a8463-109">Un emplacement de réception se compose de la configuration du point de terminaison d'un adaptateur de réception et d'un pipeline de réception.</span><span class="sxs-lookup"><span data-stu-id="a8463-109">A receive location consists of the configuration of an endpoint for a receive adapter, and a receive pipeline.</span></span>  
  
 <span data-ttu-id="a8463-110">![Structure de port et le traitement de réception](../core/media/arch-message-processing.gif "arch_message_processing")</span><span class="sxs-lookup"><span data-stu-id="a8463-110">![Receive port structure and processing](../core/media/arch-message-processing.gif "arch_message_processing")</span></span>  
  
## <a name="the-role-of-the-adapter"></a><span data-ttu-id="a8463-111">Rôle de l'adaptateur</span><span class="sxs-lookup"><span data-stu-id="a8463-111">The Role of the Adapter</span></span>  
 <span data-ttu-id="a8463-112">L'adaptateur de réception lance le processus de réception des messages en lisant un flux de données et en créant un message.</span><span class="sxs-lookup"><span data-stu-id="a8463-112">The receive adapter initiates the process of receiving messages by reading a stream of data and creating a message.</span></span> <span data-ttu-id="a8463-113">Par exemple, l'adaptateur de fichier voit qu'un fichier a été placé dans son emplacement configuré et le lit dans un flux.</span><span class="sxs-lookup"><span data-stu-id="a8463-113">For example, the file adapter sees that a file has been placed in its configured location and reads that file in a stream.</span></span> <span data-ttu-id="a8463-114">L'adaptateur crée un message (une implémentation de l'interface Microsoft.BizTalk.Message.Interop.IBaseMessage), y ajoute une partie (une implémentation de l'interface Microsoft.BizTalk.Message.Interop.IBasePart) et fournit le flux de données en tant que contenu de la partie.</span><span class="sxs-lookup"><span data-stu-id="a8463-114">The adapter creates a message (an implementation of the Microsoft.BizTalk.Message.Interop.IBaseMessage interface), adds a part to it (an implementation of the Microsoft.BizTalk.Message.Interop.IBasePart interface), and provides the stream of data as the part content.</span></span>  
  
 <span data-ttu-id="a8463-115">En outre, l'adaptateur écrit et procède à des promotions au sein des propriétés de contexte de message associées à l'emplacement, au type de l'adaptateur et aux autres éléments qui lui sont liés.</span><span class="sxs-lookup"><span data-stu-id="a8463-115">In addition, the adapter writes and promotes into the message context properties related to the location, adapter type, and others related to the adapter.</span></span> <span data-ttu-id="a8463-116">Une fois le message et son contexte créés, l'adaptateur transmet le message au Gestionnaire des points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="a8463-116">After the message and its context have been created, the adapter passes the message to the Endpoint Manager.</span></span> <span data-ttu-id="a8463-117">Le message est ensuite traité via le pipeline de réception, lequel a été configuré pour l'emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="a8463-117">The message is then processed through the receive pipeline, which has been configured for the receive location.</span></span> <span data-ttu-id="a8463-118">Une fois que le message a été traité par le pipeline, un mappage peut être utilisé pour basculer le message dans le format désiré avant que le Gestionnaire des points de terminaison publie le message avec l'agent des messages.</span><span class="sxs-lookup"><span data-stu-id="a8463-118">After the message has been processed by the pipeline, a map may be used to transform the message into the format desired before the Endpoint Manager publishes the message with the Message Agent.</span></span>  
  
## <a name="the-role-of-the-pipeline"></a><span data-ttu-id="a8463-119">Rôle du pipeline</span><span class="sxs-lookup"><span data-stu-id="a8463-119">The Role of the Pipeline</span></span>  
 <span data-ttu-id="a8463-120">Si l'adaptateur crée le message initial, la majeure partie du traitement appliqué à un message reçu se produit dans le pipeline de réception.</span><span class="sxs-lookup"><span data-stu-id="a8463-120">While it is the adapter that creates the initial message, most of the processing that occurs on a received message happens in the receive pipeline.</span></span> <span data-ttu-id="a8463-121">Le traitement du pipeline porte sur le contenu et sur le contexte du message.</span><span class="sxs-lookup"><span data-stu-id="a8463-121">Pipeline processing deals with message content as well as message context.</span></span> <span data-ttu-id="a8463-122">Le contenu du message est généralement traité lors des étapes de décodage, de désassemblage et de validation, tandis que le contexte du message peut être géré à toutes les étapes.</span><span class="sxs-lookup"><span data-stu-id="a8463-122">Message content is generally handled in the decoding, disassembling, and validating stages, while message context can be handled in all stages.</span></span> <span data-ttu-id="a8463-123">Un pipeline n'agit cependant pas nécessairement sur le contenu ou sur le contexte.</span><span class="sxs-lookup"><span data-stu-id="a8463-123">A pipeline, however, does not necessarily act on either the content or the context.</span></span> <span data-ttu-id="a8463-124">Par exemple, le pipeline de transfert par défaut n'a aucun composant configuré et n'effectue aucun traitement sur le contenu ou le contexte du message.</span><span class="sxs-lookup"><span data-stu-id="a8463-124">For example, the default pass-through pipeline has no components configured and performs no processing on the message content or context.</span></span> <span data-ttu-id="a8463-125">Pour des raisons de simplicité, ce document s'intéresse plus particulièrement aux composants de désassemblage dans la mesure où ils ont généralement le plus d'incidence sur le routage des messages.</span><span class="sxs-lookup"><span data-stu-id="a8463-125">For simplicity, this document focuses on the disassembling components as they generally have the greatest impact on message routing.</span></span>  
  
 <span data-ttu-id="a8463-126">Le travail du *désassembleur* est de traiter un message entrant provenant d'un adaptateur, de le désassembler en plusieurs messages, puis d'analyser les données des messages.</span><span class="sxs-lookup"><span data-stu-id="a8463-126">The job of the *disassembler* is to process an incoming message from an adapter and to disassemble it into many messages, and parse the message data.</span></span> <span data-ttu-id="a8463-127">Lorsqu'un message entrant comprend plusieurs petits messages, on parle d' *échange*.</span><span class="sxs-lookup"><span data-stu-id="a8463-127">When an incoming message has many smaller messages, this is known as an *interchange*.</span></span> <span data-ttu-id="a8463-128">Le désassembleur de fichier plat et le désassembleur XML gèrent les échanges en permettant à un développeur de configurer les informations relatives au contenu d'habillage (autrement dit un schéma d'en-tête et de code de fin pour le désassembleur de fichier plat, et un schéma d'enveloppe pour le désassembleur XML) et le contenu de corps (potentiellement extensible).</span><span class="sxs-lookup"><span data-stu-id="a8463-128">Both the flat file disassembler and the XML disassembler handle interchanges by enabling a developer to configure information about the wrapping content (that is, a header and trailing schema for the flat file disassembler and an envelope schema for the XML disassembler) and the (potentially repeating) body content.</span></span> <span data-ttu-id="a8463-129">Par ailleurs, ces deux désassembleurs analysent le message d'origine dans le contenu XML.</span><span class="sxs-lookup"><span data-stu-id="a8463-129">In addition, both of these disassemblers parse the original message into XML content.</span></span> <span data-ttu-id="a8463-130">Un désassembleur personnalisé n'analyse pas nécessairement le contenu en XML si aucun autre traitement XML dans BizTalk Server n'est requis.</span><span class="sxs-lookup"><span data-stu-id="a8463-130">A custom disassembler does not necessarily parse the content into XML if further XML processing in BizTalk Server is not required.</span></span> <span data-ttu-id="a8463-131">Un exemple de scénario peut inclure une situation de routage simple dans laquelle les messages entrant dans le système à un emplacement de réception donné sont envoyés à un port d'envoi spécifique sans aucun mappage ni autre traitement XML.</span><span class="sxs-lookup"><span data-stu-id="a8463-131">An example scenario might include a simple routing situation in which messages entering the system at a particular receive location are sent to a specific send port with no mapping or other XML-based processing.</span></span>  
  
## <a name="routing-with-the-message-type"></a><span data-ttu-id="a8463-132">Routage avec le type de message</span><span class="sxs-lookup"><span data-stu-id="a8463-132">Routing with the Message Type</span></span>  
 <span data-ttu-id="a8463-133">L'une des propriétés de message les plus fréquemment utilisées dans le routage est le type du message.</span><span class="sxs-lookup"><span data-stu-id="a8463-133">One of the most common message properties used in routing is the message type.</span></span> <span data-ttu-id="a8463-134">Lorsqu'un développeur crée un schéma pour définir la structure de messages, ce schéma définit le type de ces messages.</span><span class="sxs-lookup"><span data-stu-id="a8463-134">When a developer creates a schema to define the structure of messages, this schema defines the message type for that message.</span></span> <span data-ttu-id="a8463-135">Le type est déterminé par le nœud racine et l'espace de noms dans la définition de schéma.</span><span class="sxs-lookup"><span data-stu-id="a8463-135">The type is determined by the root node and namespace in the schema definition.</span></span> <span data-ttu-id="a8463-136">Par exemple, un document XML semblable au suivant aura le type de message http://tempuri.org/samples/MessageType#Message.</span><span class="sxs-lookup"><span data-stu-id="a8463-136">For example, an XML document that looks like the following would have a message type of http://tempuri.org/samples/MessageType#Message</span></span>  
  
```  
<Message xmlns=http://tempuri.org/samples/MessageType>  
<SomeOtherElement type="sample"/>  
</Message>  
```  
  
 <span data-ttu-id="a8463-137">Pour utiliser le type de message dans le routage, il doit être promu dans le contexte.</span><span class="sxs-lookup"><span data-stu-id="a8463-137">To use message type in routing, it must be promoted into the context.</span></span> <span data-ttu-id="a8463-138">Des désassembleurs sont utilisés pour promouvoir cette valeur dans le contexte de message et les composants du pipeline qui connaissent le mieux la structure du message.</span><span class="sxs-lookup"><span data-stu-id="a8463-138">Disassemblers are used to promote this value into the message context as well as the pipeline components with the most specific knowledge of message structure.</span></span> <span data-ttu-id="a8463-139">Les désassembleurs XML et de fichier plat promeuvent le type de message lorsqu'ils traitent les messages. Tout désassembleur personnalisé doit également promouvoir cette propriété pour garantir un routage approprié.</span><span class="sxs-lookup"><span data-stu-id="a8463-139">The XML and Flat File disassemblers promote the message type as they are processing messages, and any custom disassembler should also promote this property to ensure proper routing.</span></span>  
  
 <span data-ttu-id="a8463-140">Il est important de noter qu'un message peut être dépourvu de type.</span><span class="sxs-lookup"><span data-stu-id="a8463-140">It is important to note that a message is not required to have a type.</span></span> <span data-ttu-id="a8463-141">Comme nous l'avons indiqué précédemment, les parties d'un message peuvent être constituées de toute donnée binaire et n'ont pas besoin d'un schéma définissant leur structure.</span><span class="sxs-lookup"><span data-stu-id="a8463-141">As mentioned previously, the parts of a message can be any binary data and need not have a schema that defines their structure.</span></span> <span data-ttu-id="a8463-142">Ce type de partie de message est généralement transmis à BizTalk Server sans que ce dernier effectue beaucoup de traitement. En revanche, les composants de pipeline personnalisé, les adaptateurs ou le code appelé à partir d'orchestrations peuvent interagir avec ces parties.</span><span class="sxs-lookup"><span data-stu-id="a8463-142">This type of message part is generally passed through BizTalk Server without much, if any, processing done on it by BizTalk Server itself, though custom pipeline components, adapters, or code called from orchestrations may interact with these parts.</span></span>  
  
 <span data-ttu-id="a8463-143">Les composants de pipeline, comme les adaptateurs, écrivent et promeuvent également les propriétés dans le contexte de message.</span><span class="sxs-lookup"><span data-stu-id="a8463-143">Pipeline components, like adapters, also write and promote properties into the message context.</span></span> <span data-ttu-id="a8463-144">En fait, les composants de pipeline constituent le mécanisme le plus couramment utilisé par la plupart des développeurs pour obtenir des propriétés dans le contexte de message.</span><span class="sxs-lookup"><span data-stu-id="a8463-144">In fact, pipeline components are the most common mechanism most developers use to get properties into the message context.</span></span> <span data-ttu-id="a8463-145">Les développeurs créent des schémas et peuvent promouvoir des propriétés dans le schéma.</span><span class="sxs-lookup"><span data-stu-id="a8463-145">Developers create schemas and can promote properties in the schema.</span></span> <span data-ttu-id="a8463-146">Ces informations sont stockées dans le schéma sous forme d'annotations qui peuvent ensuite être utilisées par les composants de pipeline.</span><span class="sxs-lookup"><span data-stu-id="a8463-146">This information is stored in the schema as annotations which can then be used by pipeline components.</span></span> <span data-ttu-id="a8463-147">Tous les composants Désassembleur et Assembleur intégrés, Flatfile, XML et BizTalk Framework, utilisent le schéma de document pour extraire des informations sur les propriétés qui doivent être promues.</span><span class="sxs-lookup"><span data-stu-id="a8463-147">All of the built-in disassembler and assembler components - FlatFile, XML, and BizTalk Framework - use the document schema to retrieve information about the properties that are to be promoted.</span></span> <span data-ttu-id="a8463-148">En utilisant l'instruction de langage XML Path (XPath) des annotations, le désassembleur connaît l'emplacement des éléments à promouvoir dans le document.</span><span class="sxs-lookup"><span data-stu-id="a8463-148">Using the XML Path Language (XPath) statement from the annotations, the disassembler knows the location in the document of elements to be promoted.</span></span> <span data-ttu-id="a8463-149">Au cours du processus de diffusion en continu dans le document, le désassembleur trouve les éléments correspondant à l'une des instructions XPath, et promeut ou écrit la valeur dans le contexte correspondant.</span><span class="sxs-lookup"><span data-stu-id="a8463-149">During the process of streaming through the document, the disassembler finds those elements that match one of the XPath statements and promotes or writes the value into the context as appropriate.</span></span>  
  
 <span data-ttu-id="a8463-150">Des composants du pipeline personnalisé peuvent également être écrits pour gérer des propriétés d'obtention dans le contexte pour les données arbitraires d'un message reçu ou envoyé.</span><span class="sxs-lookup"><span data-stu-id="a8463-150">Custom pipeline components can also be written to handle getting properties into the context for arbitrary data in a received or sent message.</span></span> <span data-ttu-id="a8463-151">Pour promouvoir une propriété dans le contexte et pour qu'elle soit utile au routage, ce qui est probablement la raison de la promotion de la valeur, un schéma de propriété comportant une définition de propriété doit être créé et déployé sur BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a8463-151">In order to promote a property into the context and have it be useful for routing, which is presumably why the value is being promoted, a property schema with a definition for the property should be created and deployed to BizTalk Server.</span></span> <span data-ttu-id="a8463-152">Avant de définir le schéma de propriété qui sera utilisé par des composants personnalisés, vous devez comprendre les différents types de propriétés promues.</span><span class="sxs-lookup"><span data-stu-id="a8463-152">Before you define a property schema to be used by custom components, you should understand the different types of promoted properties.</span></span> <span data-ttu-id="a8463-153">Les propriétés promues définies dans un schéma de propriété peuvent être de l'un des deux types de base suivants :</span><span class="sxs-lookup"><span data-stu-id="a8463-153">Promoted properties defined in a property schema can have one of two base types:</span></span>  
  
-   <span data-ttu-id="a8463-154">[Microsoft.XLANGs.BaseTypes.MessageContextPropertyBase](http://msdn.microsoft.com/library/microsoft.xlangs.basetypes.messagecontextpropertybase.aspx) ou</span><span class="sxs-lookup"><span data-stu-id="a8463-154">[Microsoft.XLANGs.BaseTypes.MessageContextPropertyBase](http://msdn.microsoft.com/library/microsoft.xlangs.basetypes.messagecontextpropertybase.aspx) or</span></span>  
  
-   [<span data-ttu-id="a8463-155">Microsoft.XLANGs.BaseTypes.MessageDataPropertyBase</span><span class="sxs-lookup"><span data-stu-id="a8463-155">Microsoft.XLANGs.BaseTypes.MessageDataPropertyBase</span></span>](http://msdn.microsoft.com/library/microsoft.xlangs.basetypes.messagedatapropertybase.messagedatapropertybase.aspx)  
  
 <span data-ttu-id="a8463-156">Une propriété ayant le type de base MessageDataPropertyBase indique que la valeur de cette propriété provient du contenu du message.</span><span class="sxs-lookup"><span data-stu-id="a8463-156">A property with a base type of MessageDataPropertyBase indicates that the value for this property comes from the content of the message.</span></span> <span data-ttu-id="a8463-157">Il s'agit de la valeur par défaut des propriétés définies dans un schéma de propriété et la plus couramment utilisée.</span><span class="sxs-lookup"><span data-stu-id="a8463-157">This is the default value for properties defined in a property schema and is the most common usage.</span></span> <span data-ttu-id="a8463-158">MessageContextPropertyBase indique une propriété qui doit faire partie du contexte de message, mais qui ne provient pas nécessairement directement des données de message.</span><span class="sxs-lookup"><span data-stu-id="a8463-158">MessageContextPropertyBase indicates a property that is intended to be part of the message context but does not necessarily come from the message data directly.</span></span> <span data-ttu-id="a8463-159">Les propriétés dont le type de base est MessageContextPropertyBase sont souvent promues par des adaptateurs et des désassembleurs, et incluent des propriétés communes comme le type de message et le type d'adaptateur.</span><span class="sxs-lookup"><span data-stu-id="a8463-159">Properties with MessageContextPropertyBase as their base type are often promoted by adapters and disassemblers and include common properties such as message type and adapter type.</span></span>  
  
 <span data-ttu-id="a8463-160">Il est important de comprendre les différents types et de les utiliser correctement lors de la définition des propriétés.</span><span class="sxs-lookup"><span data-stu-id="a8463-160">It is important to understand the different types and use them appropriately when defining properties.</span></span> <span data-ttu-id="a8463-161">L'une des principales implications se produit en cas d'accès aux propriétés de contexte d'un message dans une orchestration.</span><span class="sxs-lookup"><span data-stu-id="a8463-161">One of the most significant implications occurs when accessing context properties for a message in an orchestration.</span></span> <span data-ttu-id="a8463-162">Si une propriété est identifiée comme un MessageDataPropertyBase, le Concepteur d'orchestration examine le schéma du message reçu et garantit qu'il définit une propriété promue correspondante.</span><span class="sxs-lookup"><span data-stu-id="a8463-162">If a property is identified as a MessageDataPropertyBase, the Orchestration Designer examines the schema of the message being received and ensures that it defines a matching promoted property.</span></span> <span data-ttu-id="a8463-163">Si aucune propriété n'est trouvée dans le schéma lié à la propriété promue accédée, le Concepteur ne vous autorise pas à y accéder.</span><span class="sxs-lookup"><span data-stu-id="a8463-163">If no property is found in the schema tied to the promoted property being accessed, then the Designer does not allow you to access it.</span></span> <span data-ttu-id="a8463-164">D'un autre côté, si la propriété est définie en tant que MessageContextPropertyBase, le type de message importe peu et la propriété est accessible.</span><span class="sxs-lookup"><span data-stu-id="a8463-164">On the other hand, if the property is defined as being a MessageContextPropertyBase, the message type does not matter and the property can be accessed.</span></span>  
  
 <span data-ttu-id="a8463-165">Dans les pipelines personnalisés, le mécanisme permettant de promouvoir ou d'écrire des propriétés est très similaire.</span><span class="sxs-lookup"><span data-stu-id="a8463-165">In custom pipelines, the mechanism for promoting or writing properties to the context is very similar.</span></span> <span data-ttu-id="a8463-166">Pour écrire des propriétés, vous utilisez un appel à la méthode IBaseMessageContext Write pour mettre la valeur dans le contexte.</span><span class="sxs-lookup"><span data-stu-id="a8463-166">For writing properties, you use a call to the IBaseMessageContext Write method to place the value in the context.</span></span> <span data-ttu-id="a8463-167">Pour les propriétés promues, vous utilisez la méthode IBaseMessageContext Promote à la place.</span><span class="sxs-lookup"><span data-stu-id="a8463-167">For promoted properties, you simply use the IBaseMessageContext Promote method instead.</span></span> <span data-ttu-id="a8463-168">Chacune de ces méthodes prend un nom de propriété, un espace de noms et une valeur.</span><span class="sxs-lookup"><span data-stu-id="a8463-168">Each of these methods takes a property name, a namespace, and value.</span></span> <span data-ttu-id="a8463-169">Pour les propriétés promues, le nom et l'espace de noms sont ceux de la propriété définie dans le schéma de propriété. Elles sont pour la plupart facilement accessibles en référençant l'assembly du schéma de propriété et en utilisant les propriétés sur la classe créée pour la propriété.</span><span class="sxs-lookup"><span data-stu-id="a8463-169">For the promoted properties, the name and namespace are those of the property defined in the property schema and are most easily accessed by referencing the property schema assembly and using the properties on the class created for the property.</span></span> <span data-ttu-id="a8463-170">Les champs distinctifs utilisent un espace de noms commun, http://schemas.microsoft.com/BizTalk/2003/btsDistinguishedFields. L'expression XPath utilisée pour extraire la valeur sert généralement de nom.</span><span class="sxs-lookup"><span data-stu-id="a8463-170">Distinguished fields use a common namespace, http://schemas.microsoft.com/BizTalk/2003/btsDistinguishedFields, and the XPath expression used to retrieve the value is usually used as the name.</span></span>  
  
 <span data-ttu-id="a8463-171">Le code suivant montre un exemple de promotion et d'écriture des propriétés dans le contexte.</span><span class="sxs-lookup"><span data-stu-id="a8463-171">The code below shows an example of both promoting and writing properties into the context.</span></span> <span data-ttu-id="a8463-172">Notez que dans cet exemple un champ distinctif est écrit dans le contexte.</span><span class="sxs-lookup"><span data-stu-id="a8463-172">Note that in this example, a distinguished field is being written into the context.</span></span> <span data-ttu-id="a8463-173">Ceci n'est utile que pour les orchestrations dans lesquelles le schéma de message identifie le champ distinctif pour que le Concepteur d'orchestration connaisse l'existence de ce champ.</span><span class="sxs-lookup"><span data-stu-id="a8463-173">This is only useful for orchestrations in which the message schema identifies the distinguished field so that the Orchestration Designer knows about the field.</span></span> <span data-ttu-id="a8463-174">Il peut être utile d'écrire des propriétés dans le contexte pour en permettre l'utilisation par d'autres composants de pipeline côté réception ou envoi.</span><span class="sxs-lookup"><span data-stu-id="a8463-174">It may be useful to write properties into the context for use by other pipeline components on the receiving or sending side.</span></span>  
  
```  
//create an instance of the property to be promoted  
SOAP.MethodName methodName = new SOAP.MethodName();  
  
//call the promote method on the context using the property class for name   
//and namespace  
pInMsg.Context.Promote(methodName.Name.Name, methodName.Name.Namespace,   
"theSOAPMethodName");  
  
//write a distinguished field to the context  
pInMsg.Context.Write("theDistinguishedProperty",   
"http://schemas.microsoft.com/BizTalk/2003/btsDistinguishedFields",   
"theDistinguishedValue");  
```  
  
 <span data-ttu-id="a8463-175">Gardez les points suivants à l'esprit lorsque vous écrivez ou promouvez des valeurs dans le contexte :</span><span class="sxs-lookup"><span data-stu-id="a8463-175">Keep the following facts in mind when writing or promoting values into the context:</span></span>  
  
-   <span data-ttu-id="a8463-176">L'écriture d'une valeur dans le contexte avec le même nom et espace de noms que ceux qui ont été précédemment utilisés pour promouvoir la propriété rend caduque la promotion de cette propriété.</span><span class="sxs-lookup"><span data-stu-id="a8463-176">Writing a value into the context with the same name and namespace that were used previously to promote the property causes that property to no longer be promoted.</span></span> <span data-ttu-id="a8463-177">L'écriture remplace essentiellement la promotion.</span><span class="sxs-lookup"><span data-stu-id="a8463-177">The write essentially overwrites the promotion.</span></span>  
  
-   <span data-ttu-id="a8463-178">L'écriture d'une valeur null dans le contexte supprime cette valeur car les propriétés ayant cette valeur ne sont pas autorisées.</span><span class="sxs-lookup"><span data-stu-id="a8463-178">Writing a value of null into the context deletes the value, because null-valued properties are not permitted.</span></span>  
  
-   <span data-ttu-id="a8463-179">Les propriétés promues sont limitées à 256 caractères alors que les propriétés écrites n'ont aucune limitation de longueur.</span><span class="sxs-lookup"><span data-stu-id="a8463-179">Promoted properties are limited to 256 characters in length while written properties have no length limitation.</span></span>  
  
 <span data-ttu-id="a8463-180">Les propriétés promues sont utilisées dans le routage des messages et sont limitées en taille pour des raisons d'efficacité des tâches de comparaison et de stockage.</span><span class="sxs-lookup"><span data-stu-id="a8463-180">Promoted properties are used in message routing and are limited in size for reasons of efficiency in comparison and storage.</span></span> <span data-ttu-id="a8463-181">Si les propriétés écrites n'ont aucune limite de taille, l'utilisation de valeurs excessivement grandes dans le contexte a un impact sur les performances car ces valeurs doivent quand même être traitées et transmises avec le message.</span><span class="sxs-lookup"><span data-stu-id="a8463-181">While written properties have no hard limits on size, using excessively large values in the context will have an impact on performance, because those values must still be processed and passed with the message.</span></span>  
  
 <span data-ttu-id="a8463-182">Lorsqu'un message est prêt à être envoyé à partir de BizTalk Server, il subit un processus complémentaire dans le port d'envoi.</span><span class="sxs-lookup"><span data-stu-id="a8463-182">When a message is ready to be sent from BizTalk Server, it undergoes a complementary process in the send port.</span></span> <span data-ttu-id="a8463-183">Des mappages sont appliqués aux messages avant l'exécution du pipeline d'envoi, permettant ainsi à un message d'être converti dans le format d'une application cliente ou spécifique avant d'être traité par le pipeline et envoyé via l'adaptateur.</span><span class="sxs-lookup"><span data-stu-id="a8463-183">Maps are applied to messages before the send pipeline is executed, allowing a message to be transformed to a customer or application-specific format before being processed by the pipeline and sent through the adapter.</span></span> <span data-ttu-id="a8463-184">Dans le pipeline d'envoi, au lieu d'être promues dans le contexte de message, les propriétés sont rétrogradées du contexte dans le message.</span><span class="sxs-lookup"><span data-stu-id="a8463-184">In the send pipeline, instead of promoting properties into the message context, properties are demoted from the context into the message.</span></span>  
  
 <span data-ttu-id="a8463-185">![Port d’envoi et de processus du pipeline d’envoi](../core/media/arch-message-processing-2.gif "arch_message_processing-2")</span><span class="sxs-lookup"><span data-stu-id="a8463-185">![Send port, and send pipeline process](../core/media/arch-message-processing-2.gif "arch_message_processing-2")</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a8463-186">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a8463-186">See Also</span></span>  
 <span data-ttu-id="a8463-187">[Architecture d’exécution](../core/runtime-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="a8463-187">[Runtime Architecture](../core/runtime-architecture.md) </span></span>  
 [<span data-ttu-id="a8463-188">Comment BizTalk Server traite les Messages volumineux</span><span class="sxs-lookup"><span data-stu-id="a8463-188">How BizTalk Server Processes Large Messages</span></span>](../core/how-biztalk-server-processes-large-messages.md)