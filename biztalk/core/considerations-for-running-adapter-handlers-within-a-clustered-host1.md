---
title: "Considérations pour l’exécution des gestionnaires d’adaptateur au sein d’un cluster Host1 | Documents Microsoft"
ms.custom: 
ms.date: 2016-03-17
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- high availability
- receive adapters, clustering
- clustering, POP3 adapters
- FTP adapters, clustering
- clustering, receive adapters
- NLB system
- MSMQ send handler
- MSMQ receive handler
- clustering, FTP adapters
- handlers [adapters], best practices
- hosts, clustering
- MSMQ adapters
- clustering, MSMQ adapters
- adapters, best practices
- adapters, handlers
- POP3 adapters, clustering
- MSMQ adapters, clustering
- clustering
ms.assetid: ee66663c-4f4d-4515-9df1-aacf4fc72be4
caps.latest.revision: "27"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d1fc93db61cddae43023f5c25eec62ecebd46e69
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="considerations-for-running-adapter-handlers-within-a-clustered-host"></a><span data-ttu-id="8e4e1-102">Éléments à prendre en compte pour l'exécution des gestionnaires d'adaptateur au sein d'un hôte mis en cluster</span><span class="sxs-lookup"><span data-stu-id="8e4e1-102">Considerations for Running Adapter Handlers within a Clustered Host</span></span>
<span data-ttu-id="8e4e1-103">Prise en charge du cluster BizTalk hôte est disponible pour fournir une haute disponibilité pour les éléments suivants intégré d’adaptateurs BizTalk : l’adaptateur FTP, l’adaptateur SFTP, l’adaptateur MSMQ et l’adaptateur POP3.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-103">BizTalk host cluster support is available to provide high availability for the following integrated BizTalk adapters: the FTP adapter, the SFTP adapter, the MSMQ adapter, and the POP3 adapter.</span></span> <span data-ttu-id="8e4e1-104">Cette prise en charge garantit également une disponibilité élevée lors de l'exécution d'une seule instance d'un adaptateur en vue de respecter un ordre de livraison chronologique.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-104">Host cluster support is also provided so that there is high availability for running a single instance of an adapter for purposes of ordered delivery.</span></span>  
  
 <span data-ttu-id="8e4e1-105">Tous les gestionnaires d'adaptateur BizTalk peuvent être exécutés dans un hôte mis en cluster, mais cela ne présente d'intérêt que dans le cas ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-105">All of the BizTalk adapter handlers  can be run in a clustered host but there is no benefit derived for running adapter handlers in a clustered host except as described below.</span></span> <span data-ttu-id="8e4e1-106">Si vos exigences de traitement n’incluent pas tous les scénarios ci-dessous, vous devez exécuter pas les gestionnaires d’adaptateur dans un cluster hôte.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-106">If your processing requirements do not include any of the scenarios described below, then you should not run adapter handlers in a clustered host.</span></span>  
  
## <a name="running-the-ftp-or-sftp-adapter-receive-handler-within-a-clustered-biztalk-host"></a><span data-ttu-id="8e4e1-107">Exécution du gestionnaire de réception d'adaptateur FTP ou SFTP dans un hôte BizTalk en cluster</span><span class="sxs-lookup"><span data-stu-id="8e4e1-107">Running the FTP or SFTP adapter receive handler within a clustered BizTalk host</span></span>  
 <span data-ttu-id="8e4e1-108">Pour la plupart des adaptateurs intégrés BizTalk Server, la haute disponibilité est obtenue en créant plusieurs gestionnaires d'adaptateur exécutés dans des instances de l'hôte BizTalk sur différents serveurs [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] d'un groupe BizTalk.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-108">For most of the BizTalk Server integrated adapters, high availability can be achieved by creating multiple adapter handlers to run on BizTalk host instances on different [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] servers within a BizTalk group.</span></span> <span data-ttu-id="8e4e1-109">Cependant, les gestionnaires de réception d'adaptateur FTP ou SFTP ne doivent pas être configuré de façon à être exécutés simultanément dans plusieurs instances de l'hôte BizTalk.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-109">FTP or SFTP adapter receive handlers should not, however, be configured to run in multiple BizTalk host instances simultaneously.</span></span> <span data-ttu-id="8e4e1-110">Cette recommandation est faite parce que l'adaptateur de réception FTP ou SFTP  utilise le protocole FTP ou SFTP pour récupérer des fichiers à partir du système cible.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-110">This recommendation is made because the FTP or SFTP receive adapter uses the FTP or SFTP protocol to retrieve files from the target system.</span></span> <span data-ttu-id="8e4e1-111">Le protocole FTP ou SFTP ne verrouille pas les fichiers pour s'assurer que plusieurs copies du même fichier ne sont pas récupérées simultanément lors de l'exécution de plusieurs instances de l'adaptateur de réception FTP ou SFTP.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-111">The FTP or SFTP protocol does not lock files to ensure that multiple copies of the same file are not retrieved simultaneously when running multiple instances of the FTP or SFTP receive adapter.</span></span>  
  
 <span data-ttu-id="8e4e1-112">Pour assurer la haute disponibilité de l'adaptateur de réception FTP ou SFTP, vous devez configurer celui-ci afin qu'il s'exécute dans une instance de l'hôte BizTalk en cluster.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-112">To provide high availability for the FTP or SFTP receive adapter, you should configure the FTP or SFTP receive adapter to run in a BizTalk host instance that has been clustered.</span></span>  
  
## <a name="running-msmq-adapter-handlers-within-a-clustered-biztalk-host"></a><span data-ttu-id="8e4e1-113">Gestionnaires d’adaptateur MSMQ dans un hôte BizTalk en cluster en cours d’exécution</span><span class="sxs-lookup"><span data-stu-id="8e4e1-113">Running MSMQ adapter handlers within a clustered BizTalk host</span></span>  
 <span data-ttu-id="8e4e1-114">Pour garantir la haute disponibilité de l'adaptateur MSMQ ainsi qu'une cohérence transactionnelle pour les messages envoyés ou reçus via cet adaptateur, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="8e4e1-114">To ensure high availability for the MSMQ adapter and to ensure transactional consistency for messages sent or received by the MSMQ adapter, you should do the following:</span></span>  
  
1.  <span data-ttu-id="8e4e1-115">Configurez Message Queuing (MSMQ) en tant que ressource en cluster dans un groupe de clusters Windows sur votre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-115">Configure Message Queuing (MSMQ) as a clustered resource in a Windows cluster group on your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers.</span></span>  
  
2.  <span data-ttu-id="8e4e1-116">Ajoutez le service MSMQ en cluster à la liste de dépendances de ressource de l'hôte BizTalk mis en cluster.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-116">Add the clustered MSMQ service to the list of Resource dependencies for the clustered BizTalk host.</span></span> <span data-ttu-id="8e4e1-117">Cela garantit que l’hôte BizTalk en cluster démarre toujours le service MSMQ en cluster dans les scénarios de basculement.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-117">This ensures that the clustered BizTalk host always starts after the clustered MSMQ service in failover scenarios.</span></span>  
  
3.  <span data-ttu-id="8e4e1-118">Configurez les gestionnaires d'envoi et de réception de l'adaptateur MSMQ dans une instance d'hôte BizTalk préalablement définie en tant que ressource de cluster dans le même groupe de clusters que la ressource MSMQ en cluster.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-118">Configure the MSMQ adapter send and receive handlers in a BizTalk host instance that has been configured as a cluster resource in the same cluster group as the clustered MSMQ resource.</span></span>  
  
 <span data-ttu-id="8e4e1-119">Il est recommandé de suivre cette procédure pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="8e4e1-119">These steps are recommended for the following reasons:</span></span>  
  
 <span data-ttu-id="8e4e1-120">**Gestionnaire de réception de l’adaptateur MSMQ** – versions MSMQ antérieures à MSMQ 4.0 (Windows Server 2008) ne prennent pas en charge les lectures transactionnelles à distance ; les lectures transactionnelles locales seulement sont pris en charge.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-120">**MSMQ adapter receive handler** – MSMQ versions prior to MSMQ 4.0 (Windows Server 2008) do not support remote transactional reads; only local transactional reads are supported.</span></span> <span data-ttu-id="8e4e1-121">Dans ce cas, l’adaptateur MSMQ réception gestionnaire doit être exécuté dans une instance d’hôte local pour le service Message Queuing en cluster pour effectuer les lectures transactionnelles locales par l’adaptateur MSMQ.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-121">In this case, the MSMQ adapter receive handler must run in a host instance that is local to the clustered Message Queuing service to complete local transactional reads with the MSMQ adapter.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="8e4e1-122">Le gestionnaire de réception de l'adaptateur MSMQ nécessite qu'une instance locale qui ne fait pas partie d'un cluster du service Message Queuing soit exécutée sur l'ordinateur sur lequel l'instance de l'hôte de l'adaptateur de réception est exécutée.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-122">The MSMQ adapter receive handler requires that a local non-clustered instance of the Message Queuing service is running on the same computer that the receive handler host instance is running on.</span></span>  
  
 <span data-ttu-id="8e4e1-123">**Gestionnaire d’envoi MSMQ adaptateur** : afin de garantir la cohérence des envois transactionnels effectués par l’adaptateur MSMQ, la file d’attente sortante utilisée par le Gestionnaire d’envoi de l’adaptateur MSMQ doit être hautement disponible afin que si le service MSMQ pour la sortie en file d’attente échoue, il peut être reprise.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-123">**MSMQ adapter send handler** - To ensure the consistency of transactional sends made by the MSMQ adapter, the outgoing queue used by the MSMQ adapter send handler should be highly available so that if the MSMQ service for the outgoing queue fails it can be resumed.</span></span> <span data-ttu-id="8e4e1-124">Configuration d’un cluster Queuingresource de Message et les gestionnaires d’adaptateur MSMQ dans un groupe de clusters garantit que la file d’attente sortante utilisée par le Gestionnaire d’envoi de l’adaptateur MSMQ soient hautement disponible.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-124">Configuring a clustered Message Queuingresource and the MSMQ adapter handlers in a cluster group will ensure that the outgoing queue used by the MSMQ adapter send handler will be highly available.</span></span> <span data-ttu-id="8e4e1-125">Ainsi, les risques de perdre des messages en cas de défaillance du service Message Queuing se trouvent limités.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-125">This will mitigate the possibility of message loss in the event that the Message Queuing service fails.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8e4e1-126">Si l’emplacement de réception MSMQ est **uniquement** réception à partir de files d’attente MSMQ sur un serveur MSMQ distant, puis de la haute disponibilité peut être obtenue en exécutant MSMQ réception hôte sur plusieurs ordinateurs BizTalk dans le groupe BizTalk.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-126">If the MSMQ receive location is **only** receiving from MSMQ queues on a remote MSMQ server, then high availability can be achieved by running the MSMQ receive host on multiple BizTalk computers in the BizTalk group.</span></span>  <span data-ttu-id="8e4e1-127">Pour fournir une haute disponibilité pour MSMQ, vous devez vérifier que le serveur MSMQ distant à l’aide de clustering de basculement dans Windows.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-127">To provide high availability for MSMQ, you must ensure the remote MSMQ server is using failover clustering in Windows.</span></span>  <span data-ttu-id="8e4e1-128">Si vous utilisez des files d’attente transactionnelles, le serveur MSMQ distant doit être en cours d’exécution MSMQ 4.0 (Windows Server 2008) ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-128">If using transactional queues, the remote MSMQ server must be running MSMQ 4.0 (Windows Server 2008) or above.</span></span>  
  
## <a name="running-the-pop3-adapter-receive-handler-within-a-clustered-biztalk-host"></a><span data-ttu-id="8e4e1-129">Exécution du gestionnaire de réception de l'adaptateur POP3 dans un hôte BizTalk en cluster</span><span class="sxs-lookup"><span data-stu-id="8e4e1-129">Running the POP3 adapter receive handler within a clustered BizTalk host</span></span>  
 <span data-ttu-id="8e4e1-130">Il n'est pas nécessaire de configurer le gestionnaire de réception de l'adaptateur POP3 de façon qu'il puisse fonctionner sur plusieurs hôtes dans un hôte BizTalk en cluster, sauf si le serveur POP3 à partir duquel l'adaptateur lit les données permet plusieurs connexions simultanées à une même boîte aux lettres.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-130">The POP3 adapter receive handler does not need to be configured to run in a clustered BizTalk host unless the POP3 server that the adapter is reading from allows multiple concurrent connections to be made to the same mailbox.</span></span> <span data-ttu-id="8e4e1-131">Pour obtenir un adaptateur POP3 hautement disponible lorsque le serveur POP3 auquel il se connecte autorise ces connexions simultanées, il est recommandé de configurer un gestionnaire de réception pour l'adaptateur POP3 de façon à ce qu'il puisse être exécuté sur une instance d'hôte BizTalk mise en cluster.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-131">If the POP3 server that the POP3 adapter is connected to permits multiple concurrent connections to its mailboxes, then we recommend that you ensure high availability for the POP3 adapter by configuring a single POP3 adapter receive handler to run in a BizTalk host instance that has been clustered.</span></span> <span data-ttu-id="8e4e1-132">Cette recommandation s'explique par le fait que plusieurs copies du même courrier électronique ne doivent pas être récupérées de manière simultanée lorsque plusieurs instances de l'adaptateur de réception POP3 sont exécutées.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-132">This recommendation is made to ensure that multiple copies of the same e-mail message are not retrieved simultaneously when running multiple instances of the POP3 receive adapter.</span></span>  
  
## <a name="running-a-receive-adapter-that-supports-ordered-delivery-with-a-clustered-biztalk-host"></a><span data-ttu-id="8e4e1-133">Exécution d'un adaptateur de réception prenant en compte la livraison chronologique dans un hôte BizTalk mis en cluster</span><span class="sxs-lookup"><span data-stu-id="8e4e1-133">Running a receive adapter that supports ordered delivery with a clustered BizTalk host</span></span>  
 <span data-ttu-id="8e4e1-134">Les adaptateurs MSMQ et MQSeries intégrés offrent la possibilité de présenter les documents à [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] dans l'ordre dans lequel ils ont été reçus.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-134">The MSMQ and MQSeries integrated adapters provide the ability to submit documents to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in the order that they were received.</span></span> <span data-ttu-id="8e4e1-135">Une implémentation correcte de cette fonctionnalité exige qu'une seule instance de ces adaptateurs de réception soit exécutée à la fois.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-135">Correct implementation of this functionality requires that only a single instance of these receive adapters be running at any given time.</span></span> <span data-ttu-id="8e4e1-136">Pour assurer la haute disponibilité de l'instance unique de ces adaptateurs, vous devez les configurer afin qu'ils puissent être exécutés dans une instance de l'hôte BizTalk mis en cluster.</span><span class="sxs-lookup"><span data-stu-id="8e4e1-136">To provide high availability for a single instance of these adapters, they should be configured to run in a clustered BizTalk host instance.</span></span>