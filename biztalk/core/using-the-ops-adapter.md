---
title: "À l’aide de l’adaptateur Ops | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- IOpsAIC interface
- Ops adapters, configuring
- Ops adapters, IOpsAIC interface
- process management solution tutorial, Ops adapters
- Ops adapters, processing
ms.assetid: 331f3614-e00b-4587-b82b-3c7bc394f361
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d93436e727265c4b381cdff72c42b3a677d0a4dc
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="using-the-ops-adapter"></a><span data-ttu-id="e58af-102">À l’aide de l’adaptateur Ops</span><span class="sxs-lookup"><span data-stu-id="e58af-102">Using the Ops Adapter</span></span>
<span data-ttu-id="e58af-103">La solution de gestion des processus d'entreprise utilise l'adaptateur Ops pour gérer les rapports d'erreurs à partir de la nouvelle fonction de création de rapports d'erreurs.</span><span class="sxs-lookup"><span data-stu-id="e58af-103">The business process management solution uses the Ops adapter to handle error reports from the new error reporting feature.</span></span> <span data-ttu-id="e58af-104">La solution inclut un exemple de gestionnaire pour traiter les messages de l'adaptateur, bien que vous puissiez facilement écrire le vôtre et utiliser l'adaptateur dans les autres solutions.</span><span class="sxs-lookup"><span data-stu-id="e58af-104">The solution includes a sample handler to process messages from the adapter, although you can easily write your own and use the adapter in other solutions.</span></span> <span data-ttu-id="e58af-105">Pour plus d’informations sur la fonctionnalité de création de rapports d’erreurs, consultez [à l’aide d’Échec de routage des messages](../core/using-failed-message-routing.md).</span><span class="sxs-lookup"><span data-stu-id="e58af-105">For information about the error reporting feature, see [Using Failed Message Routing](../core/using-failed-message-routing.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e58af-106">Bien que la solution utilise l'adaptateur pour la création de rapports d'erreurs, son utilisation n'est pas limitée à la gestion des erreurs.</span><span class="sxs-lookup"><span data-stu-id="e58af-106">Although the solution uses the adapter for error reporting, its use is not limited to error handling.</span></span> <span data-ttu-id="e58af-107">Vous pouvez utiliser l'adaptateur dans diverses circonstances lorsque vous voulez exécuter une méthode d'objet spécifique en réponse à un message.</span><span class="sxs-lookup"><span data-stu-id="e58af-107">You can use the adapter in a variety of circumstances whenever you want to execute a specific object method in response to a message.</span></span>  
  
## <a name="how-the-ops-adapter-processes-error-reports"></a><span data-ttu-id="e58af-108">Traitement des rapports d'erreurs par l'adaptateur Ops</span><span class="sxs-lookup"><span data-stu-id="e58af-108">How the Ops Adapter Processes Error Reports</span></span>  
 <span data-ttu-id="e58af-109">Dans la solution, les ports qui utilisent le rapport d’erreurs envoient les messages d’erreur pour le **BizTalkErrors-SP** port.</span><span class="sxs-lookup"><span data-stu-id="e58af-109">Ports in the solution that use error reporting ultimately send the error messages to the **BizTalkErrors-SP** port.</span></span> <span data-ttu-id="e58af-110">Le filtre sur le port vérifie l’existence de la **ErrorReport.ErrorType** propriété de contexte.</span><span class="sxs-lookup"><span data-stu-id="e58af-110">The filter on the port tests for the existence of the **ErrorReport.ErrorType** context property.</span></span> <span data-ttu-id="e58af-111">Seuls les messages de rapport d'erreurs ont cette propriété de contexte.</span><span class="sxs-lookup"><span data-stu-id="e58af-111">Only error report messages have this context property.</span></span>  
  
 <span data-ttu-id="e58af-112">Le **BizTalkErrors-SP** envoyer port s’exécute le message d’erreur via un pipeline qui utilise un composant Assembleur XML pour placer le message dans une enveloppe.</span><span class="sxs-lookup"><span data-stu-id="e58af-112">The **BizTalkErrors-SP** send port runs the error message through a pipeline that uses an XML assembler component to put the message in an envelope.</span></span> <span data-ttu-id="e58af-113">Le message passe ensuite à l'adaptateur Ops.</span><span class="sxs-lookup"><span data-stu-id="e58af-113">The message then goes to the Ops adapter.</span></span>  
  
 <span data-ttu-id="e58af-114">L'enveloppe, définie par le schéma ErrorEnvelope, est marquée pour accepter tout type de message.</span><span class="sxs-lookup"><span data-stu-id="e58af-114">The envelope, defined by the ErrorEnvelope schema, is marked to accept any type of message.</span></span> <span data-ttu-id="e58af-115">Toutefois, « tout » signifie tout type de message défini dans le groupe BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e58af-115">However, "any" means any message type defined in the BizTalk group.</span></span> <span data-ttu-id="e58af-116">Cela peut entraîner l'interruption des messages si la solution reçoit un message de type inconnu.</span><span class="sxs-lookup"><span data-stu-id="e58af-116">This can produce suspended messages if the solution receives a message of an unknown type.</span></span> <span data-ttu-id="e58af-117">Un tel message produirait une erreur et qu’il est acheminé vers le **BizTalkErrors-SP** port.</span><span class="sxs-lookup"><span data-stu-id="e58af-117">Such a message would produce an error and would be routed to the **BizTalkErrors-SP** port.</span></span> <span data-ttu-id="e58af-118">À son tour, le message génèrerait une erreur dans le composant Assembleur XML du pipeline car il ne serait pas d'un type connu.</span><span class="sxs-lookup"><span data-stu-id="e58af-118">In turn, the message would generate an error in the XML assembler component of the pipeline because it would not be a known message type.</span></span> <span data-ttu-id="e58af-119">L'erreur de pipeline interrompt le message.</span><span class="sxs-lookup"><span data-stu-id="e58af-119">The pipeline error suspends the message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e58af-120">Pour gérer les erreurs de routage en raison de types de messages inconnus, vous devez écrire un composant de pipeline personnalisé et utiliser le composant dans un pipeline personnalisé pour le **BizTalkErrors-SP** port.</span><span class="sxs-lookup"><span data-stu-id="e58af-120">To handle routing errors due to unknown message types, you must write a custom pipeline component and use the component in a custom pipeline for the **BizTalkErrors-SP** port.</span></span> <span data-ttu-id="e58af-121">Le composant personnalisé remplace le composant Assembleur XML.</span><span class="sxs-lookup"><span data-stu-id="e58af-121">The custom component replaces the XML assembler component.</span></span> <span data-ttu-id="e58af-122">Votre composant personnalisé doit placer le **/errorreport** propriétés dans l’en-tête de l’enveloppe et ajouter le message dans le corps de l’enveloppe.</span><span class="sxs-lookup"><span data-stu-id="e58af-122">Your custom component must put the **ErrorReport** properties in the envelope header and add the message to the body of the envelope.</span></span>  
  
 <span data-ttu-id="e58af-123">L'adaptateur Ops est un adaptateur d'envoi transactionnel unidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="e58af-123">The Ops adapter is a transactional, one-way send adapter.</span></span> <span data-ttu-id="e58af-124">Lorsque l'adaptateur traite un message, il commence par charger l'assembly spécifié, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="e58af-124">When the adapter processes a message, it first loads the specified assembly, if necessary.</span></span> <span data-ttu-id="e58af-125">L'adaptateur met des assemblys en mémoire pour éviter la surcharge liée au chargement de l'assembly à chaque appel.</span><span class="sxs-lookup"><span data-stu-id="e58af-125">The adapter caches assemblies in memory to avoid the overhead of loading the assembly for each call.</span></span> <span data-ttu-id="e58af-126">Il crée ensuite une instance de la classe spécifiée, puis utilise la réflexion pour obtenir l’objet dans l’assembly qui implémente le **IOpsAIC** interface.</span><span class="sxs-lookup"><span data-stu-id="e58af-126">It then creates an instance of the specified class, and then uses reflection to get the object in the assembly implementing the **IOpsAIC** interface.</span></span> <span data-ttu-id="e58af-127">Si tout ceci est réussie, l’adaptateur appelle la **initialiser** (méthode), puis appelle la **Execute** méthode, en passant le message de rapport d’erreur.</span><span class="sxs-lookup"><span data-stu-id="e58af-127">If all of this is successful, the adapter calls the **Initialize** method and then calls the **Execute** method, passing the error report message.</span></span>  
  
 <span data-ttu-id="e58af-128">S’il existe une erreur appelant **Execute**, l’adaptateur renvoie le message.</span><span class="sxs-lookup"><span data-stu-id="e58af-128">If there is an error calling **Execute**, the adapter resubmits the message.</span></span> <span data-ttu-id="e58af-129">Si la classe spécifiée n’implémente pas le **IOpsAIC** interface, ou la classe ou l’assembly est introuvable, l’adaptateur interrompt le message.</span><span class="sxs-lookup"><span data-stu-id="e58af-129">If the specified class does not implement the **IOpsAIC** interface, or the class or assembly can't be found, the adapter suspends the message.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="e58af-130">Comme l'adaptateur utilise la réflexion, l'assembly contenant la classe doit être dans le Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="e58af-130">Because the adapter uses reflection, the assembly containing the class must be in the Global Assembly Cache (GAC).</span></span>  
  
## <a name="the-iopsaic-interface"></a><span data-ttu-id="e58af-131">Interface IOpsAIC</span><span class="sxs-lookup"><span data-stu-id="e58af-131">The IOpsAIC Interface</span></span>  
 <span data-ttu-id="e58af-132">L’adaptateur requiert un objet qui implémente le **IOpsAIC** interface.</span><span class="sxs-lookup"><span data-stu-id="e58af-132">The adapter requires an object that implements the **IOpsAIC** interface.</span></span> <span data-ttu-id="e58af-133">L'interface apparaît comme suit :</span><span class="sxs-lookup"><span data-stu-id="e58af-133">The interface appears as follows:</span></span>  
  
```  
interface IOpsAIC  
{  
    void Initialize(string config);  
    void Execute(byte[] message);  
}  
```  
  
 <span data-ttu-id="e58af-134">L’adaptateur transmet le message d’origine en tant que tableau d’octets à la **Execute** (méthode).</span><span class="sxs-lookup"><span data-stu-id="e58af-134">The adapter passes the original message as a byte array to the **Execute** method.</span></span>  
  
## <a name="configuring-the-adapter"></a><span data-ttu-id="e58af-135">Configuration de l'adaptateur</span><span class="sxs-lookup"><span data-stu-id="e58af-135">Configuring the Adapter</span></span>  
 <span data-ttu-id="e58af-136">Vous configurez l'adaptateur comme vous le feriez pour n'importe quel autre adaptateur.</span><span class="sxs-lookup"><span data-stu-id="e58af-136">You configure the adapter just as you would any other adapter.</span></span> <span data-ttu-id="e58af-137">Le tableau suivant décrit ses propriétés de configuration :</span><span class="sxs-lookup"><span data-stu-id="e58af-137">The following table describes the adapter's configuration properties:</span></span>  
  
|<span data-ttu-id="e58af-138">Nom complet</span><span class="sxs-lookup"><span data-stu-id="e58af-138">Display Name</span></span>|<span data-ttu-id="e58af-139"> Description</span><span class="sxs-lookup"><span data-stu-id="e58af-139">Description</span></span>|  
|------------------|-----------------|  
|<span data-ttu-id="e58af-140">**Nom fort d’assembly .NET**</span><span class="sxs-lookup"><span data-stu-id="e58af-140">**.NET Assembly Strong Name**</span></span>|<span data-ttu-id="e58af-141">Le nom complet de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="e58af-141">The fully qualified name of the assembly.</span></span>|  
|<span data-ttu-id="e58af-142">**Classe OpsAIC**</span><span class="sxs-lookup"><span data-stu-id="e58af-142">**OpsAIC Class Name**</span></span>|<span data-ttu-id="e58af-143">Le nom de la classe dans l’assembly qui implémente le **IOpsAIC** interface.</span><span class="sxs-lookup"><span data-stu-id="e58af-143">The name of the class within the assembly that implements the **IOpsAIC** interface.</span></span>|  
|<span data-ttu-id="e58af-144">**Données d’initialisation**</span><span class="sxs-lookup"><span data-stu-id="e58af-144">**Initialization Data**</span></span>|<span data-ttu-id="e58af-145">Une chaîne passée en tant qu’argument à la **initialiser** méthode de la classe.</span><span class="sxs-lookup"><span data-stu-id="e58af-145">A string passed as an argument to the **Initialize** method of the class.</span></span>|  
  
 <span data-ttu-id="e58af-146">Notez que l'adaptateur requiert le nom complet de l'assembly.</span><span class="sxs-lookup"><span data-stu-id="e58af-146">Notice that the adapter requires the fully qualified name of the assembly.</span></span> <span data-ttu-id="e58af-147">Le nom complet est le nom donné à un assembly lorsque vous l'ajoutez au Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="e58af-147">The fully qualified name is the name given to an assembly when you add it to the GAC.</span></span> <span data-ttu-id="e58af-148">Le nom complet est une chaîne composée du nom de l'assembly, de sa version, de sa culture et d'un jeton de clé publique.</span><span class="sxs-lookup"><span data-stu-id="e58af-148">The fully qualified name is a string containing the assembly's name, version, culture, and public key token.</span></span> <span data-ttu-id="e58af-149">Vous pouvez voir les noms complets des assemblys à l'aide de l'outil GAC (gacutil.exe).</span><span class="sxs-lookup"><span data-stu-id="e58af-149">You can see the fully qualified names of assemblies by using the Global Assembly Cache Tool, gacutil.exe.</span></span>  
  
 <span data-ttu-id="e58af-150">Pour plus d'informations sur les noms complets des assemblys, consultez « Assembly Names » (en anglais) dans le Guide du développeur .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e58af-150">For more information about fully qualified assembly names, see "Assembly Names" in the .NET Framework Developer's Guide.</span></span> <span data-ttu-id="e58af-151">Pour plus d'informations sur gacutil.exe, consultez « Global Assembly Cache Tool (Gacutil.exe) » (en anglais) dans le Guide du développeur [!INCLUDE[btsDotNetFramework](../includes/btsdotnetframework-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e58af-151">For more information about gacutil.exe, see "Global Assembly Cache Tool (Gacutil.exe)" in the [!INCLUDE[btsDotNetFramework](../includes/btsdotnetframework-md.md)] Developer's Guide.</span></span>  
  
 <span data-ttu-id="e58af-152">Vous devez fournir l'espace de noms avec le nom de classe.</span><span class="sxs-lookup"><span data-stu-id="e58af-152">You must provide the namespace with the class name.</span></span> <span data-ttu-id="e58af-153">Par exemple, si la classe est **OpsHandler** dans les **OperationsHandler** espace de noms, vous devez attribuer le nom de classe en tant que **OperationsHandler.OpsHandler**.</span><span class="sxs-lookup"><span data-stu-id="e58af-153">For example, if the class is **OpsHandler** in the **OperationsHandler** namespace, you would give the class name as **OperationsHandler.OpsHandler**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e58af-154">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="e58af-154">See Also</span></span>  
 [<span data-ttu-id="e58af-155">L’adaptateur Ops</span><span class="sxs-lookup"><span data-stu-id="e58af-155">The Ops Adapter</span></span>](../core/the-ops-adapter.md)