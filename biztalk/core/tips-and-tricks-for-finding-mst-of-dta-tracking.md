---
title: "Trucs et astuces pour trouver le débit maximal acceptable du suivi DTA | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 7d72e4ac-d952-4cff-9a65-491e20945d40
caps.latest.revision: "8"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9faaaf7ebb47ac7ec18d8df6d8cb7c6ebd48d7f8
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="tips-and-tricks-for-finding-mst-of-dta-tracking"></a><span data-ttu-id="302fc-102">Conseils et astuces pour trouver le débit maximal acceptable du suivi DTA</span><span class="sxs-lookup"><span data-stu-id="302fc-102">Tips and Tricks for Finding MST of DTA Tracking</span></span>
<span data-ttu-id="302fc-103">Par définition, le débit maximal acceptable permet de reproduire des mesures de performances du système avec une charge constante.</span><span class="sxs-lookup"><span data-stu-id="302fc-103">By definition, MST is a benchmark to reproducibly measure system performance using a constant load.</span></span> <span data-ttu-id="302fc-104">La connaissance du débit maximal acceptable est particulièrement utile dans les situations suivantes :</span><span class="sxs-lookup"><span data-stu-id="302fc-104">Following are situations where knowing the MST is particularly useful.</span></span>  
  
1.  <span data-ttu-id="302fc-105">**Lorsque vous avez besoin de la latence la plus faible à partir du système**.</span><span class="sxs-lookup"><span data-stu-id="302fc-105">**When you require the lowest latency from the system**.</span></span> <span data-ttu-id="302fc-106">Le dépassement du débit maximal acceptable entraîne une accumulation des travaux dans le système, ce qui augmente la latence pour les messages.</span><span class="sxs-lookup"><span data-stu-id="302fc-106">Exceeding MST results in backlog in the system, which introduces increased latency for messages.</span></span> <span data-ttu-id="302fc-107">Même si cette accumulation n'est que temporaire, elle a un effet immédiat et négatif sur la latence.</span><span class="sxs-lookup"><span data-stu-id="302fc-107">Even if the backlog is only temporary, backlog has an immediate and deleterious effect on latency.</span></span> <span data-ttu-id="302fc-108">Par conséquent, connaître le débit maximal acceptable de vos systèmes vous indique le débit maximal que vous pouvez espérer atteindre avant que la latence de traitement des différents messages n'augmente dans des proportions considérables (par exemple, de quelques secondes à quelques minutes selon votre configuration).</span><span class="sxs-lookup"><span data-stu-id="302fc-108">So, knowing your systems MST will tell you the absolute maximum throughput you should expect to achieve before the latency of individual message processing increases dramatically (for example, from seconds to minutes depending on your configuration).</span></span>  
  
2.  <span data-ttu-id="302fc-109">**Lors de la comparaison avec d’autres systèmes**.</span><span class="sxs-lookup"><span data-stu-id="302fc-109">**When comparing to other systems**.</span></span> <span data-ttu-id="302fc-110">Par exemple, si vous souhaitez vérifier que vous atteignez le débit maximal acceptable attendu par rapport à un autre système (par exemple, le scénario de cette rubrique, une étude de cas ou un autre système de votre environnement); la mesure du débit maximal acceptable à l'aide d'une entrée constante offre un standard de comparaison reproductible et non ambigu.</span><span class="sxs-lookup"><span data-stu-id="302fc-110">For example, if you want to validate that you are achieving the expected MST compared to another system (for example, the scenario in this topic, a case study, or another system in your environment); measuring MST using a steady input offers a reproducible, unambiguous standard for comparison.</span></span>  
  
 <span data-ttu-id="302fc-111">Il est inutile de préciser que la mesure du débit maximal acceptable peut faire perdre beaucoup de temps.</span><span class="sxs-lookup"><span data-stu-id="302fc-111">Needless to say, however, it can be time consuming to measure MST.</span></span> <span data-ttu-id="302fc-112">Par conséquent, avant de vous lancer dans un exercice fastidieux de mesure, estimez-en bien les bénéfices potentiels au préalable.</span><span class="sxs-lookup"><span data-stu-id="302fc-112">Therefore, before you embark on a lengthy exercise to measure it, you should evaluate the benefits.</span></span> <span data-ttu-id="302fc-113">La plupart des systèmes de production ne connaissent pas des entrées constantes (comme dans un exercice de mesure du débit maximal acceptable) mais plutôt une variation de charge dans le temps.</span><span class="sxs-lookup"><span data-stu-id="302fc-113">Most production systems will not experience a steady input such as that measured by MST, but rather a load that changes over time.</span></span> <span data-ttu-id="302fc-114">C'est ce profil de charge qui doit en fin de compte être testé pour certifier un système avant de l'utiliser en production.</span><span class="sxs-lookup"><span data-stu-id="302fc-114">It is this load profile that must ultimately be tested to certify a system prior to production.</span></span> <span data-ttu-id="302fc-115">Heureusement, vous pouvez utiliser la même technique pour mesurer le débit maximal acceptable et pour évaluer la durabilité du profil de charge en production.</span><span class="sxs-lookup"><span data-stu-id="302fc-115">Fortunately, you can use the same technique that is used to measure MST to evaluate the sustainability of your production load profile.</span></span> <span data-ttu-id="302fc-116">Il suffit d'exécuter le profil de charge sur une durée suffisante pour pouvoir inclure une ou plusieurs fenêtres de conservation des données de la base de données BizTalkDTADb et observer les indicateurs de performances clés (KPI).</span><span class="sxs-lookup"><span data-stu-id="302fc-116">Simply run your load profile long enough to include one or more BizTalkDTADb database data retention windows and observe the key performance indicators (KPI).</span></span>  
  
 <span data-ttu-id="302fc-117">Il est important de lancer vos tests, qu'il s'agisse de la mesure du débit maximal acceptable ou des profils de charge, sur une base de données BizTalkDTADb vide.</span><span class="sxs-lookup"><span data-stu-id="302fc-117">It is important to start your test runs, whether MST or load profiles, with an empty BizTalkDTADb database.</span></span> <span data-ttu-id="302fc-118">Le temps est un facteur crucial pour les données qui sont stockées dans la base de données BizTalkDTADb et, si elles ne sont pas ré-acquises en partant de rien après chaque test, les résultats s'en trouveront faussés.</span><span class="sxs-lookup"><span data-stu-id="302fc-118">The data that is stored in the BizTalkDTADb database is time sensitive and if it is not re-acquired from scratch for each test run, it can skew your results.</span></span> <span data-ttu-id="302fc-119">Selon la fenêtre de conservation des données, le temps nécessaire pour obtenir le débit maximal acceptable peut varier considérablement.</span><span class="sxs-lookup"><span data-stu-id="302fc-119">Depending on your data retention window, this can significantly increase the time it takes to find MST.</span></span> <span data-ttu-id="302fc-120">Pour atténuer cet écart, l'ajustement de la charge « à la volée » en cours de test peut être utile pour amener plus rapidement à zéro le débit maximal acceptable.</span><span class="sxs-lookup"><span data-stu-id="302fc-120">To mitigate this, adjusting load "on the fly" during test runs can be useful in more quickly zeroing in on MST.</span></span>  
  
 <span data-ttu-id="302fc-121">Par exemple, si vous voyez que vous avez dépassé la durée de la première fenêtre de conservation des données et que les indicateurs de performances clés dénotent que vous avez encore de la marge pour augmenter le débit (par exemple, si le temps d'inactivité du disque est encore au-dessus de zéro), vous pouvez augmenter la charge de manière incrémentale et en mesurer les effets.</span><span class="sxs-lookup"><span data-stu-id="302fc-121">For example, if you find that you have passed your first retention window time and the KPIs indicate you have headroom for higher throughput left (for example, disk idle time is still above zero), you can incrementally increase your load and observe the effect.</span></span> <span data-ttu-id="302fc-122">Toutefois, après avoir affiné de cette manière le débit maximal acceptable, il est important d'effectuer un nouveau test en partant avec une base de données BizTalkDTADb vide afin de confirmer votre estimation.</span><span class="sxs-lookup"><span data-stu-id="302fc-122">After you have refined your MST estimate in this way, however, it is important that you perform a test run starting with an empty BizTalkDTADb database to validate your estimate.</span></span>  
  
## <a name="recommendations"></a><span data-ttu-id="302fc-123">Recommandations</span><span class="sxs-lookup"><span data-stu-id="302fc-123">Recommendations</span></span>  
 <span data-ttu-id="302fc-124">L'architecture du système de suivi de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] permet de suivre une grande variété d'informations et doit être géré et surveillé avec beaucoup de soin.</span><span class="sxs-lookup"><span data-stu-id="302fc-124">The tracking system architecture in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is capable of tracking a wide variety of information and must be managed and monitored carefully.</span></span> <span data-ttu-id="302fc-125">Les facteurs qui influent le plus sur les performances du système, comme indiqués par le débit maximal acceptable, sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="302fc-125">The factors that will most affect the performance of your system, as indicated by MST, are as follows:</span></span>  
  
-   <span data-ttu-id="302fc-126">Le débit souhaité pour le système.</span><span class="sxs-lookup"><span data-stu-id="302fc-126">The desired throughput for the system.</span></span>  
  
-   <span data-ttu-id="302fc-127">Les volume des informations suivies pour chaque message et instance de service du système.</span><span class="sxs-lookup"><span data-stu-id="302fc-127">The volume of information tracked for each message and service instance in the system.</span></span> <span data-ttu-id="302fc-128">Ce volume détermine la vitesse de croissance de la base de données BizTalkDTADb et, en dernier lieu, la fréquence à laquelle la base de données BizTalkDTADb doit être purgée pour éviter de passer au-delà.</span><span class="sxs-lookup"><span data-stu-id="302fc-128">This will determine how quickly the size of the BizTalkDTADb database increases, and ultimately how often the BizTalkDTADb database must be purged to avoid falling behind.</span></span>  
  
-   <span data-ttu-id="302fc-129">La durée de conservation des données dans la base BizTalkDTADb, en d'autres termes la fenêtre de conservation des données.</span><span class="sxs-lookup"><span data-stu-id="302fc-129">How long you wish to retain data in the BizTalkDTADb database, that is, the data retention window.</span></span> <span data-ttu-id="302fc-130">Plus la fenêtre est longue, plus la base de données BizTalkDTADb va grossir, ce qui affectera le débit.</span><span class="sxs-lookup"><span data-stu-id="302fc-130">The longer the window, the larger the BizTalkDTADb database will grow, affecting throughput.</span></span>  
  
-   <span data-ttu-id="302fc-131">Le fait que vous archiviez la base de données BizTalkDTADb avant de la purger, ou que vous la purgiez simplement afin de contenir sa taille.</span><span class="sxs-lookup"><span data-stu-id="302fc-131">Whether you archive BizTalkDTADb database data as well as purge, or just purge to maintain BizTalkDTADb database size.</span></span>  
  
 <span data-ttu-id="302fc-132">La procédure de recherche du débit maximal acceptable pour le suivi dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] fait intervenir trois indicateurs de performances clés :</span><span class="sxs-lookup"><span data-stu-id="302fc-132">The process of finding the maximum sustainable throughput for tracking in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] involves three key performance indicators:</span></span>  
  
-   <span data-ttu-id="302fc-133">Durée d'inactivité du disque physique pour le sous-système de disque du fichier de données DTAdb.</span><span class="sxs-lookup"><span data-stu-id="302fc-133">Physical Disk Idle Time for the DTAdb data file disk subsystem.</span></span>  
  
-   <span data-ttu-id="302fc-134">Profondeur de spool</span><span class="sxs-lookup"><span data-stu-id="302fc-134">Spool depth</span></span>  
  
-   <span data-ttu-id="302fc-135">Profondeur de la base BizTalkDTADbData</span><span class="sxs-lookup"><span data-stu-id="302fc-135">BizTalkDTADbData depth</span></span>  
  
 <span data-ttu-id="302fc-136">Pour trouver le débit maximal acceptable pour vos systèmes ou confirmer le débit de votre profil de production, surveillez ces indicateurs de performances clés en recherchant notamment :</span><span class="sxs-lookup"><span data-stu-id="302fc-136">Find either your systems’ MST or validate your production profile throughput by monitoring these three key performance indicators looking for:</span></span>  
  
-   <span data-ttu-id="302fc-137">Une profondeur de table trackingdata et de spool stable.</span><span class="sxs-lookup"><span data-stu-id="302fc-137">Stable spool and trackingdata table depth.</span></span>  
  
-   <span data-ttu-id="302fc-138">Une durée d'inactivité du disque physique pour le sous-système de disque du fichier de données BizTalkDTADb proche de, mais pas « bloquée à » zéro.</span><span class="sxs-lookup"><span data-stu-id="302fc-138">BizTalkDTADb database data file disk physical idle time near, but not continuously "pegged" at, zero.</span></span>  
  
 <span data-ttu-id="302fc-139">L'utilisation des fonctions de suivi DTA a un impact sur les performances.</span><span class="sxs-lookup"><span data-stu-id="302fc-139">Using the DTA tracking features has an associated performance impact.</span></span>  <span data-ttu-id="302fc-140">Le suivi par défaut peut suivre plus de paramètres que nécessaires une fois qu'une solution est en production, mais il facilite le développement, les tests initiaux et le débogage car les informations permettant de résoudre les problèmes sont plus nombreuses.</span><span class="sxs-lookup"><span data-stu-id="302fc-140">Default tracking may track more than is needed once a solution is in production, but can make development and initial testing and debugging easier by providing ample problem resolution information.</span></span> <span data-ttu-id="302fc-141">Nous recommandons par conséquent de conserver le suivi par défaut pendant toute la phase de développement et de test initiale.</span><span class="sxs-lookup"><span data-stu-id="302fc-141">Therefore, we recommend that default tracking be left on during development and initial testing.</span></span> <span data-ttu-id="302fc-142">Lorsque la solution déployée sur BizTalk est stable et prête à recevoir la certification de production, y compris les tests de performances, il est conseillé de vérifier soigneusement la quantité d'informations qui doivent être suivies en production, ainsi que la durée pendant laquelle elles devront être conservées dans la base de données BizTalkDTADb et de les définir en conséquence.</span><span class="sxs-lookup"><span data-stu-id="302fc-142">Once a solution deployed on BizTalk is stable and ready for production certification, including performance testing, it is recommended that you carefully examine the amount of information that needs to be tracked in production, and the length of time it needs to be kept in the BizTalkDTADb database and adjust accordingly.</span></span>  
  
 <span data-ttu-id="302fc-143">Par exemple, si les corps de message ne sont pas utiles pour la non-répudiation ou la résolution des problèmes, n'activez pas le suivi du corps des messages.</span><span class="sxs-lookup"><span data-stu-id="302fc-143">For example, if message bodies do not need to be tracked for either non-repudiation or problem resolution purposes, then do not turn on message body tracking.</span></span> <span data-ttu-id="302fc-144">Pour illustrer ce point, dans l’exemple de scénario décrit dans [des scénarios de Test pour la mesure de débit maximal acceptable de données des suivis DTA](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md), lorsque le corps du message suivi de composant de la configuration de suivi a été éliminé, le débit maximal acceptable a doublé pour atteindre 40 messages par seconde.</span><span class="sxs-lookup"><span data-stu-id="302fc-144">To illustrate this point, in the example scenario described in [Test Scenarios for Measuring MST of DTA Tracking](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md), when the message body tracking component of the tracking configuration was eliminated, the MST was doubled to 40 messages/second.</span></span>  
  
 <span data-ttu-id="302fc-145">Par ailleurs, gardez présent à l'esprit que même si des problèmes se produisent, dans la plupart des cas (mais pas systématiquement), les messages sont suspendus dans la base de données MessageBox et peuvent être récupérés et inspectés sans recourir aux corps de messages suivis.</span><span class="sxs-lookup"><span data-stu-id="302fc-145">Also, keep in mind that even when problems do occur, in many (but by no means all) cases, messages are suspended in the MessageBox database and can be retrieved and inspected without needing to track message bodies.</span></span>  
  
 <span data-ttu-id="302fc-146">Concentrez-vous sur la durabilité de la charge que vous imposez au système:</span><span class="sxs-lookup"><span data-stu-id="302fc-146">Focus on the sustainability of the load you place on the system:</span></span>  
  
-   <span data-ttu-id="302fc-147">Votre système est-il en mesure de supporter ce profil de charge en production de manière illimitée, même avec les activités de maintenance normales ?</span><span class="sxs-lookup"><span data-stu-id="302fc-147">Can your system sustain the production load profile indefinitely even with normal maintenance activities?</span></span>  
  
-   <span data-ttu-id="302fc-148">Que va-t-il se passer si un événement oblige le système à gérer une accumulation de travaux, par exemple une interruption, planifiée ou non, de la base de données BizTalkDTADb ?</span><span class="sxs-lookup"><span data-stu-id="302fc-148">What if something happens that causes the system to sustain a backlog, such as a planned or unplanned BizTalkDTADb database outage?</span></span>  
  
 <span data-ttu-id="302fc-149">Ce peut être une bonne idée de fixer des objectifs basés sur les pires scénarios possibles et de les tester.</span><span class="sxs-lookup"><span data-stu-id="302fc-149">It is a good idea to set goals based on worst case scenarios and test to those goals.</span></span> <span data-ttu-id="302fc-150">Par exemple, si vous savez qu'un cycle périodique de maintenance est planifié et qu'il nécessitera la déconnexion de la base de données BizTalkDTADb, émulez cette interruption lors d'une phase de test et évaluez la capacité du système à reprendre les opérations normales après l'accumulation de travaux résultante.</span><span class="sxs-lookup"><span data-stu-id="302fc-150">For example, if you know that there is a periodic planned maintenance cycle that will take the BizTalkDTADb database off line, emulate this outage during a test run to evaluate the ability of the system to recover from the resulting backlog.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="302fc-151">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="302fc-151">See Also</span></span>  
 <span data-ttu-id="302fc-152">[Mesurer le débit de suivi maximal acceptable](../core/measuring-maximum-sustainable-tracking-throughput.md) </span><span class="sxs-lookup"><span data-stu-id="302fc-152">[Measuring Maximum Sustainable Tracking Throughput](../core/measuring-maximum-sustainable-tracking-throughput.md) </span></span>  
 <span data-ttu-id="302fc-153">[Comprendre le comportement de performances de suivi DTA](../core/understanding-dta-tracking-performance-behavior.md) </span><span class="sxs-lookup"><span data-stu-id="302fc-153">[Understanding DTA Tracking Performance Behavior](../core/understanding-dta-tracking-performance-behavior.md) </span></span>  
 <span data-ttu-id="302fc-154">[Scénarios de test pour mesurer le débit maximal acceptable du suivi DTA](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="302fc-154">[Test Scenarios for Measuring MST of DTA Tracking](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md) </span></span>  
 [<span data-ttu-id="302fc-155">Instructions pour le dimensionnement de la base de données de suivi</span><span class="sxs-lookup"><span data-stu-id="302fc-155">Tracking Database Sizing Guidelines</span></span>](../core/tracking-database-sizing-guidelines.md)