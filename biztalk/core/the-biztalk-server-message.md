---
title: Le Message BizTalk Server | Documents Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- messages, properties
- messages, about messages
ms.assetid: 6048c191-b495-4fdc-b547-e3e322340a49
caps.latest.revision: "17"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b4fd150a0b93cac10c4d1f79a526846629c62e67
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="the-biztalk-server-message"></a><span data-ttu-id="eab1a-102">Messages BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="eab1a-102">The BizTalk Server Message</span></span>
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="eab1a-103"> est un moteur central de traitement des messages.</span><span class="sxs-lookup"><span data-stu-id="eab1a-103"> is, at its core, a message-handling engine.</span></span> <span data-ttu-id="eab1a-104">Pour comprendre les détails de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], il est important de comprendre ce que sont les messages et la façon dont ils sont représentés, stockés et traités par BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="eab1a-104">To understand the details of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], it is important to understand messages and how they are represented, stored, and processed by BizTalk Server.</span></span> <span data-ttu-id="eab1a-105">La manière dont BizTalk Server traite les messages vous sera plus claire une fois que vous aurez compris ce qu'est un message.</span><span class="sxs-lookup"><span data-stu-id="eab1a-105">The details of how BizTalk Server works with messages become easier to understand after you have gained an understanding of what a message is.</span></span>  
  
 <span data-ttu-id="eab1a-106">Dans BizTalk Server, chaque message est considéré comme comportant de zéro à plusieurs parties.</span><span class="sxs-lookup"><span data-stu-id="eab1a-106">Each message in BizTalk Server is considered a multi-part message and is made up of zero or more parts.</span></span> <span data-ttu-id="eab1a-107">Dans le cas des messages comportant au moins une partie, l'une de ces parties est identifiée comme le corps du message.</span><span class="sxs-lookup"><span data-stu-id="eab1a-107">Each message with one or more parts has one of these parts identified as the body part.</span></span> <span data-ttu-id="eab1a-108">Chaque partie se compose de blocs binaires de données qui peuvent représenter un document XML, un fichier plat, une classe .NET sérialisée ou tout autre flux binaire de données.</span><span class="sxs-lookup"><span data-stu-id="eab1a-108">Each part consists of a binary chunk of data which can represent an XML document, a flat file, a serialized .NET class, or other binary stream of data.</span></span> <span data-ttu-id="eab1a-109">Le corps du message sert à identifier le type du message pouvant être utilisé pour le routage.</span><span class="sxs-lookup"><span data-stu-id="eab1a-109">You use the body part of the message to identify the type of the message that can be used for routing.</span></span>  
  
 <span data-ttu-id="eab1a-110">Il est important de comprendre que dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], tous les messages sont immuables.</span><span class="sxs-lookup"><span data-stu-id="eab1a-110">A very important concept to understand is that all messages are immutable in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="eab1a-111">Cela signifie qu'une fois qu'un message est construit, il ne peut pas être modifié.</span><span class="sxs-lookup"><span data-stu-id="eab1a-111">This means that after a message is constructed, it cannot be changed.</span></span> <span data-ttu-id="eab1a-112">Un message est considéré comme construit une fois qu'il a été placé dans la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="eab1a-112">A message is considered constructed after it is placed into the MessageBox database.</span></span> <span data-ttu-id="eab1a-113">Si des modifications sont apportées au  message, un nouveau message doit être créé. C'est ce dernier qui est utilisé par la suite.</span><span class="sxs-lookup"><span data-stu-id="eab1a-113">Any changes to the message require that a new message is created and used from that point forward.</span></span> <span data-ttu-id="eab1a-114">Ceci est particulièrement évident dans le Concepteur d'orchestration. Les règles de compilation vous obligent à respecter des consignes de création de messages strictes. Si vous ne lez appliquez pas, vous ne pouvez pas utiliser le message. En outre, les règles vous interdisent de modifier un message en dehors de son bloc de construction.</span><span class="sxs-lookup"><span data-stu-id="eab1a-114">This is especially clear in the Orchestration Designer, where compilation rules force you to follow strict guidelines about constructing a message before using it, and do not allow the message to be altered outside of its construction block.</span></span> <span data-ttu-id="eab1a-115">Si vous modifiez un message, vous devez créer un bloc de construction qui crée un message du même type, copier le message d'origine dans le nouveau, puis apporter vos modifications dans le nouveau message avant de quitter le bloc de construction.</span><span class="sxs-lookup"><span data-stu-id="eab1a-115">If you need to change the message, you must create a new construction block that creates a message of the same type, copy the original message to the new message, and then make any changes to the new message before leaving the construction block.</span></span>  
  
## <a name="message-properties"></a><span data-ttu-id="eab1a-116">Propriétés du message</span><span class="sxs-lookup"><span data-stu-id="eab1a-116">Message Properties</span></span>  
 <span data-ttu-id="eab1a-117">Outre les parties qui composent un message, chaque message dans le système a un jeu de propriétés en même temps que ce qui est appelé le *contexte de message*.</span><span class="sxs-lookup"><span data-stu-id="eab1a-117">In addition to the parts that make up a message, each message in the system has a set of properties that go along with it in what is known as the *message context*.</span></span> <span data-ttu-id="eab1a-118">Ces propriétés peuvent être des valeurs extraites du message lui-même ou associées à celui-ci.</span><span class="sxs-lookup"><span data-stu-id="eab1a-118">These properties can be values extracted from or related to the message itself.</span></span> <span data-ttu-id="eab1a-119">Par exemple, les adaptateurs placent des propriétés dans le contexte associé à la réception du message. Il peut s'agir entre autres de l'emplacement de réception du message et le type d'adaptateur utilisé pour recevoir le message.</span><span class="sxs-lookup"><span data-stu-id="eab1a-119">For example, adapters put properties into the context related to the receiving of a message, such as the location at which the message was received, and the type of adapter that was used to receive the message.</span></span> <span data-ttu-id="eab1a-120">Propriétés peuvent être écrites dans le contexte, ou *promues* dans le contexte.</span><span class="sxs-lookup"><span data-stu-id="eab1a-120">Properties can either be written to the context, or *promoted* into the context.</span></span> <span data-ttu-id="eab1a-121">La différence entre ces deux options est que les propriétés promues peuvent être utilisées en tant que critères dans le routage de messages alors que les propriétés écrites ne le peuvent pas.</span><span class="sxs-lookup"><span data-stu-id="eab1a-121">The difference between these two options is that promoted properties can be used as criteria in message routing while written properties cannot.</span></span>  
  
 <span data-ttu-id="eab1a-122">Ce concept d'écriture ou de promotion des valeurs est quelque peu semblable au concept de promotion des propriétés dans l'Éditeur BizTalk.</span><span class="sxs-lookup"><span data-stu-id="eab1a-122">This concept of writing or promoting values to the context is related to, but not the same as, promoting properties in the BizTalk Editor.</span></span> <span data-ttu-id="eab1a-123">Dans ce dernier, un élément ou un attribut d'un schéma peut être marqué comme propriété promue ou champ distinctif.</span><span class="sxs-lookup"><span data-stu-id="eab1a-123">In the BizTalk Editor, an element or attribute in a schema can be flagged as a promoted property or a distinguished field.</span></span> <span data-ttu-id="eab1a-124">Les éléments marqués avec les annotations PropertyField dans votre schéma de message entraînent le placement d'une propriété promue dans le contexte par le désassembleur de pipeline.</span><span class="sxs-lookup"><span data-stu-id="eab1a-124">Items that are marked with PropertyField annotations in your message schema will lead to the pipeline disassembler putting a Promoted property in the context.</span></span> <span data-ttu-id="eab1a-125">Les éléments marqués avec les annotations DistinguishedField dans votre schéma de message entraînent le placement d'une propriété écrite dans le contexte par le désassembleur de pipeline.</span><span class="sxs-lookup"><span data-stu-id="eab1a-125">Items that are marked with DistinguishedField annotations in your message schema will lead to the pipeline disassembler putting a Written property into the context.</span></span>  
  
 <span data-ttu-id="eab1a-126">La conception pour les propriétés promues en main de la conception de *corrélation des messages*: la capacité de lier un message reçu à une instance d’orchestration en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="eab1a-126">The design for promoted properties started with the design of *message correlation*: the ability to relate a message being received to an already running orchestration instance.</span></span> <span data-ttu-id="eab1a-127">Dans le cas de la corrélation, il n'est pas nécessaire de définir une propriété ou un ensemble de propriétés qui fait la liaison entre les messages de l'orchestration.</span><span class="sxs-lookup"><span data-stu-id="eab1a-127">For correlation, there is a need to define a property or set of properties that provide the link between messages in the orchestration.</span></span> <span data-ttu-id="eab1a-128">Par exemple, dans un processus d'achat, vous devez mettre en corrélation des messages en fonction de l'ID de bon de commande (PurchaseOrderID).</span><span class="sxs-lookup"><span data-stu-id="eab1a-128">For example, in a purchasing process, you need to correlate messages based on the PurchaseOrderID.</span></span> <span data-ttu-id="eab1a-129">Cependant, dans de nombreux cas, le nom du champ ou de l'attribut figurant dans les messages ne correspond pas.</span><span class="sxs-lookup"><span data-stu-id="eab1a-129">However, in many business cases, the name of the particular field or attribute in the messages may not match.</span></span> <span data-ttu-id="eab1a-130">Un schéma de bon de commande peut comporter un élément nommé POId, alors qu'un schéma de facture peut comporter un élément nommé OrderID.</span><span class="sxs-lookup"><span data-stu-id="eab1a-130">A purchase order schema might have an element named POId, while the companion invoice schema may have an element named OrderID.</span></span> <span data-ttu-id="eab1a-131">Dans cette situation, le développeur doit pouvoir abstraire de la source d'une valeur le nom de la propriété à corréler pour corréler des messages en fonction d'une propriété nommée, telle que PurchaseOrderID.</span><span class="sxs-lookup"><span data-stu-id="eab1a-131">To correlate messages on a named property such as PurchaseOrderID in this situation, the developer must be able to abstract the name of the property to be correlated on from the source of the value.</span></span> <span data-ttu-id="eab1a-132">Les schémas de propriété prennent en charge cette abstraction.</span><span class="sxs-lookup"><span data-stu-id="eab1a-132">Property schemas support this abstraction.</span></span>  
  
 <span data-ttu-id="eab1a-133">A *schéma de propriété* vous permet de définir les propriétés promues dans un emplacement commun et demandez-lui de référencés par d’autres schémas.</span><span class="sxs-lookup"><span data-stu-id="eab1a-133">A *property schema* enables you to define promoted properties in a common location and have them referenced by other schemas.</span></span> <span data-ttu-id="eab1a-134">À l'instar d'autres schémas, un schéma de propriété comporte un espace de noms. Cependant, contrairement aux autres, il ne peut comporter que des éléments définis (à savoir des éléments qui ne sont ni des enregistrements ni des attributs).</span><span class="sxs-lookup"><span data-stu-id="eab1a-134">Like other schemas, a property schema has a namespace, but unlike other schemas, it can only have defined elements (that is, not records or attributes).</span></span> <span data-ttu-id="eab1a-135">Chaque élément défini dans le schéma de propriété possède un nom et un type.</span><span class="sxs-lookup"><span data-stu-id="eab1a-135">Each element that is defined in the property schema has a name and type.</span></span> <span data-ttu-id="eab1a-136">Comme il est possible que le schéma de propriété doive être référencé par plusieurs schémas et comme les informations contenues dans le schéma de propriété doivent être disponibles pour les composants lors de l'exécution, le schéma de propriété doit être déployé sur BizTalk Server, comme c'est le cas de tous les autres schémas.</span><span class="sxs-lookup"><span data-stu-id="eab1a-136">Because the property schema may need to be referenced by more than one schema, and because the information in the property schema must be available to components at runtime, the property schema must get deployed to BizTalk Server like all other schemas.</span></span> <span data-ttu-id="eab1a-137">Outre les étapes de déploiement de schéma habituelles, les informations relatives aux propriétés promues sont extraites et stockées dans la table bts_documentSpec de la base de données de gestion.</span><span class="sxs-lookup"><span data-stu-id="eab1a-137">In addition to the normal schema deployment steps, information about the promoted properties is extracted and stored in the bts_documentSpec table in the Management database.</span></span>  
  
 <span data-ttu-id="eab1a-138">Après avoir créé un schéma de propriété, les éléments et les attributs avec le même type (par exemple,</span><span class="sxs-lookup"><span data-stu-id="eab1a-138">After a property schema has been created, elements and attributes with the same type (for example.</span></span> <span data-ttu-id="eab1a-139">entier) peut être promu en tant qu’une des propriétés nommées dans le schéma de propriété.</span><span class="sxs-lookup"><span data-stu-id="eab1a-139">integer) can be promoted as one of the named properties in the property schema.</span></span>  
  
 <span data-ttu-id="eab1a-140">**Pour exécuter l’exemple de cas ci-dessus, un développeur effectue les étapes suivantes pour définir la propriété partagée nécessaire pour la corrélation.**</span><span class="sxs-lookup"><span data-stu-id="eab1a-140">**To complete the example case from above, a developer would perform the following steps to define the shared property needed for correlation.**</span></span>  
  
1.  <span data-ttu-id="eab1a-141">Créer un schéma de propriété et définir un élément de type xs:int nommé PurchaseOrderId.</span><span class="sxs-lookup"><span data-stu-id="eab1a-141">Create a property schema and define an element of type xs:int named PurchaseOrderId.</span></span>  
  
2.  <span data-ttu-id="eab1a-142">Créer un schéma PurchaseOrder et ajouter un élément ou un attribut de type xs:int nommé POId.</span><span class="sxs-lookup"><span data-stu-id="eab1a-142">Create a PurchaseOrder schema and add an element or attribute of type xs:int named POId.</span></span>  
  
3.  <span data-ttu-id="eab1a-143">À l'aide de la commande Afficher les promotions dans l'Éditeur BizTalk, le développeur ajoute le champ POId à la liste des propriétés promues et indique qu'il doit être promu en tant que propriété PurchaseOrderId définie dans le schéma de propriété en sélectionnant la propriété nommée PurchaseOrderId dans la liste.</span><span class="sxs-lookup"><span data-stu-id="eab1a-143">Using the show promotions command in the BizTalk Editor, the developer adds the POId field to the list of promoted properties and indicates that it should be promoted as the PurchaseOrderId property defined in the property schema by selecting the PurchaseOrderId named property from the list.</span></span>  
  
4.  <span data-ttu-id="eab1a-144">Créer un schéma Invoice et ajouter un élément ou un attribut de type xs:int nommé OrderId.</span><span class="sxs-lookup"><span data-stu-id="eab1a-144">Create an Invoice schema and add an element or attribute of type xs:int named OrderId.</span></span>  
  
5.  <span data-ttu-id="eab1a-145">À l'aide de la commande Afficher les promotions dans l'Éditeur BizTalk, le développeur ajoute le champ OrderId à la liste des propriétés promues et indique qu'elle doit être promue en tant que propriété PurchaseOrderId définie dans le schéma de propriété en sélectionnant la propriété nommée PurchaseOrderId dans la liste.</span><span class="sxs-lookup"><span data-stu-id="eab1a-145">Using the show promotions command in the BizTalk Editor, the developer adds the OrderId field to the list of promoted properties and indicates that it should be promoted as the PurchaseOrderId property defined in the property schema by selecting the PurchaseOrderId named property from the list.</span></span>  
  
 <span data-ttu-id="eab1a-146">Cette définition existant désormais dans les schémas de document, les composants de pipeline sont en mesure de promouvoir en tant que propriété nommée OrderId et POId afin qu'elles puissent être utilisées pour le routage et la corrélation.</span><span class="sxs-lookup"><span data-stu-id="eab1a-146">Now that this definition exists in the document schemas, pipeline components can properly promote OrderId and POId as the named property PurchaseOrderID so that it can be used for routing and correlation.</span></span> <span data-ttu-id="eab1a-147">Pour plus de détails sur ce processus de promotion, voir la rubrique « Traitement des messages » dans ce document.</span><span class="sxs-lookup"><span data-stu-id="eab1a-147">For more details on this promotion process, see the topic "Message Processing" in this document.</span></span>  
  
 <span data-ttu-id="eab1a-148">Un des avantages que présentent les propriétés promues est que la valeur de l'élément promu est disponible dans le contexte du message.</span><span class="sxs-lookup"><span data-stu-id="eab1a-148">One of the benefits of promoted properties is that the value of the element that is promoted is available in the context of the message.</span></span> <span data-ttu-id="eab1a-149">Cela signifie que l'extraction de cette valeur est peu coûteuse, car le message n'a pas à être chargé en mémoire pour qu'il fasse l'objet d'une instruction XPath.</span><span class="sxs-lookup"><span data-stu-id="eab1a-149">This means that retrieving that value is inexpensive, as it does not require loading the message into memory to execute an XPath statement on the message.</span></span> <span data-ttu-id="eab1a-150">En effet, l'instruction s'effectue par le biais d'un simple jeu de propriétés et d'une clé.</span><span class="sxs-lookup"><span data-stu-id="eab1a-150">Instead, a simple property bag can be used along with a key to get the value.</span></span> <span data-ttu-id="eab1a-151">Ce type de comportement est souhaitable dans des situations autres que le routage des messages et motive la création de champs distinctifs.</span><span class="sxs-lookup"><span data-stu-id="eab1a-151">This type of behavior is desirable in situations other than message routing and is the reason for creating distinguished fields.</span></span> <span data-ttu-id="eab1a-152">Lorsque des propriétés sont promues dans le contexte d'un message, des champs distinctifs sont écrits dans le contexte du message.</span><span class="sxs-lookup"><span data-stu-id="eab1a-152">While promoted properties are promoted into the message context, distinguished fields are written into the message context.</span></span> <span data-ttu-id="eab1a-153">Cependant, contrairement aux propriétés promues, il n'existe pas de schéma de propriété pour les champs distinctifs.</span><span class="sxs-lookup"><span data-stu-id="eab1a-153">Unlike promoted properties however, there is no property schema for distinguished fields.</span></span> <span data-ttu-id="eab1a-154">C'est pour cette raison que les champs distinctifs ne peuvent pas être utilisés pour le routage et, de ce fait, ne sont pas disponibles en tant que critères de filtre dans un port d'envoi ou une forme Réception d'une orchestration.</span><span class="sxs-lookup"><span data-stu-id="eab1a-154">This is why distinguished fields cannot be used for routing and are therefore not available as filter criteria in a send port or orchestration receive shape.</span></span> <span data-ttu-id="eab1a-155">En revanche, les champs distinctifs peuvent être utilisés dans des orchestrations pour lire ou écrire des valeurs provenant du contexte de message plutôt que charger le message en mémoire et y extraire la valeur.</span><span class="sxs-lookup"><span data-stu-id="eab1a-155">Distinguished fields can, however, be used in orchestrations to read or write values from the message context instead of having to load the message into memory and extract the value.</span></span>  
  
 <span data-ttu-id="eab1a-156">Les prédicats peuvent non seulement servir à promouvoir ou à écrire des propriétés dans le contexte de message, ils peuvent aussi être ajoutés au contexte.</span><span class="sxs-lookup"><span data-stu-id="eab1a-156">In addition to promoting or writing properties into the message context, message predicates can also be added to the context.</span></span> <span data-ttu-id="eab1a-157">Des prédicats de message sont utilisés comme mesure de sécurité dans BizTalk Server. Ils fournissent les informations contextuelles relatives au message. Ces informations doivent correspondre aux valeurs spécifiées pour tout hôte vers lequel le message doit être acheminé.</span><span class="sxs-lookup"><span data-stu-id="eab1a-157">Message predicates are used as a security measure in BizTalk Server and provide contextual information about the message, which must match values specified for any host that the message is to be routed to.</span></span> <span data-ttu-id="eab1a-158">Cette mesure de sécurité vous permet de configurer votre environnement BizTalk Server de sorte à autoriser des hôtes spécifiques pour qu'ils soient les seuls en mesure de recevoir et de traiter des messages donnés.</span><span class="sxs-lookup"><span data-stu-id="eab1a-158">This security measure allows you to configure your BizTalk Server environment in such a way as to allow specific hosts to be the only hosts that can receive and process particular messages.</span></span> <span data-ttu-id="eab1a-159">Par exemple, dans la console Administration de BizTalk Server, vous pouvez activer l'empreinte d'un certificat sur un hôte pour que celui-ci puisse chiffrer et déchiffrer des messages.</span><span class="sxs-lookup"><span data-stu-id="eab1a-159">As an example, in the BizTalk Server Administration Console, a host can be configured with the thumbprint of a certificate to use for message decoding and decryption.</span></span> <span data-ttu-id="eab1a-160">La configuration de cette propriété crée une propriété d'application pour l'hôte dans la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="eab1a-160">Configuring this property creates an application property for that host in the MessageBox.</span></span> <span data-ttu-id="eab1a-161">Les messages sécurisés reçus et déchiffrés avec cette empreinte sont ensuite acheminés uniquement vers les hôtes sur lesquels l'empreinte est configurée.</span><span class="sxs-lookup"><span data-stu-id="eab1a-161">Secure messages that are received and decrypted using this thumbprint are then only routed to the hosts with the thumbprint configured.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="eab1a-162">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="eab1a-162">See Also</span></span>  
 [<span data-ttu-id="eab1a-163">Architecture d’exécution</span><span class="sxs-lookup"><span data-stu-id="eab1a-163">Runtime Architecture</span></span>](../core/runtime-architecture.md)