---
title: "Le traitement d’un Message EDI sortant sur AS2 côté envoi | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: dfb63b22-6e2e-4d4f-b028-301c8d4d53b0
caps.latest.revision: "23"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b893f7a5732bf204764bf7377ee39a8e628f3747
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="send-side-processing-of-an-outgoing-edi-message-over-as2"></a><span data-ttu-id="e1a46-102">Traitement côté envoi d'un message EDI sortant sur AS2</span><span class="sxs-lookup"><span data-stu-id="e1a46-102">Send-Side Processing of an Outgoing EDI Message over AS2</span></span>
<span data-ttu-id="e1a46-103">Le traitement côté envoi d'un message EDI sur AS2 comprend l'envoi d'un message AS2 avec la charge EDI et la réception des accusés de réception MDN et EDI (si l'option est activée).</span><span class="sxs-lookup"><span data-stu-id="e1a46-103">Send-side processing of an EDI message over AS2 includes sending an AS2 message with the EDI payload and receiving MDN and EDI acknowledgments (if enabled).</span></span>  
  
 <span data-ttu-id="e1a46-104">Le pipeline d'envoi AS2EDISend envoie un message EDI/AS2 assemblé au partenaire commercial de réception sur HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="e1a46-104">The AS2EDISend send pipeline sends an assembled EDI/AS2 message to the receiving trading partner over HTTP/HTTPS.</span></span> <span data-ttu-id="e1a46-105">Le pipeline de réception AS2EDIReceive reçoit un MDN en réponse au message AS2 et un accusé de réception EDI en réponse au message EDI.</span><span class="sxs-lookup"><span data-stu-id="e1a46-105">The AS2EDIReceive receive pipeline receives an MDN returned in response to the AS2 message, and an EDI acknowledgment returned in response to the EDI message.</span></span> <span data-ttu-id="e1a46-106">Chaque pipeline traite un message AS2, ainsi que la charge EDI de ce message AS2.</span><span class="sxs-lookup"><span data-stu-id="e1a46-106">Each of these pipelines processes an AS2 message and processes the EDI payload within an AS2 message.</span></span> <span data-ttu-id="e1a46-107">Vous pouvez inclure ces pipelines dans un port d'envoi de sollicitation-réponse HTTP bidirectionnel, ou dans un port d'envoi HTTP unidirectionnel et un port de réception HTTP unidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="e1a46-107">You can include these pipelines in an HTTP two-way solicit response send port, or in a one-way HTTP send port and a one-way HTTP receive port.</span></span>  
  
 <span data-ttu-id="e1a46-108">Pour envoyer un échange EDI sur AS2, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="e1a46-108">To send an EDI interchange over AS2, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will perform the following steps:</span></span>  
  
-   <span data-ttu-id="e1a46-109">Traitement de la charge EDI pour l’envoi</span><span class="sxs-lookup"><span data-stu-id="e1a46-109">Processing the EDI payload for sending</span></span>  
  
-   <span data-ttu-id="e1a46-110">Envoi du message AS2</span><span class="sxs-lookup"><span data-stu-id="e1a46-110">Sending the AS2 message</span></span>  
  
-   <span data-ttu-id="e1a46-111">Réception du MDN renvoyé</span><span class="sxs-lookup"><span data-stu-id="e1a46-111">Receiving the returned MDN</span></span>  
  
-   <span data-ttu-id="e1a46-112">Réception de l'accusé de réception EDI renvoyé</span><span class="sxs-lookup"><span data-stu-id="e1a46-112">Receiving the returned EDI acknowledgment</span></span>  
  
## <a name="processing-the-edi-payload-for-sending"></a><span data-ttu-id="e1a46-113">Traitement de la charge EDI pour l'envoi</span><span class="sxs-lookup"><span data-stu-id="e1a46-113">Processing the EDI Payload for Sending</span></span>  
 <span data-ttu-id="e1a46-114">Avant la création d'un message AS2, le pipeline AS2EdiSend doit traiter l'échange EDI.</span><span class="sxs-lookup"><span data-stu-id="e1a46-114">Before creating an AS2 message, the AS2EdiSend pipeline must process the EDI interchange.</span></span> <span data-ttu-id="e1a46-115">Si le traitement par lot sortant est activé, les jeux de transactions seront traités par lot comme décrit dans [assembler un échange EDI par lot](../core/assembling-a-batched-edi-interchange.md).</span><span class="sxs-lookup"><span data-stu-id="e1a46-115">If outbound batching is enabled, transaction sets will be batched as described in [Assembling a Batched EDI Interchange](../core/assembling-a-batched-edi-interchange.md).</span></span> <span data-ttu-id="e1a46-116">L’assembleur EDI crée l’échange EDI comme décrit dans [EDI assembleur fonctionnement](../core/how-the-edi-assembler-works.md).</span><span class="sxs-lookup"><span data-stu-id="e1a46-116">The EDI Assembler will create the EDI interchange as described in [How the EDI Assembler Works](../core/how-the-edi-assembler-works.md).</span></span>  
  
## <a name="sending-the-as2-message"></a><span data-ttu-id="e1a46-117">Envoie le Message AS2</span><span class="sxs-lookup"><span data-stu-id="e1a46-117">Sending the AS2 Message</span></span>  
 <span data-ttu-id="e1a46-118">L'encodeur AS2 du pipeline d'envoi AS2 effectue la première résolution de l'accord afin d'en déterminer les propriétés à utiliser pour le traitement du message sortant.</span><span class="sxs-lookup"><span data-stu-id="e1a46-118">The AS2 Encoder in the AS2 send pipeline first performs agreement resolution to determine the agreement properties to be used to process the outgoing message.</span></span> <span data-ttu-id="e1a46-119">Pour plus d’informations, consultez [résolution de l’accord pour les Messages AS2 sortants](../core/agreement-resolution-for-outgoing-as2-messages.md).</span><span class="sxs-lookup"><span data-stu-id="e1a46-119">For more information, see [Agreement Resolution for Outgoing AS2 Messages](../core/agreement-resolution-for-outgoing-as2-messages.md).</span></span>  
  
 <span data-ttu-id="e1a46-120">L'encodeur AS2 crée l'ensemble des en-têtes HTTP nécessaires à l'envoi d'un message AS2 sortant.</span><span class="sxs-lookup"><span data-stu-id="e1a46-120">The AS2 Encoder builds the set of HTTP headers required to send an AS2 message.</span></span> <span data-ttu-id="e1a46-121">Il ajoute ces en-têtes à la propriété de contexte `HTTP.UserHttpHeaders` qui se compose d'une seule chaîne de valeurs d'en-tête.</span><span class="sxs-lookup"><span data-stu-id="e1a46-121">It adds these headers to the `HTTP.UserHttpHeaders` context property, which is a single string of header values.</span></span> <span data-ttu-id="e1a46-122">L'encodeur AS2 crée les en-têtes AS2 suivants dans `HTTP.UserHttpHeaders`.</span><span class="sxs-lookup"><span data-stu-id="e1a46-122">The AS2 Encoder builds the following AS2 headers in `HTTP.UserHttpHeaders`.</span></span> <span data-ttu-id="e1a46-123">Ces en-têtes doivent se trouver dans les messages AS2.</span><span class="sxs-lookup"><span data-stu-id="e1a46-123">These headers must be in the AS2 messages.</span></span>  
  
-   <span data-ttu-id="e1a46-124">AS2-To</span><span class="sxs-lookup"><span data-stu-id="e1a46-124">AS2-To</span></span>  
  
-   <span data-ttu-id="e1a46-125">AS2-From</span><span class="sxs-lookup"><span data-stu-id="e1a46-125">AS2-From</span></span>  
  
-   <span data-ttu-id="e1a46-126">AS2-Version</span><span class="sxs-lookup"><span data-stu-id="e1a46-126">AS2-Version</span></span>  
  
-   <span data-ttu-id="e1a46-127">MessageID</span><span class="sxs-lookup"><span data-stu-id="e1a46-127">MessageID</span></span>  
  
-   <span data-ttu-id="e1a46-128">OriginalMessageID (pour MDN uniquement)</span><span class="sxs-lookup"><span data-stu-id="e1a46-128">OriginalMessageID (for MDNs only)</span></span>  
  
 <span data-ttu-id="e1a46-129">Si le **exiger le MDN** propriété est activée, le pipeline définit les en-têtes Disposition-Notification-To, Receipt-Delivery-Option et Signed-Receipt-MICalg AS2 dans le message pour les valeurs dans les propriétés correspondantes ; et définit l’en-tête Signed-Receipt-Protocol AS2 pour « pcks7-signature » si le **exiger le MDN signé** propriété est activée.</span><span class="sxs-lookup"><span data-stu-id="e1a46-129">If the **Request MDN** property is checked, the pipeline will set the Disposition-Notification-To, Receipt-Delivery-Option, and Signed-Receipt-MICalg AS2 headers in the message to the values in the corresponding properties; and it will set the Signed-Receipt-Protocol AS2 header to "pcks7-signature" if the **Request signed MDN** property is checked.</span></span>  
  
 <span data-ttu-id="e1a46-130">Si la propriété de contexte `HTTP.UserHttpHeaders` n'existe pas, l'encodeur AS2 la crée.</span><span class="sxs-lookup"><span data-stu-id="e1a46-130">If the `HTTP.UserHttpHeaders` context property does not exist, the AS2 Encoder will create it.</span></span> <span data-ttu-id="e1a46-131">Si la propriété `HTTP.UserHttpHeaders` existe déjà, l'encodeur AS2 l'utilise au lieu de la créer.</span><span class="sxs-lookup"><span data-stu-id="e1a46-131">If `HTTP.UserHttpHeaders` already exists, the AS2 Encoder will use it, rather than creating it.</span></span> <span data-ttu-id="e1a46-132">Si vous créez la propriété `HTTP.UserHttpHeaders`, écrivez les en-têtes dans cette propriété, puis la propriété dans le contexte du message. L'encodeur AS2 utilise ces en-têtes qui sont prioritaires sur les en-têtes des autres sources.</span><span class="sxs-lookup"><span data-stu-id="e1a46-132">If you create `HTTP.UserHttpHeaders`, write headers to it, and then write it to the context of the message, the AS2 Encoder will use those headers, and they will take priority over headers from other sources.</span></span> <span data-ttu-id="e1a46-133">Il existe une exception : l'en-tête AS2-From est toujours extrait des propriétés de l'accord.</span><span class="sxs-lookup"><span data-stu-id="e1a46-133">The exception to that is the AS2-From header, which is always taken from the agreement properties.</span></span>  
  
 <span data-ttu-id="e1a46-134">Si un en-tête AS2 ne se trouve pas dans la propriété `HTTP.UserHttpHeaders`, l'encodeur AS2 l'extrait des propriétés de contexte unique pour l'ajouter.</span><span class="sxs-lookup"><span data-stu-id="e1a46-134">If an AS2 header is not in `HTTP.UserHttpHeaders`, the AS2 Encoder will add it from single context properties.</span></span> <span data-ttu-id="e1a46-135">Cela signifie que vous pouvez ajouter les en-têtes AS2 en en effectuant la promotion ou en les écrivant dans le contexte de message (s'ils ne figurent pas dans `HTTP.UserHttpHeaders`).</span><span class="sxs-lookup"><span data-stu-id="e1a46-135">This means that you can add AS2 headers by promoting or writing them to the context of the message (if they are not already in `HTTP.UserHttpHeaders`).</span></span> <span data-ttu-id="e1a46-136">Si un en-tête AS2 ne se trouve pas dans la propriété `HTTP.UserHttpHeaders` et qu'il ne figure pas non plus en tant que propriété dans le contexte, l'encodeur AS2 l'extrait des propriétés de contexte unique pour l'ajouter dans  `HTTP.UserHttpHeaders`.</span><span class="sxs-lookup"><span data-stu-id="e1a46-136">If an AS2 header is neither in `HTTP.UserHttpHeaders`, nor present as a property in the context, the AS2 Encoder will add it from agreement properties into `HTTP.UserHttpHeaders`.</span></span>  
  
 <span data-ttu-id="e1a46-137">Une fois que l'encodeur AS2 a créé les en-têtes dans la propriété `HTTP.UserHttpHeaders`, il l'écrit dans le contexte du message.</span><span class="sxs-lookup"><span data-stu-id="e1a46-137">After the AS2 Encoder builds the headers in the `HTTP.UserHttpHeaders` property, it writes it to the context of the message.</span></span> <span data-ttu-id="e1a46-138">L'adaptateur HTTP récupère `HTTP.UserHttpHeaders` et ajoute au début du message les valeurs d'en-tête issues de  `HTTP.UserHttpHeaders`.</span><span class="sxs-lookup"><span data-stu-id="e1a46-138">The HTTP Adapter picks up `HTTP.UserHttpHeaders`, and prepends the header values from `HTTP.UserHttpHeaders` into the message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e1a46-139">Le transport AS2 est prévu pour fonctionner uniquement avec l'adaptateur HTTP.</span><span class="sxs-lookup"><span data-stu-id="e1a46-139">AS2 transport is intended to work only with the HTTP adapter.</span></span> <span data-ttu-id="e1a46-140">Toutefois, si vous définissez manuellement les propriétés de contexte appropriées, vous pouvez utiliser l'adaptateur FILE pour transporter les messages AS2.</span><span class="sxs-lookup"><span data-stu-id="e1a46-140">However, if you manually set the appropriate context properties, you can use the FILE Adapter to transport AS2 messages.</span></span> <span data-ttu-id="e1a46-141">Pour plus d’informations, consultez [envoyer un Message AS2 via un Port d’envoi de fichier](../core/sending-an-as2-message-over-a-file-send-port.md).</span><span class="sxs-lookup"><span data-stu-id="e1a46-141">For more information, see [Sending an AS2 Message over a FILE Send Port](../core/sending-an-as2-message-over-a-file-send-port.md).</span></span>  
  
## <a name="processing-the-returned-mdn"></a><span data-ttu-id="e1a46-142">Traitement du MDN renvoyé</span><span class="sxs-lookup"><span data-stu-id="e1a46-142">Processing the Returned MDN</span></span>  
 <span data-ttu-id="e1a46-143">Si un MDN est activé, le pipeline de réception associé au port d'envoi bidirectionnel reçoit le MDN du tiers qui reçoit le message AS2.</span><span class="sxs-lookup"><span data-stu-id="e1a46-143">If an MDN is enabled, the receive pipeline associated with the two-way send port receives the MDN from the party that receives the AS2 message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e1a46-144">Pour plus d’informations sur le traitement qui effectuent des pipelines d’envoi AS2 sur les MDN entrants, consultez [envoyer un MDN sortant](../core/sending-an-outgoing-mdn.md).</span><span class="sxs-lookup"><span data-stu-id="e1a46-144">For more information about the processing that the AS2 send pipelines perform on incoming MDNs, see [Sending an Outgoing MDN](../core/sending-an-outgoing-mdn.md).</span></span>  
  
## <a name="processing-the-returned-edi-acknowledgment"></a><span data-ttu-id="e1a46-145">Traitement de l'accusé de réception EDI renvoyé</span><span class="sxs-lookup"><span data-stu-id="e1a46-145">Processing the Returned EDI Acknowledgment</span></span>  
 <span data-ttu-id="e1a46-146">Si un accusé de réception EDI est activé, le pipeline de réception associé au port d'envoi bidirectionnel reçoit également un accusé de réception EDI du destinataire du message EDI (car il effectue un filtre sur la base du type de message BizTalk EDI ACK).</span><span class="sxs-lookup"><span data-stu-id="e1a46-146">If an EDI acknowledgment is enabled, the receive pipeline associated with the two-way send port also receives an EDI acknowledgment from the receiver of the EDI message (because it filters on the BizTalk EDI ACK message type).</span></span> <span data-ttu-id="e1a46-147">Pour plus d’informations, consultez [du traitement d’un accusé de réception reçu](../core/processing-a-received-acknowledgment.md).</span><span class="sxs-lookup"><span data-stu-id="e1a46-147">For more information, see [Processing a Received Acknowledgment](../core/processing-a-received-acknowledgment.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e1a46-148">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="e1a46-148">See Also</span></span>  
 [<span data-ttu-id="e1a46-149">Envoi des Messages AS2 par BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="e1a46-149">How BizTalk Server Sends AS2 Messages</span></span>](../core/how-biztalk-server-sends-as2-messages.md)