---
title: "Mesurer le débit de suivi maximal acceptable | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 35605427-0217-4bdd-8b4a-3e68b3f5f452
caps.latest.revision: "20"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: af62a8c49f8ac5a36d3607696bef8e3173d7573e
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="measuring-maximum-sustainable-tracking-throughput"></a><span data-ttu-id="6fbc8-102">Mesure du débit de suivi maximal acceptable</span><span class="sxs-lookup"><span data-stu-id="6fbc8-102">Measuring Maximum Sustainable Tracking Throughput</span></span>
<span data-ttu-id="6fbc8-103">Après avoir déployé une solution sectorielle sur la plateforme [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], vous devez faire le suivi du système et l'analyser afin de comprendre ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="6fbc8-103">After you deploy a line of business solution onto the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] platform, you should track and monitor the system to understand the following:</span></span>  
  
-   <span data-ttu-id="6fbc8-104">performances du système ;</span><span class="sxs-lookup"><span data-stu-id="6fbc8-104">How the system is performing</span></span>  
  
-   <span data-ttu-id="6fbc8-105">exceptions et erreurs susceptibles de se produire et pourquoi ;</span><span class="sxs-lookup"><span data-stu-id="6fbc8-105">What exceptions and errors may be occurring and why</span></span>  
  
-   <span data-ttu-id="6fbc8-106">état actuel des processus d'entreprise implémentés en tant que solutions BizTalk.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-106">The current state of the business processes implemented as BizTalk solutions</span></span>  
  
 <span data-ttu-id="6fbc8-107">Pour de nombreuses organisations, il est également important d’enregistrer les messages bruts réels transitant via le système à des fins de non-répudiation.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-107">For many organizations, it is also important to record the actual raw messages flowing through the system for non-repudiation purposes.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="6fbc8-108">fournit deux types de fonctionnalités de suivi qui remplissent ces conditions :</span><span class="sxs-lookup"><span data-stu-id="6fbc8-108"> provides two types of tracking functionality that address these requirements:</span></span>  
  
-   <span data-ttu-id="6fbc8-109">**Suivi des données et activité (DTA) suivi**.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-109">**Data Tracking and Activity (DTA) tracking**.</span></span> <span data-ttu-id="6fbc8-110">DTA effectue le suivi de propriétés de message définies par l'utilisateur, d'événements de débogage d'orchestration, d'événements de flux de message et d'état de l'instance du service.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-110">DTA tracks a variety of user-defined message properties, orchestration debug events, message flow events, and service instance status.</span></span> <span data-ttu-id="6fbc8-111">Ce suivi permet d'interroger les données stockées dans la base de données des suivis DTA BizTalk (BizTalkDTADb).</span><span class="sxs-lookup"><span data-stu-id="6fbc8-111">You use tracking to query the data stored in the BizTalk DTA Tracking database (BizTalkDTADb).</span></span> <span data-ttu-id="6fbc8-112">Le suivi DTA inclut également le suivi de messages bruts, connus en tant que corps de message, pour la résolution des problèmes et à des fins de non-répudiation.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-112">DTA tracking also includes the tracking of raw messages, known as message bodies, for non-repudiation and problem resolution purposes.</span></span>  
  
-   <span data-ttu-id="6fbc8-113">**Le suivi de Business Activity Monitoring (BAM)**.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-113">**Business Activity Monitoring (BAM) tracking**.</span></span> <span data-ttu-id="6fbc8-114">BAM utilise un profil de suivi défini par l'utilisateur pour effectuer le suivi de l'état d'un processus d'entreprise dans un ensemble spécial de bases de données BAM.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-114">BAM uses a user-defined tracking profile to track the state of a business process into a special set of BAM databases.</span></span>  
  
 <span data-ttu-id="6fbc8-115">Dans cette rubrique, nous allons décrire l'architecture DTA et une approche systématique afin de déterminer le débit maximal acceptable qu'un système utilisant DTA peut soutenir indéfiniment.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-115">In this topic, we describe the DTA architecture and a systematic approach to determine the maximum sustainable throughput that a system employing DTA can sustain indefinitely.</span></span> <span data-ttu-id="6fbc8-116">Bien que DTA et BAM partagent certains composants architecturaux, cette rubrique décrit seulement le comportement de DTA.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-116">Although DTA and BAM share some architectural components, this topic covers the behavior of DTA only.</span></span> <span data-ttu-id="6fbc8-117">Pour plus d’informations sur l’architecture BAM, consultez [analyse BAM (Business Activity)](../core/business-activity-monitoring-bam.md).</span><span class="sxs-lookup"><span data-stu-id="6fbc8-117">For information about BAM architecture, see [Business Activity Monitoring (BAM)](../core/business-activity-monitoring-bam.md).</span></span>  
  
## <a name="overview-of-dta-tracking-architecture"></a><span data-ttu-id="6fbc8-118">Vue d'ensemble de l'architecture de suivi DTA</span><span class="sxs-lookup"><span data-stu-id="6fbc8-118">Overview of DTA Tracking Architecture</span></span>  
 <span data-ttu-id="6fbc8-119">Alors que des messages sont transférés sur le système, différents éléments suivis tels que des corps de message, des propriétés et des événements, traversent une série de processus et de bases de données dont le but ultime consiste à les écrire dans la base de données BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-119">As messages flow through the system, various tracked elements such as message bodies, properties, and events, pass through a series of processes and databases that ultimately result in writing them to the BizTalkDTADb database.</span></span> <span data-ttu-id="6fbc8-120">Une fois ces éléments consignés dans la base de données BizTalkDTADb, vous pouvez utiliser le suivi pour interroger les données suivies.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-120">After the elements are written to the BizTalkDTADb database, you can use tracking to query the tracked information.</span></span> <span data-ttu-id="6fbc8-121">Pour plus d’informations sur la configuration et à l’aide de la BizTalkDTADb de la base de données et le suivi des modifications, consultez [affichage de l’historique et les données de suivi](../core/viewing-historical-and-tracked-data.md).</span><span class="sxs-lookup"><span data-stu-id="6fbc8-121">For information about setting up and using the BizTalkDTADb database and tracking, see [Viewing Historical and Tracked Data](../core/viewing-historical-and-tracked-data.md).</span></span>  
  
 <span data-ttu-id="6fbc8-122">Pour garantir la viabilité du système et son fonctionnement indéfini à un débit de messages donné, le chemin emprunté par les éléments suivis pour accéder à la base de données BizTalkDTADb et la base de données elle-même doivent rester sains.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-122">To ensure that the system is sustainable and will run indefinitely at a given message flow rate, the pathway that tracked elements pass through on their way to the BizTalkDTADb database, and the database itself, need to remain healthy.</span></span> <span data-ttu-id="6fbc8-123">Par exemple, les messages accumulés dans les tables de base de données en chemin ou dans le DTA peuvent provoquer la croissance du fichier de base de données non lié qui ne serait pas acceptable si elle n'était pas gérée correctement.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-123">For example, messages building up in database tables along the way, or in the DTA, can cause unbounded database file growth that would not be sustainable if not properly managed.</span></span>  
  
 <span data-ttu-id="6fbc8-124">Commençons par comprendre l'architecture et les chemins de communication que les informations suivies traversent.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-124">So, let's start by understanding the architecture and pathways that tracked information flows through.</span></span> <span data-ttu-id="6fbc8-125">Ceci expose les ressources clés et les indicateurs de performance que vous devez analyser afin de déterminer dans quelle mesure le système de suivi suit le flux de messages qui traversent le moteur [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6fbc8-125">This will expose the key resources and performance indicators that you must monitor to determine how well the tracking system is keeping up with the message traffic flowing through the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] engine.</span></span>  
  
 <span data-ttu-id="6fbc8-126">La figure suivante présente l'architecture de suivi DTA et les chemins de communication.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-126">The following figure shows an overview of the DTA tracking architecture and pathways.</span></span>  
  
 <span data-ttu-id="6fbc8-127">![Vue d’ensemble du suivi DTA](../core/media/dtatrackingoverview.gif "DTATrackingOverview")</span><span class="sxs-lookup"><span data-stu-id="6fbc8-127">![DTA tracking overview](../core/media/dtatrackingoverview.gif "DTATrackingOverview")</span></span>  
  
 <span data-ttu-id="6fbc8-128">Si l'on prend les processus numérotés dans la figure dans l'ordre, tous les flux de données DTA entrent et sortent de la base de données BizTalkDTADb de la façon suivante :</span><span class="sxs-lookup"><span data-stu-id="6fbc8-128">Taking the numbered processes from the figure in order, all DTA tracked data flows into and out of the BizTalkDTADb database as follows:</span></span>  
  
1.  <span data-ttu-id="6fbc8-129">Le processus d'exécution de BizTalk Server intègre un composant appelé l'intercepteur,</span><span class="sxs-lookup"><span data-stu-id="6fbc8-129">The BizTalk Server runtime process includes a component called the interceptor.</span></span> <span data-ttu-id="6fbc8-130">dont la fonction consiste à mettre en cache les éléments suivis au moment de l'exécution et, lors du prochain aller-retour dans la base de données MessageBox (par exemple, pour la mise en file d'attente d'un message dans la base de données MessageBox), à transférer ces éléments mis en cache dans cette base de données.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-130">The interceptor’s job is to cache the tracked elements at runtime and, upon the next MessageBox database roundtrip (for example, en-queuing a message to the MessageBox database), forwards the cached elements to the MessageBox database.</span></span> <span data-ttu-id="6fbc8-131">L'intercepteur détermine les éléments à suivre en analysant la configuration de suivi (également appelée profil de suivi) qui est obtenue à partir de la base de données de gestion et mise en cache dans chaque instance d'exécution de l'hôte pour être utilisée par l'intercepteur.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-131">The interceptor determines what elements to track by looking at the tracking configuration (also known as a tracking profile) which is obtained from the management database and cached in each host runtime instance for use by the interceptor.</span></span>  
  
     <span data-ttu-id="6fbc8-132">Comme le montre la figure précédente, deux flux de données sont insérés dans la base de données MessageBox :</span><span class="sxs-lookup"><span data-stu-id="6fbc8-132">As shown in the above figure, there are two data streams inserted into the MessageBox database:</span></span>  
  
    -   <span data-ttu-id="6fbc8-133">l'un est représenté par la table Spool ;</span><span class="sxs-lookup"><span data-stu-id="6fbc8-133">One represented by the Spool table</span></span>  
  
    -   <span data-ttu-id="6fbc8-134">l'autre est représenté par la table TrackingData.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-134">One by the TrackingData table</span></span>  
  
     <span data-ttu-id="6fbc8-135">Les corps de message suivis utilisent les deux flux,</span><span class="sxs-lookup"><span data-stu-id="6fbc8-135">Tracked message bodies use both streams.</span></span> <span data-ttu-id="6fbc8-136">à savoir que les corps de message (semblables à des blobs de données) sont traités via un ensemble de tables représentées par la table Spool.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-136">That is, the message bodies themselves (think of them as blobs of data) are handled via a set of tables represented by the spool table.</span></span> <span data-ttu-id="6fbc8-137">Les événements de message associés aux corps de message (par exemple, les identificateurs de message, à quel moment les corps de message ont été suivis, à quelles instances les corps de message sont associés) sont gérés via la table TrackingData.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-137">The message events associated with the message bodies (for example, message identifiers, when the message bodies were tracked, what instances the message bodies are associated with) are handled via the TrackingData table.</span></span> <span data-ttu-id="6fbc8-138">Tous les éléments suivis, qui ne sont pas associés au suivi des corps de message, sont gérés uniquement via la table TrackingData.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-138">All tracked elements not associated with message body tracking are handled via the TrackingData table only.</span></span>  
  
2.  <span data-ttu-id="6fbc8-139">La base de données MessageBox n'est que la première étape des données suivies ; elle est utilisée pour mettre en cache les données suivies de sorte que le composant d'exécution puisse continuer le traitement sans être directement bloqué par d'autres traitements des données de suivi.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-139">The MessageBox database is just the first stop for tracked data and is used to cache the tracked data so that the runtime can continue processing without being directly blocked by further tracking data processing.</span></span>  
  
     <span data-ttu-id="6fbc8-140">Pour que les corps de message suivis (blobs) soient transférés à la base de données BizTalkDTADb afin que vous puissiez les afficher et les archiver dans un emplacement de stockage plus permanent, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] fait appel à un travail d'agent SQL, appelé TrackedMessages_Copy_BizTalkMsgBoxDb, qui est exécuté sur chaque serveur de base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-140">To get the tracked message bodies (blobs) transferred to the BizTalkDTADb database where you can view and archive them to more permanent storage, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] employs a SQL Agent job called TrackedMessages_Copy_BizTalkMsgBoxDb which runs on each MessageBox database server.</span></span> <span data-ttu-id="6fbc8-141">Ce travail doit copier les corps de message marqués pour suivi dans la base de données BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-141">It is the responsibility of this job to copy the message bodies marked for tracking to the BizTalkDTADb database.</span></span>  
  
3.  <span data-ttu-id="6fbc8-142">Toutes les données suivies autres que les corps de message sont déplacées de la base de données MessageBox dans la base de données BizTalkDTADb par un service appelé TDDS, qui est exécuté dans un ou plusieurs hôtes [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6fbc8-142">All of the tracked data other than message bodies are moved from the MessageBox database to the BizTalkDTADb database by a service called TDDS which runs in one or more of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] hosts.</span></span> <span data-ttu-id="6fbc8-143">À chaque fois qu'un hôte est configuré pour le suivi via les pages de propriétés de l'hôte de la console Administration de BizTalk Server, le sous-service TDDS est exécuté dans chaque instance de cet hôte.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-143">Whenever a host is configured as Hosts Tracking via the host property pages in the BizTalk Server administration console, the TDDS sub-service will run in every instance of that host.</span></span>  
  
4.  <span data-ttu-id="6fbc8-144">Sauf si la base de données BizTalkDTADb est purgée régulièrement, elle reste non liée, ce qui, à terme, risque de poser des problèmes de fonctionnement.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-144">Unless the BizTalkDTADb database is purged periodically, it will grow unbounded which will eventually lead to operational problems.</span></span> <span data-ttu-id="6fbc8-145">Une seul travail de l'agent SQL, appelé BizTalkDTADb (travail de purge et d'archivage DTA), effectue le travail de purge de la base de données BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-145">There is a single SQL Agent job called DTA Purge and Archive (BizTalkDTADb) that performs the task of purging the BizTalkDTADb database.</span></span> <span data-ttu-id="6fbc8-146">Par défaut, ce travail est exécuté toutes les minutes et purge toutes les instances terminées antérieures à certaines durées configurées par l'utilisateur (par exemple, 24 heures).</span><span class="sxs-lookup"><span data-stu-id="6fbc8-146">By default, this job runs every minute and purges all completed instances older than some user configured time (for example, 24hours).</span></span>  
  
     <span data-ttu-id="6fbc8-147">Pour plus d’informations sur le travail DTA Purge and Archive, consultez [la configuration de la Purge et archivage](../core/how-to-configure-the-dta-purge-and-archive-job.md).</span><span class="sxs-lookup"><span data-stu-id="6fbc8-147">For more information abut the DTA Purge and Archive job, see [How to Configure the DTA Purge and Archive Job](../core/how-to-configure-the-dta-purge-and-archive-job.md).</span></span>  
  
5.  <span data-ttu-id="6fbc8-148">Ce travail peut également archiver les données BizTalkDTADb en tant que sauvegarde SQL pour un stockage de longue durée et/ou l'affichage hors ligne des données.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-148">Optionally, the DTA Purge and Archive job can also archive the BizTalkDTADb data as a SQL Backup for longer term storage and/or off-line viewing of the data.</span></span> <span data-ttu-id="6fbc8-149">Si les données BizTalkDTADb archivées doivent être interrogées, elles doivent d'abord être restaurées en tant que nouvelle base de données dans SQL Server. Vous pouvez ensuite utiliser le suivi ou l'Analyseur de requêtes SQL pour les interroger.</span><span class="sxs-lookup"><span data-stu-id="6fbc8-149">If the archived BizTalkDTADb data needs to be queried, it must first be restored as a new database in SQL Server and then you can use tracking or the SQL Query Analyzer to query it.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="6fbc8-150">Dans cette section</span><span class="sxs-lookup"><span data-stu-id="6fbc8-150">In This Section</span></span>  
  
-   [<span data-ttu-id="6fbc8-151">Comprendre le comportement de performances de suivi DTA</span><span class="sxs-lookup"><span data-stu-id="6fbc8-151">Understanding DTA Tracking Performance Behavior</span></span>](../core/understanding-dta-tracking-performance-behavior.md)  
  
-   [<span data-ttu-id="6fbc8-152">Scénarios de test pour mesurer le débit maximal acceptable du suivi DTA</span><span class="sxs-lookup"><span data-stu-id="6fbc8-152">Test Scenarios for Measuring MST of DTA Tracking</span></span>](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md)  
  
-   [<span data-ttu-id="6fbc8-153">Trucs et astuces pour trouver le débit maximal acceptable du suivi DTA</span><span class="sxs-lookup"><span data-stu-id="6fbc8-153">Tips and Tricks for Finding MST of DTA Tracking</span></span>](../core/tips-and-tricks-for-finding-mst-of-dta-tracking.md)  
  
## <a name="see-also"></a><span data-ttu-id="6fbc8-154">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="6fbc8-154">See Also</span></span>  
 [<span data-ttu-id="6fbc8-155">Instructions pour le dimensionnement de la base de données de suivi</span><span class="sxs-lookup"><span data-stu-id="6fbc8-155">Tracking Database Sizing Guidelines</span></span>](../core/tracking-database-sizing-guidelines.md)