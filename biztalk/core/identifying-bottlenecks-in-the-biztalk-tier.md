---
title: "Identification des goulots d’étranglement au niveau de BizTalk | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f38ade78-8af3-4485-9b2a-5e4cdba965d2
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a5dd356ac3b8563d207e3534fc503711f11a9c8e
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="identifying-bottlenecks-in-the-biztalk-tier"></a><span data-ttu-id="f66ed-102">Identification des goulots d'étranglement dans le niveau BizTalk</span><span class="sxs-lookup"><span data-stu-id="f66ed-102">Identifying Bottlenecks in the BizTalk Tier</span></span>
<span data-ttu-id="f66ed-103">Le niveau BizTalk peut être divisé en plusieurs zones fonctionnelles :</span><span class="sxs-lookup"><span data-stu-id="f66ed-103">The BizTalk tier can be divided into the following functional areas:</span></span>  
  
-   <span data-ttu-id="f66ed-104">Réception</span><span class="sxs-lookup"><span data-stu-id="f66ed-104">Receiving</span></span>  
  
-   <span data-ttu-id="f66ed-105">Traitement</span><span class="sxs-lookup"><span data-stu-id="f66ed-105">Processing</span></span>  
  
-   <span data-ttu-id="f66ed-106">Transmission</span><span class="sxs-lookup"><span data-stu-id="f66ed-106">Transmitting</span></span>  
  
-   <span data-ttu-id="f66ed-107">Suivi</span><span class="sxs-lookup"><span data-stu-id="f66ed-107">Tracking</span></span>  
  
-   <span data-ttu-id="f66ed-108">Autres</span><span class="sxs-lookup"><span data-stu-id="f66ed-108">Other</span></span>  
  
 <span data-ttu-id="f66ed-109">Pour ces zones, si les ressources système (UC, mémoire et disque) semblent saturées, vous devez mettre votre serveur à niveau par l'intermédiaire d'une évolution verticale.</span><span class="sxs-lookup"><span data-stu-id="f66ed-109">For these areas, if the system resources (CPU, memory, and disk) appear to be saturated, upgrade the server by scaling up.</span></span> <span data-ttu-id="f66ed-110">Si les ressources système ne sont pas saturées, suivez les procédures décrites dans cette section.</span><span class="sxs-lookup"><span data-stu-id="f66ed-110">If the system resources are not saturated, perform the steps described in this section.</span></span>  
  
## <a name="bottlenecks-in-the-receive-location"></a><span data-ttu-id="f66ed-111">Goulots d'étranglement dans l'emplacement de réception</span><span class="sxs-lookup"><span data-stu-id="f66ed-111">Bottlenecks in the Receive Location</span></span>  
 <span data-ttu-id="f66ed-112">Si les messages commencent à s'accumuler dans l'emplacement de réception (par exemple, si la taille du dossier de réception de fichiers augmente ou si la file d'attente sortante n'est pas vidée assez rapidement), cela indique que le système ne parvient pas à absorber les données assez rapidement pour traiter la charge entrante. Le problème peut également être dû à des limitations internes (BizTalk réduit la vitesse de réception si les abonnés n'arrivent pas traiter les données assez vite, ce qui entraîne une accumulation de travaux en retard dans les tables de base de données).</span><span class="sxs-lookup"><span data-stu-id="f66ed-112">If messages start building up at the receive location (for example, file receive folder grows large or outgoing queue is not being drained fast enough) this is an indication that the system is unable to absorb data at a sufficiently fast rate to keep up with the incoming load either due to internal throttling (BizTalk reduces receiving rate if the subscribers are unable to process data fast enough causing backlog buildup in the database tables).</span></span> <span data-ttu-id="f66ed-113">Si le problème est matériel, procédez à une évolution verticale.</span><span class="sxs-lookup"><span data-stu-id="f66ed-113">In case the bottleneck is caused due to hardware limitations try scaling up.</span></span> <span data-ttu-id="f66ed-114">Vous pouvez également effectuer une évolution horizontale, à savoir ajouter une instance d'hôte (un serveur) à l'hôte mappé sur le gestionnaire de réception.</span><span class="sxs-lookup"><span data-stu-id="f66ed-114">It is also possible to scale out by adding a Host Instance (server) to the Host mapped to the receive handler.</span></span> <span data-ttu-id="f66ed-115">Utilisez l'utilitaire Perfmon pour surveiller l'utilisation des ressources système.</span><span class="sxs-lookup"><span data-stu-id="f66ed-115">Use Perfmon to monitor the resource utilization on the system.</span></span> <span data-ttu-id="f66ed-116">Il est important de confirmer que l'emplacement de réception externe n'est pas à l'origine du goulot d'étranglement.</span><span class="sxs-lookup"><span data-stu-id="f66ed-116">It is important to confirm that the external receive location is not the cause of the bottleneck.</span></span> <span data-ttu-id="f66ed-117">Par exemple, le partage de fichiers distant est saturé en raison de nombreuses entrées/sorties sur le disque, le serveur hébergeant la file d'attente sortante distante n'est pas saturé ou le client utilisé pour générer la charge HTTP/SOAP n'est pas en manque de threads.</span><span class="sxs-lookup"><span data-stu-id="f66ed-117">For example, remote file share is saturated due to high disk IO or the server hosting the remote outgoing queue is not saturated or the client used to generate HTTP/SOAP load is not starved on threads.</span></span>  
  
## <a name="processing-bottlenecks"></a><span data-ttu-id="f66ed-118">Goulots d'étranglement de traitement</span><span class="sxs-lookup"><span data-stu-id="f66ed-118">Processing Bottlenecks</span></span>  
 <span data-ttu-id="f66ed-119">Si la valeur associée à File d'attente hôte - Longueur (voir le tableau de décompte Perfmon ci-dessous) augmente, cela signifie que les orchestrations ne sont pas exécutées assez rapidement.</span><span class="sxs-lookup"><span data-stu-id="f66ed-119">If the Host Queue - Length count (see the Perfmon counter table below) is climbing, it indicates that the orchestrations are not completing fast enough.</span></span> <span data-ttu-id="f66ed-120">Ce problème peut être dû à un conflit de mémoire ou à une saturation de l'UC.</span><span class="sxs-lookup"><span data-stu-id="f66ed-120">This could be due to memory contention or CPU saturation.</span></span>  
  
 <span data-ttu-id="f66ed-121">Si les serveurs d'orchestration constituent le goulot d'étranglement, utilisez l'utilitaire Perfmon pour en identifier la source.</span><span class="sxs-lookup"><span data-stu-id="f66ed-121">If the orchestration servers are the bottleneck, use Perfmon to identify the source.</span></span>  
  
 <span data-ttu-id="f66ed-122">Si le serveur est lié à l'UC, prenez en compte les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="f66ed-122">If the server is CPU bound, consider the following:</span></span>  
  
-   <span data-ttu-id="f66ed-123">Si le workflow est complexe, vous pouvez fractionner l'orchestration en plusieurs orchestrations plus petites.</span><span class="sxs-lookup"><span data-stu-id="f66ed-123">If the workflow is complex consider splitting the orchestration into multiple smaller orchestrations</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="f66ed-124">Le fractionnement d'une orchestration en plusieurs workflows peut engendrer une latence supplémentaire et une plus grande complexité.</span><span class="sxs-lookup"><span data-stu-id="f66ed-124">Splitting an orchestration into multiple workflows can cause additional latency and add complexity.</span></span>  
  
-   <span data-ttu-id="f66ed-125">Si les mappages utilisés sont complexes, vérifiez s'ils peuvent être déplacés sur les ports de réception/d'envoi (renseignez-vous sur la bande passante disponible sur ces ports).</span><span class="sxs-lookup"><span data-stu-id="f66ed-125">If complex maps are used consider whether they can be moved to the Receive/Send ports (verify which ports have additional bandwidth).</span></span>  
  
-   <span data-ttu-id="f66ed-126">Envisagez une évolution verticale du matériel ou, si possible, une évolution horizontale avec la configuration d'un nouveau serveur de traitement.</span><span class="sxs-lookup"><span data-stu-id="f66ed-126">Consider scaling up the hardware or if possible consider scaling out by configuring an additional processing server.</span></span>  
  
## <a name="transmitting-bottlenecks"></a><span data-ttu-id="f66ed-127">Goulots d'étranglement de transmission</span><span class="sxs-lookup"><span data-stu-id="f66ed-127">Transmitting Bottlenecks</span></span>  
 <span data-ttu-id="f66ed-128">Si les ressources du serveur de transmission sont saturées (par exemple, disque, mémoire, UC), envisagez une évolution verticale de ce serveur ou, si possible, une évolution horizontale avec des serveurs d'hôtes d'envoi supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="f66ed-128">If the transmitting server is saturated on resources (for example, disk, memory, CPU), consider scaling-up the server or if possible consider scaling-out to additional send host servers.</span></span> <span data-ttu-id="f66ed-129">Le niveau d'envoi peut devenir le goulot d'étranglement si la destination (externe à BizTalk) ne parvient pas à recevoir les données assez rapidement.</span><span class="sxs-lookup"><span data-stu-id="f66ed-129">The sending tier could become the bottleneck if the destination (external to BizTalk) is unable to receive data fast enough.</span></span> <span data-ttu-id="f66ed-130">Les messages s'accumulent alors dans la base de données MessageBox (application SendHostQ).</span><span class="sxs-lookup"><span data-stu-id="f66ed-130">This will cause messages to buildup in the MessageBox database (Application SendHostQ).</span></span>  
  
 <span data-ttu-id="f66ed-131">Si tous les points de terminaison se trouvent dans les limites de la topologie, isolez la cause du problème au niveau de la destination.</span><span class="sxs-lookup"><span data-stu-id="f66ed-131">If at all the endpoints are within the scope of the topology, consider isolating the cause at the destination.</span></span> <span data-ttu-id="f66ed-132">Par exemple, la configuration de l'emplacement HTTP/SOAP est-elle optimale pour la réception de la charge ou pouvez-vous effectuer une évolution horizontale ?</span><span class="sxs-lookup"><span data-stu-id="f66ed-132">For example, is the HTTP/SOAP location optimally configured to receive load or could it be scaled-out?</span></span> <span data-ttu-id="f66ed-133">L'augmentation de la destination est-elle due à un trop grand nombre de messages de sortie envoyés par BizTalk ?</span><span class="sxs-lookup"><span data-stu-id="f66ed-133">Is the destination growing due to excessive output messages delivered by BizTalk?</span></span> <span data-ttu-id="f66ed-134">Dans l'affirmative, prévoyez un plan de maintenance destiné à archiver et purger les messages de destination.</span><span class="sxs-lookup"><span data-stu-id="f66ed-134">If yes, consider a maintenance plan to archive and purge the destination messages.</span></span> <span data-ttu-id="f66ed-135">Par exemple, un grand nombre de fichiers dans un dossier de destination peut entraver sérieusement la capacité du service BizTalk à valider les données sur le lecteur de disque.</span><span class="sxs-lookup"><span data-stu-id="f66ed-135">For example, large numbers of files in a destination folder can severely impact the ability of the BizTalk service to commit data to the disk drive.</span></span>  
  
## <a name="tracking-bottlenecks"></a><span data-ttu-id="f66ed-136">Goulots d'étranglement de suivi</span><span class="sxs-lookup"><span data-stu-id="f66ed-136">Tracking Bottlenecks</span></span>  
 <span data-ttu-id="f66ed-137">L'instance d'hôte de suivi est chargée de déplacer les événements de message suivis et BAM et les données de l'instance de service de la base de données MessageBox (table TrackingData) vers les tables de base de données BizTalkDTADb et/ou BAMPrimaryImport.</span><span class="sxs-lookup"><span data-stu-id="f66ed-137">The Tracking Host Instance is responsible for moving both BAM & tracked message event and service instance data from the MessageBox database (TrackingData table) to the BizTalkDTADb and/or BAMPrimaryImport database tables.</span></span> <span data-ttu-id="f66ed-138">Si plusieurs bases de données MessageBox sont configurées, l'instance d'hôte de suivi utilise quatre threads par MessageBox.</span><span class="sxs-lookup"><span data-stu-id="f66ed-138">If multiple MessageBox databases are configured the tracking host instance uses four threads per MessageBox.</span></span>  
  
 <span data-ttu-id="f66ed-139">Il est possible que cette instance d'hôte soit liée à l'UC.</span><span class="sxs-lookup"><span data-stu-id="f66ed-139">It is possible that this host instance could get CPU bound.</span></span> <span data-ttu-id="f66ed-140">Dans ce cas, procédez à une évolution verticale du serveur ou effectuez une évolution horizontale avec la configuration d'un nouveau serveur, pour lequel l'option de suivi de l'hôte est activée.</span><span class="sxs-lookup"><span data-stu-id="f66ed-140">If that is the case consider scaling-up the server or scale-out by configuring an additional server with Host Tracking enabled.</span></span> <span data-ttu-id="f66ed-141">Les différentes instances d'hôte équilibreront automatiquement la charge des différentes MessageBoxes configurées.</span><span class="sxs-lookup"><span data-stu-id="f66ed-141">The multiple host instances will automatically balance load for the multiple MessageBoxes configured.</span></span>  
  
 <span data-ttu-id="f66ed-142">Si la table TrackingData de la base de données MessageBox commence une sauvegarde, c'est généralement parce que les travaux de maintenance de données de la base de données BizTalkDTADb et/ou BAMPrimaryImport ne s'exécutent pas conformément à leur configuration, ce qui entraîne l'augmentation de la base de données BizTalkDTADb et/ou BAMPrimaryImport.</span><span class="sxs-lookup"><span data-stu-id="f66ed-142">If the TrackingData table in the MessageBox database starts backing up, it is usually because the data maintenance jobs on the BizTalkDTADb and/or BAMPrimaryImport database are not running as configured causing growth of the BizTalkDTADb and/or BAMPrimaryImport database.</span></span> <span data-ttu-id="f66ed-143">Si ces bases de données deviennent trop volumineuses, cela peut nuire à la capacité de l'hôte de suivi à insérer des données dans ces tables, ce qui entraîne la sauvegarde des données suivies dans les tables de la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="f66ed-143">Once these databases grow too large it can have a negative impact on the ability of the tracking host to insert data into these tables causing the tracked data to backup in the MessageBox database tables.</span></span> <span data-ttu-id="f66ed-144">L'augmentation de la table MessageBox->TrackingData entraîne l'activation des limitations.</span><span class="sxs-lookup"><span data-stu-id="f66ed-144">The growth of the MessageBox->TrackingData table will cause throttling to kick in.</span></span>  
  
## <a name="other"></a><span data-ttu-id="f66ed-145">Autres</span><span class="sxs-lookup"><span data-stu-id="f66ed-145">Other</span></span>  
 <span data-ttu-id="f66ed-146">Configurez la topologie de déploiement de telle façon que les différentes fonctionnalités s'exécutent sur des instances d'hôte dédiées isolées.</span><span class="sxs-lookup"><span data-stu-id="f66ed-146">Configure the deployment topology such that different functionality runs in dedicated isolated host instances.</span></span> <span data-ttu-id="f66ed-147">Ainsi, chaque instance d'hôte dispose de ses propres ressources (sur un système 32 bits, 2 Go d'espace d'adressage de mémoire virtuelle, handles, threads).</span><span class="sxs-lookup"><span data-stu-id="f66ed-147">This way each host instance gets its own set of resources (on a 32-bit system, 2GB virtual memory address space, handles, threads).</span></span> <span data-ttu-id="f66ed-148">Si le serveur est assez puissant (marge d'UC et mémoire suffisantes) pour héberger plusieurs instances d'hôte, ces dernières peuvent être toutes configurées pour une exécution sur le même ordinateur physique.</span><span class="sxs-lookup"><span data-stu-id="f66ed-148">If the server is powerful enough (sufficient CPU headroom, memory) to host multiple host instances they can all be configured to run on the same physical machine.</span></span> <span data-ttu-id="f66ed-149">Dans le cas contraire, il est possible de procéder à une évolution horizontale, à savoir déplacer les fonctionnalités vers des serveurs dédiés.</span><span class="sxs-lookup"><span data-stu-id="f66ed-149">If not, this also makes it easy to scale-out by moving the functionality to dedicated servers.</span></span> <span data-ttu-id="f66ed-150">Le fait d'exécuter une même fonctionnalité sur plusieurs serveurs permet également de disposer d'une configuration hautement disponible.</span><span class="sxs-lookup"><span data-stu-id="f66ed-150">Running the same functionality on multiple servers also serves to provide a highly available configuration.</span></span>  
  
## <a name="biztalk-system-performance-counters"></a><span data-ttu-id="f66ed-151">Compteurs de performances du système BizTalk</span><span class="sxs-lookup"><span data-stu-id="f66ed-151">BizTalk System Performance Counters</span></span>  
  
|<span data-ttu-id="f66ed-152">Objet</span><span class="sxs-lookup"><span data-stu-id="f66ed-152">Object</span></span>|<span data-ttu-id="f66ed-153">Instance</span><span class="sxs-lookup"><span data-stu-id="f66ed-153">Instance</span></span>|<span data-ttu-id="f66ed-154">Compteur</span><span class="sxs-lookup"><span data-stu-id="f66ed-154">Counter</span></span>|<span data-ttu-id="f66ed-155">Objet de la surveillance</span><span class="sxs-lookup"><span data-stu-id="f66ed-155">Monitoring Purpose</span></span>|  
|------------|--------------|-------------|------------------------|  
|<span data-ttu-id="f66ed-156">Processeur</span><span class="sxs-lookup"><span data-stu-id="f66ed-156">Processor</span></span>|<span data-ttu-id="f66ed-157">_Total</span><span class="sxs-lookup"><span data-stu-id="f66ed-157">_Total</span></span>|<span data-ttu-id="f66ed-158">% temps processeur</span><span class="sxs-lookup"><span data-stu-id="f66ed-158">% Processor Time</span></span>|<span data-ttu-id="f66ed-159">Conflit de ressources</span><span class="sxs-lookup"><span data-stu-id="f66ed-159">Resource Contention</span></span>|  
|<span data-ttu-id="f66ed-160">Traiter</span><span class="sxs-lookup"><span data-stu-id="f66ed-160">Process</span></span>|<span data-ttu-id="f66ed-161">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="f66ed-161">BTSNTSvc</span></span>|<span data-ttu-id="f66ed-162">Octets virtuels</span><span class="sxs-lookup"><span data-stu-id="f66ed-162">Virtual Bytes</span></span>|<span data-ttu-id="f66ed-163">Fuite/encombrement de mémoire</span><span class="sxs-lookup"><span data-stu-id="f66ed-163">Memory Leak/Bloat</span></span>|  
|<span data-ttu-id="f66ed-164">Traiter</span><span class="sxs-lookup"><span data-stu-id="f66ed-164">Process</span></span>|<span data-ttu-id="f66ed-165">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="f66ed-165">BTSNTSvc</span></span>|<span data-ttu-id="f66ed-166">Octets privés</span><span class="sxs-lookup"><span data-stu-id="f66ed-166">Private Bytes</span></span>|<span data-ttu-id="f66ed-167">Fuite/encombrement de mémoire</span><span class="sxs-lookup"><span data-stu-id="f66ed-167">Memory Leak/Bloat</span></span>|  
|<span data-ttu-id="f66ed-168">Traiter</span><span class="sxs-lookup"><span data-stu-id="f66ed-168">Process</span></span>|<span data-ttu-id="f66ed-169">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="f66ed-169">BTSNTSvc</span></span>|<span data-ttu-id="f66ed-170">Nombre de handles</span><span class="sxs-lookup"><span data-stu-id="f66ed-170">Handle Count</span></span>|<span data-ttu-id="f66ed-171">Conflit de ressources</span><span class="sxs-lookup"><span data-stu-id="f66ed-171">Resource Contention</span></span>|  
|<span data-ttu-id="f66ed-172">Traiter</span><span class="sxs-lookup"><span data-stu-id="f66ed-172">Process</span></span>|<span data-ttu-id="f66ed-173">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="f66ed-173">BTSNTSvc</span></span>|<span data-ttu-id="f66ed-174">Nombre de threads</span><span class="sxs-lookup"><span data-stu-id="f66ed-174">Thread Count</span></span>|<span data-ttu-id="f66ed-175">Conflit de ressources</span><span class="sxs-lookup"><span data-stu-id="f66ed-175">Resource Contention</span></span>|  
|<span data-ttu-id="f66ed-176">Disque physique</span><span class="sxs-lookup"><span data-stu-id="f66ed-176">Physical Disk</span></span>|<span data-ttu-id="f66ed-177">_Total</span><span class="sxs-lookup"><span data-stu-id="f66ed-177">_Total</span></span>|<span data-ttu-id="f66ed-178">% inactivité</span><span class="sxs-lookup"><span data-stu-id="f66ed-178">% Idle Time</span></span>|<span data-ttu-id="f66ed-179">Conflit de ressources</span><span class="sxs-lookup"><span data-stu-id="f66ed-179">Resource Contention</span></span>|  
|<span data-ttu-id="f66ed-180">Disque physique</span><span class="sxs-lookup"><span data-stu-id="f66ed-180">Physical Disk</span></span>|<span data-ttu-id="f66ed-181">_Total</span><span class="sxs-lookup"><span data-stu-id="f66ed-181">_Total</span></span>|<span data-ttu-id="f66ed-182">Longueur actuelle de la file d'attente du disque</span><span class="sxs-lookup"><span data-stu-id="f66ed-182">Current Disk Queue Length</span></span>|<span data-ttu-id="f66ed-183">Conflit de ressources</span><span class="sxs-lookup"><span data-stu-id="f66ed-183">Resource Contention</span></span>|  
  
### <a name="cpu-contention"></a><span data-ttu-id="f66ed-184">Conflit d'UC</span><span class="sxs-lookup"><span data-stu-id="f66ed-184">CPU Contention</span></span>  
 <span data-ttu-id="f66ed-185">Si le processeur est saturé, fragmentez l'application afin de séparer les éléments Réception des éléments Envoi et Orchestration.</span><span class="sxs-lookup"><span data-stu-id="f66ed-185">If the processor is saturated consider fragmenting the application by separating the Receiving from the Sending and Orchestration.</span></span> <span data-ttu-id="f66ed-186">Pour ce faire, vous devez créer des hôtes distincts, mapper ces hôtes à une fonctionnalité spécifique (Réception/Envoi/Orchestrations/Suivi) et ajouter des serveurs dédiés à ces hôtes distincts.</span><span class="sxs-lookup"><span data-stu-id="f66ed-186">The way to accomplish this is by creating separate hosts, mapping these hosts to specific functionality (Receive/Send/Orchestrations/Tracking) and adding dedicated servers to these separate hosts.</span></span> <span data-ttu-id="f66ed-187">La fonctionnalité d'orchestration est généralement gourmande en UC. Par conséquent, configurez le système de façon à ce que les orchestrations s'exécutent sur un serveur dédié distinct afin d'améliorer le débit global du système.</span><span class="sxs-lookup"><span data-stu-id="f66ed-187">Orchestration functionality is generally known to be CPU hungry, thus configuring the system such that the orchestrations execute on a separate dedicated server helps improve overall system throughput.</span></span>  
  
 <span data-ttu-id="f66ed-188">Si plusieurs orchestrations sont déployées, il est possible de les inscrire sur différents hôtes d'orchestration dédiés.</span><span class="sxs-lookup"><span data-stu-id="f66ed-188">If multiple orchestrations are deployed, it is possible to enlist them to different dedicated Orchestration-Hosts.</span></span> <span data-ttu-id="f66ed-189">Le mappage des serveurs physiques sur des hôtes d'orchestration dédiés permet d'assurer que les différentes orchestrations sont isolées et ne se disputent pas les ressources partagées au sein d'un même espace d'adressage physique ou sur un même serveur.</span><span class="sxs-lookup"><span data-stu-id="f66ed-189">Mapping different physical servers to the dedicated Orchestration-Hosts ensures that the different orchestrations are isolated and do not contend for shared resources either in the same physical address space or on the same server.</span></span>  
  
### <a name="memory-starvation"></a><span data-ttu-id="f66ed-190">Insuffisance de mémoire</span><span class="sxs-lookup"><span data-stu-id="f66ed-190">Memory Starvation</span></span>  
 <span data-ttu-id="f66ed-191">Des scénarios de débits élevés ont pu augmenter la demande au niveau de la mémoire du système.</span><span class="sxs-lookup"><span data-stu-id="f66ed-191">High throughput scenarios can have increased demand on system memory.</span></span> <span data-ttu-id="f66ed-192">Étant donné que les processus 32 bits sont limités par la quantité de mémoire à leur disposition, il est recommandé de séparer les fonctionnalités Réception/Traitement/Envoi sur des instances d'hôte distinctes de façon à ce que chaque hôte bénéficie d'un espace d'adressage de 2 Go propre.</span><span class="sxs-lookup"><span data-stu-id="f66ed-192">Since a 32-bit process is limited by the amount of memory it can consume, it is recommended to separate the Receive/Process/Send functionality into separate Host Instances such that each host receives its own 2GB address space.</span></span> <span data-ttu-id="f66ed-193">De plus, si plusieurs instances d'hôte sont exécutées sur le même serveur physique, il est conseillé de passer à 4 ou 8 Go de mémoire afin de ne pas avoir à transférer des données sur disque à partir de la mémoire réelle.</span><span class="sxs-lookup"><span data-stu-id="f66ed-193">In addition, if multiple Host Instances are running on the same physical server it is useful to upgrade to 4/8GB memory to avoid having to swap data to disk from real memory.</span></span> <span data-ttu-id="f66ed-194">Peuvent contenir des orchestrations à long terme sur la mémoire allouée plus à l’origine d’encombrement de mémoire et par conséquent, la limitation.</span><span class="sxs-lookup"><span data-stu-id="f66ed-194">Long running orchestrations can hold onto allocated memory longer causing memory bloat and thus throttling to kick in.</span></span> <span data-ttu-id="f66ed-195">Les messages volumineux peuvent également entraîner la consommation de mémoire élevée.</span><span class="sxs-lookup"><span data-stu-id="f66ed-195">Large messages can also cause high memory consumption.</span></span>  
  
 <span data-ttu-id="f66ed-196">Il est possible de remédier à ce problème d’encombrement de mémoire lors du traitement des messages volumineux en diminuant la **taille de file d’attente de messages interne** et **Messages In-process par UC** valeurs de l’hôte spécifique.</span><span class="sxs-lookup"><span data-stu-id="f66ed-196">It is possible to overcome this memory bloat problem when large messages are being processed by lowering the **Internal Message Queue Size** and **In-process Messages per CPU** values for the specific host.</span></span>  
  
### <a name="disk-contention"></a><span data-ttu-id="f66ed-197">Conflit au niveau des disques</span><span class="sxs-lookup"><span data-stu-id="f66ed-197">Disk Contention</span></span>  
 <span data-ttu-id="f66ed-198">Si les disques sont saturés (par exemple, transports File/MSMQ) vous pouvez mettre à niveau vers plusieurs piles et à la technologie RAID 1 + 0.</span><span class="sxs-lookup"><span data-stu-id="f66ed-198">If the disks are saturated (for example, File/MSMQ transports) consider upgrading to multiple spindles and striping the disks with RAID 1+0.</span></span> <span data-ttu-id="f66ed-199">En outre chaque fois que vous utilisez le fichier transport il est important de s’assurer que les dossiers (réception et envoi) n’augmentent pas trop volumineux (> 50 000 fichiers).</span><span class="sxs-lookup"><span data-stu-id="f66ed-199">In addition whenever using the FILE transport it is important to ensure that the folders (both Receive and Send) do not grow too large (>50,000 files).</span></span>  
  
 <span data-ttu-id="f66ed-200">Le dossier Réception peut augmenter si BizTalk Server limite l'entrée des données dans le système pour les raisons mentionnées ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="f66ed-200">The Receive folder can grow large if BizTalk Server chooses to throttle incoming data into the system due to various reasons mentioned below.</span></span> <span data-ttu-id="f66ed-201">Il est également important de transférer les données à partir du dossier d'envoi afin que l'augmentation de ce dossier n'empêche pas BizTalk Server d'écrire de nouvelles données.</span><span class="sxs-lookup"><span data-stu-id="f66ed-201">It is also important to move data from the send folder so that growth in this folder does not impact the ability of BizTalk Server to write additional data.</span></span> <span data-ttu-id="f66ed-202">Pour les files d'attente MSMQ non transactionnelles, il est conseillé de créer les files de réception à distance afin que les conflits de disques soient limités sur le serveur BizTalk.</span><span class="sxs-lookup"><span data-stu-id="f66ed-202">For non-transactional MSMQ queues, it is recommended to remotely create the receive queues so that disk contention is reduced on the BizTalk server.</span></span>  
  
 <span data-ttu-id="f66ed-203">Cette configuration (files d'attentes non transactionnelles distantes) présente également l'avantage d'une disponibilité élevée étant donné que le serveur distant hébergeant la file d'attente peut être mis en cluster.</span><span class="sxs-lookup"><span data-stu-id="f66ed-203">This configuration (remote non-transactional queues) also provides the added benefit of high availability as the remote server hosting the queue can be clustered.</span></span>  
  
### <a name="other-system-resource-contention"></a><span data-ttu-id="f66ed-204">Conflit au niveau d'autres ressources système</span><span class="sxs-lookup"><span data-stu-id="f66ed-204">Other System Resource Contention</span></span>  
 <span data-ttu-id="f66ed-205">En fonction de la nature du transport configuré, il peut être nécessaire de configurer des ressources système telles que IIS pour HTTP/SOAP (par exemple, MaxIOThreads, MaxWorkerThreads).</span><span class="sxs-lookup"><span data-stu-id="f66ed-205">Depending on the nature of the transport configured it may be necessary to configure system resources like IIS for HTTP/SOAP (for example, MaxIOThreads, MaxWorkerThreads).</span></span>  
  
### <a name="downstream-bottlenecks"></a><span data-ttu-id="f66ed-206">Goulots d'étranglement en aval</span><span class="sxs-lookup"><span data-stu-id="f66ed-206">Downstream Bottlenecks</span></span>  
 <span data-ttu-id="f66ed-207">Si le système en aval ne reçoit pas les données BizTalk assez rapidement, ces données de sortie sont sauvegardées dans les bases de données BizTalk, ce qui entraîne un encombrement générant une activation des limitations. Le pipeline de réception est alors réduit, ce qui affecte le débit global du système BizTalk.</span><span class="sxs-lookup"><span data-stu-id="f66ed-207">If the downstream system is unable to receive data fast enough from BizTalk this output data will back up within the BizTalk databases resulting in bloat causing throttling to kick in shrinking the receive pipe thereby impacting the overall throughput of the BizTalk system.</span></span> <span data-ttu-id="f66ed-208">Un signe direct de ce problème peut être l'augmentation de la mise en file d'attente.</span><span class="sxs-lookup"><span data-stu-id="f66ed-208">A direct indication of this would be Spool growth.</span></span>  
  
### <a name="throttling-impact"></a><span data-ttu-id="f66ed-209">Impact des limitations</span><span class="sxs-lookup"><span data-stu-id="f66ed-209">Throttling Impact</span></span>  
 <span data-ttu-id="f66ed-210">L'activation des limitations permet de protéger le système contre toute défaillance irrécupérable.</span><span class="sxs-lookup"><span data-stu-id="f66ed-210">Throttling will ultimately kick in to protect the system from reaching an unrecoverable state.</span></span> <span data-ttu-id="f66ed-211">Grâce à ces limitations, vous pouvez vérifier si le système fonctionne normalement et découvrir l'origine du problème.</span><span class="sxs-lookup"><span data-stu-id="f66ed-211">Thus throttling is a good place to verify whether the system is functioning normally and discover the source of the problem.</span></span> <span data-ttu-id="f66ed-212">Une fois la source des goulots d'étranglement identifiée dans l'état de limitation, analysez les autres compteurs de performances pour accéder à la cause du problème.</span><span class="sxs-lookup"><span data-stu-id="f66ed-212">After the cause of the bottleneck has been identified from the throttling state, analyze the other performance counters to drill down into the source of the problem.</span></span>  
  
 <span data-ttu-id="f66ed-213">Par exemple, un conflit important au niveau de la base de données MessageBox peut être dû à une utilisation intensive de l'UC, qui peut découler d'une pagination excessive sur le disque, elle-même due à une mémoire insuffisante.</span><span class="sxs-lookup"><span data-stu-id="f66ed-213">For example, high contention on the MessageBox database could be due to high CPU usage, which could be caused due to excessively paging to disk which could be caused due to low memory conditions.</span></span> <span data-ttu-id="f66ed-214">Un conflit important associé à MessageBox peut également être dû à un conflit de verrouillage découlant de lecteurs de disques saturés.</span><span class="sxs-lookup"><span data-stu-id="f66ed-214">High contention on the MessageBox could also be caused due to high lock contention which could be due to saturated disk drives.</span></span>  
  
## <a name="biztalk-application-counters"></a><span data-ttu-id="f66ed-215">Compteurs d'application BizTalk</span><span class="sxs-lookup"><span data-stu-id="f66ed-215">BizTalk Application Counters</span></span>  
  
|<span data-ttu-id="f66ed-216">Objet</span><span class="sxs-lookup"><span data-stu-id="f66ed-216">Object</span></span>|<span data-ttu-id="f66ed-217">Instance</span><span class="sxs-lookup"><span data-stu-id="f66ed-217">Instance</span></span>|<span data-ttu-id="f66ed-218">Compteur</span><span class="sxs-lookup"><span data-stu-id="f66ed-218">Counter</span></span>|<span data-ttu-id="f66ed-219"> Description</span><span class="sxs-lookup"><span data-stu-id="f66ed-219">Description</span></span>|  
|------------|--------------|-------------|-----------------|  
|<span data-ttu-id="f66ed-220">Messagerie BizTalk</span><span class="sxs-lookup"><span data-stu-id="f66ed-220">BizTalk Messaging</span></span>|<span data-ttu-id="f66ed-221">RxHost</span><span class="sxs-lookup"><span data-stu-id="f66ed-221">RxHost</span></span>|<span data-ttu-id="f66ed-222">Nombre de documents reçus par seconde</span><span class="sxs-lookup"><span data-stu-id="f66ed-222">Documents Received/Sec</span></span>|<span data-ttu-id="f66ed-223">Vitesse d'entrée</span><span class="sxs-lookup"><span data-stu-id="f66ed-223">Incoming Rate</span></span>|  
|<span data-ttu-id="f66ed-224">Messagerie BizTalk</span><span class="sxs-lookup"><span data-stu-id="f66ed-224">BizTalk Messaging</span></span>|<span data-ttu-id="f66ed-225">TxHost</span><span class="sxs-lookup"><span data-stu-id="f66ed-225">TxHost</span></span>|<span data-ttu-id="f66ed-226">Nombre de documents traités par seconde</span><span class="sxs-lookup"><span data-stu-id="f66ed-226">Documents Processed/Sec</span></span>|<span data-ttu-id="f66ed-227">Vitesse de sortie</span><span class="sxs-lookup"><span data-stu-id="f66ed-227">Outgoing Rate</span></span>|  
|<span data-ttu-id="f66ed-228">Orchestrations XLANG/s</span><span class="sxs-lookup"><span data-stu-id="f66ed-228">XLANG/s Orchestrations</span></span>|<span data-ttu-id="f66ed-229">PxHost</span><span class="sxs-lookup"><span data-stu-id="f66ed-229">PxHost</span></span>|<span data-ttu-id="f66ed-230">Orchestrations réussies par seconde</span><span class="sxs-lookup"><span data-stu-id="f66ed-230">Orchestrations Completed/Sec.</span></span>|<span data-ttu-id="f66ed-231">Vitesse de traitement</span><span class="sxs-lookup"><span data-stu-id="f66ed-231">Processing Rate</span></span>|  
|<span data-ttu-id="f66ed-232">BizTalk : MessageBox : compteurs généraux</span><span class="sxs-lookup"><span data-stu-id="f66ed-232">BizTalk : MessageBox: General Counters</span></span>|<span data-ttu-id="f66ed-233">MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="f66ed-233">MsgBoxName</span></span>|<span data-ttu-id="f66ed-234">Taille mise en file d'attente</span><span class="sxs-lookup"><span data-stu-id="f66ed-234">Spool Size</span></span>|<span data-ttu-id="f66ed-235">Taille cumulée de toutes les files d'attente hôte</span><span class="sxs-lookup"><span data-stu-id="f66ed-235">Cumulative size of all Host Queues</span></span>|  
|<span data-ttu-id="f66ed-236">BizTalk : MessageBox : compteurs généraux</span><span class="sxs-lookup"><span data-stu-id="f66ed-236">BizTalk : MessageBox: General Counters</span></span>|<span data-ttu-id="f66ed-237">MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="f66ed-237">MsgBoxName</span></span>|<span data-ttu-id="f66ed-238">Taille données de suivi</span><span class="sxs-lookup"><span data-stu-id="f66ed-238">Tracking Data Size</span></span>|<span data-ttu-id="f66ed-239">Taille de la table TrackingData de la MessageBox</span><span class="sxs-lookup"><span data-stu-id="f66ed-239">Size of TrackingData table on the MessageBox</span></span>|  
|<span data-ttu-id="f66ed-240">Compteurs de BizTalk:MessageBox:Host</span><span class="sxs-lookup"><span data-stu-id="f66ed-240">BizTalk:MessageBox:Host Counters</span></span>|<span data-ttu-id="f66ed-241">PxHost:MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="f66ed-241">PxHost:MsgBoxName</span></span>|<span data-ttu-id="f66ed-242">File d'attente hôte - Longueur</span><span class="sxs-lookup"><span data-stu-id="f66ed-242">Host Queue - Length</span></span>|<span data-ttu-id="f66ed-243">Nombre de messages dans la file d'attente hôte spécifiée</span><span class="sxs-lookup"><span data-stu-id="f66ed-243">Number of messages in the specific Host Queue</span></span>|  
|<span data-ttu-id="f66ed-244">Compteurs de BizTalk:MessageBox:Host</span><span class="sxs-lookup"><span data-stu-id="f66ed-244">BizTalk:MessageBox:Host Counters</span></span>|<span data-ttu-id="f66ed-245">TxHost:MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="f66ed-245">TxHost:MsgBoxName</span></span>|<span data-ttu-id="f66ed-246">File d'attente hôte - Longueur</span><span class="sxs-lookup"><span data-stu-id="f66ed-246">Host Queue - Length</span></span>|<span data-ttu-id="f66ed-247">Nombre de messages dans la file d'attente hôte spécifiée</span><span class="sxs-lookup"><span data-stu-id="f66ed-247">Number of messages in the specific Host Queue</span></span>|  
|<span data-ttu-id="f66ed-248">BizTalk:agent des messages</span><span class="sxs-lookup"><span data-stu-id="f66ed-248">BizTalk:Message Agent</span></span>|<span data-ttu-id="f66ed-249">RxHost</span><span class="sxs-lookup"><span data-stu-id="f66ed-249">RxHost</span></span>|<span data-ttu-id="f66ed-250">Taille des bases de données</span><span class="sxs-lookup"><span data-stu-id="f66ed-250">Database Size</span></span>|<span data-ttu-id="f66ed-251">Taille de la file d'attente de publication (PxHost)</span><span class="sxs-lookup"><span data-stu-id="f66ed-251">Size of publishing (PxHost) Queue</span></span>|  
|<span data-ttu-id="f66ed-252">BizTalk:agent des messages</span><span class="sxs-lookup"><span data-stu-id="f66ed-252">BizTalk:Message Agent</span></span>|<span data-ttu-id="f66ed-253">PxHost</span><span class="sxs-lookup"><span data-stu-id="f66ed-253">PxHost</span></span>|<span data-ttu-id="f66ed-254">Taille des bases de données</span><span class="sxs-lookup"><span data-stu-id="f66ed-254">Database Size</span></span>|<span data-ttu-id="f66ed-255">Taille de la file d'attente de publication (TxHost)</span><span class="sxs-lookup"><span data-stu-id="f66ed-255">Size of publishing (TxHost) Queue</span></span>|  
|<span data-ttu-id="f66ed-256">BizTalk:agent des messages</span><span class="sxs-lookup"><span data-stu-id="f66ed-256">BizTalk:Message Agent</span></span>|<span data-ttu-id="f66ed-257">HostName</span><span class="sxs-lookup"><span data-stu-id="f66ed-257">HostName</span></span>|<span data-ttu-id="f66ed-258">État de limitation de remise de messages</span><span class="sxs-lookup"><span data-stu-id="f66ed-258">Message Delivery Throttling State</span></span>|<span data-ttu-id="f66ed-259">Affecte les transports XLANG et sortants</span><span class="sxs-lookup"><span data-stu-id="f66ed-259">Affects XLANG and Outbound transports</span></span>|  
|<span data-ttu-id="f66ed-260">BizTalk:agent des messages</span><span class="sxs-lookup"><span data-stu-id="f66ed-260">BizTalk:Message Agent</span></span>|<span data-ttu-id="f66ed-261">HostName</span><span class="sxs-lookup"><span data-stu-id="f66ed-261">HostName</span></span>|<span data-ttu-id="f66ed-262">État de limitation de publication de messages</span><span class="sxs-lookup"><span data-stu-id="f66ed-262">Message Publishing Throttling State</span></span>|<span data-ttu-id="f66ed-263">Affecte les transports XLANG et entrants</span><span class="sxs-lookup"><span data-stu-id="f66ed-263">Affects XLANG and Inbound transports</span></span>|  
  
### <a name="where-do-i-start"></a><span data-ttu-id="f66ed-264">Par où commencer ?</span><span class="sxs-lookup"><span data-stu-id="f66ed-264">Where do I start?</span></span>  
 <span data-ttu-id="f66ed-265">Analyse le **état de limitation de remise de messages** et **état de limitation de publication de messages** pour chaque hôte instance est généralement un bon point de départ.</span><span class="sxs-lookup"><span data-stu-id="f66ed-265">Monitoring the **Message Delivery Throttling State** and the **Message Publishing Throttling State** for each host instance is usually a good place to start.</span></span> <span data-ttu-id="f66ed-266">Si la valeur de ces compteurs n'est pas zéro, cela signifie que des limitations sont appliquées au système BizTalk et qu'il est possible de rechercher plus avant la cause du goulot d'étranglement.</span><span class="sxs-lookup"><span data-stu-id="f66ed-266">If the value of these counters is not zero it is indicative that throttling is happening within the BizTalk system and it is possible to further analyze the cause of the bottleneck.</span></span> <span data-ttu-id="f66ed-267">Pour obtenir des descriptions sur les autres compteurs de performance, consultez [identifier les goulots d’étranglement au niveau de la base de données](http://msdn.microsoft.com/library/f1dc58b5-73b0-41b5-9a1e-c0698485c732).</span><span class="sxs-lookup"><span data-stu-id="f66ed-267">For descriptions on the other performance counters, see [Identifying Bottlenecks in the Database Tier](http://msdn.microsoft.com/library/f1dc58b5-73b0-41b5-9a1e-c0698485c732).</span></span>  
  
## <a name="backlog-buildup"></a><span data-ttu-id="f66ed-268">Accumulation de travaux en retard</span><span class="sxs-lookup"><span data-stu-id="f66ed-268">Backlog Buildup</span></span>  
 <span data-ttu-id="f66ed-269">Pour un scénario de déploiement 1-1 pour lequel un 1 message reçu génère 1 message traité et transmis, si la vitesse de sortie n'est pas égale à la vitesse d'entrée, des travaux en retard s'accumulent au sein du système.</span><span class="sxs-lookup"><span data-stu-id="f66ed-269">For a 1-1 deployment scenario where 1 message received results in 1 message processed and transmitted, if the Outgoing Rate does not equal the Incoming Rate, a backlog is building up somewhere in the system.</span></span> <span data-ttu-id="f66ed-270">Dans ce cas, il est possible de surveiller la taille de la mise en file d'attente.</span><span class="sxs-lookup"><span data-stu-id="f66ed-270">For such a situation it is possible to monitor the Spool Size.</span></span>  
  
 <span data-ttu-id="f66ed-271">Si la file d'attente augmente de manière linéaire, il est possible d'approfondir les recherches afin de découvrir la file d'attente d'application responsable de cette augmentation.</span><span class="sxs-lookup"><span data-stu-id="f66ed-271">If the Spool is growing linearly, it is possible to further drill down by verifying which Application Queue is responsible for the Spool growth.</span></span>  
  
 <span data-ttu-id="f66ed-272">Si aucune file d'attente d'application ne grandit et que la mise en file d'attente continue d'augmenter, cela peut signifier que les travaux de purge ne suivent pas le rythme, soit parce que l'agent n'est pas exécuté, soit en raison d'un conflit d'autres ressources système sur le serveur SQL.</span><span class="sxs-lookup"><span data-stu-id="f66ed-272">If none of the application queues are growing and the Spool continues to grow it could mean that the purge jobs are unable to keep up either due to the agent not running or other system resource contention on the SQL server.</span></span>  
  
 <span data-ttu-id="f66ed-273">Si aucune file d'attente d'application ne grandit, il est important de diagnostiquer la cause de cette augmentation.</span><span class="sxs-lookup"><span data-stu-id="f66ed-273">If one of the application queues are growing, it is important to diagnose the cause of this growth.</span></span> <span data-ttu-id="f66ed-274">Surveillez les ressources du système qui ne parvient pas à vider la file d'attente d'application spécifiée (par exemple, la file d'attente d'hôte d'orchestration qui augmente en raison d'une UC insuffisante sur le serveur).</span><span class="sxs-lookup"><span data-stu-id="f66ed-274">Monitor the system resources on the system that is unable to drain the specific application queue (for example, Orchestration Host-Q is growing due to CPU starvation on the server).</span></span> <span data-ttu-id="f66ed-275">Vérifiez également les valeurs du compteur de limitations de l'instance d'hôte spécifique.</span><span class="sxs-lookup"><span data-stu-id="f66ed-275">In addition verify the values of the throttling counter for the specific host instance.</span></span>  
  
 <span data-ttu-id="f66ed-276">Si l'état de remise/publication ne présente pas la valeur zéro, vérifiez cette valeur afin de confirmer la raison de la limitation (par exemple, dépassement du seuil de la mémoire, nombre de messages en vol trop élevé, etc.).</span><span class="sxs-lookup"><span data-stu-id="f66ed-276">If the Delivery/Publishing State is not zero, check the value to confirm the reason for throttling (for example, memory threshold exceeded, in-flight message count too high etc.).</span></span>  
  
## <a name="f1-profiler"></a><span data-ttu-id="f66ed-277">Générateur de profils F1</span><span class="sxs-lookup"><span data-stu-id="f66ed-277">F1 Profiler</span></span>  
 <span data-ttu-id="f66ed-278">Grâce aux compteurs de performances, il est possible de détecter rapidement, à un niveau élevé, l'emplacement d'un goulot d'étranglement.</span><span class="sxs-lookup"><span data-stu-id="f66ed-278">By using performance counters, it is possible to quickly detect at a high level the location of the bottleneck.</span></span> <span data-ttu-id="f66ed-279">Cependant, une fois la recherche affinée, il peut se révéler nécessaire de rechercher la solution au problème jusque dans le code.</span><span class="sxs-lookup"><span data-stu-id="f66ed-279">However, once narrowed down, it may be necessary to drill down further into the code to help alleviate the problem.</span></span> <span data-ttu-id="f66ed-280">Le Générateurs de profils F1 fourni avec Visual Studio est un outil qui peut se montrer très utile au diagnostic de l'utilisation des cycles de code.</span><span class="sxs-lookup"><span data-stu-id="f66ed-280">The F1 Profiler that ships with Visual Studio can be a very helpful tool to help diagnose where the code is spending most of its cycles.</span></span>  
  
 <span data-ttu-id="f66ed-281">Les symboles sont importants pour faciliter la création d'une pile plus utile (en particulier pour du code non managé).</span><span class="sxs-lookup"><span data-stu-id="f66ed-281">Symbols are important to help with creating a more meaningful stack (especially for unmanaged code).</span></span> <span data-ttu-id="f66ed-282">Ainsi, le Générateur de profils F1 peut permettre de déterminer de façon très précise le nombre d'appels, ainsi que le temps de retour d'un appel d'API.</span><span class="sxs-lookup"><span data-stu-id="f66ed-282">For example, the F1-Profiler can help pinpoint the number of invocations and the amount of time an API call takes to return.</span></span> <span data-ttu-id="f66ed-283">Encore plus en avant dans la pile, il peut être possible de détecter la cause sous-jacente de la latence élevée.</span><span class="sxs-lookup"><span data-stu-id="f66ed-283">Drilling further down the stack, it may be possible to detect the underlying cause of the high latency.</span></span> <span data-ttu-id="f66ed-284">Il peut s'agir d'un appel bloquant vers une requête de base de données ou simplement d'un appel d'attente d'un événement.</span><span class="sxs-lookup"><span data-stu-id="f66ed-284">It could be a blocking call to a database query or simply a call to wait on an event.</span></span>  
  
## <a name="l2l3-cache"></a><span data-ttu-id="f66ed-285">Cache L2/L3</span><span class="sxs-lookup"><span data-stu-id="f66ed-285">L2/L3 Cache</span></span>  
 <span data-ttu-id="f66ed-286">Les principaux avantages (d'un point de vue matériel) dont vous pouvez bénéficier découlent de l'utilisation du cache interne de l'UC.</span><span class="sxs-lookup"><span data-stu-id="f66ed-286">The biggest benefits (from a hardware perspective) that can be gained is by utilizing onboard CPU cache.</span></span> <span data-ttu-id="f66ed-287">L'augmentation de cette mémoire cache permet d'accroître le taux d'accès au cache et de réduire ainsi la nécessité pour le système de paginer les données en dehors et à l'intérieur de la mémoire sur le disque.</span><span class="sxs-lookup"><span data-stu-id="f66ed-287">Higher CPU cache helps increase cache hit rate reducing the need for the system to page data in and out of memory to disk.</span></span>  
  
## <a name="64-bit-performance-bottlenecks"></a><span data-ttu-id="f66ed-288">Goulots d'étranglement des performances 64 bits</span><span class="sxs-lookup"><span data-stu-id="f66ed-288">64-Bit Performance Bottlenecks</span></span>  
 <span data-ttu-id="f66ed-289">Les performances des systèmes 64 bits peuvent paraître inférieures à celles qu'il est possible d'atteindre sur les systèmes 32 bits.</span><span class="sxs-lookup"><span data-stu-id="f66ed-289">Performance on 64-bit systems may appear lower than what can be achieved on 32-bit systems.</span></span> <span data-ttu-id="f66ed-290">Ceci est dû à plusieurs raisons, la plus importante étant la mémoire.</span><span class="sxs-lookup"><span data-stu-id="f66ed-290">This is possible due to a couple of reasons, the most important one being memory.</span></span>  
  
 <span data-ttu-id="f66ed-291">L'évaluation des performances sur un système 32 bits avec 2 Go de mémoire et la comparaison des résultats avec ceux obtenus sur un système 64 bits similaire avec 2 Go de mémoire ne constitue pas une véritable comparaison.</span><span class="sxs-lookup"><span data-stu-id="f66ed-291">Measuring performance on a 32-bit system with 2-GB of memory and comparing the results to what can be achieved on a similar 64-bit system with 2-GB of memory is not a true apples to apples comparison.</span></span> <span data-ttu-id="f66ed-292">Le système 64 bits semblera être lié aux entrées/sorties du disque (% d'inactivité du disque faible & longueur de file d'attente du disque importante) et lié à l'UC (UC max. & basculements de contexte élevés).</span><span class="sxs-lookup"><span data-stu-id="f66ed-292">The 64-bit system will appear to be disk-IO bound (low % Disk Idle time & high Disk Queue Length) and CPU bound (max CPU & high Context Switching).</span></span> <span data-ttu-id="f66ed-293">Cependant, ce n'est pas parce que l'exécution d'une E/S de fichier est plus onéreuse.</span><span class="sxs-lookup"><span data-stu-id="f66ed-293">However, this is not because performing file IO on a 64-bit system is more expensive.</span></span>  
  
 <span data-ttu-id="f66ed-294">Le système 64 bits est plus gourmand en mémoire (adressage 64 bits), ce qui fait que le système d'exploitation consomme la plupart des 2 Go de mémoire disponible.</span><span class="sxs-lookup"><span data-stu-id="f66ed-294">The 64-bit system is more memory hungry (64-bit addressing) which results in the OS consuming most of the 2-GB available memory.</span></span> <span data-ttu-id="f66ed-295">Dans ce cas, la plupart des autres opérations entraînent une pagination sur le disque, ce qui affecte le sous-système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="f66ed-295">Once this happens most other operations cause paging to disk which stresses the file subsystem.</span></span> <span data-ttu-id="f66ed-296">Le système utilise alors les cycles de l'UC pour effectuer une pagination à la fois de données et de code à l'intérieur et à l'extérieur de la mémoire. De plus, il subit l'importante latence du disque.</span><span class="sxs-lookup"><span data-stu-id="f66ed-296">The system now not only spends CPU cycles paging in/out of memory both data and code but is also impacted by the high disk latency cost.</span></span> <span data-ttu-id="f66ed-297">Cela se traduit par un plus grand nombre de conflits sur le disque et par une plus grande utilisation de l'UC.</span><span class="sxs-lookup"><span data-stu-id="f66ed-297">This manifests itself as both higher disk contention and higher CPU consumption.</span></span>  
  
 <span data-ttu-id="f66ed-298">Pour résoudre ce problème, vous pouvez procéder à une évolution verticale du serveur, à savoir augmenter sa mémoire (idéalement 8 Go).</span><span class="sxs-lookup"><span data-stu-id="f66ed-298">The way to alleviate this problem is to scale-up the server by upgrading the memory (ideally 8-GB).</span></span> <span data-ttu-id="f66ed-299">Cependant, le fait d'ajouter de la mémoire ne permet pas d'améliorer le débit, sauf si l'origine du problème est une UC insuffisante due à une mémoire faible.</span><span class="sxs-lookup"><span data-stu-id="f66ed-299">However, adding more memory will not help improve throughput unless the source of the problem is CPU starvation due to low memory conditions.</span></span>  
  
## <a name="using-bam-to-identify-bottlenecks-and-high-latency-issues"></a><span data-ttu-id="f66ed-300">Utilisation de l'analyse BAM pour identifier les goulots d'étranglement et les problèmes de latence</span><span class="sxs-lookup"><span data-stu-id="f66ed-300">Using BAM to identify bottlenecks and high latency issues</span></span>  
 <span data-ttu-id="f66ed-301">Lorsque la latence est trop faible, vous pouvez utiliser l'analyse BAM pour calculer le temps mis par le système pour réaliser chaque étape du système BizTalk.</span><span class="sxs-lookup"><span data-stu-id="f66ed-301">In situations where low latency is important, you can use BAM to measure the time the system takes to complete each stage within the BizTalk system.</span></span> <span data-ttu-id="f66ed-302">Bien que les données des instances de service et des événements de message suivis puissent être utilisées pour déboguer l'état des messages et diagnostiquer l'origine des problèmes de routage des messages, l'analyse BAM permet de vérifier plusieurs éléments au sein du flux de messages.</span><span class="sxs-lookup"><span data-stu-id="f66ed-302">Although  tracked message event and service instance data can be used to debug the state of messages and diagnose the source of problems in routing messages, BAM can be used to track various points through the message flow.</span></span> <span data-ttu-id="f66ed-303">En créant un modèle de suivi BAM (définition d'une activité avec des continuations), vous pouvez calculer la latence entre les différentes parties du système afin de découvrir les étapes les plus onéreuses du processus de workflow.</span><span class="sxs-lookup"><span data-stu-id="f66ed-303">By creating a BAM tracking profile (defining an activity with continuations), you can measure latency between different parts of the system to help track the most expensive stages within the workflow process.</span></span>