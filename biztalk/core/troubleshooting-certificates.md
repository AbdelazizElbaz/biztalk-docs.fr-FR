---
title: "Dépannage des certificats | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: b7013db6-ebf7-4294-a072-e9b5b0ad0de2
caps.latest.revision: "26"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: eb8e3227662ffb82f45a187c1a6fecded90e6443
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="troubleshooting-certificates"></a>Résolution des problèmes de certificats
Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] peut utiliser des certificats numériques d'infrastructure de clé publique pour le chiffrement et le déchiffrement de documents, pour la signature de documents et la vérification (non-répudiation), ainsi que pour la résolution de tiers. Cette rubrique décrit les divers scénarios d'utilisation des certificats et options de configuration, et fournit des recommandations d'ordre général sur l'utilisation des certificats numériques avec [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].  
  
## <a name="certificate-usage-scenarios-and-configuration-options"></a>Scénarios d'utilisation de certificats et options de configuration  
 La plupart des problèmes qui surviennent lors de l'utilisation de certificats avec [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] sont dus à une configuration incorrecte ou incomplète. Par exemple, importer le certificat correct dans le magasin incorrect, le certificat incorrect dans le magasin correct, ou ne pas entrer les informations appropriées dans la console Administration de BizTalk génère des erreurs d'exécution lors de l'utilisation des certificats.  
  
 Utilisez le tableau suivant comme référence pour les scénarios d'utilisation de certificats et options de configuration disponibles dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] :  
  
|**Utilisation des certificats**|**Contexte de l’utilisateur**|**Emplacement du magasin de certificats**|**Type de certificat**|**Composant de pipeline utilisé**|**Configuration des paramètres dans la Console Administration de BizTalk Server**|  
|---------------------------|----------------------|------------------------------------|--------------------------|---------------------------------|-------------------------------------------------------------------------------|  
|Chiffrement (envoi)|Compte utilisé par l'instance d'hôte associée au gestionnaire d'envoi|Ouvrez une session sur chaque ordinateur exécutant [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] qui hébergera pipelines encodeur S/MIME et importez le certificat de chiffrement dans le **ordinateur Local \ autres personnes** stocker.|Certificat public de partenaire commercial|Encodeur MIME/SMIME|-Spécifiez des valeurs pour le certificat de chiffrement **nom commun** et **l’empreinte numérique** sur la **certificat** page de le **propriétés de Port d’envoi**boîte de dialogue.<br />-Spécifiez le pipeline **Encode** options dans le **configurer le Pipeline** boîte de dialogue. Le **configurer le Pipeline** boîte de dialogue s’affiche en cliquant sur le bouton en regard du **pipeline d’envoi** liste déroulante sur le **général** page de la **envoyer Propriétés du port** boîte de dialogue.|  
|Déchiffrement (réception)|Compte utilisé par l'instance d'hôte associée au gestionnaire de réception|Ouvrez une session sur chaque ordinateur exécutant [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] qui hébergera pipelines décodeur S/MIME comme chaque compte de service d’instance hôte et importer le certificat de déchiffrement dans le **utilisateur actuel \ personnel** stocker. **Remarque :** pour le déchiffrement de pipeline réussisse sur un ordinateur IIS 7.0, vérifiez que le compte pour le pool d’applications IIS et le compte utilisé par l’instance d’hôte associé au Gestionnaire de réception sont identiques et que ce compte est un membre de la \<NomOrdinateur > \IIS_WPG groupe. Pour plus d’informations sur la définition de l’identité de processus IIS pour IIS 7.0, consultez [des recommandations pour la résolution des problèmes d’autorisation IIS](../core/guidelines-for-resolving-iis-permissions-problems.md). Ces processus doivent s'exécuter sous le même compte afin de garantir que le profil de compte est chargé, et qu'à son tour, il charge les clés de registre requises pour effectuer le déchiffrement dans le pipeline. Pour des raisons de performances, IIS 6.0 ne charge pas le profil de compte lors du démarrage du processus w3wp.exe associé. L'instance d'hôte [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] doit donc être configurée avec le même compte pour que [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] charge le profil de compte et les clés de registre.|Propre certificat privé|Décodeur MIME/SMIME|-Spécifiez des valeurs pour le certificat de déchiffrement **nom commun** et **l’empreinte numérique** sur la **certificats** page de chaque **propriétés de l’hôte**boîte de dialogue.<br />-Spécifiez le pipeline **Decode** options dans le **configurer le Pipeline** boîte de dialogue. Le **configurer le Pipeline** boîte de dialogue s’affiche en cliquant sur le bouton en regard du **pipeline de réception** liste déroulante sur le **général** page de la  **Propriétés de l’emplacement de réception** boîte de dialogue.|  
|Signature (envoi)|Compte utilisé par l'instance d'hôte associée au gestionnaire d'envoi|Ouvrez une session sur chaque ordinateur exécutant [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] qui hébergera pipelines encodeur S/MIME comme chaque compte de service d’instance hôte et importez le certificat de signature dans le **utilisateur actuel \ personnel** stocker.|Propre certificat privé|Encodeur MIME/SMIME|-Spécifiez des valeurs pour le certificat de signature **nom commun** et **l’empreinte numérique** sur la **certificat** page de le **propriétés du groupe BizTalk**boîte de dialogue. **Remarque :** le certificat de signature qu’une seule peut être spécifié par [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] groupe.<br />-Spécifiez le pipeline **Encode** options dans le **configurer le Pipeline** boîte de dialogue. Le **configurer le Pipeline** boîte de dialogue s’affiche en cliquant sur le bouton en regard du **pipeline d’envoi** liste déroulante sur le **général** page de la **envoyer Propriétés du port** boîte de dialogue.|  
|Vérification des signatures (réception)|Compte utilisé par l'instance d'hôte associée au gestionnaire de réception|Ouvrez une session sur chaque ordinateur exécutant [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] qui hébergera pipelines décodeur S/MIME et importez le certificat de signature dans le **ordinateur Local \ autres personnes** stocker.|Certificat public de partenaire commercial|Décodeur MIME/SMIME|-Spécifiez des valeurs pour le certificat de vérification **nom commun** et **l’empreinte numérique** sur la **certificats** page de chaque **propriétés de tiers**boîte de dialogue.<br />-Spécifiez le pipeline **Decode** options dans le **configurer le Pipeline** boîte de dialogue. Le **configurer le Pipeline** boîte de dialogue s’affiche en cliquant sur le bouton en regard du **pipeline de réception** liste déroulante sur le **général** page de la  **Propriétés de l’emplacement de réception** boîte de dialogue. **Remarque :** Configuration de la **Decode** option requiert qu’un pipeline avec le composant décodeur MIME/SMIME est déployé.|  
|Résolution du tiers (réception)|Compte utilisé par l'instance d'hôte associée au gestionnaire de réception|Ouvrez une session sur le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ordinateur à partir de quel tiers résolution en cours de configuration et importez le certificat dans le **ordinateur Local \ autres personnes** stocker.|Certificat public de partenaire commercial|Résolution du tiers|-Spécifier les valeurs pour le certificat **nom commun** et **l’empreinte numérique** sur la **certificats** page de chaque **propriétés de l’hôte** boîte de dialogue .<br />-Spécifier **Résoudretiers** options dans le **configurer le Pipeline** boîte de dialogue. Le **configurer le Pipeline** boîte de dialogue s’affiche en cliquant sur le bouton en regard du **pipeline de réception** liste déroulante sur le **général** page de la  **Propriétés de l’emplacement de réception** boîte de dialogue. **Remarque :** Configuration de cette option requiert l’utilisation d’un pipeline qui contienne le **une résolution de tiers** composant. Le **XMLReceive** pipeline contient le **une résolution de tiers** composant.|  
|HTTPS (envoi)|Compte utilisé par l'instance d'hôte associée au gestionnaire d'envoi|Les communications SSL ne requièrent pas de certificat client. La nécessité ou non d'un certificat de ce type est à la discrétion de l'administrateur du serveur Web de destination. Si le serveur Web de destination requiert un certificat client, procédez comme suit :<br /><br /> -Obtenir le certificat public du partenaire commercial.<br />-Connectez-vous à chaque ordinateur en cours d’exécution [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] en tant que le compte utilisé par l’instance d’hôte associé au gestionnaire d’envoi.<br />-Permet d’importer le certificat dans le **utilisateur actuel \ personnel** stocker.<br /><br /> Pour plus d’informations sur la façon d’obtenir un certificat à l’aide des pages Web des Services de certificats Windows Server 2008, consultez [demander un certificat via le Web](http://go.microsoft.com/fwlink/?LinkId=129628).|Certificat public de partenaire commercial|N/A|-   **HTTP Transport** - définissez la **empreinte de certificat client SSL** option sur le **authentification** onglet de la **propriétés du Transport HTTP** boîte de dialogue . Le **propriétés du Transport HTTP** boîte de dialogue s’affiche en cliquant sur le **configurer** bouton sur le **général** page de le **propriétés de Port d’envoi** boîte de dialogue.<br />-   **Transport SOAP** - définissez la **empreinte de certificat Client** option sur le **général** onglet de la **propriétés du Transport SOAP** boîte de dialogue. Le **propriétés du Transport SOAP** boîte de dialogue s’affiche en cliquant sur le **configurer** bouton sur le **général** page de le **propriétés de Port d’envoi** boîte de dialogue.|  
  
#### <a name="to-display-the-certificates-management-console-interface-for-local-computer-and-current-user"></a>Pour afficher l'interface de la console de gestion des certificats pour Ordinateur local et Utilisateur actuel  
  
1.  Cliquez sur **Démarrer**, cliquez sur **exécuter**, type **MMC**, puis cliquez sur **OK** pour ouvrir le **Microsoft Management Console**.  
  
2.  Cliquez sur le **fichier** menu, puis sur **ajouter/supprimer un composant logiciel enfichable** pour afficher les **ajouter/supprimer un composant logiciel enfichable** boîte de dialogue.  
  
3.  Sélectionnez **certificats** dans la liste des composants logiciels enfichables disponibles, cliquez sur **ajouter**.  
  
4.  Sélectionnez **compte d’ordinateur**, cliquez sur **suivant**, puis cliquez sur **Terminer**. Cette opération ajoute le **Console de gestion des certificats** pour l’interface **ordinateur Local**.  
  
5.  Vérifiez que **certificats** est toujours sélectionné dans la liste des composants logiciel enfichables, puis cliquez sur **ajouter** à nouveau.  
  
6.  Sélectionnez **mon compte d’utilisateur** puis cliquez sur **Terminer**. Cette opération ajoute le **Console de gestion des certificats** pour l’interface **utilisateur actuel**.  
  
    > [!NOTE]
    >  Cela permet d’afficher le **Console de gestion des certificats** pour le compte que vous êtes actuellement connecté en tant que. Pour importer des certificats dans le magasin Personnel d'un compte de service, vous devez d'abord ouvrir une session avec les informations d'identification de ce compte.  
  
7.  Cliquez sur le **OK** bouton sur le **ajouter/supprimer un composant logiciel enfichable** boîte de dialogue.  
  
## <a name="general-guidelines"></a>Règles générales  
  
-   **Assurez-vous que le certificat importé est utilisé pour son usage prévu**: pour ce faire, double-cliquez sur le certificat dans le **Console de gestion des certificats** de l’interface, puis cliquez sur le **détails**  onglet de la **certificat** boîte de dialogue. Puis cliquez sur le **tous les** est définie sur le **afficher** liste déroulante, puis pour sélectionner la **utilisation de la clé** et/ou **utilisation améliorée de la clé** champs Pour vérifier l’utilisation prévue. Si [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] tente d'utiliser un certificat pour un usage autre que celui prévu, une erreur d'exécution se produit.  
  
-   **Testez votre connexion au site Web cible**: Si vous utilisez SSL, vérifiez que vous pouvez vous connecter au site Web cible avec Internet Explorer avant d’essayer de se connecter au site Web cible avec les transports HTTP ou SOAP. Vérifiez qu’aucune boîte de dialogue n’est affichées dans Internet Explorer, lorsque vous vous connectez au site Web cible. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]n’a pas de mécanisme permettant de s’interfacer avec les boîtes de dialogue peut s’afficher lors de la connexion au site web cible. Une boîte de dialogue peut être affichée par Internet Explorer si le nom du site web cible ne correspond pas à celui spécifié pour le site web dans le certificat SSL ou si l’autorité de certification racine pour le certificat SSL n’est pas dans la liste appropriée **racine de confiance Autorités de certification** stocker.  
  
-   **Utilisez l’outil de diagnostic SSL pour analyser les problèmes de connexion SSL :** cet outil est un composant facultatif de la boîte à outils de diagnostic IIS.  Télécharger les outils de diagnostic IIS depuis [Internet Information Services des outils de Diagnostic](http://go.microsoft.com/fwlink/?LinkId=64426).  
  
-   **Assurez-vous que le certificat est valide**. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ne vous demande pas si le certificat a expiré. Au lieu de cela, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] suspend le message.  
  
## <a name="see-also"></a>Voir aussi  
 [Chiffrement et les certificats de signature](../core/encryption-and-signing-certificates.md)