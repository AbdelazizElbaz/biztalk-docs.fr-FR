---
title: "Amélioration des performances de l’archivage et la purge des processus | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- archiving [Tracking database], system performance
- DTA Purge and Archive job, performance
- purging, limitations
- performance, archiving
- performance, purging
- purging, system performance
ms.assetid: d65da58d-65e0-4f6c-8b15-5d4448049b42
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 3876021fec4d604960d672671cab8bf4be1dc0a5
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="improving-the-performance-of-the-archiving-and-purging-process"></a><span data-ttu-id="ea5c8-102">Amélioration des performances des processus d'archivage et de purge</span><span class="sxs-lookup"><span data-stu-id="ea5c8-102">Improving the Performance of the Archiving and Purging Process</span></span>
<span data-ttu-id="ea5c8-103">La quantité de données stockées dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de données peuvent augmenter très rapidement selon que vous avez conçu votre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] scénario, selon le nombre et la taille des messages traités par votre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] scénario et selon la façon dont vous avez configuration de suivi.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-103">The amount of data stored in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases can grow very quickly depending on how you have designed your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] scenario, depending on the number and size of messages processed by your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] scenario, and depending on how you have configured tracking.</span></span> <span data-ttu-id="ea5c8-104">En maintenant la taille de votre base de données à un niveau de fonctionnement normal, le traitement des messages est plus efficace et le volume de données de votre système est ramené à un niveau normal à tout moment.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-104">By maintaining your database size at a healthy level, processing is more efficient and the amount of data in your system is normalized at any given time.</span></span> <span data-ttu-id="ea5c8-105">Les performances sont ainsi améliorées et gagnent en régularité.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-105">This provides efficient and consistent performance.</span></span> <span data-ttu-id="ea5c8-106">En automatisant ce processus, vous n'avez plus à gérer manuellement vos bases de données.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-106">By automating this process you free yourself of the burden of manually maintaining your databases.</span></span>  
  
## <a name="configuring-a-healthy-environment"></a><span data-ttu-id="ea5c8-107">Configuration d'un environnement pour un fonctionnement normal</span><span class="sxs-lookup"><span data-stu-id="ea5c8-107">Configuring a healthy environment</span></span>  
 <span data-ttu-id="ea5c8-108">Votre stratégie en matière de maintien de l'environnement [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] en état de fonctionnement normal dépend essentiellement du scénario adopté et du matériel sur lequel il est exécuté.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-108">Your strategy in maintaining a healthy [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment is heavily dependent on your particular scenario and the hardware it is running on.</span></span> <span data-ttu-id="ea5c8-109">Les éléments clés à surveiller sont le volume de votre base de données des suivis BizTalk (BizTalkDTADb) et son taux d'augmentation.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-109">The key things to monitor are the rate of growth and the size of your BizTalk Tracking (BizTalkDTADb) database.</span></span> <span data-ttu-id="ea5c8-110">Quelques-unes des tables de la base de données des suivis constituent à elles-seules l'essentiel du volume de données et, par conséquent, sont celles qui ont le plus d'impact sur les performances des composants d'exécution.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-110">A few tables of the tracking database account for bulk of the database size and hence the performance impact on runtime.</span></span>  
  
 <span data-ttu-id="ea5c8-111">Un même scénario peut être configuré pour générer des volumes de données de suivi très différents selon le nombre de points de suivi présents, le nombre de messages différents utilisés, la taille des messages et le niveau de suivi des corps de message défini.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-111">The same scenario can be configured to produce vastly different amount of tracking data based on how many tracking points are present, how many different messages are used, size of the messages and the level of message body tracking used.</span></span> <span data-ttu-id="ea5c8-112">Vous trouverez ci-après une liste des éléments à prendre en compte :</span><span class="sxs-lookup"><span data-stu-id="ea5c8-112">Following are some important factors to monitor:</span></span>  
  
-   <span data-ttu-id="ea5c8-113">Nombre de points de suivi (pipelines, orchestrations, ports)</span><span class="sxs-lookup"><span data-stu-id="ea5c8-113">Number of tracking points - such as pipelines, orchestrations, and ports</span></span>  
  
-   <span data-ttu-id="ea5c8-114">Nombre de propriétés de message soumises à un suivi</span><span class="sxs-lookup"><span data-stu-id="ea5c8-114">Number of message properties tracked</span></span>  
  
-   <span data-ttu-id="ea5c8-115">Nombre de messages créés par message entrant</span><span class="sxs-lookup"><span data-stu-id="ea5c8-115">Number of messages per incoming message</span></span>  
  
-   <span data-ttu-id="ea5c8-116">Taille du message</span><span class="sxs-lookup"><span data-stu-id="ea5c8-116">Message size</span></span>  
  
-   <span data-ttu-id="ea5c8-117">Débit du trafic (moyen et maximal)</span><span class="sxs-lookup"><span data-stu-id="ea5c8-117">Traffic rate (average and peak)</span></span>  
  
-   <span data-ttu-id="ea5c8-118">Configuration du suivi des corps de message</span><span class="sxs-lookup"><span data-stu-id="ea5c8-118">Message body tracking configuration</span></span>  
  
 <span data-ttu-id="ea5c8-119">Lorsque vous envisagez d'automatiser l'archivage et la purge des données, déterminez la quantité de données actives que vous devez garder dans votre base de données des suivis.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-119">When considering automatic archiving and purging of data consider how much live data you need to keep in your tracking database.</span></span> <span data-ttu-id="ea5c8-120">Il vous faut ajuster les paramètres du travail de purge et d'archivage DTA en fonction de votre environnement, de sorte que le volume de données actives souhaité puisse être pris en charge par le processus de purge sans entraîner de dégradation en termes de performances.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-120">You need to tune the DTA Purge and Archive job parameters as appropriate for your environment so that the targeted amount of live data can be supported by the purging performance without degradation.</span></span>  
  
 <span data-ttu-id="ea5c8-121">Le travail de purge et d'archivage DTA peut purger une certaine quantité de données dans un intervalle de temps donné.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-121">The DTA Purge and Archive job can purge a certain amount of data within a given time interval.</span></span> <span data-ttu-id="ea5c8-122">La capacité du travail dépend des scénarios exécutés, de la taille actuelle de la base de données et du matériel utilisé.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-122">The capacity of the job depends on the scenarios running, the current database size, and the hardware.</span></span> <span data-ttu-id="ea5c8-123">Pour obtenir un environnement stable, vous devez parvenir à un équilibre entre la création et la purge des données de suivi entrantes.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-123">In order to have a stable environment, you must have a balance between the incoming tracking data generation and purging.</span></span> <span data-ttu-id="ea5c8-124">Dans votre environnement de test, cet équilibre peut être établi en modulant la quantité de données dans la fenêtre active et la fréquence du travail de purge.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-124">In your test environment, you can find the balance by varying the live window of data and the frequency of the purging job.</span></span> <span data-ttu-id="ea5c8-125">Dans une situation d'équilibre, votre système fournit un débit acceptable constant.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-125">In a balanced state, your system will deliver sustainable throughput.</span></span> <span data-ttu-id="ea5c8-126">L'objectif consiste à disposer en permanence de suffisamment de mémoire tampon pour que le volume de la table de base de données des suivis BizTalk n'entraîne pas de problèmes sérieux et durables au niveau des performances.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-126">Your goal is to have enough of a buffer before the BizTalk Tracking database table size causes sustained, significant performance issues.</span></span>  
  
## <a name="performance-limitations"></a><span data-ttu-id="ea5c8-127">Limitations des performances</span><span class="sxs-lookup"><span data-stu-id="ea5c8-127">Performance limitations</span></span>  
 <span data-ttu-id="ea5c8-128">Les performances de purge n'évoluent pas forcément en fonction des scénarios.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-128">Purging performance will not scale for all scenarios.</span></span> <span data-ttu-id="ea5c8-129">Dans tous les scénarios, il est possible de générer des volumes de données de suivi grandissants.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-129">For any scenario, it is possible to generate increasing amounts of tracking data.</span></span> <span data-ttu-id="ea5c8-130">Lorsque la fréquence de purge des données de suivi diminue de manière constante, le volume de la base de données des suivis augmente en conséquence et entraîne une dégradation progressive des performances du processus de purge.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-130">When tracking data is purged at a consistently slower rate, there is a buildup of the tracking database size, which worsens the purging performance further.</span></span>  
  
 <span data-ttu-id="ea5c8-131">Dans des conditions de charge de travail trop importante, le processus de copie des corps de message peut ralentir et des accumulations de messages peuvent se produire dans la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-131">Under unsustainable load conditions, the copying of message bodies may also become slower and there may become a backlog in the MessageBox database.</span></span> <span data-ttu-id="ea5c8-132">Dans des conditions d'utilisation extrêmes, la copie et le suivi quotidiens des corps de message risquent d'aboutir à des archivages. Les corps de messages ainsi archivés ne sont donc plus disponibles, même s'ils contiennent des informations relatives aux instances.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-132">Under extreme conditions, the daily message body copying and tracking may lead to archives where the message body is not available even though it contains related instance information.</span></span> <span data-ttu-id="ea5c8-133">En général, des périodes de charge élevée alternent avec des périodes de charge plus faible, ce qui permet au travail de se rattraper pendant les périodes de faible charge.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-133">Typically, periods of high loads alternate with periods of low load and enable the job to catch up during periods of low load.</span></span>  
  
 <span data-ttu-id="ea5c8-134">L'archivage et la purge des bases de données de suivi BizTalk réduit considérablement les risques de conditions de charge inacceptables du fait de la purge continue de la base et du compactage des données de suivi stockées.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-134">Archiving and purging the BizTalk Tracking database should considerably reduce the possibility of unsustainable load conditions because of the continuous pruning of the database and the compaction of stored tracking data.</span></span> <span data-ttu-id="ea5c8-135">Ces processus permettent de limiter de façon significative les interventions manuelles.</span><span class="sxs-lookup"><span data-stu-id="ea5c8-135">These processes greatly reduce the need for manual intervention.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ea5c8-136">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ea5c8-136">See Also</span></span>  
 [<span data-ttu-id="ea5c8-137">Archivage et purge de la base de données de suivi BizTalk</span><span class="sxs-lookup"><span data-stu-id="ea5c8-137">Archiving and Purging the BizTalk Tracking Database</span></span>](../core/archiving-and-purging-the-biztalk-tracking-database.md)