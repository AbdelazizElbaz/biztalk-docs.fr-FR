---
title: "Conversion des modèles de Service, la Solution orientée services | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- patterns [service solutions], translating patterns to orchestration shapes
- artifacts, patterns
- orchestrations, patterns
- patterns [process management solutions], connections
- patterns [service solutions], orchestration boundaries
- patterns [process management solutions], translating patterns to orchestrations
- orchestrations, boundaries
- patterns [service solutions], translating patterns to artifacts
ms.assetid: ff17cc41-2a7b-4304-b5bd-96b1174cea7f
caps.latest.revision: "19"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 95285c93bdb290adbee988305dbcd365e4e729a6
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="translating-the-patterns-of-the-service-oriented-solution"></a><span data-ttu-id="4ed84-102">Conversion des modèles de Service, la Solution orientée services</span><span class="sxs-lookup"><span data-stu-id="4ed84-102">Translating the Patterns of the Service Oriented Solution</span></span>
<span data-ttu-id="4ed84-103">Cette section décrit les modalités de conversion du diagramme modèle en artefacts BizTalk Server par la solution.</span><span class="sxs-lookup"><span data-stu-id="4ed84-103">This section describes how the solution translates the pattern diagram into BizTalk Server artifacts.</span></span>  
  
 <span data-ttu-id="4ed84-104">![Service &#45; les modèles de Solution orientée services](../core/media/service-oriented-solution-patterns.gif "Service_Oriented_Solution_Patterns")</span><span class="sxs-lookup"><span data-stu-id="4ed84-104">![Service&#45;Oriented Solution Patterns](../core/media/service-oriented-solution-patterns.gif "Service_Oriented_Solution_Patterns")</span></span>  
  
## <a name="connections-and-completeness-conditions"></a><span data-ttu-id="4ed84-105">Connexions et conditions d'exhaustivité</span><span class="sxs-lookup"><span data-stu-id="4ed84-105">Connections and Completeness Conditions</span></span>  
 <span data-ttu-id="4ed84-106">Nous pouvons démarrer de n'importe où la conversion des modèles en composants BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="4ed84-106">We can pretty much start anywhere with translating the patterns into BizTalk Server components.</span></span> <span data-ttu-id="4ed84-107">Cependant, les connexions entre les composants sont, en effet, l'infrastructure des composants. Il s'agit donc d'un bon endroit pour commencer.</span><span class="sxs-lookup"><span data-stu-id="4ed84-107">However, the connections among the components are, in effect, the infrastructure for the components so that it seems a good place to start.</span></span> <span data-ttu-id="4ed84-108">En outre, dans le cas du modèle d'agrégation, nous devons penser à ce qui va indiquer l'exhaustivité des informations nécessaires.</span><span class="sxs-lookup"><span data-stu-id="4ed84-108">Also, in the case of the aggregator pattern, we need to think about what will tell it that it has all of the information it needs.</span></span> <span data-ttu-id="4ed84-109">Cela affecte ses connexions aux autres composants ainsi que sa conception.</span><span class="sxs-lookup"><span data-stu-id="4ed84-109">This affects both its connections to other components as well as its design.</span></span>  
  
 <span data-ttu-id="4ed84-110">La solution doit fournir une méthode d'utilisation pratique et cohérente.</span><span class="sxs-lookup"><span data-stu-id="4ed84-110">The solution needs to provide a convenient and consistent way of being used.</span></span> <span data-ttu-id="4ed84-111">L'interface de service spécifie comment d'autres applications peuvent l'utiliser.</span><span class="sxs-lookup"><span data-stu-id="4ed84-111">The service interface specifies how other applications can use it.</span></span> <span data-ttu-id="4ed84-112">Comme la solution doit communiquer avec une application héritée à l'aide d'IBM WebSphere MQ, IBM WebSphere MQ doit faire partie de l'interface de service.</span><span class="sxs-lookup"><span data-stu-id="4ed84-112">Because the solution needs to communicate with a legacy application using IBM WebSphere MQ, IBM WebSphere MQ needs to be part of the service interface.</span></span> <span data-ttu-id="4ed84-113">Toutefois, pour les applications plus récentes, une interface de service Web semble être un choix évident.</span><span class="sxs-lookup"><span data-stu-id="4ed84-113">However, for newer applications, a Web service interface seems an obvious choice.</span></span> <span data-ttu-id="4ed84-114">Une interface de service Web offre une souplesse maximale pour les autres applications utilisant le service.</span><span class="sxs-lookup"><span data-stu-id="4ed84-114">A Web service interface provides maximum flexibility for other applications using the service.</span></span> <span data-ttu-id="4ed84-115">Ici, nous pouvons bénéficier de la souplesse de BizTalk Server pour avoir une interface de service double.</span><span class="sxs-lookup"><span data-stu-id="4ed84-115">Here, we can use the flexibility of BizTalk Server to have a dual service interface.</span></span> <span data-ttu-id="4ed84-116">Pour plus d’informations sur l’exposition des orchestrations en tant que services Web, consultez [comment le mappage des Orchestrations aux Services Web](../core/how-to-map-orchestrations-to-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="4ed84-116">For information about exposing orchestrations as Web services, see [How to Map Orchestrations to Web Services](../core/how-to-map-orchestrations-to-web-services.md).</span></span>  
  
 <span data-ttu-id="4ed84-117">Les autres connexions sont celles entre l'interface de service et la liste de destinataires, entre la liste de destinataires et les applications principales, ainsi qu'entre les applications principales, l'agrégation et l'interface de service.</span><span class="sxs-lookup"><span data-stu-id="4ed84-117">The other connections are those between the service interface and the recipient list, between the recipient list and the back-end applications, and among the back-end applications, aggregator, and the service interface.</span></span>  
  
 <span data-ttu-id="4ed84-118">Si la connexion à la liste de destinataires est synchrone, la solution ne doit pas utiliser de corrélations pour veiller à ce que tous les messages adressés à la liste de destinataires soient envoyés et reçus.</span><span class="sxs-lookup"><span data-stu-id="4ed84-118">If the connection to the recipient list is synchronous, the solution does not need to use correlations to ensure all messages to the recipient list are sent and received.</span></span> <span data-ttu-id="4ed84-119">Les connexions entre les applications principales et l'agrégation peuvent être synchrones pour les mêmes raisons.</span><span class="sxs-lookup"><span data-stu-id="4ed84-119">The connections between the back-end applications and the aggregator can be synchronous for the same reasons.</span></span> <span data-ttu-id="4ed84-120">L'agrégation a besoin des réponses des trois applications principales pour préparer la réponse à la demande.</span><span class="sxs-lookup"><span data-stu-id="4ed84-120">The aggregator needs the responses from all three of the back-end applications to complete the query response.</span></span> <span data-ttu-id="4ed84-121">Les temps de réponse doivent être courts afin que les connexions synchrones soient appropriées et simplifient la solution.</span><span class="sxs-lookup"><span data-stu-id="4ed84-121">Response times should be short so that synchronous connections are appropriate and simplify the solution.</span></span>  
  
 <span data-ttu-id="4ed84-122">Dans le modèle d'agrégation, il existe généralement une condition d'exhaustivité.</span><span class="sxs-lookup"><span data-stu-id="4ed84-122">In the aggregator pattern, there is usually a completeness condition.</span></span> <span data-ttu-id="4ed84-123">Dans les cas où il existe plusieurs serveurs principaux et de longs temps de réponse, la condition d'exhaustivité peut être, par exemple, la réception d'au moins une réponse dans une période donnée.</span><span class="sxs-lookup"><span data-stu-id="4ed84-123">In cases where there are multiple back-end servers and response times are slow, the completeness condition might be, for example, receiving at least one response in a given time period.</span></span> <span data-ttu-id="4ed84-124">Cette solution orientée services nécessite les trois réponses afin de construire le message final.</span><span class="sxs-lookup"><span data-stu-id="4ed84-124">This service-oriented solution requires all three responses in order to construct the final message.</span></span> <span data-ttu-id="4ed84-125">Par conséquent, ici, la condition d'exhaustivité est la réception des trois réponses.</span><span class="sxs-lookup"><span data-stu-id="4ed84-125">Thus, here, the completeness condition is receiving all three responses.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4ed84-126">Lors de la réception des demandes via IBM WebSphere MQ, la solution ajoute un identificateur de corrélation en copiant le **MQMD_MsgId** valeur le **MQMD_CorrelId** du message de réponse.</span><span class="sxs-lookup"><span data-stu-id="4ed84-126">When receiving requests through IBM WebSphere MQ, the solution adds a correlation identifier by copying the **MQMD_MsgId** value to the **MQMD_CorrelId** of the response message.</span></span> <span data-ttu-id="4ed84-127">Cela fait partie de la méthode d'utilisation standard de l'adaptateur MQSeries dans les scénarios de requête-réponse afin d'éviter une possible condition d'engorgement.</span><span class="sxs-lookup"><span data-stu-id="4ed84-127">This is part of the standard way of using the MQSeries adapter in request-reply to avoid a possible race condition.</span></span> <span data-ttu-id="4ed84-128">Pour plus d’informations, consultez [mise en corrélation de demande-réponse d’à l’aide des Messages](../core/correlating-messages-using-request-reply.md).</span><span class="sxs-lookup"><span data-stu-id="4ed84-128">For more information, see [Correlating Messages Using Request-Reply](../core/correlating-messages-using-request-reply.md).</span></span>  
  
## <a name="determining-orchestration-boundaries"></a><span data-ttu-id="4ed84-129">Identification des limites de l'orchestration</span><span class="sxs-lookup"><span data-stu-id="4ed84-129">Determining Orchestration Boundaries</span></span>  
 <span data-ttu-id="4ed84-130">La solution doit être compatible avec les demandes d'une file d'attente IBM WebSphere MQ et via l'interface de service Web.</span><span class="sxs-lookup"><span data-stu-id="4ed84-130">The solution must allow for requests from an IBM WebSphere MQ queue as well as through the Web service interface.</span></span> <span data-ttu-id="4ed84-131">Placer l'interface de service dans une orchestration, l'entrée IBM WebSphere MQ dans une autre et la majeure partie du traitement dans une troisième permet de garder la communication externe séparée du traitement.</span><span class="sxs-lookup"><span data-stu-id="4ed84-131">Putting the service interface into one orchestration, the IBM WebSphere MQ input into another, and the bulk of the processing into a third keeps the external communication separated from the processing.</span></span>  
  
## <a name="translating-the-components-into-orchestration-shapes"></a><span data-ttu-id="4ed84-132">Conversion des composants en formes d'orchestration</span><span class="sxs-lookup"><span data-stu-id="4ed84-132">Translating the Components into Orchestration Shapes</span></span>  
 <span data-ttu-id="4ed84-133">Les modèles à convertir en formes sont, dans la solution finale, dans une seule orchestration.</span><span class="sxs-lookup"><span data-stu-id="4ed84-133">The patterns to translate into shapes will, in the final solution, be in a single orchestration.</span></span> <span data-ttu-id="4ed84-134">Il existe de nombreux moyens de créer un routeur basé sur le contenu dans BizTalk Server, y compris la création d'abonnements MessageBox.</span><span class="sxs-lookup"><span data-stu-id="4ed84-134">There are numerous ways to create a content-based router in BizTalk Server, including creating MessageBox subscriptions.</span></span> <span data-ttu-id="4ed84-135">Dans la solution, le routage utilise des abonnements MessageBox.</span><span class="sxs-lookup"><span data-stu-id="4ed84-135">In the solution, the routing uses MessageBox subscriptions.</span></span> <span data-ttu-id="4ed84-136">Une forme Expression évalue si le message inclut ou non des valeurs pour les champs requis.</span><span class="sxs-lookup"><span data-stu-id="4ed84-136">An expression shape evaluates whether or not the message includes values for the required fields.</span></span> <span data-ttu-id="4ed84-137">Une forme Décision évalue la variable définie dans la forme Expression et sélectionne le chemin via l'orchestration.</span><span class="sxs-lookup"><span data-stu-id="4ed84-137">A decision shape evaluates the variable set in the expression shape and selects the path through the orchestration.</span></span>  
  
 <span data-ttu-id="4ed84-138">Le **CustomerService** orchestration utilise la forme parallèle pour envoyer des messages aux applications principales et recevoir des réponses simultanément.</span><span class="sxs-lookup"><span data-stu-id="4ed84-138">The **CustomerService** orchestration uses the parallel shape to send messages to the backend applications and receive responses simultaneously.</span></span> <span data-ttu-id="4ed84-139">Elle ne doit pas attendre la fin d'une application avant de procéder à la demande suivante.</span><span class="sxs-lookup"><span data-stu-id="4ed84-139">It does not have to wait on one application finishing before making the next request.</span></span> <span data-ttu-id="4ed84-140">Si le nombre d'applications devait changer régulièrement ou si les connexions aux applications n'étaient pas fiables, alors l'orchestration devrait convertir le modèle différemment.</span><span class="sxs-lookup"><span data-stu-id="4ed84-140">If the number of applications were to change frequently, or if the connections to the applications were unreliable, then the orchestration would need to translate the pattern differently.</span></span>  
  
 <span data-ttu-id="4ed84-141">Dans la solution, l'agrégation doit combiner des éléments de trois messages de réponse.</span><span class="sxs-lookup"><span data-stu-id="4ed84-141">In the solution the aggregator must combine elements from three response messages.</span></span> <span data-ttu-id="4ed84-142">L'utilisation de la forme parallèle permet de s'assurer que la communication avec les systèmes principaux est parallèle.</span><span class="sxs-lookup"><span data-stu-id="4ed84-142">Using the parallel shape ensures that the communication with the back-end systems is parallel.</span></span> <span data-ttu-id="4ed84-143">Comme la forme ne s'arrête pas avant la réception de toutes les réponses ou un délai d'attente, l'agrégation sait toujours quand elle peut procéder.</span><span class="sxs-lookup"><span data-stu-id="4ed84-143">And, because the shape does not terminate until it receives all responses or a timeout, the aggregator will always know when it can proceed.</span></span> <span data-ttu-id="4ed84-144">L'orchestration utilise une forme Transformer qui mappe des éléments des trois messages de réponse principaux et le message de demande d'origine aux éléments du message de réponse.</span><span class="sxs-lookup"><span data-stu-id="4ed84-144">The orchestration uses a transform shape that maps elements from the three backend response messages and the original request message to elements in the response message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4ed84-145">Les communications avec les systèmes principaux peut également expirer. Vous pouvez définir le délai d’attente en mettant le **réception** mettre en forme un **étendue** forme et en définissant le **délai d’attente** propriété de l’étendue.</span><span class="sxs-lookup"><span data-stu-id="4ed84-145">The communications with the back-end systems may also time out. You can set the time-out period by enclosing the **Receive** shape in a **Scope** shape and setting the **Timeout** property of the scope.</span></span>  
  
 <span data-ttu-id="4ed84-146">Pour obtenir une liste complète des formes d’orchestration, consultez [formes d’Orchestration](../core/orchestration-shapes.md).</span><span class="sxs-lookup"><span data-stu-id="4ed84-146">For a complete list of orchestration shapes, see [Orchestration Shapes](../core/orchestration-shapes.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4ed84-147">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="4ed84-147">See Also</span></span>  
 <span data-ttu-id="4ed84-148">[Modèles dans le Service de la Solution orientée services](../core/patterns-in-the-service-oriented-solution.md) </span><span class="sxs-lookup"><span data-stu-id="4ed84-148">[Patterns in the Service Oriented Solution](../core/patterns-in-the-service-oriented-solution.md) </span></span>  
 [<span data-ttu-id="4ed84-149">Solution orientée services de composants du Service</span><span class="sxs-lookup"><span data-stu-id="4ed84-149">Components of the Service Oriented Solution</span></span>](../core/components-of-the-service-oriented-solution.md)