---
title: "À l’aide de règles d’entreprise (exemple BizTalk Server) de traitement de prêts | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- examples, business rules
- business rules, examples
ms.assetid: 3e1c80c6-adc1-4a0f-83fd-409ce1b8f21f
caps.latest.revision: "28"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c51f0ff13b06bd57ccdd52ec6e35fdd7e0acf839
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="loans-processing-using-business-rules-biztalk-server-sample"></a><span data-ttu-id="509b7-102">À l’aide des règles d’entreprise (exemple BizTalk Server) de traitement des prêts</span><span class="sxs-lookup"><span data-stu-id="509b7-102">Loans Processing Using Business Rules (BizTalk Server Sample)</span></span>
<span data-ttu-id="509b7-103">L'exemple Traitement de prêts à l'aide de règles d'entreprise montre comment utiliser un ensemble de règles gérées à l'intérieur d'une orchestration, ainsi qu'une combinaison d'entrées appelées faits, pour calculer les paramètres de certains champs à l'intérieur d'un document en cours de traitement.</span><span class="sxs-lookup"><span data-stu-id="509b7-103">The Loans Processing Using Business Rules sample demonstrates how to use a set of rules managed within an orchestration, and how to use a combination of inputs known as facts, to calculate settings for some fields within a document being processed.</span></span> <span data-ttu-id="509b7-104">Les faits peuvent être le résultat de l'appel d'un assembly basé sur .NET, les valeurs extraites du code XML du message ou les données extraites d'une base de données.</span><span class="sxs-lookup"><span data-stu-id="509b7-104">Facts can be the result of calling a .NET-based assembly, the values retrieved from the XML of the message, or the data retrieved from a database.</span></span> <span data-ttu-id="509b7-105">L'exemple montre également comment modifier les règles à tout moment, qui affectent les calculs suivants sans nécessiter de redéploiement.</span><span class="sxs-lookup"><span data-stu-id="509b7-105">The sample also demonstrates how you can change the rules at any time, affecting subsequent calculations without the need to redeploy.</span></span>  
  
## <a name="what-this-sample-does"></a><span data-ttu-id="509b7-106">Fonctions de l'exemple</span><span class="sxs-lookup"><span data-stu-id="509b7-106">What This Sample Does</span></span>  
 <span data-ttu-id="509b7-107">Cet exemple montre ces fonctionnalités dans le contexte d’un scénario de traitement de prêt simplifiée.</span><span class="sxs-lookup"><span data-stu-id="509b7-107">This sample demonstrates these capabilities within the context of a simplified loan processing scenario.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="509b7-108">orchestration récupère et traite une demande de prêt, également appelé un cas de prêt, dans le format de message XML.</span><span class="sxs-lookup"><span data-stu-id="509b7-108"> orchestration picks up and processes a loan application, also known as a loan case, in XML message format.</span></span> <span data-ttu-id="509b7-109">Cette orchestration utilise le Moteur de règles d'entreprises pour évaluer des messages entrants en fonction de règles, modifier certaines messages avec le résultat de l'application des règles, puis les écrire sous forme de fichiers dans un dossier de sortie.</span><span class="sxs-lookup"><span data-stu-id="509b7-109">This orchestration uses the Business Rule Engine to evaluate incoming messages according to the rules, modifying the message with the result of the application of the rules, and then writing the message as a file to an output folder.</span></span>  
  
 <span data-ttu-id="509b7-110">Basées sur des faits à partir de plusieurs sources, notamment le message en cours de traitement, cet exemple définit le **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**et  **ResidencyStatus** éléments du message en cours de traitement.</span><span class="sxs-lookup"><span data-stu-id="509b7-110">Based on facts from several sources, including the message being processed, this sample sets the **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, and **ResidencyStatus** elements of the message being processed.</span></span>  
  
## <a name="where-to-find-this-sample"></a><span data-ttu-id="509b7-111">Accès à l'exemple</span><span class="sxs-lookup"><span data-stu-id="509b7-111">Where to Find This Sample</span></span>  
 <span data-ttu-id="509b7-112">\<*Exemples de chemin d’accès*> \Business Rules\Loans le traitement à l’aide de Business Rules\\</span><span class="sxs-lookup"><span data-stu-id="509b7-112">\<*Samples Path*>\Business Rules\Loans Processing using Business Rules\\</span></span>  
  
 <span data-ttu-id="509b7-113">Le tableau suivant présente les fichiers de cet exemple et décrit leur fonction.</span><span class="sxs-lookup"><span data-stu-id="509b7-113">The following table shows the files in this sample and describes their purpose.</span></span>  
  
|<span data-ttu-id="509b7-114">Fichier(s)</span><span class="sxs-lookup"><span data-stu-id="509b7-114">File(s)</span></span>|<span data-ttu-id="509b7-115"> Description</span><span class="sxs-lookup"><span data-stu-id="509b7-115">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="509b7-116">Case.xsd</span><span class="sxs-lookup"><span data-stu-id="509b7-116">Case.xsd</span></span>|<span data-ttu-id="509b7-117">Fichier de schéma pour les demandes de prêt entrantes, également appelées cas de prêt.</span><span class="sxs-lookup"><span data-stu-id="509b7-117">Schema file for inbound loan applications, otherwise known as loan cases.</span></span>|  
|<span data-ttu-id="509b7-118">Cleanup.bat</span><span class="sxs-lookup"><span data-stu-id="509b7-118">Cleanup.bat</span></span>|<span data-ttu-id="509b7-119">Utilisé pour annuler le déploiement des assemblys et les supprimer du Global Assembly Cache (GAC).</span><span class="sxs-lookup"><span data-stu-id="509b7-119">Used to undeploy assemblies and remove them from the global assembly cache (GAC).</span></span> <span data-ttu-id="509b7-120">Supprime les ports d'envoi et de réception.</span><span class="sxs-lookup"><span data-stu-id="509b7-120">Removes send and receive ports.</span></span> <span data-ttu-id="509b7-121">Supprime les répertoires virtuels Microsoft Internet Information Services (IIS) le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="509b7-121">Removes Microsoft Internet Information Services (IIS) virtual directories as needed.</span></span>|  
|<span data-ttu-id="509b7-122">Create_CustInfo_Table.sql</span><span class="sxs-lookup"><span data-stu-id="509b7-122">Create_CustInfo_Table.sql</span></span>|<span data-ttu-id="509b7-123">Script SQL pour la création de la table CustInfo dans la base de données exemple SQL Northwind.</span><span class="sxs-lookup"><span data-stu-id="509b7-123">SQL script for creating the CustInfo table in the SQL Northwind sample database.</span></span>|  
|<span data-ttu-id="509b7-124">LoanProcessorBinding.xml</span><span class="sxs-lookup"><span data-stu-id="509b7-124">LoanProcessorBinding.xml</span></span>|<span data-ttu-id="509b7-125">Utilisé pour l’installation automatique, notamment la liaison de port.</span><span class="sxs-lookup"><span data-stu-id="509b7-125">Used for automated setup such as port binding.</span></span>|  
|<span data-ttu-id="509b7-126">LoansProcessor.btproj, LoansProcessor.sln</span><span class="sxs-lookup"><span data-stu-id="509b7-126">LoansProcessor.btproj, LoansProcessor.sln</span></span>|<span data-ttu-id="509b7-127">Fichiers de projet et de solution BizTalk pour cet exemple.</span><span class="sxs-lookup"><span data-stu-id="509b7-127">BizTalk project and solution files for this sample.</span></span>|  
|<span data-ttu-id="509b7-128">My Sample Service.odx</span><span class="sxs-lookup"><span data-stu-id="509b7-128">My Sample Service.odx</span></span>|<span data-ttu-id="509b7-129">Orchestration [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] pour cet exemple.</span><span class="sxs-lookup"><span data-stu-id="509b7-129">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] orchestration for this sample.</span></span>|  
|<span data-ttu-id="509b7-130">sampleLoan.xml</span><span class="sxs-lookup"><span data-stu-id="509b7-130">sampleLoan.xml</span></span>|<span data-ttu-id="509b7-131">Exemple de fichier d'entrée, avec des valeurs vides pour les quatre éléments d'état à la fin de la structure XML dans le fichier.</span><span class="sxs-lookup"><span data-stu-id="509b7-131">Sample input file, with empty values for the four status elements at the end of the XML structure in the file.</span></span>|  
|<span data-ttu-id="509b7-132">Setup.bat</span><span class="sxs-lookup"><span data-stu-id="509b7-132">Setup.bat</span></span>|<span data-ttu-id="509b7-133">Utilisé pour créer et initialiser cet exemple.</span><span class="sxs-lookup"><span data-stu-id="509b7-133">Used to build and initialize this sample.</span></span>|  
|<span data-ttu-id="509b7-134">Dans le dossier \CreateRules :</span><span class="sxs-lookup"><span data-stu-id="509b7-134">In the \CreateRules folder:</span></span><br /><br /> <span data-ttu-id="509b7-135">App.ico, AssemblyInfo.cs, Case.xsd, CreateLoanProcessingPolicy.csproj, CreateLoanProcessingPolicy.sln, WriteToBRL.cs</span><span class="sxs-lookup"><span data-stu-id="509b7-135">App.ico, AssemblyInfo.cs, Case.xsd, CreateLoanProcessingPolicy.csproj, CreateLoanProcessingPolicy.sln, WriteToBRL.cs</span></span>|<span data-ttu-id="509b7-136">Project, solution, source et fichiers associés Visual C# utilisés pour créer l'application qui crée les règles par programme.</span><span class="sxs-lookup"><span data-stu-id="509b7-136">Visual C# project, solution, source, and related files used to create the application that programmatically creates the rules in the set.</span></span> <span data-ttu-id="509b7-137">Pour obtenir des exemples de création d'ensembles de règles par programme, consultez le fichier source WriteToBRL.cs.</span><span class="sxs-lookup"><span data-stu-id="509b7-137">For examples of programmatically building sets of rules, refer to the source file WriteToBRL.cs.</span></span>|  
|<span data-ttu-id="509b7-138">Dans le dossier \myFactRetriever :</span><span class="sxs-lookup"><span data-stu-id="509b7-138">In the \myFactRetriever folder:</span></span><br /><br /> <span data-ttu-id="509b7-139">AssemblyInfo.cs</span><span class="sxs-lookup"><span data-stu-id="509b7-139">AssemblyInfo.cs</span></span><br /><br /> <span data-ttu-id="509b7-140">FactRetrieverForLoansProcessing.cs</span><span class="sxs-lookup"><span data-stu-id="509b7-140">FactRetrieverForLoansProcessing.cs</span></span><br /><br /> <span data-ttu-id="509b7-141">myFactRetriever.csproj</span><span class="sxs-lookup"><span data-stu-id="509b7-141">myFactRetriever.csproj</span></span><br /><br /> <span data-ttu-id="509b7-142">myFactRetriever.sln</span><span class="sxs-lookup"><span data-stu-id="509b7-142">myFactRetriever.sln</span></span>|<span data-ttu-id="509b7-143">Project, solution, source et fichiers associés Visual C# utilisés pour créer un assembly permettant d'extraire des informations de la table CustInfo ajoutée précédemment à l'exemple de base de données SQL Server Northwind.</span><span class="sxs-lookup"><span data-stu-id="509b7-143">Visual C# project, solution, source, and related files used to create an assembly that you use to retrieve information from the CustInfo table added earlier to the Northwind sample SQL Server database.</span></span>|  
  
## <a name="building-and-initializing-this-sample"></a><span data-ttu-id="509b7-144">Création et initialisation de cet exemple</span><span class="sxs-lookup"><span data-stu-id="509b7-144">Building and Initializing This Sample</span></span>  
  
#### <a name="to-build-and-initialize-the-loans-processing-using-business-rules-sample"></a><span data-ttu-id="509b7-145">Création et initialisation de l'exemple Traitement de prêts à l'aide de règles d'entreprise</span><span class="sxs-lookup"><span data-stu-id="509b7-145">To build and initialize the Loans Processing Using Business Rules sample</span></span>  
  
1.  <span data-ttu-id="509b7-146">Vérifiez que vous disposez de la base de données Northwind sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="509b7-146">Make sure that you have the Northwind database on your machine.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="509b7-147">Pour exécuter cet exemple, vous devez disposer d'une base de données nommée Northwind.</span><span class="sxs-lookup"><span data-stu-id="509b7-147">In order to run this sample, you must have a database named Northwind.</span></span> [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)]<span data-ttu-id="509b7-148">et [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] ne sont pas fournis avec la base de données Northwind.</span><span class="sxs-lookup"><span data-stu-id="509b7-148"> and [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] do not ship with the Northwind sample database.</span></span> <span data-ttu-id="509b7-149">Pour créer la base de données Northwind, téléchargez le fichier d’installation [http://go.microsoft.com/fwlink/?LinkId=196020](http://go.microsoft.com/fwlink/?LinkId=196020), suivez les instructions.</span><span class="sxs-lookup"><span data-stu-id="509b7-149">To create the Northwind database, download the install file from [http://go.microsoft.com/fwlink/?LinkId=196020](http://go.microsoft.com/fwlink/?LinkId=196020), and follow the instructions.</span></span>  
  
2.  <span data-ttu-id="509b7-150">Dans une fenêtre de commande, accédez au dossier suivant :</span><span class="sxs-lookup"><span data-stu-id="509b7-150">In a command window, navigate to the following folder:</span></span>  
  
     <span data-ttu-id="509b7-151">\<*Exemples de chemin d’accès*> \Business Rules\Loans le traitement à l’aide de règles d’entreprise</span><span class="sxs-lookup"><span data-stu-id="509b7-151">\<*Samples Path*>\Business Rules\Loans Processing using Business Rules</span></span>  
  
3.  <span data-ttu-id="509b7-152">Exécutez le fichier Setup.bat, qui effectue les actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="509b7-152">Run the file Setup.bat, which performs the following actions:</span></span>  
  
    -   <span data-ttu-id="509b7-153">nettoie le GAC pour éliminer les données résiduelles d'exécutions précédentes de cet exemple ;</span><span class="sxs-lookup"><span data-stu-id="509b7-153">Cleans up the GAC to eliminate any residual data from previous runs of this sample.</span></span>  
  
    -   <span data-ttu-id="509b7-154">compile et déploie le programme extracteur de faits, myFactRetreiever.dll ;</span><span class="sxs-lookup"><span data-stu-id="509b7-154">Compiles and deploys the fact retriever program, myFactRetreiever.dll.</span></span>  
  
    -   <span data-ttu-id="509b7-155">ajoute, à l'aide du fichier de script SQL Create_CustInfo_Table.sql, une table nommée CustInfo à la base de données SQL exemple Northwind ;</span><span class="sxs-lookup"><span data-stu-id="509b7-155">Using the SQL script file Create_CustInfo_Table.sql, adds a table named CustInfo to the Northwind sample SQL database.</span></span>  
  
    -   <span data-ttu-id="509b7-156">nettoie le magasin de règles SQL partagé pour éliminer les données résiduelles d'exécutions précédentes de cet exemple ;</span><span class="sxs-lookup"><span data-stu-id="509b7-156">Cleans up the shared SQL rule store to eliminate residue of previous runs of this sample.</span></span>  
  
    -   <span data-ttu-id="509b7-157">crée, publie et déploie la dernière version (1.0) de l'ensemble de règles de traitement des prêts</span><span class="sxs-lookup"><span data-stu-id="509b7-157">Creates, publishes, and deploys the most recent version (1.0) of the loans processing rule set.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="509b7-158">(l'outil Éditeur des règles d'entreprise fourni avec [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] permet d'examiner les règles définies par programme) ;</span><span class="sxs-lookup"><span data-stu-id="509b7-158">You can use the Business Rule Composer tool supplied with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to examine the rules that have been set programmatically.</span></span>  
  
    -   <span data-ttu-id="509b7-159">crée les dossiers d'entrée (in) et de sortie (out) pour cet exemple ;</span><span class="sxs-lookup"><span data-stu-id="509b7-159">Creates the input (In) and output (Out) folders for this sample.</span></span>  
  
    -   <span data-ttu-id="509b7-160">compile et déploie les projets [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] restants pour cet exemple, notamment le projet BizTalk contenant l'orchestration que vous utilisez pour coordonner l'exemple ;</span><span class="sxs-lookup"><span data-stu-id="509b7-160">Compiles and deploys the remaining [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] projects for this sample, including the BizTalk project that contains the orchestration you use to coordinate this sample.</span></span>  
  
    -   <span data-ttu-id="509b7-161">crée et lie l'emplacement de réception de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ainsi que les ports d'envoi et de réception :</span><span class="sxs-lookup"><span data-stu-id="509b7-161">Creates and binds the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receive location, and the send and receive ports.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="509b7-162">Cet exemple affiche les avertissements suivants lors de la création et liaison des ports :</span><span class="sxs-lookup"><span data-stu-id="509b7-162">This sample displays the following warnings when creating and binding ports:</span></span>  
        >   
        >  `Warning: Receive handler not specified for receive location "LoansProcessor_1.0.0.0_LoansProcessor.My_Sample_Service_Incoming_ReceiveLocation"; updating with first receive handler with matching transport type.`  
        >   
        >  `Warning: Host not specified for orchestration "LoansProcessor.My_Sample_Service"; updating with first available host.`  
        >   
        >  <span data-ttu-id="509b7-163">Vous pouvez ignorer ces avertissements sans problème.</span><span class="sxs-lookup"><span data-stu-id="509b7-163">You can safely ignore these warnings.</span></span> <span data-ttu-id="509b7-164">(Pour s'adapter aux éventuelles différences d'attribution de noms dans les installations utilisateur, le nom d'hôte et le gestionnaire de réception ont été omis dans le fichier de liaison.)</span><span class="sxs-lookup"><span data-stu-id="509b7-164">(To accommodate for possible naming differences in user installations, the host name and receive handler have been omitted from the binding file.)</span></span>  
  
    -   <span data-ttu-id="509b7-165">Active l'emplacement de réception, et démarre le port d'envoi.</span><span class="sxs-lookup"><span data-stu-id="509b7-165">Enables the receive location, and starts the send port.</span></span>  
  
    -   <span data-ttu-id="509b7-166">inscrit et démarre l'orchestration.</span><span class="sxs-lookup"><span data-stu-id="509b7-166">Enlists and starts the orchestration.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="509b7-167">Si votre nom d'hôte BizTalk n'est pas BizTalkServerApplication, modifiez les fichiers Setup.bat et LoanProcessorBinding.xml de façon à ce qu'ils reflètent le nom d'hôte approprié.</span><span class="sxs-lookup"><span data-stu-id="509b7-167">If your BizTalk host name is not BizTalkServerApplication, modify the file Setup.bat and the file LoanProcessorBinding.xml to reflect the proper host name.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="509b7-168">Vous devez confirmer que [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] n'a pas signalé d'erreur pendant le processus de création et d'initialisation, avant d'essayer de faire fonctionner cet exemple.</span><span class="sxs-lookup"><span data-stu-id="509b7-168">You should confirm that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] did not report any errors during the build and initialization process before attempting to run this sample.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="509b7-169">Si vous choisissez Ouvrir et générer les projets dans cet exemple sans exécuter le fichier Setup.bat, vous devez tout d’abord créer une paire de clés de nom fort à l’aide du Kit de développement .NET Framework Strong Name utility (sn.exe).</span><span class="sxs-lookup"><span data-stu-id="509b7-169">If you choose to open and build the projects in this sample without running the file Setup.bat, you must first create a strong name key pair using the .NET Framework Strong Name utility (sn.exe).</span></span> <span data-ttu-id="509b7-170">Celle-ci permet de signer les assemblys obtenus.</span><span class="sxs-lookup"><span data-stu-id="509b7-170">Use this key pair to sign the resulting assemblies.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="509b7-171">Pour annuler les modifications effectuées par Setup.bat, exécutez Cleanup.bat.</span><span class="sxs-lookup"><span data-stu-id="509b7-171">To undo changes made by Setup.bat, run Cleanup.bat.</span></span> <span data-ttu-id="509b7-172">Vous devez exécuter Cleanup.bat avant d'exécuter Cleanup.bat une seconde fois.</span><span class="sxs-lookup"><span data-stu-id="509b7-172">You must run Cleanup.bat before running Setup.bat a second time.</span></span>  
  
## <a name="running-this-sample"></a><span data-ttu-id="509b7-173">Cet exemple en cours d’exécution</span><span class="sxs-lookup"><span data-stu-id="509b7-173">Running This Sample</span></span>  
  
#### <a name="to-run-the-loans-processing-using-business-rules-sample"></a><span data-ttu-id="509b7-174">Pour exécuter l'exemple Traitement de prêts à l'aide de règles d'entreprise</span><span class="sxs-lookup"><span data-stu-id="509b7-174">To run the Loans Processing Using Business Rules sample</span></span>  
  
1.  <span data-ttu-id="509b7-175">Collez une copie du fichier sampleLoan.xml dans le **\In** dossier.</span><span class="sxs-lookup"><span data-stu-id="509b7-175">Paste a copy of the file sampleLoan.xml into the **\In** folder.</span></span>  
  
2.  <span data-ttu-id="509b7-176">Observez le fichier .xml créé dans le dossier **hors**. Il contient le message XML d’entrée avec les données ajoutées aux éléments de quatre état suivants à la fin de la structure XML : **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, et **ResidencyStatus**.</span><span class="sxs-lookup"><span data-stu-id="509b7-176">Observe the .xml file created in the folder **Out**. It contains the input XML message with data added to the following four status elements at the end of the XML structure: **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, and **ResidencyStatus**.</span></span>  
  
 <span data-ttu-id="509b7-177">L'outil Éditeur des règles d'entreprise permet de modifier les règles de l'ensemble de règles, puis de les redéployer.</span><span class="sxs-lookup"><span data-stu-id="509b7-177">You can use the Business Rule Composer tool to change the rules in the rule set, and then redeploy those rules.</span></span>  
  
#### <a name="to-use-the-business-rule-composer-tool-to-change-one-or-more-of-the-rules-in-a-rule-set"></a><span data-ttu-id="509b7-178">Pour utiliser l'outil Éditeur des règles d'entreprise pour modifier une ou plusieurs règles d'un ensemble de règles</span><span class="sxs-lookup"><span data-stu-id="509b7-178">To use the Business Rule Composer tool to change one or more of the rules in a rule set</span></span>  
  
1.  <span data-ttu-id="509b7-179">Cliquez sur **Démarrer**, pointez sur **programmes**, pointez sur [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], puis cliquez sur **Éditeur des règles d’entreprise**.</span><span class="sxs-lookup"><span data-stu-id="509b7-179">Click **Start**, point to **Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **Business Rule Composer**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="509b7-180">Sur les systèmes qui prennent en charge le contrôle de compte d'utilisateur, vous devrez peut-être exécuter l'outil avec des privilèges d'administrateur.</span><span class="sxs-lookup"><span data-stu-id="509b7-180">On a system that supports User Account Control (UAC), you may need to run the tool with Administrative privileges.</span></span> <span data-ttu-id="509b7-181">Pour ce faire, cliquez sur l’application, puis **exécuter en tant qu’administrateur**.</span><span class="sxs-lookup"><span data-stu-id="509b7-181">To do this, right-click the application, and then select **Run as administrator**.</span></span>  
  
2.  <span data-ttu-id="509b7-182">Dans le **SQL Server** boîte de dialogue, cliquez sur **OK** pour se connecter au magasin de règles.</span><span class="sxs-lookup"><span data-stu-id="509b7-182">In the **SQL Server** dialog box, click **OK** to connect to the rule store.</span></span>  
  
3.  <span data-ttu-id="509b7-183">Dans **l’Explorateur de stratégies**, sous le nœud **LoanProcessing**, avec le bouton droit le **Version 1.0 – Deployed** nœud, puis cliquez sur **copie**.</span><span class="sxs-lookup"><span data-stu-id="509b7-183">In **Policy Explorer**, below the node **LoanProcessing**, right-click the **Version 1.0 – Deployed** node, and then click **Copy**.</span></span>  
  
4.  <span data-ttu-id="509b7-184">Avec le bouton droit **LoanProcessing**, puis cliquez sur **coller**.</span><span class="sxs-lookup"><span data-stu-id="509b7-184">Right-click **LoanProcessing**, and then click **Paste**.</span></span>  
  
5.  <span data-ttu-id="509b7-185">Modifiez toute règle ou l’action d’une manière qui génère des valeurs différentes pour le **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, et  **ResidencyStatus** éléments.</span><span class="sxs-lookup"><span data-stu-id="509b7-185">Change any rule or action in a way that will result in different values for the **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, and **ResidencyStatus** elements.</span></span> <span data-ttu-id="509b7-186">Veillez à modifier également la valeur de la partie négation (essentiellement, le **Else** clause) de toute règle que vous souhaitez modifier.</span><span class="sxs-lookup"><span data-stu-id="509b7-186">Ensure that you also change the value of the negation portion (essentially, the **Else** clause) of any rule that you choose to change.</span></span>  
  
     <span data-ttu-id="509b7-187">Le tableau suivant présente l'ensemble de règles utilisées par cet exemple.</span><span class="sxs-lookup"><span data-stu-id="509b7-187">The following table shows the set of rules used by this sample.</span></span> <span data-ttu-id="509b7-188">Sauf mention contraire, les faits proviennent du message XML entrant.</span><span class="sxs-lookup"><span data-stu-id="509b7-188">Unless specifically mentioned otherwise, facts are from the incoming XML message.</span></span> <span data-ttu-id="509b7-189">La chaîne (db) indique une base de données comme source d'un fait.</span><span class="sxs-lookup"><span data-stu-id="509b7-189">The string (db) indicates a database as the source of a fact.</span></span>  
  
    |<span data-ttu-id="509b7-190">Numéro de règle</span><span class="sxs-lookup"><span data-stu-id="509b7-190">Rule number</span></span>|<span data-ttu-id="509b7-191">Nom de règle</span><span class="sxs-lookup"><span data-stu-id="509b7-191">Rule name</span></span>|<span data-ttu-id="509b7-192"> Description</span><span class="sxs-lookup"><span data-stu-id="509b7-192">Description</span></span>|  
    |-----------------|---------------|-----------------|  
    |<span data-ttu-id="509b7-193">1</span><span class="sxs-lookup"><span data-stu-id="509b7-193">1</span></span>|<span data-ttu-id="509b7-194">Règle d'état de revenu</span><span class="sxs-lookup"><span data-stu-id="509b7-194">Income Status Rule</span></span>|<span data-ttu-id="509b7-195">IF **BasicSalary** + **OtherIncome** > 0</span><span class="sxs-lookup"><span data-stu-id="509b7-195">IF **BasicSalary** + **OtherIncome** > 0</span></span><br /><br /> <span data-ttu-id="509b7-196">PUIS **IncomeStatus** = **valide**</span><span class="sxs-lookup"><span data-stu-id="509b7-196">THEN **IncomeStatus** = **Valid**</span></span>|  
    |<span data-ttu-id="509b7-197">2</span><span class="sxs-lookup"><span data-stu-id="509b7-197">2</span></span>|<span data-ttu-id="509b7-198">Règle d'état d'engagements</span><span class="sxs-lookup"><span data-stu-id="509b7-198">Commitments Status Rule</span></span>|<span data-ttu-id="509b7-199">IF **ID** == **ID (db)**</span><span class="sxs-lookup"><span data-stu-id="509b7-199">IF **ID** == **ID (db)**</span></span><br /><br /> <span data-ttu-id="509b7-200">AND</span><span class="sxs-lookup"><span data-stu-id="509b7-200">AND</span></span><br /><br /> <span data-ttu-id="509b7-201">IF **CreditCardBalance (db)** > 500</span><span class="sxs-lookup"><span data-stu-id="509b7-201">IF **CreditCardBalance (db)** > 500</span></span><br /><br /> <span data-ttu-id="509b7-202">PUIS **CommitmentsStatus** =</span><span class="sxs-lookup"><span data-stu-id="509b7-202">THEN **CommitmentsStatus** =</span></span><br /><br /> <span data-ttu-id="509b7-203">« Calculer engagements »</span><span class="sxs-lookup"><span data-stu-id="509b7-203">"Compute Commitments"</span></span>|  
    |<span data-ttu-id="509b7-204">3</span><span class="sxs-lookup"><span data-stu-id="509b7-204">3</span></span>|<span data-ttu-id="509b7-205">Employment Status Rule</span><span class="sxs-lookup"><span data-stu-id="509b7-205">Employment Status Rule</span></span>|<span data-ttu-id="509b7-206">IF **EmploymentType &#124; TimeInMonths** > 18</span><span class="sxs-lookup"><span data-stu-id="509b7-206">IF **EmploymentType &#124; TimeInMonths** > 18</span></span><br /><br /> <span data-ttu-id="509b7-207">PUIS **EmploymentStatus** = **valide**</span><span class="sxs-lookup"><span data-stu-id="509b7-207">THEN **EmploymentStatus** = **Valid**</span></span>|  
    |<span data-ttu-id="509b7-208">4</span><span class="sxs-lookup"><span data-stu-id="509b7-208">4</span></span>|<span data-ttu-id="509b7-209">Residency Status Rule</span><span class="sxs-lookup"><span data-stu-id="509b7-209">Residency Status Rule</span></span>|<span data-ttu-id="509b7-210">IF **PlaceOfResidence &#124; TimeInMonths** > 18</span><span class="sxs-lookup"><span data-stu-id="509b7-210">IF **PlaceOfResidence &#124; TimeInMonths** > 18</span></span><br /><br /> <span data-ttu-id="509b7-211">PUIS **ResidencyStatus** = **valide**</span><span class="sxs-lookup"><span data-stu-id="509b7-211">THEN **ResidencyStatus** = **Valid**</span></span>|  
    |<span data-ttu-id="509b7-212">!1, !2, !3, !4</span><span class="sxs-lookup"><span data-stu-id="509b7-212">!1, !2, !3, !4</span></span>|<span data-ttu-id="509b7-213">Règles de négation</span><span class="sxs-lookup"><span data-stu-id="509b7-213">Negation Rules</span></span>|<span data-ttu-id="509b7-214">Les conditions qui sont une logique **pas** de la condition correspondante décrite dans les règles 1 et 4.</span><span class="sxs-lookup"><span data-stu-id="509b7-214">Conditions that are a logical **NOT** of the corresponding condition described in rules 1–4.</span></span> <span data-ttu-id="509b7-215">Actions qui en résultent sont une modification dans la chaîne qui est définie.</span><span class="sxs-lookup"><span data-stu-id="509b7-215">Resulting actions are a change in the string that is being set.</span></span>|  
  
6.  <span data-ttu-id="509b7-216">Cliquez sur le **Version 1.1 (non enregistrée)** nœud, puis cliquez sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="509b7-216">Right-click the **Version 1.1(not saved)** node, and then click **Save**.</span></span>  
  
7.  <span data-ttu-id="509b7-217">Cliquez sur le **Version 1.1** nœud, puis cliquez sur **publier**.</span><span class="sxs-lookup"><span data-stu-id="509b7-217">Right-click the **Version 1.1** node, and then click **Publish**.</span></span>  
  
8.  <span data-ttu-id="509b7-218">Cliquez sur le **Version 1.1** nœud, puis cliquez sur **déployer**.</span><span class="sxs-lookup"><span data-stu-id="509b7-218">Right-click the **Version 1.1** node, and then click **Deploy**.</span></span>  
  
9. <span data-ttu-id="509b7-219">Patientez 60 secondes, le temps que les modifications se propagent au magasin de règles SQL Server partagé.</span><span class="sxs-lookup"><span data-stu-id="509b7-219">Wait for 60 seconds for the changes to propagate to the shared SQL Server rule store.</span></span>  
  
10. <span data-ttu-id="509b7-220">Collez une copie du fichier sampleLoan.xml dans le dossier **dans**.</span><span class="sxs-lookup"><span data-stu-id="509b7-220">Paste a copy of the file sampleLoan.xml into the folder **In**.</span></span>  
  
11. <span data-ttu-id="509b7-221">Observez le fichier .xml créé dans le dossier **hors**. Il contient le message XML d’entrée avec les données ajoutées aux éléments de quatre état suivants à la fin de la structure XML : **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, et **ResidencyStatus**.</span><span class="sxs-lookup"><span data-stu-id="509b7-221">Observe the .xml file created in the folder **Out**. It contains the input XML message with data added to the following four status elements at the end of the XML structure: **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, and **ResidencyStatus**.</span></span> <span data-ttu-id="509b7-222">Les données ajoutées à ces éléments diffèrent ou non de l'exécution précédente, en fonction de la nature des modifications apportées à l'étape 5 de cette procédure.</span><span class="sxs-lookup"><span data-stu-id="509b7-222">The data added to these elements will differ, or not, from the previous run, based on the nature of the changes made in step 5in this procedure.</span></span>  
  
## <a name="comments"></a><span data-ttu-id="509b7-223">Commentaires</span><span class="sxs-lookup"><span data-stu-id="509b7-223">Comments</span></span>  
 <span data-ttu-id="509b7-224">Si vous voulez afficher les informations de suivi pour cet exemple, vous devez annuler le déploiement, puis redéployer l'ensemble de règles approprié (Traitement de prêts) à l'aide de l'Assistant Déploiement du moteur de règles d'entreprise.</span><span class="sxs-lookup"><span data-stu-id="509b7-224">If you want to view the tracking information for this sample, you must undeploy and then redeploy the relevant rule set (Loans Processing) by using the Business Rules Engine Deployment Wizard.</span></span>  
  
 <span data-ttu-id="509b7-225">Cet exemple montre comment utiliser des règles d'entreprise pour appliquer des stratégies commerciales sous la forme de règles au sein d'une orchestration.</span><span class="sxs-lookup"><span data-stu-id="509b7-225">This sample demonstrates how you can use business rules to apply business policies in the form of rules within an orchestration.</span></span> <span data-ttu-id="509b7-226">Elle montre également comment modifier les stratégies et faire en sorte que cette modification se reflète de façon dynamique dans l'orchestration sans devoir recompiler ni redéployer la solution d'orchestration.</span><span class="sxs-lookup"><span data-stu-id="509b7-226">It also demonstrates how you can change the policies, and have the change in the policy reflected dynamically within the orchestration without having to recompile or redeploy the orchestration solution.</span></span>  
  
 <span data-ttu-id="509b7-227">Les cas de prêt entrés pour cet exemple sont des messages XML qui présentent la structure suivante :</span><span class="sxs-lookup"><span data-stu-id="509b7-227">Input loan cases to this sample are XML messages that have the following structure:</span></span>  
  
```  
    Name  
    ID  
    Income  
        BasicSalary  
        OtherIncome  
    EmploymentType  
        TimeInMonths  
    PlaceOfResidence  
        TimeInMonths  
    CommitmentsStatus  
    IncomeStatus  
    EmploymentStatus  
    ResidencyStatus  
```  
  
## <a name="see-also"></a><span data-ttu-id="509b7-228">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="509b7-228">See Also</span></span>  
 [<span data-ttu-id="509b7-229">Règles d’entreprise (dossier d’exemples BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="509b7-229">Business Rules (BizTalk Server Samples Folder)</span></span>](../core/business-rules-biztalk-server-samples-folder.md)