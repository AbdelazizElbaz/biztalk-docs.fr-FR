---
title: "Comment créer des liens de rôle dans les Orchestrations | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: cc386ac2-a851-4342-9ceb-0b6faddf4ece
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e40a77392af9e97791cd9afbacc8f0b533f60288
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="how-to-create-role-links-in-orchestrations"></a><span data-ttu-id="b3887-102">Création de liens de rôle dans des orchestrations</span><span class="sxs-lookup"><span data-stu-id="b3887-102">How to Create Role Links in Orchestrations</span></span>
<span data-ttu-id="b3887-103">Voici les tâches de base que vous devez effectuer pour utiliser des liens de rôle dans votre orchestration :</span><span class="sxs-lookup"><span data-stu-id="b3887-103">The following are the basic tasks you will need to complete to use role links in your orchestration:</span></span>  
  
-   <span data-ttu-id="b3887-104">Créez des tiers et des ports d'envoi et associez-les les uns aux autres.</span><span class="sxs-lookup"><span data-stu-id="b3887-104">Create parties and send ports and associate them with each other.</span></span>  
  
-   <span data-ttu-id="b3887-105">Utilisez la procédure suivante pour créer des types de lien de rôle et ajouter des types de port.</span><span class="sxs-lookup"><span data-stu-id="b3887-105">Use the following procedure to create role link types and add the port types.</span></span>  
  
    |<span data-ttu-id="b3887-106">Pour créer un type de lien de rôle</span><span class="sxs-lookup"><span data-stu-id="b3887-106">To create a role link type</span></span>|  
    |--------------------------------|  
    |<span data-ttu-id="b3887-107">1.  Dans la fenêtre Vue Orchestration, développez **Types**, avec le bouton droit **les Types de liens de rôle**, puis cliquez sur **nouveau Type de lien de rôle**.</span><span class="sxs-lookup"><span data-stu-id="b3887-107">1.  In the Orchestration View window, expand **Types**, right-click **Role Link Types**, and then click **New Role Link Type**.</span></span><br /><span data-ttu-id="b3887-108">2.  Cliquez sur le type de lien de rôle que vous venez de créer.</span><span class="sxs-lookup"><span data-stu-id="b3887-108">2.  Click the role link type you just created.</span></span> <span data-ttu-id="b3887-109">Dans la fenêtre Propriétés, dans le **identificateur** , tapez `Provider_Consumer_RoleLinkType`.</span><span class="sxs-lookup"><span data-stu-id="b3887-109">In the Properties window, in the **Identifier** field, type `Provider_Consumer_RoleLinkType`.</span></span><br /><span data-ttu-id="b3887-110">3.  Développez **Provider_Consumer_RoleLinkType**, puis cliquez sur **Role_1**.</span><span class="sxs-lookup"><span data-stu-id="b3887-110">3.  Expand **Provider_Consumer_RoleLinkType**, and then click **Role_1**.</span></span> <span data-ttu-id="b3887-111">Dans la fenêtre Propriétés, dans le **identificateur** , tapez `ConsumerRole`.</span><span class="sxs-lookup"><span data-stu-id="b3887-111">In the Properties window, in the **Identifier** field, type `ConsumerRole`.</span></span><br /><span data-ttu-id="b3887-112">4.  Avec le bouton droit **ConsumerRole**, puis cliquez sur **ajouter un Type de Port**.</span><span class="sxs-lookup"><span data-stu-id="b3887-112">4.  Right-click **ConsumerRole**, and then click **Add Port Type**.</span></span> <span data-ttu-id="b3887-113">L'Assistant Type de port démarre.</span><span class="sxs-lookup"><span data-stu-id="b3887-113">This starts the Port Type Wizard.</span></span><br /><span data-ttu-id="b3887-114">5.  Sur le **l’Assistant Type de Port** , cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="b3887-114">5.  On the **Welcome to the Port Type Wizard** page, click **Next**.</span></span><br /><span data-ttu-id="b3887-115">6.  Sur le **sélectionner un Type de Port ou créer un nouveau Type de Port** , sélectionnez **créer un nouveau Type de Port**, puis **nom du Type de Port**, type `ConsumerPortType`.</span><span class="sxs-lookup"><span data-stu-id="b3887-115">6.  On the **Select a Port Type or create a new Port Type** page, select **Create a new Port Type**, and then for **Port Type Name**, type `ConsumerPortType`.</span></span><br /><span data-ttu-id="b3887-116">7.  Pour **modèle de Communication**, sélectionnez **unidirectionnel**et pour **Restrictions d’accès**, sélectionnez **Public - aucune limite**.</span><span class="sxs-lookup"><span data-stu-id="b3887-116">7.  For **Communication Pattern**, select **One-Way**, and for **Access Restrictions**, select **Public - no limit**.</span></span> <span data-ttu-id="b3887-117">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="b3887-117">Click **Next**.</span></span><br /><span data-ttu-id="b3887-118">8.  Sur le **fin de l’Assistant Port** , cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="b3887-118">8.  On the **Completing the Port Wizard** page, click **Finish**.</span></span><br /><span data-ttu-id="b3887-119">9. Avec le bouton droit **Provider_Consumer_RoleLinkType**, puis cliquez sur **nouveau rôle**.</span><span class="sxs-lookup"><span data-stu-id="b3887-119">9. Right-click **Provider_Consumer_RoleLinkType**, and then click **New Role**.</span></span><br /><span data-ttu-id="b3887-120">10. Cliquez sur **Role_1**, puis, dans la fenêtre Propriétés, dans le **identificateur** , tapez `ProviderRole`.</span><span class="sxs-lookup"><span data-stu-id="b3887-120">10. Click **Role_1**, and then in the Properties window, in the **Identifier** field, type `ProviderRole`.</span></span><br /><span data-ttu-id="b3887-121">11. Avec le bouton droit **ProviderRole**, puis cliquez sur **ajouter un Type de Port**.</span><span class="sxs-lookup"><span data-stu-id="b3887-121">11. Right-click **ProviderRole**, and then click **Add Port Type**.</span></span> <span data-ttu-id="b3887-122">L'Assistant Type de port démarre.</span><span class="sxs-lookup"><span data-stu-id="b3887-122">This starts the Port Type Wizard.</span></span><br /><span data-ttu-id="b3887-123">12. Sur le **l’Assistant Type de Port** , cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="b3887-123">12. On the **Welcome to the Port Type Wizard** page, click **Next**.</span></span><br /><span data-ttu-id="b3887-124">13. Sur le **sélectionner un Type de Port ou créer un nouveau Type de Port** , sélectionnez **créer un nouveau Type de Port**, puis **nom du Type de Port**, type `ProviderPortType`.</span><span class="sxs-lookup"><span data-stu-id="b3887-124">13. On the **Select a Port Type or create a new Port Type** page, select **Create a new Port Type**, and then for **Port Type Name**, type `ProviderPortType`.</span></span><br /><span data-ttu-id="b3887-125">14. Pour **modèle de Communication**, sélectionnez **unidirectionnel**et pour **Restrictions d’accès**, sélectionnez **Public - aucune limite**.</span><span class="sxs-lookup"><span data-stu-id="b3887-125">14. For **Communication Pattern**, select **One-Way**, and for **Access Restrictions**, select **Public - no limit**.</span></span> <span data-ttu-id="b3887-126">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="b3887-126">Click **Next**.</span></span><br /><span data-ttu-id="b3887-127">15. Sur le **fin de l’Assistant Port** , cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="b3887-127">15. On the **Completing the Port Wizard** page, click **Finish**.</span></span> <span data-ttu-id="b3887-128">**Remarque :** ports configurés placés à l’intérieur des liens de rôle ne conservent pas leurs informations de liaison associée.</span><span class="sxs-lookup"><span data-stu-id="b3887-128">**Note:**      Configured ports placed inside of role links do not retain their associated binding information.</span></span>|  
  
     <span data-ttu-id="b3887-129">Dans la procédure précédente, vous créez un type de lien de rôle contenant deux rôles : un ProviderRole qui recevra et traitera les messages du consommateur et un ConsumerRole dont le port d'envoi sera utilisé par votre orchestration pour envoyer des messages au consommateur.</span><span class="sxs-lookup"><span data-stu-id="b3887-129">In the preceding procedure, you create a role link type that contains two roles—a ProviderRole that will receive and process messages from the consumer and a ConsumerRole that your orchestration will use the send port provided with the role to send messages to the consumer.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b3887-130">Le type de lien de rôle peut contenir un rôle de fournisseur et un rôle de consommateur, et il peut inclure un de chaque ou l'un des deux en fonction des besoins de votre processus d'entreprise.</span><span class="sxs-lookup"><span data-stu-id="b3887-130">The role link type can contain a provider role and a consumer role, and it can include one of either or one of each, depending on your business process needs.</span></span>  
  
-   <span data-ttu-id="b3887-131">Pour ajouter des liens de rôle à votre orchestration, suivez la procédure ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="b3887-131">Use the following procedure to add role links to your orchestration.</span></span>  
  
    |<span data-ttu-id="b3887-132">Pour créer un lien de rôle à l'aide de l'Assistant Lien de rôle</span><span class="sxs-lookup"><span data-stu-id="b3887-132">To create a role link by using the Role Link Wizard</span></span>|  
    |---------------------------------------------------------|  
    |<span data-ttu-id="b3887-133">1.  Dans l’orchestration de boîte à outils, faites glisser le **lien de rôle** forme sur l’aire de conception.</span><span class="sxs-lookup"><span data-stu-id="b3887-133">1.  In the orchestration Toolbox, drag the **Role Link** shape to the design surface.</span></span> <span data-ttu-id="b3887-134">L'Assistant Lien de rôle démarre.</span><span class="sxs-lookup"><span data-stu-id="b3887-134">This starts the Role Link Wizard.</span></span><br /><span data-ttu-id="b3887-135">2.  Sur le **Bienvenue dans l’Assistant lien de rôle** , cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="b3887-135">2.  On the **Welcome to the Role Link Wizard** page, click **Next**.</span></span><br /><span data-ttu-id="b3887-136">3.  Sur le **Nomlienrôle** page, dans le **nom** , tapez `Provider_Consumer`.</span><span class="sxs-lookup"><span data-stu-id="b3887-136">3.  On the **Role Link Name** page, in the **Name** field, type `Provider_Consumer`.</span></span> <span data-ttu-id="b3887-137">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="b3887-137">Click **Next**.</span></span><br /><span data-ttu-id="b3887-138">4.  Sur le **Type de lien de rôle** page, sélectionnez **utiliser un Type de lien de rôle existant**.</span><span class="sxs-lookup"><span data-stu-id="b3887-138">4.  On the **Role Link Type** page, select **Use an existing Role Link Type**.</span></span> <span data-ttu-id="b3887-139">Dans le **nom de Type de lien de rôle** la liste déroulante, sélectionnez **Provider_Consumer_RoleLinkType**.</span><span class="sxs-lookup"><span data-stu-id="b3887-139">In the **Role Link Type Name** drop-down list, select **Provider_Consumer_RoleLinkType**.</span></span> <span data-ttu-id="b3887-140">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="b3887-140">Click **Next**.</span></span><br /><span data-ttu-id="b3887-141">5.  Sur le **Identification du rôle** page, sélectionnez **ProviderRole** à partir de la **quel rôle cette orchestration implémentera pour recevoir et traiter les messages des partenaires ?** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="b3887-141">5.  On the **Role Identification** page, select **ProviderRole** from the **Which role will this orchestration implement to receive and process messages from partners?** drop-down list.</span></span> <span data-ttu-id="b3887-142">L’Assistant sélectionne automatiquement **ConsumerRole** pour **cette orchestration utilisera le rôle ci-dessous pour envoyer des messages aux partenaires sur des ports du rôle**.</span><span class="sxs-lookup"><span data-stu-id="b3887-142">The wizard automatically selects **ConsumerRole** for **This orchestration will use the role below to send messages to partners on ports inside the role**.</span></span> <span data-ttu-id="b3887-143">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="b3887-143">Click **Next**.</span></span><br /><span data-ttu-id="b3887-144">6.  Sur le **utilisation du lien de rôle** page, sélectionnez **envoyer le premier message au rôle de mon partenaire**.</span><span class="sxs-lookup"><span data-stu-id="b3887-144">6.  On the **Role Link Usage** page, select **I will be sending the first message to my partner's role**.</span></span> <span data-ttu-id="b3887-145">Cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="b3887-145">Click **Finish**.</span></span>|  
  
     <span data-ttu-id="b3887-146">Dans la procédure précédente, vous précisez la définition du ConsumerRole en tant que rôle initiateur.</span><span class="sxs-lookup"><span data-stu-id="b3887-146">In the preceding procedure, you further define the ConsumerRole as the initiating role.</span></span> <span data-ttu-id="b3887-147">Cela signifie que votre orchestration enverra le premier message au consommateur via le port fourni par le ConsumerRole et que le ProviderRole recevra ensuite le message retourné par le consommateur pour traitement.</span><span class="sxs-lookup"><span data-stu-id="b3887-147">This means that your orchestration will send the first message to the consumer through the port provided by the ConsumerRole and then the ProviderRole will receive the message sent back from the consumer for further processing.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="b3887-148">S’il existe un seul rôle dans le type de lien de rôle, vous devez définir votre rôle dans le processus d’entreprise en sélectionnant le **rôle du fournisseur : recevoir le premier message** ou **rôle consommateur : envoyer le premier message** au lieu d’effectuer l’étape 5 de la procédure précédente.</span><span class="sxs-lookup"><span data-stu-id="b3887-148">If there is only one role in the role link type, you need to define your role in the business process by selecting either **Provider Role: I will be receiving the first message** or **Consumer Role: I will be sending the first message** instead of performing step 5 in the preceding procedure.</span></span>  
  
-   <span data-ttu-id="b3887-149">Concevez votre processus d'entreprise.</span><span class="sxs-lookup"><span data-stu-id="b3887-149">Design your business process.</span></span> <span data-ttu-id="b3887-150">Vous pouvez tirer parti d'ensembles de corrélations pour vous assurer qu'un message entrant correspond à l'instance appropriée d'une orchestration.</span><span class="sxs-lookup"><span data-stu-id="b3887-150">You can leverage correlation sets to ensure that an incoming message matches the appropriate instance of an orchestration.</span></span>  
  
-   <span data-ttu-id="b3887-151">Associez les ports à **envoyer** et **réception** formes.</span><span class="sxs-lookup"><span data-stu-id="b3887-151">Associate the ports with **Send** and **Receive** shapes.</span></span> <span data-ttu-id="b3887-152">En outre, suivez les instructions suivantes :</span><span class="sxs-lookup"><span data-stu-id="b3887-152">In addition, do the following:</span></span>  
  
    -   <span data-ttu-id="b3887-153">Si le rôle initiateur est un consommateur pour envoyer des messages, définissez explicitement la **DestinationParty** , propriété (une fois et une seule fois) dans votre orchestration.</span><span class="sxs-lookup"><span data-stu-id="b3887-153">If the initiating role is a consumer for sending messages, explicitly set the **DestinationParty** property (once and only once) in your orchestration.</span></span> <span data-ttu-id="b3887-154">Pour ce faire, définissez la valeur de la **DestinationParty** dans les **Expression** forme, comme dans l’exemple suivant, où ConfirmOrder est le nom d’un lien de rôle et PartnerName et OrganizationName sont des paramètres d’un tiers :</span><span class="sxs-lookup"><span data-stu-id="b3887-154">To do so, set the value of the **DestinationParty** in the **Expression** shape, as in the following example, where ConfirmOrder is the name of a role link, and PartnerName and OrganizationName are parameters of a party:</span></span>  
  
        ```  
        ConfirmOrder(Microsoft.XLANGs.BaseTypes.DestinationParty) = new Microsoft.XLANGs.BaseTypes.Party("PartnerName", "OrganizationName");  
        ```  
  
    -   <span data-ttu-id="b3887-155">Si le rôle initiateur est un fournisseur pour la réception des messages, le **DestinationParty** propriété est automatiquement initialisée par le récepteur.</span><span class="sxs-lookup"><span data-stu-id="b3887-155">If the initiating role is a provider for receiving messages, the **DestinationParty** property is initialized automatically by the receiver.</span></span> <span data-ttu-id="b3887-156">Le **DestinationParty** est défini sur le fournisseur lui-même.</span><span class="sxs-lookup"><span data-stu-id="b3887-156">The **DestinationParty** is set to the provider itself.</span></span> <span data-ttu-id="b3887-157">Le **SourceParty** propriété est en lecture seule et est fournie via un composant de pipeline approuvé pour résoudre le nom du tiers en fonction de l’identificateur de sécurité (SID) de l’expéditeur ou sur un certificat associé au tiers.</span><span class="sxs-lookup"><span data-stu-id="b3887-157">The **SourceParty** property is read-only, and is supplied through a trusted pipeline component to resolve the party name based on the security identifier (SID) of the sender or on a certificate associated with the party.</span></span> <span data-ttu-id="b3887-158">L’hôte qui exécute le composant de pipeline doit être marquée comme **approuvé par authentification**.</span><span class="sxs-lookup"><span data-stu-id="b3887-158">The host running the pipeline component must be marked as **Authentication Trusted**.</span></span> <span data-ttu-id="b3887-159">Vous pouvez obtenir la valeur de la **SourceParty** dans les **Expression** forme à l’aide de l’exemple de code suivant :</span><span class="sxs-lookup"><span data-stu-id="b3887-159">You can get the value of the **SourceParty** in the **Expression** shape by using the following sample code:</span></span>  
  
        ```  
        PartyName = Buyer_Supplier(Microsoft.XLANGs.BaseTypes.SourceParty);  
        ```  
  
## <a name="examples-of-using-role-links"></a><span data-ttu-id="b3887-160">Exemples d'utilisation de liens de rôle</span><span class="sxs-lookup"><span data-stu-id="b3887-160">Examples of Using Role Links</span></span>  
  
-   [<span data-ttu-id="b3887-161">PartyResolution (exemple BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="b3887-161">PartyResolution (BizTalk Server Sample)</span></span>](../core/partyresolution-biztalk-server-sample.md)  
  
-   <span data-ttu-id="b3887-162">Télécharger l’exemple du Kit de développement logiciel « Using Role Links » dans les exemples de code BizTalk Server disponibles à l’adresse [http://go.microsoft.com/fwlink/?LinkId=73703](http://go.microsoft.com/fwlink/?LinkId=73703).</span><span class="sxs-lookup"><span data-stu-id="b3887-162">Download the SDK sample "Using Role Links" from the BizTalk Server code samples available at [http://go.microsoft.com/fwlink/?LinkId=73703](http://go.microsoft.com/fwlink/?LinkId=73703).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b3887-163">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="b3887-163">See Also</span></span>  
 <span data-ttu-id="b3887-164">[À l’aide de liens de rôle dans les Orchestrations](../core/using-role-links-in-orchestrations.md) </span><span class="sxs-lookup"><span data-stu-id="b3887-164">[Using Role Links in Orchestrations](../core/using-role-links-in-orchestrations.md) </span></span>  
 <span data-ttu-id="b3887-165">[L’utilisation de la forme de lien de rôle](../core/how-to-use-the-role-link-shape.md) </span><span class="sxs-lookup"><span data-stu-id="b3887-165">[How to Use the Role Link Shape](../core/how-to-use-the-role-link-shape.md) </span></span>  
 [<span data-ttu-id="b3887-166">Comment utiliser l’Assistant lien de rôle</span><span class="sxs-lookup"><span data-stu-id="b3887-166">How to Use the Role Link Wizard</span></span>](../core/how-to-use-the-role-link-wizard.md)