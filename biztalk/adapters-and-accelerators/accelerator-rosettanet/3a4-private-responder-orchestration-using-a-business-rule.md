---
title: "Orchestration de répondeur de 3 a 4 à l’aide d’une règle d’entreprise | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 33d87952-def6-4202-b535-3d80171332eb
caps.latest.revision: "11"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 716ce7b5ac97ef424c815080a61877725db63443
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="3a4-private-responder-orchestration-using-a-business-rule"></a><span data-ttu-id="cd12f-102">Orchestration de répondeur de 3 a 4 à l’aide d’une règle d’entreprise</span><span class="sxs-lookup"><span data-stu-id="cd12f-102">3A4 Private Responder Orchestration Using a Business Rule</span></span>
<span data-ttu-id="cd12f-103">L’exemple de PIP3A4PrivateResponder.odx est une orchestration de processus privé qui montre comment implémenter un processus PIP (Partner Interface)-processus privé de répondeur spécifiques incorporant une règle d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="cd12f-103">The PIP3A4PrivateResponder.odx sample is a private-process orchestration that demonstrates how to implement a Partner Interface Process (PIP)-specific responder private process incorporating a business rule.</span></span> <span data-ttu-id="cd12f-104">Pour plus d’informations sur ce processus, consultez [définition d’une règle d’entreprise pour une Orchestration de processus privé](../../adapters-and-accelerators/accelerator-rosettanet/defining-a-business-rule-for-a-private-process-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="cd12f-104">For more information about this process, see [Defining a Business Rule for a Private Process Orchestration](../../adapters-and-accelerators/accelerator-rosettanet/defining-a-business-rule-for-a-private-process-orchestration.md).</span></span>  
  
 <span data-ttu-id="cd12f-105">Par défaut, le [!INCLUDE[btsCoName](../../includes/btsconame-md.md)]® [!INCLUDE[BTARN_CurrentVersion_FirstRef](../../includes/btarn-currentversion-firstref-md.md)] programme d’installation installe l’exemple dans \< *lecteur*> : \Program Files\Microsoft BizTalk \<version > Accelerator for RosettaNet\SDK\PipAutomation \3A4.</span><span class="sxs-lookup"><span data-stu-id="cd12f-105">By default, the [!INCLUDE[btsCoName](../../includes/btsconame-md.md)]® [!INCLUDE[BTARN_CurrentVersion_FirstRef](../../includes/btarn-currentversion-firstref-md.md)] Setup program installs the sample in \<*drive*>:\Program Files\Microsoft BizTalk \<version> Accelerator for RosettaNet\SDK\PipAutomation\3A4.</span></span>  
  
## <a name="procedures"></a><span data-ttu-id="cd12f-106">Procédures</span><span class="sxs-lookup"><span data-stu-id="cd12f-106">Procedures</span></span>  
  
#### <a name="to-build-and-initialize-this-sample"></a><span data-ttu-id="cd12f-107">Pour créer et initialiser l'exemple</span><span class="sxs-lookup"><span data-stu-id="cd12f-107">To build and initialize this sample</span></span>  
  
1.  <span data-ttu-id="cd12f-108">À l’invite de commandes, recherchez le  *\<lecteur >*: \Program Files\ Microsoft BizTalk Accelerator for RosettaNet \<version > \SDK\PIPAutomation\3A4 dossier.</span><span class="sxs-lookup"><span data-stu-id="cd12f-108">At a command prompt, locate the *\<drive>*:\Program Files\ Microsoft BizTalk Accelerator for RosettaNet \<version>\SDK\PIPAutomation\3A4 folder.</span></span>  
  
2.  <span data-ttu-id="cd12f-109">Exécutez le fichier Setup.bat, qui utilise le fichier de liaison Binding.xml pour effectuer les actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="cd12f-109">Run the file Setup.bat, which uses the Binding.xml binding file to perform the following actions:</span></span>  
  
    -   <span data-ttu-id="cd12f-110">Compile le projet d’assistance et inscrit l’assembly dans le global assembly cache.</span><span class="sxs-lookup"><span data-stu-id="cd12f-110">Compiles the Helper project and registers the assembly in the global assembly cache.</span></span>  
  
    -   <span data-ttu-id="cd12f-111">Compile le projet PIP3APrivateResponder et inscrit l’assembly dans le global assembly cache.</span><span class="sxs-lookup"><span data-stu-id="cd12f-111">Compiles the PIP3APrivateResponder project and registers the assembly in the global assembly cache.</span></span>  
  
    -   <span data-ttu-id="cd12f-112">Crée le LOB_To_PrivateResponder port de réception.</span><span class="sxs-lookup"><span data-stu-id="cd12f-112">Creates the LOB_To_PrivateResponder receive port.</span></span>  
  
    -   <span data-ttu-id="cd12f-113">Crée le LOB_To_PrivateResponder emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="cd12f-113">Creates the LOB_To_PrivateResponder receive location.</span></span>  
  
    -   <span data-ttu-id="cd12f-114">Crée et démarre le port d’envoi PrivateResponder_To_LOB.</span><span class="sxs-lookup"><span data-stu-id="cd12f-114">Creates and starts the PrivateResponder_To_LOB send port.</span></span>  
  
    -   <span data-ttu-id="cd12f-115">Compilation et déploiement de l’orchestration PIP3A4PrivateResponderProcess.</span><span class="sxs-lookup"><span data-stu-id="cd12f-115">Compiles and deploys the PIP3A4PrivateResponderProcess orchestration.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="cd12f-116">Vous devez effectuer la configuration de liaison de port de l’orchestration PIP3A4PrivateResponderProcess à l’aide de l’Explorateur BizTalk.</span><span class="sxs-lookup"><span data-stu-id="cd12f-116">You must complete the port binding configuration of the PIP3A4PrivateResponderProcess orchestration using BizTalk Explorer.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="cd12f-117">Pour annuler les modifications apportées par setup.bat, manuellement désinscrivez l’orchestration PIP3A4PrivateResponder.odx, annuler le déploiement des assemblys du programme d’assistance et PIP3A4PrivateResponder et annuler le déploiement, puis supprimez la stratégie de règles samplebtarnpolicy.</span><span class="sxs-lookup"><span data-stu-id="cd12f-117">To undo changes made by setup.bat, manually unenlist the PIP3A4PrivateResponder.odx orchestration, undeploy the Helper and PIP3A4PrivateResponder assemblies, and undeploy and then delete the samplebtarnpolicy rules policy.</span></span> <span data-ttu-id="cd12f-118">Vous ne pouvez pas utiliser Cleanup.bat dans le  *\<lecteur >*: \Program Files\ Microsoft BizTalk Accelerator for RosettaNet \<version > dossier \SDK\PIPAutomation\3A4 pour annuler les modifications apportées par setup.bat.</span><span class="sxs-lookup"><span data-stu-id="cd12f-118">You cannot use Cleanup.bat in the *\<drive>*:\Program Files\ Microsoft BizTalk Accelerator for RosettaNet \<version>\SDK\PIPAutomation\3A4 folder to undo changes made by setup.bat.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="cd12f-119">Montre</span><span class="sxs-lookup"><span data-stu-id="cd12f-119">Demonstrates</span></span>  
 <span data-ttu-id="cd12f-120">Cet exemple s’abonne des messages d’action et de signal demande 3 a 4.</span><span class="sxs-lookup"><span data-stu-id="cd12f-120">This sample subscribes 3A4 request action and signal messages.</span></span> <span data-ttu-id="cd12f-121">Elle fonctionne dans les deux processus synchrones et asynchrones de 3 a 4.</span><span class="sxs-lookup"><span data-stu-id="cd12f-121">It works in both 3A4 synchronous and asynchronous processes.</span></span> <span data-ttu-id="cd12f-122">Tous les autres messages PIP repositionner toujours générique [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] processus privé.</span><span class="sxs-lookup"><span data-stu-id="cd12f-122">All other PIP messages still route through the generic [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] private process.</span></span> <span data-ttu-id="cd12f-123">Cet exemple appelle la [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] moteur des règles d’entreprise et passe à la règle de moteur de message de demande entrant 3 a 4.</span><span class="sxs-lookup"><span data-stu-id="cd12f-123">This sample invokes the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Business Rule Engine, and passes to the Rule Engine the incoming 3A4 request message.</span></span>  
  
> [!NOTE]
>  [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]<span data-ttu-id="cd12f-124">fournit un exemple de stratégie de règle d’entreprise nommé samplebtarnpolicy.xml dans \< *lecteur*> : \Program Files\ Microsoft BizTalk Accelerator for RosettaNet \<version > \SDK\PipAutomation\3A4.</span><span class="sxs-lookup"><span data-stu-id="cd12f-124"> provides a sample business-rule policy named samplebtarnpolicy.xml in \<*drive*>:\Program Files\ Microsoft BizTalk Accelerator for RosettaNet \<version>\SDK\PipAutomation\3A4.</span></span> <span data-ttu-id="cd12f-125">Pour plus d’informations, consultez [stratégie d’entreprise BTARN exemple](../../adapters-and-accelerators/accelerator-rosettanet/sample-btarn-business-policy.md).</span><span class="sxs-lookup"><span data-stu-id="cd12f-125">For more information, see [Sample BTARN Business Policy](../../adapters-and-accelerators/accelerator-rosettanet/sample-btarn-business-policy.md).</span></span>  
  
 <span data-ttu-id="cd12f-126">Pour utiliser l’exemple, configurez une règle d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="cd12f-126">To work with the sample, set up a business rule.</span></span> <span data-ttu-id="cd12f-127">Si le message répond à la règle d’entreprise, le processus enregistre le message d’action entrant dans la table MessagesToLOB, définit l’état de remise à 2.</span><span class="sxs-lookup"><span data-stu-id="cd12f-127">If the message meets the business rule, then the process saves the incoming action message in the MessagesToLOB table, setting the Delivered Status to 2.</span></span> <span data-ttu-id="cd12f-128">La valeur de colonne remis doit être différent de zéro, afin que l’application métier-sait qu’il ne dispose pas de générer une confirmation pour cette demande.</span><span class="sxs-lookup"><span data-stu-id="cd12f-128">The Delivered column value must be nonzero, so that the line-of-business application knows that it does not have to generate a confirmation for this request.</span></span> <span data-ttu-id="cd12f-129">Le processus mappe le message de demande de 3 a 4 à un message de confirmation de 3 a 4, puis envoie la réponse à la table MessageStorageIn à l’aide du `SubmitRNIF` (méthode).</span><span class="sxs-lookup"><span data-stu-id="cd12f-129">The process then maps the 3A4 request message to a 3A4 confirmation message, and submits the response to the MessageStorageIn table using the `SubmitRNIF` method.</span></span>  
  
 <span data-ttu-id="cd12f-130">Si le message ne répond pas à la règle d’entreprise, le processus enregistre le message d’action entrant dans la table MessageStorageOut et définit l’état de remise à 0.</span><span class="sxs-lookup"><span data-stu-id="cd12f-130">If the message does not meet the business rule, the process saves the incoming action message in the MessageStorageOut table, and sets Delivered Status to 0.</span></span>  
  
 <span data-ttu-id="cd12f-131">Cet exemple inclut un fichier de liaison (Binding.xml) que vous pouvez utiliser pour configurer un port d’envoi (PrivateResponder_To_LOB), un port de réception (LOB_To_PrivateResponder) et un emplacement de réception (LOB_To_PrivateResponder) pour une utilisation avec la PIP3A4PrivateResponder.odx orchestration.</span><span class="sxs-lookup"><span data-stu-id="cd12f-131">This sample includes a binding file (Binding.xml) that you can use to set up a send port (PrivateResponder_To_LOB), a receive port (LOB_To_PrivateResponder), and a receive location (LOB_To_PrivateResponder) for use with the PIP3A4PrivateResponder.odx orchestration.</span></span> <span data-ttu-id="cd12f-132">Utilisez la commande BTSTask pour importer les liaisons dans le fichier Binding.xml.</span><span class="sxs-lookup"><span data-stu-id="cd12f-132">Use the BTSTask command to import the bindings in the Binding.xml file.</span></span> <span data-ttu-id="cd12f-133">Pour plus d’informations, consultez la rubrique « Commande ImportBindings » dans [!INCLUDE[btsBizTalkServer2006r3](../../includes/btsbiztalkserver2006r3-md.md)] aide.</span><span class="sxs-lookup"><span data-stu-id="cd12f-133">For more information, see the "ImportBindings Command" topic in [!INCLUDE[btsBizTalkServer2006r3](../../includes/btsbiztalkserver2006r3-md.md)] Help.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cd12f-134">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="cd12f-134">See Also</span></span>  
 <span data-ttu-id="cd12f-135">[Orchestration Action PIPAutomation double](../../adapters-and-accelerators/accelerator-rosettanet/double-action-pipautomation-orchestration.md) </span><span class="sxs-lookup"><span data-stu-id="cd12f-135">[Double Action PIPAutomation Orchestration](../../adapters-and-accelerators/accelerator-rosettanet/double-action-pipautomation-orchestration.md) </span></span>  
 <span data-ttu-id="cd12f-136">[Stratégie d’entreprise BTARN exemple](../../adapters-and-accelerators/accelerator-rosettanet/sample-btarn-business-policy.md) </span><span class="sxs-lookup"><span data-stu-id="cd12f-136">[Sample BTARN Business Policy](../../adapters-and-accelerators/accelerator-rosettanet/sample-btarn-business-policy.md) </span></span>  
 [<span data-ttu-id="cd12f-137">Exemples d’orchestration</span><span class="sxs-lookup"><span data-stu-id="cd12f-137">Orchestration Samples</span></span>](../../adapters-and-accelerators/accelerator-rosettanet/orchestration-samples.md)