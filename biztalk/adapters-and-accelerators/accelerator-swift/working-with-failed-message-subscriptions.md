---
title: "Utilisation des échecs de Message abonnements | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- failed messages, subscriptions
- failed messages, developing
- developing, failed message subscriptions
ms.assetid: 8dee0aa8-53bf-40be-866b-f1b83960dc99
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 17a29c6e00ee56c6869b9d9326d045a2ad8fb5fd
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="working-with-failed-message-subscriptions"></a><span data-ttu-id="3a50f-102">Utilisation des abonnements aux messages ayant échoué</span><span class="sxs-lookup"><span data-stu-id="3a50f-102">Working with Failed Message Subscriptions</span></span>
<span data-ttu-id="3a50f-103">Lorsque le [!INCLUDE[btsCoName](../../includes/btsconame-md.md)] [!INCLUDE[A4SWIFT_CurrentVersion_FirstRef](../../includes/a4swift-currentversion-firstref-md.md)] processus du désassembleur (traite et valide) un message, il promeut les propriétés pour ce message.</span><span class="sxs-lookup"><span data-stu-id="3a50f-103">When the [!INCLUDE[btsCoName](../../includes/btsconame-md.md)][!INCLUDE[A4SWIFT_CurrentVersion_FirstRef](../../includes/a4swift-currentversion-firstref-md.md)] disassembler processes (parses and validates) a message, it promotes properties for that message.</span></span> <span data-ttu-id="3a50f-104">Ces propriétés promues fournissent des informations sur l’exactitude et la validité du message, ainsi que des informations relatives au traitement par lots si A4SWIFT a reçu le message dans le cadre d’un traitement entrant.</span><span class="sxs-lookup"><span data-stu-id="3a50f-104">These promoted properties provide information about the correctness and validity of the message, as well as batch-related information if A4SWIFT received the message as part of an inbound batch.</span></span> <span data-ttu-id="3a50f-105">Pour obtenir une liste complète de ces propriétés, consultez [propriétés promues A4SWIFT_ *](../../adapters-and-accelerators/accelerator-swift/a4swift-promoted-properties.md).</span><span class="sxs-lookup"><span data-stu-id="3a50f-105">For a complete list of these properties, see [A4SWIFT_* Promoted Properties](../../adapters-and-accelerators/accelerator-swift/a4swift-promoted-properties.md).</span></span>  
  
 <span data-ttu-id="3a50f-106">Contrairement aux natif désassembleurs de BizTalk, le désassembleur A4SWIFT ne suspend pas un message lors du traitement des erreurs de produit ou des échecs.</span><span class="sxs-lookup"><span data-stu-id="3a50f-106">Unlike native BizTalk Disassemblers, the A4SWIFT disassembler does not suspend a message when processing produces errors or failures.</span></span> <span data-ttu-id="3a50f-107">Au lieu de cela, elle publie le message ayant échoué dans la base de données MessageBox comme il le ferait un message valide.</span><span class="sxs-lookup"><span data-stu-id="3a50f-107">Instead, it publishes the failed message to the MessageBox database just as it would a valid message.</span></span> <span data-ttu-id="3a50f-108">Par conséquent, les messages ayant échoué peuvent contenir des détails de l’erreur dans la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="3a50f-108">As a result, failed messages can carry error details into the MessageBox database.</span></span> <span data-ttu-id="3a50f-109">Vous pouvez extraire le message à partir de la base de données MessageBox, gérer et réparer le message et même renvoyer le message dans la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="3a50f-109">You can retrieve the message from the MessageBox database, handle and repair the message, and even resubmit the message back into the MessageBox database.</span></span> <span data-ttu-id="3a50f-110">Vous ne serez pas en mesure d’effectuer la plupart de ces tâches si le message a été réellement *suspendu*.</span><span class="sxs-lookup"><span data-stu-id="3a50f-110">You would not be able to perform most of these tasks if the message was actually *suspended*.</span></span>  
  
 <span data-ttu-id="3a50f-111">Vous pouvez identifier un message A4SWIFT a publié la base de données MessageBox comme erronée ou non par ses propriétés promues.</span><span class="sxs-lookup"><span data-stu-id="3a50f-111">You can identify a message that A4SWIFT has published to the MessageBox database as failed or erroneous by its promoted properties.</span></span> <span data-ttu-id="3a50f-112">Lors du traitement d’un message ayant échoué, le désassembleur SWIFT remplit et promeut le **A4SWIFT_Failed** propriété et la valeur d’un ou plusieurs des autres propriétés suivantes, avant de publier le message à la base de données MessageBox :</span><span class="sxs-lookup"><span data-stu-id="3a50f-112">When processing a failed message, the SWIFT disassembler populates and promotes the **A4SWIFT_Failed** property, and one or more of the other following properties, before publishing the message to the MessageBox database:</span></span>  
  
-   <span data-ttu-id="3a50f-113">**A4SWIFT_ParseErrors** indique le nombre d’erreurs (par exemple, les données mal formées) rencontrées lors du traitement d’analyse.</span><span class="sxs-lookup"><span data-stu-id="3a50f-113">**A4SWIFT_ParseErrors** indicates the number of parsing errors (such as malformed data) encountered during processing.</span></span>  
  
-   <span data-ttu-id="3a50f-114">**A4SWIFT_XmlValidationErrors** indique le nombre d’erreurs de validation XML (par exemple, les données non valides ou un type incorrect en ce qui concerne le schéma) rencontrées lors du traitement.</span><span class="sxs-lookup"><span data-stu-id="3a50f-114">**A4SWIFT_XmlValidationErrors** indicates the number of XML validation errors (such as invalid data or incorrect type with respect to the schema) encountered during processing.</span></span>  
  
-   <span data-ttu-id="3a50f-115">**A4SWIFT_BreValidationErrors** indique le nombre d’erreurs de validation du moteur de règles d’entreprise (BRE) (telles que les données violent une règle de réseau rapide) a rencontré au cours du traitement.</span><span class="sxs-lookup"><span data-stu-id="3a50f-115">**A4SWIFT_BreValidationErrors** indicates the number of Business Rule Engine (BRE) validation errors (such as data that breaks a SWIFT network rule) encountered during processing.</span></span>  
  
-   <span data-ttu-id="3a50f-116">**A4SWIFT_Failed** est **true** lorsque le nombre des propriétés ci-dessus est supérieur à zéro, ou **false** lorsque le nombre est égal à zéro.</span><span class="sxs-lookup"><span data-stu-id="3a50f-116">**A4SWIFT_Failed** is **true** when the count of any the above properties is greater than zero, or **false** when the count is equal to zero.</span></span>  
  
 <span data-ttu-id="3a50f-117">Ces propriétés sont toutes les parties de la [!INCLUDE[btsCoName](../../includes/btsconame-md.md)]. Espace de noms Solutions.A4SWIFT.Property.</span><span class="sxs-lookup"><span data-stu-id="3a50f-117">These properties are all part of the [!INCLUDE[btsCoName](../../includes/btsconame-md.md)].Solutions.A4SWIFT.Property namespace.</span></span> <span data-ttu-id="3a50f-118">Pour plus d’informations sur ces autres propriétés promues et, consultez [propriétés promues A4SWIFT_ *](../../adapters-and-accelerators/accelerator-swift/a4swift-promoted-properties.md).</span><span class="sxs-lookup"><span data-stu-id="3a50f-118">For more information about these and other promoted properties, see [A4SWIFT_* Promoted Properties](../../adapters-and-accelerators/accelerator-swift/a4swift-promoted-properties.md).</span></span>  
  
 <span data-ttu-id="3a50f-119">Pour intercepter ou récupérer des messages ayant échoué, vous devez créer des expressions de filtre (abonnements) pour les ports d’envoi ou réception d’orchestration des formes qui incluent des propriétés répertoriées ci-dessus, en tant que **AND** clauses de l’expression.</span><span class="sxs-lookup"><span data-stu-id="3a50f-119">To catch or retrieve failed messages, you need to create filter expressions (subscriptions) for send ports or orchestration receive shapes that include some of the properties listed above, as **AND** clauses of the expression.</span></span>  
  
 <span data-ttu-id="3a50f-120">Par exemple, pour vous abonner à tous les messages ayant échouées, vous ajoutez la clause suivante (comme un **AND** clause s’il existe d’autres clauses) :</span><span class="sxs-lookup"><span data-stu-id="3a50f-120">For example, to subscribe to all failed messages, you add the following clause (as an **AND** clause if there are other clauses):</span></span>  
  
 [!INCLUDE[btsCoName](../../includes/btsconame-md.md)]<span data-ttu-id="3a50f-121">. Solutions.A4SWIFT.Property.A4SWIFT_Failed == **true**</span><span class="sxs-lookup"><span data-stu-id="3a50f-121">.Solutions.A4SWIFT.Property.A4SWIFT_Failed == **true**</span></span>  
  
 <span data-ttu-id="3a50f-122">Pour vous abonner aux messages avec uniquement les échecs d’analyse, vous additionner les clauses suivantes :</span><span class="sxs-lookup"><span data-stu-id="3a50f-122">To subscribe to messages with only parse failures, you add the following clauses together:</span></span>  
  
 <span data-ttu-id="3a50f-123">**ET** [!INCLUDE[btsCoName](../../includes/btsconame-md.md)]. Solutions.A4SWIFT.Property.A4SWIFT_Failed == **true**,**AND**[!INCLUDE[btsCoName](../../includes/btsconame-md.md)]. Solutions.A4SWIFT.Property.A4SWIFT_XmlValidationErrors == 0,**AND**[!INCLUDE[btsCoName](../../includes/btsconame-md.md)]. Solutions.A4SWIFT.Property.A4SWIFT_BreValidationErrors == 0 ;</span><span class="sxs-lookup"><span data-stu-id="3a50f-123">**AND** [!INCLUDE[btsCoName](../../includes/btsconame-md.md)].Solutions.A4SWIFT.Property.A4SWIFT_Failed == **true**,**AND**[!INCLUDE[btsCoName](../../includes/btsconame-md.md)].Solutions.A4SWIFT.Property.A4SWIFT_XmlValidationErrors == 0,**AND**[!INCLUDE[btsCoName](../../includes/btsconame-md.md)].Solutions.A4SWIFT.Property.A4SWIFT_BreValidationErrors == 0;</span></span>  
  
 <span data-ttu-id="3a50f-124">À l’inverse, pour les ports d’envoi ou orchestrations conçues pour gérer uniquement les messages valides, inclure «**AND**[!INCLUDE[btsCoName](../../includes/btsconame-md.md)]. Solutions.A4SWIFT.Property.A4SWIFT_Failed == **false**« comme une clause dans les expressions de filtre.</span><span class="sxs-lookup"><span data-stu-id="3a50f-124">Conversely, for send ports or orchestrations designed to handle only valid messages, include "**AND**[!INCLUDE[btsCoName](../../includes/btsconame-md.md)].Solutions.A4SWIFT.Property.A4SWIFT_Failed == **false**" as a clause in their filter expressions.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3a50f-125">Si les abonnements se chevauchent, A4SWIFT effectuera tous les abonnements.</span><span class="sxs-lookup"><span data-stu-id="3a50f-125">If subscriptions overlap, A4SWIFT will fulfill all subscriptions.</span></span> <span data-ttu-id="3a50f-126">Autrement dit, si plusieurs services (port d’envoi ou d’orchestration) possède des expressions de filtre remplies par un message particulier, tous les services de ce type seront le même message.</span><span class="sxs-lookup"><span data-stu-id="3a50f-126">That is, if more than one service (send port or orchestration) has filter expressions fulfilled by a particular message, all such services will receive the same message.</span></span> <span data-ttu-id="3a50f-127">Par exemple, si un port d’envoi s’abonne à tous les messages ayant échoué et une orchestration s’abonne aux messages uniquement avec des erreurs d’analyse, les deux abonnements soit remplies lorsque A4SWIFT rencontre des erreurs d’analyse lors du traitement d’un message.</span><span class="sxs-lookup"><span data-stu-id="3a50f-127">For example, if a send port subscribes to all failed messages and an orchestration subscribes to only messages with parse failures, both subscriptions will be satisfied when A4SWIFT encounters parse errors when processing a message.</span></span> <span data-ttu-id="3a50f-128">Veillez à éliminer les chevauchements indésirables dans les abonnements entre les services.</span><span class="sxs-lookup"><span data-stu-id="3a50f-128">Be sure to eliminate unwanted overlaps in subscriptions across services.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3a50f-129">Si A4SWIFT reçoit et traite un message et publie le message à la base de données MessageBox, mais le message ne satisfait pas les abonnements, A4SWIFT suspend le message avec un [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] message d’erreur indiquant un manque d’abonnés.</span><span class="sxs-lookup"><span data-stu-id="3a50f-129">If A4SWIFT receives and processes a message, and publishes that message to the MessageBox database, but the message does not satisfy any subscription, A4SWIFT will suspend the message with a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] error indicating a lack of subscribers.</span></span> <span data-ttu-id="3a50f-130">Par exemple, si vous avez un abonnement à tous les messages de service « A4SWIFT_Failed == false », mais aucun service de s’abonner aux messages où « A4SWIFT_Failed == true », puis les messages dont l’analyse a échoué ou la validation est effectivement interrompue en raison d’un manque d’abonnés.</span><span class="sxs-lookup"><span data-stu-id="3a50f-130">For example, if you have a service subscribing to all messages "A4SWIFT_Failed == false", but no services subscribe to messages where "A4SWIFT_Failed == true", then messages that fail parsing or validation will indeed be suspended due to a lack of subscribers.</span></span> <span data-ttu-id="3a50f-131">Ce scénario réellement vous permet de reproduire traditionnelle suspension des messages ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="3a50f-131">This scenario actually enables you to mimic traditional suspension of failed messages.</span></span> <span data-ttu-id="3a50f-132">Veillez à vous abonner à tous les messages que vous ne souhaitez pas avoir suspendu.</span><span class="sxs-lookup"><span data-stu-id="3a50f-132">Be sure to subscribe to all messages that you do not want to have suspended.</span></span> <span data-ttu-id="3a50f-133">Consultez [!INCLUDE[btsBizTalkServer2006r3](../../includes/btsbiztalkserver2006r3-md.md)] aide pour plus d’informations sur les abonnements de base de données MessageBox, ports d’envoi, orchestrations et les expressions de filtre.</span><span class="sxs-lookup"><span data-stu-id="3a50f-133">See [!INCLUDE[btsBizTalkServer2006r3](../../includes/btsbiztalkserver2006r3-md.md)] Help for additional details about MessageBox database subscriptions, send ports, orchestrations, and filter expressions.</span></span>  
  
 <span data-ttu-id="3a50f-134">Contenu de cette section :</span><span class="sxs-lookup"><span data-stu-id="3a50f-134">This section contains:</span></span>  
  
-   [<span data-ttu-id="3a50f-135">Messages d’échec et les objets ErrorCollection</span><span class="sxs-lookup"><span data-stu-id="3a50f-135">Failed Messages and ErrorCollection Objects</span></span>](../../adapters-and-accelerators/accelerator-swift/failed-messages-and-errorcollection-objects.md)