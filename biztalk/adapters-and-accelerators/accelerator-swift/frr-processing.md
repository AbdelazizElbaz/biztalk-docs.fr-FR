---
title: Traitement de FRR | Documents Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- FRR, processing
- FRR, components
- FRR, process flow
ms.assetid: 8b064d18-5ee7-44fd-95d1-9a0d66f1ad1a
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f2b0d34ccffd2bf09148bcfc5544b38ea5d0033d
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="frr-processing"></a><span data-ttu-id="14ae0-102">Traitement de FRR</span><span class="sxs-lookup"><span data-stu-id="14ae0-102">FRR Processing</span></span>
<span data-ttu-id="14ae0-103">Le [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] fonctionnalité de rapprochement de réponse de FIN (FRR) met en corrélation les messages FIN de l’accès de Alliance SWIFT (SAA) avec le message d’origine à partir de [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] auquel le message SAA répond.</span><span class="sxs-lookup"><span data-stu-id="14ae0-103">The [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] FIN Response Reconciliation (FRR) feature correlates FIN messages from the SWIFT Alliance Access (SAA) with the original message from [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] that the SAA message responds to.</span></span> <span data-ttu-id="14ae0-104">Chaque fois que [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] envoie un message d’origine, les caches FRR une copie de tout message lié pour SWIFT et qui n’a pas échoué le traitement.</span><span class="sxs-lookup"><span data-stu-id="14ae0-104">Whenever [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] sends an original message, FRR caches a copy of any message that is bound for SWIFT and that has not failed processing.</span></span> <span data-ttu-id="14ae0-105">Il contrôle ensuite la MessageBox pour les messages de réponse renvoyés par SAA à [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]et récupère les messages d’accusé de réception/NON-RÉCEPTION qui correspond à la copie du message mis en cache.</span><span class="sxs-lookup"><span data-stu-id="14ae0-105">It then monitors the MessageBox for response messages returned by SAA to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)], and picks up any ACK/NAK messages that corresponds to the cached message copy.</span></span>  
  
 <span data-ttu-id="14ae0-106">FRR établit une corrélation entre un message sortant et un message entrant en comparant les propriétés d’ID de corrélation.</span><span class="sxs-lookup"><span data-stu-id="14ae0-106">FRR establishes a correlation between an outgoing message and an incoming message by comparing correlation ID properties.</span></span> <span data-ttu-id="14ae0-107">FRR définit les propriétés promues de la copie du message d’origine en fonction de la nature de la réponse, puis achemine le message d’origine dans la MessageBox pour un traitement ultérieur.</span><span class="sxs-lookup"><span data-stu-id="14ae0-107">FRR sets promoted properties of the copy of the original message according to the nature of the response, and then routes the original message to the MessageBox for further processing.</span></span>  
  
## <a name="frr-components"></a><span data-ttu-id="14ae0-108">Composants FRR</span><span class="sxs-lookup"><span data-stu-id="14ae0-108">FRR Components</span></span>  
 <span data-ttu-id="14ae0-109">FRR inclut un processus en cours (orchestration) qui surveille les messages entrants et sortants et pour chaque message sortant ou entrant, promeut les propriétés d’identification qu’il utilisera pour la comparaison.</span><span class="sxs-lookup"><span data-stu-id="14ae0-109">FRR includes an ongoing process (orchestration) that monitors outgoing and incoming messages, and for each outgoing or incoming message, promotes the identification properties that it will use for comparison.</span></span> <span data-ttu-id="14ae0-110">Une série de [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] composants fonctionnent conjointement avec l’orchestration FRR, routage des messages entre les composants du FRR [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]et entre [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] et SAA.</span><span class="sxs-lookup"><span data-stu-id="14ae0-110">A series of [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] components work together with the FRR orchestration, routing messages between the FRR components within [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)], and between [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] and SAA.</span></span> <span data-ttu-id="14ae0-111">Ces composants sont répertoriées ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="14ae0-111">These components are listed below:</span></span>  
  
-   <span data-ttu-id="14ae0-112">Un FRR emplacement de réception qui reçoit le message d’origine de l’application principale.</span><span class="sxs-lookup"><span data-stu-id="14ae0-112">An FRR receive location that receives the original message from the back-end application.</span></span>  
  
-   <span data-ttu-id="14ae0-113">L’orchestration FRR qui surveille les messages entrants et sortants et établit la corrélation entre eux.</span><span class="sxs-lookup"><span data-stu-id="14ae0-113">The FRR orchestration that monitors outgoing and incoming messages, and establishes the correlation between them.</span></span>  
  
-   <span data-ttu-id="14ae0-114">Un FRR port d’envoi qui envoie le message d’origine à partir de [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] à SAA.</span><span class="sxs-lookup"><span data-stu-id="14ae0-114">An FRR send port that sends the original message from [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] to SAA.</span></span>  
  
-   <span data-ttu-id="14ae0-115">L’adaptateur BizTalk pour MQSeries qui permet la transmission de données entre [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] et SAA (qui utilise des files d’attente MQSeries).</span><span class="sxs-lookup"><span data-stu-id="14ae0-115">The BizTalk Adapter for MQSeries that enables data transmission between [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] and SAA (which uses MQSeries queues).</span></span>  
  
-   <span data-ttu-id="14ae0-116">Un FRR emplacement de réception qui reçoit les messages de réponse FIN de la SAA.</span><span class="sxs-lookup"><span data-stu-id="14ae0-116">An FRR receive location that receives FIN response messages from SAA.</span></span>  
  
-   <span data-ttu-id="14ae0-117">Un ensemble de ports d’envoi FRR, chacun d’eux envoie des messages corrélés d’un type spécifique à partir de [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] à une application back-end pour un traitement personnalisé.</span><span class="sxs-lookup"><span data-stu-id="14ae0-117">A set of FRR send ports, each of which sends correlated messages of a specific type from [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] to a back-end application for custom processing.</span></span>  
  
 <span data-ttu-id="14ae0-118">Pour les composants ci-dessus, vous pouvez ajouter un gestionnaire personnalisé principal qui traite le message d’origine, les propriétés promues qui ont été définies par FRR.</span><span class="sxs-lookup"><span data-stu-id="14ae0-118">To the above components, you can add a back-end custom handler that processes the original message the promoted properties of which have been set by FRR.</span></span>  
  
## <a name="frr-process-flow"></a><span data-ttu-id="14ae0-119">Flux de processus FRR</span><span class="sxs-lookup"><span data-stu-id="14ae0-119">FRR Process Flow</span></span>  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="14ae0-120">effectue le rapprochement entre dans le processus suivant :</span><span class="sxs-lookup"><span data-stu-id="14ae0-120"> performs the reconciliation in the following process:</span></span>  
  
1.  <span data-ttu-id="14ae0-121">L’application principale achemine le message d’origine au [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span><span class="sxs-lookup"><span data-stu-id="14ae0-121">The back-end application routes the original message to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span>  
  
2.  <span data-ttu-id="14ae0-122">Emplacement de réception un FRR reçoit le message, la traite dans le pipeline de réception associé et l’achemine vers la BizTalk MessageBox.</span><span class="sxs-lookup"><span data-stu-id="14ae0-122">An FRR receive location receives the message, processes it in the associated receive pipeline, and routes it to the BizTalk MessageBox.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="14ae0-123">Vous pouvez utiliser FRR conjointement avec la [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] fonctionnalité Message Repair et New Submission, ou séparément.</span><span class="sxs-lookup"><span data-stu-id="14ae0-123">You can use FRR in conjunction with the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] Message Repair and New Submission feature, or separately.</span></span> <span data-ttu-id="14ae0-124">Si vous avez installé Message réparer et New Submission, vous pouvez configurer le système pour la réparation de message après l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="14ae0-124">If you have installed Message Repair and New Submission, you can configure the system for message repair after step 2.</span></span> <span data-ttu-id="14ae0-125">L’orchestration de réparation de messages achemine le message de réparer/vérifié/approuvé vers la BizTalk MessageBox pour les traitements ultérieurs FRR.</span><span class="sxs-lookup"><span data-stu-id="14ae0-125">The message-repair orchestration routes the repaired/verified/approved message back to the BizTalk MessageBox for subsequent FRR processing.</span></span>  
  
3.  <span data-ttu-id="14ae0-126">Si le message dans la MessageBox est lié pour SWIFT et a passé la validation, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] Active une instance de l’orchestration FRR.</span><span class="sxs-lookup"><span data-stu-id="14ae0-126">If the message in the MessageBox is bound for SWIFT and has passed validation, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] activates an instance of the FRR orchestration.</span></span> <span data-ttu-id="14ae0-127">L’orchestration conserve une copie du message sortant.</span><span class="sxs-lookup"><span data-stu-id="14ae0-127">The orchestration keeps a copy of the outgoing message.</span></span> <span data-ttu-id="14ae0-128">Il attend dans un état activé d’une réponse de l’autorité d’homologation qui peut correspondre au message sortant vers toute réponse entrante.</span><span class="sxs-lookup"><span data-stu-id="14ae0-128">It then waits in an activated state for a response from SAA, so it can match the outgoing message to any incoming response.</span></span> <span data-ttu-id="14ae0-129">Cette instance de l’orchestration ne traite que ce message sortant spécifique et aucune réponse corrélée à ce message.</span><span class="sxs-lookup"><span data-stu-id="14ae0-129">This instance of the orchestration only processes that specific outgoing message and any correlated responses to that message.</span></span> <span data-ttu-id="14ae0-130">Tous les autres messages, même du même type, sont traité par une autre instance de l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="14ae0-130">Any other message, even of the same type, is processed by another instance of the orchestration.</span></span>  
  
4.  <span data-ttu-id="14ae0-131">En même temps que [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] active de l’instance d’orchestration FRR, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] achemine le message vers le port d’envoi qui envoie des messages à SAA.</span><span class="sxs-lookup"><span data-stu-id="14ae0-131">At the same time that [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] activates the FRR orchestration instance, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] routes the message to the send port that sends messages to SAA.</span></span> <span data-ttu-id="14ae0-132">Le pipeline d’envoi promeut une propriété d’identification de message et les propriétés requises pour le traitement par MQSeries.</span><span class="sxs-lookup"><span data-stu-id="14ae0-132">The send pipeline promotes a message-identification property and properties required for processing by MQSeries.</span></span> <span data-ttu-id="14ae0-133">Il envoie ensuite le message à l’adaptateur BizTalk pour MQSeries.</span><span class="sxs-lookup"><span data-stu-id="14ae0-133">It then sends the message to the BizTalk Adapter for MQSeries.</span></span>  
  
5.  <span data-ttu-id="14ae0-134">L’adaptateur BizTalk pour MQSeries transfère le message vers la file d’attente MQSeries approprié à SAA.</span><span class="sxs-lookup"><span data-stu-id="14ae0-134">The BizTalk Adapter for MQSeries transports the message to the appropriate MQSeries queue at SAA.</span></span>  
  
6.  <span data-ttu-id="14ae0-135">SAA génère une réponse immédiate pour le routage directement à [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span><span class="sxs-lookup"><span data-stu-id="14ae0-135">SAA generates an immediate response for routing directly back to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span> <span data-ttu-id="14ae0-136">SAA achemine ensuite le message au réseau SWIFT.</span><span class="sxs-lookup"><span data-stu-id="14ae0-136">SAA then routes the message to the SWIFT Network.</span></span> <span data-ttu-id="14ae0-137">Le réseau SWIFT génère des autres réponses qu’il envoie vers SAA pour le routage vers [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span><span class="sxs-lookup"><span data-stu-id="14ae0-137">The SWIFT Network generates other responses, which it sends to SAA for routing back to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span> <span data-ttu-id="14ae0-138">SAA définit la propriété de jeton de corrélation pour le message de réponse FIN à la valeur d’identification de message du message d’origine.</span><span class="sxs-lookup"><span data-stu-id="14ae0-138">SAA sets the correlation token property for the FIN response message to the message-identification value of the original message.</span></span>  
  
7.  <span data-ttu-id="14ae0-139">Transports SAA la réponse FIN via l’adaptateur BizTalk pour MQSeries au [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span><span class="sxs-lookup"><span data-stu-id="14ae0-139">SAA transports the FIN response through the BizTalk Adapter for MQSeries back to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span>  
  
8.  <span data-ttu-id="14ae0-140">Emplacement de réception le FRR reçoit la réponse et achemine le message via le FRR pipeline de réception qui traite le jeton de corrélation de la réponse.</span><span class="sxs-lookup"><span data-stu-id="14ae0-140">The FRR receive location receives the response and routes the message through the FRR receive pipeline that processes the response's correlation token.</span></span> <span data-ttu-id="14ae0-141">Il place ensuite la réponse dans la BizTalk MessageBox.</span><span class="sxs-lookup"><span data-stu-id="14ae0-141">It then places the response in the BizTalk MessageBox.</span></span>  
  
9. <span data-ttu-id="14ae0-142">L’instance d’orchestration FRR récupère tous les messages à partir de la MessageBox qui a un jeton de corrélation égal à la propriété d’ID de message de la copie du message d’origine.</span><span class="sxs-lookup"><span data-stu-id="14ae0-142">The FRR orchestration instance picks up any message from the MessageBox that has a correlation token equal to the message ID property of the copy of the original message.</span></span>  
  
10. <span data-ttu-id="14ae0-143">Si la réponse indique que le message d’origine a été correctement traité par SAA/SWIFT, l’instance d’orchestration FRR définit la propriété A4SWIFT_Failed promue de la copie du message d’origine à False et définit le BTS. Propriété de l’opération à la valeur appropriée.</span><span class="sxs-lookup"><span data-stu-id="14ae0-143">If the response indicates that the original message was successfully processed by SAA/SWIFT, the FRR orchestration instance sets the A4SWIFT_Failed promoted property of the copy of the original message to False, and sets the BTS.Operation property to the appropriate value.</span></span>  
  
11. <span data-ttu-id="14ae0-144">Si le message d’origine n’a pas été traité avec succès par SAA/SWIFT, l’instance d’orchestration FRR définit le BTS. Propriété de l’opération à la valeur appropriée et puis désigne le message pour la réparation en attribuant A4SWIFT_Failed sur True et la propriété A4SWIFT_FRRFailedReason promu à la raison de l’échec.</span><span class="sxs-lookup"><span data-stu-id="14ae0-144">If the original message was not successfully processed by SAA/SWIFT, the FRR orchestration instance sets the BTS.Operation property to the appropriate value, and then designates the message for repair by setting A4SWIFT_Failed to True and setting the A4SWIFT_FRRFailedReason promoted property to the reason for the failure.</span></span>  
  
12. <span data-ttu-id="14ae0-145">L’instance d’orchestration FRR ignore les messages de réponse, puis achemine la copie du message d’origine (avec les propriétés promues indiquant la réponse) vers la MessageBox.</span><span class="sxs-lookup"><span data-stu-id="14ae0-145">The FRR orchestration instance discards the response message(s), and then routes the copy of the original message (with promoted properties indicating the response) to the MessageBox.</span></span>  
  
13. <span data-ttu-id="14ae0-146">Des ports d’envoi FRR défini pour acheminer les réponses à un ou plusieurs gestionnaires personnalisés récupère la copie du message d’origine avec les propriétés promues.</span><span class="sxs-lookup"><span data-stu-id="14ae0-146">One of the FRR send ports set up to route the responses to one or more custom handlers picks up the copy of the original message with the promoted properties.</span></span>  
  
14. <span data-ttu-id="14ae0-147">L’ou les gestionnaires personnalisés s’abonne à récupère et traite la copie du message d’origine en fonction des besoins de l’application principale.</span><span class="sxs-lookup"><span data-stu-id="14ae0-147">The custom handler or handlers subscribes to, retrieves, and processes the copy of the original message as required for the back-end application.</span></span>