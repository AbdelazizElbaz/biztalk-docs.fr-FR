---
title: "Processus de réparation de message | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- repairing messages
- errors, messages
- messages, errors
- validating, messages
- messages, validating
ms.assetid: 87b97cec-5796-4684-bcf0-53285aca7ee2
caps.latest.revision: "7"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 442e49c347b4adf84dd7e6ee86c3b3595452cb34
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="message-repair-process"></a><span data-ttu-id="127ac-102">Processus de réparation de message</span><span class="sxs-lookup"><span data-stu-id="127ac-102">Message Repair Process</span></span>
<span data-ttu-id="127ac-103">Par défaut, [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] suspend les messages ayant échoué dans la file d’attente suspendue de la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="127ac-103">By default, [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] suspends failed messages in the suspended queue of the MessageBox database.</span></span> <span data-ttu-id="127ac-104">Ce processus gère les messages ayant échoué séparément à partir des messages de réussite.</span><span class="sxs-lookup"><span data-stu-id="127ac-104">This process handles failed messages separately from successful messages.</span></span> <span data-ttu-id="127ac-105">À l’aide de ce mécanisme par défaut, toutefois, vous devez pouvoir récupérer les messages ayant échoué et les réparer.</span><span class="sxs-lookup"><span data-stu-id="127ac-105">Using this default mechanism, however, you have a limited ability to retrieve failed messages and repair them.</span></span> <span data-ttu-id="127ac-106">La fonctionnalité réparer du Message et de la nouvelle soumission de [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] permet une [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] utilisateur pour réparer un message et le renvoyer.</span><span class="sxs-lookup"><span data-stu-id="127ac-106">The Message Repair and New Submission feature of [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] enables an [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user to repair a message and resubmit it.</span></span> <span data-ttu-id="127ac-107">Un autre [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] utilisateur peut vérifier puis les réparations, et une troisième peut approuver les réparations.</span><span class="sxs-lookup"><span data-stu-id="127ac-107">Another [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user can then verify the repairs, and a third can approve the repairs.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="127ac-108">Dans ce contexte, un [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] utilisateur est un utilisateur qui exécute un rôle dans un flux de travail de réparation de service.</span><span class="sxs-lookup"><span data-stu-id="127ac-108">In this context, an [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user is a user that performs a role in a departmental repair workflow.</span></span> <span data-ttu-id="127ac-109">Cet utilisateur A4SWIFT est défini et associé à un certificat, dans le lien utilisateurs du profil Web Client.</span><span class="sxs-lookup"><span data-stu-id="127ac-109">This A4SWIFT user is defined, and associated with a certificate, in the Users link of the Profile Web Client.</span></span> <span data-ttu-id="127ac-110">Cela [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] utilisateur n’est pas identique à un [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] compte d’utilisateur, tel que défini dans le [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] groupe d’utilisateurs dans le [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] utilitaire de gestion de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="127ac-110">This [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user is not the same as a [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] user account, as defined in the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] Users group in the [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] Computer Management utility.</span></span> <span data-ttu-id="127ac-111">La personne qui fonctionne comme un [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] utilisateur doit avoir un [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] compte d’utilisateur afin qu’ils peuvent utiliser des certificats de ce compte lors de l’envoi d’un message.</span><span class="sxs-lookup"><span data-stu-id="127ac-111">The person functioning as an [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user must have a [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] user account so that they can use that account's certificates when submitting a message.</span></span> <span data-ttu-id="127ac-112">Toutefois, cette personne peut également servir autres [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] utilisateurs : réparateur, le vérificateur, Approbateur ou créateur.</span><span class="sxs-lookup"><span data-stu-id="127ac-112">However, that person can also serve as other [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] users: repairer, verifier, approver, or creator.</span></span> <span data-ttu-id="127ac-113">Pour plus d’informations, consultez [des services de création et de rôles pour Message Repair et New Submission](../../adapters-and-accelerators/accelerator-swift/creating-departments-and-roles-for-message-repair-and-new-submission.md).</span><span class="sxs-lookup"><span data-stu-id="127ac-113">For more information, see [Creating Departments and Roles for Message Repair and New Submission](../../adapters-and-accelerators/accelerator-swift/creating-departments-and-roles-for-message-repair-and-new-submission.md).</span></span>  
  
 <span data-ttu-id="127ac-114">Ce flux de travail de réparation [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] ne suspend pas un message ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="127ac-114">With this repair workflow, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] does not suspend a failed message.</span></span> <span data-ttu-id="127ac-115">Il effectue un traitement supplémentaire sur le message ayant échoué et supprime le message dans la MessageBox, comme il le ferait un message de réussite.</span><span class="sxs-lookup"><span data-stu-id="127ac-115">It performs additional processing on the failed message, and then drops the message into the MessageBox, just as it would a successful message.</span></span> <span data-ttu-id="127ac-116">L’orchestration de réparation supprime le message dans le [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] site MRSR, où les utilisateurs peuvent effectuer leurs fonctions dans [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] forms.</span><span class="sxs-lookup"><span data-stu-id="127ac-116">The repair orchestration drops the message into the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] MRSR site, where users can perform their functions in [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] forms.</span></span>  
  
## <a name="message-validation"></a><span data-ttu-id="127ac-117">Validation de message</span><span class="sxs-lookup"><span data-stu-id="127ac-117">Message Validation</span></span>  
 <span data-ttu-id="127ac-118">Message Repair et New Submission envoie un message d’échec de la validation suivante à un site MRSR pour réparation :</span><span class="sxs-lookup"><span data-stu-id="127ac-118">Message Repair and New Submission sends any message failing the following validation to MRSR site for repair:</span></span>  
  
-   <span data-ttu-id="127ac-119">Validation structurelle effectuée par l’Analyseur de fichier plat (messages non analysées)</span><span class="sxs-lookup"><span data-stu-id="127ac-119">Structural validation performed by the flat file parser (unparsed messages)</span></span>  
  
-   <span data-ttu-id="127ac-120">Validation des données effectuée par le lecteur de validation de XML</span><span class="sxs-lookup"><span data-stu-id="127ac-120">Data validation performed by the XML validating reader</span></span>  
  
-   <span data-ttu-id="127ac-121">Réseau rapide et l’utilisation de règle de validation effectués par le moteur de règles d’entreprise (BRE)</span><span class="sxs-lookup"><span data-stu-id="127ac-121">SWIFT network and usage rule validation performed by the Business Rule Engine (BRE)</span></span>  
  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="127ac-122">collecte toutes les erreurs rencontrées lors de la validation dans un objet de collection d’erreurs qui accompagne le message SWIFT.</span><span class="sxs-lookup"><span data-stu-id="127ac-122"> collects any errors encountered during validation in an error collection object that travels with the SWIFT message.</span></span> <span data-ttu-id="127ac-123">Le processus de réparation inclut des informations sur l’erreur sérialisation en XML et en l’attachant à un message sous la forme d’une partie de l’erreur.</span><span class="sxs-lookup"><span data-stu-id="127ac-123">The repair process includes serializing error information into XML and attaching it to the message as an error part.</span></span> <span data-ttu-id="127ac-124">Ce traitement inclut également de marquer le message avec une propriété promue qui indique que le message d’échec de la validation ([!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]_Failed == True), et le nombre d’une autre propriété promue qui signale l’erreur pour chaque étape de validation.</span><span class="sxs-lookup"><span data-stu-id="127ac-124">This processing also includes marking the message with a promoted property that indicates that the message has failed validation ([!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]_Failed==True), and another promoted property that reports the error counts for each validation stage.</span></span> <span data-ttu-id="127ac-125">Le message à parties multiples qui en résulte se compose des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="127ac-125">The resulting multipart message consists of the following:</span></span>  
  
-   <span data-ttu-id="127ac-126">Une partie du corps qui contient le message ayant échoué</span><span class="sxs-lookup"><span data-stu-id="127ac-126">A body part containing the failed message</span></span>  
  
-   <span data-ttu-id="127ac-127">Une partie de l’erreur contenant le XML de la collection d’erreurs</span><span class="sxs-lookup"><span data-stu-id="127ac-127">An error part containing the error-collection XML</span></span>  
  
-   <span data-ttu-id="127ac-128">Qui indique l’état d’échec des propriétés promues</span><span class="sxs-lookup"><span data-stu-id="127ac-128">Promoted properties indicating the failure state</span></span>  
  
## <a name="message-repair"></a><span data-ttu-id="127ac-129">Réparation de messages</span><span class="sxs-lookup"><span data-stu-id="127ac-129">Message Repair</span></span>  
 <span data-ttu-id="127ac-130">La règle d’entreprise au sein de la MRSRDepartmentPolicy MRSRDepartmentRule détermine le service gère le message ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="127ac-130">The MRSRDepartmentRule business rule within the MRSRDepartmentPolicy determines which department will handle the failed message.</span></span> <span data-ttu-id="127ac-131">L’orchestration de réparation message démarre le flux de travail de réparation par le routage du message vers une boîte de réception associé au rôle de réparation du service.</span><span class="sxs-lookup"><span data-stu-id="127ac-131">The message repair orchestration starts the repair workflow by routing the message to an inbox associated with the repair role in the department.</span></span> <span data-ttu-id="127ac-132">Le [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] utilisateur joue le rôle de réparation ouvre le message dans la [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] formulaire, répare le message, puis se connecte et l’envoie.</span><span class="sxs-lookup"><span data-stu-id="127ac-132">The [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user performing the repair role opens the message in the [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] form, repairs the message, and then signs and submits it.</span></span> <span data-ttu-id="127ac-133">L’orchestration achemine le message réparé à chacun des rôles de l’approbation, vérification de changement de clé ou la réparation et une fois que le flux de travail terminé, il achemine le message au port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="127ac-133">The orchestration routes the repaired message to each of the repair, rekey verification, or approval roles, and after the workflow has successfully completed, routes the message to the send port.</span></span>  
  
 <span data-ttu-id="127ac-134">En plus de la validation, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] vérifie les signatures sur le message pour déterminer les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="127ac-134">In addition to validation, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] checks the signatures on the message to determine the following:</span></span>  
  
-   <span data-ttu-id="127ac-135">Les utilisateurs dans le flux de travail de réparation appartiennent au même service</span><span class="sxs-lookup"><span data-stu-id="127ac-135">The users in the repair workflow belong to the same department</span></span>  
  
-   <span data-ttu-id="127ac-136">Chaque utilisateur s’est connecté à une seule fois</span><span class="sxs-lookup"><span data-stu-id="127ac-136">Each user has signed just once</span></span>  
  
-   <span data-ttu-id="127ac-137">La séquence de rôles correspondant aux utilisateurs correspond à la séquence dans le flux de travail défini pour ce service</span><span class="sxs-lookup"><span data-stu-id="127ac-137">The sequence of roles corresponding to the users matches the sequence in the workflow defined for that department</span></span>  
  
 <span data-ttu-id="127ac-138">Pour plus d’informations sur les services, consultez [des services de création et de rôles pour Message Repair et New Submission](../../adapters-and-accelerators/accelerator-swift/creating-departments-and-roles-for-message-repair-and-new-submission.md).</span><span class="sxs-lookup"><span data-stu-id="127ac-138">For more information about departments, see [Creating Departments and Roles for Message Repair and New Submission](../../adapters-and-accelerators/accelerator-swift/creating-departments-and-roles-for-message-repair-and-new-submission.md).</span></span>  
  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="127ac-139">vous permet également de réparer les messages non analysées.</span><span class="sxs-lookup"><span data-stu-id="127ac-139"> also enables you to repair unparsed messages.</span></span> <span data-ttu-id="127ac-140">Toutefois, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] effectue un traitement différent sur un message non analysé réparé.</span><span class="sxs-lookup"><span data-stu-id="127ac-140">However, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] performs different processing on a repaired unparsed message.</span></span> <span data-ttu-id="127ac-141">Pour plus d’informations, consultez [la réparation des Messages non analysée](../../adapters-and-accelerators/accelerator-swift/repairing-unparsed-messages.md).</span><span class="sxs-lookup"><span data-stu-id="127ac-141">For more information, see [Repairing Unparsed Messages](../../adapters-and-accelerators/accelerator-swift/repairing-unparsed-messages.md).</span></span>