---
title: "Recevoir des IDOC SAP à l’aide de BizTalk Server | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- IDOCs, sample (receiving)
- IDOCs, business scenarios for receiving
- IDOCs, receiving from SAP using BizTalk Server
ms.assetid: b904bf07-1108-4ed3-8564-d83eaafff247
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: cb03368a9d046eacf31f8b7bbed5c0a7f090c3d3
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2017
---
# <a name="receive-idocs-from-sap-using-biztalk-server"></a><span data-ttu-id="0edb5-102">Recevoir des IDOC SAP à l’aide de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="0edb5-102">Receive IDOCs from SAP using BizTalk Server</span></span>
<span data-ttu-id="0edb5-103">Réception d’un IDOC implique la [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] d’agir en tant que RFC serveur pour recevoir un appel RFC spécial à partir de SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-103">Receiving an IDOC involves the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] to act as an RFC server to receive a special RFC call from SAP.</span></span> <span data-ttu-id="0edb5-104">L’adaptateur SAP peut recevoir des IDOC agissant comme un serveur de RFC ou tRFC.</span><span class="sxs-lookup"><span data-stu-id="0edb5-104">The SAP adapter can receive IDOCs acting as an RFC server or a tRFC server.</span></span> <span data-ttu-id="0edb5-105">Pour plus d’informations sur la réception d’un IDOC avec l’adaptateur se comporte comme un serveur tRFC, consultez [recevoir des IDOC de SAP dans un contexte transactionnel à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-105">For more information about receiving an IDOC with the adapter behaving as a tRFC server, see [Receive IDOCs from SAP in a Transactional Context by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span></span>  
  
 <span data-ttu-id="0edb5-106">Le [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] met en évidence des deux opérations distinctes pour recevoir des IDOC :</span><span class="sxs-lookup"><span data-stu-id="0edb5-106">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] surfaces two different operations to receive IDOCs:</span></span>  
  
-   <span data-ttu-id="0edb5-107">**Réception** opération permet de recevoir des IDOC ayant un schéma fortement typée de l’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="0edb5-107">**Receive** operation enables adapter to receive IDOCs having a strongly-typed schema.</span></span>  
  
-   <span data-ttu-id="0edb5-108">**ReceiveIdoc** opération permet de recevoir des IDOC ayant un schéma faiblement typée de l’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="0edb5-108">**ReceiveIdoc** operation enables adapter to receive IDOCs having a weakly-typed schema.</span></span> <span data-ttu-id="0edb5-109">Cette opération reçoit IDOC sous forme de chaîne dans un message XML sous la \<idocData\> balise.</span><span class="sxs-lookup"><span data-stu-id="0edb5-109">This operation receives IDOCs as a string in an XML message under the \<idocData\> tag.</span></span>  
  
 <span data-ttu-id="0edb5-110">Sur le côté de la carte, vous pouvez spécifier une valeur pour le **ReceiveIDocFormat** propriété pour spécifier le format de l’adaptateur doivent recevoir des IDOC de liaison.</span><span class="sxs-lookup"><span data-stu-id="0edb5-110">On the adapter side, you can specify a value for the **ReceiveIDocFormat** binding property to specify the format of IDOC the adapter would receive.</span></span>  
  
-   <span data-ttu-id="0edb5-111">**Typé** Spécifie l’adaptateur recevra IDOC avec un schéma fortement typé.</span><span class="sxs-lookup"><span data-stu-id="0edb5-111">**Typed** specifies the adapter will receive IDOCs with strongly-typed schema.</span></span> <span data-ttu-id="0edb5-112">Il en résulte un IDOC XML.</span><span class="sxs-lookup"><span data-stu-id="0edb5-112">This yields an XML IDOC.</span></span>  
  
-   <span data-ttu-id="0edb5-113">**Chaîne** Spécifie l’adaptateur recevra IDOC avec faiblement typée un schéma.</span><span class="sxs-lookup"><span data-stu-id="0edb5-113">**String** specifies the adapter will receive IDOCs with weakly-typed schema.</span></span> <span data-ttu-id="0edb5-114">Il en résulte un message XML avec le \<idocData\> balise.</span><span class="sxs-lookup"><span data-stu-id="0edb5-114">This yields an XML message with the \<idocData\> tag.</span></span>  
  
-   <span data-ttu-id="0edb5-115">**RFC** Spécifie l’adaptateur recevra IDOC dans n’importe quel format.</span><span class="sxs-lookup"><span data-stu-id="0edb5-115">**Rfc** specifies the adapter will receive IDOCs in any format.</span></span>  
  
 <span data-ttu-id="0edb5-116">Pour recevoir des IDOC, le [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] prend également en charge un ensemble de propriétés de contexte de message qui permet aux clients de carte dans les orchestrations.</span><span class="sxs-lookup"><span data-stu-id="0edb5-116">For receiving IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] also supports a set of message context properties that adapter clients can use in the orchestrations.</span></span> <span data-ttu-id="0edb5-117">Pour obtenir la liste des propriétés, consultez [propriétés de contexte de Message pour recevoir des IDOC](../../adapters-and-accelerators/adapter-sap/message-context-properties-for-receiving-idocs.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-117">For the list of properties, see [Message Context Properties for Receiving IDOCs](../../adapters-and-accelerators/adapter-sap/message-context-properties-for-receiving-idocs.md).</span></span>  
  
 <span data-ttu-id="0edb5-118">Pour plus d’informations sur la façon dont [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] prend en charge la réception des IDOC à partir d’un système SAP, consultez [opérations sur IDOC dans SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-118">For more information about how the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports receiving IDOCs from an SAP system, see [Operations on IDOCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span></span> <span data-ttu-id="0edb5-119">Pour plus d’informations sur la structure de SOAP des messages pour la réception d’un IDOC, consultez [des schémas de Message pour des opérations IDOC](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-119">For more information about the structure of SOAP messages for receiving an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
## <a name="biztalk-scenarios-for-receiving-idocs-from-an-sap-system"></a><span data-ttu-id="0edb5-120">Scénarios de BizTalk pour recevoir des IDOC à partir d’un système SAP</span><span class="sxs-lookup"><span data-stu-id="0edb5-120">BizTalk Scenarios for Receiving IDOCs from an SAP System</span></span>  
 <span data-ttu-id="0edb5-121">Le tableau suivant fournit des scénarios clés de BizTalk pour recevoir des IDOC à partir d’un système SAP :</span><span class="sxs-lookup"><span data-stu-id="0edb5-121">The following table provides key BizTalk scenarios for receiving IDOCs from an SAP system:</span></span>  
  
|<span data-ttu-id="0edb5-122">Entrée de carte à partir de SAP</span><span class="sxs-lookup"><span data-stu-id="0edb5-122">Input to Adapter from SAP</span></span>|<span data-ttu-id="0edb5-123">Traitement BizTalk</span><span class="sxs-lookup"><span data-stu-id="0edb5-123">BizTalk Processing</span></span>|<span data-ttu-id="0edb5-124">Sortie</span><span class="sxs-lookup"><span data-stu-id="0edb5-124">Output</span></span>|  
|-------------------------------|------------------------|------------|  
|<span data-ttu-id="0edb5-125">IDOC (via l’interface de tRFC)</span><span class="sxs-lookup"><span data-stu-id="0edb5-125">IDOC (via tRFC interface)</span></span>|<span data-ttu-id="0edb5-126">**Heure de création de métadonnées**</span><span class="sxs-lookup"><span data-stu-id="0edb5-126">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="0edb5-127">1.  Définissez la propriété binding GenerateFlatFileCompatibleIdocSchema à **True**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-127">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="0edb5-128">2.  Générer le schéma pour le **réception** opération un IDOC spécifique à l’aide [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0edb5-128">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="0edb5-129">3.  Définissez la propriété binding ReceiveIdocFormat à **typé**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-129">3.  Set the binding property ReceiveIdocFormat to **Typed**.</span></span><br /><br /> <span data-ttu-id="0edb5-130">**Moment de la conception d’orchestration**</span><span class="sxs-lookup"><span data-stu-id="0edb5-130">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="0edb5-131">1.  Recevoir des IDOC de XML.</span><span class="sxs-lookup"><span data-stu-id="0edb5-131">1.  Receive XML IDOC.</span></span><br /><span data-ttu-id="0edb5-132">2.  Utilisez l’assembleur de fichier plat pour convertir XML IDOC de fichier plat.</span><span class="sxs-lookup"><span data-stu-id="0edb5-132">2.  Use flat-file assembler to convert XML IDOC to flat-file.</span></span>|<span data-ttu-id="0edb5-133">Format de fichier plat IDOC</span><span class="sxs-lookup"><span data-stu-id="0edb5-133">Flat-file IDOC</span></span>|  
|<span data-ttu-id="0edb5-134">IDOC (via l’interface de tRFC)</span><span class="sxs-lookup"><span data-stu-id="0edb5-134">IDOC (via tRFC interface)</span></span>|<span data-ttu-id="0edb5-135">**Heure de création de métadonnées**</span><span class="sxs-lookup"><span data-stu-id="0edb5-135">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="0edb5-136">1.  Définissez la propriété binding GenerateFlatFileCompatibleIdocSchema à **True**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-136">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="0edb5-137">2.  Générer le schéma pour le **réception** opération un IDOC spécifique à l’aide [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0edb5-137">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="0edb5-138">3.  Définissez la propriété binding ReceiveIdocFormat à **typé**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-138">3.  Set the binding property ReceiveIdocFormat to **Typed**.</span></span><br /><br /> <span data-ttu-id="0edb5-139">**Orchestration au moment du Design**</span><span class="sxs-lookup"><span data-stu-id="0edb5-139">**Orchestration Design-Time**</span></span><br /><br /> <span data-ttu-id="0edb5-140">-Réception IDOC de XML.</span><span class="sxs-lookup"><span data-stu-id="0edb5-140">- Receive XML IDOC.</span></span>|<span data-ttu-id="0edb5-141">XML IDOC</span><span class="sxs-lookup"><span data-stu-id="0edb5-141">XML IDOC</span></span>|  
|<span data-ttu-id="0edb5-142">IDOC (via l’interface de tRFC)</span><span class="sxs-lookup"><span data-stu-id="0edb5-142">IDOC (via tRFC interface)</span></span>|<span data-ttu-id="0edb5-143">**Heure de création de métadonnées**</span><span class="sxs-lookup"><span data-stu-id="0edb5-143">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="0edb5-144">1.  Définissez la propriété binding GenerateFlatFileCompatibleIdocSchema à **True**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-144">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="0edb5-145">2.  Générer le schéma pour le **réception** opération un IDOC spécifique à l’aide [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0edb5-145">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="0edb5-146">3.  Définissez la propriété binding ReceiveIdocFormat à **chaîne**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-146">3.  Set the binding property ReceiveIdocFormat to **String**.</span></span><br /><br /> <span data-ttu-id="0edb5-147">**Moment de la conception d’orchestration**</span><span class="sxs-lookup"><span data-stu-id="0edb5-147">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="0edb5-148">1.  Réception de message XML avec IDOC de fichier plat dans \<idocData\> balise.</span><span class="sxs-lookup"><span data-stu-id="0edb5-148">1.  Receive XML message with flat-file IDOC in \<idocData\> tag.</span></span><br /><span data-ttu-id="0edb5-149">2.  Utilisez la prise en charge de l’adaptateur WCF XPath dans la configuration de port de réception pour extraire l’IDoc de fichier plat à partir du message XML.</span><span class="sxs-lookup"><span data-stu-id="0edb5-149">2.  Use the WCF adapter’s XPath support in the receive port configuration to extract the flat-file IDoc from the XML message.</span></span> <span data-ttu-id="0edb5-150">Exemple :</span><span class="sxs-lookup"><span data-stu-id="0edb5-150">For example:</span></span><br />     `/*[local-name()='ReceiveIdoc']/*[local-name()='idocData']`<br /><span data-ttu-id="0edb5-151">3.  Utilisez le désassembleur de fichier plat pour convertir des IDOC de fichier plat en XML IDOC.</span><span class="sxs-lookup"><span data-stu-id="0edb5-151">3.  Use flat-file disassembler to convert flat-file IDOC to XML IDOC.</span></span><br /><br /> <span data-ttu-id="0edb5-152">**Important** cette approche peut être utilisée pour recevoir des IDOC à l’aide de la nouvelle basé sur WCF [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] et de les appliquer directement dans un projet BizTalk existant écrit pour recevoir des IDOC à partir de l’adaptateur BizTalk SAP existante.</span><span class="sxs-lookup"><span data-stu-id="0edb5-152">**Important** This approach can be used to receive IDOCs using the new WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] and directly apply them in an existing BizTalk project written to receive IDOCs from the existing BizTalk SAP adapter.</span></span> <span data-ttu-id="0edb5-153">Il s’agit également l’approche recommandée pour recevoir des IDOC avec le numéro de version inférieur au nombre de version (SYSREL).</span><span class="sxs-lookup"><span data-stu-id="0edb5-153">This is also the recommended approach to receive IDOCs with version number less than the release number (SYSREL).</span></span>|<span data-ttu-id="0edb5-154">XML IDOC</span><span class="sxs-lookup"><span data-stu-id="0edb5-154">XML IDOC</span></span>|  
|<span data-ttu-id="0edb5-155">IDOC (via l’interface de tRFC)</span><span class="sxs-lookup"><span data-stu-id="0edb5-155">IDOC (via tRFC interface)</span></span>|<span data-ttu-id="0edb5-156">**Heure de création de métadonnées**</span><span class="sxs-lookup"><span data-stu-id="0edb5-156">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="0edb5-157">1.  Générer le schéma pour le **ReceiveIdoc** opération à partir du nœud IDOC avec [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0edb5-157">1.  Generate the schema for the **ReceiveIdoc** operation from the IDOC node using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="0edb5-158">2.  Définissez la propriété binding ReceiveIdocFormat à **chaîne**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-158">2.  Set the binding property ReceiveIdocFormat to **String**.</span></span><br /><br /> <span data-ttu-id="0edb5-159">**Moment de la conception d’orchestration**</span><span class="sxs-lookup"><span data-stu-id="0edb5-159">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="0edb5-160">-Recevoir le message XML avec l’IDOC représenté sous forme de chaîne dans le \<idocData\> balise.</span><span class="sxs-lookup"><span data-stu-id="0edb5-160">- Receive XML message with the IDOC represented as a string in the \<idocData\> tag.</span></span>|<span data-ttu-id="0edb5-161">IDOC de fichier plat dans le message XML</span><span class="sxs-lookup"><span data-stu-id="0edb5-161">Flat-file IDOC in XML message</span></span>|  
  
## <a name="how-to-receive-an-idoc-from-an-sap-system"></a><span data-ttu-id="0edb5-162">La réception d’un IDOC à partir d’un système SAP ?</span><span class="sxs-lookup"><span data-stu-id="0edb5-162">How to Receive an IDOC from an SAP System?</span></span>  
 <span data-ttu-id="0edb5-163">Une opération sur un système SAP à l’aide [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] implique les tâches de procédures décrites dans [blocs de construction pour créer des applications SAP](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-163">Performing an operation on an SAP system using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] involves procedural tasks described in [Building blocks to create SAP applications](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md).</span></span> <span data-ttu-id="0edb5-164">Pour recevoir un IDOC à partir d’un système SAP, ces tâches sont :</span><span class="sxs-lookup"><span data-stu-id="0edb5-164">To receive an IDOC from an SAP system, these tasks are:</span></span>  
  
1.  <span data-ttu-id="0edb5-165">Créez un projet BizTalk et générer un schéma pour l’IDOC que vous souhaitez appeler dans le système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-165">Create a BizTalk project and generate schema for the IDOC you want to invoke in the SAP system.</span></span> <span data-ttu-id="0edb5-166">Lors de la génération du schéma Assurez-vous que vous définissez les propriétés de liaison requis, comme indiqué dans le tableau précédent.</span><span class="sxs-lookup"><span data-stu-id="0edb5-166">While generating the schema make sure you set the required binding properties, as listed in the previous table.</span></span> <span data-ttu-id="0edb5-167">Pour obtenir des instructions sur la façon de définir les propriétés de liaison, consultez [configurer les propriétés de liaison de l’adaptateur SAP](../../adapters-and-accelerators/adapter-sap/configure-the-binding-properties-for-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-167">For instructions on how to set the binding properties, see [Configure the binding properties for the SAP adapter](../../adapters-and-accelerators/adapter-sap/configure-the-binding-properties-for-the-sap-adapter.md).</span></span>  
  
2.  <span data-ttu-id="0edb5-168">Créer des messages dans le projet BizTalk pour envoyer et recevoir des messages à partir du système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-168">Create messages in the BizTalk project for sending and receiving messages from the SAP system.</span></span>  
  
3.  <span data-ttu-id="0edb5-169">Créer une orchestration pour recevoir un IDOC à partir d’un système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-169">Create an orchestration to receive an IDOC from an SAP system.</span></span>  
  
4.  <span data-ttu-id="0edb5-170">Générez et déployez le projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0edb5-170">Build and deploy the BizTalk project.</span></span>  
  
5.  <span data-ttu-id="0edb5-171">Configurer l’application en créant physique d’envoi et ports de réception BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0edb5-171">Configure the BizTalk application by creating physical send and receive ports.</span></span>  
  
6.  <span data-ttu-id="0edb5-172">Démarrez l’application BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0edb5-172">Start the BizTalk application.</span></span>  
  
 <span data-ttu-id="0edb5-173">Cette rubrique fournit des instructions pour effectuer ces tâches.</span><span class="sxs-lookup"><span data-stu-id="0edb5-173">This topic provides instructions to perform these tasks.</span></span>  
  
## <a name="samples-based-on-this-topic"></a><span data-ttu-id="0edb5-174">Exemples en fonction de cette rubrique</span><span class="sxs-lookup"><span data-stu-id="0edb5-174">Samples Based On This Topic</span></span>  
 <span data-ttu-id="0edb5-175">Exemples, ReceiveIDOC et ReceiveIDOC_SYSREL, en fonction de cette rubrique sont également fournies avec le [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0edb5-175">Samples, ReceiveIDOC and ReceiveIDOC_SYSREL, based on this topic are also provided with the [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span></span> <span data-ttu-id="0edb5-176">Pour plus d’informations, consultez [exemples pour l’adaptateur SAP](../../adapters-and-accelerators/adapter-sap/samples-for-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-176">For more information, see [Samples for the SAP adapter](../../adapters-and-accelerators/adapter-sap/samples-for-the-sap-adapter.md).</span></span>  
  
## <a name="generating-schema"></a><span data-ttu-id="0edb5-177">Génération du schéma</span><span class="sxs-lookup"><span data-stu-id="0edb5-177">Generating Schema</span></span>  
 <span data-ttu-id="0edb5-178">Vous devez générer le schéma pour le *réception* opération de le *ORDERS03. V3.620* IDOC sous le */IDOC/ORDERS/ORDERS03* nœud.</span><span class="sxs-lookup"><span data-stu-id="0edb5-178">You must generate schema for the *Receive* operation of the *ORDERS03.V3.620* IDOC under the */IDOC/ORDERS/ORDERS03* node.</span></span> <span data-ttu-id="0edb5-179">Consultez [Parcourir, rechercher et obtenir de métadonnées pour des opérations IDOC dans SAP](../../adapters-and-accelerators/adapter-sap/browse-search-and-get-metadata-for-idoc-operations-in-sap.md) pour obtenir des instructions sur la génération de schéma pour un IDOC particulier.</span><span class="sxs-lookup"><span data-stu-id="0edb5-179">See [Browse, search and get Metadata for IDOC Operations in SAP](../../adapters-and-accelerators/adapter-sap/browse-search-and-get-metadata-for-idoc-operations-in-sap.md) for instructions on how to generate schema for a particular IDOC.</span></span> <span data-ttu-id="0edb5-180">Lors de la génération du schéma, vous pouvez souhaiter définir les propriétés suivantes :</span><span class="sxs-lookup"><span data-stu-id="0edb5-180">While generating the schema, you might want to set the following properties as well:</span></span>  
  
-   <span data-ttu-id="0edb5-181">*GenerateFlatFileCompatibleIDoc* – génère \<appinfo\> balises afin que l’Analyseur de fichier plat BizTalk peut être utilisée dans les scénarios de BizTalk pour prendre en charge le format de fichier plat IDOC.</span><span class="sxs-lookup"><span data-stu-id="0edb5-181">*GenerateFlatFileCompatibleIDoc* –Generates \<appinfo\> tags so that the BizTalk flat-file parser can be used in BizTalk scenarios to support flat-file IDOCs.</span></span>  
  
-   <span data-ttu-id="0edb5-182">*FlatFileSegmentIndicator* – indique si le schéma IDOC \<appinfo\> balises doivent contenir les noms de définition des segments ou des noms de type de segment.</span><span class="sxs-lookup"><span data-stu-id="0edb5-182">*FlatFileSegmentIndicator* – Indicates if the IDOC schema \<appinfo\> tags should contain segment definition names or segment type names.</span></span> <span data-ttu-id="0edb5-183">Cela s’applique lorsqu’un veut utilisé pour envoyer/recevoir un fichier plat IDOC de SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-183">This is applicable when a used wishes to send/receive a flat-file IDOC to/from SAP.</span></span> <span data-ttu-id="0edb5-184">Si le *GenerateFlatFileCompatibleIDoc* est définie sur false, puis *FlatFileSegmentIndicator* liaison de la propriété est ignorée.</span><span class="sxs-lookup"><span data-stu-id="0edb5-184">If the *GenerateFlatFileCompatibleIDoc* is set to false, then *FlatFileSegmentIndicator* binding property is ignored.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="0edb5-185">Étant donné que vous générez le schéma d’un appel d’IDOC entrant, veillez à sélectionner **Service (opération entrante)** à partir de la **sélectionner type de contrat** liste déroulante dans le [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0edb5-185">Because you are generating the schema for an inbound IDOC call, make sure you select **Service (Inbound operation)** from the **Select contract type** drop-down list in the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)].</span></span>  
  
## <a name="defining-messages-and-message-types"></a><span data-ttu-id="0edb5-186">Définition des Messages et les Types de messages</span><span class="sxs-lookup"><span data-stu-id="0edb5-186">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="0edb5-187">Le schéma que vous avez généré précédemment décrit les « types » requis pour les messages dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="0edb5-187">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="0edb5-188">Un message est généralement une variable, le type est défini par le schéma correspondant.</span><span class="sxs-lookup"><span data-stu-id="0edb5-188">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="0edb5-189">Vous devez lier le schéma généré à la première étape pour les messages à partir de la vue de l’Orchestration du projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0edb5-189">You must link the schema you generated in the first step to the messages from the Orchestration view of the BizTalk project.</span></span>  
  
 <span data-ttu-id="0edb5-190">Cette rubrique, vous devez créer deux messages : un pour recevoir un IDOC à partir du système SAP et l’autre pour envoyer une réponse.</span><span class="sxs-lookup"><span data-stu-id="0edb5-190">For this topic, you must create two messages—one to receive an IDOC from the SAP system and the other to send a response.</span></span>  
  
 <span data-ttu-id="0edb5-191">Procédez comme suit pour créer des messages et les lier au schéma :</span><span class="sxs-lookup"><span data-stu-id="0edb5-191">Perform the following steps to create messages and link them to the schema:</span></span>  
  
#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="0edb5-192">Pour créer des messages et le lier au schéma</span><span class="sxs-lookup"><span data-stu-id="0edb5-192">To create messages and link to schema</span></span>  
  
1.  <span data-ttu-id="0edb5-193">Ajoutez une nouvelle orchestration au projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0edb5-193">Add a new orchestration to the BizTalk project.</span></span>  
  
2.  <span data-ttu-id="0edb5-194">Ouvrez la vue orchestration au projet BizTalk, si ce n’est pas déjà ouvert.</span><span class="sxs-lookup"><span data-stu-id="0edb5-194">Open the orchestration view the BizTalk project, if not already open.</span></span> <span data-ttu-id="0edb5-195">Cliquez sur **vue**, pointez sur **autres fenêtres**, puis cliquez sur **Vue Orchestration**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-195">Click **View**, point to **Other Windows**, and click **Orchestration View**.</span></span>  
  
3.  <span data-ttu-id="0edb5-196">Dans le **Vue Orchestration**, avec le bouton droit **Messages**, puis cliquez sur **nouveau Message**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-196">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  
  
4.  <span data-ttu-id="0edb5-197">Avec le bouton droit le nouvellement créer le message et sélectionnez **fenêtre Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-197">Right-click the newly create message and select **Properties Window**.</span></span>  
  
5.  <span data-ttu-id="0edb5-198">Dans le **propriétés** volet pour **Message_1**, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="0edb5-198">In the **Properties** pane for **Message_1**, do the following:</span></span>  
  
    |<span data-ttu-id="0edb5-199">Utiliser</span><span class="sxs-lookup"><span data-stu-id="0edb5-199">Use this</span></span>|<span data-ttu-id="0edb5-200">Pour effectuer cette opération</span><span class="sxs-lookup"><span data-stu-id="0edb5-200">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="0edb5-201">Identificateur</span><span class="sxs-lookup"><span data-stu-id="0edb5-201">Identifier</span></span>|<span data-ttu-id="0edb5-202">Type **demande**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-202">Type **Request**.</span></span>|  
    |<span data-ttu-id="0edb5-203">Type de message</span><span class="sxs-lookup"><span data-stu-id="0edb5-203">Message Type</span></span>|<span data-ttu-id="0edb5-204">Dans la liste déroulante, développez **schémas**, puis sélectionnez *ReceiveIDOC.SAPBindingSchema2*, où *ReceiveIDOC* est le nom de votre projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0edb5-204">From the drop-down list, expand **Schemas**, and select *ReceiveIDOC.SAPBindingSchema2*, where *ReceiveIDOC* is the name of your BizTalk project.</span></span> <span data-ttu-id="0edb5-205">*SAPBindingSchema2* est le schéma généré pour l’opération de réception.</span><span class="sxs-lookup"><span data-stu-id="0edb5-205">*SAPBindingSchema2* is the schema generated for the Receive operation.</span></span>|  
  
6.  <span data-ttu-id="0edb5-206">Répétez l’étape 2 pour créer un nouveau message.</span><span class="sxs-lookup"><span data-stu-id="0edb5-206">Repeat step 2 to create a new message.</span></span> <span data-ttu-id="0edb5-207">Dans le **propriétés** volet pour le nouveau message, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="0edb5-207">In the **Properties** pane for the new message, do the following:</span></span>  
  
    |<span data-ttu-id="0edb5-208">Utiliser</span><span class="sxs-lookup"><span data-stu-id="0edb5-208">Use this</span></span>|<span data-ttu-id="0edb5-209">Pour effectuer cette opération</span><span class="sxs-lookup"><span data-stu-id="0edb5-209">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="0edb5-210">Identificateur</span><span class="sxs-lookup"><span data-stu-id="0edb5-210">Identifier</span></span>|<span data-ttu-id="0edb5-211">Type **réponse**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-211">Type **Response**.</span></span>|  
    |<span data-ttu-id="0edb5-212">Type de message</span><span class="sxs-lookup"><span data-stu-id="0edb5-212">Message Type</span></span>|<span data-ttu-id="0edb5-213">Dans la liste déroulante, développez **schémas**, puis sélectionnez *ReceiveIDOC.SAPBindingSchema3*.</span><span class="sxs-lookup"><span data-stu-id="0edb5-213">From the drop-down list, expand **Schemas**, and select *ReceiveIDOC.SAPBindingSchema3*.</span></span>|  
  
## <a name="setting-up-the-orchestration"></a><span data-ttu-id="0edb5-214">Configuration de l’Orchestration</span><span class="sxs-lookup"><span data-stu-id="0edb5-214">Setting up the Orchestration</span></span>  
 <span data-ttu-id="0edb5-215">Vous devez créer une orchestration BizTalk à utiliser [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] pour recevoir des IDOC à partir du système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-215">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for receiving IDOCs from the SAP system.</span></span> <span data-ttu-id="0edb5-216">Dans un scénario classique, le [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] reçoit un appel IDOC à partir du système SAP, traite la demande et transmet la réponse au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-216">In a typical scenario, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] receives an IDOC call from the SAP system, processes the request, and passes the response to the SAP system.</span></span> <span data-ttu-id="0edb5-217">Pour cela dans le cadre d’une orchestration, l’orchestration doit contenir :</span><span class="sxs-lookup"><span data-stu-id="0edb5-217">To achieve this as part of an orchestration, the orchestration must contain:</span></span>  
  
-   <span data-ttu-id="0edb5-218">Un double port de réception pour recevoir des IDOC à partir du système SAP et envoyer la réponse.</span><span class="sxs-lookup"><span data-stu-id="0edb5-218">A two-way receive port to receive IDOCs from the SAP system and send the response.</span></span>  
  
-   <span data-ttu-id="0edb5-219">Envoyer et recevoir des formes.</span><span class="sxs-lookup"><span data-stu-id="0edb5-219">Send and Receive shapes.</span></span>  
  
-   <span data-ttu-id="0edb5-220">Forme construire un Message, dans laquelle une forme assignation du Message, pour générer une réponse à envoyer au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-220">Construct Message shape, and within that a Message Assignment shape, to generate a response to be sent to the SAP system.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="0edb5-221">Si l’orchestration inclut un double port de réception (requête-réponse) pour recevoir des IDOC à partir du système SAP, l’orchestration doit envoyer une réponse au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-221">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="0edb5-222">Si ce n’est pas le cas, le système SAP n’envoie pas l’IDOC suivant.</span><span class="sxs-lookup"><span data-stu-id="0edb5-222">If not, the SAP system does not send the next IDOC.</span></span> <span data-ttu-id="0edb5-223">Toutefois, si le port de réception unidirectionnel, l’orchestration n’a pas envoyer une réponse au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-223">However, if a one-way receive port, the orchestration does not have to send a response to the SAP system.</span></span>  
  
-   <span data-ttu-id="0edb5-224">Un port d’envoi unidirectionnel pour envoyer l’IDOC reçus à partir du système SAP dans un dossier.</span><span class="sxs-lookup"><span data-stu-id="0edb5-224">A one-way send port to send the IDOCs received from the SAP system to a folder.</span></span>  
  
 <span data-ttu-id="0edb5-225">Un exemple d’orchestration pour recevoir un IDOC à partir d’un système SAP ressemble à :</span><span class="sxs-lookup"><span data-stu-id="0edb5-225">A sample orchestration for receiving an IDOC from an SAP system looks like:</span></span>  
  
 <span data-ttu-id="0edb5-226">![Orchestration permettant de recevoir des IDOC](../../adapters-and-accelerators/adapter-sap/media/20d4f251-2474-4fd5-becd-2915f9efa81b.gif "20d4f251-2474-4fd5-becd-2915f9efa81b")</span><span class="sxs-lookup"><span data-stu-id="0edb5-226">![Orchestration to receive IDOCs](../../adapters-and-accelerators/adapter-sap/media/20d4f251-2474-4fd5-becd-2915f9efa81b.gif "20d4f251-2474-4fd5-becd-2915f9efa81b")</span></span>  
  
### <a name="adding-message-shapes"></a><span data-ttu-id="0edb5-227">Ajouter des formes de Message</span><span class="sxs-lookup"><span data-stu-id="0edb5-227">Adding Message Shapes</span></span>  
 <span data-ttu-id="0edb5-228">Assurez-vous que vous spécifiez les propriétés suivantes pour chacune des formes de message.</span><span class="sxs-lookup"><span data-stu-id="0edb5-228">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="0edb5-229">Les noms répertoriés dans le *forme* colonne sont les noms des formes de message, tel qu’affiché dans l’orchestration ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="0edb5-229">The names listed in the *Shape* column are the names of the message shapes as displayed in the orchestration above.</span></span>  
  
|<span data-ttu-id="0edb5-230">Graphique à base de formes</span><span class="sxs-lookup"><span data-stu-id="0edb5-230">Shape</span></span>|<span data-ttu-id="0edb5-231">Type de forme</span><span class="sxs-lookup"><span data-stu-id="0edb5-231">Shape Type</span></span>|<span data-ttu-id="0edb5-232">Propriétés</span><span class="sxs-lookup"><span data-stu-id="0edb5-232">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="0edb5-233">ListenToSAP</span><span class="sxs-lookup"><span data-stu-id="0edb5-233">ListenToSAP</span></span>|<span data-ttu-id="0edb5-234">Recevoir</span><span class="sxs-lookup"><span data-stu-id="0edb5-234">Receive</span></span>|<span data-ttu-id="0edb5-235">-Définissez **nom** à *ListenToSAP*</span><span class="sxs-lookup"><span data-stu-id="0edb5-235">- Set **Name** to *ListenToSAP*</span></span><br /><br /> <span data-ttu-id="0edb5-236">-Définissez **activer** à *True*</span><span class="sxs-lookup"><span data-stu-id="0edb5-236">- Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="0edb5-237">SaveIDOC</span><span class="sxs-lookup"><span data-stu-id="0edb5-237">SaveIDOC</span></span>|<span data-ttu-id="0edb5-238">Send</span><span class="sxs-lookup"><span data-stu-id="0edb5-238">Send</span></span>|<span data-ttu-id="0edb5-239">-Définissez **nom** à *SaveIDOC*</span><span class="sxs-lookup"><span data-stu-id="0edb5-239">- Set **Name** to *SaveIDOC*</span></span>|  
|<span data-ttu-id="0edb5-240">SendResponse</span><span class="sxs-lookup"><span data-stu-id="0edb5-240">SendResponse</span></span>|<span data-ttu-id="0edb5-241">Send</span><span class="sxs-lookup"><span data-stu-id="0edb5-241">Send</span></span>|<span data-ttu-id="0edb5-242">-Définissez **nom** à *SendResponse*</span><span class="sxs-lookup"><span data-stu-id="0edb5-242">- Set **Name** to *SendResponse*</span></span>|  
  
### <a name="adding-construct-message-shape"></a><span data-ttu-id="0edb5-243">Ajout de forme construire un Message</span><span class="sxs-lookup"><span data-stu-id="0edb5-243">Adding Construct Message Shape</span></span>  
 <span data-ttu-id="0edb5-244">Dans l’orchestration, vous devez générer une réponse et envoyez-le au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-244">Within the orchestration, you must generate a response and send it to the SAP system.</span></span> <span data-ttu-id="0edb5-245">Pour ce faire, vous devez ajouter une forme construire un Message et dans ce la forme assignation du Message à votre orchestration.</span><span class="sxs-lookup"><span data-stu-id="0edb5-245">To do so, you must add a Construct Message shape and within that a Message Assignment shape to your orchestration.</span></span> <span data-ttu-id="0edb5-246">La forme assignation du Message appelle le code qui génère un message de réponse est envoyé au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-246">The Message Assignment shape invokes code that generates a response message that is sent to the SAP system.</span></span> <span data-ttu-id="0edb5-247">La forme assignation du Message définit également l’action pour la réponse à envoyer au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-247">The Message Assignment shape also sets the action for the response to be sent to the SAP system.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="0edb5-248">Si l’orchestration inclut un double port de réception (requête-réponse) pour recevoir des IDOC à partir du système SAP, l’orchestration doit envoyer une réponse au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-248">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="0edb5-249">Si ce n’est pas le cas, le système SAP n’envoie pas l’IDOC suivant.</span><span class="sxs-lookup"><span data-stu-id="0edb5-249">If not, the SAP system does not send the next IDOC.</span></span> <span data-ttu-id="0edb5-250">Toutefois, si le port de réception unidirectionnel, l’orchestration n’a pas envoyer une réponse au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-250">However, if a one-way receive port, the orchestration does not have to send a response to the SAP system.</span></span>  
  
 <span data-ttu-id="0edb5-251">Pour la forme construire un message, définissez la **Message construit** propriété **réponse**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-251">For the construct message shape, set the **Message Constructed** property to **Response**.</span></span>  
  
 <span data-ttu-id="0edb5-252">Le code pour générer la réponse peut faire partie de la même solution Visual Studio en tant que votre projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0edb5-252">The code to generate the response could be part of the same Visual Studio solution as your BizTalk project.</span></span> <span data-ttu-id="0edb5-253">Un exemple de code pour générer un message de réponse ressemble à ceci.</span><span class="sxs-lookup"><span data-stu-id="0edb5-253">A sample code for generating a response message looks like this.</span></span>  
  
```  
namespace IdocReceiveResponseMessageCreator  
{  
    public class IdocReceiveResponseMessageCreator  
    {  
        private static XmlDocument Message;  
        private static string XmlFileLocation;  
        private static string ResponseDoc;  
  
        public static XmlDocument XMLMessageCreator()  
        {  
            XmlFileLocation = "C:\\test\\in";  
            try  
            {  
                ResponseDoc = (Directory.GetFiles(XmlFileLocation, "*.xml", SearchOption.TopDirectoryOnly))[0];  
            }  
            catch (Exception ex)  
            {  
                Console.WriteLine("Trying to get XML from: " + XmlFileLocation);  
                Console.WriteLine("EXCEPTION: " + ex.ToString());  
                throw ex;  
            }  
            //Create Message From XML  
            Message = new XmlDocument();  
            Message.PreserveWhitespace = true;  
            Message.Load(ResponseDoc);  
            return Message;  
        }   
    }  
}  
```  
  
> [!NOTE]
>  <span data-ttu-id="0edb5-254">Une fois que vous générez le projet, IdocReceiveResponseMessageCreator.dll sera créé dans le répertoire du projet.</span><span class="sxs-lookup"><span data-stu-id="0edb5-254">After you build the project, IdocReceiveResponseMessageCreator.dll will be created in the project directory.</span></span> <span data-ttu-id="0edb5-255">Vous devez ajouter cette DLL dans le global assembly cache (GAC).</span><span class="sxs-lookup"><span data-stu-id="0edb5-255">You must add this DLL to the global assembly cache (GAC).</span></span>  
  
 <span data-ttu-id="0edb5-256">Ajoutez l’expression suivante pour appeler ce code à partir de la forme assignation du Message et définir l’action de la réponse envoyée au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-256">Add the following expression to invoke this code from the Message Assignment shape and to set the action for the response sent to the SAP system.</span></span> <span data-ttu-id="0edb5-257">Pour ajouter une expression, double-cliquez sur la forme assignation du Message pour ouvrir l’éditeur d’Expression.</span><span class="sxs-lookup"><span data-stu-id="0edb5-257">To add an expression, double-click the Message Assignment shape to open the Expression Editor.</span></span>  
  
```  
Response = IdocReceiveResponseMessageCreator.IdocReceiveResponseMessageCreator.XMLMessageCreator();  
Response(WCF.Action)= "http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response";  
```  
  
> [!IMPORTANT]
>  <span data-ttu-id="0edb5-258">Vous devez définir explicitement l’action du message de réponse.</span><span class="sxs-lookup"><span data-stu-id="0edb5-258">You must explicitly set the action on the response message.</span></span> <span data-ttu-id="0edb5-259">Si vous ne définissez pas l’action, l’adaptateur WCF-Custom arrive sur le message d’action en ajoutant « Réponse » à l’action de demande.</span><span class="sxs-lookup"><span data-stu-id="0edb5-259">If you do not set the action, WCF-Custom adapter arrives at the action message by appending “Response” to the request action.</span></span> <span data-ttu-id="0edb5-260">Par conséquent, l’action pour le message de réponse devient `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/ReceiveResponse`.</span><span class="sxs-lookup"><span data-stu-id="0edb5-260">So, the action for the response message becomes `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/ReceiveResponse`.</span></span> <span data-ttu-id="0edb5-261">Toutefois, le sapBinding attend l’action de réponse en ajoutant « / réponse » à l’action de la demande, par exemple `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response`.</span><span class="sxs-lookup"><span data-stu-id="0edb5-261">However, the sapBinding expects the response action by appending “/response” to the request action, for example `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response`.</span></span>  
  
### <a name="adding-ports"></a><span data-ttu-id="0edb5-262">Ajout de Ports</span><span class="sxs-lookup"><span data-stu-id="0edb5-262">Adding Ports</span></span>  
 <span data-ttu-id="0edb5-263">Assurez-vous que vous spécifiez les propriétés suivantes pour le port logique.</span><span class="sxs-lookup"><span data-stu-id="0edb5-263">Make sure you specify the following properties for the logical port.</span></span> <span data-ttu-id="0edb5-264">Le nom indiqué dans le *Port* colonne est le nom du port, tel qu’affiché dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="0edb5-264">The name listed in the *Port* column is the name of the port as displayed in the orchestration.</span></span>  
  
|<span data-ttu-id="0edb5-265">Port</span><span class="sxs-lookup"><span data-stu-id="0edb5-265">Port</span></span>|<span data-ttu-id="0edb5-266">Propriétés</span><span class="sxs-lookup"><span data-stu-id="0edb5-266">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="0edb5-267">ReceiveIDOCPort</span><span class="sxs-lookup"><span data-stu-id="0edb5-267">ReceiveIDOCPort</span></span>|<span data-ttu-id="0edb5-268">-Définissez **identificateur** à *ReceiveIDOCPort*</span><span class="sxs-lookup"><span data-stu-id="0edb5-268">- Set **Identifier** to *ReceiveIDOCPort*</span></span><br /><br /> <span data-ttu-id="0edb5-269">-Définissez **Type** à *ReceiveIDOCPortType*</span><span class="sxs-lookup"><span data-stu-id="0edb5-269">- Set **Type** to *ReceiveIDOCPortType*</span></span><br /><br /> <span data-ttu-id="0edb5-270">-Définissez **modèle de Communication** à *demande-réponse*</span><span class="sxs-lookup"><span data-stu-id="0edb5-270">- Set **Communication Pattern** to *Request-Response*</span></span><br /><br /> <span data-ttu-id="0edb5-271">-Définissez **Direction de Communication** à *de réception-envoi*</span><span class="sxs-lookup"><span data-stu-id="0edb5-271">- Set **Communication Direction** to *Receive-Send*</span></span>|  
|<span data-ttu-id="0edb5-272">GetIDOCPort</span><span class="sxs-lookup"><span data-stu-id="0edb5-272">GetIDOCPort</span></span>|<span data-ttu-id="0edb5-273">-Définissez **identificateur** à *GetIDOCPort*</span><span class="sxs-lookup"><span data-stu-id="0edb5-273">- Set **Identifier** to *GetIDOCPort*</span></span><br /><br /> <span data-ttu-id="0edb5-274">-Définissez **Type** à *GetIDOCPortType*</span><span class="sxs-lookup"><span data-stu-id="0edb5-274">- Set **Type** to *GetIDOCPortType*</span></span><br /><br /> <span data-ttu-id="0edb5-275">-Définissez **modèle de Communication** à *à sens unique*</span><span class="sxs-lookup"><span data-stu-id="0edb5-275">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="0edb5-276">-Définissez **Direction de Communication** à *envoyer*</span><span class="sxs-lookup"><span data-stu-id="0edb5-276">- Set **Communication Direction** to *Send*</span></span>|  
  
> [!IMPORTANT]
>  <span data-ttu-id="0edb5-277">Si l’orchestration inclut un double port de réception (requête-réponse) pour recevoir des IDOC à partir du système SAP, l’orchestration doit envoyer une réponse au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-277">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="0edb5-278">Si ce n’est pas le cas, le système SAP n’envoie pas l’IDOC suivant.</span><span class="sxs-lookup"><span data-stu-id="0edb5-278">If not, the SAP system does not send the next IDOC.</span></span>  
  
### <a name="adding-a-flat-file-assembler"></a><span data-ttu-id="0edb5-279">Ajout d’un assembleur de fichier plat</span><span class="sxs-lookup"><span data-stu-id="0edb5-279">Adding a Flat File Assembler</span></span>  
 <span data-ttu-id="0edb5-280">Vous devez ajouter un assembleur pour convertir le message entrant IDOC vers un fichier plat.</span><span class="sxs-lookup"><span data-stu-id="0edb5-280">You must add an assembler to convert the incoming IDOC message to a flat file.</span></span>  
  
##### <a name="to-add-a-flat-file-assembler"></a><span data-ttu-id="0edb5-281">Pour ajouter un assembleur de fichier plat</span><span class="sxs-lookup"><span data-stu-id="0edb5-281">To add a flat file assembler</span></span>  
  
1.  <span data-ttu-id="0edb5-282">Cliquez sur le projet BizTalk, pointez sur **ajouter**, puis sélectionnez **un nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-282">Right-click the BizTalk project, point to **Add**, and select **New Item**.</span></span>  
  
2.  <span data-ttu-id="0edb5-283">À partir de la boîte de dialogue, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="0edb5-283">From the dialog box, do the following:</span></span>  
  
    |<span data-ttu-id="0edb5-284">Utiliser</span><span class="sxs-lookup"><span data-stu-id="0edb5-284">Use this</span></span>|<span data-ttu-id="0edb5-285">Pour effectuer cette opération</span><span class="sxs-lookup"><span data-stu-id="0edb5-285">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="0edb5-286">Catégories</span><span class="sxs-lookup"><span data-stu-id="0edb5-286">Categories</span></span>|<span data-ttu-id="0edb5-287">Fichiers de pipeline</span><span class="sxs-lookup"><span data-stu-id="0edb5-287">Pipeline Files</span></span>|  
    |<span data-ttu-id="0edb5-288">Modèles Visual Studio installés</span><span class="sxs-lookup"><span data-stu-id="0edb5-288">Visual Studio installed templates</span></span>|<span data-ttu-id="0edb5-289">Pipeline d'envoi</span><span class="sxs-lookup"><span data-stu-id="0edb5-289">Send Pipeline</span></span>|  
    |<span data-ttu-id="0edb5-290">Nom</span><span class="sxs-lookup"><span data-stu-id="0edb5-290">Name</span></span>|<span data-ttu-id="0edb5-291">SendIDOC</span><span class="sxs-lookup"><span data-stu-id="0edb5-291">SendIDOC</span></span>|  
  
3.  <span data-ttu-id="0edb5-292">Le Concepteur de Pipeline s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="0edb5-292">This opens the Pipeline Designer.</span></span> <span data-ttu-id="0edb5-293">À partir de la **composants de Pipeline BizTalk** boîte à outils, faites glisser le **assembleur de fichier plat** composant de pipeline dans le **assemblage** étape du pipeline d’envoi.</span><span class="sxs-lookup"><span data-stu-id="0edb5-293">From the **BizTalk Pipeline Components** toolbox, drag the **Flat file assembler** pipeline component into the **Assemble** stage of the send pipeline.</span></span>  
  
4.  <span data-ttu-id="0edb5-294">À partir de la **propriétés du composant de Pipeline** afficher, spécifiez une valeur pour le **schéma de Document** propriété.</span><span class="sxs-lookup"><span data-stu-id="0edb5-294">From the **Pipeline Component Properties** view, specify a value for the **Document Schema** property.</span></span> <span data-ttu-id="0edb5-295">Dans la liste déroulante. Veillez à sélectionner le schéma correspondant à l’IDOC opération de réception.</span><span class="sxs-lookup"><span data-stu-id="0edb5-295">From the drop-down make sure you select the schema corresponding to the IDOC receive operation.</span></span>  
  
## <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="0edb5-296">Spécifier des Messages pour les formes d’Action et de se connecter à des Ports</span><span class="sxs-lookup"><span data-stu-id="0edb5-296">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="0edb5-297">Le tableau suivant indique les propriétés et leurs valeurs à définir pour spécifier les messages de formes d’action et les lier aux ports.</span><span class="sxs-lookup"><span data-stu-id="0edb5-297">The following table specifies the properties and their values to be set to specify messages for action shapes and linking them to the ports.</span></span> <span data-ttu-id="0edb5-298">Les noms répertoriés dans le *forme* colonne sont les noms des formes de message, tel qu’affiché dans l’orchestration ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="0edb5-298">The names listed in the *Shape* column are the names of the message shapes as displayed in the orchestration above.</span></span>  
  
|<span data-ttu-id="0edb5-299">Graphique à base de formes</span><span class="sxs-lookup"><span data-stu-id="0edb5-299">Shape</span></span>|<span data-ttu-id="0edb5-300">Propriétés</span><span class="sxs-lookup"><span data-stu-id="0edb5-300">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="0edb5-301">ListenToSAP</span><span class="sxs-lookup"><span data-stu-id="0edb5-301">ListenToSAP</span></span>|<span data-ttu-id="0edb5-302">-Définissez **Message** à *demande*</span><span class="sxs-lookup"><span data-stu-id="0edb5-302">- Set **Message** to *Request*</span></span><br /><br /> <span data-ttu-id="0edb5-303">-Définissez **opération** à *ReceiveIDOCPort.ReceiveIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="0edb5-303">- Set **Operation** to *ReceiveIDOCPort.ReceiveIDOC.Request*</span></span>|  
|<span data-ttu-id="0edb5-304">SaveIDOC</span><span class="sxs-lookup"><span data-stu-id="0edb5-304">SaveIDOC</span></span>|<span data-ttu-id="0edb5-305">-Définissez **Message** à *demande*</span><span class="sxs-lookup"><span data-stu-id="0edb5-305">- Set **Message** to *Request*</span></span><br /><br /> <span data-ttu-id="0edb5-306">-Définissez **opération** à *GetIDOCPort.ReceiveIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="0edb5-306">- Set **Operation** to *GetIDOCPort.ReceiveIDOC.Request*</span></span>|  
|<span data-ttu-id="0edb5-307">SendResponse</span><span class="sxs-lookup"><span data-stu-id="0edb5-307">SendResponse</span></span>|<span data-ttu-id="0edb5-308">-Définissez **Message** à *réponse*</span><span class="sxs-lookup"><span data-stu-id="0edb5-308">- Set **Message** to *Response*</span></span><br /><br /> <span data-ttu-id="0edb5-309">-Définissez **opération** à *ReceiveIDOCPort.ReceiveIDOC.Response*</span><span class="sxs-lookup"><span data-stu-id="0edb5-309">- Set **Operation** to *ReceiveIDOCPort.ReceiveIDOC.Response*</span></span>|  
  
 <span data-ttu-id="0edb5-310">Une fois que vous avez défini ces propriétés, les formes de message et les ports sont connectés et l’orchestration est terminée.</span><span class="sxs-lookup"><span data-stu-id="0edb5-310">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  
  
 <span data-ttu-id="0edb5-311">Vous devez maintenant générer la solution BizTalk et déployez-le dans un [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0edb5-311">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="0edb5-312">Pour plus d’informations, consultez [génération et exécution des Orchestrations](../../core/building-and-running-orchestrations.md)</span><span class="sxs-lookup"><span data-stu-id="0edb5-312">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md)</span></span>
  
## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="0edb5-313">Configuration de l’Application BizTalk</span><span class="sxs-lookup"><span data-stu-id="0edb5-313">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="0edb5-314">Après avoir déployé le projet BizTalk, l’orchestration que vous avez créé précédemment est répertoriée sous le **Orchestrations** volet de la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="0edb5-314">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="0edb5-315">Vous devez utiliser la console Administration de BizTalk Server pour configurer l’application.</span><span class="sxs-lookup"><span data-stu-id="0edb5-315">You must use the BizTalk Server Administration console to configure the application.</span></span> <span data-ttu-id="0edb5-316">Pour plus d’informations sur la configuration d’une application, consultez [comment configurer une Application](../../core/how-to-configure-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-316">For more information about configuring an application, see [How to Configure an Application](../../core/how-to-configure-an-application.md).</span></span>
  
 <span data-ttu-id="0edb5-317">Configuration d’une application implique :</span><span class="sxs-lookup"><span data-stu-id="0edb5-317">Configuring an application involves:</span></span>  
  
-   <span data-ttu-id="0edb5-318">Sélection d’un hôte de l’application.</span><span class="sxs-lookup"><span data-stu-id="0edb5-318">Selecting a host for the application.</span></span>  
  
-   <span data-ttu-id="0edb5-319">Mappage de ports que vous avez créé dans l’orchestration aux ports physiques dans la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="0edb5-319">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="0edb5-320">Pour cette orchestration, vous devez :</span><span class="sxs-lookup"><span data-stu-id="0edb5-320">For this orchestration you must:</span></span>  
  
    -   <span data-ttu-id="0edb5-321">Définir les emplacements d’envoi et de port d’envoi physique.</span><span class="sxs-lookup"><span data-stu-id="0edb5-321">Define send locations and physical send port.</span></span> <span data-ttu-id="0edb5-322">Cet emplacement contient l’IDOC provenant du système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-322">This location will contain the IDOCs coming from the SAP system.</span></span>  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="0edb5-323">Pour le pipeline XMLTransmit, veillez à sélectionner ***SendIDOC***.</span><span class="sxs-lookup"><span data-stu-id="0edb5-323">For the XMLTransmit pipeline, make sure you select ***SendIDOC***.</span></span> <span data-ttu-id="0edb5-324">Vous avez créé ce pipeline dans le cadre du projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0edb5-324">You created this pipeline as part of the BizTalk project.</span></span>  
  
    -   <span data-ttu-id="0edb5-325">Définir un WCF-Custom ou port de réception WCF-SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-325">Define a WCF-Custom or WCF-SAP receive port.</span></span> <span data-ttu-id="0edb5-326">Ce port recevra un IDOC entrant à partir du système SAP et passez-la à l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="0edb5-326">This port will receive an inbound IDOC from the SAP system and pass it on to the orchestration.</span></span> <span data-ttu-id="0edb5-327">Ce port envoie également la réponse au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-327">This port also sends the response to the SAP system.</span></span> <span data-ttu-id="0edb5-328">Pour plus d’informations sur la création de ports, consultez [configurer manuellement une liaison de port physique à l’adaptateur SAP](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-328">For information about how to create ports, see [Manually configure a physical port binding to the SAP adapter](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md).</span></span>
  
        > [!IMPORTANT]
        >  <span data-ttu-id="0edb5-329">Assurez-vous que la propriété de liaison **ReceiveIDocFormat** a la valeur **typé**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-329">Make sure the binding property **ReceiveIDocFormat** is set to **Typed**.</span></span>  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="0edb5-330">Si la propriété de liaison **EnableBizTalkCompatibilityMode** a la valeur est true, assurez-vous d’ajouter le fichier DLL du schéma de propriété BizTalk pour le [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] en tant que ressource dans votre application BizTalk, autrement dit, l’application dans laquelle votre projet est déployé.</span><span class="sxs-lookup"><span data-stu-id="0edb5-330">If the binding property **EnableBizTalkCompatibilityMode** is set to true, make sure you add the BizTalk property schema DLL for the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] as a resource in your BizTalk application, that is, the application in which your project is deployed.</span></span> <span data-ttu-id="0edb5-331">Pour obtenir des instructions sur l’ajout de ressources, consultez [dépanner les problèmes opérationnels avec l’adaptateur SAP](../../adapters-and-accelerators/adapter-sap/troubleshoot-operational-issues-with-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-331">For instructions on adding resources see [Troubleshoot Operational Issues with the SAP adapter](../../adapters-and-accelerators/adapter-sap/troubleshoot-operational-issues-with-the-sap-adapter.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="0edb5-332">Génération de schéma à l’aide du [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] crée également un fichier de liaison contenant des informations sur les ports et les actions à définir pour ces ports.</span><span class="sxs-lookup"><span data-stu-id="0edb5-332">Generating the schema using the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] also creates a binding file containing information about the ports and the actions to be set for those ports.</span></span> <span data-ttu-id="0edb5-333">Vous pouvez importer ce fichier de liaison à partir de la Console Administration de BizTalk pour créer des ports d’envoi (pour les appels sortants) ou de ports de réception (d’appels entrants).</span><span class="sxs-lookup"><span data-stu-id="0edb5-333">You can import this binding file from the BizTalk Administration Console to create send ports (for outbound calls) or receive ports (for inbound calls).</span></span> <span data-ttu-id="0edb5-334">Pour plus d’informations, consultez [configurer une liaison de port physique à l’aide d’un fichier de liaison de port à SAP](../../adapters-and-accelerators/adapter-sap/configure-a-physical-port-binding-using-a-port-binding-file-to-sap.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-334">For more information, see [Configure a physical port binding using a port binding file to SAP](../../adapters-and-accelerators/adapter-sap/configure-a-physical-port-binding-using-a-port-binding-file-to-sap.md).</span></span>
  
 <span data-ttu-id="0edb5-335">Vous devez également ajouter l’assembly pour le projet IdocReceiveResponseMessageCreator à votre application BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0edb5-335">You must also add the assembly for the IdocReceiveResponseMessageCreator project to your BizTalk application.</span></span> <span data-ttu-id="0edb5-336">Vous avez créé ce projet pour générer la réponse à envoyer au système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-336">You created this project to generate the response to be sent to the SAP system.</span></span> <span data-ttu-id="0edb5-337">Pour cela :</span><span class="sxs-lookup"><span data-stu-id="0edb5-337">To do so:</span></span>  
  
1.  <span data-ttu-id="0edb5-338">Dans l’arborescence de la console sur le côté gauche de la console Administration de BizTalk Server, sous l’application BizTalk où vous avez importé les liaisons, cliquez sur **ressources**, pointez sur **ajouter** puis cliquez sur **Assemblys BizTalk**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-338">In the console tree on the left side of the BizTalk Server Administration console, under the BizTalk application where you imported the bindings, right-click **Resources**, point to **Add** and then click **BizTalk Assemblies**.</span></span>  
  
2.  <span data-ttu-id="0edb5-339">Dans le **ajouter des ressources** boîte de dialogue, cliquez sur **ajouter** et accédez au dossier contenant IdocReceiveResponseMessageCreator.dll.</span><span class="sxs-lookup"><span data-stu-id="0edb5-339">In the **Add Resources** dialog box, Click **Add** and navigate to the folder containing IdocReceiveResponseMessageCreator.dll.</span></span> <span data-ttu-id="0edb5-340">Sélectionnez le fichier, puis cliquez **ouvrir**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-340">Select the file and then click **Open**.</span></span>  
  
3.  <span data-ttu-id="0edb5-341">Dans le **ajouter des ressources** boîte de dialogue, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="0edb5-341">In the **Add Resources** dialog box, click **OK**.</span></span>  
  
## <a name="starting-the-application"></a><span data-ttu-id="0edb5-342">Démarrage de l’Application</span><span class="sxs-lookup"><span data-stu-id="0edb5-342">Starting the Application</span></span>  
 <span data-ttu-id="0edb5-343">Vous devez démarrer l’application BizTalk pour la réception d’un IDOC à partir du système SAP.</span><span class="sxs-lookup"><span data-stu-id="0edb5-343">You must start the BizTalk application for receiving an IDOC from the SAP system.</span></span> <span data-ttu-id="0edb5-344">Pour obtenir des instructions sur le démarrage d’une application BizTalk, consultez [comment démarrer une Orchestration](../../core/how-to-start-an-orchestration.md), ou [comment démarrer une application](../../core/how-to-start-and-stop-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-344">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md), or [How to start an application](../../core/how-to-start-and-stop-a-biztalk-application.md).</span></span>
  
 <span data-ttu-id="0edb5-345">À ce stade, vérifiez que :</span><span class="sxs-lookup"><span data-stu-id="0edb5-345">At this stage, make sure:</span></span>  
  
-   <span data-ttu-id="0edb5-346">Le port d’envoi de fichier pour enregistrer l’IDOC entrant vers un emplacement de fichier est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="0edb5-346">The FILE send port to save the incoming IDOC to a file location is running</span></span>  
  
-   <span data-ttu-id="0edb5-347">Le WCF-Custom ou WCF-SAP port de réception pour recevoir des IDOC de SAP système est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="0edb5-347">The WCF-Custom or WCF-SAP receive port to receive IDOCs from the SAP system is running.</span></span>  
  
-   <span data-ttu-id="0edb5-348">L’orchestration BizTalk pour l’opération est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="0edb5-348">The BizTalk orchestration for the operation is running.</span></span>  
  
## <a name="executing-the-operation"></a><span data-ttu-id="0edb5-349">L’exécution de l’opération</span><span class="sxs-lookup"><span data-stu-id="0edb5-349">Executing the Operation</span></span>  
 <span data-ttu-id="0edb5-350">Après avoir exécuté l’application, vous devez accéder au système SAP et envoyer un IDOC dans l’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="0edb5-350">After you run the application, you must go the SAP system and send an IDOC into the adapter.</span></span> <span data-ttu-id="0edb5-351">L’adaptateur reçoit l’IDOC et l’enregistre dans un emplacement de fichier spécifié dans le cadre de l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="0edb5-351">The adapter receives the IDOC and saves it to a file location specified as part of the orchestration.</span></span>  
  
## <a name="possible-exceptions"></a><span data-ttu-id="0edb5-352">Exceptions possibles</span><span class="sxs-lookup"><span data-stu-id="0edb5-352">Possible Exceptions</span></span>  
 <span data-ttu-id="0edb5-353">Pour plus d’informations sur les exceptions que vous pouvez rencontrer lors de la réception d’un IDOC à partir d’un système SAP à l’aide de BizTalk Server, consultez [Exceptions et gestion des erreurs avec l’adaptateur SAP](../../adapters-and-accelerators/adapter-sap/exceptions-and-error-handling-with-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-353">For information about the exceptions you might encounter while receiving an IDOC from an SAP system using BizTalk Server, see [Exceptions and Error Handling with the SAP adapter](../../adapters-and-accelerators/adapter-sap/exceptions-and-error-handling-with-the-sap-adapter.md).</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="0edb5-354">Bonnes pratiques</span><span class="sxs-lookup"><span data-stu-id="0edb5-354">Best Practices</span></span>  
 <span data-ttu-id="0edb5-355">Après avoir déployé et configuré le projet BizTalk, vous pouvez exporter les paramètres de configuration dans un fichier XML appelé le fichier de liaisons.</span><span class="sxs-lookup"><span data-stu-id="0edb5-355">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the bindings file.</span></span> <span data-ttu-id="0edb5-356">Une fois que vous générez un fichier de liaison, vous pouvez importer les paramètres de configuration à partir du fichier afin que vous n’avez pas besoin de créer les ports d’envoi, ports, etc. pour la même orchestration de réception.</span><span class="sxs-lookup"><span data-stu-id="0edb5-356">Once you generate a bindings file, you can import the configuration settings from the file so that you do not need to create the send ports, receive ports, etc. for the same orchestration.</span></span> <span data-ttu-id="0edb5-357">Pour plus d’informations sur les fichiers de liaison, consultez [liaisons de l’adaptateur SAP de réutiliser](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="0edb5-357">For more information about binding files, see [Reuse SAP adapter bindings](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="0edb5-358">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="0edb5-358">See Also</span></span>  
[<span data-ttu-id="0edb5-359">Développer des applications BizTalk</span><span class="sxs-lookup"><span data-stu-id="0edb5-359">Develop BizTalk applications</span></span>](../../adapters-and-accelerators/adapter-sap/develop-biztalk-applications-using-the-sap-adapter.md)