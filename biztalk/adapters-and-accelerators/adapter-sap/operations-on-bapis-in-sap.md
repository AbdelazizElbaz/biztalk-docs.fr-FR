---
title: "Opérations sur les BAPI dans SAP | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- BAPI, operations
- BAPIs, operations on
- Business Application Programming Interface
- BAPIs
- BAPI, transactions
- BAPI transactions, limitations on
ms.assetid: 6be26641-e8d3-4e11-8d82-4fdb13076580
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8b8504dd05c671307085d621c474969a70026d2f
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="operations-on-bapis-in-sap"></a><span data-ttu-id="8b852-102">Opérations sur les BAPI dans SAP</span><span class="sxs-lookup"><span data-stu-id="8b852-102">Operations on BAPIs in SAP</span></span>
<span data-ttu-id="8b852-103">Une Application Programming Interface (BAPI) d’entreprise est une méthode d’un objet métier SAP qui peut être appelée par un processus externe.</span><span class="sxs-lookup"><span data-stu-id="8b852-103">A Business Application Programming Interface (BAPI) is a method of a SAP business object that can be called by an external process.</span></span> <span data-ttu-id="8b852-104">Interfaces BAPI sont transactionnelles sur le système SAP.</span><span class="sxs-lookup"><span data-stu-id="8b852-104">BAPIs are transactional on the SAP system.</span></span>  
  
 <span data-ttu-id="8b852-105">Le [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] prend en charge BAPI appelle dans la direction sortante.</span><span class="sxs-lookup"><span data-stu-id="8b852-105">The [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] supports BAPI calls in the outbound direction.</span></span> <span data-ttu-id="8b852-106">Il met en évidence des interfaces BAPI de deux manières :</span><span class="sxs-lookup"><span data-stu-id="8b852-106">It surfaces BAPIs in two ways:</span></span>  
  
-   <span data-ttu-id="8b852-107">**En tant que RFC**.</span><span class="sxs-lookup"><span data-stu-id="8b852-107">**As an RFC**.</span></span> <span data-ttu-id="8b852-108">Vous pouvez appeler une commande BAPI directement par l’appel de la RFC appropriée.</span><span class="sxs-lookup"><span data-stu-id="8b852-108">You can invoke a BAPI directly by invoking the appropriate RFC.</span></span>  
  
-   <span data-ttu-id="8b852-109">**En tant que méthodes d’objets métier**.</span><span class="sxs-lookup"><span data-stu-id="8b852-109">**As methods of business objects**.</span></span> <span data-ttu-id="8b852-110">L’adaptateur met en évidence des interfaces BAPI en tant que méthodes d’objets métier pour des raisons pratiques pour vous aider à récupérer des métadonnées lorsque vous utilisez la [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] ou [!INCLUDE[addadapterservreflong](../../includes/addadapterservreflong-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b852-110">The adapter surfaces BAPIs as methods of business objects as a convenience to help you retrieve metadata when you use the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] or the [!INCLUDE[addadapterservreflong](../../includes/addadapterservreflong-md.md)].</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="8b852-111">Vous pouvez appeler une commande BAPI sur la carte en tant que RFC ou en tant que méthode d’un objet métier ; mais, quelle que soit la façon dont vous appelez BAPI sur la carte, il appelle toujours BAPI sur SAP via l’interface RFC.</span><span class="sxs-lookup"><span data-stu-id="8b852-111">You can invoke a BAPI on the adapter as an RFC or as a method of a business object; but regardless of how you invoke the BAPI on the adapter, it always invokes the BAPI on SAP through the RFC interface.</span></span>  
  
 <span data-ttu-id="8b852-112">L’adaptateur prend en charge les transactions BAPI.</span><span class="sxs-lookup"><span data-stu-id="8b852-112">The adapter supports BAPI transactions.</span></span> <span data-ttu-id="8b852-113">Le modèle de transaction BAPI sur SAP permet aux utilisateurs de combiner plusieurs interfaces BAPI en une seule unité logique de travail (LUW).</span><span class="sxs-lookup"><span data-stu-id="8b852-113">The BAPI transaction model on SAP enables users to combine several BAPIs into one logical unit of work (LUW).</span></span> <span data-ttu-id="8b852-114">Un LUW SAP se compose de toutes les étapes impliquées dans une transaction de mise à jour de la base de données.</span><span class="sxs-lookup"><span data-stu-id="8b852-114">An SAP LUW consists of all the steps involved in a transaction including updating the database.</span></span>  
  
 <span data-ttu-id="8b852-115">Les rubriques de cette section expliquent comment les interfaces BAPI sont signalées en tant qu’objets métier et comment les transactions BAPI (LUWs) sont prises en charge par l’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="8b852-115">The topics in this section explain how BAPIs are surfaced as business objects and how BAPI transactions (LUWs) are supported by the adapter.</span></span>  
 
  
## <a name="bapi-operations-as-business-object-methods"></a><span data-ttu-id="8b852-116">Opérations BAPI (en tant que méthodes d’objet métier)</span><span class="sxs-lookup"><span data-stu-id="8b852-116">BAPI Operations (as Business Object Methods)</span></span>  
 <span data-ttu-id="8b852-117">L’adaptateur met en évidence des interfaces BAPI comme méthodes d’objets métier pour des raisons pratiques pour vous aider à récupérer des métadonnées lorsque vous utilisez la [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] ou [!INCLUDE[addadapterservreflong](../../includes/addadapterservreflong-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8b852-117">The adapter surfaces BAPIs as business objects methods as a convenience to help you retrieve metadata when you use the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] or the [!INCLUDE[addadapterservreflong](../../includes/addadapterservreflong-md.md)].</span></span> <span data-ttu-id="8b852-118">L’adaptateur appelle toujours BAPI sur le système SAP à l’aide de l’interface RFC.</span><span class="sxs-lookup"><span data-stu-id="8b852-118">The adapter always invokes BAPIs on the SAP system using the RFC interface.</span></span>  
  
 <span data-ttu-id="8b852-119">L’adaptateur met en évidence des interfaces BAPI par nom en tant qu’opérations sous l’objet métier appropriée pour les opérations sortantes.</span><span class="sxs-lookup"><span data-stu-id="8b852-119">The adapter surfaces BAPIs by name as operations under the appropriate business object for outbound operations.</span></span> <span data-ttu-id="8b852-120">Les objets métier sont collectés par le groupe fonctionnel sous le nœud de catégorie BAPI par l’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="8b852-120">Business objects are collected by functional group under the BAPI category node by the adapter.</span></span> <span data-ttu-id="8b852-121">(Vous pouvez parcourir ou rechercher des objets métier et des interfaces BAPI sous le **BAPI** nœud lorsque vous utilisez la [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] ou [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].)</span><span class="sxs-lookup"><span data-stu-id="8b852-121">(You can browse or search for business objects and BAPIs under the **BAPI** node when you use the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].)</span></span>  
  
 <span data-ttu-id="8b852-122">Le [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] prend en charge les éléments suivants sur les interfaces BAPI :</span><span class="sxs-lookup"><span data-stu-id="8b852-122">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports the following on BAPIs:</span></span>  
  
-   <span data-ttu-id="8b852-123">Paramètres d’importation</span><span class="sxs-lookup"><span data-stu-id="8b852-123">IMPORT parameters</span></span>  
  
-   <span data-ttu-id="8b852-124">Paramètres d’exportation</span><span class="sxs-lookup"><span data-stu-id="8b852-124">EXPORT parameters</span></span>  
  
-   <span data-ttu-id="8b852-125">MODIFICATION des paramètres</span><span class="sxs-lookup"><span data-stu-id="8b852-125">CHANGING parameters</span></span>  
  
-   <span data-ttu-id="8b852-126">Paramètres table</span><span class="sxs-lookup"><span data-stu-id="8b852-126">Table parameters</span></span>  
  
 <span data-ttu-id="8b852-127">Pour plus d’informations sur les structures de message et les actions de SOAP utilisées pour les interfaces BAPI exposés en tant que méthodes d’objet métier, consultez [des schémas de Message pour des opérations BAPI](../../adapters-and-accelerators/adapter-sap/message-schemas-for-bapi-operations.md).</span><span class="sxs-lookup"><span data-stu-id="8b852-127">For more information about the message structures and SOAP actions used for BAPIs surfaced as business object methods, see [Message Schemas for BAPI Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-bapi-operations.md).</span></span>  
  
## <a name="bapi-transactions"></a><span data-ttu-id="8b852-128">Transactions BAPI</span><span class="sxs-lookup"><span data-stu-id="8b852-128">BAPI Transactions</span></span>  
 <span data-ttu-id="8b852-129">Lorsque vous appelez un BAPI, il fait toujours partie d’un LUW sur le système SAP.</span><span class="sxs-lookup"><span data-stu-id="8b852-129">When you invoke a BAPI, it is always part of an LUW on the SAP system.</span></span> <span data-ttu-id="8b852-130">Cela est vrai si vous appelez BAPI sous la forme d’une demande de changement ou une méthode d’un objet métier.</span><span class="sxs-lookup"><span data-stu-id="8b852-130">This is true whether you invoke the BAPI as an RFC or as a method of a business object.</span></span> <span data-ttu-id="8b852-131">Le SDK RFC traite toutes les interfaces BAPI envoyés sur la même connexion SAP dans le cadre de la même LUW.</span><span class="sxs-lookup"><span data-stu-id="8b852-131">The RFC SDK treats all BAPIs sent over the same SAP connection as part of the same LUW.</span></span> <span data-ttu-id="8b852-132">Après un appel à valider ou restaurer la transaction sur une connexion, envoyé via la connexion BAPI suivant commence un nouveau LUW.</span><span class="sxs-lookup"><span data-stu-id="8b852-132">After a call to commit or roll back the transaction on a connection, the next BAPI sent over the connection begins a new LUW.</span></span>  
  
 <span data-ttu-id="8b852-133">Vous appelez BAPI_TRANSACTION_COMMIT ou BAPI_TRANSACTION_ROLLBACK pour valider ou annuler la transaction.</span><span class="sxs-lookup"><span data-stu-id="8b852-133">You call BAPI_TRANSACTION_COMMIT or BAPI_TRANSACTION_ROLLBACK to commit or roll back the transaction.</span></span> <span data-ttu-id="8b852-134">L’adaptateur met en évidence ces interfaces deux BAPI :</span><span class="sxs-lookup"><span data-stu-id="8b852-134">The adapter surfaces these two BAPIs:</span></span>  
  
-   <span data-ttu-id="8b852-135">Sous le nœud de base en tant qu’opérations de RFC.</span><span class="sxs-lookup"><span data-stu-id="8b852-135">Under the Basis node as RFC operations.</span></span>  
  
-   <span data-ttu-id="8b852-136">Sous chaque objet de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="8b852-136">Under each business object.</span></span>  
  
 <span data-ttu-id="8b852-137">Vous contrôlez les BAPI dans une transaction en s’assurant qu’elles sont toutes envoyées via la même connexion SAP (y compris l’appel à valider ou restaurer la transaction).</span><span class="sxs-lookup"><span data-stu-id="8b852-137">You control the BAPIs in a transaction by ensuring that they are all sent over the same SAP connection (including the call to commit or roll back the transaction).</span></span> <span data-ttu-id="8b852-138">Vous pouvez le faire dans :</span><span class="sxs-lookup"><span data-stu-id="8b852-138">You can do this in:</span></span>  
  
-   <span data-ttu-id="8b852-139">Les Solutions BizTalk à l’aide de la **ConnectionState** propriété de contexte pour vérifier que les interfaces BAPI dans une transaction sont envoyées à l’aide de la même connexion.</span><span class="sxs-lookup"><span data-stu-id="8b852-139">BizTalk Solutions by using the **ConnectionState** message context property to ensure that the BAPIs in a transaction are sent using the same connection.</span></span> <span data-ttu-id="8b852-140">Cette propriété est visible par l’adaptateur et vous fournit un contrôle explicite sur la connexion utilisée pour envoyer un message dans une orchestration BizTalk.</span><span class="sxs-lookup"><span data-stu-id="8b852-140">This property is surfaced by the adapter and provides you with explicit control over the connection used to send a message in a BizTalk orchestration.</span></span>  
  
     <span data-ttu-id="8b852-141">Pour effectuer des transactions BAPI à l’aide de BizTalk Server, le [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] prend en charge les propriétés de contexte de message suivant.</span><span class="sxs-lookup"><span data-stu-id="8b852-141">For performing BAPI transactions using BizTalk Server, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports the following message context properties.</span></span>  
  
    |<span data-ttu-id="8b852-142">Champ</span><span class="sxs-lookup"><span data-stu-id="8b852-142">Field</span></span>|<span data-ttu-id="8b852-143"> Description</span><span class="sxs-lookup"><span data-stu-id="8b852-143">Description</span></span>|  
    |-----------|-----------------|  
    |<span data-ttu-id="8b852-144">OPEN</span><span class="sxs-lookup"><span data-stu-id="8b852-144">OPEN</span></span>|<span data-ttu-id="8b852-145">Ouvre un nouveau canal pour la transaction.</span><span class="sxs-lookup"><span data-stu-id="8b852-145">Opens a new channel for the transaction.</span></span>|  
    |<span data-ttu-id="8b852-146">RÉUTILISER</span><span class="sxs-lookup"><span data-stu-id="8b852-146">REUSE</span></span>|<span data-ttu-id="8b852-147">Réutiliser un canal existant pour la transaction.</span><span class="sxs-lookup"><span data-stu-id="8b852-147">Reuse existing channel for the transaction.</span></span>|  
    |<span data-ttu-id="8b852-148">CLOSE</span><span class="sxs-lookup"><span data-stu-id="8b852-148">CLOSE</span></span>|<span data-ttu-id="8b852-149">Valider la transaction et fermer le canal existant.</span><span class="sxs-lookup"><span data-stu-id="8b852-149">Commit the transaction and close the existing channel.</span></span>|  
    |<span data-ttu-id="8b852-150">ABANDON</span><span class="sxs-lookup"><span data-stu-id="8b852-150">ABORT</span></span>|<span data-ttu-id="8b852-151">Abandonner la transaction et fermer le canal existant.</span><span class="sxs-lookup"><span data-stu-id="8b852-151">Abort the transaction and close the existing channel.</span></span>|  
  
     <span data-ttu-id="8b852-152">Pour plus d’informations, consultez [exécuter des Transactions BAPI dans SAP à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sap/run-bapi-transactions-in-sap-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="8b852-152">For more information, see [Run BAPI Transactions in SAP using BizTalk Server](../../adapters-and-accelerators/adapter-sap/run-bapi-transactions-in-sap-using-biztalk-server.md).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="8b852-153">Veillez à définir le **EnableBizTalkCompatibilityMode**propriété de liaison lors de l’exécution de transactions à l’aide de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="8b852-153">Make sure you set the **EnableBizTalkCompatibilityMode**binding property when performing transactions using BizTalk Server.</span></span>  
  
-   <span data-ttu-id="8b852-154">Solutions de modèle de service WCF en vous assurant que les interfaces BAPI dans une transaction sont envoyées à l’aide du même client WCF.</span><span class="sxs-lookup"><span data-stu-id="8b852-154">WCF service model solutions by ensuring that the BAPIs in a transaction are sent using the same WCF client.</span></span> <span data-ttu-id="8b852-155">Pour plus d’informations, consultez [appeler les BAPI dans SAP à l’aide du modèle de Service WCF](../../adapters-and-accelerators/adapter-sap/invoke-bapis-in-sap-using-the-wcf-service-model.md).</span><span class="sxs-lookup"><span data-stu-id="8b852-155">For more information, see [Invoke BAPIs in SAP using WCF Service Model](../../adapters-and-accelerators/adapter-sap/invoke-bapis-in-sap-using-the-wcf-service-model.md).</span></span>  
  
-   <span data-ttu-id="8b852-156">WCF canal solutions de modèles en veillant à ce que les interfaces BAPI dans une transaction sont envoyés sur le même canal WCF.</span><span class="sxs-lookup"><span data-stu-id="8b852-156">WCF channel model solutions by ensuring that the BAPIs in a transaction are sent over the same WCF channel.</span></span> <span data-ttu-id="8b852-157">Pour plus d’informations, consultez [développer des applications à l’aide du modèle de canal WCF](../../adapters-and-accelerators/adapter-sap/develop-sap-applications-using-the-wcf-channel-model.md).</span><span class="sxs-lookup"><span data-stu-id="8b852-157">For more information, see [Develop applications using the WCF Channel Model](../../adapters-and-accelerators/adapter-sap/develop-sap-applications-using-the-wcf-channel-model.md).</span></span>  
  
### <a name="limitations-on-bapi-transactions"></a><span data-ttu-id="8b852-158">Limitations sur les Transactions BAPI</span><span class="sxs-lookup"><span data-stu-id="8b852-158">Limitations on BAPI Transactions</span></span>  
 <span data-ttu-id="8b852-159">Les restrictions suivantes s’appliquent sur des transactions BAPI :</span><span class="sxs-lookup"><span data-stu-id="8b852-159">The following restrictions apply on BAPI transactions:</span></span>  
  
-   <span data-ttu-id="8b852-160">Il n’est pas possible d’effectuer deux accès en écriture sur la même instance dans un LUW.</span><span class="sxs-lookup"><span data-stu-id="8b852-160">It is not possible to make two write accesses on the same instance within one LUW.</span></span> <span data-ttu-id="8b852-161">Par exemple, vous ne peut pas créer une commande et mettre à jour dans la même transaction.</span><span class="sxs-lookup"><span data-stu-id="8b852-161">For example, you cannot create an order and update it in the same transaction.</span></span>  
  
-   <span data-ttu-id="8b852-162">Lors de l’exécution d’une transaction à l’aide de BAPI [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], tous les messages doivent être envoyées dans une seule instance d’hôte du port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="8b852-162">When performing BAPI a transaction using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], all the messages must be sent over a single host instance of the send port.</span></span>  
  
-   <span data-ttu-id="8b852-163">Si une instance est créée, mis à jour ou supprimée à l’aide d’une écriture BAPI, une lecture BAPI ne peut pas afficher les données les plus récentes, jusqu'à ce que l’écriture BAPI est validée.</span><span class="sxs-lookup"><span data-stu-id="8b852-163">If an instance is created, updated, or deleted by using a write BAPI, a read BAPI cannot view the most recent data until the write BAPI is committed.</span></span>  
  
-   <span data-ttu-id="8b852-164">Un client externe qui appelle un LUW doit appeler toutes les interfaces BAPI contenant le LUW sur la même connexion SAP.</span><span class="sxs-lookup"><span data-stu-id="8b852-164">An external client that invokes an LUW should call all the BAPIs that the LUW contains on the same SAP connection.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="8b852-165">Interfaces BAPI qui appartiennent à la version 3.1 appellent valider le travail dans le cadre de leur implémentation.</span><span class="sxs-lookup"><span data-stu-id="8b852-165">BAPIs that belong to Release 3.1 call COMMIT WORK as part of their implementation.</span></span> <span data-ttu-id="8b852-166">Cela signifie que ces interfaces BAPI ne peut pas être inclus avec les autres interfaces BAPI dans un LUW (car ils valide la transaction).</span><span class="sxs-lookup"><span data-stu-id="8b852-166">This means that these BAPIs cannot be included with other BAPIs in an LUW (because they will commit the transaction).</span></span> <span data-ttu-id="8b852-167">Pour plus d’informations, consultez la documentation de SAP.</span><span class="sxs-lookup"><span data-stu-id="8b852-167">For more information, see the SAP documentation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8b852-168">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8b852-168">See Also</span></span>  
 <span data-ttu-id="8b852-169">[Quelles opérations peuvent être effectuées à l’aide de la carte ?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="8b852-169">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span></span>