---
title: "Envoyer des IDOC à SAP à l’aide de BizTalk Server | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- IDOCs, sample for sending
- IDOCs, sending to SAP using BizTalk Server
- IDOCs, business scenarios for sending
ms.assetid: 92042623-ffbf-472f-9515-e9a77eb320fb
caps.latest.revision: "12"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: db734237a874ef73b88ddb2e59fe51f34daa3fcd
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="send-idocs-to-sap-using-biztalk-server"></a><span data-ttu-id="3ec16-102">Envoyer des IDOC à SAP à l’aide de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="3ec16-102">Send IDOCs to SAP using BizTalk Server</span></span>
<span data-ttu-id="3ec16-103">Tous les appels IDOC à SAP sont traitées en interne comme des appels tRFC où l’adaptateur agit comme un client tRFC et appelle une commande RFC dans pour envoyer un IDOC SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-103">All IDOC calls to SAP are internally treated as tRFC calls where the adapter acts as a tRFC client and calls an RFC in SAP to send an IDOC.</span></span> <span data-ttu-id="3ec16-104">Cette section fournit des informations sur l’envoi des IDOC à SAP à l’aide de la [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] avec [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3ec16-104">This section provides information on sending IDOCs to SAP by using the [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="3ec16-105">Le [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] met en évidence des deux opérations distinctes pour envoyer des IDOC :</span><span class="sxs-lookup"><span data-stu-id="3ec16-105">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] surfaces two different operations to send IDOCs:</span></span>  
  
-   <span data-ttu-id="3ec16-106">**Envoyer** opération permet aux clients de l’adaptateur envoyer des IDOC ayant un schéma fortement typé.</span><span class="sxs-lookup"><span data-stu-id="3ec16-106">**Send** operation enables adapter clients to send IDOCs having a strongly-typed schema.</span></span>  
  
-   <span data-ttu-id="3ec16-107">**SendIdoc** opération permet aux clients de l’adaptateur envoyer des IDOC ayant un schéma faiblement typée.</span><span class="sxs-lookup"><span data-stu-id="3ec16-107">**SendIdoc** operation enables adapter clients to send IDOCs having a weakly-typed schema.</span></span> <span data-ttu-id="3ec16-108">Vous utilisez ce paramètre, les clients de l’adaptateur peuvent envoyer des IDOC de fichier plat au système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-108">Using this, the adapter clients can send flat-file IDOCs to the SAP system.</span></span> <span data-ttu-id="3ec16-109">Le fichier plat IDOC entière serait une valeur de nœud dans un message SendIdoc XML.</span><span class="sxs-lookup"><span data-stu-id="3ec16-109">The entire flat-file IDOC would be a node value in a SendIdoc XML message.</span></span>  
  
 <span data-ttu-id="3ec16-110">Pour plus d’informations sur la façon dont [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] prend en charge de l’envoi des IDOC à un système SAP, consultez [opérations sur IDOC dans SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-110">For more information about how the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending IDOCs to an SAP system, see [Operations on IDOCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span></span> <span data-ttu-id="3ec16-111">Pour plus d’informations sur la structure de SOAP des messages pour envoyer un IDOC, consultez [des schémas de Message pour des opérations IDOC](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-111">For more information about the structure of SOAP messages for sending an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
## <a name="biztalk-scenarios-for-sending-idocs-with-the-sap-adapter"></a><span data-ttu-id="3ec16-112">Scénarios de BizTalk pour envoyer des IDOC avec l’adaptateur SAP</span><span class="sxs-lookup"><span data-stu-id="3ec16-112">BizTalk Scenarios for Sending IDOCs with the SAP Adapter</span></span>  
 <span data-ttu-id="3ec16-113">Le tableau suivant fournit des scénarios clés de BizTalk pour envoyer des IDOC à un système SAP :</span><span class="sxs-lookup"><span data-stu-id="3ec16-113">The following table provides key BizTalk scenarios for sending IDOCs to an SAP system:</span></span>  
  
|<span data-ttu-id="3ec16-114">Entrée de BizTalk</span><span class="sxs-lookup"><span data-stu-id="3ec16-114">Input to BizTalk</span></span>|<span data-ttu-id="3ec16-115">Traitement BizTalk</span><span class="sxs-lookup"><span data-stu-id="3ec16-115">BizTalk Processing</span></span>|<span data-ttu-id="3ec16-116">Sortie vers l’adaptateur</span><span class="sxs-lookup"><span data-stu-id="3ec16-116">Output to Adapter</span></span>|  
|----------------------|------------------------|-----------------------|  
|<span data-ttu-id="3ec16-117">Format de fichier plat IDOC</span><span class="sxs-lookup"><span data-stu-id="3ec16-117">Flat-file IDOC</span></span>|<span data-ttu-id="3ec16-118">**Heure de création de métadonnées**</span><span class="sxs-lookup"><span data-stu-id="3ec16-118">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="3ec16-119">1.  Définissez la propriété binding GenerateFlatFileCompatibleIdocSchema à **True**.</span><span class="sxs-lookup"><span data-stu-id="3ec16-119">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="3ec16-120">2.  Générer le schéma pour le **envoyer** opération un IDOC spécifique à l’aide [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3ec16-120">2.  Generate the schema for the **Send** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><br /> <span data-ttu-id="3ec16-121">**Moment de la conception d’orchestration**</span><span class="sxs-lookup"><span data-stu-id="3ec16-121">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="3ec16-122">1.  Réception de fichier plat IDOC</span><span class="sxs-lookup"><span data-stu-id="3ec16-122">1.  Receive flat-file IDOC</span></span><br /><span data-ttu-id="3ec16-123">2.  Utilisez le désassembleur de fichier plat pour convertir des IDOC de fichier plat IDOC XML en utilisant le schéma qui vient d’être généré.</span><span class="sxs-lookup"><span data-stu-id="3ec16-123">2.  Use flat-file disassembler to convert flat-file IDOC to XML IDOC using the schema just generated.</span></span><br /><span data-ttu-id="3ec16-124">3.  Action de **envoyer** opération.</span><span class="sxs-lookup"><span data-stu-id="3ec16-124">3.  Set the Action to **Send** operation.</span></span>|<span data-ttu-id="3ec16-125">Envoyer le message</span><span class="sxs-lookup"><span data-stu-id="3ec16-125">Send message</span></span>|  
|<span data-ttu-id="3ec16-126">Format de fichier plat IDOC</span><span class="sxs-lookup"><span data-stu-id="3ec16-126">Flat-file IDOC</span></span>|<span data-ttu-id="3ec16-127">**Heure de création de métadonnées**</span><span class="sxs-lookup"><span data-stu-id="3ec16-127">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="3ec16-128">1.  Définissez la propriété binding GenerateFlatFileCompatibleIdocSchema à **True**.</span><span class="sxs-lookup"><span data-stu-id="3ec16-128">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="3ec16-129">2.  Générer le schéma pour le **SendIdoc** opération à partir du nœud IDOC avec [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3ec16-129">2.  Generate the schema for the **SendIdoc** operation from the IDOC node using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><br /> <span data-ttu-id="3ec16-130">**Moment de la conception d’orchestration**</span><span class="sxs-lookup"><span data-stu-id="3ec16-130">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="3ec16-131">1.  Réception de fichier plat IDOC</span><span class="sxs-lookup"><span data-stu-id="3ec16-131">1.  Receive flat-file IDOC</span></span><br /><span data-ttu-id="3ec16-132">2.  Utiliser le désassembleur de fichier plat pour convertir le format de fichier plat IDOC en XML (dans ce cas, le message XML contient un \<idocData > nœud qui contient l’intégralité du message Idoc de fichier plat) en utilisant le schéma qui vient d’être généré.</span><span class="sxs-lookup"><span data-stu-id="3ec16-132">2.  Use flat-file disassembler to convert flat-file IDOC to XML (in this case, the XML message contains an \<idocData> node that contains the entire flat-file Idoc message) using the schema just generated.</span></span><br /><span data-ttu-id="3ec16-133">3.  Action de **SendIdoc** opération.</span><span class="sxs-lookup"><span data-stu-id="3ec16-133">3.  Set the Action to **SendIdoc** operation.</span></span>|<span data-ttu-id="3ec16-134">Message de SendIdoc</span><span class="sxs-lookup"><span data-stu-id="3ec16-134">SendIdoc message</span></span>|  
|<span data-ttu-id="3ec16-135">XML IDOC</span><span class="sxs-lookup"><span data-stu-id="3ec16-135">XML IDOC</span></span>|<span data-ttu-id="3ec16-136">**Heure de création de métadonnées**</span><span class="sxs-lookup"><span data-stu-id="3ec16-136">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="3ec16-137">-Générer le schéma pour le **envoyer** opération un IDOC spécifique à l’aide [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3ec16-137">-   Generate the schema for the **Send** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><br /> <span data-ttu-id="3ec16-138">**Moment de la conception d’orchestration**</span><span class="sxs-lookup"><span data-stu-id="3ec16-138">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="3ec16-139">1.  Recevoir des IDOC de XML.</span><span class="sxs-lookup"><span data-stu-id="3ec16-139">1.  Receive XML IDOC.</span></span><br /><span data-ttu-id="3ec16-140">2.  Action de **envoyer** opération.</span><span class="sxs-lookup"><span data-stu-id="3ec16-140">2.  Set the Action to **Send** operation.</span></span>|<span data-ttu-id="3ec16-141">Envoyer le message</span><span class="sxs-lookup"><span data-stu-id="3ec16-141">Send message</span></span>|  
|<span data-ttu-id="3ec16-142">IDOC de fichier plat dans le message XML</span><span class="sxs-lookup"><span data-stu-id="3ec16-142">Flat-file IDOC in XML message</span></span>|<span data-ttu-id="3ec16-143">**Heure de création de métadonnées**</span><span class="sxs-lookup"><span data-stu-id="3ec16-143">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="3ec16-144">-Générer le schéma pour le **SendIdoc** opération à partir du nœud IDOC avec [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3ec16-144">-   Generate the schema for the **SendIdoc** operation from the IDOC node using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><br /> <span data-ttu-id="3ec16-145">**Moment de la conception d’orchestration**</span><span class="sxs-lookup"><span data-stu-id="3ec16-145">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="3ec16-146">1.  Recevoir un message XML.</span><span class="sxs-lookup"><span data-stu-id="3ec16-146">1.  Receive XML message.</span></span><br /><span data-ttu-id="3ec16-147">2.  Action de **SendIdoc** opération.</span><span class="sxs-lookup"><span data-stu-id="3ec16-147">2.  Set the Action to **SendIdoc** operation.</span></span>|<span data-ttu-id="3ec16-148">Message de SendIdoc</span><span class="sxs-lookup"><span data-stu-id="3ec16-148">SendIdoc message</span></span>|  
  
## <a name="how-to-send-an-idoc-to-an-sap-system"></a><span data-ttu-id="3ec16-149">Comment envoyer un IDOC à un système SAP</span><span class="sxs-lookup"><span data-stu-id="3ec16-149">How to Send an IDOC to an SAP System</span></span>  
 <span data-ttu-id="3ec16-150">Une opération sur un système SAP à l’aide [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] implique les tâches de procédures décrites dans [blocs de construction pour créer des applications SAP](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-150">Performing an operation on an SAP system using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] involves procedural tasks described in [Building blocks to create SAP applications](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md).</span></span> <span data-ttu-id="3ec16-151">Pour envoyer un IDOC à un système SAP, ces tâches sont :</span><span class="sxs-lookup"><span data-stu-id="3ec16-151">To send an IDOC to an SAP system, these tasks are:</span></span>  
  
1.  <span data-ttu-id="3ec16-152">Créez un projet BizTalk et générer un schéma pour l’IDOC que vous souhaitez appeler dans le système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-152">Create a BizTalk project and generate schema for the IDOC you want to invoke in the SAP system.</span></span> <span data-ttu-id="3ec16-153">Lors de la génération du schéma Assurez-vous que vous définissez les propriétés de liaison requis, comme indiqué dans le tableau précédent.</span><span class="sxs-lookup"><span data-stu-id="3ec16-153">While generating the schema make sure you set the required binding properties, as listed in the previous table.</span></span> <span data-ttu-id="3ec16-154">Pour obtenir des instructions sur la façon de définir les propriétés de liaison, consultez [configurer les propriétés de liaison de l’adaptateur SAP](../../adapters-and-accelerators/adapter-sap/configure-the-binding-properties-for-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-154">For instructions on how to set the binding properties, see [Configure the binding properties for the SAP adapter](../../adapters-and-accelerators/adapter-sap/configure-the-binding-properties-for-the-sap-adapter.md).</span></span>  
  
2.  <span data-ttu-id="3ec16-155">Créer des messages dans le projet BizTalk pour envoyer et recevoir des messages à partir du système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-155">Create messages in the BizTalk project for sending and receiving messages from the SAP system.</span></span>  
  
3.  <span data-ttu-id="3ec16-156">Créez une orchestration pour envoyer un IDOC à un système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-156">Create an orchestration to send an IDOC to an SAP system.</span></span>  
  
4.  <span data-ttu-id="3ec16-157">Générez et déployez le projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3ec16-157">Build and deploy the BizTalk project.</span></span>  
  
5.  <span data-ttu-id="3ec16-158">Configurer l’application en créant physique d’envoi et ports de réception BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3ec16-158">Configure the BizTalk application by creating physical send and receive ports.</span></span>  
  
6.  <span data-ttu-id="3ec16-159">Démarrez l’application BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3ec16-159">Start the BizTalk application.</span></span>  
  
 <span data-ttu-id="3ec16-160">Cette rubrique fournit des instructions pour effectuer ces tâches.</span><span class="sxs-lookup"><span data-stu-id="3ec16-160">This topic provides instructions to perform these tasks.</span></span>  
  
## <a name="sample-based-on-this-topic"></a><span data-ttu-id="3ec16-161">Exemple basé sur cette rubrique</span><span class="sxs-lookup"><span data-stu-id="3ec16-161">Sample Based On This Topic</span></span>  
 <span data-ttu-id="3ec16-162">Un exemple, IDOCSend, en fonction de cette rubrique est également fourni avec le [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3ec16-162">A sample, IDOCSend, based on this topic is also provided with the [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span></span> <span data-ttu-id="3ec16-163">Pour plus d’informations, consultez [exemples pour l’adaptateur SAP ](../../adapters-and-accelerators/adapter-sap/samples-for-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-163">For more information, see [Samples for the SAP Adapter ](../../adapters-and-accelerators/adapter-sap/samples-for-the-sap-adapter.md).</span></span>  
  
## <a name="generating-schema"></a><span data-ttu-id="3ec16-164">Génération du schéma</span><span class="sxs-lookup"><span data-stu-id="3ec16-164">Generating Schema</span></span>  
 <span data-ttu-id="3ec16-165">Cette rubrique montre comment envoyer un IDOC à un système SAP en générant le schéma pour le *envoyer* opération sous \IDOC\ORDERS\ORDERS05\ORDERS05. V3(620) IDOC.</span><span class="sxs-lookup"><span data-stu-id="3ec16-165">This topic demonstrates how to send an IDOC to an SAP system by generating schema for the *Send* operation under \IDOC\ORDERS\ORDERS05\ORDERS05.V3(620) IDOC.</span></span> <span data-ttu-id="3ec16-166">Consultez [Parcourir, rechercher et obtenir des métadonnées pour des opérations IDOC dans SAP](../../adapters-and-accelerators/adapter-sap/browse-search-and-get-metadata-for-idoc-operations-in-sap.md) pour plus d’informations sur la génération de schéma pour un IDOC particulier.</span><span class="sxs-lookup"><span data-stu-id="3ec16-166">See [Browse, search and get metadata for IDOC operations in SAP](../../adapters-and-accelerators/adapter-sap/browse-search-and-get-metadata-for-idoc-operations-in-sap.md) for more information about how to generate schema for a particular IDOC.</span></span>  
  
## <a name="defining-messages-and-message-types"></a><span data-ttu-id="3ec16-167">Définition des Messages et les Types de messages</span><span class="sxs-lookup"><span data-stu-id="3ec16-167">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="3ec16-168">Le schéma que vous avez généré précédemment décrit les « types » requis pour les messages dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="3ec16-168">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="3ec16-169">Un message est généralement une variable, le type est défini par le schéma correspondant.</span><span class="sxs-lookup"><span data-stu-id="3ec16-169">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="3ec16-170">Vous devez lier le schéma généré à la première étape pour les messages à partir de la vue de l’Orchestration du projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3ec16-170">You must link the schema you generated in the first step to the messages from the Orchestration view of the BizTalk project.</span></span>  
  
 <span data-ttu-id="3ec16-171">Cette rubrique, vous devez créer deux messages : un pour envoyer un IDOC au système SAP et l’autre pour recevoir une réponse.</span><span class="sxs-lookup"><span data-stu-id="3ec16-171">For this topic, you must create two messages—one to send an IDOC to the SAP system and the other to receive a response.</span></span>  
  
 <span data-ttu-id="3ec16-172">Procédez comme suit pour créer des messages et les lier au schéma :</span><span class="sxs-lookup"><span data-stu-id="3ec16-172">Perform the following steps to create messages and link them to the schema:</span></span>  
  
#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="3ec16-173">Pour créer des messages et le lier au schéma</span><span class="sxs-lookup"><span data-stu-id="3ec16-173">To create messages and link to schema</span></span>  
  
1.  <span data-ttu-id="3ec16-174">Ouvrez la vue orchestration au projet BizTalk, si ce n’est pas déjà ouvert.</span><span class="sxs-lookup"><span data-stu-id="3ec16-174">Open the orchestration view the BizTalk project, if not already open.</span></span> <span data-ttu-id="3ec16-175">Cliquez sur **vue**, pointez sur **autres fenêtres**, puis cliquez sur **Vue Orchestration**.</span><span class="sxs-lookup"><span data-stu-id="3ec16-175">Click **View**, point to **Other Windows**, and click **Orchestration View**.</span></span>  
  
2.  <span data-ttu-id="3ec16-176">Dans le **Vue Orchestration**, avec le bouton droit **Messages**, puis cliquez sur **nouveau Message**.</span><span class="sxs-lookup"><span data-stu-id="3ec16-176">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  
  
3.  <span data-ttu-id="3ec16-177">Avec le bouton droit le nouvellement créer le message et sélectionnez **fenêtre Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="3ec16-177">Right-click the newly create message and select **Properties Window**.</span></span>  
  
4.  <span data-ttu-id="3ec16-178">Dans le **propriétés** volet pour **Message_1**, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="3ec16-178">In the **Properties** pane for **Message_1**, do the following:</span></span>  
  
    |<span data-ttu-id="3ec16-179">Utiliser</span><span class="sxs-lookup"><span data-stu-id="3ec16-179">Use this</span></span>|<span data-ttu-id="3ec16-180">Pour effectuer cette opération</span><span class="sxs-lookup"><span data-stu-id="3ec16-180">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="3ec16-181">Identificateur</span><span class="sxs-lookup"><span data-stu-id="3ec16-181">Identifier</span></span>|<span data-ttu-id="3ec16-182">Type **IDOCSend**.</span><span class="sxs-lookup"><span data-stu-id="3ec16-182">Type **IDOCSend**.</span></span>|  
    |<span data-ttu-id="3ec16-183">Type de message</span><span class="sxs-lookup"><span data-stu-id="3ec16-183">Message Type</span></span>|<span data-ttu-id="3ec16-184">Dans la liste déroulante, développez **schémas**, puis sélectionnez *IDOCSend.SAPBindingSchema3*, où *IDOCSend* est le nom de votre projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3ec16-184">From the drop-down list, expand **Schemas**, and select *IDOCSend.SAPBindingSchema3*, where *IDOCSend* is the name of your BizTalk project.</span></span> <span data-ttu-id="3ec16-185">*SAPBindingSchema3* est le schéma généré pour l’opération d’envoi.</span><span class="sxs-lookup"><span data-stu-id="3ec16-185">*SAPBindingSchema3* is the schema generated for the Send operation.</span></span>|  
  
5.  <span data-ttu-id="3ec16-186">Répétez l’étape précédente pour créer un nouveau message.</span><span class="sxs-lookup"><span data-stu-id="3ec16-186">Repeat the previous step to create a new message.</span></span> <span data-ttu-id="3ec16-187">Dans le **propriétés** volet pour le nouveau message, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="3ec16-187">In the **Properties** pane for the new message, do the following:</span></span>  
  
    |<span data-ttu-id="3ec16-188">Utiliser</span><span class="sxs-lookup"><span data-stu-id="3ec16-188">Use this</span></span>|<span data-ttu-id="3ec16-189">Pour effectuer cette opération</span><span class="sxs-lookup"><span data-stu-id="3ec16-189">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="3ec16-190">Identificateur</span><span class="sxs-lookup"><span data-stu-id="3ec16-190">Identifier</span></span>|<span data-ttu-id="3ec16-191">Type **IDOCResponse**.</span><span class="sxs-lookup"><span data-stu-id="3ec16-191">Type **IDOCResponse**.</span></span>|  
    |<span data-ttu-id="3ec16-192">Type de message</span><span class="sxs-lookup"><span data-stu-id="3ec16-192">Message Type</span></span>|<span data-ttu-id="3ec16-193">Dans la liste déroulante, développez **schémas**, puis sélectionnez *IDOCSend.SAPBindingSchema4*.</span><span class="sxs-lookup"><span data-stu-id="3ec16-193">From the drop-down list, expand **Schemas**, and select *IDOCSend.SAPBindingSchema4*.</span></span>|  
  
## <a name="setting-up-the-orchestration"></a><span data-ttu-id="3ec16-194">Configuration de l’Orchestration</span><span class="sxs-lookup"><span data-stu-id="3ec16-194">Setting up the Orchestration</span></span>  
 <span data-ttu-id="3ec16-195">Vous devez créer une orchestration BizTalk à utiliser [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] pour envoyer des IDOC à un système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-195">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for sending IDOCs to an SAP system.</span></span> <span data-ttu-id="3ec16-196">Dans cette orchestration, vous supprimez un fichier plat IDOC à une emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="3ec16-196">In this orchestration, you will be dropping a flat-file IDOC at a defined receive location.</span></span> <span data-ttu-id="3ec16-197">Ce fichier est converti en un message de demande XML à l’aide d’un désassembleur de fichier plat.</span><span class="sxs-lookup"><span data-stu-id="3ec16-197">This file is converted into an XML request message using a flat-file disassembler.</span></span> <span data-ttu-id="3ec16-198">Le [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] consomme ce message et le transmet au système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-198">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] consumes this message and passes it on to the SAP system.</span></span> <span data-ttu-id="3ec16-199">La réponse avec un GUID est reçue à partir de SAP et est enregistrée dans un autre emplacement.</span><span class="sxs-lookup"><span data-stu-id="3ec16-199">The response with a GUID is received from SAP and is saved at another location.</span></span> <span data-ttu-id="3ec16-200">Vous devez inclure l’envoi et reçoivent des formes pour envoyer des IDOC au système SAP et de recevoir des réponses.</span><span class="sxs-lookup"><span data-stu-id="3ec16-200">You must include send and receive shapes to send IDOCs to the SAP system and receive responses.</span></span> <span data-ttu-id="3ec16-201">Vous devez également inclure un désassembleur de fichier plat pour convertir un fichier plat dans un fichier XML.</span><span class="sxs-lookup"><span data-stu-id="3ec16-201">You must also include a flat-file disassembler to convert a flat file into an XML file.</span></span> <span data-ttu-id="3ec16-202">Contient une orchestration classique pour envoyer et IDOC à un système SAP :</span><span class="sxs-lookup"><span data-stu-id="3ec16-202">A typical orchestration to send and IDOC to an SAP system would contain:</span></span>  
  
-   <span data-ttu-id="3ec16-203">Envoyer et recevoir des formes pour envoyer des messages au système SAP et de recevoir des réponses.</span><span class="sxs-lookup"><span data-stu-id="3ec16-203">Send and Receive shapes to send messages to the SAP system and receive responses.</span></span>  
  
-   <span data-ttu-id="3ec16-204">Unidirectionnel port de réception pour recevoir des IDOC de fichier plat à envoyer au système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-204">A one-way receive port to receive flat-file IDOCs to send to the SAP system.</span></span>  
  
-   <span data-ttu-id="3ec16-205">Un désassembleur de fichier plat pour convertir le format de fichier plat IDOC dans un fichier XML.</span><span class="sxs-lookup"><span data-stu-id="3ec16-205">A flat-file disassembler to convert the flat-file IDOC into an XML file.</span></span>  
  
-   <span data-ttu-id="3ec16-206">Un double port d’envoi pour envoyer l’IDOC au système SAP et de recevoir des réponses.</span><span class="sxs-lookup"><span data-stu-id="3ec16-206">A two-way send port to send the IDOC to the SAP system and receive responses.</span></span>  
  
-   <span data-ttu-id="3ec16-207">Un port d’envoi unidirectionnel pour envoyer les réponses à partir du système SAP dans un dossier.</span><span class="sxs-lookup"><span data-stu-id="3ec16-207">A one-way send port to send the responses from the SAP system to a folder.</span></span>  
  
 <span data-ttu-id="3ec16-208">Un exemple d’orchestration se présente comme suit :</span><span class="sxs-lookup"><span data-stu-id="3ec16-208">A sample orchestration would look like the following:</span></span>  
  
 <span data-ttu-id="3ec16-209">![Orchestration permettant d’envoyer des IDOC à SAP](../../adapters-and-accelerators/adapter-sap/media/db1490c8-da52-4af3-8a4f-d93bd815025d.gif "db1490c8-da52-4af3-8a4f-d93bd815025d")</span><span class="sxs-lookup"><span data-stu-id="3ec16-209">![Orchestration to send IDOCs to SAP](../../adapters-and-accelerators/adapter-sap/media/db1490c8-da52-4af3-8a4f-d93bd815025d.gif "db1490c8-da52-4af3-8a4f-d93bd815025d")</span></span>  
  
### <a name="adding-message-shapes"></a><span data-ttu-id="3ec16-210">Ajouter des formes de Message</span><span class="sxs-lookup"><span data-stu-id="3ec16-210">Adding Message Shapes</span></span>  
 <span data-ttu-id="3ec16-211">Assurez-vous que vous spécifiez les propriétés suivantes pour chacune des formes de message.</span><span class="sxs-lookup"><span data-stu-id="3ec16-211">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="3ec16-212">Les noms répertoriés dans le *forme* colonne sont les noms des formes de message, tel qu’affiché dans l’orchestration ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="3ec16-212">The names listed in the *Shape* column are the names of the message shapes as displayed in the orchestration above.</span></span>  
  
|<span data-ttu-id="3ec16-213">Graphique à base de formes</span><span class="sxs-lookup"><span data-stu-id="3ec16-213">Shape</span></span>|<span data-ttu-id="3ec16-214">Type de forme</span><span class="sxs-lookup"><span data-stu-id="3ec16-214">Shape Type</span></span>|<span data-ttu-id="3ec16-215">Propriétés</span><span class="sxs-lookup"><span data-stu-id="3ec16-215">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="3ec16-216">ReceiveFile</span><span class="sxs-lookup"><span data-stu-id="3ec16-216">ReceiveFile</span></span>|<span data-ttu-id="3ec16-217">Recevoir</span><span class="sxs-lookup"><span data-stu-id="3ec16-217">Receive</span></span>|<span data-ttu-id="3ec16-218">-Définissez **nom** à *ReceiveFile*</span><span class="sxs-lookup"><span data-stu-id="3ec16-218">-   Set **Name** to *ReceiveFile*</span></span><br /><span data-ttu-id="3ec16-219">-Définissez **activer** à *True*</span><span class="sxs-lookup"><span data-stu-id="3ec16-219">-   Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="3ec16-220">SendToLOB</span><span class="sxs-lookup"><span data-stu-id="3ec16-220">SendToLOB</span></span>|<span data-ttu-id="3ec16-221">Send</span><span class="sxs-lookup"><span data-stu-id="3ec16-221">Send</span></span>|<span data-ttu-id="3ec16-222">-Définissez **nom** à *SendToLOB*</span><span class="sxs-lookup"><span data-stu-id="3ec16-222">-   Set **Name** to *SendToLOB*</span></span>|  
|<span data-ttu-id="3ec16-223">Réception réponse</span><span class="sxs-lookup"><span data-stu-id="3ec16-223">ReceiveResponse</span></span>|<span data-ttu-id="3ec16-224">Recevoir</span><span class="sxs-lookup"><span data-stu-id="3ec16-224">Receive</span></span>|<span data-ttu-id="3ec16-225">-Définissez **nom** à *ReceiveResponse*</span><span class="sxs-lookup"><span data-stu-id="3ec16-225">-   Set **Name** to *ReceiveResponse*</span></span><br /><span data-ttu-id="3ec16-226">-Définissez **activer** à *False*</span><span class="sxs-lookup"><span data-stu-id="3ec16-226">-   Set **Activate** to *False*</span></span>|  
|<span data-ttu-id="3ec16-227">SendResponse</span><span class="sxs-lookup"><span data-stu-id="3ec16-227">SendResponse</span></span>|<span data-ttu-id="3ec16-228">Send</span><span class="sxs-lookup"><span data-stu-id="3ec16-228">Send</span></span>|<span data-ttu-id="3ec16-229">-Définissez **nom** à *SendResponse*</span><span class="sxs-lookup"><span data-stu-id="3ec16-229">-   Set **Name** to *SendResponse*</span></span>|  
  
### <a name="adding-ports"></a><span data-ttu-id="3ec16-230">Ajout de Ports</span><span class="sxs-lookup"><span data-stu-id="3ec16-230">Adding Ports</span></span>  
 <span data-ttu-id="3ec16-231">Assurez-vous que vous spécifiez les propriétés suivantes pour chacun des ports logiques.</span><span class="sxs-lookup"><span data-stu-id="3ec16-231">Make sure you specify the following properties for each of the logical ports.</span></span> <span data-ttu-id="3ec16-232">Les noms répertoriés dans le *Port* colonne sont les noms des ports que ceux affichés dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="3ec16-232">The names listed in the *Port* column are the names of the ports as displayed in the orchestration.</span></span>  
  
|<span data-ttu-id="3ec16-233">Port</span><span class="sxs-lookup"><span data-stu-id="3ec16-233">Port</span></span>|<span data-ttu-id="3ec16-234">Propriétés</span><span class="sxs-lookup"><span data-stu-id="3ec16-234">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="3ec16-235">Fichier</span><span class="sxs-lookup"><span data-stu-id="3ec16-235">FileIn</span></span>|<span data-ttu-id="3ec16-236">-Définissez **identificateur** à *FileIn*</span><span class="sxs-lookup"><span data-stu-id="3ec16-236">-   Set **Identifier** to *FileIn*</span></span><br /><span data-ttu-id="3ec16-237">-Définissez **Type** à *FileInType*</span><span class="sxs-lookup"><span data-stu-id="3ec16-237">-   Set **Type** to *FileInType*</span></span><br /><span data-ttu-id="3ec16-238">-Définissez **modèle de Communication** à *à sens unique*</span><span class="sxs-lookup"><span data-stu-id="3ec16-238">-   Set **Communication Pattern** to *One-Way*</span></span><br /><span data-ttu-id="3ec16-239">-Définissez **Direction de Communication** à *de réception*</span><span class="sxs-lookup"><span data-stu-id="3ec16-239">-   Set **Communication Direction** to *Receive*</span></span>|  
|<span data-ttu-id="3ec16-240">LOBPort</span><span class="sxs-lookup"><span data-stu-id="3ec16-240">LOBPort</span></span>|<span data-ttu-id="3ec16-241">-Définissez **identificateur** à *LOBPort*</span><span class="sxs-lookup"><span data-stu-id="3ec16-241">-   Set **Identifier** to *LOBPort*</span></span><br /><span data-ttu-id="3ec16-242">-Définissez **Type** à *LOBPortType*</span><span class="sxs-lookup"><span data-stu-id="3ec16-242">-   Set **Type** to *LOBPortType*</span></span><br /><span data-ttu-id="3ec16-243">-Définissez **modèle de Communication** à *demande-réponse*</span><span class="sxs-lookup"><span data-stu-id="3ec16-243">-   Set **Communication Pattern** to *Request-Response*</span></span><br /><span data-ttu-id="3ec16-244">-Définissez **Direction de Communication** à *envoi / réception*</span><span class="sxs-lookup"><span data-stu-id="3ec16-244">-   Set **Communication Direction** to *Send-Receive*</span></span>|  
|<span data-ttu-id="3ec16-245">SaveResponse</span><span class="sxs-lookup"><span data-stu-id="3ec16-245">SaveResponse</span></span>|<span data-ttu-id="3ec16-246">-Définissez **identificateur** à *SaveResponse*</span><span class="sxs-lookup"><span data-stu-id="3ec16-246">-   Set **Identifier** to *SaveResponse*</span></span><br /><span data-ttu-id="3ec16-247">-Définissez **Type** à *SaveResponseType*</span><span class="sxs-lookup"><span data-stu-id="3ec16-247">-   Set **Type** to *SaveResponseType*</span></span><br /><span data-ttu-id="3ec16-248">-Définissez **modèle de Communication** à *à sens unique*</span><span class="sxs-lookup"><span data-stu-id="3ec16-248">-   Set **Communication Pattern** to *One-Way*</span></span><br /><span data-ttu-id="3ec16-249">-Définissez **Direction de Communication** à *envoyer*</span><span class="sxs-lookup"><span data-stu-id="3ec16-249">-   Set **Communication Direction** to *Send*</span></span>|  
  
### <a name="adding-a-flat-file-disassembler"></a><span data-ttu-id="3ec16-250">Ajout d’un désassembleur de fichier plat</span><span class="sxs-lookup"><span data-stu-id="3ec16-250">Adding a Flat File Disassembler</span></span>  
 <span data-ttu-id="3ec16-251">Vous devez ajouter un désassembleur de fichier plat à votre orchestration pour convertir le format de fichier plat IDOC dans un format XML.</span><span class="sxs-lookup"><span data-stu-id="3ec16-251">You must add a flat file disassembler to your orchestration to convert the flat-file IDOC into an XML format.</span></span>  
  
##### <a name="to-add-a-flat-file-disassembler"></a><span data-ttu-id="3ec16-252">Pour ajouter un désassembleur de fichier plat</span><span class="sxs-lookup"><span data-stu-id="3ec16-252">To add a flat file disassembler</span></span>  
  
1.  <span data-ttu-id="3ec16-253">Cliquez sur le projet BizTalk, pointez sur **ajouter**, puis sélectionnez **un nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="3ec16-253">Right-click the BizTalk project, point to **Add**, and select **New Item**.</span></span>  
  
2.  <span data-ttu-id="3ec16-254">À partir de la boîte de dialogue, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="3ec16-254">From the dialog box, do the following:</span></span>  
  
    |<span data-ttu-id="3ec16-255">Utiliser</span><span class="sxs-lookup"><span data-stu-id="3ec16-255">Use this</span></span>|<span data-ttu-id="3ec16-256">Pour effectuer cette opération</span><span class="sxs-lookup"><span data-stu-id="3ec16-256">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="3ec16-257">Catégories</span><span class="sxs-lookup"><span data-stu-id="3ec16-257">Categories</span></span>|<span data-ttu-id="3ec16-258">Fichiers de pipeline</span><span class="sxs-lookup"><span data-stu-id="3ec16-258">Pipeline Files</span></span>|  
    |<span data-ttu-id="3ec16-259">Modèles Visual Studio installés</span><span class="sxs-lookup"><span data-stu-id="3ec16-259">Visual Studio installed templates</span></span>|<span data-ttu-id="3ec16-260">Pipeline de réception</span><span class="sxs-lookup"><span data-stu-id="3ec16-260">Receive Pipeline</span></span>|  
    |<span data-ttu-id="3ec16-261">Nom</span><span class="sxs-lookup"><span data-stu-id="3ec16-261">Name</span></span>|<span data-ttu-id="3ec16-262">IDOCReceive</span><span class="sxs-lookup"><span data-stu-id="3ec16-262">IDOCReceive</span></span>|  
  
3.  <span data-ttu-id="3ec16-263">Le Concepteur de Pipeline s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="3ec16-263">This opens the Pipeline Designer.</span></span> <span data-ttu-id="3ec16-264">À partir de la **composants de Pipeline BizTalk** boîte à outils, faites glisser le **désassembleur de fichier plat** composant de pipeline dans le **désassembler** étape du pipeline de réception.</span><span class="sxs-lookup"><span data-stu-id="3ec16-264">From the **BizTalk Pipeline Components** toolbox, drag the **Flat file disassembler** pipeline component into the **Disassemble** stage of the receive pipeline.</span></span>  
  
4.  <span data-ttu-id="3ec16-265">À partir de la **propriétés du composant de Pipeline** afficher, spécifiez une valeur pour le **schéma de Document** propriété.</span><span class="sxs-lookup"><span data-stu-id="3ec16-265">From the **Pipeline Component Properties** view, specify a value for the **Document Schema** property.</span></span> <span data-ttu-id="3ec16-266">Dans la liste déroulante. Veillez à que sélectionner le schéma correspondant à l’opération d’envoi IDOC.</span><span class="sxs-lookup"><span data-stu-id="3ec16-266">From the drop-down make sure you select the schema corresponding to the IDOC send operation.</span></span>  
  
## <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="3ec16-267">Spécifier des Messages pour les formes d’Action et de se connecter à des Ports</span><span class="sxs-lookup"><span data-stu-id="3ec16-267">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="3ec16-268">Le tableau suivant indique les propriétés et leurs valeurs à définir pour spécifier les messages de formes d’action et les lier aux ports.</span><span class="sxs-lookup"><span data-stu-id="3ec16-268">The following table specifies the properties and their values to be set to specify messages for action shapes and linking them to the ports.</span></span> <span data-ttu-id="3ec16-269">Les noms répertoriés dans le *forme* colonne sont les noms des formes de message, tel qu’affiché dans l’orchestration ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="3ec16-269">The names listed in the *Shape* column are the names of the message shapes as displayed in the orchestration above.</span></span>  
  
|<span data-ttu-id="3ec16-270">Graphique à base de formes</span><span class="sxs-lookup"><span data-stu-id="3ec16-270">Shape</span></span>|<span data-ttu-id="3ec16-271">Propriétés</span><span class="sxs-lookup"><span data-stu-id="3ec16-271">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="3ec16-272">ReceiveFile</span><span class="sxs-lookup"><span data-stu-id="3ec16-272">ReceiveFile</span></span>|<span data-ttu-id="3ec16-273">-Définissez **Message** à *IDOCSend*</span><span class="sxs-lookup"><span data-stu-id="3ec16-273">-   Set **Message** to *IDOCSend*</span></span><br /><span data-ttu-id="3ec16-274">-Définissez **opération** à *FileIn.SendIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="3ec16-274">-   Set **Operation** to *FileIn.SendIDOC.Request*</span></span>|  
|<span data-ttu-id="3ec16-275">SendToLob</span><span class="sxs-lookup"><span data-stu-id="3ec16-275">SendToLob</span></span>|<span data-ttu-id="3ec16-276">-Définissez **Message** à *IDOCSend*</span><span class="sxs-lookup"><span data-stu-id="3ec16-276">-   Set **Message** to *IDOCSend*</span></span><br /><span data-ttu-id="3ec16-277">-Définissez **opération** à *LOBPort.SendIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="3ec16-277">-   Set **Operation** to *LOBPort.SendIDOC.Request*</span></span>|  
|<span data-ttu-id="3ec16-278">Réception réponse</span><span class="sxs-lookup"><span data-stu-id="3ec16-278">ReceiveResponse</span></span>|<span data-ttu-id="3ec16-279">-Définissez **Message** à *IDOCResponse*</span><span class="sxs-lookup"><span data-stu-id="3ec16-279">-   Set **Message** to *IDOCResponse*</span></span><br /><span data-ttu-id="3ec16-280">-Définissez **opération** à *LOBPort.SendIDOC.Response*</span><span class="sxs-lookup"><span data-stu-id="3ec16-280">-   Set **Operation** to *LOBPort.SendIDOC.Response*</span></span>|  
|<span data-ttu-id="3ec16-281">SendResponse</span><span class="sxs-lookup"><span data-stu-id="3ec16-281">SendResponse</span></span>|<span data-ttu-id="3ec16-282">-Définissez **Message** à *IDOCResponse*</span><span class="sxs-lookup"><span data-stu-id="3ec16-282">-   Set **Message** to *IDOCResponse*</span></span><br /><span data-ttu-id="3ec16-283">-Définissez **opération** à *SaveResponse.SendIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="3ec16-283">-   Set **Operation** to *SaveResponse.SendIDOC.Request*</span></span>|  
  
 <span data-ttu-id="3ec16-284">Une fois que vous avez défini ces propriétés, les formes de message et les ports sont connectés et l’orchestration est terminée.</span><span class="sxs-lookup"><span data-stu-id="3ec16-284">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  
  
 <span data-ttu-id="3ec16-285">Vous devez maintenant générer la solution BizTalk et déployez-le dans un [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3ec16-285">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="3ec16-286">Pour plus d’informations, consultez [génération et exécution des Orchestrations](../../core/building-and-running-orchestrations.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-286">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md).</span></span>
  
## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="3ec16-287">Configuration de l’Application BizTalk</span><span class="sxs-lookup"><span data-stu-id="3ec16-287">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="3ec16-288">Après avoir déployé le projet BizTalk, l’orchestration que vous avez créé précédemment est répertoriée sous le **Orchestrations** volet de la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="3ec16-288">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="3ec16-289">Vous devez utiliser la console Administration de BizTalk Server pour configurer l’application.</span><span class="sxs-lookup"><span data-stu-id="3ec16-289">You must use the BizTalk Server Administration console to configure the application.</span></span> <span data-ttu-id="3ec16-290">Pour plus d’informations sur la configuration d’une application, consultez [comment configurer une Application](../../core/how-to-configure-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-290">For more information about configuring an application, see [How to Configure an Application](../../core/how-to-configure-an-application.md).</span></span>
  
 <span data-ttu-id="3ec16-291">Configuration d’une application implique :</span><span class="sxs-lookup"><span data-stu-id="3ec16-291">Configuring an application involves:</span></span>  
  
-   <span data-ttu-id="3ec16-292">Sélection d’un hôte de l’application.</span><span class="sxs-lookup"><span data-stu-id="3ec16-292">Selecting a host for the application.</span></span>  
  
-   <span data-ttu-id="3ec16-293">Mappage de ports que vous avez créé dans l’orchestration aux ports physiques dans la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="3ec16-293">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="3ec16-294">Pour cette orchestration, vous devez :</span><span class="sxs-lookup"><span data-stu-id="3ec16-294">For this orchestration you must:</span></span>  
  
    -   <span data-ttu-id="3ec16-295">Définir un emplacement sur le disque dur et un port de fichier correspondant où vous allez déposer un message de demande.</span><span class="sxs-lookup"><span data-stu-id="3ec16-295">Define a location on the hard disk and a corresponding file port where you will drop a request message.</span></span> <span data-ttu-id="3ec16-296">L’orchestration BizTalk consommer le message de demande et l’envoyer au système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-296">The BizTalk orchestration will consume the request message and send it to the SAP system.</span></span>  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="3ec16-297">Pour le pipeline XMLReceive pour ce port, veillez à sélectionner ***IDOCReceive***.</span><span class="sxs-lookup"><span data-stu-id="3ec16-297">For the XMLReceive pipeline for this port, make sure you select ***IDOCReceive***.</span></span> <span data-ttu-id="3ec16-298">Vous avez créé ce pipeline dans le cadre du projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3ec16-298">You created this pipeline as part of the BizTalk project.</span></span>  
  
    -   <span data-ttu-id="3ec16-299">Définir un emplacement sur le disque dur et un port de fichier correspondant dans lequel l’orchestration BizTalk supprimera le message de réponse contenant la réponse du système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-299">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the response message containing the response from the SAP system.</span></span>  
  
    -   <span data-ttu-id="3ec16-300">Définir un port d’envoi WCF-Custom ou WCF-SAP physique pour envoyer des messages au système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-300">Define a physical WCF-Custom or WCF-SAP send port to send messages to the SAP system.</span></span> <span data-ttu-id="3ec16-301">Vous devez également spécifier l’action dans le port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="3ec16-301">You must also specify the action in the send port.</span></span> <span data-ttu-id="3ec16-302">Pour plus d’informations sur la création de ports, consultez [configurer manuellement une liaison de port physique à l’adaptateur SAP](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-302">For information about how to create ports, see [Manually configure a physical port binding to the SAP adapter](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md).</span></span>
  
        > [!NOTE]
        >  <span data-ttu-id="3ec16-303">Vous pouvez également définir le *AutoConfirmSentIdocs* liaison de la propriété à valider automatiquement IDOC dans le système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-303">You can also set the *AutoConfirmSentIdocs* binding property to automatically commit IDOCs into the SAP system.</span></span> <span data-ttu-id="3ec16-304">Si vous procédez ainsi, vous n’avez pas besoin d’appeler explicitement l’opération RfcConfirmTransID pour valider l’IDOC.</span><span class="sxs-lookup"><span data-stu-id="3ec16-304">If you do so, you do not need to explicitly call the RfcConfirmTransID operation to commit the IDOCs.</span></span> <span data-ttu-id="3ec16-305">Pour plus d’informations sur la propriété de liaison, consultez [en savoir plus sur l’adaptateur BizTalk pour mySAP Business Suite liaison propriétés](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-305">For more information about the binding property, see [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span></span> <span data-ttu-id="3ec16-306">Pour plus d’informations sur l’opération RfcConfirmTransID, consultez [opérations sur tRFCs dans SAP](../../adapters-and-accelerators/adapter-sap/operations-on-trfcs-in-sap.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-306">For more information about the RfcConfirmTransID operation, see [Operations on tRFCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-trfcs-in-sap.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="3ec16-307">Génération de schéma à l’aide du [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] crée également un fichier de liaison contenant des informations sur les ports et les actions à définir pour ces ports.</span><span class="sxs-lookup"><span data-stu-id="3ec16-307">Generating the schema using the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] also creates a binding file containing information about the ports and the actions to be set for those ports.</span></span> <span data-ttu-id="3ec16-308">Vous pouvez importer ce fichier de liaison à partir de la Console Administration de BizTalk pour créer des ports d’envoi (pour les appels sortants) ou de ports de réception (d’appels entrants).</span><span class="sxs-lookup"><span data-stu-id="3ec16-308">You can import this binding file from the BizTalk Administration Console to create send ports (for outbound calls) or receive ports (for inbound calls).</span></span> <span data-ttu-id="3ec16-309">Pour plus d’informations, consultez [configurer une liaison de port physique à l’aide d’un fichier de liaison de port à SAP](../../adapters-and-accelerators/adapter-sap/configure-a-physical-port-binding-using-a-port-binding-file-to-sap.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-309">For more information, see [Configure a physical port binding using a port binding file to SAP](../../adapters-and-accelerators/adapter-sap/configure-a-physical-port-binding-using-a-port-binding-file-to-sap.md).</span></span>
  
## <a name="starting-the-application"></a><span data-ttu-id="3ec16-310">Démarrage de l’Application</span><span class="sxs-lookup"><span data-stu-id="3ec16-310">Starting the Application</span></span>  
 <span data-ttu-id="3ec16-311">Vous devez démarrer l’application BizTalk pour envoyer un IDOC au système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-311">You must start the BizTalk application for sending an IDOC to the SAP system.</span></span> <span data-ttu-id="3ec16-312">Pour obtenir des instructions sur le démarrage d’une application BizTalk, consultez [comment démarrer une Orchestration](../../core/how-to-start-an-orchestration.md), ou [comment démarrer une application](../../core/how-to-start-and-stop-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-312">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md), or [How to start an application](../../core/how-to-start-and-stop-a-biztalk-application.md).</span></span>
  
 <span data-ttu-id="3ec16-313">À ce stade, vérifiez que :</span><span class="sxs-lookup"><span data-stu-id="3ec16-313">At this stage, make sure:</span></span>  
  
-   <span data-ttu-id="3ec16-314">Le fichier de port de réception pour recevoir des messages de demande pour l’orchestration est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="3ec16-314">The FILE receive port to receive request messages for the orchestration is running.</span></span>  
  
-   <span data-ttu-id="3ec16-315">Le port d’envoi FILE pour recevoir les messages de réponse à partir de l’orchestration est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="3ec16-315">The FILE send port to receive the response messages from the orchestration is running.</span></span>  
  
-   <span data-ttu-id="3ec16-316">Le port d’envoi WCF-Custom ou WCF-SAP pour envoyer des messages au système SAP est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="3ec16-316">The WCF-Custom or WCF-SAP send port to send messages to the SAP system is running.</span></span>  
  
-   <span data-ttu-id="3ec16-317">L’orchestration BizTalk pour l’opération est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="3ec16-317">The BizTalk orchestration for the operation is running.</span></span>  
  
## <a name="executing-the-operation"></a><span data-ttu-id="3ec16-318">L’exécution de l’opération</span><span class="sxs-lookup"><span data-stu-id="3ec16-318">Executing the Operation</span></span>  
 <span data-ttu-id="3ec16-319">Après avoir exécuté l’application, vous devez supprimer un message de demande pour l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="3ec16-319">After you run the application, you must drop a request message for the orchestration.</span></span> <span data-ttu-id="3ec16-320">Pour cet exemple, nous supprimera un fichier plat IDOC à la période définie par emplacement de réception FILE.</span><span class="sxs-lookup"><span data-stu-id="3ec16-320">For this example, we will drop a flat-file IDOC at the defined FILE receive location.</span></span> <span data-ttu-id="3ec16-321">Les actions suivantes sont exécutées après avoir supprimé le message de demande :</span><span class="sxs-lookup"><span data-stu-id="3ec16-321">The following actions take place after you drop the request message:</span></span>  
  
-   <span data-ttu-id="3ec16-322">L’orchestration récupère cet IDOC de fichier plat et le convertit en message de requête XML, le schéma pour lequel est conforme au schéma que vous avez généré précédemment.</span><span class="sxs-lookup"><span data-stu-id="3ec16-322">The orchestration picks this flat-file IDOC and converts it into XML request message, the schema for which conforms to the schema you generated earlier.</span></span>  
  
-   <span data-ttu-id="3ec16-323">Si le message de demande que vous avez fourni contient un GUID, l’adaptateur génère une ID (TID) de la transaction et l’envoie au système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-323">If the request message you provided contains a GUID, the adapter generates a transaction ID (TID) and sends it to the SAP system.</span></span>  
  
-   <span data-ttu-id="3ec16-324">Si le message de demande que vous avez fourni ne contient pas un GUID, l’adaptateur génère un GUID et utilise ce GUID pour générer un TID.</span><span class="sxs-lookup"><span data-stu-id="3ec16-324">If the request message you provided does not contain a GUID, the adapter generates a GUID and uses that GUID to generate a TID.</span></span> <span data-ttu-id="3ec16-325">Le TID est ensuite envoyé au système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-325">The TID is then sent to the SAP system.</span></span>  
  
 <span data-ttu-id="3ec16-326">Dans les deux cas, le message de réponse du système SAP contient un GUID.</span><span class="sxs-lookup"><span data-stu-id="3ec16-326">In both the cases, the response message from the SAP system contains a GUID.</span></span> <span data-ttu-id="3ec16-327">Par exemple, un message de réponse pour l’opération d’envoi sur l’IDOC ORDERS05 est la suivante :</span><span class="sxs-lookup"><span data-stu-id="3ec16-327">For example, a response message for the Send operation on the ORDERS05 IDOC is:</span></span>  
  
```  
\<?xml version="1.0" encoding="utf-8"?>  
<SendResponse xmlns="http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Send">  
  <guid>a5afe162-d5cc-47b0-bf6f-3b0bfe06a97e</guid>  
</SendResponse>  
```  
  
 <span data-ttu-id="3ec16-328">Après avoir reçu le GUID, vous devez appeler la **RfConfirmTransID** opération pour valider le TID.</span><span class="sxs-lookup"><span data-stu-id="3ec16-328">After you receive the GUID you must invoke the **RfConfirmTransID** operation to commit the TID.</span></span> <span data-ttu-id="3ec16-329">Pour plus d’informations sur la **RfcConfirmTransID** opération, consultez [opérations sur tRFCs dans SAP](../../adapters-and-accelerators/adapter-sap/operations-on-trfcs-in-sap.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-329">For more information about the **RfcConfirmTransID** operation, see [Operations on tRFCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-trfcs-in-sap.md).</span></span> <span data-ttu-id="3ec16-330">Vous pouvez créer une nouvelle orchestration pour appeler cette opération ou modifiez l’orchestration existante.</span><span class="sxs-lookup"><span data-stu-id="3ec16-330">You can either create a new orchestration to call this operation or modify the existing orchestration.</span></span> <span data-ttu-id="3ec16-331">Si vous souhaitez créer une nouvelle orchestration, il sera similaire à n’importe quel autre orchestration sur un système SAP.</span><span class="sxs-lookup"><span data-stu-id="3ec16-331">If you want to create a new orchestration, it will be similar to any other orchestration on an SAP system.</span></span> <span data-ttu-id="3ec16-332">Si vous souhaitez mettre à jour l’orchestration existante, consultez [appeler tRFCs dans SAP à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sap/invoke-trfcs-in-sap-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-332">If you want to update the existing orchestration, see [Invoke tRFCs in SAP using BizTalk Server](../../adapters-and-accelerators/adapter-sap/invoke-trfcs-in-sap-using-biztalk-server.md).</span></span> <span data-ttu-id="3ec16-333">L’orchestration permettant d’appeler un tRFC, comme décrit dans la rubrique montre comment appeler un **RfcConfirmTransID** opération à partir de l’orchestration même.</span><span class="sxs-lookup"><span data-stu-id="3ec16-333">The orchestration for invoking a tRFC, as described in the topic demonstrates how to call a **RfcConfirmTransID** operation from the same orchestration.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3ec16-334">Vous ne devez pas appeler l’opération de RfcConfirmTransID si vous définissez la *AutoConfirmSentIdocs* liaison de propriété **True**.</span><span class="sxs-lookup"><span data-stu-id="3ec16-334">You need not invoke the RfcConfirmTransID operation if you set the *AutoConfirmSentIdocs* binding property to **True**.</span></span>  
  
## <a name="possible-exceptions"></a><span data-ttu-id="3ec16-335">Exceptions possibles</span><span class="sxs-lookup"><span data-stu-id="3ec16-335">Possible Exceptions</span></span>  
 <span data-ttu-id="3ec16-336">Pour plus d’informations sur les exceptions que vous pouvez rencontrer lors de l’envoi d’un IDOC à un système SAP à l’aide de BizTalk Server, consultez [Exceptions et gestion des erreurs avec l’adaptateur SAP](../../adapters-and-accelerators/adapter-sap/exceptions-and-error-handling-with-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-336">For information about the exceptions you might encounter while sending an IDOC to an SAP system using BizTalk Server, see [Exceptions and Error Handling with the SAP adapter](../../adapters-and-accelerators/adapter-sap/exceptions-and-error-handling-with-the-sap-adapter.md).</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="3ec16-337">Bonnes pratiques</span><span class="sxs-lookup"><span data-stu-id="3ec16-337">Best Practices</span></span>  
 <span data-ttu-id="3ec16-338">Après avoir déployé et configuré le projet BizTalk, vous pouvez exporter les paramètres de configuration dans un fichier XML appelé le fichier de liaisons.</span><span class="sxs-lookup"><span data-stu-id="3ec16-338">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the bindings file.</span></span> <span data-ttu-id="3ec16-339">Une fois que vous générez un fichier de liaison, vous pouvez importer les paramètres de configuration à partir du fichier afin que vous n’avez pas besoin de créer les ports d’envoi, ports, etc. pour la même orchestration de réception.</span><span class="sxs-lookup"><span data-stu-id="3ec16-339">Once you generate a bindings file, you can import the configuration settings from the file so that you do not need to create the send ports, receive ports, etc. for the same orchestration.</span></span> <span data-ttu-id="3ec16-340">Pour plus d’informations sur les fichiers de liaison, consultez [liaisons de l’adaptateur SAP de réutiliser](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="3ec16-340">For more information about binding files, see [Reuse SAP adapter bindings](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="3ec16-341">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="3ec16-341">See Also</span></span>  
[<span data-ttu-id="3ec16-342">Développer des applications BizTalk</span><span class="sxs-lookup"><span data-stu-id="3ec16-342">Develop BizTalk applications</span></span>](../../adapters-and-accelerators/adapter-sap/develop-biztalk-applications-using-the-sap-adapter.md)