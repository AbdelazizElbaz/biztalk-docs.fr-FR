---
title: "Recevoir des messages d’interrogation à l’aide des instructions SELECT avec la Clause FOR XML à partir de SQL à l’aide de BizTalk Server | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 65c629c1-9ef7-4aa1-8ec1-f94a3cb41cb0
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 51cd634d7933f7e25de2e742711b1593bf6b6dc1
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2017
---
# <a name="receive-polling-messages-using-select-statements-with-for-xml-clause-from-sql-using-biztalk-server"></a><span data-ttu-id="d5d5f-102">Recevoir des messages d’interrogation à l’aide des instructions SELECT avec la Clause FOR XML à partir de SQL à l’aide de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d5d5f-102">Receive polling messages using SELECT statements with FOR XML Clause from SQL using BizTalk Server</span></span>
<span data-ttu-id="d5d5f-103">Vous pouvez configurer le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] pour recevoir des messages de modification de données périodiques de tables SQL Server ou des vues à l’aide des instructions SELECT ou des procédures stockées qui incluent une clause FOR XML.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-103">You can configure the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] to receive periodic data-change messages for SQL Server tables or views by using SELECT statements or stored procedures that include a FOR XML clause.</span></span> <span data-ttu-id="d5d5f-104">Vous pouvez spécifier ces instructions en tant qu’instruction d’interrogation de l’adaptateur s’exécute pour interroger la base de données.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-104">You can specify these statements as polling statement that the adapter executes to poll the database.</span></span> <span data-ttu-id="d5d5f-105">L’instruction d’interrogation peut être une instruction SELECT ou une procédure stockée qui retourne un jeu de résultats.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-105">The polling statement can be a SELECT statement or a stored procedure that returns a result set.</span></span>  
  
 <span data-ttu-id="d5d5f-106">Pour plus d’informations sur la façon dont l’adaptateur prend en charge d’interrogation, consultez [prise en charge pour l’interrogation](https://msdn.microsoft.com/library/dd788416.aspx).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-106">For more information on how the adapter supports polling, see [Support for Polling](https://msdn.microsoft.com/library/dd788416.aspx).</span></span> <span data-ttu-id="d5d5f-107">Pour plus d’informations sur la structure du message SOAP pour les opérations d’interrogation, consultez [des schémas de Message pour l’interrogation et les opérations de TypedPolling](../../adapters-and-accelerators/adapter-sql/message-schemas-for-the-polling-and-typedpolling-operations.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-107">For information about the structure of the SOAP message for polling operations, see [Message Schemas for the Polling and TypedPolling Operations](../../adapters-and-accelerators/adapter-sql/message-schemas-for-the-polling-and-typedpolling-operations.md).</span></span> <span data-ttu-id="d5d5f-108">L’instruction SQL [clause FOR XML](https://docs.microsoft.com/sql/relational-databases/xml/for-xml-sql-server) fournit plus de détails.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-108">The SQL [FOR XML clause](https://docs.microsoft.com/sql/relational-databases/xml/for-xml-sql-server) provides more details.</span></span>
  
> [!NOTE]
>  <span data-ttu-id="d5d5f-109">Cette rubrique montre comment utiliser le **XmlPolling** opération pour recevoir des messages de l’interrogation entrante.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-109">This topic demonstrates how to use the **XmlPolling** inbound operation to receive polling messages.</span></span> <span data-ttu-id="d5d5f-110">Le **XmlPolling** opération est utilisée pour interroger une base de données SQL Server à l’aide des instructions SELECT ou des procédures stockées qui incluent une clause FOR XML.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-110">The **XmlPolling** operation is used to poll a SQL Server database using SELECT statements or stored procedures that include a FOR XML clause.</span></span> <span data-ttu-id="d5d5f-111">Le message pour le **XmlPolling** opération inclut le message xml reçu en exécutant l’instruction SELECT ou la procédure stockée dans SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-111">The message for the **XmlPolling** operation includes the xml message received by executing the SELECT statement or the stored procedure in SQL Server Management Studio.</span></span>  
>   
>  <span data-ttu-id="d5d5f-112">Vous pouvez également utiliser l’adaptateur pour recevoir les différents types de messages de l’interrogation.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-112">You can also use the adapter to receive different types of polling messages.</span></span>  
>   
>  -   <span data-ttu-id="d5d5f-113">Si vous souhaitez obtenir un message d’interrogation faiblement typée, vous devez utiliser l’opération d’interrogation.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-113">If you want to get a weakly-typed polling message, you must use the Polling Operation.</span></span> <span data-ttu-id="d5d5f-114">Pour plus d’informations, consultez [Messages basés sur la réception d’interrogation de données modifiées à partir de SQL Server à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-114">For more information, see [Receive Polling-based Data-changed Messages from SQL Server by Using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-biztalk.md).</span></span>  
> -   <span data-ttu-id="d5d5f-115">Si vous souhaitez obtenir le message d’interrogation fortement typée, vous devez utiliser le **TypedPolling** opération.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-115">If you want to get strongly-typed polling message, you must use the **TypedPolling** operation.</span></span> <span data-ttu-id="d5d5f-116">Vous devez également utiliser le **TypedPolling** opération plusieurs opérations d’interrogation dans une même application BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-116">You must also use the **TypedPolling** operation to have multiple polling operations in a single BizTalk application.</span></span> <span data-ttu-id="d5d5f-117">Pour obtenir des instructions sur la façon d’effectuer **TypedPolling** opération, consultez [réception fortement typé reposant sur l’interrogation Messages de modification de données à partir de SQL Server à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-strongly-typed-polling-based-data-changed-messages-from-sql-in-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-117">For instructions on how to perform **TypedPolling** operation, see [Receive Strongly-typed Polling-based Data-changed Messages from SQL Server using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-strongly-typed-polling-based-data-changed-messages-from-sql-in-biztalk.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="d5d5f-118">Si vous souhaitez disposer d’interrogation plus d’une opération dans une même application BizTalk, vous devez spécifier un **InboundID** propriété de connexion dans le cadre de la connexion URI pour le rendre unique.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-118">If you want to have more than one polling operation in a single BizTalk application, you must specify an **InboundID** connection property as part of the connection URI to make it unique.</span></span> <span data-ttu-id="d5d5f-119">Avec un URI de connexion unique, vous pouvez créer plusieurs ports de réception qui interrogent la même base de données, ou même de la même table dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-119">With a unique connection URI, you can create multiple receive ports that poll the same database, or even the same table in a database.</span></span> <span data-ttu-id="d5d5f-120">Pour plus d’informations, consultez [de réception d’interrogation Messages entre plusieurs Ports réception à partir de SQL à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-across-multiple-receive-ports-from-sql-using-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-120">For more information, see [Receive Polling Messages Across Multiple Receive Ports from SQL using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-across-multiple-receive-ports-from-sql-using-biztalk.md).</span></span>  
  
## <a name="how-this-topic-demonstrates-polling"></a><span data-ttu-id="d5d5f-121">Comment cette rubrique illustre l’interrogation</span><span class="sxs-lookup"><span data-stu-id="d5d5f-121">How This Topic Demonstrates Polling</span></span>  
 <span data-ttu-id="d5d5f-122">Dans cette rubrique, pour illustrer comment le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] prend en charge la réception de données des messages de modification, nous utilisons une instruction SELECT avec la clause FOR XML pour interroger la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-122">In this topic, to demonstrate how the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] supports receiving data change messages, we use a SELECT statement with the FOR XML clause to poll the SQL Server database.</span></span> <span data-ttu-id="d5d5f-123">Lorsque vous appelez une telle instruction dans SQL Server Management Studio, la sortie est sous la forme d’un message xml.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-123">When you invoke such a statement in SQL Server Management Studio, the output is in the form of an xml message.</span></span> <span data-ttu-id="d5d5f-124">Pour utiliser ces instructions pour interroger une base de données SQL Server, vous devez disposer du schéma du message xml de réponse.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-124">To use such statements to poll a SQL Server database, you must have the schema of the response xml message.</span></span> <span data-ttu-id="d5d5f-125">Le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] requiert ce schéma pour recevoir un message d’interrogation après l’exécution d’une instruction SELECT avec la clause FOR XML.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-125">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] requires this schema to receive a polling message after executing a SELECT statement with the FOR XML clause.</span></span> <span data-ttu-id="d5d5f-126">Par conséquent, pour utiliser une instruction SELECT avec la clause FOR XML pour interroger la base de données SQL Server, vous devez effectuer l’ensemble suivant de tâches.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-126">So, to use a SELECT statement with FOR XML clause to poll the SQL Server database, you must perform the following set of tasks.</span></span>  
  
1.  <span data-ttu-id="d5d5f-127">Générer le schéma pour le message de réponse XML pour l’instruction SELECT avec la clause FOR XML.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-127">Generate the schema for the XML response message for the SELECT statement with FOR XML clause.</span></span>  
  
2.  <span data-ttu-id="d5d5f-128">Créez un projet BizTalk et ajouter le schéma généré pour le projet.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-128">Create a BizTalk project and add the generated schema to the project.</span></span>  
  
3.  <span data-ttu-id="d5d5f-129">Créez un message dans le projet BizTalk pour la réception des messages de réponse XML à partir de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-129">Create a message in the BizTalk project for receiving XML response messages from the SQL Server database.</span></span>  
  
4.  <span data-ttu-id="d5d5f-130">Créez une orchestration pour recevoir des messages à partir de la base de données SQL Server et les enregistrer dans un dossier.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-130">Create an orchestration to receive messages from the SQL Server database and to save them to a folder.</span></span>  
  
5.  <span data-ttu-id="d5d5f-131">Générez et déployez le projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-131">Build and deploy the BizTalk project.</span></span>  
  
6.  <span data-ttu-id="d5d5f-132">Configurer l’application en créant physique d’envoi et ports de réception BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-132">Configure the BizTalk application by creating physical send and receive ports.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="d5d5f-133">Pour les scénarios de trafic entrant d’interrogation, vous devez toujours configurer un WCF-Custom unidirectionnel ou port de réception WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-133">For inbound polling scenarios you must always configure a one-way WCF-Custom or WCF-SQL receive port.</span></span> <span data-ttu-id="d5d5f-134">Ports de réception bidirectionnel WCF-Custom ou WCF-SQL ne sont pas pris en charge pour les opérations entrantes.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-134">Two-way WCF-Custom or WCF-SQL receive ports are not supported for inbound operations.</span></span>  
  
7.  <span data-ttu-id="d5d5f-135">Démarrez l’application BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-135">Start the BizTalk application.</span></span>  
  
##  <a name="BKMK_RespSchema"></a><span data-ttu-id="d5d5f-136">Génération de schéma pour le Message de réponse pour l’instruction SELECT</span><span class="sxs-lookup"><span data-stu-id="d5d5f-136">Generating Schema for the Response Message for SELECT Statement</span></span>  
 <span data-ttu-id="d5d5f-137">Vous pouvez générer le schéma de message de réponse pour l’instruction SELECT en incluant le `xmlschema` clause avec la `for xml` clause.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-137">You can generate the schema for the response message for the SELECT statement by including the `xmlschema` clause with the `for xml` clause.</span></span> <span data-ttu-id="d5d5f-138">Dans cette rubrique, nous utilisons une instruction SELECT pour extraire des informations pour un ID d’employé donné.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-138">In this topic, we use a SELECT statement to retrieve employee details for a given employee ID.</span></span> <span data-ttu-id="d5d5f-139">Pour récupérer le schéma en exécutant une instruction SELECT, l’instruction SELECT doit être écrite de la manière suivante :</span><span class="sxs-lookup"><span data-stu-id="d5d5f-139">To retrieve the schema by executing a SELECT statement, the SELECT statement must be written in the following manner:</span></span>  
  
```  
SELECT Employee_ID ,Name ,Designation FROM Employee for xml auto, xmlschema  
```  
  
 <span data-ttu-id="d5d5f-140">Exécutez cette instruction SELECT pour obtenir le schéma pour le message de réponse.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-140">Execute this SELECT statement to get the schema for the response message.</span></span> <span data-ttu-id="d5d5f-141">Enregistrez le schéma.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-141">Save the schema.</span></span> <span data-ttu-id="d5d5f-142">Vous devez maintenant créer un projet BizTalk dans [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] et ajoutez ce schéma au projet.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-142">You must now create a BizTalk project in [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] and add this schema to the project.</span></span> <span data-ttu-id="d5d5f-143">Pour cet exemple, vous pouvez nommer ce schéma en tant que **PollingResponse.xsd**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-143">For this example, you can name this schema as **PollingResponse.xsd**.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="d5d5f-144">Veillez à supprimer la `xmlschema` clause après avoir exécuté l’instruction SELECT pour générer le schéma.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-144">Make sure you remove the `xmlschema` clause after you have executed the SELECT statement to generate the schema.</span></span> <span data-ttu-id="d5d5f-145">Si vous ne le faites pas, lorsque vous exécutez enfin l’instruction SELECT via BizTalk en tant que partie de l’opération XmlPolling, vous générerez à nouveau le schéma du message de réponse.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-145">If you fail to do this, when you finally execute the SELECT statement through BizTalk as part of the XmlPolling operation, you will again generate the schema in the response message.</span></span> <span data-ttu-id="d5d5f-146">Par conséquent, pour obtenir le message de réponse en tant que xml, vous devez supprimer la `xmlschema` clause.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-146">So, to get the response message as xml you must remove the `xmlschema` clause.</span></span>  
  
#### <a name="to-add-the-schema-to-a-biztalk-project"></a><span data-ttu-id="d5d5f-147">Pour ajouter le schéma à un projet BizTalk</span><span class="sxs-lookup"><span data-stu-id="d5d5f-147">To add the schema to a BizTalk project</span></span>  
  
1.  <span data-ttu-id="d5d5f-148">Créez un projet BizTalk dans [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5d5f-148">Create a BizTalk project in [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)].</span></span>  
  
2.  <span data-ttu-id="d5d5f-149">Ajoutez le schéma de réponse que vous avez généré pour la procédure stockée au projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-149">Add the response schema you generated for the stored procedure to the BizTalk project.</span></span> <span data-ttu-id="d5d5f-150">Cliquez sur le projet BizTalk dans l’Explorateur de solutions, pointez sur **ajouter**, puis cliquez sur **élément existant**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-150">Right-click the BizTalk project in the Solution Explorer, point to **Add**, and then click **Existing Item**.</span></span> <span data-ttu-id="d5d5f-151">Dans la boîte de dialogue Ajouter un élément existant, accédez à l’emplacement où vous avez enregistré le schéma et cliquez sur **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-151">In the Add Existing Item dialog box, navigate to the location where you saved the schema and click **Add**.</span></span>  
  
3.  <span data-ttu-id="d5d5f-152">Ouvrez le schéma dans [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] et apportez les modifications suivantes.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-152">Open the schema in [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] and make the following changes.</span></span>  
  
    1.  <span data-ttu-id="d5d5f-153">Ajouter un nœud au schéma et déplacer le nœud racine existant sous ce nœud qui vient d’être ajouté.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-153">Add a node to the schema and move the existing root node under this newly added node.</span></span> <span data-ttu-id="d5d5f-154">Donnez un nom pour le nœud racine.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-154">Give a name to the root node.</span></span> <span data-ttu-id="d5d5f-155">Pour cette rubrique, renommez le nœud racine de **racine**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-155">For this topic, rename the root node to **Root**.</span></span>  
  
    2.  <span data-ttu-id="d5d5f-156">Le schéma de réponse généré par l’instruction SELECT fait référence à un sqltypes.xsd.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-156">The response schema generated for the SELECT statement references a sqltypes.xsd.</span></span> <span data-ttu-id="d5d5f-157">Vous pouvez obtenir le schéma sqltypes.xsd [http://go.microsoft.com/fwlink/p/?LinkId=131087](http://go.microsoft.com/fwlink/p/?LinkId=131087).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-157">You can get the sqltypes.xsd schema from [http://go.microsoft.com/fwlink/p/?LinkId=131087](http://go.microsoft.com/fwlink/p/?LinkId=131087).</span></span> <span data-ttu-id="d5d5f-158">Ajoutez le schéma sqltypes.xsd au projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-158">Add the sqltypes.xsd schema to the BizTalk project.</span></span>  
  
    3.  <span data-ttu-id="d5d5f-159">Dans le schéma généré pour l’instruction SELECT, modifiez la valeur de `import schemaLocation` à ce qui suit.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-159">In the schema generated for the SELECT statement, change the value of `import schemaLocation` to the following.</span></span>  
  
        ```  
        import schemaLocation=”sqltypes.xsd”  
        ```  
  
         <span data-ttu-id="d5d5f-160">Pour cela, car vous avez déjà ajouté le schéma sqltypes.xsd à votre projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-160">You do this because you have already added the sqltypes.xsd schema to your BizTalk project.</span></span>  
  
    4.  <span data-ttu-id="d5d5f-161">Fournir un espace de noms cible du schéma.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-161">Provide a target namespace for the schema.</span></span> <span data-ttu-id="d5d5f-162">Cliquez sur le  **\<schéma\>**  nœud et dans le volet Propriétés, spécifiez un espace de noms dans le **cible Namespace** propriété.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-162">Click the **\<Schema\>** node, and in the properties pane, specify a namespace in the **Target Namespace** property.</span></span> <span data-ttu-id="d5d5f-163">Pour cette rubrique, donnez à l’espace de noms `http://ForXmlPolling/namespace`.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-163">For this topic, give the namespace as `http://ForXmlPolling/namespace`.</span></span>  
  
## <a name="defining-messages-and-message-types"></a><span data-ttu-id="d5d5f-164">Définition des Messages et les Types de messages</span><span class="sxs-lookup"><span data-stu-id="d5d5f-164">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="d5d5f-165">Le schéma que vous avez généré précédemment décrit les « types » requis pour les messages dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-165">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="d5d5f-166">Un message est généralement une variable, le type est défini par le schéma correspondant.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-166">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="d5d5f-167">Une fois que le schéma est généré, vous devez le lier aux messages à partir de la vue de l’Orchestration du projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-167">Once the schema is generated, you must link it to the messages from the Orchestration view of the BizTalk project.</span></span>  
  
 <span data-ttu-id="d5d5f-168">Pour cette rubrique, vous devez créer un message à recevoir des messages à partir de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-168">For this topic, you must create one message to receive messages from the SQL Server database.</span></span>  
  
 <span data-ttu-id="d5d5f-169">Procédez comme suit pour créer des messages et les lier au schéma.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-169">Perform the following steps to create messages and link them to schema.</span></span>  
  
#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="d5d5f-170">Pour créer des messages et le lier au schéma</span><span class="sxs-lookup"><span data-stu-id="d5d5f-170">To create messages and link to schema</span></span>  
  
1.  <span data-ttu-id="d5d5f-171">Ajouter une orchestration au projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-171">Add an orchestration to the BizTalk project.</span></span> <span data-ttu-id="d5d5f-172">À partir de l’Explorateur de solutions, cliquez sur le nom du projet BizTalk, pointez sur **ajouter**, puis cliquez sur **un nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-172">From the Solution Explorer, right-click the BizTalk project name, point to **Add**, and then click **New Item**.</span></span> <span data-ttu-id="d5d5f-173">Tapez un nom pour l’orchestration BizTalk, puis **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-173">Type a name for the BizTalk orchestration and then click **Add**.</span></span>  
  
2.  <span data-ttu-id="d5d5f-174">Ouvrez la fenêtre Vue orchestration du projet BizTalk, s’il n’est pas déjà ouvert.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-174">Open the orchestration view window of the BizTalk project, if it is not already open.</span></span> <span data-ttu-id="d5d5f-175">Cliquez sur **vue**, pointez sur **autres fenêtres**, puis cliquez sur **Vue Orchestration**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-175">Click **View**, point to **Other Windows**, and then click **Orchestration View**.</span></span>  
  
3.  <span data-ttu-id="d5d5f-176">Dans le **Vue Orchestration**, avec le bouton droit **Messages**, puis cliquez sur **nouveau Message**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-176">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  
  
4.  <span data-ttu-id="d5d5f-177">Cliquez sur le message qui vient d’être créé, puis sélectionnez **fenêtre Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-177">Right-click the newly created message, and then select **Properties Window**.</span></span>  
  
5.  <span data-ttu-id="d5d5f-178">Dans le **propriétés** volet pour **Message_1**, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="d5d5f-178">In the **Properties** pane for **Message_1**, do the following:</span></span>  
  
    |<span data-ttu-id="d5d5f-179">Utiliser</span><span class="sxs-lookup"><span data-stu-id="d5d5f-179">Use this</span></span>|<span data-ttu-id="d5d5f-180">Pour effectuer cette opération</span><span class="sxs-lookup"><span data-stu-id="d5d5f-180">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d5d5f-181">Identificateur</span><span class="sxs-lookup"><span data-stu-id="d5d5f-181">Identifier</span></span>|<span data-ttu-id="d5d5f-182">Type **PollingMessage**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-182">Type **PollingMessage**.</span></span>|  
    |<span data-ttu-id="d5d5f-183">Type de message</span><span class="sxs-lookup"><span data-stu-id="d5d5f-183">Message Type</span></span>|<span data-ttu-id="d5d5f-184">Dans la liste déroulante, développez **schémas**, puis sélectionnez *ForXMLPolling.PollingResponse*, où *ForXMLPolling* est le nom de votre projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-184">From the drop-down list, expand **Schemas**, and select *ForXMLPolling.PollingResponse*, where *ForXMLPolling* is the name of your BizTalk project.</span></span> <span data-ttu-id="d5d5f-185">*PollingResponse* est le nom du schéma de réponse généré par l’exécution de l’instruction SELECT comme décrit sous [recevoir des messages d’interrogation à l’aide des instructions SELECT avec la Clause FOR XML à partir de SQL à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-185">*PollingResponse* is the name of the response schema generated by executing the SELECT statement as described under [Receive polling messages using SELECT statements with FOR XML Clause from SQL using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span></span>|  
  
## <a name="setting-up-the-orchestration"></a><span data-ttu-id="d5d5f-186">Configuration de l’Orchestration</span><span class="sxs-lookup"><span data-stu-id="d5d5f-186">Setting up the Orchestration</span></span>  
 <span data-ttu-id="d5d5f-187">Vous devez créer une orchestration BizTalk à utiliser [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] pour recevoir les messages de modification de données reposant sur l’interrogation de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-187">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for receiving polling-based data-change messages from the SQL Server database.</span></span> <span data-ttu-id="d5d5f-188">Dans cette orchestration, l’adaptateur reçoit la réponse de l’instruction select spécifiée pour le **PollingStatement** propriété de liaison.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-188">In this orchestration, the adapter receives the response of the select statement specified for the **PollingStatement** binding property.</span></span> <span data-ttu-id="d5d5f-189">La réponse pour l’instruction SELECT est enregistrée dans un emplacement de fichier.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-189">The response for the SELECT statement is saved to a FILE location.</span></span> <span data-ttu-id="d5d5f-190">Contiendrait une orchestration classique permettant l’interrogation d’une base de données SQL Server :</span><span class="sxs-lookup"><span data-stu-id="d5d5f-190">A typical orchestration for polling a SQL Server database would contain:</span></span>  
  
-   <span data-ttu-id="d5d5f-191">Recevoir et envoyer des formes pour recevoir des messages à partir de SQL Server et les envoyer vers un port FILE, respectivement.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-191">Receive and Send shapes to receive messages from SQL Server and send to a FILE port, respectively.</span></span>  
  
-   <span data-ttu-id="d5d5f-192">Unidirectionnel port de réception pour recevoir des messages à partir de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-192">A one-way receive port to receive messages from SQL Server.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="d5d5f-193">Pour les scénarios d’interrogation entrant que vous devez toujours configurer un port de réception unidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-193">For inbound polling scenarios you must always configure a one-way receive port.</span></span> <span data-ttu-id="d5d5f-194">Bidirectionnel recevoir des ports ne sont pas pris en charge pour les opérations entrantes.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-194">Two-way receive ports are not supported for inbound operations.</span></span>  
  
-   <span data-ttu-id="d5d5f-195">Un port d’envoi unidirectionnel pour envoyer des réponses d’interrogation à partir d’une base de données SQL Server dans un dossier.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-195">A one-way send port to send polling responses from a SQL Server database to a folder.</span></span>  
  
 <span data-ttu-id="d5d5f-196">Un exemple d’orchestration semblable au suivant.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-196">A sample orchestration resembles the following.</span></span>  
  
 <span data-ttu-id="d5d5f-197">![Orchestration permettant l’interrogation d’une base de données SQL Server](../../adapters-and-accelerators/adapter-sql/media/5cf65d53-d70d-444d-82f7-2561efcd9ee4.gif "5cf65d53-d70d-444d-82f7-2561efcd9ee4")</span><span class="sxs-lookup"><span data-stu-id="d5d5f-197">![Orchestration for polling a SQL Server database](../../adapters-and-accelerators/adapter-sql/media/5cf65d53-d70d-444d-82f7-2561efcd9ee4.gif "5cf65d53-d70d-444d-82f7-2561efcd9ee4")</span></span>  
  
### <a name="adding-message-shapes"></a><span data-ttu-id="d5d5f-198">Ajouter des formes de Message</span><span class="sxs-lookup"><span data-stu-id="d5d5f-198">Adding Message Shapes</span></span>  
 <span data-ttu-id="d5d5f-199">Assurez-vous que vous spécifiez les propriétés suivantes pour chacune des formes de message.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-199">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="d5d5f-200">Les noms répertoriés dans la colonne de forme sont les noms des formes de message tel qu’affiché dans l’orchestration juste-mentionné.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-200">The names listed in the Shape column are the names of the message shapes as displayed in the just-mentioned orchestration.</span></span>  
  
|<span data-ttu-id="d5d5f-201">Graphique à base de formes</span><span class="sxs-lookup"><span data-stu-id="d5d5f-201">Shape</span></span>|<span data-ttu-id="d5d5f-202">Type de forme</span><span class="sxs-lookup"><span data-stu-id="d5d5f-202">Shape Type</span></span>|<span data-ttu-id="d5d5f-203">Propriétés</span><span class="sxs-lookup"><span data-stu-id="d5d5f-203">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="d5d5f-204">ReceiveMessage</span><span class="sxs-lookup"><span data-stu-id="d5d5f-204">ReceiveMessage</span></span>|<span data-ttu-id="d5d5f-205">Recevoir</span><span class="sxs-lookup"><span data-stu-id="d5d5f-205">Receive</span></span>|<span data-ttu-id="d5d5f-206">-Définissez **nom** à *ReceiveMessage*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-206">- Set **Name** to *ReceiveMessage*</span></span><br /><br /> <span data-ttu-id="d5d5f-207">-Définissez **activer** à *True*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-207">- Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="d5d5f-208">SaveMessage</span><span class="sxs-lookup"><span data-stu-id="d5d5f-208">SaveMessage</span></span>|<span data-ttu-id="d5d5f-209">Send</span><span class="sxs-lookup"><span data-stu-id="d5d5f-209">Send</span></span>|<span data-ttu-id="d5d5f-210">-Définissez **nom** à *SaveMessage*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-210">- Set **Name** to *SaveMessage*</span></span>|  
  
### <a name="adding-ports"></a><span data-ttu-id="d5d5f-211">Ajout de Ports</span><span class="sxs-lookup"><span data-stu-id="d5d5f-211">Adding Ports</span></span>  
 <span data-ttu-id="d5d5f-212">Assurez-vous que vous spécifiez les propriétés suivantes pour chacun des ports logiques.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-212">Make sure you specify the following properties for each of the logical ports.</span></span> <span data-ttu-id="d5d5f-213">Les noms répertoriés dans la colonne de Port sont les noms des ports tel qu’affiché dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-213">The names listed in the Port column are the names of the ports as displayed in the orchestration.</span></span>  
  
|<span data-ttu-id="d5d5f-214">Port</span><span class="sxs-lookup"><span data-stu-id="d5d5f-214">Port</span></span>|<span data-ttu-id="d5d5f-215">Propriétés</span><span class="sxs-lookup"><span data-stu-id="d5d5f-215">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="d5d5f-216">SQLReceivePort</span><span class="sxs-lookup"><span data-stu-id="d5d5f-216">SQLReceivePort</span></span>|<span data-ttu-id="d5d5f-217">-Définissez **identificateur** à *SQLReceivePort*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-217">- Set **Identifier** to *SQLReceivePort*</span></span><br /><br /> <span data-ttu-id="d5d5f-218">-Définissez **Type** à *SQLReceivePortType*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-218">- Set **Type** to *SQLReceivePortType*</span></span><br /><br /> <span data-ttu-id="d5d5f-219">-Définissez **modèle de Communication** à *à sens unique*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-219">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="d5d5f-220">-Définissez **Direction de Communication** à *de réception*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-220">- Set **Communication Direction** to *Receive*</span></span>|  
|<span data-ttu-id="d5d5f-221">SaveMessagePort</span><span class="sxs-lookup"><span data-stu-id="d5d5f-221">SaveMessagePort</span></span>|<span data-ttu-id="d5d5f-222">-Définissez **identificateur** à *SaveMessagePort*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-222">- Set **Identifier** to *SaveMessagePort*</span></span><br /><br /> <span data-ttu-id="d5d5f-223">-Définissez **Type** à *SaveMessagePortType*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-223">- Set **Type** to *SaveMessagePortType*</span></span><br /><br /> <span data-ttu-id="d5d5f-224">-Définissez **modèle de Communication** à *à sens unique*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-224">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="d5d5f-225">-Définissez **Direction de Communication** à *envoyer*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-225">- Set **Communication Direction** to *Send*</span></span>|  
  
### <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="d5d5f-226">Spécifier des Messages pour les formes d’Action et de se connecter à des Ports</span><span class="sxs-lookup"><span data-stu-id="d5d5f-226">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="d5d5f-227">Le tableau suivant indique les propriétés et leurs valeurs, vous devez définir pour spécifier les messages de formes d’action et lier les messages aux ports.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-227">The following table specifies the properties and their values that you should set to specify messages for action shapes and to link the messages to the ports.</span></span> <span data-ttu-id="d5d5f-228">Les noms répertoriés dans la colonne de forme sont les noms des formes de message tel qu’affiché dans l’orchestration mentionnée précédemment.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-228">The names listed in the Shape column are the names of the message shapes as displayed in the orchestration mentioned earlier.</span></span>  
  
|<span data-ttu-id="d5d5f-229">Graphique à base de formes</span><span class="sxs-lookup"><span data-stu-id="d5d5f-229">Shape</span></span>|<span data-ttu-id="d5d5f-230">Propriétés</span><span class="sxs-lookup"><span data-stu-id="d5d5f-230">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="d5d5f-231">ReceiveMessage</span><span class="sxs-lookup"><span data-stu-id="d5d5f-231">ReceiveMessage</span></span>|<span data-ttu-id="d5d5f-232">-Définissez **Message** à *de réception*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-232">- Set **Message** to *Receive*</span></span><br /><br /> <span data-ttu-id="d5d5f-233">-Définissez **opération** à *SQLReceivePort.XmlPolling.Request*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-233">- Set **Operation** to *SQLReceivePort.XmlPolling.Request*</span></span>|  
|<span data-ttu-id="d5d5f-234">SaveMessage</span><span class="sxs-lookup"><span data-stu-id="d5d5f-234">SaveMessage</span></span>|<span data-ttu-id="d5d5f-235">-Définissez **Message** à *de réception*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-235">- Set **Message** to *Receive*</span></span><br /><br /> <span data-ttu-id="d5d5f-236">-Définissez **opération** à *SaveMessagePort.XmlPolling.Request*</span><span class="sxs-lookup"><span data-stu-id="d5d5f-236">- Set **Operation** to *SaveMessagePort.XmlPolling.Request*</span></span>|  
  
 <span data-ttu-id="d5d5f-237">Une fois que vous avez défini ces propriétés, les formes de message et les ports sont connectés et l’orchestration est terminée.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-237">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  
  
 <span data-ttu-id="d5d5f-238">Vous devez maintenant générer la solution BizTalk et déployez-le dans un [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5d5f-238">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="d5d5f-239">Pour plus d’informations, consultez [génération et exécution des Orchestrations](../../core/building-and-running-orchestrations.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-239">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md).</span></span>
  
## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="d5d5f-240">Configuration de l’Application BizTalk</span><span class="sxs-lookup"><span data-stu-id="d5d5f-240">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="d5d5f-241">Après avoir déployé le projet BizTalk, l’orchestration que vous avez créé précédemment est répertoriée sous le **Orchestrations** volet de la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-241">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="d5d5f-242">Vous devez utiliser le [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] console d’Administration pour configurer l’application.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-242">You must use the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console to configure the application.</span></span> <span data-ttu-id="d5d5f-243">Pour une procédure pas à pas, consultez [procédure pas à pas : déploiement d’une Application BizTalk base](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-243">For a walkthrough, see [Walkthrough: Deploying a Basic BizTalk Application](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span></span>
  
 <span data-ttu-id="d5d5f-244">Configuration d’une application implique :</span><span class="sxs-lookup"><span data-stu-id="d5d5f-244">Configuring an application involves:</span></span>  
  
-   <span data-ttu-id="d5d5f-245">Sélection d’un hôte de l’application.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-245">Selecting a host for the application.</span></span>  
  
-   <span data-ttu-id="d5d5f-246">Mappage de ports que vous avez créé dans l’orchestration aux ports physiques dans la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-246">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="d5d5f-247">Pour cette orchestration, vous devez :</span><span class="sxs-lookup"><span data-stu-id="d5d5f-247">For this orchestration you must:</span></span>  
  
    -   <span data-ttu-id="d5d5f-248">Définir un emplacement sur le disque dur et un port de fichier correspondant dans lequel l’orchestration BizTalk supprimera les messages à partir de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-248">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the messages from the SQL Server database.</span></span> <span data-ttu-id="d5d5f-249">Ces messages seront en réponse à l’instruction d’interrogation que vous spécifiez pour le port de réception.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-249">These messages will be in response to the polling statement that you specify for the receive port.</span></span>  
  
    -   <span data-ttu-id="d5d5f-250">Définir un WCF-Custom physique ou le port de réception unidirectionnel WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-250">Define a physical WCF-Custom or WCF-SQL one-way receive port.</span></span> <span data-ttu-id="d5d5f-251">Ce port interroge la base de données SQL Server avec l’instruction d’interrogation que vous spécifiez pour le port.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-251">This port polls the SQL Server database with the polling statement you specify for the port.</span></span> <span data-ttu-id="d5d5f-252">Pour plus d’informations sur la création de ports, consultez [configurer manuellement une liaison de port physique à l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-252">For information about how to create ports, see [Manually configure a physical port binding to the SQL adapter](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span></span> <span data-ttu-id="d5d5f-253">Assurez-vous que vous spécifiez les propriétés suivantes de la liaison pour le port de réception.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-253">Make sure you specify the following binding properties for the receive port.</span></span>  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="d5d5f-254">Vous n’avez pas besoin d’effectuer cette étape si vous avez spécifié les propriétés de liaison au moment du design.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-254">You do not need to perform this step if you specified the binding properties at design-time.</span></span> <span data-ttu-id="d5d5f-255">Dans ce cas, vous pouvez créer un WCF-custom ou WCF-SQL port de réception, avec le jeu de propriétés de liaison requis, en important le fichier de liaison créé par le [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5d5f-255">In such a case, you can create a WCF-custom or WCF-SQL receive port, with the required binding properties set, by importing the binding file created by the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span> <span data-ttu-id="d5d5f-256">Pour plus d’informations, consultez [configurer une liaison de port physique à l’aide d’un fichier de liaison de port à utiliser l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-256">For more information see [Configure a physical port binding using a port binding file to use the SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span></span>  
  
        |<span data-ttu-id="d5d5f-257">Propriété de liaison</span><span class="sxs-lookup"><span data-stu-id="d5d5f-257">Binding Property</span></span>|<span data-ttu-id="d5d5f-258">Valeur</span><span class="sxs-lookup"><span data-stu-id="d5d5f-258">Value</span></span>|  
        |----------------------|-----------|  
        |<span data-ttu-id="d5d5f-259">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="d5d5f-259">**InboundOperationType**</span></span>|<span data-ttu-id="d5d5f-260">Assurez-vous que vous affectez la valeur **XmlPolling**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-260">Make sure you set this to **XmlPolling**.</span></span>|  
        |<span data-ttu-id="d5d5f-261">**PolledDataAvailableStatement**</span><span class="sxs-lookup"><span data-stu-id="d5d5f-261">**PolledDataAvailableStatement**</span></span>|<span data-ttu-id="d5d5f-262">Assurez-vous que vous spécifiez une instruction SQL.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-262">Make sure you specify a SQL statement.</span></span> <span data-ttu-id="d5d5f-263">Pour cette rubrique, spécifiez :</span><span class="sxs-lookup"><span data-stu-id="d5d5f-263">For this topic, specify:</span></span><br /><br /> `SELECT COUNT(*) FROM Employee`|  
        |<span data-ttu-id="d5d5f-264">**PollingStatement**</span><span class="sxs-lookup"><span data-stu-id="d5d5f-264">**PollingStatement**</span></span>|<span data-ttu-id="d5d5f-265">Vérifiez que vous fournissez la même instruction, sans le `xmlschema` clause, que vous avez spécifié lors de la génération du schéma, comme décrit dans [recevoir des messages d’interrogation à l’aide des instructions SELECT avec la Clause FOR XML à partir de SQL à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-265">Make sure you provide the same statement, without the `xmlschema` clause, that you specified while generating the schema as described in [Receive polling messages using SELECT statements with FOR XML Clause from SQL using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span></span><br /><br /> `SELECT Employee_ID ,Name ,Designation FROM Employee for xml auto`<br /><br /> <span data-ttu-id="d5d5f-266">**Remarque :** Notez que l’instruction SELECT ne contient-elle pas le `xmlschema` clause.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-266">**Note:** Note that the SELECT statement does not contain the `xmlschema` clause.</span></span>|  
        |<span data-ttu-id="d5d5f-267">**XmlStoredProcedureRootNodeName**</span><span class="sxs-lookup"><span data-stu-id="d5d5f-267">**XmlStoredProcedureRootNodeName**</span></span>|<span data-ttu-id="d5d5f-268">Spécifiez le nom du nœud racine que vous avez ajouté au schéma de réponse que vous avez généré pour l’instruction SELECT, comme indiqué dans [génération de schéma pour le Message de réponse pour l’instruction SELECT](#BKMK_RespSchema).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-268">Specify the name of the root node that you added to the response schema you generated for the SELECT statement, as described under [Generating Schema for the Response Message for SELECT Statement](#BKMK_RespSchema).</span></span> <span data-ttu-id="d5d5f-269">Pour cette rubrique, affectez la valeur **racine**.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-269">For this topic, set this to **Root**.</span></span>|  
        |<span data-ttu-id="d5d5f-270">**XmlStoredProcedureRootNodeNamespace**</span><span class="sxs-lookup"><span data-stu-id="d5d5f-270">**XmlStoredProcedureRootNodeNamespace**</span></span>|<span data-ttu-id="d5d5f-271">Spécifier l’espace de noms cible pour le schéma de réponse que vous avez généré pour l’instruction SELECT, comme décrit sous [génération de schéma pour le Message de réponse pour l’instruction SELECT](#BKMK_RespSchema).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-271">Specify the target namespace for the response schema you generated for the SELECT statement, as described under [Generating Schema for the Response Message for SELECT Statement](#BKMK_RespSchema).</span></span> <span data-ttu-id="d5d5f-272">Pour cette rubrique, affectez la valeur `http://ForXmlPolling/namespace`.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-272">For this topic, set this to `http://ForXmlPolling/namespace`.</span></span>|  
  
         <span data-ttu-id="d5d5f-273">Pour plus d’informations sur les propriétés de liaison différente, consultez [en savoir plus sur l’adaptateur BizTalk pour les propriétés de liaison de l’adaptateur SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-273">For more information about the different binding properties, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="d5d5f-274">Nous vous recommandons de configurer le niveau d’isolation de transaction et le délai d’attente de transaction lors de l’exécution d’opérations entrantes à l’aide de la [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5d5f-274">We recommend configuring the transaction isolation level and the transaction timeout while performing inbound operations using the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="d5d5f-275">Vous pouvez effectuer afin d’en ajoutant le service de port de réception comportement lors de la configuration WCF-Custom ou WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-275">You can do so by adding the service behavior while configuring the WCF-Custom or WCF-SQL receive port.</span></span> <span data-ttu-id="d5d5f-276">Pour obtenir des instructions sur la façon d’ajouter le comportement de service, consultez [configurer Transaction Isolation Level et délai de Transaction SQL](../../adapters-and-accelerators/adapter-sql/configure-transaction-isolation-level-and-transaction-timeout-with-sql.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-276">For instruction on how to add the service behavior, see [Configure Transaction Isolation Level and Transaction Timeout with SQL](../../adapters-and-accelerators/adapter-sql/configure-transaction-isolation-level-and-transaction-timeout-with-sql.md).</span></span>  
  
## <a name="starting-the-application"></a><span data-ttu-id="d5d5f-277">Démarrage de l’Application</span><span class="sxs-lookup"><span data-stu-id="d5d5f-277">Starting the Application</span></span>  
 <span data-ttu-id="d5d5f-278">Vous devez démarrer l’application BizTalk pour recevoir des messages à partir de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-278">You must start the BizTalk application for receiving messages from the SQL Server database.</span></span> <span data-ttu-id="d5d5f-279">Pour obtenir des instructions sur le démarrage d’une application BizTalk, consultez [comment démarrer une Orchestration](../../core/how-to-start-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-279">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md).</span></span>
  
 <span data-ttu-id="d5d5f-280">À ce stade, vérifiez que :</span><span class="sxs-lookup"><span data-stu-id="d5d5f-280">At this stage, make sure:</span></span>  
  
-   <span data-ttu-id="d5d5f-281">Le WCF-Custom ou WCF-SQL unidirectionnel port de réception, qui interroge la base de données SQL Server à l’aide d’instructions spécifiées pour le **PollingStatement** propriété, de liaison est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-281">The WCF-Custom or WCF-SQL one-way receive port, which polls the SQL Server database using the statements specified for the **PollingStatement** binding property, is running.</span></span>  
  
-   <span data-ttu-id="d5d5f-282">Le port d’envoi de fichier qui reçoit des messages à partir de SQL Server, est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-282">The FILE send port, which receives messages from SQL Server, is running.</span></span>  
  
-   <span data-ttu-id="d5d5f-283">L’orchestration BizTalk pour l’opération est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-283">The BizTalk orchestration for the operation is running.</span></span>  
  
## <a name="executing-the-operation"></a><span data-ttu-id="d5d5f-284">L’exécution de l’opération</span><span class="sxs-lookup"><span data-stu-id="d5d5f-284">Executing the Operation</span></span>  
 <span data-ttu-id="d5d5f-285">Après avoir exécuté l’application, l’ensemble d’actions suivantes ont lieu, dans l’ordre :</span><span class="sxs-lookup"><span data-stu-id="d5d5f-285">After you run the application, the following set of actions take place, in the same sequence:</span></span>  
  
-   <span data-ttu-id="d5d5f-286">L’adaptateur exécute le **PolledDataAvailableStatement** sur l’employé de table et détermine que la table comporte des enregistrements pour l’interrogation.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-286">The adapter executes the **PolledDataAvailableStatement** on the Employee table and determines that the table has records for polling.</span></span>  
  
-   <span data-ttu-id="d5d5f-287">L’adaptateur exécute l’instruction d’interrogation et reçoit un message de l’interrogation de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-287">The adapter executes the polling statement and receives a polling message from the SQL Server database.</span></span> <span data-ttu-id="d5d5f-288">Étant donné que l’instruction d’interrogation se compose d’une instruction SELECT avec une clause FOR XML, le message d’interrogation reçu par l’adaptateur ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="d5d5f-288">Because the polling statement consists of a SELECT statement with a FOR XML clause, the polling message received by the adapter resembles the following:</span></span>  
  
    ```  
    <?xml version="1.0" encoding="utf-8" ?>   
    <Root xmlns="http://ForXmlPolling/namespace">  
      <Employee Employee_ID="10765" Name="John" Designation="Tester" xmlns="" />   
      <Employee Employee_ID="10766" Name="Sam" Designation="Manager" xmlns="" />   
      .....  
      .....  
    </Root>  
    ```  
  
     <span data-ttu-id="d5d5f-289">Notez que le message d’interrogation est reçu dans le même schéma généré par l’exécution de l’instruction SELECT avec la **xmlschema** clause.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-289">Notice that the polling message is received in the same schema as generated by executing the SELECT statement with the **xmlschema** clause.</span></span> <span data-ttu-id="d5d5f-290">Notez également que le nœud racine et l’espace de noms est celui que vous avez spécifié en tant que valeurs pour **XmlStoredProcedureRootNodeName** et **XmlStoredProcedureRootNodeNamespace** respectivement les propriétés de liaison.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-290">Also note that the root node and the namespace is the same you specified as values for **XmlStoredProcedureRootNodeName** and **XmlStoredProcedureRootNodeNamespace** binding properties respectively.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d5d5f-291">Le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] continue à interroger jusqu'à ce que vous désactiviez explicitement le port de réception à partir de la [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-291">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] will continue to poll until you explicitly disable the receive port from the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="d5d5f-292">Bonnes pratiques</span><span class="sxs-lookup"><span data-stu-id="d5d5f-292">Best Practices</span></span>  
 <span data-ttu-id="d5d5f-293">Après avoir déployé et configuré le projet BizTalk, vous pouvez exporter les paramètres de configuration dans un fichier XML appelé le fichier de liaison.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-293">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the binding file.</span></span> <span data-ttu-id="d5d5f-294">Une fois que vous générez un fichier de liaison, vous pouvez importer les paramètres de configuration à partir du fichier, afin que vous n’avez pas besoin de créer les ports d’envoi et de réception pour l’orchestration même.</span><span class="sxs-lookup"><span data-stu-id="d5d5f-294">Once you generate a binding file, you can import the configuration settings from the file, so that you do not need to create the send ports and receive ports for the same orchestration.</span></span> <span data-ttu-id="d5d5f-295">Pour plus d’informations sur les fichiers de liaison, consultez [réutiliser les liaisons de l’adaptateur](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="d5d5f-295">For more information about binding files, see [Reuse adapter bindings](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="d5d5f-296">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d5d5f-296">See Also</span></span>  
 [<span data-ttu-id="d5d5f-297">Interrogation SQL Server à l’aide de l’adaptateur SQL avec BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d5d5f-297">Poll SQL Server by Using the SQL Adapter with BizTalk Server</span></span>](../../adapters-and-accelerators/adapter-sql/poll-sql-server-using-the-sql-adapter-with-biztalk-server.md)