---
title: "Traiter les messages de notification pour effectuer des tâches spécifiques dans SQL à l’aide de BizTalk Server | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 8538cb89-1cca-45ad-b6f4-041e117963ff
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: efed30f3e65c4f58a060f67539672c95b3d6df59
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="process-notification-messages-to-complete-specific-tasks-in-sql-using-biztalk-server"></a><span data-ttu-id="3cd94-102">Traiter les messages de notification pour effectuer des tâches spécifiques dans SQL à l’aide de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="3cd94-102">Process notification messages to complete specific tasks in SQL using BizTalk Server</span></span>
<span data-ttu-id="3cd94-103">Vous pouvez utiliser la [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] pour recevoir des notifications de modifications apportées aux tables de base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-103">You can use the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] to receive notifications for changes to SQL Server database tables.</span></span> <span data-ttu-id="3cd94-104">Toutefois, l’adaptateur seulement vous envoie une notification que certains enregistrements ont été insérées, mises à jour ou supprimées dans une table de base de données donnée.</span><span class="sxs-lookup"><span data-stu-id="3cd94-104">However, the adapter only sends you a notification that some records were inserted, updated, or deleted in a certain database table.</span></span> <span data-ttu-id="3cd94-105">Tout traitement sur ces enregistrements doit être gérée par les applications clientes eux-mêmes.</span><span class="sxs-lookup"><span data-stu-id="3cd94-105">Any post-processing on those records must be handled by the client applications themselves.</span></span> <span data-ttu-id="3cd94-106">Cette rubrique présente une description de scénario basé sur la façon de traiter les enregistrements dans la table en fonction du type de notification reçue à partir de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-106">This topic presents a scenario-based description on how to process the records in the table based on the kind of notification received from the SQL Server database.</span></span>  
  
## <a name="scenarios-for-performing-subsequent-actions-after-receiving-notification"></a><span data-ttu-id="3cd94-107">Scénarios permettant d’effectuer les Actions suivantes après avoir reçu la Notification</span><span class="sxs-lookup"><span data-stu-id="3cd94-107">Scenarios for Performing Subsequent Actions After Receiving Notification</span></span>  
 <span data-ttu-id="3cd94-108">Voici quelques scénarios dans lesquels les clients de l’adaptateur doivent effectuer certaines tâches de post-notification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-108">Following are a couple of scenarios in which the adapter clients must perform certain post-notification tasks.</span></span>  
  
-   <span data-ttu-id="3cd94-109">**Scénario 1**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-109">**Scenario 1**.</span></span> <span data-ttu-id="3cd94-110">Considérez un scénario dans lequel le client de l’adaptateur doit effectuer certaines tâches en fonction du type de notification que vous recevez à partir de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-110">Consider a scenario where the adapter client must perform certain tasks based on the kind of notification you receive from SQL Server.</span></span> <span data-ttu-id="3cd94-111">Par exemple, l’application cliente doit mettre à jour les enregistrements dans la table « A » si les enregistrements sont insérés dans la table « B ».</span><span class="sxs-lookup"><span data-stu-id="3cd94-111">For example, the client application must update the records in table “A” if records are inserted in table “B”.</span></span> <span data-ttu-id="3cd94-112">De même, l’application cliente doit supprimer des enregistrements à partir de la table « A » si les enregistrements sont supprimés de la table « B ».</span><span class="sxs-lookup"><span data-stu-id="3cd94-112">Similarly, the client application must delete records from table “A” if records are deleted from table “B”.</span></span>  
  
     <span data-ttu-id="3cd94-113">Dans ce scénario, à partir du message de notification reçu, les clients de l’adaptateur doivent extraire le type de notification pour décider si la notification a été pour une opération d’insertion ou une opération de suppression.</span><span class="sxs-lookup"><span data-stu-id="3cd94-113">In this scenario, from the notification message received, the adapter clients must extract the type of notification to decide whether the notification was for an insert operation or a delete operation.</span></span> <span data-ttu-id="3cd94-114">Une fois que le type de notification est établi, les clients de l’adaptateur doivent effectuer les actions suivantes pour insérer ou mettre à jour les tables concernées.</span><span class="sxs-lookup"><span data-stu-id="3cd94-114">Once the notification type is ascertained, the adapter clients must perform subsequent actions to insert or update the relevant tables.</span></span>  
  
-   <span data-ttu-id="3cd94-115">**Scénario 2**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-115">**Scenario 2**.</span></span> <span data-ttu-id="3cd94-116">Considérez un scénario dans lequel l’emplacement de réception qui reçoit les messages de notification pour les modifications apportées à une table tombe en panne.</span><span class="sxs-lookup"><span data-stu-id="3cd94-116">Consider a scenario where the receive location that receives notification messages for changes to a table goes down.</span></span> <span data-ttu-id="3cd94-117">Alors que l’emplacement de réception est arrêté, certains enregistrements sont ajoutés à la table.</span><span class="sxs-lookup"><span data-stu-id="3cd94-117">While the receive location is down, some records are added to the table.</span></span> <span data-ttu-id="3cd94-118">Toutefois, pour ces enregistrements le client de l’adaptateur ne reçoit pas de notification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-118">However, for these records the adapter client does not receive any notification.</span></span> <span data-ttu-id="3cd94-119">Lorsque l’emplacement de réception est sauvegarder, l’adaptateur informe le client en envoyant un message spécifique et puis l’application cliente doit rechercher tous les enregistrements qui ont été insérées dans la table de base de données lors de l’emplacement de réception vers le bas.</span><span class="sxs-lookup"><span data-stu-id="3cd94-119">When the receive location is back up, the adapter notifies the client by sending a specific message and then the client application must look for all the records that were inserted in the database table while the receive location was down.</span></span>  
  
     <span data-ttu-id="3cd94-120">Dans ce scénario, à partir du message de notification reçu, les clients de l’adaptateur doivent extraire les informations concernant si la notification est une modification apportée à une table de base de données ou pour le démarrage de l’emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="3cd94-120">In this scenario, from the notification message received, the adapter clients must extract the information regarding whether the notification is for a change to a database table or for the receive location starting.</span></span> <span data-ttu-id="3cd94-121">Si la notification est pour le démarrage de l’emplacement de réception, les clients de l’adaptateur doivent implémenter la logique pour traiter les enregistrements qui peuvent ont été insérées, mises à jour ou supprimés lors de l’emplacement de réception vers le bas.</span><span class="sxs-lookup"><span data-stu-id="3cd94-121">If the notification is for the receive location starting, the adapter clients must implement the logic to process the records that might have been inserted, updated, or deleted while the receive location was down.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3cd94-122">Voici quelques exemples de scénarios qui sont répertoriés pour mieux comprendre comment utiliser la fonctionnalité de notification dans le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3cd94-122">These are just some example scenarios that are listed for a better understanding of how to use the notification feature in the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="3cd94-123">Toutefois, l’ensemble des tâches requises pour extraire le type de notification reçue de base sera similaire pour tous les scénarios.</span><span class="sxs-lookup"><span data-stu-id="3cd94-123">However, the basic set of tasks required to extract the type of notification received will be similar for all scenarios.</span></span> <span data-ttu-id="3cd94-124">Cette rubrique fournit des instructions sur la façon d’extraire le type de notification à partir d’un message de notification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-124">This topic provides instructions on how to extract the type of notification from a notification message.</span></span>  
  
## <a name="how-this-topic-demonstrates-receiving-notification-messages-and-extracting-notification-type"></a><span data-ttu-id="3cd94-125">Comment cette rubrique illustre la réception de Messages de Notification et d’extraction d’un Type de Notification</span><span class="sxs-lookup"><span data-stu-id="3cd94-125">How This Topic Demonstrates Receiving Notification Messages and Extracting Notification Type</span></span>  
 <span data-ttu-id="3cd94-126">Dans cette rubrique, pour illustrer comment traiter les messages de notification pour effectuer les tâches suivantes, nous considérons un scénario de base où un client de l’adaptateur utilise l’application BizTalk pour recevoir des messages de notification pour les modifications apportées à la table Employee.</span><span class="sxs-lookup"><span data-stu-id="3cd94-126">In this topic, to demonstrate how to process notification messages to perform subsequent tasks, we consider a basic scenario where an adapter client uses BizTalk application to receive notification messages for changes to the Employee table.</span></span> <span data-ttu-id="3cd94-127">Une fois la notification est reçue, le client filtre le type de notification reçue et effectue les actions suivantes.</span><span class="sxs-lookup"><span data-stu-id="3cd94-127">After the notification is received, the client filters the type of notification received and performs subsequent action.</span></span> <span data-ttu-id="3cd94-128">Pour illustrer un scénario très simple, pensez que le client de l’adaptateur copie les messages de notification dans des dossiers différents en fonction du type de notification reçue.</span><span class="sxs-lookup"><span data-stu-id="3cd94-128">To demonstrate a very basic scenario, let us consider that the adapter client copies the notification messages to different folders based on the kind of notification received.</span></span> <span data-ttu-id="3cd94-129">Par conséquent :</span><span class="sxs-lookup"><span data-stu-id="3cd94-129">So:</span></span>  
  
-   <span data-ttu-id="3cd94-130">Si le message de notification est pour une opération d’insertion ou de mise à jour, le client de l’adaptateur copie le message vers le dossier de C:\TestLocation\UpsertNotification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-130">If the notification message is for an Insert or Update operation, the adapter client copies the message to C:\TestLocation\UpsertNotification folder.</span></span>  
  
-   <span data-ttu-id="3cd94-131">Si le message de notification est pour toute autre opération, par exemple supprimer, le client de l’adaptateur copie le message vers le dossier de C:\TestLocation\OtherNotificaiton.</span><span class="sxs-lookup"><span data-stu-id="3cd94-131">If the notification message is for any other operation, for example Delete, the adapter client copies the message to C:\TestLocation\OtherNotificaiton folder.</span></span>  
  
 <span data-ttu-id="3cd94-132">Pour cela dans le cadre d’une application BizTalk, l’orchestration doit contenir les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="3cd94-132">To achieve this as part of a BizTalk application, the orchestration must contain the following:</span></span>  
  
-   <span data-ttu-id="3cd94-133">Port pour recevoir des messages de notification de réception unidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="3cd94-133">A one-way receive port to receive notification messages.</span></span>  
  
-   <span data-ttu-id="3cd94-134">Une forme Expression qui contient une requête xpath pour extraire les informations sur le type de message de notification reçu.</span><span class="sxs-lookup"><span data-stu-id="3cd94-134">An Expression shape that contains an xpath query to extract the information about the kind of notification message received.</span></span>  
  
-   <span data-ttu-id="3cd94-135">Une forme décider à inclure un bloc de décision dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="3cd94-135">A Decide shape to include a decision block in the orchestration.</span></span> <span data-ttu-id="3cd94-136">Dans ce bloc de décision, l’application décide que pour effectuer les opérations suivantes selon le message de notification reçu.</span><span class="sxs-lookup"><span data-stu-id="3cd94-136">In this decision block, the application decides on what subsequent operations to perform based on the notification message received.</span></span>  
  
-   <span data-ttu-id="3cd94-137">Unidirectionnel deux ports d’envoi qui enfin de recevoir les messages de notification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-137">Two one-way send ports that finally receive the notification messages.</span></span>  
  
## <a name="configuring-notifications-with-the-sql-adapter-binding-properties"></a><span data-ttu-id="3cd94-138">Configuration des Notifications à l’adaptateur SQL propriétés de liaison</span><span class="sxs-lookup"><span data-stu-id="3cd94-138">Configuring Notifications with the SQL Adapter Binding Properties</span></span>  
 <span data-ttu-id="3cd94-139">Le tableau suivant récapitule les [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] propriétés de liaison qui vous permet de configurer la réception des notifications à partir de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-139">The following table summarizes the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] binding properties that you use to configure receiving notifications from SQL Server.</span></span> <span data-ttu-id="3cd94-140">Vous devez spécifier ces propriétés de liaison lors de la configuration du port de réception dans le [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="3cd94-140">You must specify these binding properties while configuring the receive port in the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3cd94-141">Vous pouvez choisir de spécifier ces propriétés de liaison lors de la génération du schéma pour le **Notification** opération, même si elle n’est pas obligatoire.</span><span class="sxs-lookup"><span data-stu-id="3cd94-141">You may choose to specify these binding properties when generating the schema for the **Notification** operation, even though it is not mandatory.</span></span> <span data-ttu-id="3cd94-142">Si vous procédez ainsi, la liaison du port de fichiers qui le [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] génère comme partie de la génération de métadonnées contient également les valeurs spécifiées pour les propriétés de liaison.</span><span class="sxs-lookup"><span data-stu-id="3cd94-142">If you do so, the port binding file that the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] generates as part of the metadata generation also contains the values you specify for the binding properties.</span></span> <span data-ttu-id="3cd94-143">Vous pouvez importer ultérieurement ce fichier de liaison dans le [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] port de réception de la console Administration pour créer le WCF-custom ou WCF-SQL avec la liaison de propriétés déjà définies.</span><span class="sxs-lookup"><span data-stu-id="3cd94-143">You can later import this binding file in the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console to create the WCF-custom or WCF-SQL receive port with the binding properties already set.</span></span> <span data-ttu-id="3cd94-144">Pour plus d’informations sur la création d’un port à l’aide du fichier de liaison, consultez [configurer une liaison de port physique à l’aide d’un fichier de liaison de port à utiliser l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-144">For more information about creating a port using the binding file, see [Configure a physical port binding using a port binding file to use the SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span></span>  
  
|<span data-ttu-id="3cd94-145">Propriété de liaison</span><span class="sxs-lookup"><span data-stu-id="3cd94-145">Binding Property</span></span>|<span data-ttu-id="3cd94-146"> Description</span><span class="sxs-lookup"><span data-stu-id="3cd94-146">Description</span></span>|  
|----------------------|-----------------|  
|<span data-ttu-id="3cd94-147">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="3cd94-147">**InboundOperationType**</span></span>|<span data-ttu-id="3cd94-148">Spécifie l’opération entrante que vous souhaitez effectuer.</span><span class="sxs-lookup"><span data-stu-id="3cd94-148">Specifies the inbound operation that you want to perform.</span></span> <span data-ttu-id="3cd94-149">Pour recevoir des messages de notification, affectez la valeur **Notification**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-149">To receive notification messages, set this to **Notification**.</span></span>|  
|<span data-ttu-id="3cd94-150">**NotificationStatement**</span><span class="sxs-lookup"><span data-stu-id="3cd94-150">**NotificationStatement**</span></span>|<span data-ttu-id="3cd94-151">Spécifie l’instruction SQL (SELECT ou EXEC \<procédure stockée >) permet de s’inscrire aux notifications de requête.</span><span class="sxs-lookup"><span data-stu-id="3cd94-151">Specifies the SQL statement (SELECT or EXEC \<stored procedure>) used to register for query notifications.</span></span> <span data-ttu-id="3cd94-152">L’adaptateur reçoit un message de notification de SQL Server que lorsque le jeu de résultats pour que les modifications d’instruction SQL spécifiées.</span><span class="sxs-lookup"><span data-stu-id="3cd94-152">The adapter gets a notification message from SQL Server only when the result set for the specified SQL statement changes.</span></span>|  
|<span data-ttu-id="3cd94-153">**NotifyOnListenerStart**</span><span class="sxs-lookup"><span data-stu-id="3cd94-153">**NotifyOnListenerStart**</span></span>|<span data-ttu-id="3cd94-154">Spécifie si l’adaptateur envoie une notification pour les clients de la carte au démarrage de l’écouteur.</span><span class="sxs-lookup"><span data-stu-id="3cd94-154">Specifies whether adapter sends a notification to the adapter clients when the listener is started.</span></span>|  
  
 <span data-ttu-id="3cd94-155">Pour obtenir une description plus complète de ces propriétés, consultez [en savoir plus sur l’adaptateur BizTalk pour les propriétés de liaison de l’adaptateur SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-155">For a more complete description of these properties, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span> <span data-ttu-id="3cd94-156">Pour obtenir une description complète de l’utilisation de la [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] pour recevoir des notifications à partir de SQL Server, poursuivre la lecture.</span><span class="sxs-lookup"><span data-stu-id="3cd94-156">For a complete description of how to use the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] to receive notifications from SQL Server, read further.</span></span>  
  
## <a name="how-to-receive-notification-messages-from-the-sql-server-database"></a><span data-ttu-id="3cd94-157">La réception des Messages de Notification à partir de la base de données SQL Server</span><span class="sxs-lookup"><span data-stu-id="3cd94-157">How to Receive Notification Messages from the SQL Server Database</span></span>  
 <span data-ttu-id="3cd94-158">Une opération sur la base de données SQL Server à l’aide [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] avec [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] implique les tâches de procédures décrites dans [blocs de construction pour développer des applications BizTalk à l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/building-blocks-to-develop-biztalk-applications-with-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-158">Performing an operation on the SQL Server database using [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] involves the procedural tasks described in [Building blocks to develop BizTalk applications with the SQL adapter](../../adapters-and-accelerators/adapter-sql/building-blocks-to-develop-biztalk-applications-with-the-sql-adapter.md).</span></span> <span data-ttu-id="3cd94-159">Pour configurer l’adaptateur pour recevoir des messages de notification, ces tâches sont :</span><span class="sxs-lookup"><span data-stu-id="3cd94-159">To configure the adapter to receive notification messages, these tasks are:</span></span>  
  
1.  <span data-ttu-id="3cd94-160">Créez un projet BizTalk, puis générer le schéma pour le **Notification** opération entrante.</span><span class="sxs-lookup"><span data-stu-id="3cd94-160">Create a BizTalk project, and then generate schema for the **Notification** inbound operation.</span></span> <span data-ttu-id="3cd94-161">Si vous le souhaitez, vous pouvez spécifier des valeurs pour le **InboundOperationType** et **NotificationStatement** propriétés de liaison.</span><span class="sxs-lookup"><span data-stu-id="3cd94-161">Optionally, you can specify values for the **InboundOperationType** and **NotificationStatement** binding properties.</span></span>  
  
2.  <span data-ttu-id="3cd94-162">Créez un message dans le projet BizTalk pour la réception des notifications de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-162">Create a message in the BizTalk project for receiving notification from the SQL Server database.</span></span>  
  
3.  <span data-ttu-id="3cd94-163">Créez une orchestration comme décrit dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="3cd94-163">Create an orchestration as described in the preceding section.</span></span>  
  
4.  <span data-ttu-id="3cd94-164">Générez et déployez le projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3cd94-164">Build and deploy the BizTalk project.</span></span>  
  
5.  <span data-ttu-id="3cd94-165">Configurer l’application en créant physique d’envoi et ports de réception BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3cd94-165">Configure the BizTalk application by creating physical send and receive ports.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="3cd94-166">Pour les opérations entrantes, tels que la réception des messages de notification, vous devez configurer uniquement un WCF-Custom unidirectionnel ou port de réception WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="3cd94-166">For inbound operations, like receiving notification messages, you must only configure a one-way WCF-Custom or WCF-SQL receive port.</span></span> <span data-ttu-id="3cd94-167">Ports de réception bidirectionnel WCF-Custom ou WCF-SQL ne sont pas pris en charge pour les opérations entrantes.</span><span class="sxs-lookup"><span data-stu-id="3cd94-167">Two-way WCF-Custom or WCF-SQL receive ports are not supported for inbound operations.</span></span>  
  
6.  <span data-ttu-id="3cd94-168">Démarrez l’application BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3cd94-168">Start the BizTalk application.</span></span>  
  
 <span data-ttu-id="3cd94-169">Cette rubrique fournit des instructions pour effectuer ces tâches.</span><span class="sxs-lookup"><span data-stu-id="3cd94-169">This topic provides instructions to perform these tasks.</span></span>  
  
## <a name="generating-schema"></a><span data-ttu-id="3cd94-170">Génération du schéma</span><span class="sxs-lookup"><span data-stu-id="3cd94-170">Generating Schema</span></span>  
 <span data-ttu-id="3cd94-171">Vous devez générer le schéma pour le **Notification** opération entrante.</span><span class="sxs-lookup"><span data-stu-id="3cd94-171">You must generate the schema for the **Notification** inbound operation.</span></span> <span data-ttu-id="3cd94-172">Consultez [récupérer des métadonnées pour les opérations de SQL Server dans Visual Studio à l’aide de l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/get-metadata-for-sql-server-operations-in-visual-studio-using-the-sql-adapter.md) pour plus d’informations sur la façon de générer le schéma.</span><span class="sxs-lookup"><span data-stu-id="3cd94-172">See [Retrieving Metadata for SQL Server Operations in Visual Studio using the SQL adapter](../../adapters-and-accelerators/adapter-sql/get-metadata-for-sql-server-operations-in-visual-studio-using-the-sql-adapter.md) for more information about how to generate the schema.</span></span> <span data-ttu-id="3cd94-173">Effectuer les tâches suivantes lors de la génération du schéma.</span><span class="sxs-lookup"><span data-stu-id="3cd94-173">Perform the following tasks when generating the schema.</span></span> <span data-ttu-id="3cd94-174">Ignorer la première étape si vous ne souhaitez pas spécifier les propriétés de liaison au moment du design.</span><span class="sxs-lookup"><span data-stu-id="3cd94-174">Skip the first step if you do not want to specify the binding properties at design-time.</span></span>  
  
1.  <span data-ttu-id="3cd94-175">Spécifiez une valeur pour **InboundOperationType** et **NotificationStatement** propriétés de liaison lors de la génération du schéma.</span><span class="sxs-lookup"><span data-stu-id="3cd94-175">Specify a value for **InboundOperationType** and **NotificationStatement** binding properties while generating the schema.</span></span> <span data-ttu-id="3cd94-176">Pour plus d’informations sur cette propriété de liaison, consultez [en savoir plus sur l’adaptateur BizTalk pour les propriétés de liaison de l’adaptateur SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-176">For more information about this binding property, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span> <span data-ttu-id="3cd94-177">Pour obtenir des instructions sur la façon de spécifier les propriétés de liaison, consultez [configurer les propriétés de liaison de l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/configure-the-binding-properties-for-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-177">For instructions on how to specify binding properties, see [Configure the binding properties for the SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-the-binding-properties-for-the-sql-adapter.md).</span></span>  
  
2.  <span data-ttu-id="3cd94-178">Sélectionnez le type de contrat **Service (opérations entrantes)**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-178">Select the contract type as **Service (Inbound operations)**.</span></span>  
  
3.  <span data-ttu-id="3cd94-179">Génération du schéma pour le **Notification** opération.</span><span class="sxs-lookup"><span data-stu-id="3cd94-179">Generate schema for the **Notification** operation.</span></span>  
  
## <a name="defining-messages-and-message-types"></a><span data-ttu-id="3cd94-180">Définition des Messages et les Types de messages</span><span class="sxs-lookup"><span data-stu-id="3cd94-180">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="3cd94-181">Le schéma que vous avez généré précédemment décrit les « types » requis pour les messages dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="3cd94-181">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="3cd94-182">Un message est généralement une variable, le type est défini par le schéma correspondant.</span><span class="sxs-lookup"><span data-stu-id="3cd94-182">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="3cd94-183">Une fois que le schéma est généré, vous devez le lier aux messages à partir de la vue de l’Orchestration du projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3cd94-183">Once the schema is generated, you must link it to the messages from the Orchestration view of the BizTalk project.</span></span>  
  
 <span data-ttu-id="3cd94-184">Pour cette rubrique, vous devez créer un message à recevoir des notifications à partir de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-184">For this topic, you must create one message to receive notifications from the SQL Server database.</span></span>  
  
 <span data-ttu-id="3cd94-185">Procédez comme suit pour créer des messages et les lier au schéma.</span><span class="sxs-lookup"><span data-stu-id="3cd94-185">Perform the following steps to create messages and link them to schema.</span></span>  
  
#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="3cd94-186">Pour créer des messages et le lier au schéma</span><span class="sxs-lookup"><span data-stu-id="3cd94-186">To create messages and link to schema</span></span>  
  
1.  <span data-ttu-id="3cd94-187">Ajouter une orchestration au projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3cd94-187">Add an orchestration to the BizTalk project.</span></span> <span data-ttu-id="3cd94-188">À partir de l’Explorateur de solutions, cliquez sur le nom du projet BizTalk, pointez sur **ajouter**, puis cliquez sur **un nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-188">From the Solution Explorer, right-click the BizTalk project name, point to **Add**, and then click **New Item**.</span></span> <span data-ttu-id="3cd94-189">Tapez un nom pour l’orchestration BizTalk, puis **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-189">Type a name for the BizTalk orchestration and then click **Add**.</span></span>  
  
2.  <span data-ttu-id="3cd94-190">Ouvrez la fenêtre Vue orchestration du projet BizTalk, s’il n’est pas déjà ouvert.</span><span class="sxs-lookup"><span data-stu-id="3cd94-190">Open the orchestration view window of the BizTalk project, if it is not already open.</span></span> <span data-ttu-id="3cd94-191">Cliquez sur **vue**, pointez sur **autres fenêtres**, puis cliquez sur **Vue Orchestration**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-191">Click **View**, point to **Other Windows**, and then click **Orchestration View**.</span></span>  
  
3.  <span data-ttu-id="3cd94-192">Dans le **Vue Orchestration**, avec le bouton droit **Messages**, puis cliquez sur **nouveau Message**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-192">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  
  
4.  <span data-ttu-id="3cd94-193">Cliquez sur le message qui vient d’être créé, puis sélectionnez **fenêtre Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-193">Right-click the newly created message, and then select **Properties Window**.</span></span>  
  
5.  <span data-ttu-id="3cd94-194">Dans le **propriétés** volet pour **Message_1**, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="3cd94-194">In the **Properties** pane for **Message_1**, do the following:</span></span>  
  
    |<span data-ttu-id="3cd94-195">Utiliser</span><span class="sxs-lookup"><span data-stu-id="3cd94-195">Use this</span></span>|<span data-ttu-id="3cd94-196">Pour effectuer cette opération</span><span class="sxs-lookup"><span data-stu-id="3cd94-196">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="3cd94-197">Identificateur</span><span class="sxs-lookup"><span data-stu-id="3cd94-197">Identifier</span></span>|<span data-ttu-id="3cd94-198">Tapez `NotifyReceive`.</span><span class="sxs-lookup"><span data-stu-id="3cd94-198">Type `NotifyReceive`.</span></span>|  
    |<span data-ttu-id="3cd94-199">Type de message</span><span class="sxs-lookup"><span data-stu-id="3cd94-199">Message Type</span></span>|<span data-ttu-id="3cd94-200">Dans la liste déroulante, développez **schémas**, puis sélectionnez *Process_Notification.Notification*, où *Process_Notification* est le nom de votre projet BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3cd94-200">From the drop-down list, expand **Schemas**, and select *Process_Notification.Notification*, where *Process_Notification* is the name of your BizTalk project.</span></span> <span data-ttu-id="3cd94-201">*Notification* est le schéma généré pour le **Notification** opération.</span><span class="sxs-lookup"><span data-stu-id="3cd94-201">*Notification* is the schema generated for the **Notification** operation.</span></span>|  
  
## <a name="setting-up-the-orchestration"></a><span data-ttu-id="3cd94-202">Configuration de l’Orchestration</span><span class="sxs-lookup"><span data-stu-id="3cd94-202">Setting up the Orchestration</span></span>  
 <span data-ttu-id="3cd94-203">Vous devez créer une orchestration BizTalk à utiliser [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] pour recevoir des messages de notification à partir de la base de données SQL Server et puis en effectuant les tâches en fonction du type de notification reçue.</span><span class="sxs-lookup"><span data-stu-id="3cd94-203">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for receiving notification messages from the SQL Server database and then performing tasks based on the type of notification received.</span></span> <span data-ttu-id="3cd94-204">Dans cette orchestration, l’adaptateur reçoit le message de notification en fonction de l’instruction SELECT spécifiée pour le **NotificationStatement** propriété de liaison.</span><span class="sxs-lookup"><span data-stu-id="3cd94-204">In this orchestration, the adapter receives the notification message based on the SELECT statement specified for the **NotificationStatement** binding property.</span></span> <span data-ttu-id="3cd94-205">La requête xpath spécifiée dans la forme Expression extrait le type de notification dans une variable, par exemple **NotificationType**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-205">The xpath query specified within the Expression shape extracts the type of notification into a variable, say **NotificationType**.</span></span> <span data-ttu-id="3cd94-206">La forme décider utilise la valeur de cette variable pour décider du type de notification reçue et prend le « chemin » approprié pour effectuer les opérations suivantes.</span><span class="sxs-lookup"><span data-stu-id="3cd94-206">The Decide shape uses the value in this variable to decide on the kind of notification received and takes the appropriate “path” to perform subsequent operations.</span></span> <span data-ttu-id="3cd94-207">Comme mentionné dans la section précédente, l’orchestration effectue les opérations suivantes en fonction du type de message de notification reçu.</span><span class="sxs-lookup"><span data-stu-id="3cd94-207">As mentioned in the preceding section, the orchestration will perform the following operations based on the kind of notification message received.</span></span>  
  
-   <span data-ttu-id="3cd94-208">Si le message de notification est pour une opération d’insertion ou de mise à jour, le client de l’adaptateur copie le message vers le dossier de C:\TestLocation\UpsertNotification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-208">If the notification message is for an Insert or Update operation, the adapter client copies the message to C:\TestLocation\UpsertNotification folder.</span></span>  
  
-   <span data-ttu-id="3cd94-209">Si le message de notification est pour toute autre opération, par exemple supprimer, le client de l’adaptateur copie le message vers le dossier de C:\TestLocation\OtherNotificaiton.</span><span class="sxs-lookup"><span data-stu-id="3cd94-209">If the notification message is for any other operation, for example Delete, the adapter client copies the message to C:\TestLocation\OtherNotificaiton folder.</span></span>  
  
 <span data-ttu-id="3cd94-210">Par conséquent, l’orchestration doit contenir les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="3cd94-210">So, your orchestration must contain the following:</span></span>  
  
-   <span data-ttu-id="3cd94-211">Port pour recevoir des messages de notification de réception unidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="3cd94-211">A one-way receive port to receive notification messages.</span></span>  
  
-   <span data-ttu-id="3cd94-212">Une forme Expression qui contient une requête xpath pour extraire le type de notification reçue.</span><span class="sxs-lookup"><span data-stu-id="3cd94-212">An Expression shape that contains an xpath query to extract the kind of notification received.</span></span>  
  
-   <span data-ttu-id="3cd94-213">Une forme décider à inclure un bloc de décision dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="3cd94-213">A Decide shape to include a decision block in the orchestration.</span></span> <span data-ttu-id="3cd94-214">Dans ce bloc de décision, l’application décide que pour effectuer les opérations suivantes selon le message de notification reçu.</span><span class="sxs-lookup"><span data-stu-id="3cd94-214">In this decision block, the application decides on what subsequent operations to perform based on the notification message received.</span></span>  
  
-   <span data-ttu-id="3cd94-215">Unidirectionnel deux ports d’envoi qui enfin de recevoir les messages de notification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-215">Two one-way send ports that finally receive the notification messages.</span></span>  
  
-   <span data-ttu-id="3cd94-216">Forme réception.</span><span class="sxs-lookup"><span data-stu-id="3cd94-216">Receive shape.</span></span>  
  
 <span data-ttu-id="3cd94-217">Un exemple d’orchestration semblable au suivant.</span><span class="sxs-lookup"><span data-stu-id="3cd94-217">A sample orchestration resembles the following.</span></span>  
  
 <span data-ttu-id="3cd94-218">![Orchestration permettant d’effectuer la publication &#45; tâches de notification](../../adapters-and-accelerators/adapter-sql/media/20f62716-603d-4293-84f7-8c8f6d82ccd0.gif "20f62716-603d-4293-84f7-8c8f6d82ccd0")</span><span class="sxs-lookup"><span data-stu-id="3cd94-218">![Orchestration to perform post&#45;notification tasks](../../adapters-and-accelerators/adapter-sql/media/20f62716-603d-4293-84f7-8c8f6d82ccd0.gif "20f62716-603d-4293-84f7-8c8f6d82ccd0")</span></span>  
  
### <a name="adding-message-shapes"></a><span data-ttu-id="3cd94-219">Ajouter des formes de Message</span><span class="sxs-lookup"><span data-stu-id="3cd94-219">Adding Message Shapes</span></span>  
 <span data-ttu-id="3cd94-220">Assurez-vous que vous spécifiez les propriétés suivantes pour chacune des formes de message.</span><span class="sxs-lookup"><span data-stu-id="3cd94-220">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="3cd94-221">Les noms répertoriés dans la colonne de forme sont les noms des formes de message tel qu’affiché dans l’orchestration juste-mentionné.</span><span class="sxs-lookup"><span data-stu-id="3cd94-221">The names listed in the Shape column are the names of the message shapes as displayed in the just-mentioned orchestration.</span></span>  
  
|<span data-ttu-id="3cd94-222">Graphique à base de formes</span><span class="sxs-lookup"><span data-stu-id="3cd94-222">Shape</span></span>|<span data-ttu-id="3cd94-223">Type de forme</span><span class="sxs-lookup"><span data-stu-id="3cd94-223">Shape Type</span></span>|<span data-ttu-id="3cd94-224">Propriétés</span><span class="sxs-lookup"><span data-stu-id="3cd94-224">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="3cd94-225">ReceiveNotification</span><span class="sxs-lookup"><span data-stu-id="3cd94-225">ReceiveNotification</span></span>|<span data-ttu-id="3cd94-226">Recevoir</span><span class="sxs-lookup"><span data-stu-id="3cd94-226">Receive</span></span>|<span data-ttu-id="3cd94-227">-Définissez **nom** à *ReceiveNotification*</span><span class="sxs-lookup"><span data-stu-id="3cd94-227">- Set **Name** to *ReceiveNotification*</span></span><br /><br /> <span data-ttu-id="3cd94-228">-Définissez **activer** à *True*</span><span class="sxs-lookup"><span data-stu-id="3cd94-228">- Set **Activate** to *True*</span></span>|  
  
### <a name="adding-an-expression-shape"></a><span data-ttu-id="3cd94-229">Ajout d’une forme Expression</span><span class="sxs-lookup"><span data-stu-id="3cd94-229">Adding an Expression Shape</span></span>  
 <span data-ttu-id="3cd94-230">L’objectif d’intégration d’une forme Expression dans l’orchestration est d’avoir une requête xpath pour extraire le type de message de notification reçue.</span><span class="sxs-lookup"><span data-stu-id="3cd94-230">The purpose of including an Expression shape in the orchestration is to have an xpath query to extract the kind of notification message received.</span></span> <span data-ttu-id="3cd94-231">Avant de créer une requête xpath, examinons le format d’un message de notification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-231">Before creating an xpath query, let us look at the format of a notification message.</span></span> <span data-ttu-id="3cd94-232">Un message de notification classique ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="3cd94-232">A typical notification message resembles the following:</span></span>  
  
```  
<Notification xmlns="http://schemas.microsoft.com/Sql/2008/05/Notification/">  
  <Info>Insert</Info>   
  <Source>Data</Source>   
  <Type>Change</Type>   
</Notification>  
```  
  
 <span data-ttu-id="3cd94-233">Comme vous le voir, les informations sur le type de la notification sont disponibles dans le `<info>` balise, au sein du parent `<Notification>` balise.</span><span class="sxs-lookup"><span data-stu-id="3cd94-233">As you see, the information about the type of the notification is available within the `<info>` tag, within the parent `<Notification>` tag.</span></span> <span data-ttu-id="3cd94-234">Par conséquent, dans le cadre de cette forme d’expression, vous devez :</span><span class="sxs-lookup"><span data-stu-id="3cd94-234">So, as part of this expression shape you must:</span></span>  
  
-   <span data-ttu-id="3cd94-235">Créez une variable qui contient la valeur dans la `<Info>` de balise et définissez son type sur System.String.</span><span class="sxs-lookup"><span data-stu-id="3cd94-235">Create a variable that contains the value within the `<Info>` tag and set its type to System.String.</span></span> <span data-ttu-id="3cd94-236">Pour plus d’informations sur la création des variables, consultez [à l’aide de Variables dans les Orchestrations](../../core/using-variables-in-orchestrations.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-236">For more information about creating variables, see [Using Variables in Orchestrations](../../core/using-variables-in-orchestrations.md).</span></span>
  
     <span data-ttu-id="3cd94-237">Pour cette rubrique, nom de la variable en tant que **NotificationType**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-237">For this topic, name the variable as **NotificationType**.</span></span>  
  
-   <span data-ttu-id="3cd94-238">Créer une requête xpath pour extraire la valeur de la \<Info > balise.</span><span class="sxs-lookup"><span data-stu-id="3cd94-238">Create an xpath query to extract the value from the \<Info> tag.</span></span> <span data-ttu-id="3cd94-239">La requête xpath ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="3cd94-239">The xpath query will resemble the following:</span></span>  
  
    ```  
    NotificationType = xpath(NotifyReceive,"string(/*[local-name()='Notification']/*[local-name()='Info']/text())");  
    ```  
  
     <span data-ttu-id="3cd94-240">Dans cette requête xpath, **NotifyReceive** est le message que vous avez créé pour la réception des messages de notification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-240">In this xpath query, **NotifyReceive** is the message you created for receiving notification messages.</span></span> <span data-ttu-id="3cd94-241">L’extrait de code dans le `string` fonction indique que la requête doit extraire la valeur dans la `<Info>` balise, qui à son tour se trouve dans le `<Notification>` balise.</span><span class="sxs-lookup"><span data-stu-id="3cd94-241">The excerpt within the `string` function indicates that the query must extract the value within the `<Info>` tag, which in turn is within the `<Notification>` tag.</span></span> <span data-ttu-id="3cd94-242">Enfin, la valeur extraite par la requête est affectée à la **NotificaitonType** variable.</span><span class="sxs-lookup"><span data-stu-id="3cd94-242">Finally, the value extracted by the query is assigned to the **NotificaitonType** variable.</span></span>  
  
### <a name="adding-a-decide-shape"></a><span data-ttu-id="3cd94-243">Ajout d’une forme décider</span><span class="sxs-lookup"><span data-stu-id="3cd94-243">Adding a Decide Shape</span></span>  
 <span data-ttu-id="3cd94-244">L’objectif de l’ajout d’une forme décider doit inclure un bloc de décision dans l’orchestration afin de déterminer les pour effectuer les opérations suivantes en fonction du type de message de notification reçu.</span><span class="sxs-lookup"><span data-stu-id="3cd94-244">The purpose of adding a Decide shape is to include a decision block in the orchestration to decide what subsequent operations to perform based on the kind of notification message received.</span></span> <span data-ttu-id="3cd94-245">La décision est prise en fonction de la valeur de la **NotificationType** variable.</span><span class="sxs-lookup"><span data-stu-id="3cd94-245">The decision is made on the basis of the value of the **NotificationType** variable.</span></span> <span data-ttu-id="3cd94-246">Dans cette rubrique, l’orchestration prend une décision en fonction du type de message de notification reçu.</span><span class="sxs-lookup"><span data-stu-id="3cd94-246">In this topic, the orchestration makes a decision based on the kind of notification message received.</span></span> <span data-ttu-id="3cd94-247">Par conséquent, la condition de la forme de la règle est spécifiée comme suit :</span><span class="sxs-lookup"><span data-stu-id="3cd94-247">So, the condition in the Rule shape is specified as follows:</span></span>  
  
```  
NotificationType.Equals("Insert") | NotificationType.Equals("Update")  
```  
  
 <span data-ttu-id="3cd94-248">Cette condition suggère que se la valeur de **NotificaitonType** variable est Insert ou Update, l’orchestration effectue un ensemble de tâches.</span><span class="sxs-lookup"><span data-stu-id="3cd94-248">This condition suggests that if the value for **NotificaitonType** variable is Insert or Update, the orchestration will perform one set of tasks.</span></span> <span data-ttu-id="3cd94-249">Si la valeur de **NotificationType** variable est autre chose, l’orchestration exécutera un autre ensemble de tâches.</span><span class="sxs-lookup"><span data-stu-id="3cd94-249">If the value of **NotificationType** variable is anything else, the orchestration will perform other set of tasks.</span></span>  
  
 <span data-ttu-id="3cd94-250">Comme indiqué dans les sections précédentes, pour illustrer une approche simple, l’orchestration de copier les messages dans des dossiers différents en fonction du type de message de notification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-250">As mentioned in the preceding sections, to demonstrate a simple approach, the orchestration will copy messages to different folders based on the notification message type.</span></span> <span data-ttu-id="3cd94-251">C’est le cas, dans la règle et les blocs Else, vous devez ajouter des formes d’envoi pour envoyer les messages vers différents ports.</span><span class="sxs-lookup"><span data-stu-id="3cd94-251">So, within the Rule and Else blocks, you must add Send shapes to send the messages to different ports.</span></span> <span data-ttu-id="3cd94-252">Pour cette rubrique, nom de la forme envoi dans le bloc de règle comme **SendUpsertNotification** et la forme envoi dans le bloc Else comme **SendOtherNotification**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-252">For this topic, name the Send shape in the Rule block as **SendUpsertNotification** and the Send shape in the Else block as **SendOtherNotification**.</span></span>  
  
### <a name="adding-ports"></a><span data-ttu-id="3cd94-253">Ajout de Ports</span><span class="sxs-lookup"><span data-stu-id="3cd94-253">Adding Ports</span></span>  
 <span data-ttu-id="3cd94-254">Vous devez maintenant ajouter les ports logiques suivants à l’orchestration :</span><span class="sxs-lookup"><span data-stu-id="3cd94-254">You must now add the following logical ports to the orchestration:</span></span>  
  
-   <span data-ttu-id="3cd94-255">Unidirectionnel port de réception pour recevoir des messages de notification de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-255">One-way receive port to receive notification messages from SQL Server.</span></span>  
  
-   <span data-ttu-id="3cd94-256">Port d’envoi unidirectionnel pour envoyer des messages de notification pour les opérations Insert et Update dans un dossier spécifique.</span><span class="sxs-lookup"><span data-stu-id="3cd94-256">One-way send port to send notification messages for Insert and Update operations to a specific folder.</span></span>  
  
-   <span data-ttu-id="3cd94-257">Port d’envoi unidirectionnel pour envoyer des messages de notification pour toutes les autres opérations à un dossier spécifique.</span><span class="sxs-lookup"><span data-stu-id="3cd94-257">One-way send port to send notification messages for any other operations to a specific folder.</span></span>  
  
 <span data-ttu-id="3cd94-258">Assurez-vous que vous spécifiez les propriétés suivantes pour chacun des ports logiques.</span><span class="sxs-lookup"><span data-stu-id="3cd94-258">Make sure you specify the following properties for each of the logical ports.</span></span> <span data-ttu-id="3cd94-259">Les noms répertoriés dans la colonne de Port sont les noms des ports tel qu’affiché dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="3cd94-259">The names listed in the Port column are the names of the ports as displayed in the orchestration.</span></span>  
  
|<span data-ttu-id="3cd94-260">Port</span><span class="sxs-lookup"><span data-stu-id="3cd94-260">Port</span></span>|<span data-ttu-id="3cd94-261">Propriétés</span><span class="sxs-lookup"><span data-stu-id="3cd94-261">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="3cd94-262">SQLNotifyPort</span><span class="sxs-lookup"><span data-stu-id="3cd94-262">SQLNotifyPort</span></span>|<span data-ttu-id="3cd94-263">-Définissez **identificateur** à *SQLNotifyPort*</span><span class="sxs-lookup"><span data-stu-id="3cd94-263">- Set **Identifier** to *SQLNotifyPort*</span></span><br /><br /> <span data-ttu-id="3cd94-264">-Définissez **Type** à *SQLNotifyPortType*</span><span class="sxs-lookup"><span data-stu-id="3cd94-264">- Set **Type** to *SQLNotifyPortType*</span></span><br /><br /> <span data-ttu-id="3cd94-265">-Définissez **modèle de Communication** à *à sens unique*</span><span class="sxs-lookup"><span data-stu-id="3cd94-265">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="3cd94-266">-Définissez **Direction de Communication** à *de réception*</span><span class="sxs-lookup"><span data-stu-id="3cd94-266">- Set **Communication Direction** to *Receive*</span></span>|  
|<span data-ttu-id="3cd94-267">NotificationUpsertPort</span><span class="sxs-lookup"><span data-stu-id="3cd94-267">NotificationUpsertPort</span></span>|<span data-ttu-id="3cd94-268">-Définissez **identificateur** à *NotificationUpsertPort*</span><span class="sxs-lookup"><span data-stu-id="3cd94-268">- Set **Identifier** to *NotificationUpsertPort*</span></span><br /><br /> <span data-ttu-id="3cd94-269">-Définissez **Type** à *NotificationUpsertPortType*</span><span class="sxs-lookup"><span data-stu-id="3cd94-269">- Set **Type** to *NotificationUpsertPortType*</span></span><br /><br /> <span data-ttu-id="3cd94-270">-Définissez **modèle de Communication** à *à sens unique*</span><span class="sxs-lookup"><span data-stu-id="3cd94-270">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="3cd94-271">-Définissez **Direction de Communication** à *envoyer*</span><span class="sxs-lookup"><span data-stu-id="3cd94-271">- Set **Communication Direction** to *Send*</span></span>|  
|<span data-ttu-id="3cd94-272">OtherNotificationPort</span><span class="sxs-lookup"><span data-stu-id="3cd94-272">OtherNotificationPort</span></span>|<span data-ttu-id="3cd94-273">-Définissez **identificateur** à *OtherNotificationPort*</span><span class="sxs-lookup"><span data-stu-id="3cd94-273">- Set **Identifier** to *OtherNotificationPort*</span></span><br /><br /> <span data-ttu-id="3cd94-274">-Définissez **Type** à *OtherNotificationPortType*</span><span class="sxs-lookup"><span data-stu-id="3cd94-274">- Set **Type** to *OtherNotificationPortType*</span></span><br /><br /> <span data-ttu-id="3cd94-275">-Définissez **modèle de Communication** à *à sens unique*</span><span class="sxs-lookup"><span data-stu-id="3cd94-275">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="3cd94-276">-Définissez **Direction de Communication** à *envoyer*</span><span class="sxs-lookup"><span data-stu-id="3cd94-276">- Set **Communication Direction** to *Send*</span></span>|  
  
### <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="3cd94-277">Spécifier des Messages pour les formes d’Action et de se connecter à des Ports</span><span class="sxs-lookup"><span data-stu-id="3cd94-277">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="3cd94-278">Le tableau suivant indique les propriétés et leurs valeurs, vous devez définir pour spécifier les messages de formes d’action et lier les messages aux ports.</span><span class="sxs-lookup"><span data-stu-id="3cd94-278">The following table specifies the properties and their values that you should set to specify messages for action shapes and to link the messages to the ports.</span></span> <span data-ttu-id="3cd94-279">Les noms répertoriés dans la colonne de forme sont les noms des formes de message tel qu’affiché dans l’orchestration mentionnée précédemment.</span><span class="sxs-lookup"><span data-stu-id="3cd94-279">The names listed in the Shape column are the names of the message shapes as displayed in the orchestration mentioned earlier.</span></span>  
  
|<span data-ttu-id="3cd94-280">Graphique à base de formes</span><span class="sxs-lookup"><span data-stu-id="3cd94-280">Shape</span></span>|<span data-ttu-id="3cd94-281">Propriétés</span><span class="sxs-lookup"><span data-stu-id="3cd94-281">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="3cd94-282">ReceiveNotification</span><span class="sxs-lookup"><span data-stu-id="3cd94-282">ReceiveNotification</span></span>|<span data-ttu-id="3cd94-283">-Définissez **Message** à *NotifyReceive*</span><span class="sxs-lookup"><span data-stu-id="3cd94-283">- Set **Message** to *NotifyReceive*</span></span><br /><br /> <span data-ttu-id="3cd94-284">-Définissez **opération** à *SQLNotifyPort.Notify.Request*</span><span class="sxs-lookup"><span data-stu-id="3cd94-284">- Set **Operation** to *SQLNotifyPort.Notify.Request*</span></span>|  
|<span data-ttu-id="3cd94-285">SendUpsertNotification</span><span class="sxs-lookup"><span data-stu-id="3cd94-285">SendUpsertNotification</span></span>|<span data-ttu-id="3cd94-286">-Définissez **Message** à *NotifyReceive*</span><span class="sxs-lookup"><span data-stu-id="3cd94-286">- Set **Message** to *NotifyReceive*</span></span><br /><br /> <span data-ttu-id="3cd94-287">-Définissez **opération** à *NotificationUpsertPort.Upsert.Request*</span><span class="sxs-lookup"><span data-stu-id="3cd94-287">- Set **Operation** to *NotificationUpsertPort.Upsert.Request*</span></span>|  
|<span data-ttu-id="3cd94-288">SendOtherNotification</span><span class="sxs-lookup"><span data-stu-id="3cd94-288">SendOtherNotification</span></span>|<span data-ttu-id="3cd94-289">-Définissez **Message** à *sélectionner*</span><span class="sxs-lookup"><span data-stu-id="3cd94-289">- Set **Message** to *Select*</span></span><br /><br /> <span data-ttu-id="3cd94-290">-Définissez **opération** à *OtherNotificationPort.Other.Request*</span><span class="sxs-lookup"><span data-stu-id="3cd94-290">- Set **Operation** to *OtherNotificationPort.Other.Request*</span></span>|  
  
 <span data-ttu-id="3cd94-291">Une fois que vous avez défini ces propriétés, les formes de message et les ports sont connectés et l’orchestration est terminée.</span><span class="sxs-lookup"><span data-stu-id="3cd94-291">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  
  
 <span data-ttu-id="3cd94-292">Vous devez maintenant générer la solution BizTalk et déployez-le dans un [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3cd94-292">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="3cd94-293">Pour plus d’informations, consultez [génération et exécution des Orchestrations](../../core/building-and-running-orchestrations.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-293">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md).</span></span>
  
## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="3cd94-294">Configuration de l’Application BizTalk</span><span class="sxs-lookup"><span data-stu-id="3cd94-294">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="3cd94-295">Après avoir déployé le projet BizTalk, l’orchestration que vous avez créé précédemment est répertoriée sous le **Orchestrations** volet de la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-295">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="3cd94-296">Vous devez utiliser la console Administration de BizTalk Server pour configurer l’application.</span><span class="sxs-lookup"><span data-stu-id="3cd94-296">You must use the BizTalk Server Administration console to configure the application.</span></span> <span data-ttu-id="3cd94-297">Pour une procédure pas à pas, consultez [procédure pas à pas : déploiement d’une Application BizTalk base](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-297">For a walkthrough, see [Walkthrough: Deploying a Basic BizTalk Application](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span></span>  
  
 <span data-ttu-id="3cd94-298">Configuration d’une application implique :</span><span class="sxs-lookup"><span data-stu-id="3cd94-298">Configuring an application involves:</span></span>  
  
-   <span data-ttu-id="3cd94-299">Sélection d’un hôte de l’application.</span><span class="sxs-lookup"><span data-stu-id="3cd94-299">Selecting a host for the application.</span></span>  
  
-   <span data-ttu-id="3cd94-300">Mappage de ports que vous avez créé dans l’orchestration aux ports physiques dans la console Administration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-300">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="3cd94-301">Pour cette orchestration, vous devez :</span><span class="sxs-lookup"><span data-stu-id="3cd94-301">For this orchestration you must:</span></span>  
  
    -   <span data-ttu-id="3cd94-302">Définir un WCF-Custom physique ou le port de réception unidirectionnel WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="3cd94-302">Define a physical WCF-Custom or WCF-SQL one-way receive port.</span></span> <span data-ttu-id="3cd94-303">Ce port d’écoute pour les notifications provenant de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-303">This port listens for notifications coming from the SQL Server database.</span></span> <span data-ttu-id="3cd94-304">Pour plus d’informations sur la création de ports, consultez [configurer manuellement une liaison de port physique à l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-304">For information about how to create ports, see [Manually configure a physical port binding to the SQL adapter](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span></span> <span data-ttu-id="3cd94-305">Assurez-vous que vous spécifiez les propriétés suivantes de la liaison pour le port de réception.</span><span class="sxs-lookup"><span data-stu-id="3cd94-305">Make sure you specify the following binding properties for the receive port.</span></span>  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="3cd94-306">Vous n’avez pas besoin d’effectuer cette étape si vous avez spécifié les propriétés de liaison au moment du design.</span><span class="sxs-lookup"><span data-stu-id="3cd94-306">You do not need to perform this step if you specified the binding properties at design-time.</span></span> <span data-ttu-id="3cd94-307">Dans ce cas, vous pouvez créer un WCF-custom ou WCF-SQL port de réception, avec le jeu de propriétés de liaison requis, en important le fichier de liaison créé par le [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3cd94-307">In such a case, you can create a WCF-custom or WCF-SQL receive port, with the required binding properties set, by importing the binding file created by the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span> <span data-ttu-id="3cd94-308">Pour plus d’informations, consultez [configurer une liaison de port physique à l’aide d’un fichier de liaison de port à utiliser l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-308">For more information see [Configure a physical port binding using a port binding file to use the SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span></span>  
  
        |<span data-ttu-id="3cd94-309">Propriété de liaison</span><span class="sxs-lookup"><span data-stu-id="3cd94-309">Binding Property</span></span>|<span data-ttu-id="3cd94-310">Valeur</span><span class="sxs-lookup"><span data-stu-id="3cd94-310">Value</span></span>|  
        |----------------------|-----------|  
        |<span data-ttu-id="3cd94-311">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="3cd94-311">**InboundOperationType**</span></span>|<span data-ttu-id="3cd94-312">Affectez la valeur **Notification**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-312">Set this to **Notification**.</span></span>|  
        |<span data-ttu-id="3cd94-313">**NotificationStatement**</span><span class="sxs-lookup"><span data-stu-id="3cd94-313">**NotificationStatement**</span></span>|<span data-ttu-id="3cd94-314">Affectez la valeur :</span><span class="sxs-lookup"><span data-stu-id="3cd94-314">Set this to:</span></span><br /><br /> `SELECT Employee_ID, Name FROM dbo.Employee WHERE Status=0`<br /><br /> <span data-ttu-id="3cd94-315">**Remarque :** vous devez spécifier plus précisément les noms de colonnes dans l’instruction comme indiqué dans l’instruction SELECT suivante.</span><span class="sxs-lookup"><span data-stu-id="3cd94-315">**Note:** You must specifically specify the column names in the statement as shown in this SELECT statement.</span></span> <span data-ttu-id="3cd94-316">En outre, vous devez toujours spécifier le nom de table, ainsi que le nom du schéma.</span><span class="sxs-lookup"><span data-stu-id="3cd94-316">Also, you must always specify the table name along with the schema name.</span></span> <span data-ttu-id="3cd94-317">Par exemple, `dbo.Employee`.</span><span class="sxs-lookup"><span data-stu-id="3cd94-317">For example, `dbo.Employee`.</span></span>|  
        |<span data-ttu-id="3cd94-318">**NotifyOnListenerStart**</span><span class="sxs-lookup"><span data-stu-id="3cd94-318">**NotifyOnListenerStart**</span></span>|<span data-ttu-id="3cd94-319">Affectez la valeur **True**.</span><span class="sxs-lookup"><span data-stu-id="3cd94-319">Set this to **True**.</span></span>|  
  
         <span data-ttu-id="3cd94-320">Pour plus d’informations sur les propriétés de liaison différente, consultez [en savoir plus sur l’adaptateur BizTalk pour les propriétés de liaison de l’adaptateur SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-320">For more information about the different binding properties, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="3cd94-321">Nous vous recommandons de configurer le niveau d’isolation de transaction et le délai d’attente de transaction lors de l’exécution d’opérations entrantes à l’aide de la [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3cd94-321">We recommend configuring the transaction isolation level and the transaction timeout while performing inbound operations using the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="3cd94-322">Vous pouvez effectuer afin d’en ajoutant le service de port de réception comportement lors de la configuration WCF-Custom ou WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="3cd94-322">You can do so by adding the service behavior while configuring the WCF-Custom or WCF-SQL receive port.</span></span> <span data-ttu-id="3cd94-323">Pour obtenir des instructions sur la façon d’ajouter le comportement de service, consultez [configurer Transaction Isolation Level et délai de Transaction SQL](../../adapters-and-accelerators/adapter-sql/configure-transaction-isolation-level-and-transaction-timeout-with-sql.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-323">For instruction on how to add the service behavior, see [Configure Transaction Isolation Level and Transaction Timeout with SQL](../../adapters-and-accelerators/adapter-sql/configure-transaction-isolation-level-and-transaction-timeout-with-sql.md).</span></span>  
  
    -   <span data-ttu-id="3cd94-324">Définir un emplacement sur le disque dur et un port de fichier correspondant dans lequel l’orchestration BizTalk supprime les messages de notification à partir de la base de données SQL Server pour les opérations Insert et Update.</span><span class="sxs-lookup"><span data-stu-id="3cd94-324">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the notification messages from the SQL Server database for Insert and Update operations.</span></span> <span data-ttu-id="3cd94-325">Configurer ce port pour supprimer les messages de notification dans le dossier C:\TestLocation\UpsertNotification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-325">Configure this port to drop notification messages to the folder C:\TestLocation\UpsertNotification.</span></span>  
  
    -   <span data-ttu-id="3cd94-326">Définir un emplacement sur le disque dur et un port de fichier correspondant dans lequel l’orchestration BizTalk supprime les messages de notification à partir de la base de données SQL Server pour toutes les autres opérations.</span><span class="sxs-lookup"><span data-stu-id="3cd94-326">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the notification messages from the SQL Server database for all other operations.</span></span> <span data-ttu-id="3cd94-327">Configurer ce port pour supprimer les messages de notification dans le dossier C:\TestLocation\OtherNotification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-327">Configure this port to drop notification messages to the folder C:\TestLocation\OtherNotification.</span></span>  
  
## <a name="starting-the-application"></a><span data-ttu-id="3cd94-328">Démarrage de l’Application</span><span class="sxs-lookup"><span data-stu-id="3cd94-328">Starting the Application</span></span>  
 <span data-ttu-id="3cd94-329">Vous devez démarrer l’application BizTalk pour la réception des messages de notification à partir de la base de données SQL Server et pour effectuer les opérations Select et de mise à jour ultérieures.</span><span class="sxs-lookup"><span data-stu-id="3cd94-329">You must start the BizTalk application for receiving notification messages from the SQL Server database and for performing the subsequent Select and Update operations.</span></span> <span data-ttu-id="3cd94-330">Pour obtenir des instructions sur le démarrage d’une application BizTalk, consultez [comment démarrer une Orchestration](../../core/how-to-start-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-330">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md).</span></span>
  
 <span data-ttu-id="3cd94-331">À ce stade, vérifiez que :</span><span class="sxs-lookup"><span data-stu-id="3cd94-331">At this stage, make sure:</span></span>  
  
-   <span data-ttu-id="3cd94-332">Le WCF-Custom ou WCF-SQL unidirectionnel port de réception, qui reçoit les messages de notification à partir de la base de données est en cours d’exécution de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3cd94-332">The WCF-Custom or WCF-SQL one-way receive port, which receives the notification messages from the SQL Server database is running.</span></span>  
  
-   <span data-ttu-id="3cd94-333">Les deux ports d’envoi de fichier, qui permet de recevoir des messages à partir de SQL Server, sont en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="3cd94-333">The two FILE send ports, which receive messages from SQL Server, are running.</span></span>  
  
-   <span data-ttu-id="3cd94-334">L’orchestration BizTalk pour l’opération est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="3cd94-334">The BizTalk orchestration for the operation is running.</span></span>  
  
## <a name="executing-the-operation"></a><span data-ttu-id="3cd94-335">L’exécution de l’opération</span><span class="sxs-lookup"><span data-stu-id="3cd94-335">Executing the Operation</span></span>  
 <span data-ttu-id="3cd94-336">Une fois que vous démarrez l’orchestration BizTalk, l’ensemble d’actions suivantes ont lieu :</span><span class="sxs-lookup"><span data-stu-id="3cd94-336">After you start the BizTalk orchestration, the following set of actions take place:</span></span>  
  
-   <span data-ttu-id="3cd94-337">Étant donné que la **NotifyOnListenerStart** liaison de la propriété est définie sur **True**, le message d’erreur suivant :</span><span class="sxs-lookup"><span data-stu-id="3cd94-337">Because the **NotifyOnListenerStart** binding property is set to **True**, you receive the following message:</span></span>  
  
    ```  
    \<?xml version="1.0" encoding="utf-8" ?>  
    <Notification xmlns="http://schemas.microsoft.com/Sql/2008/05/Notification/">  
      <Info>ListenerStarted</Info>   
      <Source>SqlBinding</Source>   
      <Type>Startup</Type>   
    </Notification>  
    ```  
  
     <span data-ttu-id="3cd94-338">Notez que la valeur dans la `<Info>` balise est « ListnerStarted ».</span><span class="sxs-lookup"><span data-stu-id="3cd94-338">Note that the value in the `<Info>` tag is “ListnerStarted”.</span></span> <span data-ttu-id="3cd94-339">Par conséquent, ce message est reçu dans le dossier de C:\TestLocation\OtherNotification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-339">Hence, this message is received in C:\TestLocation\OtherNotification folder.</span></span>  
  
-   <span data-ttu-id="3cd94-340">Insérer un enregistrement dans la table Employee.</span><span class="sxs-lookup"><span data-stu-id="3cd94-340">Insert a record in the Employee table.</span></span> <span data-ttu-id="3cd94-341">Vous recevez un message de notification qui ressemble à la suivante :</span><span class="sxs-lookup"><span data-stu-id="3cd94-341">You will receive a notification message resembling the following:</span></span>  
  
    ```  
    \<?xml version="1.0" encoding="utf-8" ?>   
    <Notification xmlns="http://schemas.microsoft.com/Sql/2008/05/Notification/">  
      <Info>Insert</Info>   
      <Source>Data</Source>   
      <Type>Change</Type>   
    </Notification>  
    ```  
  
     <span data-ttu-id="3cd94-342">Notez que la valeur dans la `<Info>` balise est « Insert ».</span><span class="sxs-lookup"><span data-stu-id="3cd94-342">Note that the value in the `<Info>` tag is “Insert”.</span></span> <span data-ttu-id="3cd94-343">Par conséquent, ce message est reçu dans le dossier de C:\TestLocation\UpsertNotification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-343">Hence, this message is received in C:\TestLocation\UpsertNotification folder.</span></span>  
  
-   <span data-ttu-id="3cd94-344">Mettre à jour un enregistrement dans la table Employee.</span><span class="sxs-lookup"><span data-stu-id="3cd94-344">Update a record in the Employee table.</span></span> <span data-ttu-id="3cd94-345">Vous recevez un message de notification qui ressemble à la suivante :</span><span class="sxs-lookup"><span data-stu-id="3cd94-345">You will receive a notification message resembling the following:</span></span>  
  
    ```  
    \<?xml version="1.0" encoding="utf-8" ?>  
    <Notification xmlns="http://schemas.microsoft.com/Sql/2008/05/Notification/">  
      <Info>Update</Info>   
      <Source>Data</Source>   
      <Type>Change</Type>   
    </Notification>  
    ```  
  
     <span data-ttu-id="3cd94-346">Notez que la valeur dans la `<Info>` balise est « Update ».</span><span class="sxs-lookup"><span data-stu-id="3cd94-346">Note that the value in the `<Info>` tag is “Update”.</span></span> <span data-ttu-id="3cd94-347">Par conséquent, ce message est reçu dans le dossier de C:\TestLocation\UpsertNotification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-347">Hence, this message is received in C:\TestLocation\UpsertNotification folder.</span></span>  
  
-   <span data-ttu-id="3cd94-348">Supprimer un enregistrement de la table Employee.</span><span class="sxs-lookup"><span data-stu-id="3cd94-348">Delete a record from the Employee table.</span></span> <span data-ttu-id="3cd94-349">Vous recevez un message de notification qui ressemble à la suivante :</span><span class="sxs-lookup"><span data-stu-id="3cd94-349">You will receive a notification message resembling the following:</span></span>  
  
    ```  
    \<?xml version="1.0" encoding="utf-8" ?>  
    <Notification xmlns="http://schemas.microsoft.com/Sql/2008/05/Notification/">  
      <Info>Delete</Info>   
      <Source>Data</Source>   
      <Type>Change</Type>   
    </Notification>  
    ```  
  
     <span data-ttu-id="3cd94-350">Notez que la valeur dans la `<Info>` balise est « Delete ».</span><span class="sxs-lookup"><span data-stu-id="3cd94-350">Note that the value in the `<Info>` tag is “Delete”.</span></span> <span data-ttu-id="3cd94-351">Par conséquent, ce message est reçu dans le dossier de C:\TestLocation\OtherNotification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-351">Hence, this message is received in C:\TestLocation\OtherNotification folder.</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="3cd94-352">Bonnes pratiques</span><span class="sxs-lookup"><span data-stu-id="3cd94-352">Best Practices</span></span>  
 <span data-ttu-id="3cd94-353">Après avoir déployé et configuré le projet BizTalk, vous pouvez exporter les paramètres de configuration dans un fichier XML appelé le fichier de liaison.</span><span class="sxs-lookup"><span data-stu-id="3cd94-353">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the binding file.</span></span> <span data-ttu-id="3cd94-354">Une fois que vous générez un fichier de liaison, vous pouvez importer les paramètres de configuration à partir du fichier, afin que vous n’avez pas besoin de créer les ports d’envoi et de réception pour l’orchestration même.</span><span class="sxs-lookup"><span data-stu-id="3cd94-354">Once you generate a binding file, you can import the configuration settings from the file, so that you do not need to create the send ports and receive ports for the same orchestration.</span></span> <span data-ttu-id="3cd94-355">Pour plus d’informations sur les fichiers de liaison, consultez [réutiliser les liaisons de l’adaptateur](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-355">For more information about binding files, see [Reuse adapter bindings](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span></span>
  
## <a name="performing-complex-operations-after-receiving-notification-messages"></a><span data-ttu-id="3cd94-356">Exécution d’opérations complexes après la réception des Messages de Notification</span><span class="sxs-lookup"><span data-stu-id="3cd94-356">Performing Complex Operations After Receiving Notification Messages</span></span>  
 <span data-ttu-id="3cd94-357">Pour plus de simplicité et de mieux comprendre, l’orchestration dans cette rubrique copie des messages dans des dossiers différents selon le type de notification.</span><span class="sxs-lookup"><span data-stu-id="3cd94-357">For simplicity and better understanding, the orchestration in this topic copies messages to different folders based on the notification type.</span></span> <span data-ttu-id="3cd94-358">Toutefois, dans les scénarios réels, vous souhaiterez effectuer des opérations plus complexes.</span><span class="sxs-lookup"><span data-stu-id="3cd94-358">However, in real-world scenarios you might want to perform more complex operations.</span></span> <span data-ttu-id="3cd94-359">Vous pouvez effectuer les procédures similaires comme indiqué dans cette rubrique, la build sur ces derniers pour effectuer les opérations que vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="3cd94-359">You can perform similar procedures as provided in this topic and build on them to perform the operations you wish.</span></span> <span data-ttu-id="3cd94-360">Par exemple, vous pouvez modifier l’orchestration pour insérer des enregistrements dans une autre table si vous obtenez un message de notification pour une opération d’insertion sur la table Employee.</span><span class="sxs-lookup"><span data-stu-id="3cd94-360">For example, you can change the orchestration to insert records in another table if you get a notification message for an Insert operation on the Employee table.</span></span> <span data-ttu-id="3cd94-361">Dans ce cas, vous pouvez apporter des modifications appropriées au sein de la forme décider.</span><span class="sxs-lookup"><span data-stu-id="3cd94-361">In such a case, you can make appropriate changes within the Decide shape.</span></span>  
  
 <span data-ttu-id="3cd94-362">Un tel scénario est expliqué en détail dans [didacticiel 2 : employé - processus de bon de commande à l’aide de l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/tutorial-2-employee-purchase-order-process-using-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="3cd94-362">One such scenario is explained in detail in [Tutorial 2: Employee - Purchase Order Process using the SQL adapter](../../adapters-and-accelerators/adapter-sql/tutorial-2-employee-purchase-order-process-using-the-sql-adapter.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3cd94-363">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="3cd94-363">See Also</span></span>  
 [<span data-ttu-id="3cd94-364">Recevoir des Notifications de requête SQL à l’aide de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="3cd94-364">Receive SQL Query Notifications using BizTalk Server</span></span>](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md)