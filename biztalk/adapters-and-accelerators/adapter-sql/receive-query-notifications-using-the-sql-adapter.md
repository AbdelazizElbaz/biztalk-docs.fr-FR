---
title: "Recevoir des notifications de requête à l’aide de l’adaptateur SQL | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 6b2ed0f0-d005-4eec-b1a6-97a0c94678dc
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 37d333a2248c943d1d404aa086565ae4b1662226
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="receive-query-notifications-using-the-sql-adapter"></a><span data-ttu-id="bc0bd-102">Recevoir des notifications de requête à l’aide de l’adaptateur SQL</span><span class="sxs-lookup"><span data-stu-id="bc0bd-102">Receive query notifications using the SQL adapter</span></span>
<span data-ttu-id="bc0bd-103">Les clients de l’adaptateur peuvent s’abonner pour recevoir des notifications de requêtes sur les modifications de données dans la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-103">The adapter clients can subscribe to receive query notifications about the data changes in the SQL Server database.</span></span> <span data-ttu-id="bc0bd-104">Une instruction SQL SELECT ou une procédure stockée spécifie les critères de modification de données dans une table pour déclencher des notifications de requête et le serveur SQL Server envoie des notifications de requête en tant qu’et lorsque le jeu de résultats pour l’instruction SELECT ou la procédure stockée est modifiée.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-104">A SQL SELECT statement or a stored procedure specifies the data-change criteria in a table for triggering of the query notifications, and the SQL Server sends query notifications as and when the result set for the SELECT statement or the stored procedure changes.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="bc0bd-105">Pour prendre en charge les notifications de requête, les clients de l’adaptateur et la base de données SQL Server doivent répondre à certaines exigences.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-105">To support query notifications, the adapter clients and the SQL Server database have to fulfill certain requirements.</span></span> <span data-ttu-id="bc0bd-106">Pour plus d’informations sur la configuration requise, consultez « Activation des Notifications de requête » à [http://go.microsoft.com/fwlink/?LinkID=122323](http://go.microsoft.com/fwlink/?LinkID=122323).</span><span class="sxs-lookup"><span data-stu-id="bc0bd-106">For detailed information about these requirements, see “Enabling Query Notifications” at [http://go.microsoft.com/fwlink/?LinkID=122323](http://go.microsoft.com/fwlink/?LinkID=122323).</span></span>  
  
 <span data-ttu-id="bc0bd-107">Une notification de requête classique implique les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="bc0bd-107">A typical query notification involves the following:</span></span>  
  
-   <span data-ttu-id="bc0bd-108">Les clients de l’adaptateur doivent spécifier `Notification` en tant que l’opération entrante dans le **InboundOperationType** propriété de liaison.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-108">The adapter clients must specify `Notification` as the inbound operation in the **InboundOperationType** binding property.</span></span> <span data-ttu-id="bc0bd-109">La valeur par défaut pour cette propriété de liaison est `Polling`.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-109">The default value for this binding property is `Polling`.</span></span>  
  
-   <span data-ttu-id="bc0bd-110">Les clients de l’adaptateur doivent spécifier une instruction SQL à s’inscrire aux notifications de requête dans le **NotificationStatement** propriété de liaison.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-110">The adapter clients must specify a SQL statement to register for query notifications in the **NotificationStatement** binding property.</span></span> <span data-ttu-id="bc0bd-111">Le client de l’adaptateur obtient une notification à partir de SQL Server dès que le jeu de résultats pour que les modifications d’instruction SQL spécifiées.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-111">The adapter client gets a notification from SQL Server as soon as the result set for the specified SQL statement changes.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="bc0bd-112">Pour recevoir des notifications, l’instruction SQL pour l’abonnement aux notifications *doit* répondent à certains critères.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-112">To receive notifications, the SQL statement for the notification subscription *must* meet certain criteria.</span></span> <span data-ttu-id="bc0bd-113">Pour plus d’informations sur les instructions SQL qui peut être utilisé pour les notifications de requête, consultez [http://go.microsoft.com/fwlink/?LinkId=122160](http://go.microsoft.com/fwlink/?LinkId=122160).</span><span class="sxs-lookup"><span data-stu-id="bc0bd-113">For information about SQL statements that can be used for query notifications, see [http://go.microsoft.com/fwlink/?LinkId=122160](http://go.microsoft.com/fwlink/?LinkId=122160).</span></span>  
  
-   <span data-ttu-id="bc0bd-114">Les clients de l’adaptateur doivent spécifier si l’adaptateur envoie une notification pour les clients de l’adaptateur dès que l’écouteur est démarré dans le **NotifyOnListenerStart** propriété de liaison.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-114">The adapter clients must specify whether the adapter sends a notification to the adapter clients as soon as the listener is started in the **NotifyOnListenerStart** binding property.</span></span>  
  
-   <span data-ttu-id="bc0bd-115">La notification est envoyée aux clients en tant que carte et lorsque le jeu de résultats de l’instruction SQL spécifiée dans le **NotificationStatement** liaison de la propriété est modifiée.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-115">The notification is sent to the adapter clients as and when the result set of the SQL statement specified in the **NotificationStatement** binding property is changed.</span></span>  
  
 <span data-ttu-id="bc0bd-116">Pour plus d’informations sur ces propriétés de liaison, consultez [en savoir plus sur l’adaptateur BizTalk pour les propriétés de liaison de l’adaptateur SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="bc0bd-116">For more information about these binding properties, see [Read about the BizTalk Adapter for SQL Server adapter binding properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bc0bd-117">L’abonnement aux notifications est toujours validé, que si la transaction dans laquelle l’exécution de l’instruction a été validée ou restaurée.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-117">The notification subscription is always committed, regardless of whether the transaction in which the statement ran was committed or rolled back.</span></span> <span data-ttu-id="bc0bd-118">Par conséquent, l’opération de notification ne peut pas garantir que le résultat de la requête d’abonnement de notification a changé.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-118">Therefore, the notification operation might not guarantee that the result of the query subscribed for notification has changed.</span></span> <span data-ttu-id="bc0bd-119">Par exemple, supposons que les données sont insérées dans une ligne de table (abonnée pour la notification) dans une transaction, et immédiatement une notification est envoyée à l’adaptateur informer de la modification (insertion).</span><span class="sxs-lookup"><span data-stu-id="bc0bd-119">For example, suppose data is inserted in a table row (subscribed for notification) in a transaction, and immediately a notification is sent to the adapter informing about the change (insert).</span></span> <span data-ttu-id="bc0bd-120">En raison d’une raison quelconque, la transaction est restaurée et efficacement aucune donnée n’est insérée dans la ligne de table.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-120">Due to some reason, the transaction rolls back, and effectively no data is inserted into the table row.</span></span> <span data-ttu-id="bc0bd-121">Toutefois, le serveur SQL Server n’envoie pas d’une notification à l’adaptateur sur la restauration de transaction.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-121">However, the SQL Server does not send a notification to the adapter about the transaction roll back.</span></span> <span data-ttu-id="bc0bd-122">Pour plus d’informations sur les notifications de requête dans SQL Server, consultez [http://go.microsoft.com/fwlink/?LinkId=145367](http://go.microsoft.com/fwlink/?LinkId=145367).</span><span class="sxs-lookup"><span data-stu-id="bc0bd-122">For information about query notifications in SQL Server, see [http://go.microsoft.com/fwlink/?LinkId=145367](http://go.microsoft.com/fwlink/?LinkId=145367).</span></span>  
  
## <a name="differences-between-query-notification-and-polling"></a><span data-ttu-id="bc0bd-123">Différences entre la Notification de requête et d’interrogation</span><span class="sxs-lookup"><span data-stu-id="bc0bd-123">Differences between Query Notification and Polling</span></span>  
 <span data-ttu-id="bc0bd-124">Bien que l’interrogation et la notification de requête sont deux opérations entrantes et informent les clients de l’adaptateur sur les modifications de données dans la base de données SQL Server, le tableau suivant répertorie quelques différences entre les deux.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-124">Though query notification and polling are both inbound operations, and inform the adapter clients about the data changes in the SQL Server database, the following table lists some differences between the two.</span></span> <span data-ttu-id="bc0bd-125">Les différences suivantes vous aideront à choisir une opération selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="bc0bd-125">The following differences will help you decide on an operation depending on your requirements:</span></span>  
  
|<span data-ttu-id="bc0bd-126">Notification de requête</span><span class="sxs-lookup"><span data-stu-id="bc0bd-126">Query Notification</span></span>|<span data-ttu-id="bc0bd-127">Interrogation</span><span class="sxs-lookup"><span data-stu-id="bc0bd-127">Polling</span></span>|  
|------------------------|-------------|  
|<span data-ttu-id="bc0bd-128">Notification de requête est lancée par SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-128">Query notification is initiated by SQL Server.</span></span> <span data-ttu-id="bc0bd-129">L’instruction de notification émise par l’adaptateur simplement fait en sorte que la base de données pour lancer la notification au cas où une modification du jeu de résultats de l’instruction.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-129">The notification statement issued by the adapter just instructs the database to initiate notification in case there is a change in the result set of the statement.</span></span>|<span data-ttu-id="bc0bd-130">L’interrogation est lancée par l’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-130">Polling is initiated by the adapter.</span></span> <span data-ttu-id="bc0bd-131">L’adaptateur exécute une instruction pour vérifier si les données sont disponibles pour l’interrogation et initialise l’interrogation par l’exécution de l’instruction d’interrogation des données seront disponibles pour l’interrogation.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-131">The adapter executes a statement to validate whether data is available for polling, and then initiates polling by executing the polling statement if some data is available for polling.</span></span>|  
|<span data-ttu-id="bc0bd-132">Vous pouvez utiliser l’instruction de notification de requête à lire uniquement les données dans une table de base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-132">You can use the query notification statement to only read data in a SQL Server database table.</span></span>|<span data-ttu-id="bc0bd-133">Vous pouvez utiliser l’instruction d’interrogation pour lire ou mettre à jour des données dans une table de base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-133">You can use the polling statement to read or update data in a SQL Server database table.</span></span>|  
|<span data-ttu-id="bc0bd-134">Notification de requête informe uniquement sur le type de données, telles que Insert, Update et Delete.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-134">Query notification informs only about the type of change in the data such as Insert, Update, and Delete.</span></span>|<span data-ttu-id="bc0bd-135">L’interrogation vous informe sur les données réelles qui ont été modifiées.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-135">Polling informs you about the actual data that has changed.</span></span>|  
|<span data-ttu-id="bc0bd-136">La notification de modification de données est instantanée.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-136">The data-change notification is instantaneous.</span></span>|<span data-ttu-id="bc0bd-137">La notification de modification de données dépend de l’intervalle d’interrogation, et les clients de la carte sont informés des changements de données à la fin de chaque intervalle d’interrogation.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-137">The data-change notification depends on the polling interval, and the adapter clients are informed about the data changes at the end of every polling interval.</span></span> <span data-ttu-id="bc0bd-138">**Conseil :** interrogation peut vous fournir un meilleur débit dans les scénarios où les modifications de données sont produisent en permanence, et vous ne souhaitez pas être averti de chaque modification en tant qu’et lorsque cela se produit.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-138">**Tip:**  Polling can give you better throughput in scenarios where the data changes are happening continuously, and you do not want to be notified of each change as and when it happens.</span></span> <span data-ttu-id="bc0bd-139">Au lieu de cela, vous spécifiez un intervalle d’interrogation après laquelle vous souhaitez être averti de toutes les modifications qui se sont produites depuis la dernière notification de modification.</span><span class="sxs-lookup"><span data-stu-id="bc0bd-139">Instead, you specify a polling interval after which you want to be notified of all the changes that have happened since the last change notification.</span></span>|  
  
 <span data-ttu-id="bc0bd-140">Pour plus d’informations sur la notification de requête dans [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)], consultez [recevoir des Notifications de requête SQL à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="bc0bd-140">For more information about query notification in [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)], see [Receive SQL Query Notifications by Using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bc0bd-141">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="bc0bd-141">See Also</span></span>  
 <span data-ttu-id="bc0bd-142">[Quelles opérations peuvent être effectuées à l’aide de la carte ?](https://msdn.microsoft.com/library/cc185435(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="bc0bd-142">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185435(v=bts.10).aspx)</span></span>