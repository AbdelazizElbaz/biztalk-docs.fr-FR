---
title: "Utiliser des compteurs de Performance avec l’adaptateur SQL | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: ae381b78-d89e-4cf2-810b-821e49422463
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8f81189e34346d377686dac79b44e5a9b34889dc
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2017
---
# <a name="use-performance-counters-with-the-sql-adapter"></a><span data-ttu-id="5addd-102">Utiliser des compteurs de Performance avec l’adaptateur SQL</span><span class="sxs-lookup"><span data-stu-id="5addd-102">Use Performance Counters with the SQL adapter</span></span>
[!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)]<span data-ttu-id="5addd-103">les clients peuvent utiliser les compteurs de performance pour évaluer les performances des adaptateurs.</span><span class="sxs-lookup"><span data-stu-id="5addd-103"> clients can use the performance counters to gauge the performance of the adapters.</span></span> <span data-ttu-id="5addd-104">Le [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)] programme d’installation crée la catégorie de compteur de performances «[!INCLUDE[adaptersql](../../includes/adaptersql-md.md)]», ainsi que l’installation du Pack d’adaptateurs.</span><span class="sxs-lookup"><span data-stu-id="5addd-104">The [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)] setup program creates the performance counter category "[!INCLUDE[adaptersql](../../includes/adaptersql-md.md)]" along with the Adapter Pack installation.</span></span>  
  
## <a name="the-lob-time-cumulative-performance-counter"></a><span data-ttu-id="5addd-105">Le compteur de Performance du temps (cumulatif) LOB</span><span class="sxs-lookup"><span data-stu-id="5addd-105">The LOB Time (Cumulative) Performance Counter</span></span>  
 <span data-ttu-id="5addd-106">Le **.NET l’adaptateur BizTalk pour SQL** catégorie possède un compteur de performances « Temps LOB (cumulé) ».</span><span class="sxs-lookup"><span data-stu-id="5addd-106">The **BizTalk .NET Adapter for SQL** category has one performance counter called "LOB Time (Cumulative)".</span></span> <span data-ttu-id="5addd-107">Ce compteur de performance indique la durée, en millisecondes, prenant à la bibliothèque cliente SQL Server pour effectuer une action qui initialise de l’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="5addd-107">This performance counter denotes the time, in milliseconds, that the SQL Server client library takes to complete an action that the adapter initiates.</span></span> <span data-ttu-id="5addd-108">Le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] crée une instance du compteur de performance pour chaque action, d’un nom d’instance et base de données SQL Server spécifique.</span><span class="sxs-lookup"><span data-stu-id="5addd-108">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] creates an instance of the performance counter for each action, for a specific SQL Server instance and database name.</span></span> <span data-ttu-id="5addd-109">Les instances sont créées dans le modèle suivant :</span><span class="sxs-lookup"><span data-stu-id="5addd-109">The instances are created in the following pattern:</span></span>  
  
```  
<processId>:<appDomainId>:<endpointId>:<actionId>  
```  
  
 <span data-ttu-id="5addd-110">Le `<endpointId>` est dérivée en tant que `<sql_server_name>, <instance_name>, <database_name>`.</span><span class="sxs-lookup"><span data-stu-id="5addd-110">The `<endpointId>` is derived as `<sql_server_name>, <instance_name>, <database_name>`.</span></span>  
  
 <span data-ttu-id="5addd-111">Le \<actionId\> est dérivée de la manière suivante :</span><span class="sxs-lookup"><span data-stu-id="5addd-111">The \<actionId\> is derived in the following manner:</span></span>  
  
-   <span data-ttu-id="5addd-112">Pour ouvrir une connexion, l’ID d’action est « Open ».</span><span class="sxs-lookup"><span data-stu-id="5addd-112">For opening a connection, the action ID is “Open”.</span></span>  
  
-   <span data-ttu-id="5addd-113">Pour les opérations entrantes, l’ID de l’action est « Entrant ».</span><span class="sxs-lookup"><span data-stu-id="5addd-113">For inbound operations, the action ID is “Inbound”.</span></span>  
  
-   <span data-ttu-id="5addd-114">Pour les opérations sortantes, l’ID d’action est l’action de l’opération appelée, avec « / » remplacé par un trait de soulignement « _ ».</span><span class="sxs-lookup"><span data-stu-id="5addd-114">For outbound operations, the action ID is the action of the operation being invoked, with “/” replaced by an underscore “_”.</span></span> <span data-ttu-id="5addd-115">En outre, l’ID d’action est préfixé avec le « ExecuteScalar », « ExecuteReader » ou « ExecuteNonQuery » selon la méthode que l’adaptateur utilise en interne pour effectuer l’opération sur la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5addd-115">Also, the action ID is prefixed with the “ExecuteScalar”, “ExecuteReader”, or “ExecuteNonQuery” depending on the method that the adapter internally uses to perform the operation on the SQL Server database.</span></span> <span data-ttu-id="5addd-116">Par exemple, l’adaptateur utilise en interne la **ExecuteReader** méthode à exécuter une procédure stockée dans SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5addd-116">For example, the adapter internally uses the **ExecuteReader** method to execute a stored procedure in SQL Server.</span></span> <span data-ttu-id="5addd-117">Par conséquent, l’ID d’action pour la procédure stockée, MyProcedure, sera :</span><span class="sxs-lookup"><span data-stu-id="5addd-117">So, the action ID for the stored procedure, MyProcedure, will be:</span></span>  
  
    ```  
    ExecuteReader_Procedure_dbo_MyProcedure  
    ```  

 <span data-ttu-id="5addd-118">Le compteur de performance est initialisé uniquement après que l’adaptateur effectue le premier appel à la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5addd-118">The performance counter is initialized only after the adapter makes the first call to the SQL Server database.</span></span> <span data-ttu-id="5addd-119">En outre, le [InstanceLifetime a](https://msdn.microsoft.com/library/system.diagnostics.performancecounter.instancelifetime.aspx) du compteur de performance est définie sur « Processus », ce qui signifie que le compteur de performances cesse d’exister dès que le programme qui crée le compteur se termine.</span><span class="sxs-lookup"><span data-stu-id="5addd-119">Also, the [InstanceLifetime](https://msdn.microsoft.com/library/system.diagnostics.performancecounter.instancelifetime.aspx) property of the performance counter is set to 'Process', which means that the performance counter ceases to exist as soon as the program that creates the counter terminates.</span></span>
  
> [!NOTE]
>  <span data-ttu-id="5addd-120">La précision du compteur de performance de temps LOB (cumulé) est 16 millisecondes.</span><span class="sxs-lookup"><span data-stu-id="5addd-120">The precision of the LOB Time (Cumulative) performance counter is 16 milliseconds.</span></span>  
  
## <a name="enabling-performance-counters"></a><span data-ttu-id="5addd-121">Activation des compteurs de performances</span><span class="sxs-lookup"><span data-stu-id="5addd-121">Enabling Performance Counters</span></span>  
 <span data-ttu-id="5addd-122">Les compteurs de performance peuvent être activés ou désactivés en définissant la propriété de liaison **EnablePerformanceCounters**.</span><span class="sxs-lookup"><span data-stu-id="5addd-122">The performance counters can be enabled or disabled by setting the binding property **EnablePerformanceCounters**.</span></span> <span data-ttu-id="5addd-123">Pour activer les compteurs de performances, définissez la **EnablePerformanceCounters** liaison de propriété **True**.</span><span class="sxs-lookup"><span data-stu-id="5addd-123">To enable performance counters, set the **EnablePerformanceCounters** binding property to **True**.</span></span> <span data-ttu-id="5addd-124">Pour désactiver les compteurs de performances, définissez **EnablePerformanceCounters** à **False**.</span><span class="sxs-lookup"><span data-stu-id="5addd-124">To disable performance counters, set **EnablePerformanceCounters** to **False**.</span></span> <span data-ttu-id="5addd-125">Par défaut, la propriété est définie **False**.</span><span class="sxs-lookup"><span data-stu-id="5addd-125">By default, the property is set to **False**.</span></span> <span data-ttu-id="5addd-126">Pour plus d’informations sur cette propriété de liaison, consultez [en savoir plus sur l’adaptateur BizTalk pour les propriétés de liaison de l’adaptateur SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="5addd-126">For more information about this binding property, see [Read about the BizTalk Adapter for SQL Server adapter binding properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
## <a name="performance-counters-and-the-wcf-lob-adapter-sdk"></a><span data-ttu-id="5addd-127">Compteurs de performance et le Kit de développement logiciel de l’adaptateur LOB WCF</span><span class="sxs-lookup"><span data-stu-id="5addd-127">Performance Counters and the WCF LOB Adapter SDK</span></span>  
 <span data-ttu-id="5addd-128">Modification de la valeur de la **EnablePerformanceCounters** également de propriété de liaison modifie la valeur du compteur de performance correspondant pour le [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5addd-128">Changing the value of the **EnablePerformanceCounters** binding property also changes the value of the corresponding performance counter for the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)].</span></span> <span data-ttu-id="5addd-129">En outre, la propriété de liaison pour le [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] est statique, tandis que pour les [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] est dynamique.</span><span class="sxs-lookup"><span data-stu-id="5addd-129">Also, the binding property for the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] is static, whereas that for the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] is dynamic.</span></span> <span data-ttu-id="5addd-130">Par conséquent, s’il existe deux instances de la [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] de liaison dans le domaine d’application et le **EnablePerformanceCounters** liaison de la propriété est définie sur **True** dans un et **False** dans l’autre, le compteur spécifique à l’adaptateur sera activé dans un et désactivé pour l’autre.</span><span class="sxs-lookup"><span data-stu-id="5addd-130">Hence, if there are two instances of the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] binding in the application domain, and the **EnablePerformanceCounters** binding property is set to **True** in one and **False** in the other, the adapter-specific performance counter will be enabled in one and disabled in the other.</span></span> <span data-ttu-id="5addd-131">Toutefois, étant donné que la propriété de liaison pour [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] est statique, elle est soit définie **True** ou **False** selon quelle valeur a été spécifié en dernier.</span><span class="sxs-lookup"><span data-stu-id="5addd-131">However, because the binding property for [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] is static, it will either be set to **True** or **False** depending on what value was specified last.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5addd-132">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="5addd-132">See Also</span></span>  
[<span data-ttu-id="5addd-133">Résoudre les problèmes de l’adaptateur SQL</span><span class="sxs-lookup"><span data-stu-id="5addd-133">Troubleshoot the SQL adapter</span></span>](../../adapters-and-accelerators/adapter-sql/troubleshoot-the-sql-adapter.md)