---
title: "Générer un Client WCF ou le contrat de Service WCF pour les artefacts SQL Server | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 5fa7d8c0-8ee4-41e7-9394-d22e87e09391
caps.latest.revision: "14"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f961c3648e153847f5ac259c9902da5589b1486d
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="generate-a-wcf-client-or-wcf-service-contract-for-sql-server-artifacts"></a><span data-ttu-id="9ed69-102">Générer un Client WCF ou le contrat de Service WCF pour les artefacts SQL Server</span><span class="sxs-lookup"><span data-stu-id="9ed69-102">Generate a WCF Client or WCF Service Contract for SQL Server Artifacts</span></span>
<span data-ttu-id="9ed69-103">Vous pouvez utiliser la [!INCLUDE[addadapterservreflong](../../includes/addadapterservreflong-md.md)] pour générer une classe de client WCF ciblé sur les opérations sélectionnées sur les artefacts de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9ed69-103">You can use the [!INCLUDE[addadapterservreflong](../../includes/addadapterservreflong-md.md)] to generate a WCF client class targeted at selected operations on SQL Server artifacts.</span></span> <span data-ttu-id="9ed69-104">Vous pouvez également utiliser le service Model Metadata Utility Tool (svcutil.exe) pour générer la classe de client WCF ; Toutefois, le [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] expose les fonctionnalités de l’utilitaire de métadonnées ServiceModel via une interface de Microsoft Windows standard.</span><span class="sxs-lookup"><span data-stu-id="9ed69-104">You can also use the ServiceModel Metadata Utility Tool (svcutil.exe) to generate the WCF client class; however, the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] exposes the functionality of the ServiceModel Metadata Utility Tool through a standard Microsoft Windows interface.</span></span> <span data-ttu-id="9ed69-105">Il fournit également des fonctionnalités de navigation et de recherche qui ne sont pas disponibles avec l’outil svcutil.exe et génère un fichier de configuration basé sur les propriétés de liaison que vous sélectionnez lorsque vous vous connectez à la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9ed69-105">It also provides browse and search capabilities that are not available with the svcutil.exe tool, and generates a configuration file based on the binding properties that you select when you connect to the SQL Server database.</span></span>  
  
## <a name="generating-a-wcf-client-class-by-using-the-add-adapter-service-reference-plug-in"></a><span data-ttu-id="9ed69-106">Génération d’une classe de Client WCF à l’aide de l’ajouter une référence de Service d’adaptateur plug-in</span><span class="sxs-lookup"><span data-stu-id="9ed69-106">Generating a WCF Client Class by Using the Add Adapter Service Reference Plug-in</span></span>  
 <span data-ttu-id="9ed69-107">Procédez comme suit pour générer une classe de client WCF à l’aide de la [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9ed69-107">Perform the following steps to generate a WCF client class by using the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span></span>  
  
1.  <span data-ttu-id="9ed69-108">Dans [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] l’Explorateur de solutions, cliquez sur votre projet, puis cliquez sur **ajouter une référence de Service de carte**.</span><span class="sxs-lookup"><span data-stu-id="9ed69-108">In [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] Solution Explorer, right-click your project, and then click **Add Adapter Service Reference**.</span></span>  
  
2.  <span data-ttu-id="9ed69-109">Après le **ajouter une référence de Service de carte** boîte de dialogue s’ouvre, suivez les étapes de [obtenir les métadonnées pour les opérations de SQL Server dans Visual Studio à l’aide de l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/get-metadata-for-sql-server-operations-in-visual-studio-using-the-sql-adapter.md) pour se connecter à SQL Server et de rechercher et pour les opérations de recherche.</span><span class="sxs-lookup"><span data-stu-id="9ed69-109">After the **Add Adapter Service Reference** dialog box opens, follow the steps in [Get metadata for SQL Server operations in Visual Studio using the SQL adapter](../../adapters-and-accelerators/adapter-sql/get-metadata-for-sql-server-operations-in-visual-studio-using-the-sql-adapter.md) to connect to SQL Server and to browse and search for operations.</span></span> <span data-ttu-id="9ed69-110">Pour créer une classe de client WCF pour les opérations que vous sélectionnez, assurez-vous que **Client (Outbound operations)** est sélectionné dans le **type de contrat Select** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="9ed69-110">To create a WCF client class for the operations that you select, be sure that **Client (Outbound operations)** is selected from the **Select contract type** drop-down list.</span></span> <span data-ttu-id="9ed69-111">(Il s’agit de la valeur par défaut).</span><span class="sxs-lookup"><span data-stu-id="9ed69-111">(This is the default).</span></span>  
  
3.  <span data-ttu-id="9ed69-112">Après avoir sélectionné toutes les opérations que vous souhaitez cibler, cliquez sur **OK** pour générer la classe de client WCF.</span><span class="sxs-lookup"><span data-stu-id="9ed69-112">After you select all of the operations that you want to target, click **OK** to generate the WCF client class.</span></span>  
  
 <span data-ttu-id="9ed69-113">Le [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] ajoute deux fichiers à votre projet :</span><span class="sxs-lookup"><span data-stu-id="9ed69-113">The [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] adds two files to your project:</span></span>  
  
-   <span data-ttu-id="9ed69-114">**Le fichier de code du client WCF**.</span><span class="sxs-lookup"><span data-stu-id="9ed69-114">**The WCF client code file**.</span></span> <span data-ttu-id="9ed69-115">Ce fichier contient le WCF client classe et assistance code généré pour les opérations que vous avez sélectionné.</span><span class="sxs-lookup"><span data-stu-id="9ed69-115">This file contains the generated WCF client class and helper code for the operations that you selected.</span></span> <span data-ttu-id="9ed69-116">La première fois que vous exécutez le [!INCLUDE[addadapterservreflong](../../includes/addadapterservreflong-md.md)], il génère ce fichier avec le nom par défaut **SQLAdapterBindingClient.cs**.</span><span class="sxs-lookup"><span data-stu-id="9ed69-116">The first time you run the [!INCLUDE[addadapterservreflong](../../includes/addadapterservreflong-md.md)], it will generate this file with the default name **SQLAdapterBindingClient.cs**.</span></span> <span data-ttu-id="9ed69-117">Si vous l’exécutez à nouveau, le fichier suivant, il génère sera appelé **SQLAdapterBindingClient1.cs**.</span><span class="sxs-lookup"><span data-stu-id="9ed69-117">If you run it again, the next file it generates will be called **SQLAdapterBindingClient1.cs**.</span></span>  <span data-ttu-id="9ed69-118">Le suffixe du numéro augmente de 1 pour chaque nouveau fichier que vous générez.</span><span class="sxs-lookup"><span data-stu-id="9ed69-118">The number suffix will increase by 1 for every new file you generate.</span></span>  <span data-ttu-id="9ed69-119">Vous pouvez également modifier le préfixe par défaut **SQLBinding** en entrant un préfixe différent dans le **préfixe de nom de fichier** champ le [!INCLUDE[addadapterservreflong](../../includes/addadapterservreflong-md.md)] avant de sélectionner **OK** à générer le fichier.</span><span class="sxs-lookup"><span data-stu-id="9ed69-119">You can also change the default prefix **SQLBinding** by entering a different prefix in the **Filename prefix** field of the [!INCLUDE[addadapterservreflong](../../includes/addadapterservreflong-md.md)] before selecting **OK** to generate the file.</span></span>  
  
-   <span data-ttu-id="9ed69-120">**App.config**. Ce fichier contient une configuration de liaison et les configurations de point de terminaison client qui sont basées sur les sélections effectuées lors de la configuration de la connexion pour le [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9ed69-120">**App.config**. This file contains a binding configuration and client endpoint configurations that are based on the selections you made when you configured the connection for the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="9ed69-121">Lors de l’utilisation du [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)], si vous ne spécifiez pas une valeur pour une propriété de liaison de type chaîne et dont la valeur par défaut a la valeur null puis que la liaison de propriété sera pas disponible dans le fichier app.config.</span><span class="sxs-lookup"><span data-stu-id="9ed69-121">While using the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)], if you do not specify a value for a binding property of type string and whose default value is null then that binding property will not be available in the app.config file.</span></span> <span data-ttu-id="9ed69-122">Vous devez ajouter manuellement la propriété de liaison et sa valeur dans le fichier app.config, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="9ed69-122">You must manually add the binding property and its value in the app.config file, if required.</span></span>  
  
## <a name="generating-a-wcf-service-contract-by-using-the-add-adapter-service-reference-plug-in"></a><span data-ttu-id="9ed69-123">Génération d’un contrat de Service WCF à l’aide de l’ajouter une référence de Service d’adaptateur plug-in</span><span class="sxs-lookup"><span data-stu-id="9ed69-123">Generating a WCF Service Contract by Using the Add Adapter Service Reference Plug-in</span></span>  
 <span data-ttu-id="9ed69-124">Pour les opérations entrantes telles que l’interrogation de la base de données SQL Server ou de recevoir des notifications de la base de données, la [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] enregistre une requête avec SQL Server (en cas d’ou exécute une requête spécifiée par l’application cliente (en cas d’interrogation) notification).</span><span class="sxs-lookup"><span data-stu-id="9ed69-124">For inbound operations such as polling the SQL Server database or receiving notifications from the database, the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] either executes a query specified by the client application (in case of polling) or registers a query with SQL Server (in case of notification).</span></span> <span data-ttu-id="9ed69-125">Dans les deux scénarios, l’adaptateur envoie le message entrant à partir de la base de données SQL Server pour la consommation.</span><span class="sxs-lookup"><span data-stu-id="9ed69-125">In both the scenarios, the adapter sends the inbound message from SQL Server database to the consuming.</span></span> <span data-ttu-id="9ed69-126">Dans ce cas, l’application consommatrice agit comme un service et la [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] joue le rôle du client.</span><span class="sxs-lookup"><span data-stu-id="9ed69-126">In such a case, the consuming application acts as a service and the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] acts as the client.</span></span> <span data-ttu-id="9ed69-127">Vous devez, par conséquent, implémenter un service WCF qui peut recevoir des opérations entrantes à partir de l’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="9ed69-127">You must, therefore, implement a WCF service that can receive inbound operations from the adapter.</span></span> <span data-ttu-id="9ed69-128">Pour ce faire, vous utilisez le [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] pour générer une interface .NET qui représente le contrat de service qui est visible par l’adaptateur pour les opérations entrantes.</span><span class="sxs-lookup"><span data-stu-id="9ed69-128">To do this, you use the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] to generate a .NET interface that represents the service contract that is surfaced by the adapter for the inbound operations.</span></span> <span data-ttu-id="9ed69-129">Cette interface .NET est également appelée un contrat de service WCF.</span><span class="sxs-lookup"><span data-stu-id="9ed69-129">This .NET interface is also called a WCF service contract.</span></span> <span data-ttu-id="9ed69-130">Puis, vous implémentez cette interface pour créer le service WCF que vous pouvez utiliser pour recevoir les opérations entrantes.</span><span class="sxs-lookup"><span data-stu-id="9ed69-130">You then implement this interface to create the WCF service that you can use to receive the inbound operations.</span></span>  
  
 <span data-ttu-id="9ed69-131">Procédez comme suit pour générer un contrat de service WCF à l’aide de la [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9ed69-131">Perform the following steps to generate a WCF service contract by using the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span></span>  
  
#### <a name="to-generate-a-wcf-service-contract-for-inbound-operations"></a><span data-ttu-id="9ed69-132">Pour générer un contrat de service WCF pour les opérations entrantes</span><span class="sxs-lookup"><span data-stu-id="9ed69-132">To generate a WCF service contract for inbound operations</span></span>  
  
1.  <span data-ttu-id="9ed69-133">Dans [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] l’Explorateur de solutions, cliquez sur votre projet, puis cliquez sur **ajouter une référence de Service de carte**.</span><span class="sxs-lookup"><span data-stu-id="9ed69-133">In [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] Solution Explorer, right-click your project, and then click **Add Adapter Service Reference**.</span></span>  
  
2.  <span data-ttu-id="9ed69-134">Après le **ajouter une référence de Service de carte** boîte de dialogue s’ouvre, suivez les étapes de [se connecter à SQL Server dans Visual Studio à l’aide d’Ajouter adaptateur Service référence un plug-in](../../adapters-and-accelerators/adapter-sql/connect-to-sql-server-in-visual-studio-using-add-adapter-service-reference.md) pour se connecter à la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9ed69-134">After the **Add Adapter Service Reference** dialog box opens, follow the steps in [Connect to SQL Server in Visual Studio Using Add Adapter Service Reference Plug-in](../../adapters-and-accelerators/adapter-sql/connect-to-sql-server-in-visual-studio-using-add-adapter-service-reference.md) to connect to the SQL Server database.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="9ed69-135">Si vous générez du contrat de service WCF pour **TypedPolling** opération entrante, vous devez spécifier le **InboundID** dans le cadre de l’URI de connexion et **PollingStatement** propriété de liaison.</span><span class="sxs-lookup"><span data-stu-id="9ed69-135">If you are generating WCF service contract for **TypedPolling** inbound operation, you must specify the **InboundID** as part of the connection URI and **PollingStatement** binding property.</span></span>  
  
3.  <span data-ttu-id="9ed69-136">Après vous être connecté à la base de données SQL Server, sélectionnez **Service (opérations entrantes)** à partir de la **type de contrat Select** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="9ed69-136">After you have connected to the SQL Server database, select **Service (Inbound operations)** from the **Select contract type** drop-down list.</span></span>  
  
4.  <span data-ttu-id="9ed69-137">Dans le **sélectionner une catégorie** , cliquez sur le nœud racine (**/**), sélectionnez l’opération entrante à partir de la **catégories et opérations disponibles** , boîte de, puis Cliquez sur **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="9ed69-137">In the **Select a category** box, click the root node (**/**), select the inbound operation from the **Available categories and operations** box, and then click **Add**.</span></span>  
  
5.  <span data-ttu-id="9ed69-138">Pour générer le contrat de service WCF pour l’opération entrante, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="9ed69-138">To generate the WCF service contract for the inbound operation, click **OK**.</span></span>  
  
 <span data-ttu-id="9ed69-139">Le [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] ajoute trois fichiers à votre projet :</span><span class="sxs-lookup"><span data-stu-id="9ed69-139">The [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] adds three files to your project:</span></span>  
  
-   <span data-ttu-id="9ed69-140">**SqlAdapterBindingInterface.cs**.</span><span class="sxs-lookup"><span data-stu-id="9ed69-140">**SqlAdapterBindingInterface.cs**.</span></span> <span data-ttu-id="9ed69-141">Ce fichier contient le WCF généré contrat (interface) et le code d’application d’assistance pour l’opération entrante de service.</span><span class="sxs-lookup"><span data-stu-id="9ed69-141">This file contains the generated WCF service contract (interface) and helper code for the inbound operation.</span></span>  
  
-   <span data-ttu-id="9ed69-142">**SqlAdapterBindingService.cs**.</span><span class="sxs-lookup"><span data-stu-id="9ed69-142">**SqlAdapterBindingService.cs**.</span></span> <span data-ttu-id="9ed69-143">Ce fichier contient une classe qui implémente l’interface définie dans SqlAdapterBindingInterface.cs.</span><span class="sxs-lookup"><span data-stu-id="9ed69-143">This file contains a class that implements the interface defined in SqlAdapterBindingInterface.cs.</span></span> <span data-ttu-id="9ed69-144">Vous pouvez implémenter la logique métier qui traite les enregistrements retournés par l’opération entrante.</span><span class="sxs-lookup"><span data-stu-id="9ed69-144">You can implement the business logic that processes the records returned by the inbound operation.</span></span>  
  
-   <span data-ttu-id="9ed69-145">**App.config**. Ce fichier contient une configuration de liaison, des comportements de point de terminaison et configuration de point de terminaison de service qui sont basées sur les sélections effectuées lors de la configuration de la liaison et la connexion pour le [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9ed69-145">**app.config**. This file contains a binding configuration, endpoint behaviors, and service endpoint configuration that are based on the selections you made when you configured the binding and connection for the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="9ed69-146">Lors de l’utilisation du [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)], si vous ne spécifiez pas une valeur pour une propriété de liaison de type chaîne et dont la valeur par défaut a la valeur null puis que la liaison de propriété sera pas disponible dans le fichier app.config.</span><span class="sxs-lookup"><span data-stu-id="9ed69-146">While using the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)], if you do not specify a value for a binding property of type string and whose default value is null then that binding property will not be available in the app.config file.</span></span> <span data-ttu-id="9ed69-147">Vous devez ajouter manuellement la propriété de liaison et sa valeur dans le fichier app.config, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="9ed69-147">You must manually add the binding property and its value in the app.config file, if required.</span></span>  
  
## <a name="generating-a-wcf-client-class-by-using-svcutilexe"></a><span data-ttu-id="9ed69-148">Génération d’une classe de Client WCF à l’aide de svcutil.exe</span><span class="sxs-lookup"><span data-stu-id="9ed69-148">Generating a WCF Client Class by Using svcutil.exe</span></span>  
 <span data-ttu-id="9ed69-149">Vous pouvez utiliser svcutil.exe pour générer une classe de client WCF pour votre application.</span><span class="sxs-lookup"><span data-stu-id="9ed69-149">You can use svcutil.exe to generate a WCF client class for your application.</span></span> <span data-ttu-id="9ed69-150">Vous devez configurer svcutil.exe pour l’utiliser avec le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9ed69-150">You must configure svcutil.exe to use it with the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span>  
  
 <span data-ttu-id="9ed69-151">SvcUtil.exe génère la classe de client WCF dans un fichier de sortie avec un nom de fichier par défaut de **output.cs**.</span><span class="sxs-lookup"><span data-stu-id="9ed69-151">Svcutil.exe generates the WCF client class in an output file with a default file name of **output.cs**.</span></span> <span data-ttu-id="9ed69-152">Vous devez inclure manuellement ce fichier dans votre [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] projet.</span><span class="sxs-lookup"><span data-stu-id="9ed69-152">You must manually include this file in your [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] project.</span></span> <span data-ttu-id="9ed69-153">Pour plus d’informations sur svcutil.exe, consultez [ServiceModel Metadata Utility Tool (Svcutil.exe)](https://msdn.microsoft.com/library/aa347733.aspx).</span><span class="sxs-lookup"><span data-stu-id="9ed69-153">For more information about svcutil.exe, see [ServiceModel Metadata Utility Tool (Svcutil.exe)](https://msdn.microsoft.com/library/aa347733.aspx).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="9ed69-154">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="9ed69-154">See Also</span></span>  
[<span data-ttu-id="9ed69-155">Développer des applications SQL à l’aide du modèle de Service WCF</span><span class="sxs-lookup"><span data-stu-id="9ed69-155">Develop SQL applications using the WCF Service model</span></span>](../../adapters-and-accelerators/adapter-sql/develop-sql-applications-using-the-wcf-service-model.md)