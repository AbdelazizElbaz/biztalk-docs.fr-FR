---
title: "Exécuter des procédures stockées avec un seul paramètre XML dans SQL Server à l’aide de BizTalk Server | Documents Microsoft"
description: "Passer d’un seul paramètre dans une procédure stockée à l’aide de port personnalisé WCF et l’adaptateur SQL dans BizTalk Server"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: deb9333a-5e28-4e8d-8e0b-07b5a97a111b
caps.latest.revision: "16"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 02c5f239300140022b1d26f35664add744b630c2
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2017
---
# <a name="execute-stored-procedures-with-a-single-xml-parameter-in-sql-server-using-biztalk-server"></a><span data-ttu-id="bf65e-103">Exécuter des procédures stockées avec un seul paramètre XML dans SQL Server à l’aide de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="bf65e-103">Execute stored procedures with a single XML parameter in SQL Server using BizTalk Server</span></span>
<span data-ttu-id="bf65e-104">L’exécution d’une procédure stockée qui accepte un seul paramètre est similaire à l’exécution d’une autre procédure stockée comme décrit dans [exécuter les procédures stockées de SQL Server à l’aide de BizTalk Server](execute-stored-procedures-in-sql-server-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="bf65e-104">Executing a stored procedure that takes a single parameter is similar to executing any other stored procedure as described in [Execute Stored Procedures in SQL Server using BizTalk Server](execute-stored-procedures-in-sql-server-using-biztalk-server.md).</span></span> <span data-ttu-id="bf65e-105">Toutefois, pour l’approche décrite dans le lien précédent, vous devez générer des métadonnées pour la procédure stockée au moment du design et créer une orchestration pour appeler la procédure en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="bf65e-105">However, for the approach described in the preceding link, you need to generate metadata for the stored procedure at design time and create an orchestration to invoke the procedure at run time.</span></span>  
  
 <span data-ttu-id="bf65e-106">Considérez un scénario dans lequel vous souhaitez simplement passer une valeur unique à une procédure stockée sans effectuer tout traitement de cette valeur.</span><span class="sxs-lookup"><span data-stu-id="bf65e-106">Consider a scenario where you just want to pass one single value to a stored procedure without doing any processing on that value.</span></span> <span data-ttu-id="bf65e-107">Dans ce cas, vous ne souhaitez pas la charge de la génération des métadonnées, création d’une orchestration, le déploiement de l’orchestration et l’exécution de l’opération.</span><span class="sxs-lookup"><span data-stu-id="bf65e-107">In such cases, you don't want the overhead of generating metadata, creating an orchestration, deploying the orchestration, and executing the operation.</span></span> <span data-ttu-id="bf65e-108">Au lieu de cela, vous pouvez configurer un port d’envoi WCF-SQL ou de WCF-Custom pour appeler directement la procédure stockée.</span><span class="sxs-lookup"><span data-stu-id="bf65e-108">Rather, you can configure a WCF-Custom or WCF-SQL send port to directly invoke the stored procedure.</span></span> <span data-ttu-id="bf65e-109">Cette rubrique montre comment effectuer ces tâches à l’aide de la [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="bf65e-109">This topic demonstrates how to perform these tasks using the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bf65e-110">Cette rubrique fournit des instructions sur la configuration WCF-Custom d’envoi port pour l’exécution de procédure stockée qui accepte un seul paramètre.</span><span class="sxs-lookup"><span data-stu-id="bf65e-110">This topic provides instructions on how to configure a WCF-Custom send port for executing stored procedure that takes a single parameter.</span></span> <span data-ttu-id="bf65e-111">Vous pouvez effectuer les mêmes étapes en configurant un port WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="bf65e-111">You can perform the same steps by configuring a WCF-SQL port.</span></span> <span data-ttu-id="bf65e-112">Pour obtenir des instructions sur la configuration du port WCF-SQL, consultez [configurer un Port à l’aide de l’adaptateur WCF-SQL](configure-a-port-using-the-wcf-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="bf65e-112">For instructions on configuring WCF-SQL port, see [Configure a Port using the WCF-SQL Adapter](configure-a-port-using-the-wcf-sql-adapter.md).</span></span>  
  
## <a name="invoke-stored-procedures-without-orchestration"></a><span data-ttu-id="bf65e-113">Appeler des procédures stockées sans orchestration</span><span class="sxs-lookup"><span data-stu-id="bf65e-113">Invoke stored procedures without orchestration</span></span>  
 <span data-ttu-id="bf65e-114">Pour illustrer comment exécuter des procédures stockées avec paramètres uniques sans une orchestration, cette rubrique utilise la procédure stockée de ADD_LAST_EMP_XML_INFO.</span><span class="sxs-lookup"><span data-stu-id="bf65e-114">To demonstrate how to execute stored procedures with single parameters without an orchestration, this topic uses the ADD_LAST_EMP_XML_INFO stored procedure.</span></span> <span data-ttu-id="bf65e-115">Cette procédure prend une valeur XML en tant que paramètre et l’insère dans le **adresse** colonne de la **employé** table.</span><span class="sxs-lookup"><span data-stu-id="bf65e-115">This procedure takes an XML value as a parameter and inserts it into the **Address** column of the **Employee** table.</span></span> <span data-ttu-id="bf65e-116">Vous devez disposer de la valeur XML que vous allez passer à la procédure stockée.</span><span class="sxs-lookup"><span data-stu-id="bf65e-116">You must have the XML value that you will pass to the stored procedure.</span></span> <span data-ttu-id="bf65e-117">Toutefois, pour exécuter la procédure stockée à l’aide de l’adaptateur, vous devez envoyer un message de demande conformes au schéma de la procédure, et que la valeur contenant le code XML pour le **adresse** au champ, le serveur SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf65e-117">However, to execute the stored procedure using the adapter, you must send a request message conforming to the schema of the procedure, and containing the XML value for the **Address** field, to the SQL Server.</span></span> <span data-ttu-id="bf65e-118">Par conséquent, vous devez créer ce message de demande par :</span><span class="sxs-lookup"><span data-stu-id="bf65e-118">So, you must create that request message by:</span></span>  
  
-   <span data-ttu-id="bf65e-119">À l’aide de la **modèle** option dans la configuration de port d’envoi à l’aide de laquelle vous pouvez créer un message de demande à l’aide d’un modèle de message.</span><span class="sxs-lookup"><span data-stu-id="bf65e-119">Using the **Template** option in the send port configuration using which you can create a request message using a message template.</span></span>  
  
-   <span data-ttu-id="bf65e-120">Placer le code XML de valeur pour le **adresse** champ dans le message.</span><span class="sxs-lookup"><span data-stu-id="bf65e-120">Putting the XML value for the **Address** field into the message.</span></span>  
  
 <span data-ttu-id="bf65e-121">Toutes ces étapes sont décrites en détail dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="bf65e-121">All these steps are described in detail in this topic.</span></span> <span data-ttu-id="bf65e-122">Vous devez effectuer l’ensemble suivant de tâches :</span><span class="sxs-lookup"><span data-stu-id="bf65e-122">You must perform the following set of tasks:</span></span>  
  
1.  <span data-ttu-id="bf65e-123">Créer un fichier de réception du port sur lequel vous allez déposer le fichier XML qui sera inséré dans le **adresse** champ XML de la **employé** table.</span><span class="sxs-lookup"><span data-stu-id="bf65e-123">Create a FILE receive port where you will drop the XML file that will be inserted into the **Address** XML field of the **Employee** table.</span></span> <span data-ttu-id="bf65e-124">Supposons que ce port est appelé **(messagein)** port.</span><span class="sxs-lookup"><span data-stu-id="bf65e-124">Suppose this port is called **MessageIn** port.</span></span>  
  
2.  <span data-ttu-id="bf65e-125">Créer un port d’envoi unidirectionnel WCF-Custom que récupère le code XML du fichier à partir du fichier port de réception et construit le message en utilisant le modèle de message et il envoie à SQL Server pour exécuter la procédure stockée.</span><span class="sxs-lookup"><span data-stu-id="bf65e-125">Create a WCF-Custom one-way send port that picks the XML file from the FILE receive port, constructs the message using the message template, and sends it to SQL Server to execute the stored procedure.</span></span>  
  
 <span data-ttu-id="bf65e-126">Cette partie de la rubrique fournit des instructions sur la configuration WCF-Custom port d’envoi avec le modèle de message.</span><span class="sxs-lookup"><span data-stu-id="bf65e-126">This part of the topic provides instructions on configuring a WCF-Custom send port with the message template.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bf65e-127">Bien que les informations contenues dans cette rubrique montre comment exécuter une procédure stockée avec un paramètre XML unique, vous pouvez effectuer les tâches pour effectuer toute opération qui accepte un seul paramètre de n’importe quel type de données.</span><span class="sxs-lookup"><span data-stu-id="bf65e-127">Even though the information in this topic demonstrates how to execute a stored procedure with a single XML parameter, you can perform the tasks to perform any operation that takes a single parameter of any data type.</span></span> <span data-ttu-id="bf65e-128">La seule différence se trouve dans la procédure de que création d’un modèle de message pour une opération spécifique.</span><span class="sxs-lookup"><span data-stu-id="bf65e-128">The only difference will be in the way you create a message template for a specific operation.</span></span> <span data-ttu-id="bf65e-129">Vous pouvez créer un modèle de message en prenant le message de demande que vous utilisez pour exécuter l’opération de corps du message à l’aide d’une orchestration et en remplaçant la valeur du paramètre par BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bf65e-129">You can create a message template by taking the request message you would use to execute the operation using an orchestration and replacing the value of the parameter with the BizTalk message body.</span></span>  
  
##  <a name="BKMK_OneWay"></a><span data-ttu-id="bf65e-130">Configurer un port d’envoi WCF-Custom</span><span class="sxs-lookup"><span data-stu-id="bf65e-130">Configure a WCF-Custom send port</span></span>  
 <span data-ttu-id="bf65e-131">Avant de créer le WCF-Custom port d’envoi, vérifiez que vous avez créé le fichier de port de réception **(messagein)**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-131">Before creating the WCF-Custom send port, make sure you created the FILE receive port, **MessageIn**.</span></span>  
  
1.  <span data-ttu-id="bf65e-132">Démarrer le [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="bf65e-132">Start the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
2.  <span data-ttu-id="bf65e-133">Dans l’arborescence de la console, développez **groupe BizTalk**, puis développez **Applications**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-133">In the console tree, expand **BizTalk Group**, and then expand **Applications**.</span></span>  
  
3.  <span data-ttu-id="bf65e-134">Développez l’application sous lequel vous souhaitez déployer le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bf65e-134">Expand the application under which you want to deploy the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span>  
  
4.  <span data-ttu-id="bf65e-135">Avec le bouton droit **Ports d’envoi**, pointez sur **nouveau**, puis pointez sur **Port d’envoi unidirectionnel statique**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-135">Right-click **Send Ports**, point to **New**, and then point to **Static One-way Send Port**.</span></span>  
  
5.  <span data-ttu-id="bf65e-136">Dans le **propriétés de Port d’envoi** boîte de dialogue le **général** , tapez un nom pour le port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="bf65e-136">In the **Send Port Properties** dialog box, on the **General** tab, type a name for the send port.</span></span>  
  
6.  <span data-ttu-id="bf65e-137">Configurer le port pour recevoir tout port de réception de messages déposés au niveau du fichier **(messagein)**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-137">Configure the port to receive all messages dropped at the FILE receive port, **MessageIn**.</span></span>  
  
    1.  <span data-ttu-id="bf65e-138">Dans le **propriétés de Port d’envoi** boîte de dialogue, dans le volet gauche, cliquez sur **filtres**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-138">In the **Send Port Properties** dialog box, from the left pane, click **Filters**.</span></span>  
  
    2.  <span data-ttu-id="bf65e-139">Dans le volet droit, sous la **propriété** colonne, cliquez sur la grille, puis sélectionnez **BTS. ReceivePortName** propriété.</span><span class="sxs-lookup"><span data-stu-id="bf65e-139">In the right pane, under the **Property** column, click the grid, and then select **BTS.ReceivePortName** property.</span></span>  
  
    3.  <span data-ttu-id="bf65e-140">Pour le **opérateur** colonne, sélectionnez «**==**».</span><span class="sxs-lookup"><span data-stu-id="bf65e-140">For the **Operator** column, select “**==**”.</span></span>  
  
    4.  <span data-ttu-id="bf65e-141">Pour le **valeur** colonne, spécifiez le nom du fichier de port de réception, `MessageIn`.</span><span class="sxs-lookup"><span data-stu-id="bf65e-141">For the **Value** column, specify the name of the FILE receive port, `MessageIn`.</span></span>  
  
7.  <span data-ttu-id="bf65e-142">Dans le **propriétés de Port d’envoi** boîte de dialogue le **général** onglet, à partir de la **Type** la liste déroulante, sélectionnez **WCF-Custom**, puis cliquez sur **Configurer**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-142">In the **Send Port Properties** dialog box, on the **General** tab, from the **Type** drop-down list, select **WCF-Custom**, and then click **Configure**.</span></span>  
  
8.  <span data-ttu-id="bf65e-143">Dans le **propriétés du Transport WCF-Custom** boîte de dialogue zone, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="bf65e-143">In the **WCF-Custom Transport Properties** dialog box, do the following:</span></span>  
  
    1.  <span data-ttu-id="bf65e-144">Cliquez sur le **général** onglet et dans le **adresse (URI)** champ, spécifiez l’URI de connexion pour SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf65e-144">Click the **General** tab, and in the **Address (URI)** field, specify the connection URI for SQL Server.</span></span> <span data-ttu-id="bf65e-145">Pour plus d’informations sur l’URI de connexion, consultez [créer l’URI de connexion SQL Server](../../adapters-and-accelerators/adapter-sql/create-the-sql-server-connection-uri.md).</span><span class="sxs-lookup"><span data-stu-id="bf65e-145">For more information about the connection URI, see [Create the SQL Server Connection URI](../../adapters-and-accelerators/adapter-sql/create-the-sql-server-connection-uri.md).</span></span>  
  
    2.  <span data-ttu-id="bf65e-146">Sur le **général** sous l’onglet du **Action** texte, tapez l’action pour l’opération.</span><span class="sxs-lookup"><span data-stu-id="bf65e-146">On the **General** tab, in the **Action** text box, type the action for the operation.</span></span> <span data-ttu-id="bf65e-147">Consultez [Messages et des schémas de message](messages-and-message-schemas-for-biztalk-adapter-for-sql-server.md) pour obtenir la liste des actions pour chaque opération.</span><span class="sxs-lookup"><span data-stu-id="bf65e-147">See [Messages and message schemas](messages-and-message-schemas-for-biztalk-adapter-for-sql-server.md) for a list of actions for each operation.</span></span> <span data-ttu-id="bf65e-148">Par exemple, l’action à appeler le ADD_LAST_EMP_XML_INFO est :</span><span class="sxs-lookup"><span data-stu-id="bf65e-148">For example, the action to invoke the ADD_LAST_EMP_XML_INFO is:</span></span>  
  
        ```  
        Procedure/dbo/ADD_LAST_EMP_XML_INFO  
        ```  
  
    3.  <span data-ttu-id="bf65e-149">Cliquez sur le **liaison** onglet et à partir de la **Type de liaison** liste, sélectionnez **sqlBinding**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-149">Click the **Binding** tab, and from the **Binding Type** list, select **sqlBinding**.</span></span> <span data-ttu-id="bf65e-150">Vous pouvez spécifier les propriétés de liaison différentes exposées par le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bf65e-150">You can specify the different binding properties exposed by the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="bf65e-151">Pour plus d’informations sur les propriétés de liaison, consultez [en savoir plus sur l’adaptateur BizTalk pour les propriétés de liaison de l’adaptateur SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="bf65e-151">For more information about binding properties, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
    4.  <span data-ttu-id="bf65e-152">Cliquez sur le **informations d’identification** onglet, puis effectuez l’une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="bf65e-152">Click the **Credentials** tab, and then do one of the following:</span></span>  
  
        -   <span data-ttu-id="bf65e-153">Sélectionnez le **n’utilisez pas l’authentification unique sur** option et spécifiez le nom d’utilisateur et mot de passe pour se connecter à SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf65e-153">Select the **Do not use Single Sign-On** option, and the specify the user name and password to connect to SQL Server.</span></span> <span data-ttu-id="bf65e-154">Notez que le nom d’utilisateur et le mot de passe respectent la casse.</span><span class="sxs-lookup"><span data-stu-id="bf65e-154">Note that the user name and password are case-sensitive.</span></span>  
  
            > [!NOTE]
            >  <span data-ttu-id="bf65e-155">Si vous souhaitez vous connecter à SQL Server à l’aide de l’authentification Windows, spécifiez un nom d’utilisateur vide et un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="bf65e-155">If you want to connect to SQL Server using Windows authentication, specify a blank user name and password.</span></span>  
  
        -   <span data-ttu-id="bf65e-156">Sélectionnez le **utilisez Single Sign-On** option et spécifiez une Enterprise Single Sign-on (SSO de) l’application associée.</span><span class="sxs-lookup"><span data-stu-id="bf65e-156">Select the **Use Single Sign-On** option, and then specify an affiliate Enterprise Single Sign-on (SSO) application.</span></span>  
  
             <span data-ttu-id="bf65e-157">Pour plus d’informations sur la sécurité par rapport à BizTalk Server, consultez [sécurité avec l’adaptateur SQL et BizTalk Server](../../adapters-and-accelerators/adapter-sql/security-with-the-sql-adapter-and-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="bf65e-157">For more information about security with respect to BizTalk Server, see [Security with the SQL adapter and BizTalk Server](../../adapters-and-accelerators/adapter-sql/security-with-the-sql-adapter-and-biztalk-server.md).</span></span>
  
    5.  <span data-ttu-id="bf65e-158">Cliquez sur le **Messages** onglet et dans le **le corps du message WCF sortant** , choisissez le **modèle** option.</span><span class="sxs-lookup"><span data-stu-id="bf65e-158">Click the **Messages** tab, and in the **Outbound WCF message body** section, choose the **Template** option.</span></span>  
  
    6.  <span data-ttu-id="bf65e-159">Dans le **XML** texte, spécifiez le modèle qui servira à construire le message WCF.</span><span class="sxs-lookup"><span data-stu-id="bf65e-159">In the **XML** text box, specify the template that will be used to construct the WCF message.</span></span> <span data-ttu-id="bf65e-160">En procédant ainsi, vous créez un message qui est conforme à l’opération ADD_LAST_EMP_XML_INFO pour la station de travail WCF [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bf65e-160">By doing so, you create a message that conforms to the ADD_LAST_EMP_XML_INFO operation for the WCF-based [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span>  
  
         <span data-ttu-id="bf65e-161">![Spécifiez le modèle de message WCF sortant](../../adapters-and-accelerators/adapter-sql/media/012e9ff0-b78f-4a1d-8a3a-a7b8e3850d55.gif "012e9ff0-b78f-4a1d-8a3a-a7b8e3850d55")</span><span class="sxs-lookup"><span data-stu-id="bf65e-161">![Specify template for outbound WCF message](../../adapters-and-accelerators/adapter-sql/media/012e9ff0-b78f-4a1d-8a3a-a7b8e3850d55.gif "012e9ff0-b78f-4a1d-8a3a-a7b8e3850d55")</span></span>  
  
         <span data-ttu-id="bf65e-162">Pour la procédure stockée de ADD_LAST_EMP_XML_INFO, vous devez spécifier le modèle suivant :</span><span class="sxs-lookup"><span data-stu-id="bf65e-162">For the ADD_LAST_EMP_XML_INFO stored procedure, you must specify the following template:</span></span>  
  
        ```  
        <ADD_LAST_EMP_XML_INFO xmlns="http://schemas.microsoft.com/Sql/2008/05/Procedures/dbo">  
        <xml_info>  
        <bts-msg-body xmlns="http://www.microsoft.com/schemas/bts2007" encoding="string"/>  
        </xml_info>  
        </ADD_LAST_EMP_XML_INFO>  
        ```  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="bf65e-163">L’encodage dans le modèle de message doit être toujours « string », quel que soit le type du paramètre pour l’opération qui sera appelé à l’aide du port d’envoi.</span><span class="sxs-lookup"><span data-stu-id="bf65e-163">The encoding in the message template must always be “string” irrespective of the type of the parameter for the operation that will be invoked using the send port.</span></span> <span data-ttu-id="bf65e-164">Par exemple, le ADD_LAST_EMP_XML_INFO prend un paramètre de type XML, mais le codage dans le modèle de message est chaîne.</span><span class="sxs-lookup"><span data-stu-id="bf65e-164">For example, the ADD_LAST_EMP_XML_INFO takes a parameter of type XML, but the encoding in the message template is string.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="bf65e-165">Vous pouvez créer ce modèle de message en copiant le message de demande pour la procédure stockée et en remplaçant la valeur dans les balises < xml_info > par le corps du message BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bf65e-165">You can create this message template by copying the request message for the stored procedure and replacing the value within the <xml_info> tags with the BizTalk message body.</span></span> <span data-ttu-id="bf65e-166">Vous pouvez obtenir le message de demande pour la procédure stockée en générant le schéma pour la procédure à l’aide de la [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)], puis de générer une instance du schéma pour obtenir la requête XML.</span><span class="sxs-lookup"><span data-stu-id="bf65e-166">You can get the request message for the stored procedure by generating the schema for the procedure using the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)], and then generating an instance of the schema to get the request XML.</span></span>  
  
    7.  <span data-ttu-id="bf65e-167">Pour revenir à la **propriétés de Port d’envoi** boîte de dialogue, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-167">To return to the **Send Port Properties** dialog box, click **OK**.</span></span>  
  
9. <span data-ttu-id="bf65e-168">À partir de la **Gestionnaire d’envoi** liste, sélectionnez **BizTalkServerApplication**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-168">From the **Send handler** list, select **BizTalkServerApplication**.</span></span>  
  
10. <span data-ttu-id="bf65e-169">À partir de la **pipeline d’envoi** , sélectionnez le pipeline qui correspond à **PassThruTransmit**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-169">From the **Send pipeline** list, select the pipeline that corresponds to **PassThruTransmit**.</span></span>  
  
11. <span data-ttu-id="bf65e-170">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-170">Click **OK**.</span></span>  
  
## <a name="start-the-application"></a><span data-ttu-id="bf65e-171">Démarrer l’Application</span><span class="sxs-lookup"><span data-stu-id="bf65e-171">Start the Application</span></span>  
 <span data-ttu-id="bf65e-172">Pour démarrer l’application BizTalk, vous pouvez démarrer le fichier de l’emplacement de réception et le port d’envoi WCF-Custom individuellement.</span><span class="sxs-lookup"><span data-stu-id="bf65e-172">To start the BizTalk application, you can start both the FILE receive location and the WCF-Custom send port individually.</span></span> <span data-ttu-id="bf65e-173">Vous devez maintenant l’emplacement de réception copie un fichier XML dans le dossier mappé au fichier.</span><span class="sxs-lookup"><span data-stu-id="bf65e-173">You must now copy an XML file to the folder mapped to the FILE receive location.</span></span> <span data-ttu-id="bf65e-174">L’application BizTalk utilise le fichier, et la valeur XML est insérée dans la colonne adresse de la table Employee.</span><span class="sxs-lookup"><span data-stu-id="bf65e-174">The BizTalk application consumes the file, and the XML value is inserted in the Address column of the Employee table.</span></span> <span data-ttu-id="bf65e-175">Vous pouvez le vérifier à l’aide d’un client SQL Server et de sélectionner des enregistrements à partir de la table Employee.</span><span class="sxs-lookup"><span data-stu-id="bf65e-175">You can verify this by using a SQL Server client and selecting records from the Employee table.</span></span>  
  
## <a name="using-a-two-way-wcf-custom-send-port"></a><span data-ttu-id="bf65e-176">À l’aide d’un Port d’envoi WCF-Custom bidirectionnel</span><span class="sxs-lookup"><span data-stu-id="bf65e-176">Using a Two-way WCF-Custom Send Port</span></span>  
 <span data-ttu-id="bf65e-177">Les instructions fournies dans cette rubrique, dans la section [comment configurer un Port d’envoi WCF-Custom](../../core/how-to-configure-a-wcf-custom-send-port.md), montrent comment configurer un port d’envoi unidirectionnel WCF-Custom pour exécuter une procédure stockée avec un seul paramètre sans l’aide de BizTalk orchestration.</span><span class="sxs-lookup"><span data-stu-id="bf65e-177">The instructions in this topic, under the section [How to Configure a WCF-Custom Send Port](../../core/how-to-configure-a-wcf-custom-send-port.md), demonstrate how to configure a one-way WCF-Custom send port to execute a stored procedure with a single parameter without using a BizTalk orchestration.</span></span> <span data-ttu-id="bf65e-178">Toutefois, dans ce cas, pour vérifier si la procédure stockée est exécutée avec succès avoir à vérifier dans la base de données SQL Server, si la colonne adresse dans la table Employee est mis à jour.</span><span class="sxs-lookup"><span data-stu-id="bf65e-178">However, in such a case, to verify whether the stored procedure is executed successfully you will have to verify in the SQL Server database whether the Address column in the Employee table is updated.</span></span>  
  
 <span data-ttu-id="bf65e-179">Au lieu de cela, vous pouvez créer un port d’envoi WCF-Custom bidirectionnel qui obtient également la réponse à partir de SQL Server, si la procédure stockée est exécutée avec succès.</span><span class="sxs-lookup"><span data-stu-id="bf65e-179">Instead, you can create a two-way WCF-Custom send port that also gets the response from SQL Server if the stored procedure is executed successfully.</span></span> <span data-ttu-id="bf65e-180">Vous devez effectuer quelques étapes supplémentaires si vous créez un port personnalisé WCF bidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="bf65e-180">You must perform a few additional steps if you create a two-way WCF-Custom port.</span></span> <span data-ttu-id="bf65e-181">Notez que vous devez toujours un fichier emplacement de réception, comme indiqué dans les instructions précédentes.</span><span class="sxs-lookup"><span data-stu-id="bf65e-181">Note that you will still need a FILE receive location, as mentioned in the preceding instructions.</span></span>  
  
1.  <span data-ttu-id="bf65e-182">Créer un port d’envoi WCF-Custom bidirectionnels, par exemple, **ExecProcedure**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-182">Create a two-way WCF-Custom send port, for example, **ExecProcedure**.</span></span> <span data-ttu-id="bf65e-183">Les étapes pour configurer le port d’envoi sont semblables à celles du port d’envoi unidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="bf65e-183">The steps to configure the send port are similar to those for the one-way send port.</span></span> <span data-ttu-id="bf65e-184">La seule différence est que pour le port bidirectionnel vous devez également spécifier un pipeline de réception.</span><span class="sxs-lookup"><span data-stu-id="bf65e-184">The only difference is that for the two-way port you must also specify a receive pipeline.</span></span> <span data-ttu-id="bf65e-185">Veillez à sélectionner **PassThruReceive** pour le pipeline de réception.</span><span class="sxs-lookup"><span data-stu-id="bf65e-185">Make sure you select **PassThruReceive** for the receive pipeline.</span></span>  
  
2.  <span data-ttu-id="bf65e-186">Créer un port d’envoi FILE.</span><span class="sxs-lookup"><span data-stu-id="bf65e-186">Create a FILE send port.</span></span> <span data-ttu-id="bf65e-187">Ce port supprimera le message de réponse à partir de la base de données SQL Server dans un dossier.</span><span class="sxs-lookup"><span data-stu-id="bf65e-187">This port will drop the response message from the SQL Server database to a folder.</span></span> <span data-ttu-id="bf65e-188">À l’aide de la **filtres** onglet de la boîte de dialogue Propriétés du port, configurez le port d’envoi FILE pour recevoir tous les messages de réponse à partir du port d’envoi WCF-Custom.</span><span class="sxs-lookup"><span data-stu-id="bf65e-188">Using the **Filters** tab of the port properties dialog box, configure the FILE send port to receive all response messages from the WCF-Custom send port.</span></span>  
  
    1.  <span data-ttu-id="bf65e-189">Dans le **propriétés de Port d’envoi** boîte de dialogue, dans le volet gauche, cliquez sur **filtres**.</span><span class="sxs-lookup"><span data-stu-id="bf65e-189">In the **Send Port Properties** dialog box, from the left pane, click **Filters**.</span></span>  
  
    2.  <span data-ttu-id="bf65e-190">Dans le volet droit, sous la **propriété** colonne, cliquez sur la grille, puis sélectionnez **BTS. SPName** propriété.</span><span class="sxs-lookup"><span data-stu-id="bf65e-190">In the right pane, under the **Property** column, click the grid, and then select **BTS.SPName** property.</span></span>  
  
    3.  <span data-ttu-id="bf65e-191">Pour le **opérateur** colonne, sélectionnez «**==**».</span><span class="sxs-lookup"><span data-stu-id="bf65e-191">For the **Operator** column, select “**==**”.</span></span>  
  
    4.  <span data-ttu-id="bf65e-192">Pour le **valeur** colonne, spécifiez le nom de WCF-Custom port d’envoi, `ExecProcedure`.</span><span class="sxs-lookup"><span data-stu-id="bf65e-192">For the **Value** column, specify the name of the WCF-Custom send port, `ExecProcedure`.</span></span>  
  
 <span data-ttu-id="bf65e-193">Démarrer tous les trois ports.</span><span class="sxs-lookup"><span data-stu-id="bf65e-193">Start all the three ports.</span></span> <span data-ttu-id="bf65e-194">Copie un fichier XML dans le dossier mappé au fichier emplacement de réception.</span><span class="sxs-lookup"><span data-stu-id="bf65e-194">Copy an XML file to the folder mapped to the FILE receive location.</span></span> <span data-ttu-id="bf65e-195">Recherchez la réponse dans le dossier mappé au port d’envoi de fichier.</span><span class="sxs-lookup"><span data-stu-id="bf65e-195">Look for the response in the folder mapped to the FILE send port.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bf65e-196">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="bf65e-196">See Also</span></span>  
[<span data-ttu-id="bf65e-197">Développer des applications BizTalk avec l’adaptateur SQL</span><span class="sxs-lookup"><span data-stu-id="bf65e-197">Develop BizTalk applications using the SQL adapter</span></span>](../../adapters-and-accelerators/adapter-sql/develop-biztalk-applications-using-the-sql-adapter.md)