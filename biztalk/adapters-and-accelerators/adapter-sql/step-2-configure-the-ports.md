---
title: "Étape 2 : Configurer les Ports | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: e804da96-26ae-482d-b6e1-67af24d639d9
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7c9aaefe0cff41365a587079d0c82629ddddc586
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2017
---
# <a name="step-2-configure-the-ports"></a><span data-ttu-id="91f88-102">Étape 2 : Configurer les Ports</span><span class="sxs-lookup"><span data-stu-id="91f88-102">Step 2: Configure the Ports</span></span>
<span data-ttu-id="91f88-103">![Étape 2 sur 4](../../adapters-and-accelerators/adapter-oracle-ebs/media/step-2of4.gif "Step_2of4")</span><span class="sxs-lookup"><span data-stu-id="91f88-103">![Step 2 of 4](../../adapters-and-accelerators/adapter-oracle-ebs/media/step-2of4.gif "Step_2of4")</span></span>  
  
 <span data-ttu-id="91f88-104">**Durée :** 15 minutes</span><span class="sxs-lookup"><span data-stu-id="91f88-104">**Time to complete:** 15 minutes</span></span>  
  
 <span data-ttu-id="91f88-105">**Objectif :** dans cette étape, vous créez les ports physiques dans [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="91f88-105">**Objective:** In this step, you create the physical ports in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="91f88-106">Vous créez un port physique pour chaque port logique que vous avez créé dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="91f88-106">You create a physical port for each logical port you created in the orchestration.</span></span> <span data-ttu-id="91f88-107">Vous allez créer les ports suivants :</span><span class="sxs-lookup"><span data-stu-id="91f88-107">You will create the following ports:</span></span>  
  
-   <span data-ttu-id="91f88-108">WCF-Custom unidirectionnel port de réception pour recevoir des messages de notification pour les modifications apportées aux **employé** table dans une base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="91f88-108">A one-way WCF-Custom receive port to receive notification messages for changes to **Employee** table in a SQL Server database.</span></span>  
  
-   <span data-ttu-id="91f88-109">Une requête-réponse WCF-Custom port d’envoi pour envoyer des messages de demande et de recevoir la réponse pour l’appel de la **UPDATE_EMPLOYEE** procédure stockée et d’effectuer l’opération d’insertion sur la **Purchase_Order**table.</span><span class="sxs-lookup"><span data-stu-id="91f88-109">A request-response WCF-Custom send port to send request messages and receive response for invoking the **UPDATE_EMPLOYEE** stored procedure and for performing the Insert operation on the **Purchase_Order** table.</span></span> <span data-ttu-id="91f88-110">Dans l’orchestration, vous avez utilisé le même port d’envoi pour effectuer les opérations.</span><span class="sxs-lookup"><span data-stu-id="91f88-110">In the orchestration, you used the same send port to perform both the operations.</span></span> <span data-ttu-id="91f88-111">De même, dans le [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] console d’Administration, vous allez utiliser un port d’envoi unique pour les deux opérations.</span><span class="sxs-lookup"><span data-stu-id="91f88-111">Similarly, in the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console, you will use a single send port for both operations.</span></span>  
  
-   <span data-ttu-id="91f88-112">Un port d’envoi unidirectionnel pour envoyer la réponse pour l’opération d’insertion.</span><span class="sxs-lookup"><span data-stu-id="91f88-112">A one-way send port to send the response for the Insert operation.</span></span> <span data-ttu-id="91f88-113">Dans ce didacticiel, car vous avez besoin informer le service des achats via un message électronique, vous créez ce port d’envoi en tant qu’un port SMTP.</span><span class="sxs-lookup"><span data-stu-id="91f88-113">In this tutorial, because you need to inform the Purchases department through an e-mail, you create this send port as an SMTP port.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="91f88-114">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="91f88-114">Prerequisites</span></span>  
 <span data-ttu-id="91f88-115">Vous devez avoir terminé [étape 1 : déployer l’Orchestration](../../adapters-and-accelerators/adapter-sql/step-1-deploy-the-orchestration.md)).</span><span class="sxs-lookup"><span data-stu-id="91f88-115">You must have completed [Step 1: Deploy the Orchestration](../../adapters-and-accelerators/adapter-sql/step-1-deploy-the-orchestration.md)).</span></span>  
  
### <a name="to-create-a-physical-one-way-receive-port"></a><span data-ttu-id="91f88-116">Pour créer les port de réception unidirectionnelle physique</span><span class="sxs-lookup"><span data-stu-id="91f88-116">To create a physical one-way receive port</span></span>  
  
1.  <span data-ttu-id="91f88-117">Démarrer le [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="91f88-117">Start the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
2.  <span data-ttu-id="91f88-118">Dans l’arborescence de la console sur le côté gauche, développez **Administration de BizTalk Server**, avec le bouton droit **groupe BizTalk**, puis cliquez sur **Actualiser**.</span><span class="sxs-lookup"><span data-stu-id="91f88-118">In the console tree on the left hand side, expand **BizTalk Server Administration**, right-click **BizTalk Group**, and then click **Refresh**.</span></span>  
  
3.  <span data-ttu-id="91f88-119">Développez **groupe BizTalk**, développez **Applications**, développez **SampleApplication**.</span><span class="sxs-lookup"><span data-stu-id="91f88-119">Expand **BizTalk Group**, expand **Applications**, and expand **SampleApplication**.</span></span> <span data-ttu-id="91f88-120">Pour ce didacticiel, vous créez les ports et les applications au sein de l’application SampleApplication.</span><span class="sxs-lookup"><span data-stu-id="91f88-120">For this tutorial, you create all the ports and application within the SampleApplication application.</span></span>  
  
4.  <span data-ttu-id="91f88-121">Suivez les instructions sous la section « Déploiement de cartes pour recevoir des Messages à partir de SQL Server » de [configurer un port à l’aide de l’adaptateur WCF-custom et l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/configure-a-port-using-the-wcf-custom-adapter-and-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="91f88-121">Follow the instructions under the “Deploying Adapters for Receiving Messages from SQL Server” section of [Configure a port using the WCF-custom adapter and SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-a-port-using-the-wcf-custom-adapter-and-sql-adapter.md).</span></span> <span data-ttu-id="91f88-122">Nommez le port **NotifyReceivePort**.</span><span class="sxs-lookup"><span data-stu-id="91f88-122">Name the port as **NotifyReceivePort**.</span></span>  
  
5.  <span data-ttu-id="91f88-123">Veillez à définir les propriétés de liaison suivantes pour configurer l’adaptateur pour recevoir des notifications de modifications apportées à la **employé** table.</span><span class="sxs-lookup"><span data-stu-id="91f88-123">Make sure you set the following binding properties to configure the adapter to receive notifications for changes to the **Employee** table.</span></span>  
  
    |<span data-ttu-id="91f88-124">Propriété de liaison</span><span class="sxs-lookup"><span data-stu-id="91f88-124">Binding property</span></span>|<span data-ttu-id="91f88-125">Valeur</span><span class="sxs-lookup"><span data-stu-id="91f88-125">Value</span></span>|  
    |----------------------|-----------|  
    |<span data-ttu-id="91f88-126">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="91f88-126">**InboundOperationType**</span></span>|<span data-ttu-id="91f88-127">Affectez la valeur **Notification**.</span><span class="sxs-lookup"><span data-stu-id="91f88-127">Set this to **Notification**.</span></span>|  
    |<span data-ttu-id="91f88-128">**NotificationStatement**</span><span class="sxs-lookup"><span data-stu-id="91f88-128">**NotificationStatement**</span></span>|<span data-ttu-id="91f88-129">Affectez la valeur :</span><span class="sxs-lookup"><span data-stu-id="91f88-129">Set this to:</span></span><br /><br /> `SELECT Employee_ID, Name FROM dbo.Employee WHERE Status=0`<br /><br /> <span data-ttu-id="91f88-130">**Remarque :** vous devez spécifier plus précisément les noms de colonnes dans l’instruction comme indiqué dans l’instruction Select suivante.</span><span class="sxs-lookup"><span data-stu-id="91f88-130">**Note:** You must specifically specify the column names in the statement as shown in this Select statement.</span></span> <span data-ttu-id="91f88-131">En outre, vous devez toujours spécifier le nom de table, ainsi que le nom du schéma, par exemple, `dbo.Employee`.</span><span class="sxs-lookup"><span data-stu-id="91f88-131">Also, you must always specify the table name along with the schema name, for example, `dbo.Employee`.</span></span>|  
    |<span data-ttu-id="91f88-132">**NotifyOnListenerStart**</span><span class="sxs-lookup"><span data-stu-id="91f88-132">**NotifyOnListenerStart**</span></span>|<span data-ttu-id="91f88-133">Affectez la valeur **True**.</span><span class="sxs-lookup"><span data-stu-id="91f88-133">Set this to **True**.</span></span>|  
  
     <span data-ttu-id="91f88-134">Pour plus d’informations sur les propriétés de liaison différente, consultez [en savoir plus sur l’adaptateur BizTalk pour les propriétés de liaison de l’adaptateur SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="91f88-134">For more information about the different binding properties, see [Read about the BizTalk Adapter for SQL Server adapter binding properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
### <a name="to-create-a-request-response-send-port-for-two-operations"></a><span data-ttu-id="91f88-135">Pour créer une requête-réponse un port d’envoi pour les deux opérations</span><span class="sxs-lookup"><span data-stu-id="91f88-135">To create a request-response send port for two operations</span></span>  
  
1.  <span data-ttu-id="91f88-136">Suivez les instructions sous la section « Déploiement de cartes pour envoi de Messages à SQL Server » de [configurer un port à l’aide de l’adaptateur WCF-custom et l’adaptateur SQL](../../adapters-and-accelerators/adapter-sql/configure-a-port-using-the-wcf-custom-adapter-and-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="91f88-136">Follow the instructions under the “Deploying Adapters for Sending Messages to SQL Server” section of [Configure a port using the WCF-custom adapter and SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-a-port-using-the-wcf-custom-adapter-and-sql-adapter.md).</span></span> <span data-ttu-id="91f88-137">Nommez le port **SQLOutboundPort**.</span><span class="sxs-lookup"><span data-stu-id="91f88-137">Name the port as **SQLOutboundPort**.</span></span>  
  
2.  <span data-ttu-id="91f88-138">Étant donné que vous effectuez deux opérations utilisant le même port d’envoi, vous devez utiliser mappage d’action dynamique pour spécifier l’action pour l’opération.</span><span class="sxs-lookup"><span data-stu-id="91f88-138">Because you are performing two operations using the same send port, you must use dynamic action mapping to specify the action for the operation.</span></span> <span data-ttu-id="91f88-139">Lors de la configuration du port, dans le **Action** , spécifiez le mappage d’action de la manière suivante :</span><span class="sxs-lookup"><span data-stu-id="91f88-139">While configuring the port, in the **Action** box, specify the action mapping in the following manner:</span></span>  
  
    ```  
    <BtsActionMapping xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">  
      <Operation Name="UpdateEmp" Action="TypedProcedure/dbo/UPDATE_EMPLOYEE" />  
      <Operation Name="InsertPO" Action="TableOp/Insert/dbo/Purchase_Order" />  
    </BtsActionMapping>  
    ```  
  
     <span data-ttu-id="91f88-140">Notez que dans l’orchestration, vous avez créé deux opérations pour le port d’envoi requête-réponse : **UpdateEmp** et **InsertPO**.</span><span class="sxs-lookup"><span data-stu-id="91f88-140">Note that in the orchestration, you created two operations for the request-response send port: **UpdateEmp** and **InsertPO**.</span></span> <span data-ttu-id="91f88-141">Par conséquent, dans la configuration du port physique fournissent les mêmes noms d’opération dans le mappage d’action dynamique.</span><span class="sxs-lookup"><span data-stu-id="91f88-141">So, in the physical port configuration you provide the same operation names in the dynamic action mapping.</span></span> <span data-ttu-id="91f88-142">Dans l’extrait ci-dessus, l’action pour **UpdateEmp** opération est `TypedProcedure/dbo/UPDATE_EMPLOYEE`.</span><span class="sxs-lookup"><span data-stu-id="91f88-142">In the above excerpt, the action for **UpdateEmp** operation is `TypedProcedure/dbo/UPDATE_EMPLOYEE`.</span></span> <span data-ttu-id="91f88-143">De même, l’action pour **InsertPO** opération est `TableOp/Insert/dbo/Purchase_Order`.</span><span class="sxs-lookup"><span data-stu-id="91f88-143">Similarly, the action for **InsertPO** operation is `TableOp/Insert/dbo/Purchase_Order`.</span></span>  
  
3.  <span data-ttu-id="91f88-144">Vous devez également configurer le port d’envoi pour utiliser le Mappeur que vous avez créé dans l’orchestration pour mapper le message de réponse de **UPDATE_EMPLOYEE** procédure stockée pour le message de demande pour l’opération Insert sur **Purchase_ Commande** table.</span><span class="sxs-lookup"><span data-stu-id="91f88-144">You must also configure the send port to use the Mapper you created in the orchestration to map the response message of **UPDATE_EMPLOYEE** stored procedure to the request message for the Insert operation on **Purchase_Order** table.</span></span> <span data-ttu-id="91f88-145">Pour cela :</span><span class="sxs-lookup"><span data-stu-id="91f88-145">To do so:</span></span>  
  
    1.  <span data-ttu-id="91f88-146">Avec le bouton droit de la SQLOutboundPort dans [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] console d’Administration, puis cliquez sur **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="91f88-146">Right-click the SQLOutboundPort in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console, and then click **Properties**.</span></span>  
  
    2.  <span data-ttu-id="91f88-147">À partir de la **SQLOutboundPort – propriétés de Port d’envoi** boîte de dialogue, dans le volet gauche, cliquez sur **mappages sortants**.</span><span class="sxs-lookup"><span data-stu-id="91f88-147">From the **SQLOutboundPort – Send Port Properties** dialog box, from the left pane, click **Outbound Maps**.</span></span>  
  
    3.  <span data-ttu-id="91f88-148">Dans le volet de droite, dans le **mappages sortants** , cliquez sur la cellule sous la **carte** colonne, puis dans la liste déroulante, sélectionnez **Transform_1**.</span><span class="sxs-lookup"><span data-stu-id="91f88-148">From the right-pane, in the **Outbound Maps** box, click the cell under the **Map** column, and from the drop-down list, select **Transform_1**.</span></span> <span data-ttu-id="91f88-149">C’est le nom de la carte que vous avez créé dans l’orchestration BizTalk dans [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="91f88-149">This is the name of the map you created in the BizTalk orchestration in [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)].</span></span>  
  
         <span data-ttu-id="91f88-150">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="91f88-150">Click **OK**.</span></span>  
  
         <span data-ttu-id="91f88-151">![Configurer le mappage sortant](../../adapters-and-accelerators/adapter-sql/media/sql-adap-tut-010-map-ports.gif "sql_adap_tut_010_map_ports")</span><span class="sxs-lookup"><span data-stu-id="91f88-151">![Configure outbound map](../../adapters-and-accelerators/adapter-sql/media/sql-adap-tut-010-map-ports.gif "sql_adap_tut_010_map_ports")</span></span>  
  
### <a name="to-create-an-smtp-send-port"></a><span data-ttu-id="91f88-152">Pour créer un port d’envoi SMTP</span><span class="sxs-lookup"><span data-stu-id="91f88-152">To create an SMTP send port</span></span>  
  
1.  <span data-ttu-id="91f88-153">Suivez les instructions situées sous la « comment configurer un Port d’envoi SMTP avec le [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Console d’Administration « section à [http://go.microsoft.com/fwlink/?LinkId=141549](http://go.microsoft.com/fwlink/?LinkId=141549).</span><span class="sxs-lookup"><span data-stu-id="91f88-153">Follow the instructions under the “How to Configure an SMTP Send Port with the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration Console” section at [http://go.microsoft.com/fwlink/?LinkId=141549](http://go.microsoft.com/fwlink/?LinkId=141549).</span></span> <span data-ttu-id="91f88-154">Nommez le port **EmailResponse**.</span><span class="sxs-lookup"><span data-stu-id="91f88-154">Name the port as **EmailResponse**.</span></span>  
  
2.  <span data-ttu-id="91f88-155">Dans le cadre de la configuration du port, spécifiez l’adresse de messagerie pour le service des achats pour la **à** propriété.</span><span class="sxs-lookup"><span data-stu-id="91f88-155">As part of the port configuration, specify the e-mail address for the Purchases department for the **To** property.</span></span>  
  
## <a name="what-did-i-just-do"></a><span data-ttu-id="91f88-156">Actions effectuées</span><span class="sxs-lookup"><span data-stu-id="91f88-156">What did I just do?</span></span>  
 <span data-ttu-id="91f88-157">Dans cette étape, vous avez créé un WCF-Custom port de réception pour recevoir des notifications à partir de SQL Server, port d’envoi WCF-Custom pour effectuer des opérations sur SQL Server et un port SMTP pour envoyer la réponse à partir de SQL Server en tant qu’un message électronique au service des achats.</span><span class="sxs-lookup"><span data-stu-id="91f88-157">In this step you created a WCF-Custom receive port for receiving notifications from SQL Server, WCF-Custom send port for performing operations on SQL Server, and an SMTP port for sending the response from SQL Server as an e-mail to the Purchases department.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="91f88-158">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="91f88-158">Next Steps</span></span>  
 <span data-ttu-id="91f88-159">Configurer et démarrer l’application BizTalk, comme décrit dans [étape 3 : configurer et démarrer l’Application](../../adapters-and-accelerators/adapter-sql/step-3-configure-and-start-the-application.md).</span><span class="sxs-lookup"><span data-stu-id="91f88-159">You configure and start the BizTalk application, as described in [Step 3: Configure and Start the Application](../../adapters-and-accelerators/adapter-sql/step-3-configure-and-start-the-application.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="91f88-160">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="91f88-160">See Also</span></span>  
 <span data-ttu-id="91f88-161">[Étape 1 : Déployer l’Orchestration](../../adapters-and-accelerators/adapter-sql/step-1-deploy-the-orchestration.md) </span><span class="sxs-lookup"><span data-stu-id="91f88-161">[Step 1: Deploy the Orchestration](../../adapters-and-accelerators/adapter-sql/step-1-deploy-the-orchestration.md) </span></span>  
 <span data-ttu-id="91f88-162">[Étape 3 : Configurer et démarrer l’Application](../../adapters-and-accelerators/adapter-sql/step-3-configure-and-start-the-application.md) </span><span class="sxs-lookup"><span data-stu-id="91f88-162">[Step 3: Configure and Start the Application](../../adapters-and-accelerators/adapter-sql/step-3-configure-and-start-the-application.md) </span></span>  
 [<span data-ttu-id="91f88-163">Leçon 5 : Déployer la solution</span><span class="sxs-lookup"><span data-stu-id="91f88-163">Lesson 5: Deploy the Solution</span></span>](../../adapters-and-accelerators/adapter-sql/lesson-5-deploy-the-solution.md)