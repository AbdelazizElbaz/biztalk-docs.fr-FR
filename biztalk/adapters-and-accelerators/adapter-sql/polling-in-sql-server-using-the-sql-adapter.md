---
title: "L’interrogation dans SQL Server à l’aide de l’adaptateur SQL | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c31b3cda-c05e-46db-827b-6c47a53d1a3a
caps.latest.revision: "19"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7d01bc3d004da60b98e0132aa3c8e04442a45426
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="polling-in-sql-server-using-the-sql-adapter"></a><span data-ttu-id="30884-102">L’interrogation dans SQL Server à l’aide de l’adaptateur SQL</span><span class="sxs-lookup"><span data-stu-id="30884-102">Polling in SQL Server using the SQL adapter</span></span>
[!INCLUDE[adaptersql](../../includes/adaptersql-md.md)]<span data-ttu-id="30884-103">permet aux clients d’adaptateur recevoir des messages de modification de données à partir de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="30884-103"> enables adapter clients to receive data-change messages from the SQL Server database.</span></span> <span data-ttu-id="30884-104">Le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] prend en charge la réception des messages de « basées sur l’interrogation » dans laquelle l’adaptateur exécute une instruction SQL spécifiée (instruction SELECT ou procédure stockée), récupère ou met à jour les données et fournit le résultat au client de carte à intervalles réguliers de heure.</span><span class="sxs-lookup"><span data-stu-id="30884-104">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] supports receiving "polling-based" messages wherein the adapter executes a specified SQL statement (SELECT statement or stored procedure), retrieves or updates the data, and provides the result to the adapter client at regular intervals of time.</span></span>  
  
 <span data-ttu-id="30884-105">Le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] expose les opérations suivantes pour l’interrogation :</span><span class="sxs-lookup"><span data-stu-id="30884-105">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] exposes the following operations for polling:</span></span>  
  
-   <span data-ttu-id="30884-106">**L’interrogation**: vous permet de recevoir des messages de modification de données périodiques pour les tables SQL Server ou des vues.</span><span class="sxs-lookup"><span data-stu-id="30884-106">**Polling**: Enables you to receive periodic data-change messages for SQL Server tables or views.</span></span> <span data-ttu-id="30884-107">Les messages ne sont pas fortement typée.</span><span class="sxs-lookup"><span data-stu-id="30884-107">The messages are not strongly-typed.</span></span>  
  
-   <span data-ttu-id="30884-108">**TypedPolling**: vous permet de recevoir des messages de fortement typée de la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="30884-108">**TypedPolling**: Enables you to receive strongly-typed messages from the SQL Server database.</span></span> <span data-ttu-id="30884-109">Vous devez utiliser cette opération si vous souhaitez mapper les éléments dans le message d’interrogation avec n’importe quel autre schéma.</span><span class="sxs-lookup"><span data-stu-id="30884-109">You must use this operation if you intend to map the elements in the polling message to any other schema.</span></span>  
  
-   <span data-ttu-id="30884-110">**XmlPolling**.</span><span class="sxs-lookup"><span data-stu-id="30884-110">**XmlPolling**.</span></span> <span data-ttu-id="30884-111">Vous permet d’utiliser les instructions SELECT ou des procédures stockées qui utilisent une clause FOR XML et de retournent des données en tant que messages XML.</span><span class="sxs-lookup"><span data-stu-id="30884-111">Enables you to use SELECT statements or stored procedures that use a FOR XML clause and return data as XML messages.</span></span> <span data-ttu-id="30884-112">Cette opération renvoie le message d’interrogation en tant qu’un message XML.</span><span class="sxs-lookup"><span data-stu-id="30884-112">This operation returns the polling message as an XML message.</span></span>  
  
     <span data-ttu-id="30884-113">Pour plus d’informations sur la clause FOR XML, consultez [http://go.microsoft.com/fwlink/?LinkId=131402](http://go.microsoft.com/fwlink/?LinkId=131402).</span><span class="sxs-lookup"><span data-stu-id="30884-113">For more information about FOR XML clause, see [http://go.microsoft.com/fwlink/?LinkId=131402](http://go.microsoft.com/fwlink/?LinkId=131402).</span></span>  
  
 <span data-ttu-id="30884-114">Pour plus d’informations sur l’interrogation de la [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)], consultez [Messages basés sur la réception d’interrogation de données modifiées à partir de SQL Server à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="30884-114">For more information about polling in the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)], see [Receive Polling-based Data-changed Messages from SQL Server by Using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-biztalk.md).</span></span>  
  
## <a name="polling"></a><span data-ttu-id="30884-115">Interrogation</span><span class="sxs-lookup"><span data-stu-id="30884-115">Polling</span></span>  
 <span data-ttu-id="30884-116">Une opération d’interrogation standard à l’aide du [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] implique les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="30884-116">A typical polling operation using the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] involves the following:</span></span>  
  
1.  <span data-ttu-id="30884-117">Les clients de l’adaptateur doivent spécifier `Polling` en tant que l’opération entrante dans le **InboundOperationType** propriété de liaison.</span><span class="sxs-lookup"><span data-stu-id="30884-117">The adapter clients must specify `Polling` as the inbound operation in the **InboundOperationType** binding property.</span></span> <span data-ttu-id="30884-118">La valeur par défaut pour cette propriété de liaison est `Polling`.</span><span class="sxs-lookup"><span data-stu-id="30884-118">The default value for this binding property is `Polling`.</span></span>  
  
2.  <span data-ttu-id="30884-119">Les clients de l’adaptateur doivent spécifier une instruction SQL pour le **PolledDataAvailableStatement** propriété qui détermine si donnée n’est disponible pour l’interrogation de liaison.</span><span class="sxs-lookup"><span data-stu-id="30884-119">The adapter clients must specify a SQL statement for the **PolledDataAvailableStatement** binding property that determines whether there is data available for polling.</span></span> <span data-ttu-id="30884-120">La première colonne de la première ligne du premier jeu de résultats retourné sur l’exécution de cette instruction contient une valeur entière.</span><span class="sxs-lookup"><span data-stu-id="30884-120">The first column of the first row of the first result set returned on executing this statement contains an integer value.</span></span> <span data-ttu-id="30884-121">Si aucune donnée n’est disponible pour l’interrogation, la valeur de retour est 0 (zéro).</span><span class="sxs-lookup"><span data-stu-id="30884-121">If there is no data available for polling, the return value is 0 (zero).</span></span> <span data-ttu-id="30884-122">Si les données est disponible, la valeur de retour est supérieure à zéro.</span><span class="sxs-lookup"><span data-stu-id="30884-122">If there is data available, the return value is greater than zero.</span></span>  
  
3.  <span data-ttu-id="30884-123">Les clients de l’adaptateur doivent spécifier un intervalle d’interrogation pour le **PollingIntervalInSeconds** liaison de propriété pour définir l’intervalle selon lequel l’instruction dans le **PolledDataAvailableStatement** liaison propriété est exécutée.</span><span class="sxs-lookup"><span data-stu-id="30884-123">The adapter clients must specify a polling interval for the **PollingIntervalInSeconds** binding property to define the interval at which the statement in the **PolledDataAvailableStatement** binding property is executed.</span></span> <span data-ttu-id="30884-124">À la fin de chaque intervalle d’interrogation, l’instruction disponibles des données interrogées est exécutée et le jeu de résultats est retourné.</span><span class="sxs-lookup"><span data-stu-id="30884-124">At the end of every polling interval, the polled data available statement is executed, and the result set is returned.</span></span>  
  
4.  <span data-ttu-id="30884-125">Les clients de l’adaptateur doivent spécifier une instruction SQL de l’interrogation (instruction SELECT ou procédure stockée) pour le **PollingStatement** propriété de liaison.</span><span class="sxs-lookup"><span data-stu-id="30884-125">The adapter clients must specify a polling SQL statement (SELECT statement or stored procedure) for the **PollingStatement** binding property.</span></span> <span data-ttu-id="30884-126">Si des données sont disponibles pour l’interrogation (déterminé par le **PolledDataAvailableStatement** propriété de liaison), l’adaptateur exécute l’instruction d’interrogation pour obtenir et mettre à jour (le cas échéant) les données dans la base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="30884-126">If there is data available for polling (determined by the **PolledDataAvailableStatement** binding property), the adapter executes the polling statement to obtain and update (if applicable) the data in the SQL Server database.</span></span> <span data-ttu-id="30884-127">Lorsque le [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] est utilisé avec [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], la même transaction est également utilisée pour envoyer le message à [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="30884-127">When the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] is used with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], the same transaction is also used to submit the message to [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
5.  <span data-ttu-id="30884-128">Les clients de carte peuvent utiliser le **PollWhileDataFound** liaison de propriété pour ignorer l’intervalle d’interrogation et l’interrogation de façon permanente des données et celui où elle est disponible.</span><span class="sxs-lookup"><span data-stu-id="30884-128">The adapter clients can use the **PollWhileDataFound** binding property to ignore the polling interval, and continuously poll data, as and when available.</span></span>  
  
6.  <span data-ttu-id="30884-129">Les jeux de résultats renvoyés suite à l’exécution de l’instruction d’interrogation sont envoyées au client de carte en tant que le message entrant.</span><span class="sxs-lookup"><span data-stu-id="30884-129">The result sets that are returned as a result of executing the polling statement are sent to the adapter client as the inbound message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="30884-130">Une opération XmlPolling nécessite les mêmes étapes que l’opération d’interrogation.</span><span class="sxs-lookup"><span data-stu-id="30884-130">An XmlPolling operation involves the same steps as the Polling operation.</span></span>  
  
## <a name="strongly-typed-polling"></a><span data-ttu-id="30884-131">Interrogation fortement typée</span><span class="sxs-lookup"><span data-stu-id="30884-131">Strongly-Typed Polling</span></span>  
 <span data-ttu-id="30884-132">Une opération de type interrogation fortement typée à l’aide du [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] implique les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="30884-132">A typical strongly-typed polling operation using the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] involves the following:</span></span>  
  
1.  <span data-ttu-id="30884-133">Les clients de l’adaptateur doivent spécifier `TypedPolling` en tant que l’opération entrante dans le **InboundOperationType** propriété de liaison.</span><span class="sxs-lookup"><span data-stu-id="30884-133">The adapter clients must specify `TypedPolling` as the inbound operation in the **InboundOperationType** binding property.</span></span> <span data-ttu-id="30884-134">La valeur par défaut pour cette propriété de liaison est `Polling`.</span><span class="sxs-lookup"><span data-stu-id="30884-134">The default value for this binding property is `Polling`.</span></span>  
  
2.  <span data-ttu-id="30884-135">Les clients de l’adaptateur doivent spécifier un ID entrant dans le cadre de l’URI de connexion.</span><span class="sxs-lookup"><span data-stu-id="30884-135">The adapter clients must specify an inbound ID as part of the connection URI.</span></span> <span data-ttu-id="30884-136">L’ID d’entrée peut être n’importe quelle chaîne et est ajouté à l’espace de noms standard de l’opération TypedPolling pour empêcher les collisions d’espace de noms.</span><span class="sxs-lookup"><span data-stu-id="30884-136">The inbound ID could be any string and is appended to the standard namespace of the TypedPolling operation to prevent namespace collisions.</span></span>  
  
3.  <span data-ttu-id="30884-137">Le reste des étapes sont les mêmes que les étapes 2 à 6 répertoriés dans l’opération d’interrogation décrite dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="30884-137">The rest of the steps are same as steps 2–6 listed in the Polling operation described in the preceding section.</span></span>  
  
 <span data-ttu-id="30884-138">Pour obtenir des informations détaillées sur les propriétés de liaison relatives à l’interrogation et l’interrogation fortement typée, consultez [en savoir plus sur l’adaptateur BizTalk pour les propriétés de liaison de l’adaptateur SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="30884-138">For detailed information about the binding properties related to polling and strongly-typed polling, see [Read about BizTalk Adapter for SQL Server adapter  Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="30884-139">Plusieurs jeux de résultats peut être retourné suite à l’exécution de l’instruction d’interrogation.</span><span class="sxs-lookup"><span data-stu-id="30884-139">Multiple result sets can be returned as a result of executing the polling statement.</span></span> <span data-ttu-id="30884-140">Si les jeux de résultats ne contiennent pas toutes les lignes, aucun message est envoyé au client de carte.</span><span class="sxs-lookup"><span data-stu-id="30884-140">If the result sets do not contain any rows, no messages are sent to the adapter client.</span></span>  
  
 <span data-ttu-id="30884-141">L’illustration ci-dessous fournit des informations sur le flux de travail d’interrogation dans [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="30884-141">The illustration below provides information about the polling workflow in [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="30884-142">Deux scénarios pour le workflow d’interrogation sont notamment :</span><span class="sxs-lookup"><span data-stu-id="30884-142">Two scenarios for the polling workflow are illustrated:</span></span>  
  
1.  <span data-ttu-id="30884-143">Lorsque la valeur de la **PollWhileDataFound** a la valeur « False » (valeur par défaut).</span><span class="sxs-lookup"><span data-stu-id="30884-143">When the value of the **PollWhileDataFound** is set to “False” (default setting).</span></span>  
  
2.  <span data-ttu-id="30884-144">Lorsque la valeur de la **PollWhileDataFound** a la valeur « True ».</span><span class="sxs-lookup"><span data-stu-id="30884-144">When the value of the **PollWhileDataFound** is set to “True.”</span></span>  
  
 <span data-ttu-id="30884-145">![Workflow d’interrogation &#40; PollWhileDataFound &#61; False &#41; ] (../../adapters-and-accelerators/adapter-sql/media/15598c14-3a62-4b8d-90bf-84e004a386db.gif "15598c14-3a62-4b8d-90bf-84e004a386db") ![d’interrogation de flux de travail &#40; PollWhileDataFound &#61; La valeur true &#41; ] (../../adapters-and-accelerators/adapter-sql/media/c20535be-ea45-4456-8b62-4d4585cb1d8c.gif "c20535be-ea45-4456-8b62-4d4585cb1d8c")</span><span class="sxs-lookup"><span data-stu-id="30884-145">![Polling Workflow &#40;PollWhileDataFound &#61; False&#41;](../../adapters-and-accelerators/adapter-sql/media/15598c14-3a62-4b8d-90bf-84e004a386db.gif "15598c14-3a62-4b8d-90bf-84e004a386db") ![Polling Workflow &#40;PollWhileDataFound &#61; True&#41;](../../adapters-and-accelerators/adapter-sql/media/c20535be-ea45-4456-8b62-4d4585cb1d8c.gif "c20535be-ea45-4456-8b62-4d4585cb1d8c")</span></span>  
  
## <a name="differences-between-polling-and-query-notification"></a><span data-ttu-id="30884-146">Différences entre l’interrogation et la Notification de requête</span><span class="sxs-lookup"><span data-stu-id="30884-146">Differences between Polling and Query Notification</span></span>  
 <span data-ttu-id="30884-147">Bien que l’interrogation et la requête de notification sont les deux opérations entrantes et informer les clients de l’adaptateur sur les modifications de données dans la base de données SQL Server, le tableau suivant répertorie quelques différences entre les deux.</span><span class="sxs-lookup"><span data-stu-id="30884-147">Though polling and query notification are both inbound operations, and inform the adapter clients about the data changes in the SQL Server database, the following table lists some differences between the two.</span></span> <span data-ttu-id="30884-148">Les différences suivantes vous aideront à choisir une opération selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="30884-148">The following differences will help you decide on an operation depending on your requirements:</span></span>  
  
|<span data-ttu-id="30884-149">Interrogation</span><span class="sxs-lookup"><span data-stu-id="30884-149">Polling</span></span>|<span data-ttu-id="30884-150">Notification de requête</span><span class="sxs-lookup"><span data-stu-id="30884-150">Query Notification</span></span>|  
|-------------|------------------------|  
|<span data-ttu-id="30884-151">L’interrogation est lancée par l’adaptateur.</span><span class="sxs-lookup"><span data-stu-id="30884-151">Polling is initiated by the adapter.</span></span> <span data-ttu-id="30884-152">L’adaptateur exécute une instruction pour vérifier si les données sont disponibles pour l’interrogation et initialise l’interrogation par l’exécution de l’instruction d’interrogation des données seront disponibles pour l’interrogation.</span><span class="sxs-lookup"><span data-stu-id="30884-152">The adapter executes a statement to validate whether data is available for polling, and then initiates polling by executing the polling statement if some data is available for polling.</span></span>|<span data-ttu-id="30884-153">Notification de requête est lancée par SQL Server.</span><span class="sxs-lookup"><span data-stu-id="30884-153">Query notification is initiated by SQL Server.</span></span> <span data-ttu-id="30884-154">L’instruction de notification émise par l’adaptateur simplement fait en sorte que la base de données pour lancer la notification au cas où une modification du jeu de résultats de l’instruction.</span><span class="sxs-lookup"><span data-stu-id="30884-154">The notification statement issued by the adapter just instructs the database to initiate notification in case there is a change in the result set of the statement.</span></span>|  
|<span data-ttu-id="30884-155">Vous pouvez utiliser l’instruction d’interrogation pour lire ou mettre à jour des données dans une table de base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="30884-155">You can use the polling statement to read or update data in a SQL Server database table.</span></span>|<span data-ttu-id="30884-156">Vous pouvez utiliser l’instruction de notification de requête à lire uniquement les données dans une table de base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="30884-156">You can use the query notification statement to only read data in a SQL Server database table.</span></span>|  
|<span data-ttu-id="30884-157">L’interrogation vous informe sur les données réelles qui ont été modifiées.</span><span class="sxs-lookup"><span data-stu-id="30884-157">Polling informs you about the actual data that has changed.</span></span>|<span data-ttu-id="30884-158">Notification de requête indique uniquement sur le type de données, telles que Insert, Update et Delete.</span><span class="sxs-lookup"><span data-stu-id="30884-158">Query notification only informs about the type of change in the data such as Insert, Update, and Delete.</span></span>|  
|<span data-ttu-id="30884-159">La notification de modification de données dépend de l’intervalle d’interrogation, et les clients de la carte sont informés des changements de données à la fin de chaque intervalle d’interrogation.</span><span class="sxs-lookup"><span data-stu-id="30884-159">The data-change notification depends on the polling interval, and the adapter clients are informed about the data changes at the end of every polling interval.</span></span> <span data-ttu-id="30884-160">**Conseil :** interrogation peut vous fournir un meilleur débit dans les scénarios où les modifications de données sont produisent en permanence, et vous ne souhaitez pas être averti de chaque modification en tant qu’et lorsque cela se produit.</span><span class="sxs-lookup"><span data-stu-id="30884-160">**Tip:**  Polling can give you better throughput in scenarios where the data changes are happening continuously, and you do not want to be notified of each change as and when it happens.</span></span> <span data-ttu-id="30884-161">Au lieu de cela, vous spécifiez un intervalle d’interrogation après laquelle vous souhaitez être averti de toutes les modifications qui se sont produites depuis la dernière notification de modification de données.</span><span class="sxs-lookup"><span data-stu-id="30884-161">Instead, you specify a polling interval after which you want to be notified of all the changes that have happened since the last data-change notification.</span></span>|<span data-ttu-id="30884-162">La notification de modification de données est instantanée.</span><span class="sxs-lookup"><span data-stu-id="30884-162">The data-change notification is instantaneous.</span></span>|  
  
 <span data-ttu-id="30884-163">Pour plus d’informations sur la notification de requête dans [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)], consultez [recevoir des Notifications de requête SQL à l’aide de BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="30884-163">For more information about query notification in [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)], see [Receive SQL Query Notifications by Using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="30884-164">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="30884-164">See Also</span></span>  
 <span data-ttu-id="30884-165">[Quelles opérations peuvent être effectuées à l’aide de la carte ?](https://msdn.microsoft.com/library/cc185435(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="30884-165">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185435(v=bts.10).aspx)</span></span>