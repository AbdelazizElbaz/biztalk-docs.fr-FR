---
title: "Magasin de l’adaptateur et le transfert de réception SWIFT | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 11eeb335-366b-4b29-9078-de9396b258ca
caps.latest.revision: "7"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 315b9bbe6985bbce5ccb44d8d4846b18730f292b
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="swift-receive-adapter-store-and-forward"></a><span data-ttu-id="28ebc-102">Magasin de l’adaptateur et le transfert de réception SWIFT</span><span class="sxs-lookup"><span data-stu-id="28ebc-102">SWIFT Receive Adapter Store and Forward</span></span>
<span data-ttu-id="28ebc-103">L’adaptateur de réception reçoit des messages à partir du magasin SWIFT et la file d’attente de transfert (msng).</span><span class="sxs-lookup"><span data-stu-id="28ebc-103">The receive adapter receives messages from the SWIFT store and forward (SnF) queue.</span></span> <span data-ttu-id="28ebc-104">Pour recevoir des messages à partir de la file d’attente, l’adaptateur doit ouvrir une session avec la file d’attente MSNG.</span><span class="sxs-lookup"><span data-stu-id="28ebc-104">To receive messages from the queue, the adapter must open a session with the SnF queue.</span></span> <span data-ttu-id="28ebc-105">Pour ouvrir la file d’attente, il doit avoir un processus client dédié qui établit la session avec la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="28ebc-105">To open the queue, it must have a dedicated client process that establishes the session with the queue.</span></span> <span data-ttu-id="28ebc-106">Dans la conception, ce processus est implémenté comme un COM + d’un composant d’out-of-Process.</span><span class="sxs-lookup"><span data-stu-id="28ebc-106">In the design, this process is implemented as a COM plus out-of-proc component.</span></span>  
  
## <a name="push-session-store-and-forward-sequence"></a><span data-ttu-id="28ebc-107">Push de magasin de session et la séquence de transfert</span><span class="sxs-lookup"><span data-stu-id="28ebc-107">Push session store and forward sequence</span></span>  
 <span data-ttu-id="28ebc-108">La liste suivante décrit le magasin et la séquence de transfert.</span><span class="sxs-lookup"><span data-stu-id="28ebc-108">The following list describes the store and forward sequence.</span></span>  
  
1.  <span data-ttu-id="28ebc-109">Démarrer l’application serveur qui traite les messages.</span><span class="sxs-lookup"><span data-stu-id="28ebc-109">Start the server application that processes the messages.</span></span>  
  
2.  <span data-ttu-id="28ebc-110">Le processus serveur ouvre les contextes de sécurité requis lors de la première SwCallback avec la Sw:HandleInitRequest comme une primitive d’entrée.</span><span class="sxs-lookup"><span data-stu-id="28ebc-110">The server process opens the required security contexts during the first SwCallback with the Sw:HandleInitRequest as an input primitive.</span></span>  
  
3.  <span data-ttu-id="28ebc-111">Le serveur répond à la Sw:HandleInitRequest avec un ou les deux Sw:CryptoMode et Sw:FACryptoMode définie sur Avancé.</span><span class="sxs-lookup"><span data-stu-id="28ebc-111">The server responds to the Sw:HandleInitRequest with either or both Sw:CryptoMode and Sw:FACryptoMode set to Advanced.</span></span>  
  
     <span data-ttu-id="28ebc-112">Le serveur est maintenant prêt à commencer le traitement des demandes entrantes.</span><span class="sxs-lookup"><span data-stu-id="28ebc-112">The server is now ready to start processing incoming requests.</span></span>  
  
4.  <span data-ttu-id="28ebc-113">Pour démarrer la remise de messages à partir d’une file d’attente, un processus client démarre une session de push.</span><span class="sxs-lookup"><span data-stu-id="28ebc-113">To start the delivery of messages from a queue, a client process starts a push session.</span></span> <span data-ttu-id="28ebc-114">Selon la configuration de l’adaptateur (mode par envoi), l’adaptateur de réception génère un processus client appelé SnFQueueManager.exe pour acquérir la file d’attente en mode push.</span><span class="sxs-lookup"><span data-stu-id="28ebc-114">Based on the adapter configuration (push mode), the receive adapter spawns a client process called SnFQueueManager.exe to acquire the queue in push mode.</span></span>  
  
5.  <span data-ttu-id="28ebc-115">Un SwCall() s’exécute avec Sw:AcquireSnFRequest (dans le Sw:ExchangeSnFRequest) comme une primitive d’entrée.</span><span class="sxs-lookup"><span data-stu-id="28ebc-115">An SwCall() runs with Sw:AcquireSnFRequest (within the Sw:ExchangeSnFRequest) as an input primitive.</span></span> <span data-ttu-id="28ebc-116">Cette demande démarre une session avec la file d’attente indiqué (si le SwSec:AuthorisationContext a le rôle RBAC requis).</span><span class="sxs-lookup"><span data-stu-id="28ebc-116">This request starts a session with the queue indicated (if the SwSec:AuthorisationContext has the required RBAC role).</span></span>  
  
6.  <span data-ttu-id="28ebc-117">Immédiatement après la réponse avec « Accepté » dans le Sw:AcquireStatus, SWIFTNet SnF commence à envoyer des messages sur le serveur comme indiqué dans l’acquisition.</span><span class="sxs-lookup"><span data-stu-id="28ebc-117">Immediately after responding with “Accepted” in the Sw:AcquireStatus, SWIFTNet SnF starts sending messages to the server as specified in the acquire.</span></span> <span data-ttu-id="28ebc-118">Si l’adaptateur de réception n’a pas encore démarré, messages Obtient des exceptions.</span><span class="sxs-lookup"><span data-stu-id="28ebc-118">If the receive adapter was not yet started, messages get exceptions.</span></span> <span data-ttu-id="28ebc-119">(C’est pourquoi il est important que les adaptateurs de réception déjà démarrés).</span><span class="sxs-lookup"><span data-stu-id="28ebc-119">(That is why it is important to have the receive adapters already started).</span></span>  
  
7.  <span data-ttu-id="28ebc-120">SWIFTNet SnF démarre en exécutant un push d’un nombre de messages (jusqu'à la taille de fenêtre).</span><span class="sxs-lookup"><span data-stu-id="28ebc-120">SWIFTNet SnF starts pushing a number of messages (up to the window size).</span></span>  
  
8.  <span data-ttu-id="28ebc-121">Pour chaque message d’accusé de réception, un nouveau message (le cas échéant) est envoyé.</span><span class="sxs-lookup"><span data-stu-id="28ebc-121">For every message acknowledged, a new message (if any) is pushed.</span></span>  
  
9. <span data-ttu-id="28ebc-122">Le processus du client (SnFQueueManager.exe) a fait son travail et peut se terminer maintenant.</span><span class="sxs-lookup"><span data-stu-id="28ebc-122">The client process (SnFQueueManager.exe) has done its job and can now terminate.</span></span> <span data-ttu-id="28ebc-123">Le processus émet SwSec:DestroyContextRequest, qui nettoie les contextes de sécurité.</span><span class="sxs-lookup"><span data-stu-id="28ebc-123">The process issues SwSec:DestroyContextRequest, which cleans up the open security contexts.</span></span> <span data-ttu-id="28ebc-124">Après le Sw:TermRequest, le processus s’arrête.</span><span class="sxs-lookup"><span data-stu-id="28ebc-124">After the Sw:TermRequest, the process exits.</span></span>  
  
### <a name="message-correlation"></a><span data-ttu-id="28ebc-125">Corrélation de messages</span><span class="sxs-lookup"><span data-stu-id="28ebc-125">Message Correlation</span></span>  
 <span data-ttu-id="28ebc-126">Le champ RequestRef est conservé et remplacé dans les messages de réponse par l’adaptateur de réception.</span><span class="sxs-lookup"><span data-stu-id="28ebc-126">The RequestRef field is preserved and substituted back in the response messages by the receive adapter.</span></span> <span data-ttu-id="28ebc-127">Cela garantit la corrélation de bout en bout entre le message entrant et le message de réponse</span><span class="sxs-lookup"><span data-stu-id="28ebc-127">This ensures end to end correlation between the incoming message and the response message</span></span>  
  
### <a name="duplicate-processing"></a><span data-ttu-id="28ebc-128">Traitement dupliqué</span><span class="sxs-lookup"><span data-stu-id="28ebc-128">Duplicate processing</span></span>  
 <span data-ttu-id="28ebc-129">Si la réception d’une demande de FileAct et de l’instance de l’adaptateur reçoit un message avec un nœud de l’indicateur Possible de dupliquer, il doit vérifier si le transfert référencé est déjà terminée correctement ou si elle a échoué et prenez les mesures appropriées.</span><span class="sxs-lookup"><span data-stu-id="28ebc-129">If receiving a FileAct request, and the adapter instance receives a message with a Possible Duplicate Indicator node, then it must check to see if the referenced transfer has already completed successfully or if it has failed, and take the appropriate action.</span></span> <span data-ttu-id="28ebc-130">Si le transfert de fichiers a déjà eu lieu, puis l’adaptateur met à jour le statut du transfert en tant que « Duplicate » dans le cas contraire elle met à jour en tant que « Accepté ».</span><span class="sxs-lookup"><span data-stu-id="28ebc-130">If the file transfer has already taken place then the adapter updates the transfer status as “Duplicate” otherwise it updates it as “Accepted.”</span></span>  
  
### <a name="acknowledgments"></a><span data-ttu-id="28ebc-131">Accusés de réception</span><span class="sxs-lookup"><span data-stu-id="28ebc-131">Acknowledgments</span></span>  
 <span data-ttu-id="28ebc-132">Si l’expéditeur demande un accusé de réception d’une demande de FileAct, l’adaptateur vérifie pour l’événement de fin de transfert de fichier et génère l’accusé de réception après avoir vérifié la valeur digest du fichier.</span><span class="sxs-lookup"><span data-stu-id="28ebc-132">If the sender requests an acknowledgement for a FileAct request, the adapter checks for the file transfer completion event and generates the acknowledgement after verifying the file digest value.</span></span> <span data-ttu-id="28ebc-133">L’adaptateur envoie le message d’accusé de réception à BizTalk pour l’adaptateur d’envoi pour le choisir et l’envoyer à l’expéditeur.</span><span class="sxs-lookup"><span data-stu-id="28ebc-133">The adapter sends the acknowledgement message to BizTalk for the send adapter to pick it up and send it to the sender.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="28ebc-134">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="28ebc-134">See Also</span></span>  
 <span data-ttu-id="28ebc-135">[Architecture de l’adaptateur de réception SWIFT](../../adapters-and-accelerators/fileact-interact/swift-receive-adapter-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="28ebc-135">[SWIFT Receive Adapter Architecture](../../adapters-and-accelerators/fileact-interact/swift-receive-adapter-architecture.md) </span></span>  
 <span data-ttu-id="28ebc-136">[URI d’adaptateur de réception SWIFT](../../adapters-and-accelerators/fileact-interact/swift-receive-adapter-uri.md) </span><span class="sxs-lookup"><span data-stu-id="28ebc-136">[SWIFT Receive Adapter URI](../../adapters-and-accelerators/fileact-interact/swift-receive-adapter-uri.md) </span></span>  
 <span data-ttu-id="28ebc-137">[Initialisation de l’adaptateur de réception SWIFT](../../adapters-and-accelerators/fileact-interact/swift-receive-adapter-initialization.md) </span><span class="sxs-lookup"><span data-stu-id="28ebc-137">[SWIFT Receive Adapter Initialization](../../adapters-and-accelerators/fileact-interact/swift-receive-adapter-initialization.md) </span></span>  
 <span data-ttu-id="28ebc-138">[Contexte de sécurité de l’adaptateur de réception SWIFT](../../adapters-and-accelerators/fileact-interact/swift-receive-adapter-security-context.md) </span><span class="sxs-lookup"><span data-stu-id="28ebc-138">[SWIFT Receive Adapter Security Context](../../adapters-and-accelerators/fileact-interact/swift-receive-adapter-security-context.md) </span></span>  
 [<span data-ttu-id="28ebc-139">Les Modes synchrone et différé de l’adaptateur de réception SWIFT</span><span class="sxs-lookup"><span data-stu-id="28ebc-139">SWIFT Receive Adapter Synchronous and Deferred Modes</span></span>](../../adapters-and-accelerators/fileact-interact/swift-receive-adapter-synchronous-and-deferred-modes.md)