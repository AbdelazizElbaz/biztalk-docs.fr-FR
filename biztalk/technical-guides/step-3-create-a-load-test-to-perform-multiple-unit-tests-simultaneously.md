---
title: "Étape 3 : Créer un Test de charge pour exécuter plusieurs Tests unitaires simultanément | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: b5dd7e31-7188-4edf-9513-ea2725950b47
caps.latest.revision: "19"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 76b3d26e9f1dd14463d153c89316b3cf3da0338d
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2017
---
# <a name="step-3-create-a-load-test-to-perform-multiple-unit-tests-simultaneously"></a><span data-ttu-id="30128-102">Étape 3 : Créer un Test de charge pour exécuter plusieurs Tests unitaires simultanément</span><span class="sxs-lookup"><span data-stu-id="30128-102">Step 3: Create a Load Test to Perform Multiple Unit Tests Simultaneously</span></span>
<span data-ttu-id="30128-103">Tests de charge exécutent plusieurs instances de l’un ou des tests unitaires plus afin que vous pouvez mesurer les performances et la capacité de gérer la charge de votre application.</span><span class="sxs-lookup"><span data-stu-id="30128-103">Load tests run multiple instances of one or more unit tests so that you can measure your application's performance and ability to handle load.</span></span> <span data-ttu-id="30128-104">Les composants principaux d’un test de charge Visual Studio 2010 sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="30128-104">The primary components of a Visual Studio 2010 load test include:</span></span>  
  
-   <span data-ttu-id="30128-105">**Scénarios** – la section d’un test de charge, dans laquelle vous permet de configurer le modèle de test de charge, modèle de combinaison de tests, la combinaison de tests, la combinaison de réseaux et de la combinaison de navigateurs Web.</span><span class="sxs-lookup"><span data-stu-id="30128-105">**Scenarios** – The section of a load test where you configure the test load pattern, test mix model, test mix, network mix and Web browser mix.</span></span> <span data-ttu-id="30128-106">Scénarios de prendre en compte la complexité de la simulation de profils de charge de travail complexe monde réel.</span><span class="sxs-lookup"><span data-stu-id="30128-106">Scenarios accommodate the complexity of simulating complex real world work load profiles.</span></span> <span data-ttu-id="30128-107">Pour une liste complète de tous les charger les propriétés du scénario de test, consultez [propriétés de scénario de Test de charge](http://go.microsoft.com/fwlink/?LinkId=208327) (http://go.microsoft.com/fwlink/?LinkId=208327).</span><span class="sxs-lookup"><span data-stu-id="30128-107">For a comprehensive listing of all load test scenario properties see [Load Test Scenario Properties](http://go.microsoft.com/fwlink/?LinkId=208327) (http://go.microsoft.com/fwlink/?LinkId=208327).</span></span>  
  
-   <span data-ttu-id="30128-108">**Ensembles de compteurs** – la section où vous créez des regroupements particuliers ou « Ensembles » des compteurs de performance à collecter pendant le test de charge est en cours d’exécution d’un test de charge.</span><span class="sxs-lookup"><span data-stu-id="30128-108">**Counter Sets** – The section of a load test where you create particular groupings or “Sets” of performance counters to be collected while the load test is running.</span></span> <span data-ttu-id="30128-109">Plusieurs ensembles de compteurs prédéfinis sont fournis par défaut et ensembles de compteurs personnalisés peuvent être ajoutés.</span><span class="sxs-lookup"><span data-stu-id="30128-109">Several predefined counter sets are provided by default and custom counter sets can be added.</span></span> <span data-ttu-id="30128-110">Par exemple, pour évaluer le réseau performances, vous pouvez créer un compteur personnalisé défini, ajouter les compteurs de performance réseau pertinentes et enregistrer dans la liste des ensembles de compteurs disponibles.</span><span class="sxs-lookup"><span data-stu-id="30128-110">For example to evaluate Network performance you can create a custom counter set, add the relevant Network performance counters and save it to the list of available counter sets.</span></span> <span data-ttu-id="30128-111">Pour plus d’informations sur la création et l’enregistrement des ensembles de compteurs pour les tests de charge, consultez [spécifiant les ensembles de compteurs pour les ordinateurs dans un Test de charge](http://go.microsoft.com/fwlink/?LinkId=208328) (http://go.microsoft.com/fwlink/?LinkId=208328).</span><span class="sxs-lookup"><span data-stu-id="30128-111">For more information about creating and saving counter sets for load tests see [Specifying the Counter Sets for Computers in a Load Test](http://go.microsoft.com/fwlink/?LinkId=208328) (http://go.microsoft.com/fwlink/?LinkId=208328).</span></span>  
  
-   <span data-ttu-id="30128-112">**Paramètres d’exécution** : définissent des paramètres d’exécution différents aspects d’un test de charge, y compris la durée du test, les ensembles de compteurs qui sont associées à différents ordinateurs pendant le test de charge, différentes options de validation de test et les options de stockage des résultats des tests.</span><span class="sxs-lookup"><span data-stu-id="30128-112">**Run Settings** – Run settings define multiple aspects of a load test, including the test duration, the counter sets that are associated with various computers during the load test, various test validation options, and test results storage options.</span></span> <span data-ttu-id="30128-113">Vous pouvez créer et stocker plusieurs paramètres d’exécution pour chaque test de charge, puis sélectionnez un paramètre particulier à utiliser lorsque vous exécutez le test.</span><span class="sxs-lookup"><span data-stu-id="30128-113">You can create and store multiple run settings for each load test, and then select a particular setting to use when you run the test.</span></span> <span data-ttu-id="30128-114">Un paramètre d’exécution initial est ajouté à votre test de charge lorsque vous créez votre test de charge avec l’Assistant Nouveau Test de charge.</span><span class="sxs-lookup"><span data-stu-id="30128-114">An initial run setting is added to your load test when you create your load test with the New Load Test Wizard.</span></span> <span data-ttu-id="30128-115">Pour une liste complète de tous les tests de charge les propriétés de paramètre d’exécution, consultez [propriétés Test de charge exécuté paramètre](http://go.microsoft.com/fwlink/?LinkId=208329) (http://go.microsoft.com/fwlink/?LinkId=208329).</span><span class="sxs-lookup"><span data-stu-id="30128-115">For a comprehensive listing of all load test run setting properties see [Load Test Run Setting Properties](http://go.microsoft.com/fwlink/?LinkId=208329) (http://go.microsoft.com/fwlink/?LinkId=208329).</span></span>  
  
 <span data-ttu-id="30128-116">Tests de charge sont créés à l’aide du nouvel Assistant Test de charge, de le modifier avec l’éditeur de Test de charge et analysés dans l’Analyseur de Test de charge.</span><span class="sxs-lookup"><span data-stu-id="30128-116">Load tests are created using the New Load Test Wizard, edited with the Load Test Editor, and analyzed in the Load Test Analyzer.</span></span> <span data-ttu-id="30128-117">Tous ces outils sont inclus dans les éditions de Microsoft Visual Studio Ultimate.</span><span class="sxs-lookup"><span data-stu-id="30128-117">All these tools are included in Microsoft Visual Studio Ultimate edition.</span></span> <span data-ttu-id="30128-118">Pour plus d’informations sur la création et modification de tests de charge dans Visual Studio 2010 Ultimate Édition, consultez [création et modification des Tests de charge](http://go.microsoft.com/fwlink/?LinkId=208308) (http://go.microsoft.com/fwlink/?LinkId=208308).</span><span class="sxs-lookup"><span data-stu-id="30128-118">For more information about creating and editing load tests in Visual Studio 2010 Ultimate edition see [Creating and Editing Load Tests](http://go.microsoft.com/fwlink/?LinkId=208308) (http://go.microsoft.com/fwlink/?LinkId=208308).</span></span>  
  
 <span data-ttu-id="30128-119">Suivez les étapes décrites dans les sections ci-dessous pour ajouter une charge de test au projet de test décrit dans [étape 1 : créer un Test unitaire pour envoyer des Documents à BizTalk Server](../technical-guides/step-1-create-a-unit-test-to-submit-documents-to-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="30128-119">Follow the steps in the sections below to add a load test to the test project described in [Step 1: Create a Unit Test to Submit Documents to BizTalk Server](../technical-guides/step-1-create-a-unit-test-to-submit-documents-to-biztalk-server.md).</span></span> <span data-ttu-id="30128-120">Ces étapes décrivent également comment configurer le **scénarios**, **les ensembles de compteurs**, et **paramètres d’exécution** pour un test de charge.</span><span class="sxs-lookup"><span data-stu-id="30128-120">These steps also describe how to configure the **Scenarios**, **Counter Sets**, and **Run Settings** for a load test.</span></span>  
  
##  <a name="BKMK_StepLoadTest"></a><span data-ttu-id="30128-121">Ajouter un Test de charge et configurer le scénario de Test de charge, ensembles de compteurs et paramètres d’exécution</span><span class="sxs-lookup"><span data-stu-id="30128-121">Add a Load Test and Configure the Load Test Scenario, Counter Sets, and Run Settings</span></span>  
 <span data-ttu-id="30128-122">Cette rubrique explique comment utiliser le **Assistant Nouveau Test de charge** pour ajouter une charge de test à un projet de test et la configuration de la charge de test pour répondre aux besoins spécifiques.</span><span class="sxs-lookup"><span data-stu-id="30128-122">This topic describes how to use the **New Load Test Wizard** to add a load test to a test project and how to configure the load test to meet specific needs.</span></span>  
  
### <a name="use-the-new-load-test-wizard-to-add-a-load-test-to-the-test-project"></a><span data-ttu-id="30128-123">Utilisez l’Assistant Nouveau Test de charge pour ajouter un Test de charge au projet de Test</span><span class="sxs-lookup"><span data-stu-id="30128-123">Use the New Load Test Wizard to Add a Load Test to the Test Project</span></span>  
 <span data-ttu-id="30128-124">Suivez ces étapes pour ajouter un test de charge à un projet de test à l’aide de l’Assistant Nouveau Test de charge.</span><span class="sxs-lookup"><span data-stu-id="30128-124">Follow these steps to add a load test to a test project using the New Load Test Wizard.</span></span>  
  
1.  <span data-ttu-id="30128-125">Ouvrez le **Test de charge** solution dans Visual Studio 2010, s’il n’est pas déjà ouvert.</span><span class="sxs-lookup"><span data-stu-id="30128-125">Open the **Load Test** solution in Visual Studio 2010 if it is not already open.</span></span>  
  
2.  <span data-ttu-id="30128-126">Ajouter un dossier dans le projet BTSLoad ; ce dossier contiendra les tests de charge qui sont créés dans le cadre de ce projet.</span><span class="sxs-lookup"><span data-stu-id="30128-126">Add a folder to the BTSLoad project; this folder will contain any load tests that are created as part of this project.</span></span> <span data-ttu-id="30128-127">Dans l’Explorateur de solutions, cliquez sur le projet BTSLoad, pointez sur **ajouter**, puis cliquez sur **nouveau dossier**.</span><span class="sxs-lookup"><span data-stu-id="30128-127">In Solution Explorer, right-click the BTSLoad project, point to **Add**, and click **New Folder**.</span></span> <span data-ttu-id="30128-128">Une icône de dossier avec le texte mis en surbrillance **Nouveaudossier1** s’affiche sous le projet BTSLoad, type **LoadTests** pour modifier le texte en surbrillance et appuyez sur ENTRÉE pour terminer la création du dossier C:\ Projects\LoadTest\BTSLoad\LoadTests.</span><span class="sxs-lookup"><span data-stu-id="30128-128">A folder icon with the highlighted text **NewFolder1** will appear under the BTSLoad project, type **LoadTests** to change the highlighted text and press the Enter key to complete creation of the folder C:\Projects\LoadTest\BTSLoad\LoadTests.</span></span>  
  
3.  <span data-ttu-id="30128-129">Dans l’Explorateur de solutions, cliquez sur le **BTSLoad** de projet, pointez sur **ajouter**, puis cliquez sur **Test de charge** pour démarrer le **nouvel Assistant de Test de charge**.</span><span class="sxs-lookup"><span data-stu-id="30128-129">In Solution Explorer, right-click on the **BTSLoad** project, point to **Add**, and then click **Load Test** to start the **New Load Test Wizard**.</span></span>  
  
4.  <span data-ttu-id="30128-130">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="30128-130">Click **Next**.</span></span>  
  
5.  <span data-ttu-id="30128-131">Sur le **modifier les paramètres pour un scénario de Test de charge** page sous **Entrez un nom pour le scénario de test de charge :** type **BTS_Messaging_Step**.</span><span class="sxs-lookup"><span data-stu-id="30128-131">On the **Edit Settings for a Load Test Scenario** page under **Enter a name for the load test scenario:** type **BTS_Messaging_Step**.</span></span> <span data-ttu-id="30128-132">Sous **profil de temps de réflexion** sélectionnez **n’utilisent pas les temps de réflexion** puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="30128-132">Under **Think time profile** select **Do not use think times** and then click **Next**.</span></span>  
  
6.  <span data-ttu-id="30128-133">Sur le **scénario de test de modifier les paramètres de modèle de charge pour une charge** page Sélectionnez **charge par étape**, entrez les valeurs ci-dessous, puis sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="30128-133">On the **Edit load pattern settings for a load test scenario** page select **Step load**, enter the values below and then click **Next**.</span></span>  
  
    -   <span data-ttu-id="30128-134">**Nombre d’utilisateurs de démarrer :** 30 utilisateurs</span><span class="sxs-lookup"><span data-stu-id="30128-134">**Start user count:** 30 users</span></span>  
  
    -   <span data-ttu-id="30128-135">**Durée de l’étape :** 60 secondes</span><span class="sxs-lookup"><span data-stu-id="30128-135">**Step duration:** 60 seconds</span></span>  
  
    -   <span data-ttu-id="30128-136">**Nombre d’utilisateurs dans l’étape :** 10 utilisateurs</span><span class="sxs-lookup"><span data-stu-id="30128-136">**Step user count:** 10 users</span></span>  
  
    -   <span data-ttu-id="30128-137">**Nombre maximal d’utilisateurs** aux 80 utilisateurs</span><span class="sxs-lookup"><span data-stu-id="30128-137">**Maximum user count** 80 users</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="30128-138">Lors de l’application des paramètres pour un modèle de charge par étape, vous devez calculer la quantité de temps nécessaire pour tous les incréments terminer.</span><span class="sxs-lookup"><span data-stu-id="30128-138">When applying settings for a step load pattern you should calculate the amount of time required for all step increments to complete.</span></span> <span data-ttu-id="30128-139">Par exemple, en utilisant les paramètres de modèle de charge spécifiés ci-dessus le test de charge doivent 5 minutes pour effectuer toutes les 60 secondes pas incréments lorsqu’en identifiant de 30 à 80 utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="30128-139">For example, using the load pattern settings specified above the load test will need 5 minutes to complete all of the 60 second step increments when ramping up from 30 to 80 users.</span></span> <span data-ttu-id="30128-140">Dans la dernière page de l’Assistant Test de charge s’affiche avec les options de spécification de la longueur du test de charge, qui sera de **durée de Test de charge**.</span><span class="sxs-lookup"><span data-stu-id="30128-140">On the last page of the New Load Test Wizard you will be presented with options for specifying the length of the load test, one of which will be **Load Test Duration**.</span></span> <span data-ttu-id="30128-141">Si vous avez déjà calculé le temps nécessaire pour tous les incréments pour terminer, il s’agit d’une tâche simple à taper la valeur (5 minutes dans le cas présent) pas à pas pour **durée du Test de charge**.</span><span class="sxs-lookup"><span data-stu-id="30128-141">If you have already calculated the time required for all step increments to complete then it is a straightforward task to enter the value (5 minutes in this case) for **Load Test Duration**.</span></span>  
  
7.  <span data-ttu-id="30128-142">Sur le **sélectionner un modèle de combinaison de tests pour le test de charge** page Sélectionnez **en fonction du nombre d’utilisateurs virtuels** puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="30128-142">On the **Select a test mix model for the load test** page select **Based on the number of virtual users** and then click **Next**.</span></span>  
  
8.  <span data-ttu-id="30128-143">Sur le **ajouter des tests pour le scénario de test de charge et modifier la combinaison de tests** page, cliquez sur le **ajouter** bouton.</span><span class="sxs-lookup"><span data-stu-id="30128-143">On the **Add tests to the load test scenario and edit the test mix** page click the **Add** button.</span></span>  
  
9. <span data-ttu-id="30128-144">Sous **tests disponibles** double-cliquez sur **BTSMessaging** et **BTSMessaging2** pour ajouter ces tests unitaires à la liste des **des tests sélectionnés**.</span><span class="sxs-lookup"><span data-stu-id="30128-144">Under **Available tests** double-click **BTSMessaging** and **BTSMessaging2** to add these unit tests to the list of **Selected tests**.</span></span> <span data-ttu-id="30128-145">Cliquez sur **OK** puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="30128-145">Click **OK** and then click **Next**.</span></span>  
  
10. <span data-ttu-id="30128-146">Sur le **ajouter des types de réseaux à un scénario de test de charge et modifier la combinaison de réseaux** vérification de page **Type de réseau** a la valeur **LAN** avec un **Distribution** de **100 %** puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="30128-146">On the **Add network types to a load test scenario and edit the network mix** page verify that **Network Type** is set to **LAN** with a **Distribution** of **100%** and then click **Next**.</span></span>  
  
11. <span data-ttu-id="30128-147">Sur le **permet de spécifier les ordinateurs à surveiller avec des ensembles de compteurs durant la série de tests de charge** page, cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="30128-147">On the **Specify computers to monitor with counter sets during load test run** page click **Next**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="30128-148">N’ajoutez pas d’ordinateurs pour le test de charge pour l’instant.</span><span class="sxs-lookup"><span data-stu-id="30128-148">Do not add computers to the load test at this time.</span></span> <span data-ttu-id="30128-149">L’Assistant Nouveau Test de charge vous permet uniquement d’associer des ordinateurs avec des ensembles de compteurs prédéfinis, et ce test de charge requiert l’utilisation des deux prédéfinies et *personnalisé* ensembles de compteurs.</span><span class="sxs-lookup"><span data-stu-id="30128-149">The New Load Test Wizard will only allow you to associate computers with predefined counter sets, and this load test requires the use of both predefined and *custom* counter sets.</span></span> <span data-ttu-id="30128-150">Une fois que l’Assistant est terminé et le test de charge est enregistré, vous pouvez modifier le test de charge pour ajouter des ensembles de compteurs personnalisés et de configurer le test de charge pour surveiller des ordinateurs à l’aide de deux prédéfinies *et* ensembles de compteurs personnalisés.</span><span class="sxs-lookup"><span data-stu-id="30128-150">After the wizard is complete and the load test is saved you can edit the load test to add custom counter sets and configure the load test to monitor computers using both predefined *and* custom counter sets.</span></span>  
  
     <span data-ttu-id="30128-151">Sur le **réviser et modifier des paramètres pour un test de charge d’exécution** page Entrez les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="30128-151">On the **Review and edit run settings for a load test** page enter the following values:</span></span>  
  
    1.  <span data-ttu-id="30128-152">Sélectionnez **durée du test de charge**.</span><span class="sxs-lookup"><span data-stu-id="30128-152">Select **Load test duration**.</span></span>  
  
    2.  <span data-ttu-id="30128-153">**Durée de préchauffage (hh mm ss)** 30 secondes</span><span class="sxs-lookup"><span data-stu-id="30128-153">**Warm-up duration (hh mm ss)** 30 seconds</span></span>  
  
    3.  <span data-ttu-id="30128-154">**Exécuter la durée (hh mm ss)** 5 minutes</span><span class="sxs-lookup"><span data-stu-id="30128-154">**Run duration (hh mm ss)** 5 minutes</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="30128-155">Le temps alloué pour **durée d’exécution** doit être égal à la quantité de temps nécessaire pour tous les incréments pour terminer comme décrit à l’étape 5 ci-dessus, ou 5 minutes pour cet exemple pas à pas.</span><span class="sxs-lookup"><span data-stu-id="30128-155">The time allocated for **Run duration** should equal the amount of time required for all step increments to complete as described in step 5 above, or 5 minutes for this example.</span></span>  
  
    4.  <span data-ttu-id="30128-156">**Taux d’échantillonnage** 5 secondes</span><span class="sxs-lookup"><span data-stu-id="30128-156">**Sampling rate** 5 seconds</span></span>  
  
    5.  <span data-ttu-id="30128-157">**Description** (facultatif), entrez une description pour le test de charge ici.</span><span class="sxs-lookup"><span data-stu-id="30128-157">**Description** (optional), Enter a description for the load test here.</span></span>  
  
    6.  <span data-ttu-id="30128-158">**Enregistrer le journal en cas d’échec du Test** True</span><span class="sxs-lookup"><span data-stu-id="30128-158">**Save Log on Test Failure** True</span></span>  
  
    7.  <span data-ttu-id="30128-159">**Niveau de validation** faible – invoquer les règles de validation marquées comme basses</span><span class="sxs-lookup"><span data-stu-id="30128-159">**Validation level** Low – invoke validation rules marked low</span></span>  
  
12. <span data-ttu-id="30128-160">Cliquez sur **Terminer** pour fermer l’Assistant Nouveau Test de charge.</span><span class="sxs-lookup"><span data-stu-id="30128-160">Click **Finish** to close the New Load Test Wizard.</span></span>  
  
13. <span data-ttu-id="30128-161">Cliquez sur le **fichier** menu et sélectionnez **enregistrer \<nom du Test de charge\>.loadtest comme**.</span><span class="sxs-lookup"><span data-stu-id="30128-161">Click the **File** menu and select **Save \<Load Test Name\>.loadtest As**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="30128-162">Dans cet exemple, <Load Test Name> sera le nom attribué au fichier de test de charge par Visual Studio 2010, généralement loadtestx.loadtest, sauf si le nom du fichier a déjà été modifié manuellement.</span><span class="sxs-lookup"><span data-stu-id="30128-162">In this example, <Load Test Name> will be the name assigned to the load test file by Visual Studio 2010, typically loadtestx.loadtest, unless the name of the file has already been manually changed.</span></span>  
  
14. <span data-ttu-id="30128-163">Enregistrez le fichier dans le répertoire C:\Projects\LoadTest\BTSLoad\LoadTests créé précédemment.</span><span class="sxs-lookup"><span data-stu-id="30128-163">Save the file to the C:\Projects\LoadTest\BTSLoad\LoadTests directory created earlier.</span></span> <span data-ttu-id="30128-164">Il peut être utile enregistrer le fichier avec le nom utilisé pour le scénario ; Dans cet exemple le nom du scénario étant BTS_Messaging_Step serait enregistré en tant que C:\Projects\LoadTest\BTSLoad\LoadTests\BTS_Messaging_Step.loadtest le fichier de test de charge.</span><span class="sxs-lookup"><span data-stu-id="30128-164">It may be useful to save the file with the name used for the scenario; in this example the scenario name is BTS_Messaging_Step so the loadtest file would be saved as C:\Projects\LoadTest\BTSLoad\LoadTests\BTS_Messaging_Step.loadtest.</span></span>  
  
###  <a name="BKMK_BTSCounters"></a><span data-ttu-id="30128-165">Ajouter un compteur personnalisé pour mesurer de BizTalk Server, indicateurs de Performance clés (KPI)</span><span class="sxs-lookup"><span data-stu-id="30128-165">Add a Custom Counter Set to Measure BizTalk Server Key Performance Indicators (KPI)</span></span>  
 <span data-ttu-id="30128-166">Suivez ces étapes pour ajouter un compteur des compteurs de performance qui mesurent les KPI de serveur BizTalk nécessaires à la détermination maximale acceptable débit acceptable de l’application BizTalk Server :</span><span class="sxs-lookup"><span data-stu-id="30128-166">Follow these steps to add a counter set with performance counters that measure BizTalk Server KPI required for determining Maximum Sustainable Throughput (MST) of the BizTalk Server application:</span></span>  
  
1.  <span data-ttu-id="30128-167">Dans le double-clic de l’Explorateur de solutions le test de charge que vous avez créé dans la section précédente pour afficher le test de charge dans l’éditeur de Test de charge.</span><span class="sxs-lookup"><span data-stu-id="30128-167">In Solution Explorer double-click the load test that you created in the previous section to view the load test in Load Test editor.</span></span>  
  
2.  <span data-ttu-id="30128-168">Dans l’éditeur de Test de charge, cliquez pour développer **les ensembles de compteurs**.</span><span class="sxs-lookup"><span data-stu-id="30128-168">In Load Test editor, click to expand **Counter Sets**.</span></span> <span data-ttu-id="30128-169">Notez qu’il n’existe aucun ensemble de compteurs prédéfinis pour BizTalk Server, par conséquent ensemble de compteurs « BizTalk Server » doit être ajouté à la liste de compteurs personnalisé définit.</span><span class="sxs-lookup"><span data-stu-id="30128-169">Notice that there is no predefined counter set for BizTalk Server, therefore a custom “BizTalk Server” counter set must be added to the list of counter sets.</span></span>  
  
3.  <span data-ttu-id="30128-170">Avec le bouton droit **les ensembles de compteurs** et sélectionnez **ajouter un ensemble de compteurs personnalisés**.</span><span class="sxs-lookup"><span data-stu-id="30128-170">Right-click **Counter Sets** and select **Add Custom Counter Set**.</span></span> <span data-ttu-id="30128-171">Par défaut, cette action va créer un compteur personnalisé défini par le nom **Custom1**.</span><span class="sxs-lookup"><span data-stu-id="30128-171">By default this action will create a custom counter set with the name **Custom1**.</span></span>  
  
4.  <span data-ttu-id="30128-172">Avec le bouton droit le **Custom1** ensemble au compteur et sélectionnez **propriétés** pour définir le focus sur le **propriétés** boîte de dialogue pour l’ensemble de compteurs Custom1.</span><span class="sxs-lookup"><span data-stu-id="30128-172">Right-click the **Custom1** counter set and select **Properties** to set focus to the **Properties** dialog for the Custom1 counter set.</span></span>  
  
5.  <span data-ttu-id="30128-173">Double-cliquez sur le nom **Custom1** dans les **propriétés** boîte de dialogue, tapez **BizTalk** et appuyez sur la touche entrée pour renommer le compteur personnalisé, la valeur **BizTalk** .</span><span class="sxs-lookup"><span data-stu-id="30128-173">Double-click the name **Custom1** in the **Properties** dialog, type **BizTalk** and then press the ENTER key to rename the custom counter set to **BizTalk**.</span></span>  
  
6.  <span data-ttu-id="30128-174">Avec le bouton droit dans l’éditeur de Test de charge, le **BizTalk** ensemble au compteur et sélectionnez **ajouter des compteurs**.</span><span class="sxs-lookup"><span data-stu-id="30128-174">In Load Test Editor, right-click the **BizTalk** counter set and select **Add Counters**.</span></span>  
  
7.  <span data-ttu-id="30128-175">Sous **ordinateur**, tapez le nom de l’un des ordinateurs BizTalk Server dans le groupe BizTalk Server pour afficher les catégories de moniteur de performances qui comprennent les compteurs de performance de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="30128-175">Under **Computer**, type the name of one of the BizTalk Server computers in the BizTalk Server group to display performance monitor categories that include BizTalk Server performance counters.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="30128-176">Pour garantir que toutes les catégories de performances de BizTalk Server et les compteurs de performance sont répertoriés, vous devrez peut-être taper dans le nom de domaine complet (ou adresse IP) d’un serveur BizTalk dans le groupe et vous devrez également démarrer les instances d’ordinateurs hôtes suivants sur le Ordinateur BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="30128-176">To ensure that all BizTalk Server performance categories and performance counters are listed, you may need to type in the fully qualified domain name (or IP Address) of a BizTalk Server in the group and you may also need to start the instances of the following hosts on the BizTalk Server computer.</span></span>  
    >   
    >  -   <span data-ttu-id="30128-177">Instances d’hôtes BizTalk qui sont liés aux orchestrations qui seront exécuteront pendant le test de charge.</span><span class="sxs-lookup"><span data-stu-id="30128-177">Instances of BizTalk hosts which are bound to orchestrations that will run during the load test.</span></span>  
    > -   <span data-ttu-id="30128-178">Instances des hôtes BizTalk comme envoyer ou recevoir des gestionnaires pour les adaptateurs qui seront exécuteront pendant le test de charge.</span><span class="sxs-lookup"><span data-stu-id="30128-178">Instances of BizTalk hosts configured as send or receive handlers for adapters that will run during the load test.</span></span>  
  
8.  <span data-ttu-id="30128-179">BizTalk Server fournit un ensemble complet des compteurs de performance.</span><span class="sxs-lookup"><span data-stu-id="30128-179">BizTalk Server provides quite an extensive set of performance counters.</span></span> <span data-ttu-id="30128-180">Pour déterminer le maximale acceptable Performance acceptable d’un serveur BizTalk application, vous devez uniquement ajouter les performances de BizTalk Server suivants compteurs à la **BizTalk** ensemble de compteurs personnalisé :</span><span class="sxs-lookup"><span data-stu-id="30128-180">For purposes of determining the Maximum Sustainable Performance (MST) of a BizTalk Server application you only need to add the following BizTalk Server performance counters to the **BizTalk** custom counter set:</span></span>  
  
    |<span data-ttu-id="30128-181">Catégorie de performance</span><span class="sxs-lookup"><span data-stu-id="30128-181">Performance Category</span></span>|<span data-ttu-id="30128-182">Compteur de performances</span><span class="sxs-lookup"><span data-stu-id="30128-182">Performance Counter</span></span>|  
    |--------------------------|-------------------------|  
    |<span data-ttu-id="30128-183">Processeur</span><span class="sxs-lookup"><span data-stu-id="30128-183">Processor</span></span>|<span data-ttu-id="30128-184">% Temps processeur pour l’instance _Total du compteur.</span><span class="sxs-lookup"><span data-stu-id="30128-184">% Processor Time for the _Total counter instance.</span></span>|  
    |<span data-ttu-id="30128-185">Boîte de BizTalk : MessageBox : Compteurs généraux</span><span class="sxs-lookup"><span data-stu-id="30128-185">BizTalk:Message Box: General Counters</span></span>|<span data-ttu-id="30128-186">Spool de taille pour le  *\<nom de base de données BizTalk MessageBox\>*:*\<nom de l’instance SQL Server\>*  instance de compteur.</span><span class="sxs-lookup"><span data-stu-id="30128-186">Spool Size for the *\<BizTalk MessageBox database name\>*:*\<SQL Server instance name\>* counter instance.</span></span> <span data-ttu-id="30128-187">**Remarque :***\<nom de base de données BizTalk MessageBox\>*  et  *\<nom de l’instance SQL Server\>*  sont seulement des espaces réservés pour le noms réels de la base de données BizTalk MessageBox et de l’instance de SQL Server qui héberge la base de données MessageBox de BizTalk.  </span><span class="sxs-lookup"><span data-stu-id="30128-187">**Note:**  *\<BizTalk MessageBox database name\>* and *\<SQL Server instance name\>* are just placeholders for the actual names of the BizTalk MessageBox database and the SQL Server instance that houses the BizTalk MessageBox database.</span></span> <span data-ttu-id="30128-188">Ces espaces réservés doivent être remplacés par les noms réels de la base de données BizTalk MessageBox et instance associée de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="30128-188">These placeholders should be replaced with the actual names of the BizTalk MessageBox database and associated SQL Server instance.</span></span>|  
    |<span data-ttu-id="30128-189">BizTalk:messagerie</span><span class="sxs-lookup"><span data-stu-id="30128-189">BizTalk:Messaging</span></span>|<span data-ttu-id="30128-190">Documents reçus/s pour l’instance de compteur de hôte de réception.</span><span class="sxs-lookup"><span data-stu-id="30128-190">Documents received/Sec for the receive host counter instance.</span></span><br /><br /> <span data-ttu-id="30128-191">Documents traités par seconde pour l’instance de compteur de transmission hôte.</span><span class="sxs-lookup"><span data-stu-id="30128-191">Documents processed/Sec for the transmit host counter instance.</span></span>|  
    |<span data-ttu-id="30128-192">BizTalk:agent des messages</span><span class="sxs-lookup"><span data-stu-id="30128-192">BizTalk:Message Agent</span></span>|<span data-ttu-id="30128-193">Hôte de réception vitesse entrant de remise de messages pour le document.</span><span class="sxs-lookup"><span data-stu-id="30128-193">Message delivery incoming rate for the document receive host.</span></span>|  
    |<span data-ttu-id="30128-194">BizTalk:agent des messages</span><span class="sxs-lookup"><span data-stu-id="30128-194">BizTalk:Message Agent</span></span>|<span data-ttu-id="30128-195">Vitesse de sortie de publication du message pour l’hôte de transmission du document.</span><span class="sxs-lookup"><span data-stu-id="30128-195">Message publishing outgoing rate for the document transmit host.</span></span>|  
    |<span data-ttu-id="30128-196">Orchestrations XLANG/s</span><span class="sxs-lookup"><span data-stu-id="30128-196">XLANG/s Orchestrations</span></span>|<span data-ttu-id="30128-197">Orchestrations réussies par seconde pour l’hôte de traitement de l’Orchestration</span><span class="sxs-lookup"><span data-stu-id="30128-197">Orchestrations completed/sec for the Orchestration processing host.</span></span>|  
  
### <a name="modify-run-settings-to-map-counter-sets-to-appropriate-computers"></a><span data-ttu-id="30128-198">Modifier les paramètres d’exécution pour mapper des ensembles de compteurs pour les ordinateurs appropriés</span><span class="sxs-lookup"><span data-stu-id="30128-198">Modify Run Settings to Map Counter Sets to Appropriate Computers</span></span>  
 <span data-ttu-id="30128-199">Suivez ces étapes pour mapper les ensembles de compteurs approprié avec les ordinateurs appropriés pour le test de charge :</span><span class="sxs-lookup"><span data-stu-id="30128-199">Follow these steps to map the appropriate counter sets with the appropriate computers for the load test:</span></span>  
  
1.  <span data-ttu-id="30128-200">Dans **éditeur de Test de charge**, avec le bouton droit **paramètres d’exécution** et sélectionnez **gérer les ensembles de compteurs**.</span><span class="sxs-lookup"><span data-stu-id="30128-200">In **Load Test Editor**, right-click **Run Settings** and select **Manage Counter Sets**.</span></span>  
  
2.  <span data-ttu-id="30128-201">Cliquez sur **ajouter l’ordinateur** pour ajouter un nouvel ordinateur à la liste.</span><span class="sxs-lookup"><span data-stu-id="30128-201">Click **Add Computer** to add a new computer to the list.</span></span> <span data-ttu-id="30128-202">Une icône avec le texte mis en surbrillance **nouvel ordinateur** s’affiche sous **ordinateurs et ensembles de compteurs à surveiller**.</span><span class="sxs-lookup"><span data-stu-id="30128-202">An icon with the highlighted text **New Computer** will appear under **Computers and counter sets to monitor**.</span></span> <span data-ttu-id="30128-203">Remplacez le texte mis en surbrillance en tapant le nom de l’ordinateur que vous souhaitez ajouter à la liste.</span><span class="sxs-lookup"><span data-stu-id="30128-203">Replace the highlighted text by typing the name of the computer you would like to add to the list.</span></span>  
  
3.  <span data-ttu-id="30128-204">Après avoir ajouté l’ordinateur à la liste, cliquez pour développer la liste des ensembles de compteurs disponibles et activez le compteur disponible définit pour associer les ou les jeux de compteur à l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="30128-204">After adding the computer to the list, click to expand the list of available counter sets and then click to select one or more of the available counter sets to associate the counter set(s) with the computer.</span></span>  
  
4.  <span data-ttu-id="30128-205">Répétez les étapes 2 et 3 jusqu'à ce que vous avez associé des ensembles de compteurs à tous les ordinateurs pour lesquels vous souhaitez collecter des données de performances.</span><span class="sxs-lookup"><span data-stu-id="30128-205">Repeat steps 2 and 3 until you have associated counter sets with all computers for which you would like to collect performance data.</span></span>  
  
###  <a name="BKMK_TestSettings"></a><span data-ttu-id="30128-206">Ajouter un fichier de paramètres de Test à la Solution pour exécuter des Tests et collecter des données à distance</span><span class="sxs-lookup"><span data-stu-id="30128-206">Add a Test Settings File to the Solution to Run Tests and Collect Data Remotely</span></span>  
 <span data-ttu-id="30128-207">Pour configurer le test de charge pour utiliser les ordinateurs de contrôleur de Test et l’Agent de Test que vous avez créé dans [étape 2 : configurer le contrôleur de Test de charge et les ordinateurs agents](../technical-guides/step-2-configure-load-test-controller-and-agent-computers.md), suivez les étapes de [ajouter des paramètres de test pour l’exécution à distance ou une collection de données à votre solution](http://go.microsoft.com/fwlink/?LinkId=209182)(http://go.microsoft.com/fwlink/?LinkId=209182) comme indiqué ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="30128-207">To configure the Load test to use the Test Controller and Test Agent computers that you created in [Step 2: Configure Load Test Controller and Agent Computers](../technical-guides/step-2-configure-load-test-controller-and-agent-computers.md), follow the steps in [Add a test settings for remote execution or data collection to your solution](http://go.microsoft.com/fwlink/?LinkId=209182)(http://go.microsoft.com/fwlink/?LinkId=209182) as noted below:</span></span>  
  
1.  <span data-ttu-id="30128-208">À l’étape 3, entrez le nom **BizTalkLoadTest**</span><span class="sxs-lookup"><span data-stu-id="30128-208">For Step 3, enter the name **BizTalkLoadTest**</span></span>  
  
2.  <span data-ttu-id="30128-209">Ignorer l’étape 6, car vous avez déjà entré un nom à l’étape 3.</span><span class="sxs-lookup"><span data-stu-id="30128-209">Ignore Step 6 because you have already entered a name in Step 3.</span></span>  
  
3.  <span data-ttu-id="30128-210">Pour l’étape 7, entrez « Il s’agit des paramètres de test par défaut pour une série de tests à distance » sous **Description**.</span><span class="sxs-lookup"><span data-stu-id="30128-210">For Step 7, enter “These are default test settings for a remote test run” under **Description**.</span></span>  
  
4.  <span data-ttu-id="30128-211">Pour l’étape 8, sélectionnez le schéma d’affectation de noms par défaut.</span><span class="sxs-lookup"><span data-stu-id="30128-211">For Step 8, select the default naming scheme.</span></span>  
  
5.  <span data-ttu-id="30128-212">Pour l’étape 9, sous **méthode d’exécution de Test** sélectionnez **l’exécution à distance**, sous **contrôleur** sélectionnez l’ordinateur de contrôleur de test et de laisser les propriétés restantes sur le **Rôles** page à leurs paramètres par défaut.</span><span class="sxs-lookup"><span data-stu-id="30128-212">For Step 9, under **Test execution method** select **Remote execution**, under **Controller** select the test controller computer and leave the remaining properties on the **Roles** page at their default settings.</span></span>  
  
6.  <span data-ttu-id="30128-213">Pour l’étape 24, sélectionnez l’option **à exécuter l’hôte par défaut**, sélectionnez un **héberger type** de **par défaut**et sous **exécuter des tests dans un processus 32 ou 64 bits**, Sélectionnez l’option de **exécuter des tests dans un processus 64 bits sur un ordinateur 64 bits**.</span><span class="sxs-lookup"><span data-stu-id="30128-213">For Step 24, select the option **to Run in default host**, select a **Host type** of **Default**, and under **Run tests in 32 or 64 bit process**, select the option to **Run tests in 64 bit process on 64 bit machine**.</span></span>  
  
7.  <span data-ttu-id="30128-214">Pour l’étape 25, sélectionnez **marquer un test comme ayant échoué si sa durée d’exécution dépasse** et laissez la valeur par défaut de 30 minutes sélectionné.</span><span class="sxs-lookup"><span data-stu-id="30128-214">For Step 25, select **Mark an individual test as failed if its execution time exceeds** and leave the default value of 30 minutes selected.</span></span>  
  
8.  <span data-ttu-id="30128-215">Pour l’étape 27b, sélectionnez la case à cocher **utiliser le contexte de chargement des assemblys dans le répertoire de test**, puis cliquez sur **Enregistrer sous**.</span><span class="sxs-lookup"><span data-stu-id="30128-215">For Step 27b, select the check box for **Use the Load Context for assemblies in the test directory**, and then click **Save As**.</span></span>  
  
9. <span data-ttu-id="30128-216">Dans le **enregistrer en tant que** boîte de dialogue zone, vérifiez que le nom **BizTalkLoadTest** est entré en regard **nom de fichier**, puis cliquez sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="30128-216">In the **Save As** dialog box, verify that the name **BizTalkLoadTest** is entered next to **File name**, and click **Save**.</span></span> <span data-ttu-id="30128-217">Vous avez maintenant ajouté un fichier de paramètres de test à votre solution.</span><span class="sxs-lookup"><span data-stu-id="30128-217">You have now added a test settings file to your solution.</span></span>