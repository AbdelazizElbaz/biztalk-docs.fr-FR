---
title: "Liste de vérification : Mesurer les performances sur Hyper-V | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f32c95f4-a4eb-412b-9fa7-140e80b85e5a
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 806f1efb67205771a1e202c8bafd77a493d584e4
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="checklist-measuring-performance-on-hyper-v"></a><span data-ttu-id="a8d5b-102">Liste de vérification : Mesurer les performances sur Hyper-V</span><span class="sxs-lookup"><span data-stu-id="a8d5b-102">Checklist: Measuring Performance on Hyper-V</span></span>
<span data-ttu-id="a8d5b-103">La plupart des principes de l’analyse des performances d’un système d’exploitation invité sur un performances des machines virtuelles Hyper-V sont le même que l’analyse des performances du système d’exploitation installé sur un ordinateur physique, la plupart des méthodes de collecte sont différents.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-103">While most of the principles of analyzing performance of a guest operating system installed on a Hyper-V virtual machine performance are the same as analyzing the performance of an operating system installed on a physical machine, many of the collection methods are different.</span></span> <span data-ttu-id="a8d5b-104">Les sections ci-dessous doivent être utilisées comme une référence rapide lors de l’évaluation des performances de votre [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] solution en cours d’exécution sur un système d’exploitation invité sur un ordinateur virtuel Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-104">The sections below should be used as a quick reference when evaluating performance of your [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] solution running on a guest operating system installed on a Hyper-V virtual machine.</span></span>  
  
## <a name="measuring-disk-io-performance"></a><span data-ttu-id="a8d5b-105">Mesurer les performances d’e/s disque</span><span class="sxs-lookup"><span data-stu-id="a8d5b-105">Measuring Disk I/O Performance</span></span>  
 <span data-ttu-id="a8d5b-106">Utilisez les compteurs du moniteur de performances suivantes pour mesurer les performances d’e/s de disque sur un système d’exploitation invité sur un ordinateur virtuel Hyper-V :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-106">Use the following performance monitor counters to measure disk I/O performance on a guest operating system installed on a Hyper-V virtual machine:</span></span>  
  
|<span data-ttu-id="a8d5b-107">Étape</span><span class="sxs-lookup"><span data-stu-id="a8d5b-107">Step</span></span>|<span data-ttu-id="a8d5b-108">Référence</span><span class="sxs-lookup"><span data-stu-id="a8d5b-108">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="a8d5b-109">**Mesurer la latence de disque sur un système de d’exploitation hôte Hyper-V** – le meilleur indicateur initial des performances de disque sur un système de d’exploitation hôte Hyper-V est obtenu à l’aide de la « \Logical disque (*) \Avg. Disque s/lecture » et « \Logical disque (\*) \Avg. Disque s/écriture » les compteurs d’analyseur de performances.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-109">**Measure disk latency on a Hyper-V host operating system** – The best initial indicator of disk performance on a Hyper-V host operating system is obtained by using the “\Logical Disk(*)\Avg. Disk sec/Read” and “\Logical Disk(\*)\Avg. Disk sec/Write” performance monitor counters.</span></span> <span data-ttu-id="a8d5b-110">Ces compteurs d’analyseur de performances mesurent la quantité de temps qui lisent et écrivent take operations pour répondre au système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-110">These performance monitor counters measure the amount of time that read and write operations take to respond to the operating system.</span></span> <span data-ttu-id="a8d5b-111">En règle générale, les temps de réponse moyens supérieures à 15 ms sont considérés comme optimaux.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-111">As a general rule of thumb, average response times greater than 15ms are considered sub-optimal.</span></span> <span data-ttu-id="a8d5b-112">En règle générale, les temps de réponse moyens supérieures à 15 ms sont considérés comme optimaux.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-112">As a general rule of thumb, average response times greater than 15ms are considered sub-optimal.</span></span> <span data-ttu-id="a8d5b-113">Cela dépend des temps d’un seul lecteur de disque 7200 tr/min sans cache de recherche par défaut.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-113">This is based on the typical seek time of a single 7200 RPM disk drive without cache.</span></span> <span data-ttu-id="a8d5b-114">L’utilisation du disque logique par rapport aux compteurs de performance disque physique est recommandée, car les services et applications Windows utilisent des lecteurs logiques représentés en tant que des lettres de lecteur dans lequel le disque physique (LUN), présenté dans le système d’exploitation peut être composée de plusieurs lecteurs de disques physiques dans une baie de disques.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-114">The use of logical disk versus physical disk performance monitor counters is recommended because Windows applications and services utilize logical drives represented as drive letters wherein the physical disk (LUN) presented to the operating system can be comprised of multiple physical disk drives in a disk array.</span></span> <span data-ttu-id="a8d5b-115">Utiliser le principe de lors de la mesure de la latence de disque sur le système d’exploitation Hyper-V à l’aide du disque \Logical (\*) \Avg. Disque s/lecture ou \Logical disque (\*) \Avg. Disque s/écriture compteurs de performance :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-115">Use the following rule of thumb when measuring disk latency on the Hyper-V host operating system using the \Logical Disk(\*)\Avg. Disk sec/Read or \Logical Disk(\*)\Avg. Disk sec/Write performance monitor counters:</span></span><br /><br /> <span data-ttu-id="a8d5b-116">Cela dépend des temps d’un seul lecteur de disque 7200 tr/min sans cache de recherche par défaut.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-116">This is based on the typical seek time of a single 7200 RPM disk drive without cache.</span></span> <span data-ttu-id="a8d5b-117">L’utilisation du disque logique par rapport aux compteurs de performance disque physique est recommandée, car les services et applications Windows utilisent des lecteurs logiques représentés en tant que des lettres de lecteur dans lequel le disque physique (LUN), présenté dans le système d’exploitation peut être composée de plusieurs lecteurs de disques physiques dans une baie de disques.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-117">The use of logical disk versus physical disk performance monitor counters is recommended because Windows applications and services utilize logical drives represented as drive letters wherein the physical disk (LUN) presented to the operating system can be comprised of multiple physical disk drives in a disk array.</span></span> <span data-ttu-id="a8d5b-118">Utiliser le principe de lors de la mesure de la latence de disque sur le système d’exploitation Hyper-V à l’aide du disque \Logical (\*) \Avg. Disque s/lecture ou \Logical disque (\*) \Avg. Disque s/écriture compteurs de performance :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-118">Use the following rule of thumb when measuring disk latency on the Hyper-V host operating system using the \Logical Disk(\*)\Avg. Disk sec/Read or \Logical Disk(\*)\Avg. Disk sec/Write performance monitor counters:</span></span><br /><br /> <span data-ttu-id="a8d5b-119">-1 ms à 15 MS = sain</span><span class="sxs-lookup"><span data-stu-id="a8d5b-119">-   1ms to 15ms  = Healthy</span></span><br /><span data-ttu-id="a8d5b-120">-15 MS à 25 MS = avertissement ou l’analyse</span><span class="sxs-lookup"><span data-stu-id="a8d5b-120">-   15ms to 25ms = Warning or Monitor</span></span><br /><span data-ttu-id="a8d5b-121">-26ms ou supérieur = critique, performances seront dégradées **Remarque :** disques physiques installés sur un environnement non virtualisé offrent de meilleures performances que les disques accédé via un système de d’exploitation hôte Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-121">-   26ms or greater = Critical, performance will be adversely affected **Note:**  Physical disks installed on a non-virtualized environment offer better performance than disks accessed through a Hyper-V host operating system.</span></span> <span data-ttu-id="a8d5b-122">Si les performances du disque sont essentielle pour les performances globales de votre application, envisagez d’héberger les disques sur du matériel physique uniquement.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-122">If disk performance is absolutely critical to the overall performance of your application, consider hosting disks on physical hardware only.</span></span> <span data-ttu-id="a8d5b-123">**Remarque :** lors de l’évaluation des performances d’e/s disque, veillez à configurer le logiciel antivirus pour exclure l’analyse de toutes les partitions de disque qui sont en cours d’évaluation.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-123">**Note:**  When evaluating disk I/O performance, ensure that you configure antivirus software to exclude scanning of any disk partitions that are being evaluated.</span></span> <span data-ttu-id="a8d5b-124">Antivirus analyse crée une surcharge qui peut nuire aux performances et les résultats des tests d’inclinaison.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-124">Antivirus scanning introduces overhead that can negatively impact performance and skew test results.</span></span> <br /><br /> <span data-ttu-id="a8d5b-125">**Mesurer la latence de disque sur les systèmes d’exploitation invités** – temps de réponse des disques utilisés par les systèmes d’exploitation invités peuvent être mesurées à l’aide des même compteurs d’analyseur de performances permet de mesurer le temps de réponse des disques utilisés par l’hôte Hyper-V d’exploitation système.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-125">**Measure disk latency on guest operating systems** – Response times of the disks used by the guest operating systems can be measured using the same performance monitor counters used to measure response times of the disks used by the Hyper-V host operating system.</span></span>|<span data-ttu-id="a8d5b-126">Pour plus d’informations sur l’analyse des performances de disque, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-126">For more information about disk performance analysis, see the following resources:</span></span><br /><br /> <span data-ttu-id="a8d5b-127">-Section « Surcharge de performances d’en cours d’exécution SQL Server dans Hyper-V » du livre blanc « En cours d’exécution SQL Server 2008 in a Hyper-V environnement – meilleures pratiques et les considérations relatives aux performances » [http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-127">-   “Performance Overhead of Running SQL Server in Hyper-V” section of “Running SQL Server 2008 in a Hyper-V Environment – Best Practices and Performance Considerations” whitepaper at [http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622).</span></span><br /><span data-ttu-id="a8d5b-128">-Sans problèmes liées au disque [http://go.microsoft.com/fwlink/?LinkId=120947](http://go.microsoft.com/fwlink/?LinkId=120947).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-128">-   Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?LinkId=120947](http://go.microsoft.com/fwlink/?LinkId=120947).</span></span><br /><span data-ttu-id="a8d5b-129">-SQL Server prédéploiement d’e/s recommandées à [http://go.microsoft.com/fwlink/?LinkId=120948](http://go.microsoft.com/fwlink/?LinkId=120948).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-129">-   SQL Server Predeployment I/O Best Practices at [http://go.microsoft.com/fwlink/?LinkId=120948](http://go.microsoft.com/fwlink/?LinkId=120948).</span></span><br /><span data-ttu-id="a8d5b-130">-Section « Les goulots d’étranglement d’e/s » de la « problèmes de performances de la résolution des problèmes dans SQL Server 2008" livre blanc disponible à l’adresse [http://go.microsoft.com/fwlink/?LinkID=202135](http://go.microsoft.com/fwlink/?LinkID=202135).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-130">-   “I/O Bottlenecks” section of the “Troubleshooting Performance Problems in SQL Server 2008” whitepaper available at [http://go.microsoft.com/fwlink/?LinkID=202135](http://go.microsoft.com/fwlink/?LinkID=202135).</span></span><br /><span data-ttu-id="a8d5b-131">-Comment identifier un goulot d’étranglement de performances de disque à l’aide de l’outil de Advisor (SPA) Microsoft Server Performance à [http://go.microsoft.com/fwlink/?LinkID=98096](http://go.microsoft.com/fwlink/?LinkID=98096).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-131">-   How to Identify a Disk Performance Bottleneck Using the Microsoft Server Performance Advisor (SPA) Tool at [http://go.microsoft.com/fwlink/?LinkID=98096](http://go.microsoft.com/fwlink/?LinkID=98096).</span></span>|  
  
## <a name="measuring-memory-performance"></a><span data-ttu-id="a8d5b-132">Mesurer les performances de la mémoire</span><span class="sxs-lookup"><span data-stu-id="a8d5b-132">Measuring Memory Performance</span></span>  
 <span data-ttu-id="a8d5b-133">Utilisez les compteurs du moniteur de performances suivantes pour mesurer l’impact de la mémoire disponible sur les performances d’un système d’exploitation invité sur un ordinateur virtuel Hyper-V :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-133">Use the following performance monitor counters to measure the impact of available memory on the performance of a guest operating system installed on a Hyper-V virtual machine:</span></span>  
  
|<span data-ttu-id="a8d5b-134">Étape</span><span class="sxs-lookup"><span data-stu-id="a8d5b-134">Step</span></span>|<span data-ttu-id="a8d5b-135">Référence</span><span class="sxs-lookup"><span data-stu-id="a8d5b-135">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="a8d5b-136">**Mesure la mémoire disponible sur le système d’exploitation de hôte Hyper-V** – la quantité de mémoire physique disponible au système d’exploitation hôte Hyper-V peut être déterminée en analysant le compteur Analyseur de performances « \Memory\Available Mo » sur le ordinateur physique.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-136">**Measure available memory on the Hyper-V host operating system** – The amount of physical memory available to the Hyper-V host operating system can be determined by monitoring the “\Memory\Available MBytes” performance monitor counter on the physical computer.</span></span> <span data-ttu-id="a8d5b-137">Ce compteur indique la quantité de mémoire physique disponible pour le système d’exploitation hôte.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-137">This counter reports the amount of free physical memory available to the host operating system.</span></span> <span data-ttu-id="a8d5b-138">Utilisez les règles générales suivantes lors de l’évaluation de mémoire physique disponible pour le système d’exploitation hôte :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-138">Use the following rules of thumb when evaluating available physical memory available to the host operating system:</span></span><br /><br /> <ul><li><span data-ttu-id="a8d5b-139">**\Memory\Available Mo** – mégaoctets disponibles mesure la quantité de mémoire physique disponible pour les processus en cours d’exécution sur l’ordinateur, sous forme de pourcentage de mémoire physique installée sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-139">**\Memory\Available Mbytes** – Available MBytes measures the amount of physical memory available to processes running on the computer, as a percentage of physical memory installed on the computer.</span></span> <span data-ttu-id="a8d5b-140">Les instructions suivantes s’appliquent lors de la mesure de la valeur de ce compteur Analyseur de performances :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-140">The following guidelines apply when measuring the value of this performance monitor counter:</span></span><br /><br /> <ul><li><span data-ttu-id="a8d5b-141">50 % de mémoire disponible ou plus = sain</span><span class="sxs-lookup"><span data-stu-id="a8d5b-141">50% of free memory available or more = Healthy</span></span></li><li><span data-ttu-id="a8d5b-142">25 % de mémoire disponible = analyse</span><span class="sxs-lookup"><span data-stu-id="a8d5b-142">25% of free memory available = Monitor</span></span></li><li><span data-ttu-id="a8d5b-143">10 % de mémoire disponible = avertissement</span><span class="sxs-lookup"><span data-stu-id="a8d5b-143">10% of free memory available = Warning</span></span></li><li><span data-ttu-id="a8d5b-144">Inférieure à 5 % de mémoire disponible = critique, performances seront affectées</span><span class="sxs-lookup"><span data-stu-id="a8d5b-144">Less than 5% of free memory available = Critical, performance will be adversely affected</span></span></li></ul></li><li><span data-ttu-id="a8d5b-145">**\Memory\Pages/sec** – ce compteur Analyseur de performances mesure le taux auquel les pages sont lues ou écrites sur le disque afin de résoudre des défauts de page.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-145">**\Memory\Pages/sec** – This performance monitor counter measures the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="a8d5b-146">Pour résoudre des défauts de page, le système d’exploitation doit remplacer le contenu de la mémoire sur le disque, ce qui affecte négativement les performances.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-146">To resolve hard page faults, the operating system must swap the contents of memory to disk, which negatively impacts performance.</span></span> <span data-ttu-id="a8d5b-147">Un grand nombre de pages par seconde en corrélation avec peu de mémoire physique disponible peut indiquer un manque de mémoire physique.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-147">A high number of pages per second in correlation with low available physical memory may indicate a lack of physical memory.</span></span> <span data-ttu-id="a8d5b-148">Les instructions suivantes s’appliquent lors de la mesure de la valeur de ce compteur Analyseur de performances :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-148">The following guidelines apply when measuring the value of this performance monitor counter:</span></span><br /><br /> <ul><li><span data-ttu-id="a8d5b-149">Moins de 500 = sain</span><span class="sxs-lookup"><span data-stu-id="a8d5b-149">Less than 500 = Healthy</span></span></li><li><span data-ttu-id="a8d5b-150">500 - 1000 = analyse ou une attention</span><span class="sxs-lookup"><span data-stu-id="a8d5b-150">500 - 1000 = Monitor or Caution</span></span></li><li><span data-ttu-id="a8d5b-151">Supérieure à 1 000 = critique, performances seront affectées</span><span class="sxs-lookup"><span data-stu-id="a8d5b-151">Greater than 1000 = Critical, performance will be adversely affected</span></span></li></ul></li></ul><br /> <span data-ttu-id="a8d5b-152">**Mesure la mémoire disponible sur le système d’exploitation invité** : mémoire disponible pour les systèmes d’exploitation invités peut être mesurée avec les mêmes compteurs d’analyseur de performances permet de mesurer la mémoire disponible au système d’exploitation hôte Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-152">**Measure available memory on the guest operating system** – Memory that is available to the guest operating systems can be measured with the same performance monitor counters used to measure memory available to the Hyper-V host operating system.</span></span>|<span data-ttu-id="a8d5b-153">Pour plus d’informations sur l’impact de la mémoire physique disponible sur les performances de serveur d’application, consultez la rubrique d’aide Exchange Server 2003 « Problèmes de décision Out liée à la mémoire » à [http://go.microsoft.com/fwlink/?LinkId=121056](http://go.microsoft.com/fwlink/?LinkId=121056).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-153">For more information about the impact of available physical memory on application server performance, see the Exchange Server 2003 Help topic “Ruling Out Memory-Bound Problems” at [http://go.microsoft.com/fwlink/?LinkId=121056](http://go.microsoft.com/fwlink/?LinkId=121056).</span></span>|  
  
## <a name="measuring-network-performance"></a><span data-ttu-id="a8d5b-154">Mesurer les performances du réseau</span><span class="sxs-lookup"><span data-stu-id="a8d5b-154">Measuring Network Performance</span></span>  
 <span data-ttu-id="a8d5b-155">Hyper-V permet de partager la même carte réseau physique, les ordinateurs invités.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-155">Hyper-V allows guest computers to share the same physical network adapter.</span></span> <span data-ttu-id="a8d5b-156">Alors que cela permet de consolider le matériel, vous ne devez ne pas pour saturer la carte physique.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-156">While this helps to consolidate hardware, take care not to saturate the physical adapter.</span></span> <span data-ttu-id="a8d5b-157">Pour garantir l’intégrité du réseau utilisé par les ordinateurs virtuels Hyper-V, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-157">Use the following methods to ensure the health of the network used by the Hyper-V virtual machines:</span></span>  
  
|<span data-ttu-id="a8d5b-158">Étape</span><span class="sxs-lookup"><span data-stu-id="a8d5b-158">Step</span></span>|<span data-ttu-id="a8d5b-159">Référence</span><span class="sxs-lookup"><span data-stu-id="a8d5b-159">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="a8d5b-160">**Tester la latence réseau**</span><span class="sxs-lookup"><span data-stu-id="a8d5b-160">**Test network latency**</span></span>|<span data-ttu-id="a8d5b-161">Exécuter un ping sur chaque ordinateur virtuel pour vous assurer de la latence réseau adéquate.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-161">Ping each virtual machine to ensure adequate network latency.</span></span> <span data-ttu-id="a8d5b-162">Sur les réseaux locaux, pensez recevoir inférieur à 1 MS temps de réponse.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-162">On local area networks, expect to receive less than 1ms response times.</span></span>|  
|<span data-ttu-id="a8d5b-163">**Test d’une perte de paquets**</span><span class="sxs-lookup"><span data-stu-id="a8d5b-163">**Test for packet loss**</span></span>|<span data-ttu-id="a8d5b-164">Utilisez l’utilitaire pathping.exe pour tester une perte de paquets entre les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-164">Use the pathping.exe utility to test packet loss between virtual machines.</span></span> <span data-ttu-id="a8d5b-165">Pathping.exe mesure la perte de paquets sur le réseau et est disponible avec toutes les versions de [!INCLUDE[btsWinNoVersion](../includes/btswinnoversion-md.md)] depuis [!INCLUDE[btsWin2kSvr](../includes/btswin2ksvr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a8d5b-165">Pathping.exe measures packet loss on the network and is available with all versions of [!INCLUDE[btsWinNoVersion](../includes/btswinnoversion-md.md)] since [!INCLUDE[btsWin2kSvr](../includes/btswin2ksvr-md.md)].</span></span> <span data-ttu-id="a8d5b-166">Pathping.exe envoie une rafale de 100 demandes ping à chaque nœud du réseau et calcule le nombre de commandes ping sont retournés.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-166">Pathping.exe sends out a burst of 100 ping requests to each network node and calculates how many pings are returned.</span></span> <span data-ttu-id="a8d5b-167">Sur les réseaux locaux doivent être sans perte de requêtes ping à partir de l’utilitaire pathping.exe.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-167">On local area networks there should be no loss of ping requests from the pathping.exe utility.</span></span>|  
|<span data-ttu-id="a8d5b-168">**Tester les transferts de fichiers réseau**</span><span class="sxs-lookup"><span data-stu-id="a8d5b-168">**Test network file transfers**</span></span>|<span data-ttu-id="a8d5b-169">Copier un fichier de 100 Mo entre les machines virtuelles et de mesurer la durée nécessaire pour terminer la copie.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-169">Copy a 100MB file between virtual machines and measure the length of time required to complete the copy.</span></span> <span data-ttu-id="a8d5b-170">Sur un 100 Mbit intègre les réseau (Mo), un fichier de 100 Mo (Mo) doit copier dans 10 à 20 secondes.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-170">On a healthy 100Mbit (megabit) network, a 100MB (megabyte) file should copy in 10 to 20 seconds.</span></span> <span data-ttu-id="a8d5b-171">Sur un réseau de 1 Gbit sain, un fichier de 100 Mo doit copier dans environ 3 à 5 secondes.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-171">On a healthy 1Gbit network, a 100MB file should copy in about 3 to 5 seconds.</span></span> <span data-ttu-id="a8d5b-172">Heures en dehors de ces paramètres sont représentatives d’un problème réseau.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-172">Copy times outside of these parameters are indicative of a network problem.</span></span> <span data-ttu-id="a8d5b-173">Une des causes courantes des transferts de liaison réseau défectueuse se produit lorsque la carte réseau a « détecté automatiquement » un réseau de 10 Mo semi-duplex empêche la carte réseau de tirer pleinement parti de la bande passante disponible.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-173">One common cause of poor network transfers occurs when the network adapter has “auto detected” a 10MB half-duplex network which prevents the network adapter from taking full advantage of available bandwidth.</span></span>|  
|<span data-ttu-id="a8d5b-174">**Mesure l’utilisation de réseau sur le système d’exploitation de hôte Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="a8d5b-174">**Measure network utilization on the Hyper-V host operating system**</span></span>|<span data-ttu-id="a8d5b-175">Utilisez les compteurs du moniteur de performances suivantes pour mesurer l’utilisation du réseau sur le système d’exploitation de hôte Hyper-V :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-175">Use the following performance monitor counters to measure network utilization on the Hyper-V host operating system:</span></span><br /><br /> <span data-ttu-id="a8d5b-176">**\Network interface (\*) \Bytes/s** – le pourcentage d’utilisation du réseau est calculé en multipliant le Total des octets/s par 8 pour le convertir en bits, multipliez le résultat par 100, puis actuelle de division par la carte réseau bande passante.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-176">**\Network Interface(\*)\Bytes Total/sec** – The percentage of network utilization is calculated by multiplying Bytes Total/sec by 8 to convert it to bits, multiply the result by 100, then divide by the network adapter’s current bandwidth.</span></span> <span data-ttu-id="a8d5b-177">Utiliser des seuils suivants pour évaluer l’utilisation de la bande passante réseau :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-177">Use the following thresholds to evaluate network bandwidth utilization:</span></span><br /><br /> <span data-ttu-id="a8d5b-178">-Moins de 40 % de l’interface consommée = sain</span><span class="sxs-lookup"><span data-stu-id="a8d5b-178">-   Less than 40% of the interface consumed = Healthy</span></span><br /><span data-ttu-id="a8d5b-179">-41 à 64 % de l’interface utilisée = analyse ou une attention</span><span class="sxs-lookup"><span data-stu-id="a8d5b-179">-   41%-64% of the interface consumed = Monitor or Caution</span></span><br /><span data-ttu-id="a8d5b-180">-65-100 % de l’interface utilisée = critique, performances seront affectées</span><span class="sxs-lookup"><span data-stu-id="a8d5b-180">-   65-100% of the interface consumed = Critical, performance will be adversely affected</span></span><br /><br /> <span data-ttu-id="a8d5b-181">**\Network interface (\*) \Output longueur de file d’attente** : la longueur de file d’attente de sortie mesure le nombre de threads en attente sur la carte réseau.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-181">**\Network Interface(\*)\Output Queue Length** – The output queue length measures the number of threads waiting on the network adapter.</span></span> <span data-ttu-id="a8d5b-182">S’il y a plus de 2 threads en attente sur la carte réseau, le réseau peut être un goulot d’étranglement.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-182">If there are more than 2 threads waiting on the network adapter, then the network may be a bottleneck.</span></span> <span data-ttu-id="a8d5b-183">Causes courantes de ce sont des taux de collision élevé sur le réseau et/ou de latence du réseau sont faibles.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-183">Common causes of this are poor network latency and/or high collision rates on the network.</span></span> <span data-ttu-id="a8d5b-184">Utilisez les seuils suivants pour évaluer la longueur de file d’attente de sortie :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-184">Use the following thresholds to evaluate output queue length:</span></span><br /><br /> <span data-ttu-id="a8d5b-185">-0 = sain</span><span class="sxs-lookup"><span data-stu-id="a8d5b-185">-   0 = Healthy</span></span><br /><span data-ttu-id="a8d5b-186">-1-2 = analyse ou une attention</span><span class="sxs-lookup"><span data-stu-id="a8d5b-186">-   1-2 = Monitor or Caution</span></span><br /><span data-ttu-id="a8d5b-187">-Supérieure à 2 = critique, performances seront affectées.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-187">-   Greater than 2 = Critical, performance will be adversely affected.</span></span><br /><br /> <span data-ttu-id="a8d5b-188">Vérifiez que les cartes réseau pour tous les ordinateurs (physiques et virtuels) dans la solution sont configurés pour utiliser la même valeur pour l’unité de transmission maximale (MTU).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-188">Ensure that the network adapters for all computers (physical and virtual) in the solution are configured to use the same value for maximum transmission unit (MTU).</span></span> <span data-ttu-id="a8d5b-189">Pour plus d’informations sur la configuration de la valeur de la MTU, consultez « Paramètres de Configuration TCP/IP annexe a : » à [http://go.microsoft.com/fwlink/?LinkId=113716](http://go.microsoft.com/fwlink/?LinkId=113716).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-189">For more information about configuring the MTU value, see “Appendix A: TCP/IP Configuration Parameters” at [http://go.microsoft.com/fwlink/?LinkId=113716](http://go.microsoft.com/fwlink/?LinkId=113716).</span></span><br /><br /> <span data-ttu-id="a8d5b-190">Si une longueur de file d’attente de sortie de 2 ou plus est mesurée, envisagez d’ajouter une ou plusieurs cartes réseau physiques sur l’ordinateur physique qui héberge les ordinateurs virtuels et lier les cartes réseau utilisées par les systèmes d’exploitation invités sur ces cartes réseau physiques.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-190">If an output queue length of 2 or more is measured, consider adding one or more physical network adapters to the physical computer that hosts the virtual machines and bind the network adapters used by the guest operating systems to these physical network adapters.</span></span>|  
|<span data-ttu-id="a8d5b-191">**Utilisation du réseau de mesures sur les systèmes d’exploitation invités**</span><span class="sxs-lookup"><span data-stu-id="a8d5b-191">**Measure network utilization on the guest operating systems**</span></span>|<span data-ttu-id="a8d5b-192">Si une carte réseau sur la partition racine de Hyper-V est occupée, comme indiqué par les compteurs de performance mentionnés ci-dessus, envisagez d’utiliser le compteur Analyseur de performances « \Hyper-V carte de réseau virtuel (*) \Bytes/sec » pour identifier le réseau virtuel l’utilisation du réseau la plupart des consomment des adaptateurs.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-192">If a network adapter on the Hyper-V root partition is busy as indicated by the performance monitor counters mentioned above, then consider using the "\Hyper-V Virtual Network Adapter(*)\Bytes/sec" performance monitor counter to identify which virtual network adapters are consuming the most network utilization.</span></span>|  
  
 <span data-ttu-id="a8d5b-193">Pour plus d’informations sur l’analyse des performances réseau, consultez « Chapitre 15 – mesure de performances des applications .NET » à [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-193">For more information about network performance analysis, see “Chapter 15 - Measuring .NET Application Performance” at [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073).</span></span>  
  
## <a name="measuring-processor-performance"></a><span data-ttu-id="a8d5b-194">Mesure des performances du processeur</span><span class="sxs-lookup"><span data-stu-id="a8d5b-194">Measuring Processor Performance</span></span>  
 <span data-ttu-id="a8d5b-195">Utilisez les méthodes suivantes pour évaluer les performances du processeur sur un système d’exploitation invité sur un ordinateur virtuel Hyper-V :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-195">Use the following methods to evaluate processor performance on a guest operating system installed on a Hyper-V virtual machine:</span></span>  
  
-   <span data-ttu-id="a8d5b-196">**Mesurer l’utilisation de processeur du système d’exploitation invité -** en règle générale, les performances du processeur peuvent être mesuré à l’aide de la « \Processor(*)\\% temps processeur » compteur Perfmon.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-196">**Measure guest operating system processor utilization -** Traditionally, processor performance can be measured using the “\Processor(*)\\% Processor Time” performance monitor counter.</span></span> <span data-ttu-id="a8d5b-197">Ce n’est pas un compteur précis pour l’évaluation de l’utilisation du processeur d’un système d’exploitation invité Cependant, car les mesures de Hyper-V et signale cette valeur par rapport au nombre de processeurs alloués à l’ordinateur virtuel.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-197">This is not an accurate counter for evaluating processor utilization of a guest operating system though because Hyper-V measures and reports this value relative to the number of processors allocated to the virtual machine.</span></span> <span data-ttu-id="a8d5b-198">Si plus de processeurs sont attribuées aux ordinateurs virtuels en cours d’exécution que le sont effectivement présentes sur l’ordinateur physique, la valeur retournée par chaque système d’exploitation invité pour le « \Processor (\*)\\% temps processeur » compteur Analyseur de performances est faible, même si en fait l’utilisation du processeur est un goulot d’étranglement.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-198">If more processors are allocated to running virtual machines than are actually present on the physical computer, the value returned by each guest operating system for the “\Processor(\*)\\% Processor Time” performance monitor counter will be low, even if in fact processor utilization is a bottleneck.</span></span> <span data-ttu-id="a8d5b-199">Cela se produit, car les processeurs virtuels utilisent des processeurs physiques de manière alternée.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-199">This occurs because the virtual processors utilize the physical processors in a round-robin fashion.</span></span> <span data-ttu-id="a8d5b-200">Chaque processeur virtuel essayez et lui-même allouer un partage de ressources de l’ensemble du système, afin que dans un système 4 processeurs physiques, chaque processeur virtuel par essayez par défaut à utiliser de 25 % des ressources système.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-200">Each virtual processor will try and allocate itself a share of overall system resources, so in a 4 physical processor system, each virtual processor will by default try to utilize 25% of the system resources.</span></span> <span data-ttu-id="a8d5b-201">Si 8 processeurs virtuels sont créés cela signifie que collectivement les processeurs virtuels tentera d’utiliser 200 % de la capacité de l’UC du serveur.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-201">If 8 virtual processors are created this means that collectively the virtual processors will attempt to utilize 200% of the server CPU capacity.</span></span> <span data-ttu-id="a8d5b-202">Dans ce cas, chaque processeur virtuel signalera une faible utilisation mesurée par le « \Processor (\*)\\% temps processeur » compteur du moniteur performances (en fonction du niveau il attend) et le contexte excessifs entre le processeurs virtuels entraîne une dégradation des performances pour chaque ordinateur virtuel.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-202">In this case, each virtual processor will report a low utilization as measured by the “\Processor(\*)\\% Processor Time” performance monitor counter (relative to the level it expects) and the excessive context switching between the virtual processors will result in poor performance for each virtual machine.</span></span> <span data-ttu-id="a8d5b-203">Dans ce scénario, envisagez de réduire le nombre de processeurs virtuels alloués aux ordinateurs virtuels Hyper-V sur le système d’exploitation hôte. Hyper-V fournit des objets de performance pour analyser les performances de processeurs logiques et virtuels hyperviseur.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-203">In this scenario, consider reducing the number of virtual processors allocated to Hyper-V virtual machines on the host operating system.Hyper-V provides hypervisor performance objects to monitor the performance of both logical and virtual processors.</span></span> <span data-ttu-id="a8d5b-204">Un processeur logique correspond directement au nombre de processeurs ou cœurs qui sont installés sur l’ordinateur physique.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-204">A logical processor correlates directly to the number of processors or cores that are installed on the physical computer.</span></span> <span data-ttu-id="a8d5b-205">Par exemple, 2 processeurs quadruple cœur installés sur l’ordinateur physique sont mettre en corrélation à 8 processeurs logiques.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-205">For example, 2 quad core processors installed on the physical computer would correlate to 8 logical processors.</span></span> <span data-ttu-id="a8d5b-206">Processeurs virtuels sont qu’utilisent les ordinateurs virtuels, et l’exécution de toutes les dans les partitions racine et enfant se produit dans les processeurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-206">Virtual processors are what the virtual machines actually use, and all execution in the root and child partitions occurs in virtual processors.</span></span>  
  
     <span data-ttu-id="a8d5b-207">Hyper-V fournit des objets de performance pour analyser les performances de processeurs logiques et virtuels hyperviseur.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-207">Hyper-V provides hypervisor performance objects to monitor the performance of both logical and virtual processors.</span></span> <span data-ttu-id="a8d5b-208">Un processeur logique correspond directement au nombre de processeurs ou cœurs qui sont installés sur l’ordinateur physique.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-208">A logical processor correlates directly to the number of processors or cores that are installed on the physical computer.</span></span> <span data-ttu-id="a8d5b-209">Par exemple, 2 processeurs quadruple cœur installés sur l’ordinateur physique sont mettre en corrélation à 8 processeurs logiques.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-209">For example, 2 quad core processors installed on the physical computer would correlate to 8 logical processors.</span></span> <span data-ttu-id="a8d5b-210">Processeurs virtuels sont qu’utilisent les ordinateurs virtuels, et l’exécution de toutes les dans les partitions racine et enfant se produit dans les processeurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-210">Virtual processors are what the virtual machines actually use, and all execution in the root and child partitions occurs in virtual processors.</span></span>  
  
     <span data-ttu-id="a8d5b-211">Pour mesurer avec exactitude l’utilisation du processeur d’un système d’exploitation invité, utilisez le « processeur (_Total) Hyper-V hyperviseur logique % Total exécution « compteur Analyseur de performances sur le système d’exploitation de hôte Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-211">To accurately measure the processor utilization of a guest operating system, use the “Hyper-V Hypervisor Logical Processor(_Total)% Total Run Time” performance monitor counter on the Hyper-V host operating system.</span></span> <span data-ttu-id="a8d5b-212">Seuils suivants permettent d’évaluer l’invité d’exploitation système processeur utilisation à l’aide de la « processeur (_Total) Hyper-V hyperviseur logique % Total l’exécution » compteur Analyseur de performances :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-212">Use the following thresholds to evaluate guest operating system processor utilization using the “Hyper-V Hypervisor Logical Processor(_Total)% Total Run Time” performance monitor counter:</span></span>  
  
    -   <span data-ttu-id="a8d5b-213">Inférieur à 60 % de consommation = sain</span><span class="sxs-lookup"><span data-stu-id="a8d5b-213">Less than 60% consumed = Healthy</span></span>  
  
    -   <span data-ttu-id="a8d5b-214">60-89 % consommée = analyse ou une attention</span><span class="sxs-lookup"><span data-stu-id="a8d5b-214">60% - 89% consumed = Monitor or Caution</span></span>  
  
    -   <span data-ttu-id="a8d5b-215">90 à 100 % consommée = critique, performances seront affectées</span><span class="sxs-lookup"><span data-stu-id="a8d5b-215">90% - 100% consumed = Critical, performance will be adversely affected</span></span>  
  
     <span data-ttu-id="a8d5b-216">Pour résoudre les problèmes de performances du processeur des systèmes d’exploitation invités sur un environnement Hyper-V, il est préférable d’atteindre un équilibre entre les valeurs signalées par le système d’exploitation hôte pour « \Hyper-V processeur (_Total) logique de l’hyperviseur\\exécution de % Total Temps » (LPTR) et « processeur (_Total) \Hyper-V hyperviseur virtuel\\% Total d’exécution » (VPTR).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-216">To troubleshoot processor performance of guest operating systems on a Hyper-V environment, it is best to strive for a balance between the values reported by the host operating system for “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” (LPTR) and “\Hyper-V Hypervisor Virtual Processor(_Total)\\% Total Run Time” (VPTR).</span></span> <span data-ttu-id="a8d5b-217">Si LPTR est élevé et VPTR manque. Vérifiez qu’il n’y a pas plus de processeurs allouées aux ordinateurs virtuels sont disponibles sur l’ordinateur physique.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-217">If LPTR is high and VPTR is low then verify that there are not more processors allocated to virtual machines than are physically available on the physical computer.</span></span> <span data-ttu-id="a8d5b-218">Utilisez la « \Hyper-V hyperviseur virtuel Processor(*)\\pourcentage du temps d’exécution invité » compteurs pour déterminer quels processeurs virtuels qui consomment du processeur et annuler l’allocation de processeurs virtuels à partir d’ordinateurs virtuels comme il convient de configurer un mappage un-à-un de processeurs virtuels avec des processeurs logiques.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-218">Use the “\Hyper-V Hypervisor Virtual Processor(*)\\%Guest Run Time” counters to determine which virtual Processors are consuming CPU and de-allocate virtual processors from virtual machines as appropriate to configure a one to one mapping of virtual processors to logical processors.</span></span> <span data-ttu-id="a8d5b-219">Pour plus d’informations sur la configuration d’un mappage un-à-un des processeurs virtuels avec des processeurs logiques, consultez la section « Optimisation des performances du processeur » dans [liste de vérification : optimisation des performances sur Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-219">For more information about configuring a one to one mapping of virtual processors to logical processors, see the “Optimizing Processor Performance” section in [Checklist: Optimizing Performance on Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span></span> <span data-ttu-id="a8d5b-220">Si VPTR est élevé et LPTR est faible envisagez d’allocation de processeurs supplémentaires aux ordinateurs virtuels s’il existe des processeurs logiques disponibles et si des processeurs supplémentaires sont pris en charge par le système d’exploitation invité.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-220">If VPTR is high and LPTR is low then consider allocating additional processors to virtual machines if there are available logical processors and if additional processors are supported by the guest operating system.</span></span> <span data-ttu-id="a8d5b-221">Dans le cas où VPTR est élevée, LPTR est faible, il existe des processeurs logiques disponibles à allouer, mais des processeurs supplémentaires ne sont pas pris en charge par le système d’exploitation invité, envisagez de montée en puissance parallèle en ajoutant des machines virtuelles supplémentaires à l’ordinateur physique et allocation de processeurs disponibles pour ces ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-221">In the case where VPTR is high, LPTR is low, there are available logical processors to allocate, but additional processors are not supported by the guest operating system, consider scaling out by adding additional virtual machines to the physical computer and allocating available processors to these virtual machines.</span></span> <span data-ttu-id="a8d5b-222">Dans le cas où VPTR et LPTR sont élevées, la configuration repousse les limites de l’ordinateur physique et envisagez de montée en puissance parallèle en ajoutant un autre ordinateur physique et les autres ordinateurs virtuels de Hyper-V à l’environnement.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-222">In the case where both VPTR and LPTR are high, the configuration is pushing the limits of the physical computer and should consider scaling out by adding another physical computer and additional Hyper-V virtual machines to the environment.</span></span> <span data-ttu-id="a8d5b-223">L’organigramme ci-dessous décrit le processus qui doit être utilisé lors de la résolution des problèmes de performances du processeur dans un environnement Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-223">The flowchart below describes the process that should be used when troubleshooting processor performance in a Hyper-V environment.</span></span>  
  
     <span data-ttu-id="a8d5b-224">Si VPTR est élevé et LPTR est faible, envisagez d’allocation de processeurs supplémentaires aux ordinateurs virtuels s’il existe des processeurs logiques disponibles et si des processeurs supplémentaires sont pris en charge par le système d’exploitation invité.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-224">If VPTR is high and LPTR is low, then consider allocating additional processors to virtual machines if there are available logical processors and if additional processors are supported by the guest operating system.</span></span> <span data-ttu-id="a8d5b-225">Dans le cas où VPTR est élevée, LPTR est faible, il existe des processeurs logiques disponibles à allouer, mais des processeurs supplémentaires ne sont pas pris en charge par le système d’exploitation invité, envisagez de montée en puissance parallèle en ajoutant des machines virtuelles supplémentaires à l’ordinateur physique et allocation de processeurs disponibles pour ces ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-225">In the case where VPTR is high, LPTR is low, there are available logical processors to allocate, but additional processors are not supported by the guest operating system, consider scaling out by adding additional virtual machines to the physical computer and allocating available processors to these virtual machines.</span></span> <span data-ttu-id="a8d5b-226">Dans le cas où VPTR et LPTR sont élevées, la configuration repousse les limites de l’ordinateur physique et envisagez de montée en puissance parallèle en ajoutant un autre ordinateur physique et les autres ordinateurs virtuels de Hyper-V à l’environnement.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-226">In the case where both VPTR and LPTR are high, the configuration is pushing the limits of the physical computer and should consider scaling out by adding another physical computer and additional Hyper-V virtual machines to the environment.</span></span> <span data-ttu-id="a8d5b-227">L’organigramme ci-dessous décrit le processus qui doit être utilisé lors de la résolution des problèmes de performances du processeur dans un environnement Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-227">The flowchart below describes the process that should be used when troubleshooting processor performance in a Hyper-V environment.</span></span>  
  
     <span data-ttu-id="a8d5b-228">![Résolution des problèmes de performances de l’UC sur Hyper &#45; V](../technical-guides/media/623fdcd6-e80b-4ba9-bf46-5d9b92b6612b.gif "623fdcd6-e80b-4ba9-bf46-5d9b92b6612b")</span><span class="sxs-lookup"><span data-stu-id="a8d5b-228">![Troubleshooting CPU Performance on Hyper&#45;V](../technical-guides/media/623fdcd6-e80b-4ba9-bf46-5d9b92b6612b.gif "623fdcd6-e80b-4ba9-bf46-5d9b92b6612b")</span></span>  
<span data-ttu-id="a8d5b-229">Résolution des problèmes de performances de l’UC dans un environnement Hyper-V</span><span class="sxs-lookup"><span data-stu-id="a8d5b-229">Troubleshooting CPU performance in a Hyper-V Environment</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="a8d5b-230">**Processeurs du système d’exploitation invité n’ont pas une définissez l’affinité des processeurs/cœurs physiques** – l’hyperviseur détermine les ressources physiques sont utilisés.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-230">**Guest operating system processors do not have a set affinity to physical processors/cores** – The hypervisor determines how physical resources are used.</span></span> <span data-ttu-id="a8d5b-231">Dans le cas d’utilisation du processeur, l’hyperviseur planifie le temps de processeur invité au processeur physique sous la forme de threads.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-231">In the case of processor utilization, the hypervisor schedules the guest processor time to physical processor in the form of threads.</span></span> <span data-ttu-id="a8d5b-232">Cela signifie que la charge du processeur des ordinateurs virtuels est répartie entre les processeurs de l’ordinateur physique.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-232">This means the processor load of virtual machines will be spread across the processors of the physical computer.</span></span> <span data-ttu-id="a8d5b-233">En outre, les machines virtuelles ne peut pas dépasser l’utilisation du processeur du nombre de processeurs logiques, par exemple, si un seul ordinateur virtuel est configuré pour s’exécuter avec 2 processeurs logiques sur un ordinateur physique avec 8 processeurs/cœurs, configuré le machine virtuelle ne peut pas dépasser la capacité de processeur du nombre de processeurs logiques configurés (dans ce cas 2 processeurs).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-233">Furthermore, virtual machines cannot exceed the processor utilization of the configured number of logical processors, for example if a single virtual machine is configured to run with 2 logical processors on a physical computer with 8 processors/cores, then the virtual machine cannot exceed the processor capacity of the number of configured logical processors (in this case 2 processors).</span></span>  
  
-   <span data-ttu-id="a8d5b-234">**Mesurer l’utilisation du processeur de globale de l’environnement Hyper-V à l’aide de Hyper-V compteurs -** à des fins de mesure de l’utilisation du processeur, le système d’exploitation hôte est logiquement considéré comme un autre système de d’exploitation invité .</span><span class="sxs-lookup"><span data-stu-id="a8d5b-234">**Measure overall processor utilization of the Hyper-V environment using Hyper-V performance monitor counters -** For purposes of measuring processor utilization, the host operating system is logically viewed as just another guest operating system.</span></span> <span data-ttu-id="a8d5b-235">Par conséquent, le « \Processor(*)\\% temps processeur » compteur du moniteur mesure l’utilisation du processeur du système d’exploitation hôte uniquement.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-235">Therefore, the “\Processor(*)\\% Processor Time” monitor counter measures the processor utilization of the host operating system only.</span></span> <span data-ttu-id="a8d5b-236">Pour mesurer l’utilisation du processeur physique totale du système d’exploitation hôte et tous les systèmes d’exploitation invités, utiliser le « \Hyper-V processeur (_Total) logique de l’hyperviseur\\% Total exécution « compteur Perfmon.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-236">To measure total physical processor utilization of the host operating system and all guest operating systems, use the “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” performance monitor counter.</span></span> <span data-ttu-id="a8d5b-237">Ce compteur mesure le pourcentage total du temps passé par le processeur de l’à la fois le système d’exploitation hôte et tous les systèmes d’exploitation invités.</span><span class="sxs-lookup"><span data-stu-id="a8d5b-237">This counter measures the total percentage of time spent by the processor running the both the host operating system and all guest operating systems.</span></span>  
  
     <span data-ttu-id="a8d5b-238">Utiliser des seuils suivants pour évaluer l’utilisation de processeur globale de l’environnement Hyper-V à l’aide la « \Hyper-V processeur (_Total) logique de l’hyperviseur\\% Total exécution » compteur Analyseur de performances :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-238">Use the following thresholds to evaluate overall processor utilization of the Hyper-V environment using the “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” performance monitor counter:</span></span>  
  
    -   <span data-ttu-id="a8d5b-239">Inférieur à 60 % de consommation = sain</span><span class="sxs-lookup"><span data-stu-id="a8d5b-239">Less than 60% consumed = Healthy</span></span>  
  
    -   <span data-ttu-id="a8d5b-240">60-89 % consommée = analyse ou une attention</span><span class="sxs-lookup"><span data-stu-id="a8d5b-240">60% - 89% consumed = Monitor or Caution</span></span>  
  
    -   <span data-ttu-id="a8d5b-241">90 à 100 % consommée = critique, performances seront affectées</span><span class="sxs-lookup"><span data-stu-id="a8d5b-241">90% - 100% consumed = Critical, performance will be adversely affected</span></span>  
  
     <span data-ttu-id="a8d5b-242">Pour plus d’informations sur l’utilisation du processeur, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="a8d5b-242">For more information about processor utilization review the following resources:</span></span>  
  
    -   <span data-ttu-id="a8d5b-243">« Comment : identifier les fonctions à l’origine d’un goulot d’étranglement de processeur en mode utilisateur élevée pour les Applications serveur dans un environnement de Production » à [http://go.microsoft.com/fwlink/?LinkID=107047](http://go.microsoft.com/fwlink/?LinkID=107047).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-243">“How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” at [http://go.microsoft.com/fwlink/?LinkID=107047](http://go.microsoft.com/fwlink/?LinkID=107047).</span></span>  
  
    -   <span data-ttu-id="a8d5b-244">« Chapter 15 - mesure .NET Application Performance » au [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073).</span><span class="sxs-lookup"><span data-stu-id="a8d5b-244">“Chapter 15 - Measuring .NET Application Performance” at [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073).</span></span>