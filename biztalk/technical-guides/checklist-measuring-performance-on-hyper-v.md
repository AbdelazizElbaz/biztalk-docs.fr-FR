---
title: 'Liste de vérification : Mesurer les performances sur Hyper-V | Documents Microsoft'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: f32c95f4-a4eb-412b-9fa7-140e80b85e5a
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6aefa415bec4b996fa7b5cd4689c48f834dc36a2
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/28/2018
---
# <a name="checklist-measuring-performance-on-hyper-v"></a>Liste de vérification : Mesurer les performances sur Hyper-V
La plupart des principes de l’analyse des performances d’un système d’exploitation invité sur un performances des machines virtuelles Hyper-V sont le même que l’analyse des performances du système d’exploitation installé sur un ordinateur physique, la plupart des méthodes de collecte sont différents. Les sections ci-dessous doivent être utilisées comme une référence rapide lors de l’évaluation des performances de votre solution BizTalk Server s’exécutant sur un système d’exploitation invité sur un ordinateur virtuel Hyper-V.  
  
## <a name="measuring-disk-io-performance"></a>Mesurer les performances d’e/s disque  
 Utilisez les compteurs du moniteur de performances suivantes pour mesurer les performances d’e/s de disque sur un système d’exploitation invité sur un ordinateur virtuel Hyper-V :  
  
|Étape|Référence|  
|----------|---------------|  
|**Mesurer la latence de disque sur un système de d’exploitation hôte Hyper-V** – le meilleur indicateur initial des performances de disque sur un système de d’exploitation hôte Hyper-V est obtenu à l’aide de la « \Logical disque (*) \Avg. Disque s/lecture » et « \Logical disque (\*) \Avg. Disque s/écriture » les compteurs d’analyseur de performances. Ces compteurs d’analyseur de performances mesurent la quantité de temps qui lisent et écrivent take operations pour répondre au système d’exploitation. En règle générale, les temps de réponse moyens supérieures à 15 ms sont considérés comme optimaux. En règle générale, les temps de réponse moyens supérieures à 15 ms sont considérés comme optimaux. Cela dépend des temps d’un seul lecteur de disque 7200 tr/min sans cache de recherche par défaut. L’utilisation du disque logique par rapport aux compteurs de performance disque physique est recommandée, car les services et applications Windows utilisent des lecteurs logiques représentés en tant que des lettres de lecteur dans lequel le disque physique (LUN), présenté dans le système d’exploitation peut être composée de plusieurs lecteurs de disques physiques dans une baie de disques. Utiliser le principe de lors de la mesure de la latence de disque sur le système d’exploitation Hyper-V à l’aide du disque \Logical (\*) \Avg. Disque s/lecture ou \Logical disque (\*) \Avg. Disque s/écriture compteurs de performance :<br /><br /> Cela dépend des temps d’un seul lecteur de disque 7200 tr/min sans cache de recherche par défaut. L’utilisation du disque logique par rapport aux compteurs de performance disque physique est recommandée, car les services et applications Windows utilisent des lecteurs logiques représentés en tant que des lettres de lecteur dans lequel le disque physique (LUN), présenté dans le système d’exploitation peut être composée de plusieurs lecteurs de disques physiques dans une baie de disques. Utiliser le principe de lors de la mesure de la latence de disque sur le système d’exploitation Hyper-V à l’aide du disque \Logical (\*) \Avg. Disque s/lecture ou \Logical disque (\*) \Avg. Disque s/écriture compteurs de performance :<br /><br /> -1 ms à 15 MS = sain<br />-15 MS à 25 MS = avertissement ou l’analyse<br />-26ms ou supérieur = critique, performances seront dégradées **Remarque :** disques physiques installés sur un environnement non virtualisé offrent de meilleures performances que les disques accédé via un système de d’exploitation hôte Hyper-V. Si les performances du disque sont essentielle pour les performances globales de votre application, envisagez d’héberger les disques sur du matériel physique uniquement. **Remarque :** lors de l’évaluation des performances d’e/s disque, veillez à configurer le logiciel antivirus pour exclure l’analyse de toutes les partitions de disque qui sont en cours d’évaluation. Antivirus analyse crée une surcharge qui peut nuire aux performances et les résultats des tests d’inclinaison. <br /><br /> **Mesurer la latence de disque sur les systèmes d’exploitation invités** – temps de réponse des disques utilisés par les systèmes d’exploitation invités peuvent être mesurées à l’aide des même compteurs d’analyseur de performances permet de mesurer le temps de réponse des disques utilisés par l’hôte Hyper-V d’exploitation système.|Pour plus d’informations sur l’analyse des performances de disque, consultez les ressources suivantes :<br /><br /> -Section « Surcharge de performances d’en cours d’exécution SQL Server dans Hyper-V » du livre blanc « En cours d’exécution SQL Server 2008 in a Hyper-V environnement – meilleures pratiques et les considérations relatives aux performances » [ http://go.microsoft.com/fwlink/?LinkId=144622 ](http://go.microsoft.com/fwlink/?LinkId=144622).<br />-Sans problèmes liées au disque [ http://go.microsoft.com/fwlink/?LinkId=120947 ](http://go.microsoft.com/fwlink/?LinkId=120947).<br />-SQL Server prédéploiement d’e/s recommandées à [ http://go.microsoft.com/fwlink/?LinkId=120948 ](http://go.microsoft.com/fwlink/?LinkId=120948).<br />-Section « Les goulots d’étranglement d’e/s » de la « résolution des problèmes de performances dans SQL Server 2008" livre blanc disponible à l’adresse [ http://go.microsoft.com/fwlink/?LinkID=202135 ](http://go.microsoft.com/fwlink/?LinkID=202135).<br />-Comment identifier un goulot d’étranglement de performances de disque à l’aide de l’outil de Advisor (SPA) Microsoft Server Performance à [ http://go.microsoft.com/fwlink/?LinkID=98096 ](http://go.microsoft.com/fwlink/?LinkID=98096).|  
  
## <a name="measuring-memory-performance"></a>Mesurer les performances de la mémoire  
 Utilisez les compteurs du moniteur de performances suivantes pour mesurer l’impact de la mémoire disponible sur les performances d’un système d’exploitation invité sur un ordinateur virtuel Hyper-V :  
  
|Étape|Référence|  
|----------|---------------|  
|**Mesure la mémoire disponible sur le système d’exploitation de hôte Hyper-V** – la quantité de mémoire physique disponible au système d’exploitation hôte Hyper-V peut être déterminée en analysant le compteur Analyseur de performances « \Memory\Available Mo » sur le ordinateur physique. Ce compteur indique la quantité de mémoire physique disponible pour le système d’exploitation hôte. Utilisez les règles générales suivantes lors de l’évaluation de mémoire physique disponible pour le système d’exploitation hôte :<br /><br /> <ul><li>**\Memory\Available Mo** – mégaoctets disponibles mesure la quantité de mémoire physique disponible pour les processus en cours d’exécution sur l’ordinateur, sous forme de pourcentage de mémoire physique installée sur l’ordinateur. Les instructions suivantes s’appliquent lors de la mesure de la valeur de ce compteur Analyseur de performances :<br /><br /> <ul><li>50 % de mémoire disponible ou plus = sain</li><li>25 % de mémoire disponible = analyse</li><li>10 % de mémoire disponible = avertissement</li><li>Inférieure à 5 % de mémoire disponible = critique, performances seront affectées</li></ul></li><li>**\Memory\Pages/sec** – ce compteur Analyseur de performances mesure le taux auquel les pages sont lues ou écrites sur le disque afin de résoudre des défauts de page. Pour résoudre des défauts de page, le système d’exploitation doit remplacer le contenu de la mémoire sur le disque, ce qui affecte négativement les performances. Un grand nombre de pages par seconde en corrélation avec peu de mémoire physique disponible peut indiquer un manque de mémoire physique. Les instructions suivantes s’appliquent lors de la mesure de la valeur de ce compteur Analyseur de performances :<br /><br /> <ul><li>Moins de 500 = sain</li><li>500 - 1000 = analyse ou une attention</li><li>Supérieure à 1 000 = critique, performances seront affectées</li></ul></li></ul><br /> **Mesure la mémoire disponible sur le système d’exploitation invité** : mémoire disponible pour les systèmes d’exploitation invités peut être mesurée avec les mêmes compteurs d’analyseur de performances permet de mesurer la mémoire disponible au système d’exploitation hôte Hyper-V.|Pour plus d’informations sur l’impact de la mémoire physique disponible sur les performances de serveur d’application, consultez la rubrique d’aide Exchange Server 2003 « Problèmes de décision Out liée à la mémoire » à [ http://go.microsoft.com/fwlink/?LinkId=121056 ](http://go.microsoft.com/fwlink/?LinkId=121056).|  
  
## <a name="measuring-network-performance"></a>Mesurer les performances du réseau  
 Hyper-V permet de partager la même carte réseau physique, les ordinateurs invités. Alors que cela permet de consolider le matériel, vous ne devez ne pas pour saturer la carte physique. Pour garantir l’intégrité du réseau utilisé par les ordinateurs virtuels Hyper-V, procédez comme suit :  
  
|Étape|Référence|  
|----------|---------------|  
|**Tester la latence réseau**|Exécuter un ping sur chaque ordinateur virtuel pour vous assurer de la latence réseau adéquate. Sur les réseaux locaux, pensez recevoir inférieur à 1 MS temps de réponse.|  
|**Test d’une perte de paquets**|Utilisez l’utilitaire pathping.exe pour tester une perte de paquets entre les machines virtuelles. Pathping.exe mesure la perte de paquets sur le réseau et est disponible avec toutes les versions de [!INCLUDE[btsWinNoVersion](../includes/btswinnoversion-md.md)] depuis [!INCLUDE[btsWin2kSvr](../includes/btswin2ksvr-md.md)]. Pathping.exe envoie une rafale de 100 demandes ping à chaque nœud du réseau et calcule le nombre de commandes ping sont retournés. Sur les réseaux locaux doivent être sans perte de requêtes ping à partir de l’utilitaire pathping.exe.|  
|**Tester les transferts de fichiers réseau**|Copier un fichier de 100 Mo entre les machines virtuelles et de mesurer la durée nécessaire pour terminer la copie. Sur un 100 Mbit intègre les réseau (Mo), un fichier de 100 Mo (Mo) doit copier dans 10 à 20 secondes. Sur un réseau de 1 Gbit sain, un fichier de 100 Mo doit copier dans environ 3 à 5 secondes. Heures en dehors de ces paramètres sont représentatives d’un problème réseau. Une des causes courantes des transferts de liaison réseau défectueuse se produit lorsque la carte réseau a « détecté automatiquement » un réseau de 10 Mo semi-duplex empêche la carte réseau de tirer pleinement parti de la bande passante disponible.|  
|**Mesure l’utilisation de réseau sur le système d’exploitation de hôte Hyper-V**|Utilisez les compteurs du moniteur de performances suivantes pour mesurer l’utilisation du réseau sur le système d’exploitation de hôte Hyper-V :<br /><br /> **\Network interface (\*) \Bytes/s** – le pourcentage d’utilisation du réseau est calculé en multipliant le Total des octets/s par 8 pour le convertir en bits, multipliez le résultat par 100, puis actuelle de division par la carte réseau bande passante. Utiliser des seuils suivants pour évaluer l’utilisation de la bande passante réseau :<br /><br /> -Moins de 40 % de l’interface consommée = sain<br />-41 à 64 % de l’interface utilisée = analyse ou une attention<br />-65-100 % de l’interface utilisée = critique, performances seront affectées<br /><br /> **\Network interface (\*) \Output longueur de file d’attente** : la longueur de file d’attente de sortie mesure le nombre de threads en attente sur la carte réseau. S’il y a plus de 2 threads en attente sur la carte réseau, le réseau peut être un goulot d’étranglement. Causes courantes de ce sont des taux de collision élevé sur le réseau et/ou de latence du réseau sont faibles. Utilisez les seuils suivants pour évaluer la longueur de file d’attente de sortie :<br /><br /> -0 = sain<br />-1-2 = analyse ou une attention<br />-Supérieure à 2 = critique, performances seront affectées.<br /><br /> Vérifiez que les cartes réseau pour tous les ordinateurs (physiques et virtuels) dans la solution sont configurés pour utiliser la même valeur pour l’unité de transmission maximale (MTU). Pour plus d’informations sur la configuration de la valeur de la MTU, consultez « Paramètres de Configuration TCP/IP annexe a : » à [ http://go.microsoft.com/fwlink/?LinkId=113716 ](http://go.microsoft.com/fwlink/?LinkId=113716).<br /><br /> Si une longueur de file d’attente de sortie de 2 ou plus est mesurée, envisagez d’ajouter une ou plusieurs cartes réseau physiques sur l’ordinateur physique qui héberge les ordinateurs virtuels et lier les cartes réseau utilisées par les systèmes d’exploitation invités sur ces cartes réseau physiques.|  
|**Utilisation du réseau de mesures sur les systèmes d’exploitation invités**|Si une carte réseau sur la partition racine de Hyper-V est occupée, comme indiqué par les compteurs de performance mentionnés ci-dessus, envisagez d’utiliser le compteur Analyseur de performances « \Hyper-V carte de réseau virtuel (*) \Bytes/sec » pour identifier le réseau virtuel l’utilisation du réseau la plupart des consomment des adaptateurs.|  
  
 Pour plus d’informations sur l’analyse des performances réseau, consultez « Chapitre 15 – mesure de performances des applications .NET » à [ http://go.microsoft.com/fwlink/?LinkId=121073 ](http://go.microsoft.com/fwlink/?LinkId=121073).  
  
## <a name="measuring-processor-performance"></a>Mesure des performances du processeur  
 Utilisez les méthodes suivantes pour évaluer les performances du processeur sur un système d’exploitation invité sur un ordinateur virtuel Hyper-V :  
  
-   **Mesurer l’utilisation de processeur du système d’exploitation invité -** en règle générale, les performances du processeur peuvent être mesuré à l’aide de la « \Processor(*)\\% temps processeur » compteur Perfmon. Ce n’est pas un compteur précis pour l’évaluation de l’utilisation du processeur d’un système d’exploitation invité Cependant, car les mesures de Hyper-V et signale cette valeur par rapport au nombre de processeurs alloués à l’ordinateur virtuel. Si plus de processeurs sont attribuées aux ordinateurs virtuels en cours d’exécution que le sont effectivement présentes sur l’ordinateur physique, la valeur retournée par chaque système d’exploitation invité pour le « \Processor (\*)\\% temps processeur » compteur Analyseur de performances est faible, même si en fait l’utilisation du processeur est un goulot d’étranglement. Cela se produit, car les processeurs virtuels utilisent des processeurs physiques de manière alternée. Chaque processeur virtuel essayez et lui-même allouer un partage de ressources de l’ensemble du système, afin que dans un système 4 processeurs physiques, chaque processeur virtuel par essayez par défaut à utiliser de 25 % des ressources système. Si 8 processeurs virtuels sont créés cela signifie que collectivement les processeurs virtuels tentera d’utiliser 200 % de la capacité de l’UC du serveur. Dans ce cas, chaque processeur virtuel signalera une faible utilisation mesurée par le « \Processor (\*)\\% temps processeur » compteur du moniteur performances (en fonction du niveau il attend) et le contexte excessifs entre le processeurs virtuels entraîne une dégradation des performances pour chaque ordinateur virtuel. Dans ce scénario, envisagez de réduire le nombre de processeurs virtuels alloués aux ordinateurs virtuels Hyper-V sur le système d’exploitation hôte. Hyper-V fournit des objets de performance pour analyser les performances de processeurs logiques et virtuels hyperviseur. Un processeur logique correspond directement au nombre de processeurs ou cœurs qui sont installés sur l’ordinateur physique. Par exemple, 2 processeurs quadruple cœur installés sur l’ordinateur physique sont mettre en corrélation à 8 processeurs logiques. Processeurs virtuels sont qu’utilisent les ordinateurs virtuels, et l’exécution de toutes les dans les partitions racine et enfant se produit dans les processeurs virtuels.  
  
     Hyper-V fournit des objets de performance pour analyser les performances de processeurs logiques et virtuels hyperviseur. Un processeur logique correspond directement au nombre de processeurs ou cœurs qui sont installés sur l’ordinateur physique. Par exemple, 2 processeurs quadruple cœur installés sur l’ordinateur physique sont mettre en corrélation à 8 processeurs logiques. Processeurs virtuels sont qu’utilisent les ordinateurs virtuels, et l’exécution de toutes les dans les partitions racine et enfant se produit dans les processeurs virtuels.  
  
     Pour mesurer avec exactitude l’utilisation du processeur d’un système d’exploitation invité, utilisez le « processeur (_Total) Hyper-V hyperviseur logique % Total exécution « compteur Analyseur de performances sur le système d’exploitation de hôte Hyper-V. Seuils suivants permettent d’évaluer l’invité d’exploitation système processeur utilisation à l’aide de la « processeur (_Total) Hyper-V hyperviseur logique % Total l’exécution » compteur Analyseur de performances :  
  
    -   Inférieur à 60 % de consommation = sain  
  
    -   60-89 % consommée = analyse ou une attention  
  
    -   90 à 100 % consommée = critique, performances seront affectées  
  
     Pour résoudre les problèmes de performances du processeur des systèmes d’exploitation invités sur un environnement Hyper-V, il est préférable d’atteindre un équilibre entre les valeurs signalées par le système d’exploitation hôte pour « \Hyper-V processeur (_Total) logique de l’hyperviseur\\exécution de % Total Temps » (LPTR) et « processeur (_Total) \Hyper-V hyperviseur virtuel\\% Total d’exécution » (VPTR). Si LPTR est élevé et VPTR manque. Vérifiez qu’il n’y a pas plus de processeurs allouées aux ordinateurs virtuels sont disponibles sur l’ordinateur physique. Utilisez la « \Hyper-V hyperviseur virtuel Processor(*)\\pourcentage du temps d’exécution invité » compteurs pour déterminer quels processeurs virtuels qui consomment du processeur et annuler l’allocation de processeurs virtuels à partir d’ordinateurs virtuels comme il convient de configurer un mappage un-à-un de processeurs virtuels avec des processeurs logiques. Pour plus d’informations sur la configuration d’un mappage un-à-un des processeurs virtuels avec des processeurs logiques, consultez la section « Optimisation des performances du processeur » dans [liste de vérification : optimisation des performances sur Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md). Si VPTR est élevé et LPTR est faible envisagez d’allocation de processeurs supplémentaires aux ordinateurs virtuels s’il existe des processeurs logiques disponibles et si des processeurs supplémentaires sont pris en charge par le système d’exploitation invité. Dans le cas où VPTR est élevée, LPTR est faible, il existe des processeurs logiques disponibles à allouer, mais des processeurs supplémentaires ne sont pas pris en charge par le système d’exploitation invité, envisagez de montée en puissance parallèle en ajoutant des machines virtuelles supplémentaires à l’ordinateur physique et allocation de processeurs disponibles pour ces ordinateurs virtuels. Dans le cas où VPTR et LPTR sont élevées, la configuration repousse les limites de l’ordinateur physique et envisagez de montée en puissance parallèle en ajoutant un autre ordinateur physique et les autres ordinateurs virtuels de Hyper-V à l’environnement. L’organigramme ci-dessous décrit le processus qui doit être utilisé lors de la résolution des problèmes de performances du processeur dans un environnement Hyper-V.  
  
     Si VPTR est élevé et LPTR est faible, envisagez d’allocation de processeurs supplémentaires aux ordinateurs virtuels s’il existe des processeurs logiques disponibles et si des processeurs supplémentaires sont pris en charge par le système d’exploitation invité. Dans le cas où VPTR est élevée, LPTR est faible, il existe des processeurs logiques disponibles à allouer, mais des processeurs supplémentaires ne sont pas pris en charge par le système d’exploitation invité, envisagez de montée en puissance parallèle en ajoutant des machines virtuelles supplémentaires à l’ordinateur physique et allocation de processeurs disponibles pour ces ordinateurs virtuels. Dans le cas où VPTR et LPTR sont élevées, la configuration repousse les limites de l’ordinateur physique et envisagez de montée en puissance parallèle en ajoutant un autre ordinateur physique et les autres ordinateurs virtuels de Hyper-V à l’environnement. L’organigramme ci-dessous décrit le processus qui doit être utilisé lors de la résolution des problèmes de performances du processeur dans un environnement Hyper-V.  
  
     ![Résolution des problèmes de performances de l’UC sur Hyper&#45;V](../technical-guides/media/623fdcd6-e80b-4ba9-bf46-5d9b92b6612b.gif "623fdcd6-e80b-4ba9-bf46-5d9b92b6612b")  
Résolution des problèmes de performances de l’UC dans un environnement Hyper-V  
  
    > [!NOTE]  
    >  **Processeurs du système d’exploitation invité n’ont pas une définissez l’affinité des processeurs/cœurs physiques** – l’hyperviseur détermine les ressources physiques sont utilisés. Dans le cas d’utilisation du processeur, l’hyperviseur planifie le temps de processeur invité au processeur physique sous la forme de threads. Cela signifie que la charge du processeur des ordinateurs virtuels est répartie entre les processeurs de l’ordinateur physique. En outre, les machines virtuelles ne peut pas dépasser l’utilisation du processeur du nombre de processeurs logiques, par exemple, si un seul ordinateur virtuel est configuré pour s’exécuter avec 2 processeurs logiques sur un ordinateur physique avec 8 processeurs/cœurs, configuré le machine virtuelle ne peut pas dépasser la capacité de processeur du nombre de processeurs logiques configurés (dans ce cas 2 processeurs).  
  
-   **Mesurer l’utilisation du processeur de globale de l’environnement Hyper-V à l’aide de Hyper-V compteurs -** à des fins de mesure de l’utilisation du processeur, le système d’exploitation hôte est logiquement considéré comme un autre système de d’exploitation invité . Par conséquent, le « \Processor(*)\\% temps processeur » compteur du moniteur mesure l’utilisation du processeur du système d’exploitation hôte uniquement. Pour mesurer l’utilisation du processeur physique totale du système d’exploitation hôte et tous les systèmes d’exploitation invités, utiliser le « \Hyper-V processeur (_Total) logique de l’hyperviseur\\% Total exécution « compteur Perfmon. Ce compteur mesure le pourcentage total du temps passé par le processeur de l’à la fois le système d’exploitation hôte et tous les systèmes d’exploitation invités.  
  
     Utiliser des seuils suivants pour évaluer l’utilisation de processeur globale de l’environnement Hyper-V à l’aide la « \Hyper-V processeur (_Total) logique de l’hyperviseur\\% Total exécution » compteur Analyseur de performances :  
  
    -   Inférieur à 60 % de consommation = sain  
  
    -   60-89 % consommée = analyse ou une attention  
  
    -   90 à 100 % consommée = critique, performances seront affectées  
  
     Pour plus d’informations sur l’utilisation du processeur, consultez les ressources suivantes :  
  
    -   « Comment : identifier les fonctions à l’origine d’un goulot d’étranglement de processeur en mode utilisateur élevée pour les Applications serveur dans un environnement de Production » à [ http://go.microsoft.com/fwlink/?LinkID=107047 ](http://go.microsoft.com/fwlink/?LinkID=107047).  
  
    -   « Chapter 15 - mesure .NET Application Performance » au [ http://go.microsoft.com/fwlink/?LinkId=121073 ](http://go.microsoft.com/fwlink/?LinkId=121073).