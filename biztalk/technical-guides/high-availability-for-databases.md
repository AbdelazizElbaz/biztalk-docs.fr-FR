---
title: "Haute disponibilité pour les bases de données | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 63813d87-1ce4-4645-bb2a-d55e413fcace
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 24e17afbf9e33f3e12553d7ded5068370d8ca085
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/01/2017
---
# <a name="high-availability-for-databases"></a><span data-ttu-id="8a4f0-102">Haute disponibilité pour les bases de données</span><span class="sxs-lookup"><span data-stu-id="8a4f0-102">High Availability for Databases</span></span>
<span data-ttu-id="8a4f0-103">BizTalk Server s’appuie fortement sur SQL Server pour le magasin de données et la persistance des données.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-103">BizTalk Server relies heavily on SQL Server for data store and data persistence.</span></span> <span data-ttu-id="8a4f0-104">Tous les autres composants et hôtes de BizTalk Server jouent un rôle précis dans le processus d'intégration des applications d'entreprise (ex. : réception, traitement ou routage des messages) tandis que l'ordinateur où se trouvent les bases de données enregistre ces travaux pour les conserver sur le disque.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-104">All other components and hosts in BizTalk Server have specific roles in the process of integrating disparate business applications (for example, receiving, processing, or routing messages), but the database computer captures this work and persists it to disk.</span></span> <span data-ttu-id="8a4f0-105">Par exemple, lorsque BizTalk Server reçoit un message entrant, l’hôte de réception enregistre sur la base de données MessageBox avant d’autres hôtes le récupèrent le message pour l’orchestration de traitement et l’envoi.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-105">For example, when BizTalk Server receives an incoming message, the receive host persists it to the MessageBox database before other hosts retrieve the message for orchestration processing and sending.</span></span> <span data-ttu-id="8a4f0-106">Si votre solution BizTalk comprend une orchestration, BizTalk Server achemine le message vers l’hôte qui exécute le processus d’entreprise (hôte de traitement) et enregistre le message à la base de données MessageBox une fois l’orchestration terminée.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-106">If your BizTalk solution involves orchestration, BizTalk Server routes the message to the host that executes the business process (processing host), and saves the message to the MessageBox database after the orchestration finishes.</span></span> <span data-ttu-id="8a4f0-107">L'hôte d'envoi extrait ensuite le message de la base de données avant de l'envoyer à l'application externe concernée par l'intermédiaire de l'adaptateur d'envoi approprié.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-107">The sending host then retrieves the message from the database before sending it to the external application through the appropriate send adapter.</span></span>  
  
 <span data-ttu-id="8a4f0-108">Pour fournir une haute disponibilité pour les bases de données BizTalk Server, utilisez le Clustering Windows pour configurer deux ou plusieurs ordinateurs qui exécutent SQL Server pour créer un cluster de serveurs.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-108">To provide high availability for the BizTalk Server databases, use Windows Clustering to configure two or more computers that are running SQL Server to create a server cluster.</span></span> <span data-ttu-id="8a4f0-109">Ce cluster de serveurs fournit la redondance et la tolérance de panne pour les bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-109">This server clustering provides redundancy and fault tolerance for the BizTalk Server databases.</span></span> <span data-ttu-id="8a4f0-110">Dans un cluster à équilibrage de charge, plusieurs ordinateurs forment un groupe et fonctionnent ensemble dans le but d'augmenter la disponibilité et l'évolutivité de l'installation. En revanche, dans un cluster de serveurs, deux ordinateurs dédiés aux bases de données sont configurés sur un modèle actif/passif où l'une des machines fournit les ressources de sauvegarde à l'autre.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-110">Unlike load-balanced clustering, where a group of computers functions together to increase availability and scalability, server clustering typically involves a pair of database computers in an active/passive configuration so that one computer provides backup resources for the other.</span></span>  
  
 <span data-ttu-id="8a4f0-111">Le schéma suivant représente un niveau de base de données BizTalk Server hautement disponible grâce à un cluster de serveurs actif/passif.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-111">The following figure shows a BizTalk Server database tier with high availability through active/passive server clustering.</span></span>  
  
 <span data-ttu-id="8a4f0-112">![Niveau de base de données BizTalk Server](../core/media/tdi-highava-sqlcluster.gif "TDI_HighAva_SQLCluster")</span><span class="sxs-lookup"><span data-stu-id="8a4f0-112">![BizTalk Server Database Tier](../core/media/tdi-highava-sqlcluster.gif "TDI_HighAva_SQLCluster")</span></span>  
  
 <span data-ttu-id="8a4f0-113">Si la machine de base de données active rencontre des problèmes ou s'arrête, la machine passive devient active et reprend le contrôle des ressources de base de données jusqu'à ce que la machine défaillante soit de nouveau opérationnelle.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-113">If the active database computer encounters errors or fails, the passive computer becomes active and assumes control over the database resources until the failed computer is repaired.</span></span> <span data-ttu-id="8a4f0-114">Le service de base de données bascule et restaure les connexions de données à l’ordinateur actif et permet à l’application BizTalk continuer à fonctionner.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-114">The database service fails over and restores data connections to the new active computer and enables the BizTalk application to continue functioning.</span></span>  
  
## <a name="biztalk-server-databases"></a><span data-ttu-id="8a4f0-115">Bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="8a4f0-115">BizTalk Server Databases</span></span>  
 <span data-ttu-id="8a4f0-116">Microsoft BizTalk Server installe plusieurs bases de données sur le serveur SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-116">Microsoft BizTalk Server installs several databases in SQL Server.</span></span> <span data-ttu-id="8a4f0-117">Le tableau suivant présente les caractéristiques d’utilisation pour les bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-117">The following table shows typical usage characteristics for the BizTalk Server databases.</span></span>  
  
|<span data-ttu-id="8a4f0-118">Base de données</span><span class="sxs-lookup"><span data-stu-id="8a4f0-118">Database</span></span>|<span data-ttu-id="8a4f0-119">Nom par défaut de la base de données</span><span class="sxs-lookup"><span data-stu-id="8a4f0-119">Default database name</span></span>|<span data-ttu-id="8a4f0-120">Caractéristiques d’utilisation</span><span class="sxs-lookup"><span data-stu-id="8a4f0-120">Usage characteristics</span></span>|  
|--------------|---------------------------|---------------------------|  
|<span data-ttu-id="8a4f0-121">Management database</span><span class="sxs-lookup"><span data-stu-id="8a4f0-121">Management database</span></span>|<span data-ttu-id="8a4f0-122">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="8a4f0-122">BizTalkMgmtDb</span></span>|<span data-ttu-id="8a4f0-123">Cette base de données gère faible utilisation lire et écrire des opérations.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-123">This database handles low-usage read and write operations.</span></span>|  
|<span data-ttu-id="8a4f0-124">Base de données MessageBox</span><span class="sxs-lookup"><span data-stu-id="8a4f0-124">MessageBox database</span></span>|<span data-ttu-id="8a4f0-125">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="8a4f0-125">BizTalkMsgBoxDb</span></span>|<span data-ttu-id="8a4f0-126">Cet base de données gère de façon intensive lire et écrire des opérations.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-126">This database handles high-usage read and write operations.</span></span>|  
|<span data-ttu-id="8a4f0-127">Base de données des suivis</span><span class="sxs-lookup"><span data-stu-id="8a4f0-127">Tracking database</span></span>|<span data-ttu-id="8a4f0-128">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="8a4f0-128">BizTalkDTADb</span></span>|<span data-ttu-id="8a4f0-129">Cette base de données gère les opérations d’écriture de potentiellement intensive selon la quantité de données que vous configurez pour être suivies et faible utilisation des opérations de lecture.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-129">This database handles potentially high-usage write operations depending on the amount of data that you configure to be tracked, and low-usage read operations.</span></span>|  
|<span data-ttu-id="8a4f0-130">Base de données SSO</span><span class="sxs-lookup"><span data-stu-id="8a4f0-130">SSO database</span></span>|<span data-ttu-id="8a4f0-131">SSODB</span><span class="sxs-lookup"><span data-stu-id="8a4f0-131">SSODB</span></span>|<span data-ttu-id="8a4f0-132">Cette base de données gère faible utilisation lire et écrire des opérations.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-132">This database handles low-usage read and write operations.</span></span>|  
|<span data-ttu-id="8a4f0-133">Base de données d'analyse BAM</span><span class="sxs-lookup"><span data-stu-id="8a4f0-133">BAM Analysis database</span></span>|<span data-ttu-id="8a4f0-134">BAMAnalysis</span><span class="sxs-lookup"><span data-stu-id="8a4f0-134">BAMAnalysis</span></span>|<span data-ttu-id="8a4f0-135">Cette base de données SQL Server Analysis Services gère potentiellement intensive opérations de lecture et écriture, selon le niveau de l’analyse effectuée.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-135">This SQL Server Analysis Services database handles potentially high-usage read and write operations, depending on the level of monitoring performed.</span></span>|  
|<span data-ttu-id="8a4f0-136">Base de données de schémas en étoile BAM</span><span class="sxs-lookup"><span data-stu-id="8a4f0-136">BAM Star Schema database</span></span>|<span data-ttu-id="8a4f0-137">BAMStarSchema</span><span class="sxs-lookup"><span data-stu-id="8a4f0-137">BAMStarSchema</span></span>|<span data-ttu-id="8a4f0-138">Cette base de données SQL Server Analysis Services gère potentiellement intensive opérations de lecture et écriture, selon le niveau de l’analyse effectuée.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-138">This SQL Server Analysis Services database handles potentially high-usage read and write operations, depending on the level of monitoring performed.</span></span>|  
|<span data-ttu-id="8a4f0-139">Base de données d'importation principale BAM</span><span class="sxs-lookup"><span data-stu-id="8a4f0-139">BAM Primary Import database</span></span>|<span data-ttu-id="8a4f0-140">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="8a4f0-140">BAMPrimaryImport</span></span>|<span data-ttu-id="8a4f0-141">Cette base de données SQL Server Analysis Services gère potentiellement intensive opérations de lecture et écriture, selon le niveau de l’analyse effectuée.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-141">This SQL Server Analysis Services database handles potentially high-usage read and write operations, depending on the level of monitoring performed.</span></span>|  
|<span data-ttu-id="8a4f0-142">Base de données des archives de l'analyse BAM</span><span class="sxs-lookup"><span data-stu-id="8a4f0-142">BAM Archive database</span></span>|<span data-ttu-id="8a4f0-143">BAMArchive</span><span class="sxs-lookup"><span data-stu-id="8a4f0-143">BAMArchive</span></span>|<span data-ttu-id="8a4f0-144">Cette base de données SQL Server Analysis Services gère potentiellement intensive opérations de lecture et écriture, selon le niveau de l’analyse effectuée.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-144">This SQL Server Analysis Services database handles potentially high-usage read and write operations, depending on the level of monitoring performed.</span></span>|  
|<span data-ttu-id="8a4f0-145">Base de données du moteur de règles</span><span class="sxs-lookup"><span data-stu-id="8a4f0-145">Rule Engine database</span></span>|<span data-ttu-id="8a4f0-146">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="8a4f0-146">BizTalkRuleEngineDb</span></span>|<span data-ttu-id="8a4f0-147">Cette base de données gère potentiellement faible utilisation d’opérations de lecture et écriture, sauf si vous mettez à jour les règles.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-147">This database handles potentially low-usage read and write operations, unless you update the rules.</span></span>|  
|<span data-ttu-id="8a4f0-148">Base de données Analysis Services</span><span class="sxs-lookup"><span data-stu-id="8a4f0-148">Tracking Analysis Services database</span></span>|<span data-ttu-id="8a4f0-149">BizTalkAnalysisDb</span><span class="sxs-lookup"><span data-stu-id="8a4f0-149">BizTalkAnalysisDb</span></span>|<span data-ttu-id="8a4f0-150">Ce serveur SQL Server Analysis Services gère de façon intensive lire et écrire des opérations de base de données.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-150">This SQL Server Analysis Services database handles high-usage read and write operations.</span></span>|  
  
 <span data-ttu-id="8a4f0-151">Opérations d’exécution BizTalk Server utilisent généralement les quatre premières bases de données (base de données de gestion, les bases de données MessageBox, suivi de base de données et base de données SSO).</span><span class="sxs-lookup"><span data-stu-id="8a4f0-151">BizTalk Server runtime operations typically use the first four databases (Management database, MessageBox databases, Tracking database, and SSO database).</span></span> <span data-ttu-id="8a4f0-152">Selon le trafic sur ces bases de données, vous pouvez les placer sur des ordinateurs distincts qui exécutent SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-152">Depending on the traffic on these databases, you can put them on separate computers that are running SQL Server.</span></span> <span data-ttu-id="8a4f0-153">Selon la fonctionnalité BizTalk Server employée, vous pouvez disposer de tout ou partie des bases de données de ce tableau.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-153">Depending on the BizTalk Server functionality that you use, you may have some or all of the other databases in the table.</span></span> <span data-ttu-id="8a4f0-154">Vous pouvez monter en charge et ces bases de données de cluster en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-154">You can scale out and cluster these databases as needed.</span></span>  
  
 <span data-ttu-id="8a4f0-155">Assurez-vous que vous suivez les bonnes pratiques de déploiement de SQL Server, telles que l’utilisation des disques distincts pour chaque base de données.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-155">Make sure that you follow good SQL Server deployment practices, such as using separate disks for each database.</span></span>  
  
 <span data-ttu-id="8a4f0-156">Pour les bases de données BizTalk Server, nous vous recommandons de procéder comme suit :</span><span class="sxs-lookup"><span data-stu-id="8a4f0-156">For the BizTalk Server databases, we recommend that you do the following:</span></span>  
  
-   <span data-ttu-id="8a4f0-157">**Configurer le clustering de basculement**.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-157">**Set up failover clustering**.</span></span> <span data-ttu-id="8a4f0-158">Le clustering avec basculement permet à SQL Server de basculer automatiquement le traitement d’une instance de SQL Server à partir d’un serveur défaillant et un serveur opérationnel.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-158">Failover clustering enables SQL Server to automatically switch the processing for an instance of SQL Server from a failed server to a working server.</span></span>  
  
     <span data-ttu-id="8a4f0-159">La base de données d'importation principale BAM collecte les données d'événement.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-159">The BAM Primary Import database collects event data.</span></span> <span data-ttu-id="8a4f0-160">En cas de sinistre, les données ajoutées à cette base de données depuis la dernière sauvegarde seront perdues.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-160">In the event of a disaster, data that was written to the BAM Primary Import database since the last backup will be lost.</span></span> <span data-ttu-id="8a4f0-161">Comme il n’existe aucun moyen de régénérer les événements perdus, il est particulièrement important d’activer le clustering de basculement sur votre base de données d’importation principale BAM.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-161">Because there is no way to regenerate lost events, it is especially important that you enable failover clustering on your BAM Primary Import database.</span></span>  
  
-   <span data-ttu-id="8a4f0-162">**Utilisez SQL Server RAID 1 + 0 (baie redondante de disques indépendants)**, en particulier pour la base de données MessageBox et la base de données d’importation principale BAM.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-162">**Use SQL Server RAID 1+0 (redundant array of independent disks)**, especially for the MessageBox database and the BAM Primary Import database.</span></span>  
  
 <span data-ttu-id="8a4f0-163">Pour plus d’informations sur la sauvegarde de vos bases de données BizTalk Server, consultez [meilleures pratiques pour la récupération d’urgence](../technical-guides/best-practices-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="8a4f0-163">For information about backing up your BizTalk Server databases, see [Best Practices for Disaster Recovery](../technical-guides/best-practices-for-disaster-recovery.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8a4f0-164">Microsoft SQL Server fournit une solution logicielle appelée mise en miroir de base de données permettant d’accroître la probabilité qu’une base de données est disponible.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-164">Microsoft SQL Server provides a software solution known as database mirroring for increasing the probability that a database is available.</span></span> <span data-ttu-id="8a4f0-165">L’utilisation de la mise en miroir de base de données SQL Server n’est pas une solution prise en charge pour garantir une haute disponibilité des bases de données Microsoft BizTalk Server en raison de certaines difficultés à maintenir la cohérence des transactions dans les bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-165">The use of SQL Server database mirroring is not currently a supported solution for ensuring high availability of the Microsoft BizTalk Server databases because of potential problems maintaining transactional consistency in the BizTalk Server databases.</span></span>  
>   
>  <span data-ttu-id="8a4f0-166">Pour plus d’informations sur la mise en miroir de base de données et transactions entre bases de données dans SQL Server, consultez [Transactions - groupes de disponibilité et de la mise en miroir de base de données](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/transactions-always-on-availability-and-database-mirroring).</span><span class="sxs-lookup"><span data-stu-id="8a4f0-166">For more information about database mirroring and cross-database transactions in SQL Server, see [Transactions - availability groups and database mirroring](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/transactions-always-on-availability-and-database-mirroring).</span></span> <span data-ttu-id="8a4f0-167">Bases de données BizTalk Server doivent être installés sur un cluster de SQL Server pour garantir une haute disponibilité et d’envoi de journaux doit être utilisée à des fins de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="8a4f0-167">BizTalk Server databases should be installed on a SQL Server cluster to ensure high availability and log shipping should be utilized for purposes of disaster recovery.</span></span>  
>   
>  <span data-ttu-id="8a4f0-168">Pour plus d’informations sur l’envoi de journaux, consultez [ce qui est BizTalk Server l’envoi de journaux ?](../technical-guides/what-is-biztalk-server-log-shipping.md)</span><span class="sxs-lookup"><span data-stu-id="8a4f0-168">For more information about log shipping, see [What Is BizTalk Server Log Shipping?](../technical-guides/what-is-biztalk-server-log-shipping.md)</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="8a4f0-169">Dans cette section</span><span class="sxs-lookup"><span data-stu-id="8a4f0-169">In This Section</span></span>  
  
-   [<span data-ttu-id="8a4f0-170">Mise en cluster des bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="8a4f0-170">Clustering the BizTalk Server Databases</span></span>](../technical-guides/clustering-the-biztalk-server-databases2.md)  
  
-   [<span data-ttu-id="8a4f0-171">Montée en charge des bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="8a4f0-171">Scaling Out the BizTalk Server Databases</span></span>](../technical-guides/scaling-out-the-biztalk-server-databases.md)  
  
## <a name="see-also"></a><span data-ttu-id="8a4f0-172">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8a4f0-172">See Also</span></span>  
 <span data-ttu-id="8a4f0-173">[Planification de la haute disponibilité](../technical-guides/planning-for-high-availability2.md) </span><span class="sxs-lookup"><span data-stu-id="8a4f0-173">[Planning for High Availability](../technical-guides/planning-for-high-availability2.md) </span></span>  
 <span data-ttu-id="8a4f0-174">[Haute disponibilité pour les hôtes BizTalk](../technical-guides/high-availability-for-biztalk-hosts.md) </span><span class="sxs-lookup"><span data-stu-id="8a4f0-174">[High Availability for BizTalk Hosts](../technical-guides/high-availability-for-biztalk-hosts.md) </span></span>  
 <span data-ttu-id="8a4f0-175">[Haute disponibilité pour le serveur de secret principal](../technical-guides/high-availability-for-the-master-secret-server.md) </span><span class="sxs-lookup"><span data-stu-id="8a4f0-175">[High Availability for the Master Secret Server](../technical-guides/high-availability-for-the-master-secret-server.md) </span></span>  
 [<span data-ttu-id="8a4f0-176">Récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="8a4f0-176">Disaster Recovery</span></span>](../technical-guides/disaster-recovery.md)