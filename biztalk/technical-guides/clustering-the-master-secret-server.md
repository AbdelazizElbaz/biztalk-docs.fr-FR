---
title: Clustering du serveur de secret principal | Documents Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 14aa3622-8462-4ed9-abde-40090d4f96ff
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 674cbf64e11817c951d3841ebdc9f6ee979c0e8c
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="clustering-the-master-secret-server"></a><span data-ttu-id="d48e0-102">Clustering du serveur de secret principal</span><span class="sxs-lookup"><span data-stu-id="d48e0-102">Clustering the Master Secret Server</span></span>
<span data-ttu-id="d48e0-103">Le [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] service application conserve une dépendance codée en dur sur le service Enterprise Single Sign-On (SSO) qui est installé avec [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d48e0-103">The [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] application service maintains a hard-coded dependency upon the Enterprise Single Sign-On (SSO) service that is installed with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="d48e0-104">Le service d’authentification unique doit être en mesure de communiquer avec le serveur de secret principal à démarrer.</span><span class="sxs-lookup"><span data-stu-id="d48e0-104">The SSO service must be able to communicate with the master secret server to start.</span></span> <span data-ttu-id="d48e0-105">Nous vous recommandons de mettre en cluster le service d’authentification unique sur le serveur de secret principal à tolérance de pannes pour le serveur de secret principal.</span><span class="sxs-lookup"><span data-stu-id="d48e0-105">We recommend that you cluster the SSO service on the master secret server to provide fault tolerance for the master secret server.</span></span> <span data-ttu-id="d48e0-106">Pour plus d’informations, consultez [Options d’Installation de l’authentification unique de haute disponibilité](http://go.microsoft.com/fwlink/?LinkId=156838) (http://go.microsoft.com/fwlink/?LinkId=156838) dans [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] aide.</span><span class="sxs-lookup"><span data-stu-id="d48e0-106">For more information, see [High-Availability SSO Installation Options](http://go.microsoft.com/fwlink/?LinkId=156838) (http://go.microsoft.com/fwlink/?LinkId=156838) in [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] Help.</span></span>  
  
## <a name="preparing-for-clustering-the-master-secret-server"></a><span data-ttu-id="d48e0-107">Préparation pour le Clustering du serveur de secret principal</span><span class="sxs-lookup"><span data-stu-id="d48e0-107">Preparing for Clustering the Master Secret Server</span></span>  
  
### <a name="deciding-whether-to-use-a-dedicated-cluster-or-the-sql-server-cluster"></a><span data-ttu-id="d48e0-108">S’il faut utiliser un Cluster dédié ou le Cluster SQL Server</span><span class="sxs-lookup"><span data-stu-id="d48e0-108">Deciding Whether to Use a Dedicated Cluster or the SQL Server Cluster</span></span>  
 <span data-ttu-id="d48e0-109">Clustering matériel est coûteux.</span><span class="sxs-lookup"><span data-stu-id="d48e0-109">Clustering hardware is expensive.</span></span> <span data-ttu-id="d48e0-110">Pour réduire les ressources matérielles pour une solution hautement disponible, vous pouvez ajouter le serveur de secret principal en tant que ressource de cluster dans votre [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] cluster de la base de données.</span><span class="sxs-lookup"><span data-stu-id="d48e0-110">To reduce the hardware resources for a highly available solution, you can add the master secret server as a cluster resource in your [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database cluster.</span></span> <span data-ttu-id="d48e0-111">Si vous utilisez la [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] cluster de la base de données, nous vous recommandons de ne pas mettre le serveur de secret principal sur le même nœud actif en tant que la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="d48e0-111">If you use the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database cluster, we recommend that you do not put the master secret server on the same active node as the MessageBox database.</span></span> <span data-ttu-id="d48e0-112">La base de données MessageBox est généralement plus occupé que les autres bases de données.</span><span class="sxs-lookup"><span data-stu-id="d48e0-112">The MessageBox database is usually busier than other databases.</span></span> <span data-ttu-id="d48e0-113">Même si le serveur de secret principal ne consomme pas beaucoup de ressources de matériel, il est préférable pour le déplacer vers un nœud actif du cluster différent à partir du nœud de base de données MessageBox actif.</span><span class="sxs-lookup"><span data-stu-id="d48e0-113">Even though the master secret server doesn't consume many hardware resources, it is better to move it to a different active cluster node from the active MessageBox database node.</span></span>  
  
### <a name="clustering-the-sso-database"></a><span data-ttu-id="d48e0-114">Clustering de la base de données SSO</span><span class="sxs-lookup"><span data-stu-id="d48e0-114">Clustering the SSO Database</span></span>  
 <span data-ttu-id="d48e0-115">Le serveur de secret principal dépend de la base de données SSO.</span><span class="sxs-lookup"><span data-stu-id="d48e0-115">The master secret server depends on the SSO database.</span></span> <span data-ttu-id="d48e0-116">Pour générer une authentification unique de haute disponibilité, vous devez mettre en cluster la base de données SSO.</span><span class="sxs-lookup"><span data-stu-id="d48e0-116">To build a high-availability SSO, you must cluster the SSO database.</span></span> <span data-ttu-id="d48e0-117">Pour plus d’informations sur les clusters de bases de données BizTalk, consultez [Clustering le Databases2 serveur BizTalk](../technical-guides/clustering-the-biztalk-server-databases2.md).</span><span class="sxs-lookup"><span data-stu-id="d48e0-117">For more information about clustering BizTalk databases, see [Clustering the BizTalk Server Databases2](../technical-guides/clustering-the-biztalk-server-databases2.md).</span></span>  
  
### <a name="creating-domain-groups-and-accounts"></a><span data-ttu-id="d48e0-118">Création de comptes et groupes de domaine</span><span class="sxs-lookup"><span data-stu-id="d48e0-118">Creating Domain Groups and Accounts</span></span>  
 <span data-ttu-id="d48e0-119">Vous devez configurer les comptes et groupes de domaine suivants avant de mettre le serveur de secret principal :</span><span class="sxs-lookup"><span data-stu-id="d48e0-119">You need to configure the following domain groups and accounts before clustering the master secret server:</span></span>  
  
-   <span data-ttu-id="d48e0-120">Créez des groupes de domaine avec les noms des administrateurs de l’authentification unique et administrateurs d’applications associées à authentification unique.</span><span class="sxs-lookup"><span data-stu-id="d48e0-120">Create domain groups with the names SSO Administrators and SSO Affiliate Administrators.</span></span> <span data-ttu-id="d48e0-121">Pour créer une instance en cluster du service SSO de l’entreprise, vous devez créer les groupes Administrateurs SSO et administrateurs d’applications associées à authentification unique en tant que groupes de domaine.</span><span class="sxs-lookup"><span data-stu-id="d48e0-121">To create a clustered instance of the Enterprise SSO service, you must create the SSO Administrators and SSO Affiliate Administrators groups as domain groups.</span></span>  
  
-   <span data-ttu-id="d48e0-122">Créez ou désignez un compte de domaine qui est membre du groupe Administrateurs de domaine.</span><span class="sxs-lookup"><span data-stu-id="d48e0-122">Create or designate a domain account that is a member of the SSO Administrators domain group.</span></span> <span data-ttu-id="d48e0-123">Le service SSO sur chaque nœud sera configuré pour ouvrir une session en tant que ce compte de domaine.</span><span class="sxs-lookup"><span data-stu-id="d48e0-123">The Enterprise SSO service on each node will be configured to log on as this domain account.</span></span> <span data-ttu-id="d48e0-124">Ce compte doit disposer du droit « Session en tant que service » sur chaque nœud du cluster.</span><span class="sxs-lookup"><span data-stu-id="d48e0-124">This account must have the "Log on as a service" right on each node in the cluster.</span></span> <span data-ttu-id="d48e0-125">Ce compte doit également être reçu l’accès contrôle total au cluster.</span><span class="sxs-lookup"><span data-stu-id="d48e0-125">This account must also be granted Full Control access to the cluster.</span></span>  
  
## <a name="clustering-the-master-secret-server"></a><span data-ttu-id="d48e0-126">Clustering du serveur de secret principal</span><span class="sxs-lookup"><span data-stu-id="d48e0-126">Clustering the Master Secret Server</span></span>  
 <span data-ttu-id="d48e0-127">Voici les étapes de base pour le serveur de secret principal de clustering :</span><span class="sxs-lookup"><span data-stu-id="d48e0-127">Here are the basic steps for clustering the master secret server:</span></span>  
  
1.  <span data-ttu-id="d48e0-128">Installer et configurer l’authentification unique de l’entreprise sur les nœuds de cluster.</span><span class="sxs-lookup"><span data-stu-id="d48e0-128">Install and configure Enterprise SSO on the cluster nodes.</span></span>  
  
2.  <span data-ttu-id="d48e0-129">Créer la ressource de l’authentification unique de l’entreprise en cluster et les ressources dépendantes.</span><span class="sxs-lookup"><span data-stu-id="d48e0-129">Create the clustered Enterprise SSO resource and the dependent resources.</span></span>  
  
3.  <span data-ttu-id="d48e0-130">Restaurez le secret principal sur le deuxième nœud du cluster.</span><span class="sxs-lookup"><span data-stu-id="d48e0-130">Restore the master secret on the second cluster node.</span></span> <span data-ttu-id="d48e0-131">Si vous déplacez le serveur de secret principal sur le cluster, vous devez restaurer le secret principal sur le premier nœud de cluster ainsi.</span><span class="sxs-lookup"><span data-stu-id="d48e0-131">If you move the master secret server to the cluster, you must restore the master secret on the first cluster node as well.</span></span>  
  
4.  <span data-ttu-id="d48e0-132">Mettez le groupe de clusters contenant le service d’authentification unique, en ligne.</span><span class="sxs-lookup"><span data-stu-id="d48e0-132">Bring the cluster group that contains the SSO service, online.</span></span>  
  
5.  <span data-ttu-id="d48e0-133">Mettre à jour le nom de secret principal dans la base de données de gestion.</span><span class="sxs-lookup"><span data-stu-id="d48e0-133">Update the master secret name in the Management database.</span></span>  
  
 <span data-ttu-id="d48e0-134">Pour obtenir des instructions détaillées sur le serveur de secret principal de clustering, consultez [mise en Cluster du serveur de secret principal](http://go.microsoft.com/fwlink/?LinkId=156839) (http://go.microsoft.com/fwlink/?LinkId=156839) dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] aide.</span><span class="sxs-lookup"><span data-stu-id="d48e0-134">For detailed steps on clustering the master secret server, see [How to Cluster the Master Secret Server](http://go.microsoft.com/fwlink/?LinkId=156839) (http://go.microsoft.com/fwlink/?LinkId=156839) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d48e0-135">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d48e0-135">See Also</span></span>  
 [<span data-ttu-id="d48e0-136">Désignation d’un nouveau serveur de secret principal manuellement</span><span class="sxs-lookup"><span data-stu-id="d48e0-136">Designating a New Master Secret Server Manually</span></span>](../technical-guides/designating-a-new-master-secret-server-manually.md)