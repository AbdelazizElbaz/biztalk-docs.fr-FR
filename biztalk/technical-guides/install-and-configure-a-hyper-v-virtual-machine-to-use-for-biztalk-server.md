---
title: "Installation et configuration d’un ordinateur virtuel de Hyper-V pour une utilisation avec BizTalk Server | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 86add392-3cde-432d-95d6-c81d68716537
caps.latest.revision: "18"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 62e612ed35a20646f686bd178fad01771dbd2cce
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="installing-and-configuring-a-hyper-v-virtual-machine-for-use-with-biztalk-server"></a><span data-ttu-id="759ce-102">Installation et configuration d’un ordinateur virtuel de Hyper-V pour une utilisation avec BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="759ce-102">Installing and Configuring a Hyper-V Virtual Machine for use with BizTalk Server</span></span>
<span data-ttu-id="759ce-103">Cette rubrique fournit des recommandations pour l’installation et la configuration de BizTalk Server dans un environnement Hyper-V, y compris des recommandations pour l’installation et configuration de l’ordinateur virtuel Hyper-V et des recommandations pour l’installation de BizTalk Server sur un Machine virtuelle de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="759ce-103">This topic provides recommendations for installing and configuring BizTalk Server in a Hyper-V environment, including recommendations for installation and configuration of the Hyper-V virtual machine and recommendations for installing BizTalk Server on a Hyper-V virtual machine.</span></span>  
  
## <a name="installing-and-configuring-hyper-v"></a><span data-ttu-id="759ce-104">Installation et configuration d’Hyper-V</span><span class="sxs-lookup"><span data-stu-id="759ce-104">Installing and Configuring Hyper-V</span></span>  
 <span data-ttu-id="759ce-105">Avant d’installer Hyper-V, consultez [Nouveautés de Hyper-V dans Windows Server 2008 R2](http://go.microsoft.com/fwlink/?LinkID=202427).</span><span class="sxs-lookup"><span data-stu-id="759ce-105">Before installing Hyper-V, see [What's New in Hyper-V in Windows Server 2008 R2](http://go.microsoft.com/fwlink/?LinkID=202427).</span></span> <span data-ttu-id="759ce-106">Le guide « Microsoft Hyper-V Server 2008 R2 Getting Started » fournit des détails sur la façon d’installer et configurer [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="759ce-106">The “Microsoft Hyper-V Server 2008 R2 Getting Started” guide provides details about how to install and configure [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] Hyper-V.</span></span> <span data-ttu-id="759ce-107">Le guide est disponible à l’adresse [http://go.microsoft.com/fwlink/?LinkID=202431](http://go.microsoft.com/fwlink/?LinkID=202431).</span><span class="sxs-lookup"><span data-stu-id="759ce-107">The guide is available at [http://go.microsoft.com/fwlink/?LinkID=202431](http://go.microsoft.com/fwlink/?LinkID=202431).</span></span>  
  
 <span data-ttu-id="759ce-108">Document de « Instructions de réglage de performances pour Windows Server 2008 R2 » fournit des détails sur le réglage [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] et inclut une section se concentre spécifiquement sur Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="759ce-108">“The Performance Tuning Guidelines for Windows Server 2008 R2” document provides details on tuning [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] and includes a section specifically focused on Hyper-V.</span></span> <span data-ttu-id="759ce-109">Le document est disponible à l’adresse [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span><span class="sxs-lookup"><span data-stu-id="759ce-109">The document is available at [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span></span>  
  
### <a name="hyper-v-platform-prerequisites"></a><span data-ttu-id="759ce-110">Configuration requise pour Hyper-V plateforme</span><span class="sxs-lookup"><span data-stu-id="759ce-110">Hyper-V Platform Prerequisites</span></span>  
 <span data-ttu-id="759ce-111">Hyper-V est un rôle de serveur disponible pour toutes les éditions d’et 64 bits [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] sont 64 bits uniquement.</span><span class="sxs-lookup"><span data-stu-id="759ce-111">Hyper-V is a server role available for 64-bit and all editions of  [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] are 64-bit only.</span></span> <span data-ttu-id="759ce-112">En outre, le matériel physique doit prendre en charge la virtualisation d’assistance matérielle.</span><span class="sxs-lookup"><span data-stu-id="759ce-112">Additionally, the physical hardware must support hardware assisted virtualization.</span></span> <span data-ttu-id="759ce-113">Cela signifie que le processeur doit être compatible avec la technologie de virtualisation Intel (VT Intel) ou la technologie de virtualisation d’AMD-V (AMD), le BIOS doit prendre en charge la prévention de l’exécution des données (PED) et la fonctionnalité doit être activée.</span><span class="sxs-lookup"><span data-stu-id="759ce-113">This means the processor must be compatible with Intel Virtualization Technology (Intel VT) or AMD Virtualization (AMD-V) technology, the system BIOS must support Data Execution Prevention (DEP), and DEP must be enabled.</span></span> <span data-ttu-id="759ce-114">Plus précisément, vous devez activer le bit Intel XD (execute disable bit) ou le bit AMD NX (aucun bit execute).</span><span class="sxs-lookup"><span data-stu-id="759ce-114">Specifically, you must enable the Intel XD bit (execute disable bit) or AMD NX bit (no execute bit).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="759ce-115">Après l’activation de ces options dans le BIOS du système, désactiver l’ordinateur, puis redémarrez l’ordinateur pour vous assurer que ces paramètres sont appliqués.</span><span class="sxs-lookup"><span data-stu-id="759ce-115">After enabling these options in the system BIOS, turn off the computer completely and then restart the computer to ensure that these settings are applied.</span></span>  
  
#### <a name="determining-hardware-requirements"></a><span data-ttu-id="759ce-116">Déterminer la configuration matérielle requise</span><span class="sxs-lookup"><span data-stu-id="759ce-116">Determining Hardware Requirements</span></span>  
 <span data-ttu-id="759ce-117">En raison d’exigences de consolidation de serveurs, serveurs Hyper-V ont tendance à consommer plus d’UC et mémoire et nécessitent la bande passante d’e/s de disque que les serveurs physiques avec des charges de calcul comparables.</span><span class="sxs-lookup"><span data-stu-id="759ce-117">Due to the demands of server consolidation, Hyper-V servers tend to consume more CPU and memory, and require greater disk I/O bandwidth than physical servers with comparable computing loads.</span></span> <span data-ttu-id="759ce-118">Pour déployer un environnement qui répond aux attentes, tenez compte des facteurs ci-dessous pour déterminer la configuration matérielle requise exacte de votre serveur.</span><span class="sxs-lookup"><span data-stu-id="759ce-118">In order to deploy an environment that will meet expectations, consider the factors below to determine the exact hardware requirements of your server.</span></span>  
  
##### <a name="storage-configuration-options"></a><span data-ttu-id="759ce-119">Options de Configuration de stockage</span><span class="sxs-lookup"><span data-stu-id="759ce-119">Storage Configuration Options</span></span>  
 <span data-ttu-id="759ce-120">Le matériel de stockage doit fournir d’e/s de bande passante et de stockage une capacité suffisante pour répondre aux besoins actuels et futurs des ordinateurs virtuels que vous prévoyez d’héberger.</span><span class="sxs-lookup"><span data-stu-id="759ce-120">The storage hardware should provide sufficient I/O bandwidth and storage capacity to meet the current and future needs of the virtual machines that you plan to host.</span></span> <span data-ttu-id="759ce-121">Il existe un compromis lors du choix entre l’utilisation des capacités et les performances, qu'il peut fournir la configuration du stockage pour Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="759ce-121">There is a trade-off when choosing the storage configuration for Hyper-V between capacity usage and the performance it can provide.</span></span>  
  
 <span data-ttu-id="759ce-122">Lorsque vous planifiez la configuration de stockage, tenir compte des besoins de l’environnement que vous configurez.</span><span class="sxs-lookup"><span data-stu-id="759ce-122">When planning storage configuration, consider the requirements of the environment you are provisioning.</span></span> <span data-ttu-id="759ce-123">La configuration requise pour la production, de préproduction et environnements de développement peut varier considérablement.</span><span class="sxs-lookup"><span data-stu-id="759ce-123">The requirements for production, pre-production, and development environments may differ considerably.</span></span>  
  
 <span data-ttu-id="759ce-124">Si vous déployez une production [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] environnement sur Hyper-V, des performances peut être une condition essentielle.</span><span class="sxs-lookup"><span data-stu-id="759ce-124">If you are deploying a production [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] environment on Hyper-V, performance will be a key requirement.</span></span> <span data-ttu-id="759ce-125">Pour éviter la contention d’e/s sur les systèmes de production occupé de disque, installez les services d’intégration sur les système d’exploitation hôte et invité et configurer les disques pour les volumes de données avec le contrôleur SCSI synthétique.</span><span class="sxs-lookup"><span data-stu-id="759ce-125">To avoid disk I/O contention on busy production systems, install integration services on both the host and guest operating system and configure disks for data volumes with the synthetic SCSI controller.</span></span> <span data-ttu-id="759ce-126">Pour les charges d’e/s de stockage très importantes qui s’étendent sur plusieurs lecteurs de données, chaque disque dur virtuel doit être attaché à un contrôleur SCSI synthétique distinct pour meilleures performances globales.</span><span class="sxs-lookup"><span data-stu-id="759ce-126">For highly intensive storage I/O workloads that span multiple data drives, each VHD should be attached to a separate synthetic SCSI controller for better overall performance.</span></span> <span data-ttu-id="759ce-127">En outre, chaque disque dur virtuel doit être stocké sur des disques physiques distincts.</span><span class="sxs-lookup"><span data-stu-id="759ce-127">In addition, each VHD should be stored on separate physical disks.</span></span> <span data-ttu-id="759ce-128">Pour plus d’informations sur la configuration des disques pour les données des volumes avec le contrôleur SCSI synthétique consultez la section « Optimiser les performances de disque » de la rubrique [liste de vérification : optimisation des performances sur Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="759ce-128">For more information about configuring disks for data volumes with the synthetic SCSI controller see the “Optimize Disk Performance” section of the topic [Checklist: Optimizing Performance on Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span></span>  
  
 <span data-ttu-id="759ce-129">En règle générale, les environnements de développement ont des exigences de performances strictes étant donné que l’utilisation des ressources a tendance à être la principale priorité.</span><span class="sxs-lookup"><span data-stu-id="759ce-129">Typically, development environments do not have stringent performance requirements since maximizing resource utilization tends to be the main priority.</span></span> <span data-ttu-id="759ce-130">Pour les environnements de développement, les performances fournies lors de l’hébergement de plusieurs fichiers de disque dur virtuel sur un seul lecteur physique sont généralement acceptable.</span><span class="sxs-lookup"><span data-stu-id="759ce-130">For development environments the performance provided when hosting multiple VHD files on a single physical drive is generally acceptable.</span></span>  
  
 <span data-ttu-id="759ce-131">Hyper-V prend en charge différents types de disques de stockage.</span><span class="sxs-lookup"><span data-stu-id="759ce-131">Hyper-V supports several different types of storage disk options.</span></span> <span data-ttu-id="759ce-132">Chacune des options de stockage peut être attaché via un contrôleur IDE ou SCSI à l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="759ce-132">Each of the storage options can be attached via an IDE or SCSI controller to the machine.</span></span> <span data-ttu-id="759ce-133">Un avantage potentiel de l’utilisation du contrôleur SCSI sur le contrôleur IDE est qu’il ne fonctionneront correctement si les versions correctes du système d’exploitation des composants d’intégration ont été installées sur l’ordinateur virtuel invité.</span><span class="sxs-lookup"><span data-stu-id="759ce-133">A potential benefit of using the SCSI controller over the IDE controller is that it will only work correctly if the correct versions of the operating system integration components have been installed on the guest virtual machine.</span></span> <span data-ttu-id="759ce-134">Il s’agit d’une méthode simple pour s’assurer que les composants d’intégration de système d’exploitation sont installés sur le système d’exploitation invité.</span><span class="sxs-lookup"><span data-stu-id="759ce-134">This is a straightforward method for ensuring that correct operating system integration components are installed on the guest operating system.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="759ce-135">Contrairement aux versions précédentes de la technologie de virtualisation Microsoft, il n’existe aucune différence de performances entre l’utilisation d’un contrôleur IDE virtuel ou un contrôleur SCSI virtuel lors de l’accès aux disques durs virtuels.</span><span class="sxs-lookup"><span data-stu-id="759ce-135">Unlike previous versions of Microsoft virtualization technology, there is no performance difference between using a virtual IDE controller or a virtual SCSI controller when accessing virtual hard disks.</span></span>  
  
 <span data-ttu-id="759ce-136">Pour les activités en lecture-écriture intensives, telles que l’hébergement [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] bases de données, l’option de disque relais fournit de meilleures performances incrémentielles fixes du disque dur virtuel des disques (VHD).</span><span class="sxs-lookup"><span data-stu-id="759ce-136">For intensive read-write activities, such as hosting [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] databases, the passthrough disk option provides incremental performance advantages over fixed virtual hard drive (VHD) disks.</span></span> <span data-ttu-id="759ce-137">L’option de relais permet à l’ordinateur virtuel d’accéder directement au disque physique et contourne le système de fichiers NTFS de la partition racine, mais ne prend pas en charge certaines fonctionnalités de disques virtuels, tels que des captures instantanées d’ordinateur virtuel et le clustering prise en charge.</span><span class="sxs-lookup"><span data-stu-id="759ce-137">The passthrough option permits the virtual machine to have direct access to the physical disk and bypasses the NTFS file system in the root partition but does not support certain functionality of virtual disks, such as Virtual machine snapshots and clustering support.</span></span> <span data-ttu-id="759ce-138">Par conséquent, l’utilisation de la fonctionnalité de disque direct n’est pas recommandée dans un environnement BizTalk ou SQL Server, car les avantages de performance marginaux sont plus que par les fonctionnalités manquantes.</span><span class="sxs-lookup"><span data-stu-id="759ce-138">Therefore use of the passthrough disk feature is not recommended in a BizTalk or SQL Server environment because the marginal performance benefits are more than offset by the missing functionality.</span></span>  
  
 <span data-ttu-id="759ce-139">Le tableau suivant récapitule les avantages et inconvénients des options de stockage disponibles Hyper-V :.</span><span class="sxs-lookup"><span data-stu-id="759ce-139">The following table summarizes the advantages and disadvantages of available Hyper-V storage options:.</span></span>  
  
|<span data-ttu-id="759ce-140">**Type de stockage d’Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="759ce-140">**Hyper-V Storage Type**</span></span>|<span data-ttu-id="759ce-141">**Professionnels de l'**</span><span class="sxs-lookup"><span data-stu-id="759ce-141">**Pros**</span></span>|<span data-ttu-id="759ce-142">**Inconvénients**</span><span class="sxs-lookup"><span data-stu-id="759ce-142">**Cons**</span></span>|<span data-ttu-id="759ce-143">**Considérations pour BizTalk Server**</span><span class="sxs-lookup"><span data-stu-id="759ce-143">**Considerations for BizTalk Server**</span></span>|  
|-------------------------------|--------------|--------------|-------------------------------------------|  
|<span data-ttu-id="759ce-144">**Disques de taille fixe**</span><span class="sxs-lookup"><span data-stu-id="759ce-144">**Fixed size disks**</span></span>|<span data-ttu-id="759ce-145">Plus performant qu’un disque dur virtuel dynamique, car le fichier de disque dur virtuel est initialisé à sa taille maximale possible lorsqu’il est créé sur le disque dur physique.</span><span class="sxs-lookup"><span data-stu-id="759ce-145">Performs better than a dynamic VHD because the VHD file is initialized at its maximum possible size when it is created on the physical hard drive.</span></span><br /><br /> <span data-ttu-id="759ce-146">Cela rend la fragmentation inférieure probablement et, par conséquent, permet d’atténuer les scénarios où une seule e/s est fractionnée en plusieurs e/s.</span><span class="sxs-lookup"><span data-stu-id="759ce-146">This makes fragmentation less likely and, therefore, mitigates scenarios where a single I/O is split into multiple I/Os.</span></span> <span data-ttu-id="759ce-147">Cela a la surcharge du processeur la plus faible des types de disque dur virtuel, car les lectures et écritures en n’avez pas besoin rechercher le mappage du bloc.</span><span class="sxs-lookup"><span data-stu-id="759ce-147">This has the lowest CPU overhead of the VHD types because reads and writes do not need to look up the mapping of the block.</span></span>|<span data-ttu-id="759ce-148">Exige l’allocation du montant total d’espace disque initial.</span><span class="sxs-lookup"><span data-stu-id="759ce-148">Requires allocation of the full amount of disk space up-front.</span></span>|<span data-ttu-id="759ce-149">Utiliser des volumes de système d’exploitation sur [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] et [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="759ce-149">Use for operating system volumes on [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="759ce-150">**Important :** le disque de démarrage d’une partition d’invité Hyper-V doit être attaché à un contrôleur IDE.</span><span class="sxs-lookup"><span data-stu-id="759ce-150">**Important:**  The startup disk of a Hyper-V guest partition must be attached to an IDE contoller.</span></span>|  
|<span data-ttu-id="759ce-151">**Disques à extension dynamique**</span><span class="sxs-lookup"><span data-stu-id="759ce-151">**Dynamically expanding disks**</span></span>|<span data-ttu-id="759ce-152">La taille du fichier de disque dur virtuel augmente à la taille spécifiée lors de la création du disque, en plus de données sont stockés sur l’ordinateur virtuel lui-même.</span><span class="sxs-lookup"><span data-stu-id="759ce-152">The size of the VHD file increases to the size specified when creating the disk, as more data is stored on the virtual machine itself.</span></span> <span data-ttu-id="759ce-153">Cela permet d’optimiser l’utilisation du stockage disponible.</span><span class="sxs-lookup"><span data-stu-id="759ce-153">This accommodates the most efficient use of available storage.</span></span>|<span data-ttu-id="759ce-154">N’effectue pas ainsi que d’un disque dur virtuel de taille fixe.</span><span class="sxs-lookup"><span data-stu-id="759ce-154">Does not perform as well as a fixed size VHD.</span></span> <span data-ttu-id="759ce-155">Il s’agit, car les blocs dans le disque démarrer en tant que blocs réinitialisés mais ne sont pas sauvegardés par n’importe quel espace réel dans le fichier de disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="759ce-155">This is because the blocks in the disk start as zeroed blocks but are not backed by any actual space in the VHD file.</span></span> <span data-ttu-id="759ce-156">Lit un bloc de zéros non significatifs à partir de ces blocs de retournés.</span><span class="sxs-lookup"><span data-stu-id="759ce-156">Reads from such blocks return a block of zeros.</span></span> <span data-ttu-id="759ce-157">Lorsqu’un bloc est d’abord écrites dans, la pile de virtualisation doit allouer de l’espace dans le fichier de disque dur virtuel pour le bloc et ensuite mettre à jour les métadonnées correspondantes.</span><span class="sxs-lookup"><span data-stu-id="759ce-157">When a block is first written to, the virtualization stack must allocate space within the VHD file for the block and then update the corresponding metadata.</span></span> <span data-ttu-id="759ce-158">En outre chaque fois qu’un bloc existant est référencé le mappage de bloc doive être recherché dans les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="759ce-158">In addition to this every time an existing block is referenced the block mapping must be looked up in the metadata.</span></span> <span data-ttu-id="759ce-159">Cela augmente le nombre de lectures et les activités d’écriture qui provoque à son tour augmente l’utilisation du processeur.</span><span class="sxs-lookup"><span data-stu-id="759ce-159">This increases the number of read and write activities which in turn causes increased CPU utilization.</span></span><br /><br /> <span data-ttu-id="759ce-160">La croissance dynamique requiert également que l’administrateur du serveur analyser la capacité de disque pour vous assurer qu’il existe suffisamment de stockage de disque en tant que l’augmentation de la configuration requise du stockage.</span><span class="sxs-lookup"><span data-stu-id="759ce-160">The dynamic growth also requires that the server administrator monitor disk capacity to ensure that there is sufficient disk storage as the storage requirements increase.</span></span>|<span data-ttu-id="759ce-161">N’effectue pas ainsi que d’un disque dur virtuel de taille fixe.</span><span class="sxs-lookup"><span data-stu-id="759ce-161">Does not perform as well as a fixed size VHD.</span></span><br /><br /> <span data-ttu-id="759ce-162">Si les performances ne sont pas un critère important, par exemple dans un environnement de développement, cette option peut être une approprié pour les disques durs du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="759ce-162">If performance is not a concern, for instance in a development environment, this may be a suitable option for the operating system hard drives.</span></span><br /><br /> <span data-ttu-id="759ce-163">Entraîne un temps processeur supplémentaire en raison d’une recherche de mappage de bloc.</span><span class="sxs-lookup"><span data-stu-id="759ce-163">Causes additional CPU overhead due to block mapping lookup.</span></span>|  
|<span data-ttu-id="759ce-164">**Disques de différenciation**</span><span class="sxs-lookup"><span data-stu-id="759ce-164">**Differencing disks**</span></span>|<span data-ttu-id="759ce-165">Cela une configuration parent-enfant où le disque de différenciation stocke toutes les modifications apportées par rapport à un disque dur virtuel de base et le disque dur virtuel de base reste statique.</span><span class="sxs-lookup"><span data-stu-id="759ce-165">This a parent-child configuration where the differencing disk stores all changes relative to a base VHD and the base VHD remains static.</span></span> <span data-ttu-id="759ce-166">Par conséquent, uniquement les blocs qui sont différents du parent doivent être stockées dans les enfants de disque dur virtuel de différenciation.</span><span class="sxs-lookup"><span data-stu-id="759ce-166">Therefore only the blocks which are different from the parent need to be stored in the child differencing VHD.</span></span>|<span data-ttu-id="759ce-167">Peuvent dégrader les performances, car il est en lecture/écriture devoir accéder au disque dur virtuel fixe/dynamique parent, ainsi que le disque de différenciation.</span><span class="sxs-lookup"><span data-stu-id="759ce-167">Performance can degrade because read/writes need to access the fixed/dynamic parent VHD as well as the differencing disk.</span></span> <span data-ttu-id="759ce-168">Cela augmente l’utilisation du processeur et la charge d’e/s de disque.</span><span class="sxs-lookup"><span data-stu-id="759ce-168">This increases CPU utilization and disk I/O overhead.</span></span>|<span data-ttu-id="759ce-169">Une grande quantité de configuration spécifique de l’ordinateur est requise pour [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] installations et les fichiers de disque dur virtuel enfant peuvent augmenter considérablement ce qui réduirait les avantages de l’utilisation de cette configuration de disque.</span><span class="sxs-lookup"><span data-stu-id="759ce-169">A large amount of machine specific configuration is required for [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] installations and child VHD files may grow substantially which would minimize the benefits of using this disk configuration.</span></span> <span data-ttu-id="759ce-170">La lecture à partir de plusieurs disques durs virtuels dans ce scénario implique la surcharge d’e/s de disque et des UC supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="759ce-170">Reading from multiple VHD’s in this scenario incurs additional CPU and disk I/O overhead.</span></span>|  
|<span data-ttu-id="759ce-171">**Disques relais**</span><span class="sxs-lookup"><span data-stu-id="759ce-171">**Passthrough disks**</span></span>|<span data-ttu-id="759ce-172">Il s’agit des disques physiques qui sont définies sur *hors connexion* dans la partition racine et activer Hyper-V pour avoir un accès exclusif en lecture-écriture sur le disque physique.</span><span class="sxs-lookup"><span data-stu-id="759ce-172">These are physical disks which are set to *offline* in the root partition and enable Hyper-V to have exclusive read-write access to the physical disk.</span></span>|<span data-ttu-id="759ce-173">Nécessite un disque entièrement dédié ou un numéro d’unité logique pour pouvoir être allouée à une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="759ce-173">Requires a fully dedicated disk or LUN in order for it to be allocated to a virtual machine.</span></span><br /><br /> <span data-ttu-id="759ce-174">Un disque physique est plus difficile de déplacer entre des ordinateurs que les fichiers de disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="759ce-174">A physical disk is more difficult to move between machines than VHD files.</span></span>|<span data-ttu-id="759ce-175">Si votre [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance s’exécute sur Hyper-V, vous pouvez obtenir des améliorations de performances incrémentielles à l’aide de disques relais principal à l’aide de disques durs virtuels (VHD) fixes pour le [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] des volumes de données.</span><span class="sxs-lookup"><span data-stu-id="759ce-175">If your [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance is running on a Hyper-V, you may obtain incremental performance improvements by using passthrough disks over using fixed virtual hard disks (VHD) for the [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] data volumes.</span></span><br /><br /> <span data-ttu-id="759ce-176">Si vous hébergez local fichier les emplacements de réception sur [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] ou diffusion en continu sur le disque au cours du traitement des messages volumineux, vous pouvez obtenir des améliorations de performances incrémentielles à l’aide de disques relais à l’utilisation des disques durs virtuels (VHD).</span><span class="sxs-lookup"><span data-stu-id="759ce-176">If you are hosting local file receive locations on [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] or streaming large messages to disk during processing, you may obtain incremental performance improvements using passthrough disks over using fixed virtual hard disks (VHD).</span></span>|  
  
 <span data-ttu-id="759ce-177">Pour plus d’informations sur l’implémentation de disques et stockage avec Hyper-V, consultez [implémentation de disques et de stockage](http://go.microsoft.com/fwlink/?LinkID=142362) (http://go.microsoft.com/fwlink/?LinkID=142362).</span><span class="sxs-lookup"><span data-stu-id="759ce-177">For more information about implementing disks and storage with Hyper-V see [Implementing Disks and Storage](http://go.microsoft.com/fwlink/?LinkID=142362) (http://go.microsoft.com/fwlink/?LinkID=142362).</span></span>  
  
##### <a name="networking"></a><span data-ttu-id="759ce-178">Réseau</span><span class="sxs-lookup"><span data-stu-id="759ce-178">Networking</span></span>  
 [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="759ce-179">a tendance à présenter l’utilisation du réseau élevé.</span><span class="sxs-lookup"><span data-stu-id="759ce-179"> tends to exhibit high network utilization.</span></span> <span data-ttu-id="759ce-180">Par conséquent, lorsque les performances du réseau sont un problème, envisagez d’allouer une carte réseau physique distinct pour chaque ordinateur virtuel.</span><span class="sxs-lookup"><span data-stu-id="759ce-180">Therefore, when network performance is an issue, consider allocating a separate physical network card for each virtual machine.</span></span>  
  
 <span data-ttu-id="759ce-181">Lorsque vous configurez un ordinateur virtuel, assurez-vous d’utiliser la carte réseau au lieu de la carte réseau virtuelle héritée.</span><span class="sxs-lookup"><span data-stu-id="759ce-181">When configuring a virtual machine, ensure that you use the Network Adapter instead of the Legacy Network Adapter.</span></span> <span data-ttu-id="759ce-182">La carte réseau héritée est destinée aux systèmes d’exploitation qui ne prennent pas en charge les composants d’intégration.</span><span class="sxs-lookup"><span data-stu-id="759ce-182">The legacy network adapter is intended for operating systems that do not support integration components.</span></span>  
  
 <span data-ttu-id="759ce-183">Pour mesurer les performances réseau, utilisez le **« \Network Interface \Bytes/s »** et **\Network Interface (\*) \Output longueur de file d’attente** compteurs d’analyseur de performances sur l’ordinateur hôte d’exploitation système pour mesurer les performances globales de la carte réseau.</span><span class="sxs-lookup"><span data-stu-id="759ce-183">To measure network performance use the **“\Network Interface \Bytes Total/sec”** and the **\Network Interface(\*)\Output Queue Length** performance monitor counters on the host operating system to measure overall performance of the network card.</span></span> <span data-ttu-id="759ce-184">Si un réseau physique a été identifié comme étant occupé, utilisez le **» \Hyper-V carte de réseau virtuel (\*) \Bytes/sec «** se trouvent le compteur sur le système d’exploitation hôte pour identifier les cartes réseau de machine virtuelle génération d’une charge élevée.</span><span class="sxs-lookup"><span data-stu-id="759ce-184">If a physical network has been identified as being busy, use the **“\Hyper-V Virtual Network Adapter (\*)\Bytes/sec”** counter on the host operating system to identify which virtual machine network adapter(s) is/are generating high load.</span></span>  
  
 <span data-ttu-id="759ce-185">Pour plus d’informations sur l’évaluation des performances du réseau sur un environnement Hyper-V, consultez le **mesure les performances réseau** section de [liste de vérification : mesure des performances sur Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="759ce-185">For more information about evaluating network performance on a Hyper-V environment see the **Measuring Network Performance** section of [Checklist: Measuring Performance on Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md).</span></span>  
  
##### <a name="cpu"></a><span data-ttu-id="759ce-186">Unité centrale</span><span class="sxs-lookup"><span data-stu-id="759ce-186">CPU</span></span>  
 <span data-ttu-id="759ce-187">Hyper-V prend en charge différents nombres de processeurs virtuels pour les systèmes d’exploitation invités différents ; comme indiqué dans le tableau ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="759ce-187">Hyper-V supports different numbers of virtual processors for different guest operating systems; as summarized in the table below.</span></span> <span data-ttu-id="759ce-188">Pour allouer les ressources de processeur maximales pour [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], installez-le sur un [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] système d’exploitation invité, qui prend en charge quatre processeurs virtuels par machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="759ce-188">To allocate the maximum CPU resources for [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], install it on a [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] guest operating system,  which supports four virtual processors per virtual machine.</span></span>  
  
 <span data-ttu-id="759ce-189">Configurer une allocation de 1-1 de processeurs virtuels dans les systèmes d’exploitation invité avec des processeurs logiques disponibles pour le système d’exploitation hôte afin d’éviter les basculements excessifs de contexte.</span><span class="sxs-lookup"><span data-stu-id="759ce-189">Configure a 1-1 allocation of virtual processors in the guest operating system(s) to logical processors available to the host operating system to prevent excessive context switching.</span></span> <span data-ttu-id="759ce-190">Entre les processeurs de contexte excessifs entraîne une dégradation des performances.</span><span class="sxs-lookup"><span data-stu-id="759ce-190">Excessive context switching between processors will result in performance degradation.</span></span> <span data-ttu-id="759ce-191">Pour plus d’informations sur l’allocation de processeurs virtuels pour les processeurs logiques, consultez la section « Optimiser les performances du processeur » de la rubrique [liste de vérification : optimisation des performances sur Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="759ce-191">For more information about allocating virtual processors to logical processors, see the “Optimize Processor Performance” section of the topic [Checklist: Optimizing Performance on Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span></span>  
  
 <span data-ttu-id="759ce-192">Le « \Hyper-V processeur (_Total) logique de l’hyperviseur\\% Total exécution « compteur Analyseur de performances mesure l’utilisation des ressources globale de tous les ordinateurs invités et de l’hyperviseur sur l’ordinateur hôte Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="759ce-192">The “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” Performance Monitor counter measures the overall resource utilization of all guest machines and the hypervisor on the Hyper-V host.</span></span> <span data-ttu-id="759ce-193">Si cette valeur est supérieure à 90 %, le serveur est en cours d’exécution atteint sa capacité maximale ; allocation de processeurs virtuels supplémentaires pour les machines virtuelles dans ce scénario peuvent dégrader les performances globales du système et doivent être évitées.</span><span class="sxs-lookup"><span data-stu-id="759ce-193">If this value is above 90%, the server is running at maximum capacity; allocating additional virtual processors to virtual machines in this scenario can degrade overall system performance and should be avoided.</span></span> <span data-ttu-id="759ce-194">Pour plus d’informations sur l’utilisation des compteurs de performance Hyper-v, consultez le [évaluation des performances du serveur BizTalk sur Hyper-V](../technical-guides/evaluating-biztalk-server-performance-on-hyper-v.md) section de ce guide.</span><span class="sxs-lookup"><span data-stu-id="759ce-194">For further details on using the HyperV performance counters, see the [Evaluating BizTalk Server Performance on Hyper-V](../technical-guides/evaluating-biztalk-server-performance-on-hyper-v.md) section of this guide.</span></span>  
  
|<span data-ttu-id="759ce-195">Système d'exploitation</span><span class="sxs-lookup"><span data-stu-id="759ce-195">Operating system</span></span>|<span data-ttu-id="759ce-196">Limite du processeur virtuel</span><span class="sxs-lookup"><span data-stu-id="759ce-196">Virtual processor limit</span></span>|  
|----------------------|-----------------------------|  
|[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]<span data-ttu-id="759ce-197">.</span><span class="sxs-lookup"><span data-stu-id="759ce-197">.</span></span> <span data-ttu-id="759ce-198">Toutes les éditions de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] sont 64 bits uniquement.</span><span class="sxs-lookup"><span data-stu-id="759ce-198">All editions of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] are 64-bit only.</span></span>|<span data-ttu-id="759ce-199">4</span><span class="sxs-lookup"><span data-stu-id="759ce-199">4</span></span>|  
|[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]<span data-ttu-id="759ce-200">64 bits</span><span class="sxs-lookup"><span data-stu-id="759ce-200"> 64-bit</span></span>|<span data-ttu-id="759ce-201">4</span><span class="sxs-lookup"><span data-stu-id="759ce-201">4</span></span>|  
|[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]<span data-ttu-id="759ce-202">32 bits</span><span class="sxs-lookup"><span data-stu-id="759ce-202"> 32-bit</span></span>|<span data-ttu-id="759ce-203">4</span><span class="sxs-lookup"><span data-stu-id="759ce-203">4</span></span>|  
|<span data-ttu-id="759ce-204">Windows 7 64 bits</span><span class="sxs-lookup"><span data-stu-id="759ce-204">Windows 7 64-bit</span></span>|<span data-ttu-id="759ce-205">4</span><span class="sxs-lookup"><span data-stu-id="759ce-205">4</span></span>|  
|<span data-ttu-id="759ce-206">Windows 7 32 bits</span><span class="sxs-lookup"><span data-stu-id="759ce-206">Windows 7 32-bit</span></span>|<span data-ttu-id="759ce-207">4</span><span class="sxs-lookup"><span data-stu-id="759ce-207">4</span></span>|  
|<span data-ttu-id="759ce-208">Windows Vista 64 bits</span><span class="sxs-lookup"><span data-stu-id="759ce-208">Windows Vista 64-bit</span></span>|<span data-ttu-id="759ce-209">2</span><span class="sxs-lookup"><span data-stu-id="759ce-209">2</span></span>|  
|<span data-ttu-id="759ce-210">Windows Vista 32 bits</span><span class="sxs-lookup"><span data-stu-id="759ce-210">Windows Vista  32-bit</span></span>|<span data-ttu-id="759ce-211">2</span><span class="sxs-lookup"><span data-stu-id="759ce-211">2</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="759ce-212">Pour plus d’informations sur les systèmes d’exploitation invités pris en charge sur Hyper-V, consultez [http://go.microsoft.com/fwlink/?LinkID=118347](http://go.microsoft.com/fwlink/?LinkID=118347).</span><span class="sxs-lookup"><span data-stu-id="759ce-212">For more information about the guest operating systems that are supported on Hyper-V, see [http://go.microsoft.com/fwlink/?LinkID=118347](http://go.microsoft.com/fwlink/?LinkID=118347).</span></span>  
  
##### <a name="memory"></a><span data-ttu-id="759ce-213">Mémoire</span><span class="sxs-lookup"><span data-stu-id="759ce-213">Memory</span></span>  
 <span data-ttu-id="759ce-214">Le serveur physique requiert une mémoire suffisante pour la partition racine et toutes les machines virtuelles en cours d’exécution sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="759ce-214">The physical server requires enough memory for the root partition and any virtual machines running on the server.</span></span> <span data-ttu-id="759ce-215">Pendant le test, un minimum de 2 Go de mémoire a été alloué à la partition racine et le **Memory/Available Mbytes** compteur Analyseur de performances a été contrôlé afin de garantir aucune sollicitation de la mémoire a été rencontrée.</span><span class="sxs-lookup"><span data-stu-id="759ce-215">During testing, a minimum of 2GB of memory was allocated to the root partition and the **Memory/Available Mbytes** performance monitor counter was monitored to ensure no memory pressure was experienced.</span></span>  
  
 <span data-ttu-id="759ce-216">La quantité de mémoire qui doit être allouée à chaque ordinateur virtuel dans un [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] environnement dépend de la charge de travail et le type de traitement qui sera effectuée.</span><span class="sxs-lookup"><span data-stu-id="759ce-216">The amount of memory that should be allocated to each virtual machine in a [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] environment depends on the workload and type of processing that will be performed.</span></span> <span data-ttu-id="759ce-217">Il existe de nombreux facteurs qui affectent les besoins en mémoire de [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] , notamment :</span><span class="sxs-lookup"><span data-stu-id="759ce-217">There are many factors that affect memory requirements of  [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] including:</span></span>  
  
-   <span data-ttu-id="759ce-218">Taille des messages traités</span><span class="sxs-lookup"><span data-stu-id="759ce-218">Size of messages processed</span></span>  
  
-   <span data-ttu-id="759ce-219">Débit de messages</span><span class="sxs-lookup"><span data-stu-id="759ce-219">Throughput of messages</span></span>  
  
-   <span data-ttu-id="759ce-220">Conception de l’orchestration</span><span class="sxs-lookup"><span data-stu-id="759ce-220">Orchestration design</span></span>  
  
-   <span data-ttu-id="759ce-221">Traitement du pipeline</span><span class="sxs-lookup"><span data-stu-id="759ce-221">Pipeline processing</span></span>  
  
-   <span data-ttu-id="759ce-222">Nombre d’hôtes BizTalk que vous projetez d’exécuter sur l’ordinateur virtuel</span><span class="sxs-lookup"><span data-stu-id="759ce-222">Number of BizTalk hosts that you plan to run within the virtual machine</span></span>  
  
 <span data-ttu-id="759ce-223">Pour obtenir une liste complète des facteurs qui affectent la mémoire, consultez la section « Les facteurs de performances » de ce Guide d’optimisations de performances BizTalk Server à [http://go.microsoft.com/fwlink/?LinkId=122587](http://go.microsoft.com/fwlink/?LinkId=122587).</span><span class="sxs-lookup"><span data-stu-id="759ce-223">For a comprehensive list of factors that affect memory, see “The Performance Factors” section of the BizTalk Server Performance Optimizations Guide at [http://go.microsoft.com/fwlink/?LinkId=122587](http://go.microsoft.com/fwlink/?LinkId=122587).</span></span>  
  
 <span data-ttu-id="759ce-224">Analyse de façon proactive les **Memory/Available Mbytes** compteur à partir de chaque ordinateur virtuel et la partition racine lui-même.</span><span class="sxs-lookup"><span data-stu-id="759ce-224">Proactively monitor the **Memory/Available Mbytes** counter from within each virtual machine and the root partition itself.</span></span> <span data-ttu-id="759ce-225">Les instructions suivantes à partir de [liste de vérification : mesure des performances sur Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md) doit être utilisé pour déterminer s’il existe suffisamment de mémoire physique disponible pour la machine virtuelle et de la partition racine :</span><span class="sxs-lookup"><span data-stu-id="759ce-225">The following guidelines from [Checklist: Measuring Performance on Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md) should be used to determine whether there is enough available physical memory for the virtual machine and for the root partition:</span></span>  
  
-   <span data-ttu-id="759ce-226">50 % de mémoire disponible ou plus = sain</span><span class="sxs-lookup"><span data-stu-id="759ce-226">50% of free memory available or more = Healthy</span></span>  
  
-   <span data-ttu-id="759ce-227">25 % de mémoire disponible = analyse</span><span class="sxs-lookup"><span data-stu-id="759ce-227">25% of free memory available = Monitor</span></span>  
  
-   <span data-ttu-id="759ce-228">10 % de mémoire disponible = avertissement</span><span class="sxs-lookup"><span data-stu-id="759ce-228">10% of free memory available = Warning</span></span>  
  
-   <span data-ttu-id="759ce-229">Inférieure à 5 % de mémoire disponible = critique, performances seront affectées</span><span class="sxs-lookup"><span data-stu-id="759ce-229">Less than 5% of free memory available = Critical, performance will be adversely affected</span></span>  
  
#### <a name="choosing-root-operating-system-version"></a><span data-ttu-id="759ce-230">En choisissant l’option Version de système d’exploitation racine</span><span class="sxs-lookup"><span data-stu-id="759ce-230">Choosing Root Operating System Version</span></span>  
 <span data-ttu-id="759ce-231">Hyper-V est pris en charge sur un Server Core, ainsi que d’une installation complète de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="759ce-231">Hyper-V is supported on a Server Core as well as a full installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="759ce-232">Pour réduire la charge de la partition racine, installez Hyper-V sur une installation Server Core de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="759ce-232">To minimize the overhead of the root partition, install Hyper-V on a Server Core installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="759ce-233">Le rôle Hyper-V peut être géré à distance à partir du Gestionnaire Hyper-V sur un autre système.</span><span class="sxs-lookup"><span data-stu-id="759ce-233">The Hyper-V role can be managed remotely from the Hyper-V Manager on a different system.</span></span> <span data-ttu-id="759ce-234">Server Core fournit un plus petit disque et mémoire un profil, par conséquent, en laissant davantage de ressources disponibles pour les ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="759ce-234">Server Core provides a smaller disk and memory profile, therefore, leaving more resources available for virtual machines.</span></span> <span data-ttu-id="759ce-235">Pour plus d’informations sur l’option d’installation Server Core disponible pour [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], consultez [http://go.microsoft.com/fwlink/?LinkID=202439](http://go.microsoft.com/fwlink/?LinkID=202439).</span><span class="sxs-lookup"><span data-stu-id="759ce-235">For more information about the Server Core installation option available for [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], see [http://go.microsoft.com/fwlink/?LinkID=202439](http://go.microsoft.com/fwlink/?LinkID=202439).</span></span>  
  
 <span data-ttu-id="759ce-236">Si vous choisissez d’utiliser une installation complète de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], assurez-vous que la partition racine dédiée uniquement au rôle de serveur Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="759ce-236">If you choose to use a full installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], ensure that the root partition is dedicated only to the Hyper-V server role.</span></span> <span data-ttu-id="759ce-237">Rôles serveur supplémentaires en cours d’exécution consomme les ressources réseau, processeur, mémoire et disque et dégrader les performances.</span><span class="sxs-lookup"><span data-stu-id="759ce-237">Running additional server roles will consume memory, disk, processor, and network resources and will degrade performance.</span></span>  
  
#### <a name="creating-your-virtual-machines"></a><span data-ttu-id="759ce-238">Création de vos Machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="759ce-238">Creating Your Virtual Machines</span></span>  
 <span data-ttu-id="759ce-239">Après avoir installé et configuré le rôle de serveur Hyper-V, vous devez créer les ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="759ce-239">After you have installed and configured the Hyper-V server role, you need to create the virtual machines.</span></span> <span data-ttu-id="759ce-240">Avant cela, il est utile répondre aux questions suivantes :</span><span class="sxs-lookup"><span data-stu-id="759ce-240">Before doing this, it is useful to answer the following questions:</span></span>  
  
-   <span data-ttu-id="759ce-241">Quelle configuration de stockage va utiliser ?</span><span class="sxs-lookup"><span data-stu-id="759ce-241">What storage configuration will I use?</span></span>  
  
-   <span data-ttu-id="759ce-242">Le nombre de processeurs virtuel prises en charge par le système d’exploitation invité ?</span><span class="sxs-lookup"><span data-stu-id="759ce-242">How many virtual processors does the guest operating system support?</span></span>  
  
-   <span data-ttu-id="759ce-243">La quantité de mémoire est allouée à la machine virtuelle ?</span><span class="sxs-lookup"><span data-stu-id="759ce-243">How much memory will be allocated to the virtual machine?</span></span>  
  
-   <span data-ttu-id="759ce-244">Nombre d’ordinateurs virtuels puis-je exécuter sur mon serveur Hyper-V ?</span><span class="sxs-lookup"><span data-stu-id="759ce-244">How many virtual machines can I run on my Hyper-V Server?</span></span>  
  
-   <span data-ttu-id="759ce-245">Comment s’installer le système d’exploitation sur l’ordinateur ?</span><span class="sxs-lookup"><span data-stu-id="759ce-245">How will I install the operating system onto the machine?</span></span>  
  
 <span data-ttu-id="759ce-246">Pour plus d’informations sur la façon de créer et configurer des machines virtuelles, consultez [créer des ordinateurs virtuels](http://go.microsoft.com/fwlink/?LinkID=202440).</span><span class="sxs-lookup"><span data-stu-id="759ce-246">For more information about how to create and configure virtual machines, see [Create Virtual Machines](http://go.microsoft.com/fwlink/?LinkID=202440).</span></span>  
  
##### <a name="installing-the-base-operating-system"></a><span data-ttu-id="759ce-247">L’installation du système d’exploitation de Base</span><span class="sxs-lookup"><span data-stu-id="759ce-247">Installing the Base Operating System</span></span>  
 <span data-ttu-id="759ce-248">Toutes les options disponibles pour une installation de serveur physique sont disponibles dans Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="759ce-248">All the options available for a physical server installation are available in Hyper-V.</span></span> <span data-ttu-id="759ce-249">Un média CD/DVD-ROM de démarrage ou d’une image ISO peut être utilisée pour effectuer une installation manuelle.</span><span class="sxs-lookup"><span data-stu-id="759ce-249">A bootable CD/DVD-ROM media or an ISO image can be used to perform a manual installation.</span></span> <span data-ttu-id="759ce-250">Une installation réseau peut être effectuée si l’ordinateur virtuel a été configuré avec une carte réseau connectée au même réseau en tant que serveur qui héberge les images ISO.</span><span class="sxs-lookup"><span data-stu-id="759ce-250">A network installation can be performed if the virtual machine has been configured with a network adapter connected to the same network as a server that hosts the ISO images.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="759ce-251">Quelle que soit la méthode d’installation choisie, pour des performances optimales, qu'il est essentiel que les composants d’intégration de système d’exploitation est installé pour chaque ordinateur virtuel en cours d’exécution sous Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="759ce-251">Whichever installation method is chosen, for performance reasons it is critical the operating system integration components be installed for each virtual machine running under Hyper-V.</span></span> <span data-ttu-id="759ce-252">Les composants d’intégration fournissent un ensemble de pilotes et de services d’activation de l’ordinateur invité pour effectuer à l’aide de périphériques synthétiques.</span><span class="sxs-lookup"><span data-stu-id="759ce-252">The integration components provide a set of drivers and services that enable the guest machine to perform by using synthetic devices.</span></span> <span data-ttu-id="759ce-253">Les périphériques synthétiques évitez la nécessité de périphériques émulés, qui sont utilisés sur les systèmes d’exploitation qui ne prennent pas en charge les composants d’intégration.</span><span class="sxs-lookup"><span data-stu-id="759ce-253">Synthetic devices avoid the need for emulated devices, which are used on operating systems that do not support integration components.</span></span> <span data-ttu-id="759ce-254">Périphériques émulés peser supérieure système par rapport aux périphériques synthétiques.</span><span class="sxs-lookup"><span data-stu-id="759ce-254">Emulated devices incur greater system overhead compared to synthetic devices.</span></span>  
  
 <span data-ttu-id="759ce-255">Pour installer et configurer les ordinateurs utilisés dans cet atelier, une image de base initiale a été créée sur un disque dur virtuel de taille fixe.</span><span class="sxs-lookup"><span data-stu-id="759ce-255">To install and configure the machines used in this lab, an initial base image was created on a fixed size VHD.</span></span> <span data-ttu-id="759ce-256">Cela impliqué une installation manuelle de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="759ce-256">This involved a manual installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="759ce-257">Une fois que toutes les mises à jour appropriées ont été installés l’ordinateur virtuel de base a été mis en image à l’aide de sysprep utilitaire qui est installé avec Windows Server 2008, dans le répertoire %WINDIR%\system32\sysprep.</span><span class="sxs-lookup"><span data-stu-id="759ce-257">Once all appropriate updates had been installed the base virtual machine was imaged using sysprep utility that is installed with Windows Server 2008, in the %WINDIR%\system32\sysprep directory.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="759ce-258">L’exécution de Sysprep [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] a été installé et configuré sur le serveur peut être effectué via l’utilisation d’un fichier de réponses Sysprep et les scripts fournis avec [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span><span class="sxs-lookup"><span data-stu-id="759ce-258">Running Sysprep after [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] has been installed and configured on the server can be accomplished through the use of a Sysprep answer file and scripts provided with [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span> <span data-ttu-id="759ce-259">Ces exemples de scripts sont conçus pour une utilisation avec [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] installé sur [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="759ce-259">These sample scripts are designed for use with [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] installed on [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="759ce-260">Pour plus d’informations, consultez le [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] documentation en ligne.</span><span class="sxs-lookup"><span data-stu-id="759ce-260">For more information see the [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] online documentation.</span></span>  
  
## <a name="installing-and-configuring-biztalk-server"></a><span data-ttu-id="759ce-261">Installation et configuration de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="759ce-261">Installing and Configuring BizTalk Server</span></span>  
  
-   <span data-ttu-id="759ce-262">Pour réduire le temps nécessaire pour installer des ordinateurs virtuels, créer une image de base comprenant uniquement le système d’exploitation invité et les logiciels requis.</span><span class="sxs-lookup"><span data-stu-id="759ce-262">To minimize the time required to install virtual machines, create a base image consisting only of the guest operating system and software prerequisites.</span></span> <span data-ttu-id="759ce-263">Utiliser SysPrep pour préparer l’image de disque dur virtuel pour une réutilisation et puis baser toutes vos machines virtuelles (VM) sur ce disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="759ce-263">Use SysPrep to prepare the VHD image for reuse, and then base all your virtual machines (VMs) on this VHD.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="759ce-264">Avec [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], il est possible d’exécuter Sysprep sur une image de base *après* [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] a été installé et configuré sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="759ce-264">With [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], it is possible to run Sysprep against a base image *after*[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] has been installed and configured on the server.</span></span> <span data-ttu-id="759ce-265">Cela peut être accompli à l’aide d’un fichier de réponses Sysprep et les scripts fournis avec [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span><span class="sxs-lookup"><span data-stu-id="759ce-265">This can be accomplished through the use of a Sysprep answer file and scripts provided with [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span> <span data-ttu-id="759ce-266">Ces exemples de scripts sont conçus pour une utilisation avec [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] installé sur [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="759ce-266">These sample scripts are designed for use with [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] installed on   [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] .</span></span> <span data-ttu-id="759ce-267">Pour plus d’informations, consultez le [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] documentation en ligne.</span><span class="sxs-lookup"><span data-stu-id="759ce-267">For more information see the [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] online documentation.</span></span>  
    >   
    >  <span data-ttu-id="759ce-268">La référence de l’installation Windows sans assistance est disponible à l’adresse [http://go.microsoft.com/fwlink/?LinkId=142364](http://go.microsoft.com/fwlink/?LinkId=142364).</span><span class="sxs-lookup"><span data-stu-id="759ce-268">The Unattended Windows Setup Reference is available at [http://go.microsoft.com/fwlink/?LinkId=142364](http://go.microsoft.com/fwlink/?LinkId=142364).</span></span>  
  
-   <span data-ttu-id="759ce-269">Suivez les recommandations de la « lors de l’installation et configuration de BizTalk Server... »</span><span class="sxs-lookup"><span data-stu-id="759ce-269">Follow the recommendations in the “When Installing and Configuring BizTalk Server…”</span></span> <span data-ttu-id="759ce-270">section de la rubrique [liste de vérification : meilleures pratiques pour l’installation et configuration de BizTalk Server sur Hyper-V](../technical-guides/checklist-best-practices-to-install-and-configure-biztalk-server-on-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="759ce-270">section of the topic [Checklist: Best Practices for Installing and Configuring BizTalk Server on Hyper-V](../technical-guides/checklist-best-practices-to-install-and-configure-biztalk-server-on-hyper-v.md).</span></span>  
  
-   <span data-ttu-id="759ce-271">Pour plus d’informations sur la prise en charge de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] et [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] dans un environnement Hyper-V, voir [annexe c : BizTalk Server et la prise en charge de SQL Server Hyper-V](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md).</span><span class="sxs-lookup"><span data-stu-id="759ce-271">For information on the supportability of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] in a Hyper-V environment, see [Appendix C: BizTalk Server and SQL Server Hyper-V Supportability](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md).</span></span>