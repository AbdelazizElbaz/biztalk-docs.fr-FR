---
title: "Mise à l’échelle les bases de données BizTalk Server | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 18853ceb-7975-4c30-878f-6b162005f795
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e3116b7aae087e74ade089c8020a7d35c883cd2e
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="scaling-out-the-biztalk-server-databases"></a><span data-ttu-id="24f17-102">Mise à l’échelle des bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="24f17-102">Scaling Out the BizTalk Server Databases</span></span>
<span data-ttu-id="24f17-103">Pour fournir une haute disponibilité pour le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de données, configurez deux ordinateurs qui exécutent [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] ou [!INCLUDE[btsSQLServer2005](../includes/btssqlserver2005-md.md)] dans un cluster Windows.</span><span class="sxs-lookup"><span data-stu-id="24f17-103">To provide high availability for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, configure two computers that are running [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] or [!INCLUDE[btsSQLServer2005](../includes/btssqlserver2005-md.md)] in a Windows cluster.</span></span> <span data-ttu-id="24f17-104">Ces ordinateurs peuvent exécuter dans un actif/actif, actif/passif ou actif/actif/passif (nécessite trois ordinateurs) configuration pour la redondance et stocker des données sur un lecteur partagé (par exemple un volume RAID 1 + 0 baie de disques SCSI) ou de réseau de zone de stockage (SAN).</span><span class="sxs-lookup"><span data-stu-id="24f17-104">These computers can run in an active/active, active/passive, or active/active/passive (requires three computers) configuration for redundancy and can store data on a shared drive (such as a RAID 1+0 SCSI disk array) or storage area network (SAN).</span></span>  
  
 <span data-ttu-id="24f17-105">Si le [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] service devient indisponible pour une raison quelconque, le cluster de base de données transfère les ressources de l’ordinateur actif vers l’ordinateur passif.</span><span class="sxs-lookup"><span data-stu-id="24f17-105">If the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] service becomes unavailable for any reason, the database cluster transfers resources from the active computer to the passive computer.</span></span> <span data-ttu-id="24f17-106">Pendant ce processus de basculement, le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] instances de service rencontrer des échecs de connexion de base de données et relancent automatiquement pour les bases de données.</span><span class="sxs-lookup"><span data-stu-id="24f17-106">During this failover process, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] service instances experience database connection failures and automatically restart to reconnect to the databases.</span></span> <span data-ttu-id="24f17-107">L'ordinateur contenant la base de données indemne (ordinateur jusqu'alors passif) commence à traiter les connexions de la base de données après avoir pris en charge les ressources durant le basculement.</span><span class="sxs-lookup"><span data-stu-id="24f17-107">The functioning database computer (previously the passive computer) begins processing the database connections after assuming the resources during failover.</span></span>  
  
 <span data-ttu-id="24f17-108">Clustering du [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de données est décrite dans [Clustering le Databases2 serveur BizTalk](../technical-guides/clustering-the-biztalk-server-databases2.md).</span><span class="sxs-lookup"><span data-stu-id="24f17-108">Clustering the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases is discussed in [Clustering the BizTalk Server Databases2](../technical-guides/clustering-the-biztalk-server-databases2.md).</span></span> <span data-ttu-id="24f17-109">Cette section se concentre sur la montée en puissance parallèle le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de données pour fournir une haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="24f17-109">This section focuses on scaling out the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases to provide high availability.</span></span>  
  
## <a name="providing-high-availability-for-the-biztalk-messagebox-database"></a><span data-ttu-id="24f17-110">Offrant une haute disponibilité pour la base de données MessageBox de BizTalk</span><span class="sxs-lookup"><span data-stu-id="24f17-110">Providing High Availability for the BizTalk MessageBox Database</span></span>  
 <span data-ttu-id="24f17-111">Cette section fournit des informations sur la configuration de la base de données MessageBox de BizTalk pour la haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="24f17-111">This section provides information about to configure BizTalk MessageBox database for high availability.</span></span>  
  
### <a name="running-multiple-messagebox-databases"></a><span data-ttu-id="24f17-112">Exécution de plusieurs bases de données MessageBox</span><span class="sxs-lookup"><span data-stu-id="24f17-112">Running Multiple MessageBox Databases</span></span>  
 <span data-ttu-id="24f17-113">Pour améliorer l’évolutivité de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de données et à l’adresse utilisation élevée du processeur sur la base de données MessageBox [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] ordinateur, vous pouvez configurer [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] permettent de stocker des données entre plusieurs bases de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="24f17-113">To enhance the scalability of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases and to address high CPU utilization on the MessageBox database [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computer, you can configure [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to store data across multiple MessageBox databases.</span></span> <span data-ttu-id="24f17-114">Vous créez la première base de données MessageBox lorsque vous exécutez l'Assistant Configuration.</span><span class="sxs-lookup"><span data-stu-id="24f17-114">You create the first MessageBox database when you run the Configuration Wizard.</span></span> <span data-ttu-id="24f17-115">Cette base de données est la base de données principale MessageBox.</span><span class="sxs-lookup"><span data-stu-id="24f17-115">This MessageBox database is the master MessageBox database.</span></span> <span data-ttu-id="24f17-116">Il existe une seule base de données principale dans votre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] déploiement.</span><span class="sxs-lookup"><span data-stu-id="24f17-116">There is a single master MessageBox database in your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment.</span></span> <span data-ttu-id="24f17-117">Elle contient les informations d'abonnement principal et achemine les messages vers la base de données MessageBox appropriée.</span><span class="sxs-lookup"><span data-stu-id="24f17-117">The master MessageBox database contains the master subscription information and routes messages to the appropriate MessageBox database.</span></span> <span data-ttu-id="24f17-118">En règle générale, vous souhaitez dédier cette base de données master pour effectuer un routage uniquement et laisser les autres bases de données MessageBox effectuent le traitement.</span><span class="sxs-lookup"><span data-stu-id="24f17-118">Typically, you want to dedicate the master MessageBox database to do routing only and let the other MessageBox databases do the processing.</span></span> <span data-ttu-id="24f17-119">Pour rendre une base de données MessageBox pour effectuer le routage uniquement, sélectionnez **désactiver la publication des nouveaux messages** à partir des propriétés de MessageBox dans la console Administration de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="24f17-119">To make a MessageBox database to do routing only, select **Disable new message publication** from the MessageBox properties in BizTalk Administration console.</span></span>  
  
 <span data-ttu-id="24f17-120">Un exemple de flux de traitement de la base de données MessageBox est la suivante :</span><span class="sxs-lookup"><span data-stu-id="24f17-120">An example of MessageBox database processing flow is as follows:</span></span>  
  
1.  <span data-ttu-id="24f17-121">Lorsque la base de données principale MessageBox reçoit un nouveau message d'activation (une nouvelle instance d'un processus d'entreprise ou un message d'abonnement), elle l'envoie à la première base de données MessageBox disponible.</span><span class="sxs-lookup"><span data-stu-id="24f17-121">When the master MessageBox database receives a new activation message—a brand new instance of a business process or a subscription message—the master MessageBox database distributes the activation message to the next available MessageBox database.</span></span> <span data-ttu-id="24f17-122">Par exemple, lorsque vous disposez d'une base de données principale MessageBox et de deux bases de données secondaires, la base de données principale achemine le premier message d'activation vers la base de données secondaire n° 1, le second vers la base de données n° 2, le troisième vers la base de données n° 1 et ainsi de suite de manière alternée.</span><span class="sxs-lookup"><span data-stu-id="24f17-122">For example, if you have one master MessageBox database and two MessageBox databases, the master MessageBox database routes the first activation message to MessageBox database 1, the second activation message to MessageBox database 2, the third activation message to MessageBox database 1, and so on in a round-robin pattern.</span></span> <span data-ttu-id="24f17-123">La base de données principale utilise une logique intégrée pour équilibrer la charge et n'a donc pas besoin d'autre mécanisme d'équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="24f17-123">The master MessageBox database uses built-in logic to load balance, and does not need additional load-balancing mechanisms.</span></span>  
  
2.  <span data-ttu-id="24f17-124">Une fois que la base de données principale MessageBox a acheminé le message d'activation vers une base de données secondaire (la première, par exemple), le processus d'entreprise est mis en mémoire et exécuté.</span><span class="sxs-lookup"><span data-stu-id="24f17-124">After the master MessageBox database routes the activation message to a particular MessageBox database (for example, MessageBox database 1), the business process goes into memory and runs.</span></span>  
  
3.  <span data-ttu-id="24f17-125">Si le processus d’entreprise doit attendre un message et le temps d’attente est plus long que quelques secondes, le processus d’entreprise est rendue persistante dans la base de données MessageBox 1.</span><span class="sxs-lookup"><span data-stu-id="24f17-125">If the business process has to wait for a message, and the wait time is longer than several seconds, the business process is persisted back into MessageBox database 1.</span></span> <span data-ttu-id="24f17-126">Le processus d’entreprise est en attente d’un message de corrélation.</span><span class="sxs-lookup"><span data-stu-id="24f17-126">The business process is waiting for a correlation message.</span></span>  
  
4.  <span data-ttu-id="24f17-127">Lorsque le message de corrélation arrive à la base de données principale, le moteur de messagerie effectue une opération de recherche dans la base de données pour la base de données qui contient l’état du message de corrélation (dans cet exemple, MessageBox 1).</span><span class="sxs-lookup"><span data-stu-id="24f17-127">When the correlation message arrives at the master MessageBox database, the Message Engine does a lookup operation in the database for the MessageBox database that contains the state for the correlation message (in this example, MessageBox 1).</span></span> <span data-ttu-id="24f17-128">La base de données principale MessageBox remet le message à la base de données qui contient le processus d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="24f17-128">The master MessageBox database delivers the message to the MessageBox database that contains the business process.</span></span>  
  
5.  <span data-ttu-id="24f17-129">Le processus d’entreprise est remis en mémoire pour poursuivre le traitement jusqu'à sa fin ou jusqu'à ce qu’il doit attendre d’un autre message de corrélation.</span><span class="sxs-lookup"><span data-stu-id="24f17-129">The business process is brought back into memory to continue processing until it finishes or until it has to wait for another correlation message.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="24f17-130">magasins de tous les États dans les bases de données MessageBox, chaque base de données MessageBox contient des informations d’état de différents processus d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="24f17-130"> stores all the states in the MessageBox databases, and each MessageBox database contains state information for different business processes.</span></span> <span data-ttu-id="24f17-131">Pour une fiabilité accrue, vous devez mettre en cluster toutes les bases de données MessageBox, qu'il s'agisse de la base de données principale ou des bases secondaires.</span><span class="sxs-lookup"><span data-stu-id="24f17-131">For reliability, you must cluster all the MessageBox databases, including the master and secondary MessageBox databases.</span></span>  
  
 <span data-ttu-id="24f17-132">Pour configurer plusieurs bases de données MessageBox, vous utilisez la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration pour ajouter les ordinateurs qui exécutent [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] ou [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)].</span><span class="sxs-lookup"><span data-stu-id="24f17-132">To configure multiple MessageBox databases, you use the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to add the computers that are running [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] or [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)].</span></span> <span data-ttu-id="24f17-133">D'un point de vue administrateur, vous devez juste ajouter les nouvelles bases de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="24f17-133">From an administration perspective, you only have to add new MessageBox databases.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="24f17-134">gère la distribution alternée des messages d’activation et envoie des messages de corrélation pour les bases de données MessageBox corrects automatiquement.</span><span class="sxs-lookup"><span data-stu-id="24f17-134"> automatically handles the round-robin distribution of activation messages and sends correlation messages to the correct MessageBox databases.</span></span>  
  
 <span data-ttu-id="24f17-135">Si vous configurez plusieurs bases de données MessageBox dans votre environnement, vous devez créer au moins trois bases de données MessageBox pour votre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] groupe et vous devez désactiver la publication de messages sur la base de données principale.</span><span class="sxs-lookup"><span data-stu-id="24f17-135">If you configure multiple MessageBox databases in your environment you should create a minimum of three MessageBox databases for your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group and you should disable message publication on the master MessageBox database.</span></span> <span data-ttu-id="24f17-136">Cette recommandation est effectuée, car l’ajout de bases de données MessageBox supplémentaires entraîne une surcharge de la base de données MessageBox maître pour acheminer les messages entre les bases de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="24f17-136">This recommendation is made because adding additional MessageBox databases incurs overhead by the master MessageBox database for routing messages between the MessageBox databases.</span></span> <span data-ttu-id="24f17-137">Si vous configurez uniquement deux bases de données MessageBox la plupart des avantages offerts par la base de données MessageBox supplémentaire est décalée par la charge de mémoire consommée par la base de données principale MessageBox pour le routage des messages.</span><span class="sxs-lookup"><span data-stu-id="24f17-137">If you only configure two MessageBox databases then most of the benefit gained by the additional MessageBox database is offset by the overhead consumed by the master MessageBox database for message routing.</span></span>  
  
> [!IMPORTANT]  
>  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="24f17-138">magasins de tous les États dans les bases de données MessageBox, chaque base de données MessageBox contient des informations d’état de différents processus d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="24f17-138"> stores all the states in the MessageBox databases, and each MessageBox database contains state information for different business processes.</span></span> <span data-ttu-id="24f17-139">Pour une fiabilité accrue, vous devez mettre en cluster toutes les bases de données MessageBox, qu'il s'agisse de la base de données principale ou des bases secondaires.</span><span class="sxs-lookup"><span data-stu-id="24f17-139">For reliability, you must cluster all the MessageBox databases, including the master and secondary MessageBox databases.</span></span>  
  
### <a name="providing-high-availability-for-multiple-messagebox-databases"></a><span data-ttu-id="24f17-140">Configuration de la haute disponibilité pour plusieurs bases de données MessageBox</span><span class="sxs-lookup"><span data-stu-id="24f17-140">Providing High Availability for Multiple MessageBox Databases</span></span>  
 <span data-ttu-id="24f17-141">Lors de l’ajout de bases de données MessageBox à votre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] déploiement améliore l’évolutivité, il ne fournit pas de haute disponibilité, car chaque base de données MessageBox est unique et indépendante et qu’il s’agit potentiellement d’un seul point de défaillance pour votre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environnement.</span><span class="sxs-lookup"><span data-stu-id="24f17-141">While adding MessageBox databases to your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment improves scalability, it does not provide high availability because each MessageBox database is unique and independent and is potentially a single point of failure for your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span> <span data-ttu-id="24f17-142">Afin d'obtenir une redondance renforcée, vous devez configurer un cluster de serveurs pour chaque base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="24f17-142">To add redundancy involves configuring a server cluster for each MessageBox database.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="24f17-143">distribue les données entre les bases de données MessageBox, pour les bases de données ne pas partager des données ou fournir une redondance sans clustering de serveurs.</span><span class="sxs-lookup"><span data-stu-id="24f17-143"> distributes data across the multiple MessageBox databases, so the databases do not share data or otherwise provide redundancy without server clustering.</span></span>  
  
## <a name="providing-high-availability-for-the-biztalk-tracking-database"></a><span data-ttu-id="24f17-144">Configuration de la haute disponibilité pour la base de données des suivis BizTalk</span><span class="sxs-lookup"><span data-stu-id="24f17-144">Providing High Availability for the BizTalk Tracking Database</span></span>  
 <span data-ttu-id="24f17-145">Selon les besoins de votre déploiement, vous souhaiterez peut-être améliorer les performances de suivi en isolant la base de données des suivis BizTalk sur une autre [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] ordinateur et en créant un distinct hôte BizTalk dédié au suivi des hôtes.</span><span class="sxs-lookup"><span data-stu-id="24f17-145">Depending on the requirements of your particular deployment, you might want to enhance performance for tracking by isolating the BizTalk Tracking database onto a separate [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computer and by creating a separate BizTalk Host dedicated to host tracking.</span></span> <span data-ttu-id="24f17-146">La figure suivante illustre un hôte de suivi dédié avec deux instances d’hôte et les bases de données en cluster.</span><span class="sxs-lookup"><span data-stu-id="24f17-146">The following figure shows a dedicated tracking host with two host instances and clustered databases.</span></span>  
  
 <span data-ttu-id="24f17-147">![Montée en charge les bases de données de suivi](../technical-guides/media/4fc1d448-2a6c-4cea-ac17-96c1263dfb68.gif "4fc1d448-2a6c-4cea-ac17-96c1263dfb68")</span><span class="sxs-lookup"><span data-stu-id="24f17-147">![Scaling out the tracking databases](../technical-guides/media/4fc1d448-2a6c-4cea-ac17-96c1263dfb68.gif "4fc1d448-2a6c-4cea-ac17-96c1263dfb68")</span></span>  
  
 <span data-ttu-id="24f17-148">Si votre déploiement a un débit élevé et implique le suivi d’un grand nombre de données de ces messages, la surcharge de suivi peut consommer beaucoup de ressources sur l’ordinateur qui est en cours d’exécution [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="24f17-148">If your deployment has high throughput and involves tracking lots of data for these messages, the tracking overhead could potentially consume lots of resources on the computer that is running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="24f17-149">Si cette situation se produit et continue d’un taux élevé de messages entrants, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] atteint un point où il ne peut pas traiter les nouveaux messages, car les ressources requises pour effectuer le suivi des messages sont supérieures aux ressources requises pour exécuter l’autre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] composants (par exemple, la réception des messages et de les conserver la base de données MessageBox).</span><span class="sxs-lookup"><span data-stu-id="24f17-149">If this situation occurs and a high rate of incoming messages continues, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] reaches a point where it cannot process new messages because the resources required to track messages are greater than the resources required to run the other [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] components (such as receiving messages and persisting them to the MessageBox database).</span></span>  
  
 <span data-ttu-id="24f17-150">Afin d'améliorer les performances et la sécurité de votre déploiement, il est recommandé de consacrer un hôte ne contenant aucun autre élément (emplacements de réception, orchestrations, pipelines, etc.) au suivi et de désactiver le suivi dans les hôtes de réception, de traitement et d'envoi.</span><span class="sxs-lookup"><span data-stu-id="24f17-150">To improve performance and security, we recommend that you dedicate a host for tracking that does not contain any other items (such as receive locations, orchestrations, or pipelines) and that you disable tracking from the receiving, processing, and sending hosts.</span></span> <span data-ttu-id="24f17-151">Pour rendre l'hôte de suivi hautement disponible, créez plusieurs instances pour cet hôte.</span><span class="sxs-lookup"><span data-stu-id="24f17-151">To provide high availability for the tracking host, create more than one host instance of the tracking host.</span></span> <span data-ttu-id="24f17-152">Pour plus d’informations sur la création d’un hôte de suivi, consultez [la création d’un nouvel hôte](http://go.microsoft.com/fwlink/?LinkId=156825) (http://go.microsoft.com/fwlink/?LinkId=156825) dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] aide.</span><span class="sxs-lookup"><span data-stu-id="24f17-152">For more information about creating a tracking host, see [How to Create a New Host](http://go.microsoft.com/fwlink/?LinkId=156825) (http://go.microsoft.com/fwlink/?LinkId=156825) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
 <span data-ttu-id="24f17-153">Pour chaque base de données MessageBox, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] utilise uniquement une instance de l'hôte de suivi afin de placer les messages de la base de données MessageBox dans la base de données des suivis BizTalk (BizTalkDTADb).</span><span class="sxs-lookup"><span data-stu-id="24f17-153">For each MessageBox database, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] uses only one tracking host instance to move messages from the MessageBox database to the BizTalk Tracking database (BizTalkDTADb).</span></span> <span data-ttu-id="24f17-154">Si des ordinateurs supplémentaires exécutent des instances de l’hôte de suivi, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] s’ajuste automatiquement à la gestion de chaque base de données MessageBox sur une instance distincte de l’hôte de suivi.</span><span class="sxs-lookup"><span data-stu-id="24f17-154">If additional computers run instances of the tracking host, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] automatically scales out the handling of each MessageBox database to a separate instance of the tracking host.</span></span> <span data-ttu-id="24f17-155">Si le nombre de bases de données MessageBox est supérieur au nombre d'instances de l'hôte de suivi, une ou plusieurs instances de l'hôte de suivi fonctionnent pour plusieurs bases de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="24f17-155">If the number of MessageBox databases is larger than the number of tracking host instances, one or more tracking host instances will service more than one MessageBox database.</span></span>  
  
 <span data-ttu-id="24f17-156">Pour fournir une haute disponibilité pour la base de données des suivis BizTalk, utilisez le Clustering Windows pour configurer les deux ordinateurs de la base de données qui sont en cours d’exécution [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] ou [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] dans une configuration actif/passif.</span><span class="sxs-lookup"><span data-stu-id="24f17-156">To provide high availability for the BizTalk Tracking database, use Windows Clustering to configure two database computers that are running [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] or [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] in an active/passive configuration.</span></span>  
  
## <a name="providing-high-availability-for-the-bam-databases"></a><span data-ttu-id="24f17-157">Configuration de la haute disponibilité pour des bases de données BAM</span><span class="sxs-lookup"><span data-stu-id="24f17-157">Providing High Availability for the BAM Databases</span></span>  
 <span data-ttu-id="24f17-158">*L’analyse BAM* (BAM) assure la visibilité des processus d’entreprise indépendamment de l’implémentation informatique ou sur une implémentation informatique hétérogène.</span><span class="sxs-lookup"><span data-stu-id="24f17-158">*Business Activity Monitoring* (BAM) provides visibility into business processes independent of the IT implementation or across a heterogeneous IT implementation.</span></span> <span data-ttu-id="24f17-159">L’analyse BAM [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] bases de données (base de données de schémas en étoile BAM, base de données d’importation principale BAM et base de données des archives BAM) et la base de données analyse BAM stockent les données d’activité d’entreprise sont différentes de données d’analyse opérationnelle.</span><span class="sxs-lookup"><span data-stu-id="24f17-159">The BAM [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] databases (BAM Star Schema database, BAM Primary Import database, and BAM Archive database) and the BAM Analysis database store the business activity data that is different from the operational monitoring data.</span></span> <span data-ttu-id="24f17-160">Le diagramme suivant illustre l’infrastructure de base de données BAM.</span><span class="sxs-lookup"><span data-stu-id="24f17-160">The following diagram shows the BAM database infrastructure.</span></span>  
  
 <span data-ttu-id="24f17-161">![Infrastructure de base de données BAM](../technical-guides/media/769c3b7c-fe16-4260-967e-6af003c4f08d.gif "769c3b7c-fe16-4260-967e-6af003c4f08d")</span><span class="sxs-lookup"><span data-stu-id="24f17-161">![BAM database infrastructure](../technical-guides/media/769c3b7c-fe16-4260-967e-6af003c4f08d.gif "769c3b7c-fe16-4260-967e-6af003c4f08d")</span></span>  
  
 <span data-ttu-id="24f17-162">Afin de vous assurer que votre infrastructure BAM est hautement disponible, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="24f17-162">To make sure your BAM infrastructure is highly available, do the following:</span></span>  
  
-   <span data-ttu-id="24f17-163">**Mettre en cluster la base de données d’importation principale BAM et de la base de données analyse BAM.**</span><span class="sxs-lookup"><span data-stu-id="24f17-163">**Cluster the BAM Primary Import database and the BAM Analysis database.**</span></span> <span data-ttu-id="24f17-164">La base de données d'importation principale BAM constitue le cœur du système BAM (Business Activity Monitoring).</span><span class="sxs-lookup"><span data-stu-id="24f17-164">The BAM Primary Import database is the center of the Business Activity Monitoring system.</span></span> <span data-ttu-id="24f17-165">Il est donc important qu'elle soit hautement disponible par le biais du clustering Windows et que vous respectiez bien les deux recommandations suivantes afin d'éviter qu'elle n'arrive à saturation.</span><span class="sxs-lookup"><span data-stu-id="24f17-165">It is therefore important that you make this database highly available by using Windows Clustering and that you follow the next two recommendations to prevent this database from filling up.</span></span> <span data-ttu-id="24f17-166">La base de données Analyse BAM est une base de données Analysis Services stockant les données et dont les analystes d'entreprise se servent pour créer des agrégations d'activité et des cubes OLAP. Tout temps d'arrêt de cette base de données a donc des conséquences sur la productivité.</span><span class="sxs-lookup"><span data-stu-id="24f17-166">The BAM Analysis database is an Analysis Services database that stores the data that business analysts use to build activity aggregations and OLAP cubes, and therefore any downtime of this database affects their productivity.</span></span> <span data-ttu-id="24f17-167">Pendant que vous n’êtes pas obligé de cluster de la base de données des archives BAM, nous vous recommandons de surveiller les erreurs dans le journal des événements lors de l’exécution des packages SQL Server Integration Services (SSIS) pour vous assurer que les données ont été correctement transférées et contrôler la taille de la base de données afin que vous pouvez la remplacer avant qu’il remplit les.</span><span class="sxs-lookup"><span data-stu-id="24f17-167">While you do not have to cluster the BAM Archive database, we recommend that you monitor the event log for errors when the SQL Server Integration Services (SSIS) packages run to make sure the data has been transferred successfully, and to monitor the size of the database so that you can replace it before it fills up.</span></span>  
  
-   <span data-ttu-id="24f17-168">**Définissez une fenêtre en ligne.**</span><span class="sxs-lookup"><span data-stu-id="24f17-168">**Define an online window.**</span></span> <span data-ttu-id="24f17-169">Pour autoriser des meilleures performances et éviter les temps d’arrêt, BAM partitionne les données dans la base de données d’importation principale BAM dans des tables en fonction de l’horodatage lorsque l’activité a été terminée.</span><span class="sxs-lookup"><span data-stu-id="24f17-169">To allow for better performance and avoid downtime, BAM partitions the data in the BAM Primary Import database into tables based on the timestamp when the activity was completed.</span></span> <span data-ttu-id="24f17-170">Le composant BAM réalise cette opération en remplaçant régulièrement la table remplie par une table vide de format identique.</span><span class="sxs-lookup"><span data-stu-id="24f17-170">BAM achieves this by regularly swapping the completed table with another empty table of identical format.</span></span> <span data-ttu-id="24f17-171">Les activités supplémentaires terminées sont ensuite placées dans la nouvelle partition (table) tandis que l'analyse BAM conserve les anciennes partitions pendant la période indiquée dans la fenêtre en ligne.</span><span class="sxs-lookup"><span data-stu-id="24f17-171">After BAM does this, the additional completed activities go into the new partition (table), while BAM keeps the old partitions for the time defined in the online window.</span></span> <span data-ttu-id="24f17-172">Il faut définir une telle fenêtre afin de vous assurer que le nombre de partitions de la base de données d'importation principale BAM ne devient pas trop important.</span><span class="sxs-lookup"><span data-stu-id="24f17-172">You must define an online window to make sure the number of partitions in the BAM Primary Import database does not grow too large.</span></span> <span data-ttu-id="24f17-173">Pour plus d’informations sur la planification en ligne de windows, consultez [d’archivage principal de base de données données](http://go.microsoft.com/fwlink/?LinkId=156826) (http://go.microsoft.com/fwlink/?LinkId=156826) dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] aide.</span><span class="sxs-lookup"><span data-stu-id="24f17-173">For more information about scheduling online windows, see [Archiving Primary Import Database Data](http://go.microsoft.com/fwlink/?LinkId=156826) (http://go.microsoft.com/fwlink/?LinkId=156826) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
-   <span data-ttu-id="24f17-174">**Planifier des packages SSIS pour s’exécuter périodiquement.**</span><span class="sxs-lookup"><span data-stu-id="24f17-174">**Schedule SSIS packages to run periodically.**</span></span> <span data-ttu-id="24f17-175">La définition d'une fenêtre en ligne garantit que votre base de données d'importation principale BAM n'arrive pas à saturation à cause d'anciennes partitions d'activité.</span><span class="sxs-lookup"><span data-stu-id="24f17-175">Defining an online window makes sure your BAM Primary Import database does not fill up with old activity partitions.</span></span> <span data-ttu-id="24f17-176">Vous devez également planifier des packages SSIS pour s’exécuter périodiquement pour créer une nouvelle partition pour les données d’activité et déplacer les données à partir d’anciennes partitions de la base de données d’importation principale BAM dans la base de données des archives BAM.</span><span class="sxs-lookup"><span data-stu-id="24f17-176">You must also schedule SSIS packages to run periodically to create a new partition for the activity data and to move the data from the old partitions in the BAM Primary Import database into the BAM Archive database.</span></span> <span data-ttu-id="24f17-177">Pour plus d’informations sur la planification des packages SSIS, consultez [planification des Packages SQL Server Integration Services](http://go.microsoft.com/fwlink/?LinkId=156827) (http://go.microsoft.com/fwlink/?LinkId=156827) dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] aide.</span><span class="sxs-lookup"><span data-stu-id="24f17-177">For more information about scheduling SSIS packages, see [Scheduling SQL Server Integration Services Packages](http://go.microsoft.com/fwlink/?LinkId=156827) (http://go.microsoft.com/fwlink/?LinkId=156827) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
-   <span data-ttu-id="24f17-178">**Soigneusement sélectionner de petits ensembles d’éléments de données (points de contrôle) et évitez d’inclure des éléments de données inutiles lors de la définition d’une activité.**</span><span class="sxs-lookup"><span data-stu-id="24f17-178">**Carefully choose small sets of data items (checkpoints), and avoid including unnecessary data items when defining an activity.**</span></span>  
  
-   <span data-ttu-id="24f17-179">**Comprendre les compromis entre les agrégations planifiées et en temps réel lorsque vous concevez vos agrégations.**</span><span class="sxs-lookup"><span data-stu-id="24f17-179">**Understand the trade-offs between scheduled and real-time aggregations when you design your aggregations.**</span></span> <span data-ttu-id="24f17-180">Les agrégations sont automatiquement gérées par [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] déclenche et avoir une latence zéro.</span><span class="sxs-lookup"><span data-stu-id="24f17-180">Real-time aggregations are automatically maintained by [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] triggers and have zero latency.</span></span> <span data-ttu-id="24f17-181">Ils sont parfaitement pour certains scénarios de faible latence critiques, mais elles entraînent une baisse chaque fois que les événements sont écrits dans la base de données d’importation principale BAM des performances.</span><span class="sxs-lookup"><span data-stu-id="24f17-181">They are ideal for some mission-critical low-latency scenarios, but they incur a performance cost whenever the events are being written to the BAM Primary Import database.</span></span> <span data-ttu-id="24f17-182">Agrégations planifiées s’appuient sur les packages SSIS planifiées cubes pour mettre à jour leurs données d’agrégation.</span><span class="sxs-lookup"><span data-stu-id="24f17-182">Scheduled aggregations rely on scheduled cubing SSIS packages to update their aggregation data.</span></span> <span data-ttu-id="24f17-183">Leur temps de latence est égale ou supérieure à l’intervalle de planification SSIS, mais ensemble, ils ont un impact sur les performances plus petites sur la base de données d’importation principale BAM.</span><span class="sxs-lookup"><span data-stu-id="24f17-183">Their latency is equal to or greater than the SSIS schedule interval, but overall they have a smaller performance impact on the BAM Primary Import database.</span></span>  
  
-   <span data-ttu-id="24f17-184">**Si vous choisissez d’agrégations planifiées, assurez-vous que vous planifiez des cubes pour SSIS pour exécuter plus fréquemment que SSIS d’archivage.**</span><span class="sxs-lookup"><span data-stu-id="24f17-184">**If you choose scheduled aggregations, make sure you schedule the cubing SSIS to run more frequently than the archiving SSIS.**</span></span> <span data-ttu-id="24f17-185">Il s’agit, car l’archivage SSIS ne déplacera pas les données d’activité qui a été traitées d’agrégation planifiée dans la base de données des archives BAM.</span><span class="sxs-lookup"><span data-stu-id="24f17-185">This is because the archiving SSIS will not move the activity data that has been processed for scheduled aggregation to the BAM Archive database.</span></span>  
  
-   <span data-ttu-id="24f17-186">**Activez le service de Bus d’événements BAM sur plusieurs ordinateurs pour obtenir des fonctionnalités de basculement.**</span><span class="sxs-lookup"><span data-stu-id="24f17-186">**Enable the BAM Event Bus service in multiple computers to obtain failover functionality.**</span></span>  
  
## <a name="providing-high-availability-for-the-other-biztalk-server-databases"></a><span data-ttu-id="24f17-187">Configuration de la haute disponibilité pour les autres bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="24f17-187">Providing High Availability for the Other BizTalk Server Databases</span></span>  
 <span data-ttu-id="24f17-188">Pour fournir une haute disponibilité pour les autres [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de données, configurez deux ordinateurs qui exécutent [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] ou [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] dans un cluster Windows.</span><span class="sxs-lookup"><span data-stu-id="24f17-188">To provide high availability for the other [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, configure two computers that are running [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] or [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] in a Windows cluster.</span></span> <span data-ttu-id="24f17-189">Ces ordinateurs peut s’exécuter dans une configuration actif/actif ou actif/passif pour la redondance et stocker des données sur un lecteur partagé (par exemple un volume RAID 1 + 0 baie de disques SCSI) ou de réseau de zone de stockage (SAN).</span><span class="sxs-lookup"><span data-stu-id="24f17-189">These computers can run in an active/active or active/passive configuration for redundancy and can store data on a shared drive (such as a RAID 1+0 SCSI disk array) or storage area network (SAN).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="24f17-190">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="24f17-190">See Also</span></span>  
 [<span data-ttu-id="24f17-191">Clustering du Databases2 de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="24f17-191">Clustering the BizTalk Server Databases2</span></span>](../technical-guides/clustering-the-biztalk-server-databases2.md)