---
title: "Optimiser les groupes de fichiers de base de données | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f7dbed4d-95d6-4a41-a69e-737a6f2f5a82
caps.latest.revision: "8"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6df4f1213ed35c06b14ae127cf0593abfdd8ff35
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/01/2017
---
# <a name="optimizing-filegroups-for-the-databases"></a><span data-ttu-id="dd767-102">Optimisation des groupes de fichiers pour les bases de données</span><span class="sxs-lookup"><span data-stu-id="dd767-102">Optimizing Filegroups for the Databases</span></span>
<span data-ttu-id="dd767-103">Fichier d’entrée/sortie (e/s) contention est souvent un facteur de limitation, ou goulot d’étranglement, dans un environnement BizTalk Server de production.</span><span class="sxs-lookup"><span data-stu-id="dd767-103">File input/output (I/O) contention is frequently a limiting factor, or bottleneck, in a production BizTalk Server environment.</span></span> <span data-ttu-id="dd767-104">BizTalk Server est une application qui consommée beaucoup les bases de données et à son tour, la base de données SQL Server utilisée par BizTalk Server est e/s de fichier très intensive.</span><span class="sxs-lookup"><span data-stu-id="dd767-104">BizTalk Server is a very database intensive application and in turn, the SQL Server database used by BizTalk Server is very file I/O intensive.</span></span>  
  
 <span data-ttu-id="dd767-105">Cette rubrique décrit comment tirer le meilleur parti de la fonctionnalité de groupes de fichiers de SQL Server pour réduire la fréquence de contention d’e/s de fichier et d’améliorer les performances globales d’une solution BizTalk Server et de fichiers.</span><span class="sxs-lookup"><span data-stu-id="dd767-105">This topic describes how to make optimal use of the files and filegroups feature of SQL Server to minimize the occurrence of file I/O contention and improve the overall performance of a BizTalk Server solution.</span></span>  
  
## <a name="overview"></a><span data-ttu-id="dd767-106">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="dd767-106">Overview</span></span>  
 <span data-ttu-id="dd767-107">Chaque solution BizTalk Server rencontrent finalement contention d’e/s de fichier augmentation du débit.</span><span class="sxs-lookup"><span data-stu-id="dd767-107">Every BizTalk Server solution will eventually encounter file I/O contention as throughput is increased.</span></span> <span data-ttu-id="dd767-108">Le sous-système d’e/s, ou le moteur de stockage, est un composant essentiel de toute base de données relationnelle.</span><span class="sxs-lookup"><span data-stu-id="dd767-108">The I/O subsystem, or storage engine, is a key component of any relational database.</span></span> <span data-ttu-id="dd767-109">L'implémentation réussie d'une base de données requiert généralement une planification soigneuse dès les premières phases d'un projet.</span><span class="sxs-lookup"><span data-stu-id="dd767-109">A successful database implementation typically requires careful planning at the early stages of a project.</span></span> <span data-ttu-id="dd767-110">Cette planification doit tenir compte des considérations sur les points suivants :</span><span class="sxs-lookup"><span data-stu-id="dd767-110">This planning should include consideration of the following issues:</span></span>  
  
-   <span data-ttu-id="dd767-111">Le type de disque à utiliser, tel que les périphériques RAID (Redundant Array of Independent Disks), par exemple.</span><span class="sxs-lookup"><span data-stu-id="dd767-111">What type of disk hardware to use, such as RAID (redundant array of independent disks) devices.</span></span> 
  
-   <span data-ttu-id="dd767-112">Comment répartir les données sur les disques à l’aide de fichiers et groupes de fichiers.</span><span class="sxs-lookup"><span data-stu-id="dd767-112">How to apportion data on the disks using files and filegroups.</span></span> <span data-ttu-id="dd767-113">Pour plus d’informations sur l’utilisation des fichiers et groupes de fichiers dans SQL Server, consultez [base de données et groupes de fichiers](https://docs.microsoft.com/sql/relational-databases/databases/database-files-and-filegroups).</span><span class="sxs-lookup"><span data-stu-id="dd767-113">For more information about using files and filegroups in SQL Server, see [Database Files and Filegroups](https://docs.microsoft.com/sql/relational-databases/databases/database-files-and-filegroups).</span></span>
  
-   <span data-ttu-id="dd767-114">Implémentation de la conception des index optimaux pour améliorer les performances lors de l’accès aux données.</span><span class="sxs-lookup"><span data-stu-id="dd767-114">Implementing the optimal index design for improving performance when accessing data.</span></span> <span data-ttu-id="dd767-115">Pour plus d’informations sur la conception d’index, consultez [conception des index](https://docs.microsoft.com/sql/relational-databases/sql-server-index-design-guide).</span><span class="sxs-lookup"><span data-stu-id="dd767-115">For more information about designing indexes, see [Designing Indexes](https://docs.microsoft.com/sql/relational-databases/sql-server-index-design-guide).</span></span>
  
-   <span data-ttu-id="dd767-116">Comment définir les paramètres de configuration SQL Server pour des performances optimales.</span><span class="sxs-lookup"><span data-stu-id="dd767-116">How to set SQL Server configuration parameters for optimal performance.</span></span> <span data-ttu-id="dd767-117">Pour plus d’informations sur la définition des paramètres de configuration optimale pour SQL Server, consultez [les Options de Configuration de serveur](https://docs.microsoft.com/sql/database-engine/configure-windows/server-configuration-options-sql-server).</span><span class="sxs-lookup"><span data-stu-id="dd767-117">For more information about setting optimal configuration parameters for SQL Server, see [Server Configuration Options](https://docs.microsoft.com/sql/database-engine/configure-windows/server-configuration-options-sql-server).</span></span> 
  
 <span data-ttu-id="dd767-118">Un des principaux objectifs de création de BizTalk Server est de garantir qu’un message est **jamais** perdues.</span><span class="sxs-lookup"><span data-stu-id="dd767-118">One of the primary design goals of BizTalk Server is to ensure that a message is **never** lost.</span></span> <span data-ttu-id="dd767-119">Afin de limiter le risque de perdre des messages, messages sont souvent écrits dans la base de données MessageBox que le message est traité.</span><span class="sxs-lookup"><span data-stu-id="dd767-119">In order to mitigate the possibility of message loss, messages are frequently written to the MessageBox database as the message is processed.</span></span> <span data-ttu-id="dd767-120">Lorsque des messages sont traités par une Orchestration, le message est écrit dans la base de données MessageBox à chaque point de persistance dans l’orchestration.</span><span class="sxs-lookup"><span data-stu-id="dd767-120">When messages are processed by an Orchestration, the message is written to the MessageBox database at every persistence point in the orchestration.</span></span> <span data-ttu-id="dd767-121">Ces points de persistance provoquent la MessageBox écrire le message et l’état sur le disque physique.</span><span class="sxs-lookup"><span data-stu-id="dd767-121">These persistence points cause the MessageBox to write the message and related state to physical disk.</span></span> <span data-ttu-id="dd767-122">À des débits plus importants, cette persistance peut entraîner contention de disque considérable et peut potentiellement devenir un goulot d’étranglement.</span><span class="sxs-lookup"><span data-stu-id="dd767-122">At higher throughputs, this persistence can result in considerable disk contention and can potentially become a bottleneck.</span></span>  
  
 <span data-ttu-id="dd767-123">Rendre optimale d’utiliser des fichiers et fonctionnalité de groupes de fichiers dans SQL Server a été indiquée pour résoudre les goulots d’étranglement des e/s de fichier et d’améliorer les performances globales dans les solutions BizTalk Server efficacement.</span><span class="sxs-lookup"><span data-stu-id="dd767-123">Making optimal use of the files and filegroups feature in SQL Server has been shown to effectively address File IO bottlenecks and improve overall performance in BizTalk Server solutions.</span></span> <span data-ttu-id="dd767-124">Cette optimisation doit être effectuée par un administrateur de base de données SQL Server expérimenté et uniquement après que tous les bases de données BizTalk Server ont été correctement sauvegardés.</span><span class="sxs-lookup"><span data-stu-id="dd767-124">This optimization should only be done by an experienced SQL Server database administrator and only after all BizTalk Server databases have been properly backed up.</span></span> <span data-ttu-id="dd767-125">Cette optimisation doit être effectuée sur tous les ordinateurs SQL Server dans l’environnement BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="dd767-125">This optimization should be performed on all SQL Server computers in the BizTalk Server environment.</span></span>  
  
 <span data-ttu-id="dd767-126">Groupes de fichiers et fichiers de SQL Server peuvent être utilisées pour améliorer les performances de la base de données, car cette fonctionnalité permet de créer une base de données sur plusieurs disques, contrôleurs de disque ou (baie redondante de disques indépendants) systèmes RAID.</span><span class="sxs-lookup"><span data-stu-id="dd767-126">SQL Server files and filegroups can be utilized to improve database performance because this functionality allows a database be created across multiple disks, multiple disk controllers, or RAID (redundant array of independent disks) systems.</span></span> <span data-ttu-id="dd767-127">Par exemple, si votre ordinateur est équipé de quatre disques, vous pouvez créer une base de données comprenant trois fichiers de données et un fichier journal que vous distribuerez à raison d'un fichier par disque.</span><span class="sxs-lookup"><span data-stu-id="dd767-127">For example, if your computer has four disks, you can create a database that is made up of three data files and one log file, with one file on each disk.</span></span> <span data-ttu-id="dd767-128">Comme l’accès aux données, quatre têtes de lecture/écriture peuvent accéder simultanément aux données en parallèle.</span><span class="sxs-lookup"><span data-stu-id="dd767-128">As data is accessed, four read/write heads can concurrently access the data in parallel.</span></span> <span data-ttu-id="dd767-129">Cela accélère considérablement les opérations de base de données.</span><span class="sxs-lookup"><span data-stu-id="dd767-129">This speeds up database operations significantly.</span></span> <span data-ttu-id="dd767-130">Pour plus d’informations sur l’implémentation des solutions matérielles pour les disques de SQL Server, consultez « Base de données de performances » dans la documentation en ligne de SQL Server à [http://go.microsoft.com/fwlink/?LinkID=71419](http://go.microsoft.com/fwlink/?LinkID=71419).</span><span class="sxs-lookup"><span data-stu-id="dd767-130">For more information about implementing hardware solutions for SQL Server disks, see “Database Performance” in the SQL Server Books online at [http://go.microsoft.com/fwlink/?LinkID=71419](http://go.microsoft.com/fwlink/?LinkID=71419).</span></span>  
  
 <span data-ttu-id="dd767-131">En outre, les fichiers et groupes de fichiers activer placement des données, car les tables peuvent être créés dans les groupes de fichiers spécifiques.</span><span class="sxs-lookup"><span data-stu-id="dd767-131">Additionally, files and filegroups enable data placement, because tables can be created in specific filegroups.</span></span> <span data-ttu-id="dd767-132">Cela améliore les performances, car toutes les e/s de fichier pour une table donnée peuvent être dirigées vers un disque spécifique.</span><span class="sxs-lookup"><span data-stu-id="dd767-132">This improves performance, because all file I/O for a given table can be directed at a specific disk.</span></span> <span data-ttu-id="dd767-133">Par exemple, une table beaucoup utilisée peut être placée dans un fichier dans un groupe de fichiers situé sur un disque, et les autres tables moins sollicitées dans la base de données peuvent se trouver sur différents fichiers dans un autre groupe stocké sur un deuxième disque.</span><span class="sxs-lookup"><span data-stu-id="dd767-133">For example, a heavily used table can be placed on a file in a filegroup, located on one disk, and the other less heavily accessed tables in the database can be located on different files in another filegroup, located on a second disk.</span></span>  
  
 <span data-ttu-id="dd767-134">Goulots d’étranglement des e/s de fichier sont décrites en détail considérable dans [les goulots d’étranglement au niveau de la base de données](../technical-guides/bottlenecks-in-the-database-tier.md).</span><span class="sxs-lookup"><span data-stu-id="dd767-134">File IO bottlenecks are discussed in considerable detail in [Bottlenecks in the Database Tier](../technical-guides/bottlenecks-in-the-database-tier.md).</span></span> <span data-ttu-id="dd767-135">Le symptôme le plus courant que les e/s de fichier (e/s disque) est un goulot d’étranglement est la valeur du compteur « Longueur de file d’attente de disque : moyenne du disque physique ».</span><span class="sxs-lookup"><span data-stu-id="dd767-135">The most common indicator that File I/O (Disk I/O) is a bottleneck is the value of the “Physical Disk:Average Disk Queue Length” counter.</span></span> <span data-ttu-id="dd767-136">Lorsque la valeur du compteur « Longueur de file d’attente de disque : moyenne du disque physique » est supérieure à environ 3 pour tout disque donné sur les serveurs SQL, e/s de fichier est probablement un goulot d’étranglement.</span><span class="sxs-lookup"><span data-stu-id="dd767-136">When the value of the “Physical Disk:Average Disk Queue Length” counter is greater than about 3 for any given disk on any of the SQL Servers, then file I/O is likely a bottleneck.</span></span>  
  
 <span data-ttu-id="dd767-137">Si l’application de l’optimisation de fichier ou groupe de fichiers ne résout pas un problème de goulot d’étranglement d’e/s de fichier, il peut être nécessaire d’augmenter le débit du sous-système de disque en ajoutant physiques supplémentaires ou des lecteurs de SAN.</span><span class="sxs-lookup"><span data-stu-id="dd767-137">If applying file or filegroup optimization doesn't resolve a file I/O bottleneck problem, then it may be necessary to increase the throughput of the disk subsystem by adding additional physical or SAN drives.</span></span>  
  
 <span data-ttu-id="dd767-138">Cette rubrique décrit comment appliquer manuellement des fichiers et des optimisations, mais ces optimisations peuvent également être scriptées.</span><span class="sxs-lookup"><span data-stu-id="dd767-138">This topic describes how to manually apply file and filegroup optimizations but these optimizations can also be scripted.</span></span> <span data-ttu-id="dd767-139">Un exemple de script SQL est fourni à la fin de cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="dd767-139">A sample SQL script is provided at the end of this topic.</span></span> <span data-ttu-id="dd767-140">Il est important de noter que ce script doit être modifiée pour prendre en charge le fichier, le groupe de fichiers et la configuration de disque utilisé par les bases de données SQL Server pour une solution BizTalk Server donnée.</span><span class="sxs-lookup"><span data-stu-id="dd767-140">It is important to note that this script would need to be modified to accommodate the file, filegroup, and disk configuration used by the SQL Server database(s) for any given BizTalk Server solution.</span></span>  
  
 
## <a name="databases-created-with-a-default-biztalk-server-configuration"></a><span data-ttu-id="dd767-141">Bases de données créées avec la configuration de BizTalk Server par défaut</span><span class="sxs-lookup"><span data-stu-id="dd767-141">Databases created with a default BizTalk Server configuration</span></span>  
 <span data-ttu-id="dd767-142">Selon les fonctionnalités sont activées lors de la configuration de BizTalk Server, jusqu'à 13 différentes bases de données peut-être être créé dans SQL Server et de toutes ces bases de données sont créés dans le groupe de fichiers par défaut.</span><span class="sxs-lookup"><span data-stu-id="dd767-142">Depending on which features are enabled when configuring BizTalk Server, up to 13 different databases may be created in SQL Server and all of these databases are created in the default file group.</span></span> <span data-ttu-id="dd767-143">Le groupe de fichiers par défaut pour SQL Server est le groupe de fichiers primaire, sauf si le groupe de fichiers par défaut est modifié à l’aide de la commande ALTER DATABASE.</span><span class="sxs-lookup"><span data-stu-id="dd767-143">The default filegroup for SQL Server is the PRIMARY filegroup unless the default filegroup is changed by using the ALTER DATABASE command.</span></span> <span data-ttu-id="dd767-144">Le tableau ci-dessous répertorie les bases de données qui sont créés dans SQL Server si toutes les fonctionnalités sont activées lors de la configuration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="dd767-144">The table below lists the databases that are created in SQL Server if all features are enabled when configuring BizTalk Server.</span></span>  
  
### <a name="biztalk-server-databases"></a><span data-ttu-id="dd767-145">Bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="dd767-145">BizTalk Server Databases</span></span>  
  
||||  
|-|-|-|  
|<span data-ttu-id="dd767-146">**Base de données**</span><span class="sxs-lookup"><span data-stu-id="dd767-146">**Database**</span></span>|<span data-ttu-id="dd767-147">**Nom de base de données par défaut**</span><span class="sxs-lookup"><span data-stu-id="dd767-147">**Default Database Name**</span></span>|<span data-ttu-id="dd767-148">**Description**</span><span class="sxs-lookup"><span data-stu-id="dd767-148">**Description**</span></span>|  
|<span data-ttu-id="dd767-149">Base de données de configuration</span><span class="sxs-lookup"><span data-stu-id="dd767-149">Configuration database</span></span>|<span data-ttu-id="dd767-150">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="dd767-150">BizTalkMgmtDb</span></span>|<span data-ttu-id="dd767-151">La centrale de méta-informations stocker toutes les instances de BizTalk Server dans le groupe BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="dd767-151">The central meta-information store for all instances of BizTalk Server in the BizTalk Server group.</span></span>|  
|<span data-ttu-id="dd767-152">Base de données MessageBox de BizTalk</span><span class="sxs-lookup"><span data-stu-id="dd767-152">BizTalk MessageBox database</span></span>|<span data-ttu-id="dd767-153">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="dd767-153">BizTalkMsgBoxDb</span></span>|<span data-ttu-id="dd767-154">Stocke les prédicats d’abonnement.</span><span class="sxs-lookup"><span data-stu-id="dd767-154">Stores subscriptions predicates.</span></span> <span data-ttu-id="dd767-155">Il est une plateforme hôte et conserve les files d’attente et les tables d’état de chaque hôte de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="dd767-155">It is a host platform, and keeps queues and state tables for each BizTalk Server host.</span></span> <span data-ttu-id="dd767-156">La base de données MessageBox stocke également les messages et les propriétés de message.</span><span class="sxs-lookup"><span data-stu-id="dd767-156">The MessageBox database also stores the messages and message properties.</span></span>|  
|<span data-ttu-id="dd767-157">Base de données des suivis BizTalk</span><span class="sxs-lookup"><span data-stu-id="dd767-157">BizTalk Tracking database</span></span>|<span data-ttu-id="dd767-158">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="dd767-158">BizTalkDTADb</span></span>|<span data-ttu-id="dd767-159">Stocke les données suivies par le moteur de suivis BizTalk Server d’analyse de fonctionnement et d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="dd767-159">Stores business and health monitoring data tracked by the BizTalk Server tracking engine.</span></span>|  
|<span data-ttu-id="dd767-160">Base de données d'analyse BAM</span><span class="sxs-lookup"><span data-stu-id="dd767-160">BAM Analysis database</span></span>|<span data-ttu-id="dd767-161">BAMAnalysis</span><span class="sxs-lookup"><span data-stu-id="dd767-161">BAMAnalysis</span></span>|<span data-ttu-id="dd767-162">Base de données SQL Server Analysis Services qui conserve les données historiques agrégées des activités d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="dd767-162">SQL Server Analysis Services database that keeps the aggregated historical data for Business Activities.</span></span>|  
|<span data-ttu-id="dd767-163">Base de données de schémas en étoile BAM</span><span class="sxs-lookup"><span data-stu-id="dd767-163">BAM Star Schema database</span></span>|<span data-ttu-id="dd767-164">BAMStarSchema</span><span class="sxs-lookup"><span data-stu-id="dd767-164">BAMStarSchema</span></span>|<span data-ttu-id="dd767-165">Transforme les données collectées à partir de l’analyse BAM pour traitement OLAP.</span><span class="sxs-lookup"><span data-stu-id="dd767-165">Transforms the data collected from Business Activity Monitoring for OLAP Processing.</span></span> <span data-ttu-id="dd767-166">Cette base de données est requise lors de l’utilisation de la base de données analyse BAM.</span><span class="sxs-lookup"><span data-stu-id="dd767-166">This database is required when using the BAM Analysis database.</span></span>|  
|<span data-ttu-id="dd767-167">Base de données d'importation principale BAM</span><span class="sxs-lookup"><span data-stu-id="dd767-167">BAM Primary Import database</span></span>|<span data-ttu-id="dd767-168">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="dd767-168">BAMPrimaryImport</span></span>|<span data-ttu-id="dd767-169">Stocke les événements à partir des activités d’entreprise, puis des requêtes pour la progression et les données après les instances d’activité.</span><span class="sxs-lookup"><span data-stu-id="dd767-169">Stores the events from Business Activities and then queries for the progress and data after activity instances.</span></span> <span data-ttu-id="dd767-170">Cette base de données effectue également des agrégations en temps réel.</span><span class="sxs-lookup"><span data-stu-id="dd767-170">This database also performs real-time aggregations.</span></span>|  
|<span data-ttu-id="dd767-171">Base de données des archives de l'analyse BAM</span><span class="sxs-lookup"><span data-stu-id="dd767-171">BAM Archive database</span></span>|<span data-ttu-id="dd767-172">BAMArchive</span><span class="sxs-lookup"><span data-stu-id="dd767-172">BAMArchive</span></span>|<span data-ttu-id="dd767-173">Stocke les prédicats d’abonnement.</span><span class="sxs-lookup"><span data-stu-id="dd767-173">Stores subscription predicates.</span></span> <span data-ttu-id="dd767-174">La base de données des archives BAM permet de réduire l’accumulation des données d’activité d’entreprise dans la base de données d’importation principale BAM.</span><span class="sxs-lookup"><span data-stu-id="dd767-174">The BAM Archive database minimizes the accumulation of Business Activity data in the BAM Primary Import database.</span></span>|  
|<span data-ttu-id="dd767-175">Base de données SSO</span><span class="sxs-lookup"><span data-stu-id="dd767-175">SSO database</span></span>|<span data-ttu-id="dd767-176">SSODB</span><span class="sxs-lookup"><span data-stu-id="dd767-176">SSODB</span></span>|<span data-ttu-id="dd767-177">Stocke en toute sécurité la configuration des informations pour les emplacements de réception.</span><span class="sxs-lookup"><span data-stu-id="dd767-177">Securely stores the configuration information for receive locations.</span></span> <span data-ttu-id="dd767-178">Stocke des informations pour l’authentification unique applications associées à des applications, ainsi que les informations d’identification chiffrées de l’utilisateur pour toutes les applications associées.</span><span class="sxs-lookup"><span data-stu-id="dd767-178">Stores information for SSO affiliate applications, as well as the encrypted user credentials to all the affiliate applications.</span></span>|  
|<span data-ttu-id="dd767-179">Base de données du moteur de règles</span><span class="sxs-lookup"><span data-stu-id="dd767-179">Rule Engine database</span></span>|<span data-ttu-id="dd767-180">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="dd767-180">BizTalkRuleEngineDb</span></span>|<span data-ttu-id="dd767-181">Référentiel pour :</span><span class="sxs-lookup"><span data-stu-id="dd767-181">Repository for:</span></span><br /><br /> <span data-ttu-id="dd767-182">-Les stratégies, qui sont des ensembles de règles associées.</span><span class="sxs-lookup"><span data-stu-id="dd767-182">-   Policies, which are sets of related rules.</span></span><br /><span data-ttu-id="dd767-183">-Les vocabulaires, qui sont des collections de noms conviviaux spécifique à un domaine pour référencer des données dans les règles.</span><span class="sxs-lookup"><span data-stu-id="dd767-183">-   Vocabularies, which are collections of user-friendly, domain-specific names for data references in rules.</span></span>|  
|<span data-ttu-id="dd767-184">Base de données de suivi Analysis Server Administration</span><span class="sxs-lookup"><span data-stu-id="dd767-184">Tracking Analysis Server Administration database</span></span>|<span data-ttu-id="dd767-185">BizTalkAnalysisDb</span><span class="sxs-lookup"><span data-stu-id="dd767-185">BizTalkAnalysisDb</span></span>|<span data-ttu-id="dd767-186">Stocke à la fois les cubes OLAP d’analyse de fonctionnement et d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="dd767-186">Stores both business and health monitoring OLAP cubes.</span></span>|  
  
## <a name="separation-of-data-files-and-log-files"></a><span data-ttu-id="dd767-187">Séparation des fichiers de données et fichiers journaux</span><span class="sxs-lookup"><span data-stu-id="dd767-187">Separation of data files and log files</span></span>  
 <span data-ttu-id="dd767-188">Comme indiqué ci-dessus, une configuration de BizTalk Server par défaut place la base de données MessageBox dans un seul fichier dans le groupe de fichiers par défaut.</span><span class="sxs-lookup"><span data-stu-id="dd767-188">As noted above, a default BizTalk Server configuration places the MessageBox Database into a single file in the default filegroup.</span></span> <span data-ttu-id="dd767-189">Par défaut, les journaux de transaction et de données pour la base de données MessageBox sont placés sur le même lecteur et le chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="dd767-189">By default, the data and transaction logs for the MessageBox database are placed on the same drive and path.</span></span> <span data-ttu-id="dd767-190">Pour cela, pour prendre en charge les systèmes avec un seul disque.</span><span class="sxs-lookup"><span data-stu-id="dd767-190">This is done to accommodate systems with a single disk.</span></span> <span data-ttu-id="dd767-191">Une configuration de fichier unique/groupe de fichiers/disque est **pas optimales** dans un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="dd767-191">A single file/filegroup/disk configuration is **not optimal** in a production environment.</span></span> <span data-ttu-id="dd767-192">Pour des performances optimales, les fichiers de données et fichiers journaux doivent être placés sur des disques distincts.</span><span class="sxs-lookup"><span data-stu-id="dd767-192">For optimal performance, the data files and log files should be placed on separate disks.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="dd767-193">Les fichiers journaux ne font jamais partie d'un groupe de fichiers.</span><span class="sxs-lookup"><span data-stu-id="dd767-193">Log files are never part of a filegroup.</span></span> <span data-ttu-id="dd767-194">L'espace qui leur est réservé est géré indépendamment de l'espace réservé aux données.</span><span class="sxs-lookup"><span data-stu-id="dd767-194">Log space is managed separately from data space.</span></span>  
  
## <a name="the-8020-rule-of-distributing-biztalk-server-databases"></a><span data-ttu-id="dd767-195">La règle des 80/20 de la distribution des bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="dd767-195">The 80/20 rule of distributing BizTalk Server databases</span></span>  
 <span data-ttu-id="dd767-196">La principale source de conflits dans la plupart des solutions BizTalk Server, soit en raison de la contention d’e/s disque ou de contention de la base de données, est la base de données MessageBox de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="dd767-196">The main source of contention in most BizTalk Server solutions, either because of disk I/O contention or database contention, is the BizTalk Server MessageBox database.</span></span> <span data-ttu-id="dd767-197">Cela est vrai dans les scénarios à la fois unique et multi-MessageBox.</span><span class="sxs-lookup"><span data-stu-id="dd767-197">This is true in both single and multi-MessageBox scenarios.</span></span> <span data-ttu-id="dd767-198">Il est raisonnable de penser que 80 % de la valeur de la distribution des bases de données BizTalk est dérivée d’optimiser les fichiers de données MessageBox et le fichier journal.</span><span class="sxs-lookup"><span data-stu-id="dd767-198">It is reasonable to assume that as much as 80% of the value of distributing BizTalk databases will be derived from optimizing the MessageBox data files and log file.</span></span> <span data-ttu-id="dd767-199">L’exemple de scénario détaillée ci-dessous est axé sur l’optimisation des fichiers de données de base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="dd767-199">The sample scenario detailed below is focused on optimizing the data files for a MessageBox database.</span></span> <span data-ttu-id="dd767-200">Ces étapes peuvent ensuite être suivis pour les autres bases de données si nécessaire, par exemple, si la solution requiert un suivi complet, alors la base de données de suivi peut également être optimisé.</span><span class="sxs-lookup"><span data-stu-id="dd767-200">These steps can then be followed for other databases as needed, for example, if the solution requires extensive tracking, then the Tracking database can also be optimized.</span></span>  
  
## <a name="manually-adding-files-to-the-messagebox-database-step-by-step"></a><span data-ttu-id="dd767-201">Ajout manuel de fichiers à la base de données MessageBox, étape par étape</span><span class="sxs-lookup"><span data-stu-id="dd767-201">Manually adding files to the MessageBox database, step-by-step</span></span>  
 <span data-ttu-id="dd767-202">Cette section décrit les étapes à suivre pour ajouter manuellement des fichiers à la base de données MessageBox.</span><span class="sxs-lookup"><span data-stu-id="dd767-202">This section describes the steps that can be followed to manually add files to the MessageBox database.</span></span> <span data-ttu-id="dd767-203">Dans cet exemple, trois groupes de fichiers sont ajoutés et un fichier est ajouté à chaque groupe de fichiers pour distribuer les fichiers de la MessageBox sur plusieurs disques.</span><span class="sxs-lookup"><span data-stu-id="dd767-203">In this example three filegroups are added and then a file is added to each filegroup to distribute the files for the MessageBox across multiple disks.</span></span>   
  
> [!NOTE]  
>  <span data-ttu-id="dd767-204">À des fins de tests de performances pour ce guide, les groupes de fichiers ont été optimisées via l’utilisation d’un script qui sera publié dans le cadre du Guide des optimisations de performances de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="dd767-204">For purposes of the performance testing done for this guide, filegroups were optimized through the use of a script which will be published as part of the BizTalk Server Performance Optimizations Guide.</span></span> <span data-ttu-id="dd767-205">Les étapes ci-dessous sont fournis uniquement à des fins de référence.</span><span class="sxs-lookup"><span data-stu-id="dd767-205">The steps below are provided for reference purposes only.</span></span>  
  
### <a name="manually-adding-files-to-the-messagebox-database-on-sql-server"></a><span data-ttu-id="dd767-206">Ajout manuel de fichiers à la base de données MessageBox sur SQL Server</span><span class="sxs-lookup"><span data-stu-id="dd767-206">Manually adding files to the MessageBox database on SQL Server</span></span>
  
1. <span data-ttu-id="dd767-207">Ouvrez **SQL Server Management Studio** pour afficher les **se connecter au serveur** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="dd767-207">Open **SQL Server Management Studio** to display the **Connect to Server** dialog box.</span></span>  
  
     <span data-ttu-id="dd767-208">![Écran de connexion d’Administration SQL Server](../technical-guides/media/641a03f4-362c-4dde-8c9d-ac313d8881e3.gif "641a03f4-362c-4dde-8c9d-ac313d8881e3")</span><span class="sxs-lookup"><span data-stu-id="dd767-208">![SQL Server Administration login screen](../technical-guides/media/641a03f4-362c-4dde-8c9d-ac313d8881e3.gif "641a03f4-362c-4dde-8c9d-ac313d8881e3")</span></span>  
  
2.  <span data-ttu-id="dd767-209">Dans le **nom du serveur** champ le **se connecter au serveur** boîte de dialogue, entrez le nom de l’instance de SQL Server qui héberge les bases de données MessageBox de BizTalk Server, puis cliquez sur le **se connecter**  bouton pour afficher la **Microsoft SQL Server Management Studio** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="dd767-209">In the **Server name** field of the **Connect to Server** dialog box, enter the name of the SQL Server instance that houses the BizTalk Server MessageBox databases, and then click the **Connect** button to display the **Microsoft SQL Server Management Studio** dialog box.</span></span>  
  
     <span data-ttu-id="dd767-210">Dans le **l’Explorateur d’objets** volet de SQL Server Management Studio, développez **bases de données** pour afficher les bases de données pour cette instance de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="dd767-210">In the **Object Explorer** pane of SQL Server Management Studio, expand **Databases** to view the databases for this instance of SQL Server.</span></span>  
  
     <span data-ttu-id="dd767-211">![SQL Server Management Studio, l’Explorateur d’objets](../technical-guides/media/81f13912-fedc-48c3-9669-c18863e637b1.gif "81f13912-fedc-48c3-9669-c18863e637b1")</span><span class="sxs-lookup"><span data-stu-id="dd767-211">![SQL Server Management Studio, Object Explorer](../technical-guides/media/81f13912-fedc-48c3-9669-c18863e637b1.gif "81f13912-fedc-48c3-9669-c18863e637b1")</span></span>  
  
3.  <span data-ttu-id="dd767-212">Avec le bouton droit de la base de données pour laquelle ajouter les fichiers, puis cliquez sur **propriétés** pour afficher les **propriétés de la base de données** boîte de dialogue de la base de données.</span><span class="sxs-lookup"><span data-stu-id="dd767-212">Right-click the database for which to add the files, and then click **Properties** to display the **Database Properties** dialog box for the database.</span></span>  
  
     <span data-ttu-id="dd767-213">![Boîte de dialogue Propriétés de la base de données SQL Server](../technical-guides/media/82ae7c11-5b3a-4312-876c-70876abdd65c.gif "82ae7c11-5b3a-4312-876c-70876abdd65c")</span><span class="sxs-lookup"><span data-stu-id="dd767-213">![SQL Server Database Properties dialog box](../technical-guides/media/82ae7c11-5b3a-4312-876c-70876abdd65c.gif "82ae7c11-5b3a-4312-876c-70876abdd65c")</span></span>  
  
4.  <span data-ttu-id="dd767-214">Dans le **propriétés de la base de données** boîte de dialogue, sélectionnez le **groupes de fichiers** page.</span><span class="sxs-lookup"><span data-stu-id="dd767-214">In the **Database Properties** dialog box, select the **Filegroups** page.</span></span> <span data-ttu-id="dd767-215">Cliquez sur le **ajouter** bouton permettant de créer des groupes de fichiers supplémentaires pour les bases de données BizTalkMsgBoxDb.</span><span class="sxs-lookup"><span data-stu-id="dd767-215">Click the **Add** button to create additional filegroups for the BizTalkMsgBoxDb databases.</span></span> <span data-ttu-id="dd767-216">Dans l’exemple ci-dessous, trois groupes de fichiers supplémentaires sont ajoutés.</span><span class="sxs-lookup"><span data-stu-id="dd767-216">In the example below, three additional filegroups are added.</span></span>  
  
     <span data-ttu-id="dd767-217">![SQL Server, ajout de groupes de fichiers à une base de données](../technical-guides/media/6be47c0e-06c3-45d9-bce2-a42453da7d19.gif "6be47c0e-06c3-45d9-bce2-a42453da7d19")</span><span class="sxs-lookup"><span data-stu-id="dd767-217">![SQL Server, adding filegroups to a database](../technical-guides/media/6be47c0e-06c3-45d9-bce2-a42453da7d19.gif "6be47c0e-06c3-45d9-bce2-a42453da7d19")</span></span>  
  
5.  <span data-ttu-id="dd767-218">Dans la boîte de dialogue **Propriétés de la base de données** , sélectionnez la page **Fichiers** .</span><span class="sxs-lookup"><span data-stu-id="dd767-218">In the **Database Properties** dialog box, select the **Files** page.</span></span>  
  
     <span data-ttu-id="dd767-219">Cliquez sur le **ajouter** bouton pour créer des fichiers supplémentaires à ajouter aux groupes de fichiers, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="dd767-219">Click the **Add** button to create additional files to add to the filegroups, and then click **OK**.</span></span> <span data-ttu-id="dd767-220">La base de données MessageBox est désormais répartie sur plusieurs disques, qui fourniront un avantage significative des performances de configuration de disque unique.</span><span class="sxs-lookup"><span data-stu-id="dd767-220">The MessageBox database is now distributed across multiple disks, which will provide a significant performance advantage over a single disk configuration.</span></span>  
  
     <span data-ttu-id="dd767-221">Dans l’exemple ci-dessous, un fichier est créé pour chacun des groupes de fichiers qui ont été créés précédemment et chaque fichier est placé sur un disque distinct.</span><span class="sxs-lookup"><span data-stu-id="dd767-221">In the example below, a file is created for each of the filegroups that were created earlier and each file is placed on a separate disk.</span></span>  
  
     <span data-ttu-id="dd767-222">![SQL Server, ajout de fichiers à un groupe de fichiers](../technical-guides/media/d5d5c5df-d483-4f01-8128-f98228de51b9.gif "d5d5c5df-d483-4f01-8128-f98228de51b9")</span><span class="sxs-lookup"><span data-stu-id="dd767-222">![SQL Server, adding files to a filegroup](../technical-guides/media/d5d5c5df-d483-4f01-8128-f98228de51b9.gif "d5d5c5df-d483-4f01-8128-f98228de51b9")</span></span>  
  
## <a name="sample-sql-script-for-adding-filegroups-and-files-to-the-biztalk-messagebox-database"></a><span data-ttu-id="dd767-223">Exemple de script SQL pour l’ajout de fichiers et groupes de fichiers à la base de données MessageBox de BizTalk</span><span class="sxs-lookup"><span data-stu-id="dd767-223">Sample SQL script for adding filegroups and files to the BizTalk MessageBox database</span></span>  
 <span data-ttu-id="dd767-224">L’exemple de script SQL ci-dessous effectue les mêmes tâches qui ont été effectuées manuellement dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="dd767-224">The sample SQL script below performs the same tasks that were completed manually in the previous section.</span></span>  
<span data-ttu-id="dd767-225">Cet exemple de script suppose l’existence de lecteurs logiques distincts G à J. Le script crée des fichiers et groupes de fichiers pour chaque groupe de fichiers et place les fichiers journaux sur le lecteur J.</span><span class="sxs-lookup"><span data-stu-id="dd767-225">This sample script assumes the existence of distinct logical drives G through J. The script creates filegroups and files for each filegroup and places the log files on the J drive.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="dd767-226">Étant donné que SQL Server écrit séquentiellement à ses fichiers journaux, il n’existe aucun avantage de performances réalisé en créant plusieurs fichiers journaux pour une base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="dd767-226">Because SQL Server writes to its log files sequentially, there is no performance advantage realized by creating multiple log files for a SQL Server database.</span></span>  
  
```  
-- Filegroup changes are made using the master database  
USE [master]  
GO  
  
-- Script-wide declarations  
DECLARE @CommandBuffer nvarchar(2048)  
DECLARE @FG1_Path nvarchar(1024)  
DECLARE @FG2_Path nvarchar(1024)  
DECLARE @FG3_Path nvarchar(1024)  
DECLARE @Log_Path nvarchar(1024)  
  
-- Set the default path for all filegroups  
SET @FG1_Path = N'G:\BizTalkMsgBoxDATA\'  
SET @FG2_Path = N'H:\BizTalkMsgBoxDATA\'  
SET @FG3_Path = N'I:\BizTalkMsgBoxDATA\'  
SET @Log_Path = N'J:\BizTalkMsgBoxLog\'  
  
ALTER DATABASE [BizTalkMsgBoxDb] ADD FILEGROUP [BTS_MsgBox_FG1]  
SET @CommandBuffer = N'ALTER DATABASE [BizTalkMsgBoxDb] ADD FILE ( NAME = N''BizTalkMsgBoxDb_FG1'', FILENAME = N''' + @FG1_Path +   
N'BizTalkMsgBoxDb_FG1.ndf'' , SIZE = 102400KB , MAXSIZE = UNLIMITED, FILEGROWTH = 10240KB ) TO FILEGROUP [BTS_MsgBox_FG1]'  
EXECUTE (@CommandBuffer)  
  
ALTER DATABASE [BizTalkMsgBoxDb] ADD FILEGROUP [BTS_MsgBox_FG2]  
SET @CommandBuffer = N'ALTER DATABASE [BizTalkMsgBoxDb] ADD FILE ( NAME = N''BizTalkMsgBoxDb_FG1'', FILENAME = N''' + @FG2_Path +   
N'BizTalkMsgBoxDb_FG2.ndf'' , SIZE = 102400KB , MAXSIZE = UNLIMITED, FILEGROWTH = 10240KB ) TO FILEGROUP [BTS_MsgBox_FG2]'  
EXECUTE (@CommandBuffer)  
  
ALTER DATABASE [BizTalkMsgBoxDb] ADD FILEGROUP [BTS_MsgBox_FG3]  
SET @CommandBuffer = N'ALTER DATABASE [BizTalkMsgBoxDb] ADD FILE ( NAME = N''BizTalkMsgBoxDb_FG1'', FILENAME = N''' + @FG3_Path +   
N'BizTalkMsgBoxDb_FG3.ndf'' , SIZE = 102400KB , MAXSIZE = UNLIMITED, FILEGROWTH = 10240KB ) TO FILEGROUP [BTS_MsgBox_FG3]'  
EXECUTE (@CommandBuffer)  
  
ALTER DATABASE [BizTalkMsgBoxDb] MODIFY FILE ( NAME = N'BizTalkMsgBoxDb_log', SIZE = 10240KB , MAXSIZE = UNLIMITED, FILEGROWTH = 10240KB )  
  
GO -- Completes the previous batch, as necessary  
```  
  
 <span data-ttu-id="dd767-227">L’exemple de script SQL ci-dessous peut être utilisé pour définir un groupe de fichiers particulier en tant que le groupe de fichiers par défaut :</span><span class="sxs-lookup"><span data-stu-id="dd767-227">The sample SQL script below could be used to set a particular filegroup as the default filegroup:</span></span>  
  
```  
USE [BizTalkMsgBoxDb]  
GO  
declare @isdefault bit  
SELECT @isdefault=convert(bit, (status & 0x10)) FROM sysfilegroups WHERE groupname=N'BTS_MsgBox_FG1'  
if(@isdefault=0)  
ALTER DATABASE [BizTalkMsgBoxDb] MODIFY FILEGROUP [BTS_MsgBox_FG1] DEFAULT  
GO  
```  
  
 <span data-ttu-id="dd767-228">L’avantage de script est que les scripts peuvent effectuer plusieurs tâches rapidement et peuvent être reproduites avec précision et réduisent le risque d’erreur humaine.</span><span class="sxs-lookup"><span data-stu-id="dd767-228">The advantage to scripting is that scripts can perform multiple tasks quickly, can be reproduced precisely, and reduce the possibility of human error.</span></span> <span data-ttu-id="dd767-229">L’inconvénient d’un script est que l’exécution d’un script écrit correctement peut entraîner de graves problèmes, lesquels nécessitent les bases de données BizTalk Server être reconfigurée à partir de zéro.</span><span class="sxs-lookup"><span data-stu-id="dd767-229">The disadvantage of scripting is that the execution of an incorrectly written script can potentially cause serious problems that could require the BizTalk Server databases to be re-configured from scratch.</span></span> <span data-ttu-id="dd767-230">Par conséquent, il est extrêmement important que les scripts SQL tels que l’exemple de script répertoriées dans cette rubrique sont soigneusement testé avant d’être exécutées dans un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="dd767-230">Therefore, it is of utmost importance that SQL scripts such as the sample script listed in this topic are thoroughly tested before being executed in a production environment.</span></span>