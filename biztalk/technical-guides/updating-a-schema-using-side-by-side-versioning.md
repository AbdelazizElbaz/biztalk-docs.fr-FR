---
title: "Mise à jour un schéma à l’aide du contrôle de version côte à côte | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a7360ec5-b5e9-40c7-9a7c-965fcc95ddb0
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d3d63b93f665e80f88e2d9e81b2337e7b198b3df
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="updating-a-schema-using-side-by-side-versioning"></a><span data-ttu-id="93dee-102">Mise à jour un schéma à l’aide du contrôle de version côte à côte</span><span class="sxs-lookup"><span data-stu-id="93dee-102">Updating a Schema Using Side-by-Side Versioning</span></span>
<span data-ttu-id="93dee-103">Vous pouvez effectuer le contrôle de version côte à côte avec des schémas.</span><span class="sxs-lookup"><span data-stu-id="93dee-103">You can perform side-by-side versioning with schemas.</span></span> <span data-ttu-id="93dee-104">Vous faire en ajoutant une nouvelle version du schéma à un assembly, la mise à niveau de la version du schéma, tout en laissant le schéma existant (et sa version) inchangée.</span><span class="sxs-lookup"><span data-stu-id="93dee-104">You do so by adding a new version of the schema to an assembly, upgrading the version of the schema, while leaving the existing schema (and its version) unchanged.</span></span>  
  
 <span data-ttu-id="93dee-105">Si vous incrémentez une version de schéma, vous devez mettre à jour la référence au schéma pour les instances de pipeline et les composants de pipeline qui l’utilisent.</span><span class="sxs-lookup"><span data-stu-id="93dee-105">If you increment a schema version, you must update the reference to the schema for any pipeline instances and pipeline components that use it.</span></span> <span data-ttu-id="93dee-106">Vous devez également mettre à jour les mappages qui font référence au schéma (ou créer de nouveaux mappages), ainsi que les orchestrations reposant sur le schéma.</span><span class="sxs-lookup"><span data-stu-id="93dee-106">You must also update the maps that reference the schema (or create new maps) as well as any orchestrations that rely on the schema.</span></span>  
  
 <span data-ttu-id="93dee-107">Si vous annulez le déploiement d’un schéma, la version précédente du schéma, si elle est disponible, devient active.</span><span class="sxs-lookup"><span data-stu-id="93dee-107">If you undeploy a schema, the previous version of the schema, if available, will become active.</span></span>  
  
## <a name="schema-resolution-in-pipelines"></a><span data-ttu-id="93dee-108">Résolution de schémas dans des Pipelines</span><span class="sxs-lookup"><span data-stu-id="93dee-108">Schema Resolution in Pipelines</span></span>  
 <span data-ttu-id="93dee-109">Si vous ajoutez à une application un assembly qui inclut un nouveau schéma avec le même type de message en tant qu’un schéma existant dans le groupe BizTalk, le schéma avec le numéro de version plus récente sera utilisé lors de la résolution de schéma se produit dans les pipelines.</span><span class="sxs-lookup"><span data-stu-id="93dee-109">If you add to an application an assembly that includes a new schema with the same message type as an existing schema in the BizTalk group, the schema with the latest version number will be used when schema resolution occurs in pipelines.</span></span> <span data-ttu-id="93dee-110">Si un type de message fait référence à plusieurs types .NET, cette ambiguïté peut entraîner d’échec d’exécution du pipeline.</span><span class="sxs-lookup"><span data-stu-id="93dee-110">If one message type refers to more than one .NET type, this ambiguity may cause pipeline execution failure.</span></span> <span data-ttu-id="93dee-111">En effet, la recherche de schémas utilise le type de message, l'espace de noms cible et le nom de la racine de l'instance.</span><span class="sxs-lookup"><span data-stu-id="93dee-111">This is because schema lookup uses message type, the target namespace, and root name of the instance.</span></span> <span data-ttu-id="93dee-112">Ce type d’échec peut se produire pour les pipelines dans toute application qui utilise un schéma avec le même type de message que le nouveau schéma.</span><span class="sxs-lookup"><span data-stu-id="93dee-112">This type of failure can occur for pipelines in any application that uses a schema with the same message type as the new schema.</span></span> <span data-ttu-id="93dee-113">Pour plus d’informations sur la résolution de schéma, consultez [résolution de schéma dans les composants de Pipeline](http://go.microsoft.com/fwlink/?LinkID=154207) (http://go.microsoft.com/fwlink/?LinkID=154207) dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] aide.</span><span class="sxs-lookup"><span data-stu-id="93dee-113">For more information about schema resolution, see [Schema Resolution in Pipeline Components](http://go.microsoft.com/fwlink/?LinkID=154207) (http://go.microsoft.com/fwlink/?LinkID=154207) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
 <span data-ttu-id="93dee-114">Le comportement de résolution de schéma pour le désassembleur XML peut nécessiter des modifications supplémentaires après l’ajout d’une nouvelle version d’un schéma côte à côte avec une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="93dee-114">The schema resolution behavior for the XML Disassembler may require additional changes after adding a new version of a schema side by side with an older version.</span></span> <span data-ttu-id="93dee-115">Dans certains cas, vous voudrez coder en dur les références dans les propriétés du désassembleur de pipeline dans le Concepteur de Pipeline à des versions spécifiques des schémas.</span><span class="sxs-lookup"><span data-stu-id="93dee-115">In certain cases, you may want to hard-code references in the pipeline disassembler properties in the Pipeline Designer to specific versions of the schemas.</span></span> <span data-ttu-id="93dee-116">Cela vous permet d’éviter le comportement de résolution dynamique, dans lesquelles le désassembleur XML détermine quels schémas charger à l’aide du type de message dynamiquement détecté lors de l’exécution à partir du message contenu XML.</span><span class="sxs-lookup"><span data-stu-id="93dee-116">This enables you to avoid the dynamic resolution behavior, in which the XML Disassembler determines which schema to load by using the message type dynamically discovered at runtime from the message XML content.</span></span>  
  
## <a name="updating-a-schema-in-an-orchestration"></a><span data-ttu-id="93dee-117">Mise à jour un schéma dans une Orchestration</span><span class="sxs-lookup"><span data-stu-id="93dee-117">Updating a Schema in an Orchestration</span></span>  
 <span data-ttu-id="93dee-118">Lorsque vous modifiez le schéma associé à envoyer plusieurs formes de réception dans une orchestration, vous pouvez apporter des modifications beaucoup plus facile en définissant la propriété de Type de Message pour le message associé à chaque envoi ou réception forme à parties multiples de Type de Message, au lieu de Schéma.</span><span class="sxs-lookup"><span data-stu-id="93dee-118">When you change the schema associated with multiple send and receive shapes in an orchestration, you can make changes much easier by setting the Message Type property for the message associated with each send or receive shape to Multi-part Message Type, rather than Schema.</span></span> <span data-ttu-id="93dee-119">Vous pouvez ensuite définir la propriété de Type pour la partie de message associée à chaque formes pour être le même schéma.</span><span class="sxs-lookup"><span data-stu-id="93dee-119">You can then set the Type property for the message part associated with each shapes to be the same schema.</span></span> <span data-ttu-id="93dee-120">Ce faisant, vous pouvez ensuite modifier le schéma en modifiant la propriété de Type pour chaque partie du message, au lieu de devoir modifier le Type de Message pour chaque forme.</span><span class="sxs-lookup"><span data-stu-id="93dee-120">By so doing, you can subsequently change the schema by changing the Type property for each message part, rather than having to change the Message Type for each shape.</span></span> <span data-ttu-id="93dee-121">Pour plus d’informations sur les modifications plus facile par ce processus, consultez la [8 conseils et astuces pour une meilleure programmation de BizTalk](http://go.microsoft.com/fwlink/?LinkId=101594) le livre blanc (http://go.microsoft.com/fwlink/?LinkId=101594).</span><span class="sxs-lookup"><span data-stu-id="93dee-121">For more information about making changes easier by this process, see the [8 Tips and Tricks for Better BizTalk Programming](http://go.microsoft.com/fwlink/?LinkId=101594) white paper (http://go.microsoft.com/fwlink/?LinkId=101594).</span></span>  
  
## <a name="versioning-schemas"></a><span data-ttu-id="93dee-122">Gestion des versions de schémas</span><span class="sxs-lookup"><span data-stu-id="93dee-122">Versioning Schemas</span></span>  
 <span data-ttu-id="93dee-123">BizTalk Server utilise un schéma à partir de la version la plus récente de l’assembly qui le contient.</span><span class="sxs-lookup"><span data-stu-id="93dee-123">BizTalk Server takes a schema from the most recent version of the assembly containing it.</span></span> <span data-ttu-id="93dee-124">Cela signifie que si vous créez une nouvelle version d’un schéma, la nouvelle version remplace complètement toutes les versions précédentes du schéma.</span><span class="sxs-lookup"><span data-stu-id="93dee-124">This means that if you create a new version of a schema, the new version completely replaces all previous versions of the schema.</span></span> <span data-ttu-id="93dee-125">Cette opération est efficace lorsque les transactions sont de courte durée.</span><span class="sxs-lookup"><span data-stu-id="93dee-125">This works well when transactions are short-lived.</span></span> <span data-ttu-id="93dee-126">Toutefois, les transactions dans la solution de gestion des processus d’entreprise sont de longue durées : une commande peut prendre jusqu'à une année à terminer.</span><span class="sxs-lookup"><span data-stu-id="93dee-126">However, transactions in the Business Process Management solution are long-lived: an order may take up to a year to complete.</span></span>  
  
 <span data-ttu-id="93dee-127">Pour permettre l'emploi de plusieurs versions d'un schéma en cours d'utilisation, chaque schéma de la solution possède un numéro de version contenu dans son espace de noms.</span><span class="sxs-lookup"><span data-stu-id="93dee-127">To allow for the possibility of using multiple versions of a schema being in use, each schema in the solution includes a version number in its namespace.</span></span> <span data-ttu-id="93dee-128">Pipelines BizTalk déterminent le type de message d’un message en fonction de l’espace de noms cible ainsi que le nom du nœud racine défini dans le schéma.</span><span class="sxs-lookup"><span data-stu-id="93dee-128">BizTalk pipelines determine the message type of a message based on the target namespace plus the root node name defined in the schema.</span></span> <span data-ttu-id="93dee-129">Par exemple, l'espace de noms du schéma Order est le suivant :</span><span class="sxs-lookup"><span data-stu-id="93dee-129">For example, the namespace for the Order schema is as follows:</span></span>  
  
```  
http://Microsoft.Samples.BizTalk.SouthridgeVideo.Schemas.Order.v1  
```  
  
 <span data-ttu-id="93dee-130">Étant donné que l’espace de noms identifie le schéma et l’inscription de le permet de numéro de version de l’espace de noms unique pour le schéma, le nouveau schéma sera différent de la version antérieure.</span><span class="sxs-lookup"><span data-stu-id="93dee-130">Because the namespace identifies the schema, and inclusion of the version number makes the namespace unique to the schema, the new schema will be distinct from the older version.</span></span> <span data-ttu-id="93dee-131">Ainsi, le nouveau schéma peut être utilisé sans remplacer l'ancienne version.</span><span class="sxs-lookup"><span data-stu-id="93dee-131">Thus, a new schema can be used without supplanting the old schema.</span></span>  
  
 <span data-ttu-id="93dee-132">La modification de la version du schéma peut affecter les nombreuses parties de votre solution, donc cela doit être planifié à l’avance.</span><span class="sxs-lookup"><span data-stu-id="93dee-132">Changing the schema version can affect many parts of your solution, so this should be planned in advance.</span></span> <span data-ttu-id="93dee-133">Pour plus d’informations sur l’impact des modifications de version de schéma, consultez [résolution de schéma dans les composants de Pipeline](http://go.microsoft.com/fwlink/?LinkID=154207) (http://go.microsoft.com/fwlink/?LinkID=154207) dans [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] aide.</span><span class="sxs-lookup"><span data-stu-id="93dee-133">For more information about the effect of schema version changes, see [Schema Resolution in Pipeline Components](http://go.microsoft.com/fwlink/?LinkID=154207) (http://go.microsoft.com/fwlink/?LinkID=154207) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
 <span data-ttu-id="93dee-134">Lorsque vous modifiez la version des schémas dans une orchestration, utilisez les types de messages à parties multiples.</span><span class="sxs-lookup"><span data-stu-id="93dee-134">When changing the version of schemas in an orchestration, use multipart message types.</span></span> <span data-ttu-id="93dee-135">Cette action entraîne une plus grande flexibilité lorsque les schémas de contrôle de version.</span><span class="sxs-lookup"><span data-stu-id="93dee-135">Doing so will result in greater flexibility when versioning schemas.</span></span> <span data-ttu-id="93dee-136">Pour plus d’informations sur les avantages de l’utilisation de types de messages à parties multiples, consultez Conseil #1, « Toujours utiliser parties multiples Message Types » dans l’article MSDN Magazine [8 conseils et astuces pour une meilleure programmation BizTalk](http://go.microsoft.com/fwlink/?LinkId=101594) (http://go.microsoft.com /fwlink/ ? LinkId = 101594).</span><span class="sxs-lookup"><span data-stu-id="93dee-136">For more information about the advantages of using multipart message types, see tip #1, “Always Use Multi-Part Message Types,” in the MSDN Magazine article [8 Tips And Tricks For Better BizTalk Programming](http://go.microsoft.com/fwlink/?LinkId=101594) (http://go.microsoft.com/fwlink/?LinkId=101594).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="93dee-137">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="93dee-137">See Also</span></span>  
 [<span data-ttu-id="93dee-138">Meilleures pratiques pour la mise à jour des Applications</span><span class="sxs-lookup"><span data-stu-id="93dee-138">Best Practices for Updating Applications</span></span>](../technical-guides/best-practices-for-updating-applications.md)