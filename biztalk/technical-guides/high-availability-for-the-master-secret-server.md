---
title: "Haute disponibilité pour le serveur de secret principal | Documents Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 9b99cb04-61a5-41cc-a409-35897c17b789
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e4c8c18f394b800ffeee9994294b2d2dbf0cb3a1
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="high-availability-for-the-master-secret-server"></a><span data-ttu-id="31570-102">Haute disponibilité pour le serveur de secret principal</span><span class="sxs-lookup"><span data-stu-id="31570-102">High Availability for the Master Secret Server</span></span>
<span data-ttu-id="31570-103">Même si vous n’utilisez pas la fonctionnalité Enterprise Single Sign-On (SSO) pour le mappage des informations d’identification et l’authentification unique, l’authentification unique est un élément essentiel de la Microsoft global [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] infrastructure, car [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] utilise l’authentification unique pour protéger les informations de port configuration.</span><span class="sxs-lookup"><span data-stu-id="31570-103">Even if you do not use the Enterprise Single Sign-On (SSO) functionality for mapping credentials and single sign-on, SSO is a critical part of the overall Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] infrastructure, because [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] uses SSO to help secure information for port configuration.</span></span> <span data-ttu-id="31570-104">Les données de configuration de port sont chiffrées et stockées dans la base de données SSO.</span><span class="sxs-lookup"><span data-stu-id="31570-104">The port configuration data is encrypted and stored in the SSO database.</span></span> <span data-ttu-id="31570-105">Chaque serveur BizTalk server est un service d’authentification unique (ENTSSO.exe) qui est utilisé pour chiffrer et déchiffrer les données de configuration du port.</span><span class="sxs-lookup"><span data-stu-id="31570-105">Each BizTalk server has an SSO service (ENTSSO.exe) that is used for encrypting and decrypting the port configuration data.</span></span>  
  
 <span data-ttu-id="31570-106">Démarre un service d’authentification unique, il récupère la clé de chiffrement à partir du serveur de secret principal.</span><span class="sxs-lookup"><span data-stu-id="31570-106">When an SSO service starts up, it retrieves the encryption key from the master secret server.</span></span> <span data-ttu-id="31570-107">Cette clé de chiffrement est appelée le secret principal.</span><span class="sxs-lookup"><span data-stu-id="31570-107">This encryption key is called the master secret.</span></span> <span data-ttu-id="31570-108">Le serveur de secret principal est un autre service d’authentification unique qui a un sous-service supplémentaire qui gère et distribue le secret principal.</span><span class="sxs-lookup"><span data-stu-id="31570-108">The master secret server is another SSO service that has an additional subservice that maintains and distributes the master secret.</span></span> <span data-ttu-id="31570-109">Après la récupération d’un secret, le service SSO met en cache.</span><span class="sxs-lookup"><span data-stu-id="31570-109">After a master secret is retrieved, the SSO service caches it.</span></span> <span data-ttu-id="31570-110">Toutes les 60 secondes, le service SSO synchronise le secret principal avec le serveur de secret principal.</span><span class="sxs-lookup"><span data-stu-id="31570-110">Every 60 seconds, the SSO service synchronizes the master secret with the master secret server.</span></span>  
  
 <span data-ttu-id="31570-111">Si le serveur de secret principal échoue et que le service SSO détecte la défaillance de l’une de ses intervalles d’actualisation, le service d’authentification unique et toutes les opérations d’exécution en cours d’exécution avant que le serveur a échoué, y compris le déchiffrement des informations d’identification, se poursuivent normalement.</span><span class="sxs-lookup"><span data-stu-id="31570-111">If the master secret server fails, and the SSO service detects the failure in one of its refresh intervals, the SSO service and all run-time operations that were running before the server failed, including decryption of credentials, continue successfully.</span></span> <span data-ttu-id="31570-112">Toutefois, vous ne peut pas chiffrer les données de configuration de port ou de nouvelles informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="31570-112">However, you cannot encrypt new credentials or port configuration data.</span></span> <span data-ttu-id="31570-113">Par conséquent, le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environnement comporte une dépendance sur la disponibilité du serveur de secret principal.</span><span class="sxs-lookup"><span data-stu-id="31570-113">Therefore, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment has a dependency on the availability of the master secret server.</span></span>  
  
## <a name="making-the-master-secret-server-available"></a><span data-ttu-id="31570-114">Obtention d'un serveur de secret principal disponible</span><span class="sxs-lookup"><span data-stu-id="31570-114">Making the Master Secret Server Available</span></span>  
 <span data-ttu-id="31570-115">Pour la disponibilité du système SSO et donc du [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environnement, il est essentiel de sauvegarder le secret principal dès qu’il est généré.</span><span class="sxs-lookup"><span data-stu-id="31570-115">For availability of the SSO system, and therefore of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment, it is critical that you back up the master secret as soon as it is generated.</span></span> <span data-ttu-id="31570-116">Sinon, vous perdez les données que le système d'authentification unique a chiffrées à l'aide de ce secret principal.</span><span class="sxs-lookup"><span data-stu-id="31570-116">If you lose it, you lose the data that the SSO system encrypted by using that master secret.</span></span> <span data-ttu-id="31570-117">Pour plus d’informations sur la sauvegarde du secret, consultez [comment revenir Up the Master Secret](http://go.microsoft.com/fwlink/?LinkID=151934) (http://go.microsoft.com/fwlink/?LinkID=151934) dans [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] aide.</span><span class="sxs-lookup"><span data-stu-id="31570-117">For more information about backing up the master secret, see [How to Back Up the Master Secret](http://go.microsoft.com/fwlink/?LinkID=151934) (http://go.microsoft.com/fwlink/?LinkID=151934) in [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] Help.</span></span>  
  
 <span data-ttu-id="31570-118">Vous pouvez rendre le secret principal disponible de deux manières :</span><span class="sxs-lookup"><span data-stu-id="31570-118">You can make the master secret server available in two ways:</span></span>  
  
-   <span data-ttu-id="31570-119">**Disponibles, mais pas très**.</span><span class="sxs-lookup"><span data-stu-id="31570-119">**Available, but not highly available**.</span></span> <span data-ttu-id="31570-120">Vous pouvez créer un événement de Microsoft System Center Operations Manager pour vous avertir lorsque le serveur de secret principal devient indisponible et vous pouvez promouvoir manuellement un autre serveur d’authentification unique pour le serveur de secret principal et restaurer le secret sur ce serveur.</span><span class="sxs-lookup"><span data-stu-id="31570-120">You can create a Microsoft System Center Operations Manager event to notify you when the master secret server becomes unavailable, and you can then manually promote another SSO server to master secret server and restore the master secret on this server.</span></span>  
  
     <span data-ttu-id="31570-121">Bien que cette configuration n’est pas hautement disponible, elle est suffisante pour la plupart des scénarios et il est cohérent avec la mise à l’échelle des hôtes de réception, envoi et de traitement.</span><span class="sxs-lookup"><span data-stu-id="31570-121">Although this configuration is not highly available, it can be satisfactory for most scenarios and it is consistent with scaling out the receiving, sending, and processing hosts.</span></span>  
  
-   <span data-ttu-id="31570-122">**Haute disponibilité**.</span><span class="sxs-lookup"><span data-stu-id="31570-122">**Highly available**.</span></span> <span data-ttu-id="31570-123">Pour disposer d'un serveur de secret principal redondant, utilisez le clustering Windows sur un cluster de serveur de secret principal distinct ou configurez le serveur de secret principal sur un cluster de bases de données existant.</span><span class="sxs-lookup"><span data-stu-id="31570-123">To provide redundancy for the master secret server, use Windows Clustering on a separate master secret server cluster, or configure the master secret server on an existing database cluster.</span></span> <span data-ttu-id="31570-124">Lorsqu'ils sont installés sur un cluster de base de données, les services fournis par le serveur de secret principal n'utilisent pas beaucoup de ressources et n'ont généralement pas d'impact sur la fonctionnalité de base de données ou sur les performances.</span><span class="sxs-lookup"><span data-stu-id="31570-124">The services provided by the master secret server do not consume many resources, and typically do not affect database functionality or performance when installed on a database cluster.</span></span> <span data-ttu-id="31570-125">Le schéma suivant illustre la façon dont vous pouvez rendre le serveur de secret principal hautement disponible.</span><span class="sxs-lookup"><span data-stu-id="31570-125">The following figure shows how you can make the master secret server highly available.</span></span>  
  
     <span data-ttu-id="31570-126">![Serveur de secret principal hautement disponible](../core/media/tdi-highava-msscluster.gif "TDI_HighAva_MSSCluster")</span><span class="sxs-lookup"><span data-stu-id="31570-126">![Highly Available Master Secret Server](../core/media/tdi-highava-msscluster.gif "TDI_HighAva_MSSCluster")</span></span>  
  
     <span data-ttu-id="31570-127">Bien que cette configuration permette une disponibilité élevée, elle exige de disposer de ressources matérielles supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="31570-127">While this configuration is highly available, it requires additional hardware resources.</span></span> <span data-ttu-id="31570-128">Pour plus d’informations sur les options d’installation de haute disponibilité pour l’authentification unique, consultez [Options d’Installation de l’authentification unique de haute disponibilité](http://go.microsoft.com/fwlink/?LinkId=156838) (http://go.microsoft.com/fwlink/?LinkId=156838) dans [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] aide.</span><span class="sxs-lookup"><span data-stu-id="31570-128">For more information about high-availability installation options for SSO, see [High-Availability SSO Installation Options](http://go.microsoft.com/fwlink/?LinkId=156838) (http://go.microsoft.com/fwlink/?LinkId=156838) in [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] Help.</span></span>  
  
     <span data-ttu-id="31570-129">Cette section comprend des informations détaillées sur la configuration du serveur de secret principal SSO en tant que ressource de cluster à haute disponibilité sur un [!INCLUDE[btsWinSvrNoVersion](../includes/btswinsvrnoversion-md.md)] cluster.</span><span class="sxs-lookup"><span data-stu-id="31570-129">This section includes detailed information about configuring the SSO master secret server as a highly available cluster resource on a [!INCLUDE[btsWinSvrNoVersion](../includes/btswinsvrnoversion-md.md)] cluster.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="31570-130">Pour réduire les ressources matérielles pour une solution hautement disponible, vous pouvez ajouter le serveur de secret principal en tant que ressource de cluster dans votre [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] cluster.</span><span class="sxs-lookup"><span data-stu-id="31570-130">To reduce the hardware resources for a highly available solution, you can add the master secret server as a cluster resource in your [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] cluster.</span></span> <span data-ttu-id="31570-131">Notez que vous ne souhaitez pas acheter supplémentaires [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] licences pour l’installation de l’authentification unique de service sur l’ordinateur exécutant SQL Server.</span><span class="sxs-lookup"><span data-stu-id="31570-131">Note that you do not need to purchase additional [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] licenses to install the SSO service on the computer running the SQL Server.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="31570-132">Dans cette section</span><span class="sxs-lookup"><span data-stu-id="31570-132">In This Section</span></span>  
  
-   [<span data-ttu-id="31570-133">Clustering du serveur de secret principal</span><span class="sxs-lookup"><span data-stu-id="31570-133">Clustering the Master Secret Server</span></span>](../technical-guides/clustering-the-master-secret-server.md)  
  
-   [<span data-ttu-id="31570-134">Désignation d’un nouveau serveur de secret principal manuellement</span><span class="sxs-lookup"><span data-stu-id="31570-134">Designating a New Master Secret Server Manually</span></span>](../technical-guides/designating-a-new-master-secret-server-manually.md)  
  
## <a name="see-also"></a><span data-ttu-id="31570-135">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="31570-135">See Also</span></span>  
 <span data-ttu-id="31570-136">[Planification pour une haute disponibilité2](../technical-guides/planning-for-high-availability2.md) </span><span class="sxs-lookup"><span data-stu-id="31570-136">[Planning for High Availability2](../technical-guides/planning-for-high-availability2.md) </span></span>  
 <span data-ttu-id="31570-137">[Haute disponibilité pour les hôtes BizTalk](../technical-guides/high-availability-for-biztalk-hosts.md) </span><span class="sxs-lookup"><span data-stu-id="31570-137">[High Availability for BizTalk Hosts](../technical-guides/high-availability-for-biztalk-hosts.md) </span></span>  
 [<span data-ttu-id="31570-138">Haute disponibilité pour les bases de données</span><span class="sxs-lookup"><span data-stu-id="31570-138">High Availability for Databases</span></span>](../technical-guides/high-availability-for-databases.md)