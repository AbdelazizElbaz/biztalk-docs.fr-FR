---
title: "Liste de vérification : Gestion et résolution des problèmes de bases de données BizTalk Server | Documents Microsoft"
ms.custom: 
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 58931faf-fc84-46fe-8359-506da94c3756
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5f30dbb156abd7e0c0daa4dd0a8d0082a7d63622
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/01/2017
---
# <a name="checklist-maintaining-and-troubleshooting-biztalk-server-databases"></a>Liste de vérification : Gestion et résolution des problèmes de bases de données BizTalk Server
Bases de données BizTalk Server et leur intégrité sont très importants pour un environnement de messagerie de base de données BizTalk Server réussi. Cette rubrique répertorie les étapes que vous devez suivre lors de la maintenance ou la résolution des problèmes de bases de données BizTalk Server.  
  
-   [Maintenance des bases de données BizTalk Server](../technical-guides/checklist-maintaining-and-troubleshooting-biztalk-server-databases.md#BKMK_MaintainDB)  
  
-   [Résolution des problèmes de bases de données BizTalk Server](../technical-guides/checklist-maintaining-and-troubleshooting-biztalk-server-databases.md#BKMK_Troubleshoot)  
  
<a name="BKMK_MaintainDB"></a>   
## <a name="maintaining-biztalk-server-databases"></a>Maintenance des bases de données BizTalk Server  
  
|Étapes|Référence|  
|-----------|---------------|  
|Désactiver la **mise à jour automatique des statistiques** et **création automatique des statistiques** Options (applicables uniquement aux bases de données MessageBox de BizTalk Server).|**Remarque :** effectués de ces paramètres par défaut dans le cadre de la configuration de BizTalk Server. Vous ne devez pas modifier ces paramètres. <br /><br /> Vous devez désactiver le **création automatique des statistiques** et **mise à jour automatique des statistiques** options. Pour déterminer si ces paramètres sont désactivés, exécutez les procédures stockées suivantes dans SQL Server :<br /><br /> EXEC sp_dboption « BizTalkMsgBoxDB', 'Création automatique des statistiques' exec, sp_dboption « BizTalkMsgBoxDB », « statistiques de mise à jour automatique »<br /><br /> La valeur retournée pour **CurrentSetting** doit avoir la valeur OFF. Si cette valeur est retournée pour **CurrentSetting** a la valeur ON, remplacez-le par OFF en exécutant les procédures stockées suivantes dans SQL Server :<br /><br /> EXEC sp_dboption 'BizTalkMsgBoxDB', 'Création automatique des statistiques', 'off' exec sp_dboption 'BizTalkMsgBoxDB', 'update statistics automatique', 'off'<br /><br /> Pour plus d’informations sur ces paramètres, consultez les articles suivants de la Base de connaissances Microsoft :<br /><br /> -   **917845**:[« Vous rencontrez blocage, blocage des conditions ou autres problèmes SQL Server lorsque vous essayez de vous connecter à la base de données BizTalkMsgBoxDb de BizTalk Server »](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).<br />-   **912262**:[« l’option de statistiques de mise à jour automatique, création automatique des statistiques, et le paramétrage du parallélisme sont désactivés dans l’instance de base de données SQL Server qui héberge la base de données BizTalkMsgBoxDB de BizTalk Server »](http://go.microsoft.com/fwlink/?LinkId=153430) (http://go.microsoft.com/fwlink/?LinkId=153430).|  
|Définir le Max Degree of propriété de parallélisme|**Remarque :** effectués de ces paramètres par défaut dans le cadre de la configuration de BizTalk Server. Vous ne devez pas modifier ces paramètres. <br /><br /> Définir le Max Degree of Parallelism **run_value** et **config_value** propriétés à une valeur d’un (1) sur les instances de SQL Server qui hébergent les bases de données Messagebox de BizTalk Server. Pour vérifier le Max Degree of paramétrage du parallélisme, exécutez la procédure stockée sur le contrôleur de base de données dans SQL Server :<br /><br /> EXEC sp_configure « max degree of parallelism »<br /><br /> Si le **run_value** et **config_value** ne sont pas une valeur d’un (1), exécutez la procédure stockée suivante dans SQL Server :<br /><br /> EXEC sp_configure 'max degree of parallelism', '1' reconfigure avec remplacement<br /><br /> Pour plus d’informations sur les effets de le Max Degree of paramétrage du parallélisme BizTalk Server, consultez les articles suivants de la Base de connaissances Microsoft :<br /><br /> -   **899000**:[« Pour l’instance de SQL Server lorsque vous configurez BizTalk Server le paramétrage du parallélisme »](http://go.microsoft.com/fwlink/?LinkId=153432) (http://go.microsoft.com/fwlink/?LinkId=153432).<br />-   **917845**:[« Vous rencontrez blocage, blocage des conditions ou autres problèmes SQL Server lorsque vous essayez de vous connecter à la base de données BizTalkMsgBoxDb de BizTalk Server »](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).|  
|Déterminer quand vous pouvez reconstruire les index de BizTalk Server|La plupart des index dans les bases de données BizTalk Server est en cluster (ID d’index : 1). La commande DBCC SHOWCONTIG peut être utilisée pour afficher les informations de fragmentation pour les tables dans les bases de données BizTalk Server. Ces index étant basé sur des GUID il est normal que la fragmentation se produise. Si la valeur de densité d’analyse de DBCC SHOWCONTIG est inférieure à 30 %, les index peuvent être reconstruits pendant le temps d’arrêt. De nombreuses tables dans les bases de données BizTalk Server contient les colonnes qui utilisent des définitions de type de données dans laquelle l’indexation en ligne ne peut pas être effectuée. Par conséquent, les index des tables dans les bases de données BizTalk Server ne doivent jamais être reconstruits lors du traitement de données BizTalk. Pour plus d’informations sur la façon de reconstruire les index de BizTalk, consultez l’article suivant de la Base de connaissances Microsoft :<br /><br /> -   **917845**:[« Vous rencontrez blocage, blocage des conditions ou autres problèmes SQL Server lorsque vous essayez de vous connecter à la base de données BizTalkMsgBoxDb de BizTalk Server »](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).<br /><br /> **Remarque :** vous pouvez également utiliser la fonction sys.dm_db_index_physical_stats pour rechercher des informations de fragmentation dans SQL Server. Pour plus d’informations, consultez [sys.dm_db_index_physical_stats (Transact-SQL)](https://docs.microsoft.com/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).|  
|Moniteur de la base de données pour les verrous, des blocs ou des blocages|Il s’agit d’un comportement attendu pour les verrous et les blocs ne se produise sur les bases de données SQL Server utilisées par BizTalk Server. Toutefois, il est peu probable pour que ces verrous ou les blocs se poursuivent pendant une période prolongée. Étendue de blocage et de blocage sur le serveur SQL bases de données utilisées par BizTalk Server sont des indicateurs d’un problème potentiel. En cours connu des causes de blocage et de blocage sur les bases de données SQL Server utilisées par BizTalk Server, consultez l’article suivant de la Base de connaissances Microsoft :<br /><br /> -   **917845**:[« Vous rencontrez blocage, blocage des conditions ou autres problèmes SQL Server lorsque vous essayez de vous connecter à la base de données BizTalkMsgBoxDb de BizTalk Server »](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).|  
|Contrôler la taille des bases de données et des tables|La taille de la base de données Messagebox de BizTalk Server doit être généralement pas dépasser environ 5 Go.  La base de données BizTalkMsgBoxDb ne doit pas être contenant des données et doit être considérée comme une mémoire tampon jusqu'à ce que les données sont traitées ou déplacées vers la base de données BizTalkDTADb. Un environnement avec un serveur principal de SQL Server puissant et plusieurs orchestrations en cours d’exécution longue peut avoir une base de données BizTalkMsgBoxDb plu de 5 Go. Un environnement de volume élevé avec aucune orchestration longue doit avoir une base de données Messagebox de BizTalk Server beaucoup plus petit que 5 Go. La base de données de suivi BizTalk Server peut varier considérablement la taille, mais si les performances des requêtes diminuent considérablement, puis la base de données de suivi est probablement trop grande. En règle générale, une base de données BizTalk Server suivi plu de 15 à 20 Go est considérée comme trop volumineux et peut nuire aux performances. Les problèmes suivants peuvent être imputables à des bases de données BizTalk Server qui sont trop volumineux :<br /><br /> -La base de données Messagebox de BizTalk Server continue à croître alors que la taille des données (pas seulement le fichier journal) reste volumineuse. BizTalk Server prend plus de temps que d’habitude pour traiter même un scénario de flux de message simple.<br />-Les requêtes de concentrateur de groupe prennent plus de temps que d’habitude et peuvent même dépasser le délai.<br />-Le fichier journal de base de données obtient jamais tronqué.<br />-Les travaux de l’Agent SQL de BizTalk s’exécuter plus lentement que la normale.<br />-Certaines tables sont relativement volumineux ou aient trop de lignes par rapport à la normale.<br /><br /> Les bases de données BizTalk Server peuvent devenir volumineux pour plusieurs raisons, notamment :<br /><br /> Travaux de l’Agent SQL BizTalk ne pas en cours d’exécution.<br />-Instances de service ou de message suspendu excessive<br />-Défaillances de disque<br />-Hauts niveaux de suivi<br />-La limitation de BizTalk Server<br />-Médiocres performances de SQL Server<br />-Problèmes de latence réseau<br /><br /> De même, vous pouvez avoir trop de lignes dans une table. Il n’existe aucun numéro de l’ensemble de lignes qui sont trop nombreux. En outre, ce nombre de lignes varie en fonction du type de données est stocké dans la table. Par exemple, un *dta_DebugTrace* table qui comporte plus de 1 million de lignes probablement a trop de lignes. A *HostNameQ_Suspended* table qui comporte plus de 200 000 lignes probablement a trop de lignes.<br /><br /> Assurez-vous que vous savez ce qui est attendu dans votre environnement pour déterminer si un problème de données se produit.|  
|Activer le suivi des modifications sur l’hôte BizTalk Server|Par défaut, le suivi est activé sur l’hôte par défaut. BizTalk requiert le **autoriser le suivi de hôte** option est activée sur un seul hôte. Lorsque le suivi est activé, le suivi des données décoder Service TDDS () déplace le suivi des données d’événement à partir de la base de données Messagebox de BizTalk Server pour la base de données de suivi BizTalk Server. Si aucun hôte de BizTalk Server n’est configurés avec l’option de **autoriser le suivi de hôte** ou si l’hôte de suivi est arrêté, puis le service TDDS ne s’exécutera pas et les tables dans la base de données Messagebox de BizTalk Server TrackingData_x_x augmentera est désactivées. Par conséquent, un hôte BizTalk Server dédié doit être configuré avec l’option de **autoriser suivi de l’hôte**. Pour plus d’informations sur la configuration d’un hôte de suivi dédié, consultez [configuration d’un hôte dédié de suivi](~/technical-guides/configuring-a-dedicated-tracking-host.md). **Remarque :** pour autoriser le service TDDS conserver les nouveaux événements de suivi dans les scénarios à volume élevé, vous pouvez créer plusieurs instances d’hôte de suivi unique, mais pas plus d’un ordinateur hôte doit être configuré pour le suivi.|  
|Utilisez les travaux BizTalk SQL Server Agent corrects|L’exécution de travaux de l’Agent SQL de BizTalk Server sont essentiels pour la gestion des bases de données BizTalk Server et pour maintenir des performances optimales.<br /><br /> -La **sauvegarde de BizTalk Server** travail SQL Server Agent est la seule méthode prise en charge pour sauvegarder les bases de données BizTalk Server. Cette tâche vous oblige à définir toutes les bases de données BizTalk Server à utiliser un mode de récupération complète. Vous devez configurer ce travail pour un environnement BizTalk Server intègre. Vous pouvez utiliser les méthodes de SQL Server pour sauvegarder les bases de données BizTalk Server uniquement si le service SQL Server est arrêté et si tous les processus BizTalk Server sont arrêtés. **Remarque :** pour plus d’informations sur l’utilisation du mode de récupération complète de SQL Server lors de la configuration de la tâche de l’Agent SQL sauvegarde de BizTalk Server, consultez [journaux](http://go.microsoft.com/fwlink/?LinkId=153450) (http://go.Microsoft.com/fwlink/?) LinkId = 153450) ou [sauvegarde en mode de récupération complète](http://go.microsoft.com/fwlink/?LinkId=156509) (http://go.Microsoft.com/fwlink/?) LinkId = 156509).<br />-La **MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb** des travaux de l’Agent SQL Server sont conçu pour s’exécuter indéfiniment. Par conséquent l’historique des travaux SQL Agent peut ne pas indique que ce travail de l’Agent SQL s’est terminée avec succès ; Ce comportement est normal. En cas de panne, le travail redémarre une minute et continuer à s’exécuter sans interruption. Par conséquent, des notifications d’échec pour cette tâche peuvent généralement être ignorées. Si l’historique des travaux pour le travail MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb SQL Server Agent indique que ce travail est constamment échouent et redémarrer plus approfondi de la cause du cycle échec/redémarrage peut être nécessaire.<br />-La **MessageBox_Message_Cleanup_BizTalkMsgBoxDb** travail SQL Server Agent est la seule tâche de ne doit pas être activée manuellement, car il est initialisé par le travail MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb.<br />-La **DTA Purge and Archive** travail SQL Server Agent gère la base de données de suivi BizTalk Server par purge et archivage des messages suivis. Ce travail lit chaque ligne dans la table et compare l’horodatage de chaque ligne afin de déterminer si l’enregistrement doit être supprimé. **Remarque :** lors du dépannage les travaux de SQL Server Agent BizTalk Server, vérifiez que tous les travaux de l’Agent SQL, à l’exception de la MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb sont se termine sans erreurs. <br /><br /> Pour plus d’informations sur les travaux de l’Agent SQL de BizTalk Server dans SQL Server :<br /><br /> -Découvrez [Structure et les travaux de base de données](http://go.microsoft.com/fwlink/?LinkId=153451) (http://go.microsoft.com/fwlink/?LinkId=153451).<br />-Découvrez [travaux de Description de l’Agent SQL Server dans BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153452) (http://go.microsoft.com/fwlink/?LinkId=153452).|  
|Surveiller et arrêter les instances suspendues|Instances de service peuvent être suspendus (peut être repris) ou suspendus (ne peut être repris). Ces instances de service peuvent être la messagerie, Orchestration ou Port. BizTalk Server prend en charge la suppression de ces instances et de terminaison à l’aide de la page Hub du groupe dans la Console Administration de BizTalk Server ou via le script Terminate.vbs. Pour plus d’informations sur le script Terminate.vbs, consultez [suppression de l’Instance de Service suspendue](http://go.microsoft.com/fwlink/?LinkId=153453) (http://go.microsoft.com/fwlink/?LinkId=153453). **Conseil :** vous pouvez également utiliser l’outil de marque de fin pour supprimer les instances suspendues. Le [outil de marque de fin](http://go.microsoft.com/fwlink/?LinkId=151931) est disponible à l’adresse [http://go.microsoft.com/fwlink/?LinkId=151931](http://go.microsoft.com/fwlink/?LinkId=151931). Utilisation de cet outil n’est pas prise en charge par Microsoft et Microsoft n’apporte aucune garantie quant à l’adéquation de ce programme. L'utilisation de ce programme relève de votre seule responsabilité. <br /><br /> Les termes « qu’orphelins » et « zombies » sont souvent interchangeables. Un message orphelin ou zombie est un message qui n’a pas une instance de service associé, généralement parce que l’instance de service est arrêté avant que le message a été reçu. Un service orphelin ou zombie est un service qui n’a pas de tous les messages associés. Pour plus d’informations sur les messages de zombie et de service Voir instances dans BizTalk Server [Zombies dans BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153454) (http://go.microsoft.com/fwlink/?LinkId=153454).|  
|Surveiller les compteurs de performance de la **PhysicalDisk** objet de performance|BizTalk Server effectue un grand nombre de transactions courtes et très rapides à SQL Server en une minute. Si le serveur SQL Server ne peut pas supporter cette activité, vous pouvez rencontrer des problèmes de performances de BizTalk Server. Analyse le **moy. Disque s/lecture**, **moy. Disque s/transfert**, et **moy. Disque s/écriture** des compteurs de l’Analyseur de performances dans le **PhysicalDisk** objet de performance. La valeur optimale est inférieure à 10 ms (millisecondes). Une valeur de 20 ms ou supérieure est considéré comme des performances médiocres.<br /><br />-Pour plus d’informations sur la haute disponibilité de base de données BizTalk Server, consultez [fournir une haute disponibilité pour les bases de données BizTalk Server](../core/providing-high-availability-for-biztalk-server-databases.md).|  
|Suivez les meilleures pratiques pour les bases de données BizTalk Server.|Consultez [meilleures pratiques pour la maintenance des bases de données BizTalk Server](~/technical-guides/best-practices-for-maintaining-biztalk-server-databases.md).|  
  
<a name="BKMK_Troubleshoot"></a>   
## <a name="troubleshooting-biztalk-server-databases"></a>Résolution des problèmes de bases de données BizTalk Server  
 Effectuer les tâches suivantes pour résoudre les problèmes liés aux bases de données BizTalk Server.  
  
|Étapes|Référence|  
|-----------|---------------|  
|Vérifier tous les requis travaux BizTalk SQL Server Agent est activés et en cours d’exécution|Travaux de tous les BizTalk SQL Server Agent à l’exception de la **MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb** travail doit être activé et en cours d’exécution avec succès. Ne désactivez pas n’importe quel autre travail.<br /><br /> Si une défaillance se produit, utilisez le **afficher l’historique** option dans SQL Server pour afficher les informations d’erreur, puis résoudre le problème en conséquence. N’oubliez pas que le **MessageBox _Message_ManageRefCountLog_BizTalkMsgBoxDb** travail SQL Server Agent s’exécute à l’infini. Par conséquent, vous devez uniquement être concernées si l’historique des travaux signale que la tâche échoue en permanence et redémarre.|  
|Utilisez l’outil MsgBoxViewer pour analyser la BizTalk MessageBox et autres bases de données|**Important :** utilisation de cet outil n’est pas prise en charge par Microsoft et Microsoft n’apporte aucune garantie quant à l’adéquation de ce programme. L'utilisation de ce programme relève de votre seule responsabilité. <br /><br /> L’outil MsgBoxViewer est disponible à partir de [http://go.microsoft.com/fwlink/?LinkId=151930](http://go.microsoft.com/fwlink/?LinkId=151930) (http://go.microsoft.com/fwlink/?LinkId=151930). L’outil MsgBoxViewer est utile pour le dépannage, car elle fournit un rapport HTML qui comporte des informations sur le nombre de lignes et les tailles de tables détaillées. Le rapport peut également aider à déterminer si BizTalk Server limite la. En outre, l’outil fournit un instantané des bases de données BizTalk Server et la configuration de BizTalk Server.<br /><br /> Lorsque BizTalk Server s’exécute plus lentement que prévu, exécutez l’outil MsgBoxViewer, cliquez sur pour sélectionner toutes les requêtes sur le **requêtes facultatif** onglet et examinez le rapport HTML généré pour tous les problèmes. Le **rapport Résumé** section répertorie les avertissements en jaunes et les éventuels problèmes en rouge.<br /><br /> En outre, vous pouvez utiliser l’outil MsgBoxViewer pour déterminer quelles tables sont le plus grand et la plupart des enregistrements. Pour obtenir la liste des tables qui en général la croissance la larges et pour obtenir des instructions sur la gestion de ces tables, consultez [grand croissance Tables de base de données du serveur BizTalk](~/technical-guides/large-growing-biztalk-server-database-tables.md).|  
|Utilisez l’outil de marque de fin pour résoudre les problèmes si elle existe, identifié par l’outil MsgBoxViewer|**Important :** utilisation de cet outil n’est pas prise en charge par Microsoft et Microsoft n’apporte aucune garantie quant à l’adéquation de ce programme. L'utilisation de ce programme relève de votre seule responsabilité. <br /><br /> Exécutez l’outil de terminaison disponible à l’adresse [terminateur](http://go.microsoft.com/fwlink/?LinkId=151931) (http://go.microsoft.com/fwlink/?LinkId=151931). Cet outil permet aux utilisateurs de facilement résoudre les problèmes identifiés par l’outil BizTalk MsgBoxViewer. Pour plus d’informations sur la façon dont l’outil de marque de fin s’intègre avec l’outil BizTalk MsgBoxViewer, consultez [à l’aide de BizTalk Terminator pour résoudre les problèmes identifiés par BizTalk MsgBoxViewer](http://go.microsoft.com/fwlink/?LinkId=151932) (http://go.microsoft.com/fwlink/?LinkId=151932).|  
|Examiner les scénarios de blocage|Dans un scénario de blocage, activez le traçage de DBCC sur le serveur SQL Server, afin que les informations de blocage sont écrit dans le journal SQLERROR.<br /><br /> Dans SQL Server, exécutez l’instruction suivante pour activer le traçage de DBCC pour les scénarios de blocage :<br /><br /> DBCC TRACEON (1222, -1)<br /><br /> Vous pouvez également utiliser l’utilitaire PSSDIAG pour collecter des données sur le **Lock : Deadlock** événement et le **Lock : Deadlock Chain** événement. Pour plus d’informations sur l’utilitaire PSSDIAG, consultez [utilitaire de collecte de données PSSDIAG](http://go.microsoft.com/fwlink/?LinkId=153627) (http://go.microsoft.com/fwlink/?LinkId=153627).<br /><br /> La base de données BizTalkMsgBoxDB est une base de données de traitement transactionnel en ligne (OLTP) élevées et haute-transaction. Ces bases de données, certaines un interblocage est attendu, et ce blocage est géré en interne par le moteur de BizTalk Server. Lorsque ce comportement se produit, aucune erreur n’est répertoriés dans les journaux d’erreurs. Lorsque vous examinez une situation de blocage, le blocage que vous recherchez dans la sortie doit être mis en corrélation avec une erreur dans les journaux des événements de blocage.|  
|Recherchez les processus bloqués|Vous pouvez utiliser le moniteur d’activité dans SQL Server pour obtenir l’identificateur de processus serveur (SPID) d’un processus de système de verrouillage. Vous pouvez ensuite exécuter le Générateur de profils SQL pour déterminer l’instruction SQL qui s’exécute dans le SPID de blocage. Vous pouvez utiliser l’utilitaire PSSDIAG pour résoudre les problèmes de verrouillage et de blocage dans SQL Server. L’utilitaire de capture tous les événements Transact-SQL qui ont activé le script de blocage. Pour plus d’informations sur l’utilitaire PSSDIAG, consultez [utilitaire de collecte de données PSSDIAG](http://go.microsoft.com/fwlink/?LinkId=153627) (http://go.microsoft.com/fwlink/?LinkId=153627).<br /><br /> Dans SQL Server, vous pouvez spécifier le **seuil de processus bloqué** paramètre pour déterminer les SPID ou SPID bloquent plus longtemps que le seuil que vous spécifiez. Pour plus d’informations sur l’option de seuil de processus bloqué, consultez [seuil de processus Option bloqué](http://go.microsoft.com/fwlink/?LinkId=153628) (http://go.microsoft.com/fwlink/?LinkId=153628). **Remarque :** lorsque vous rencontrez un problème de verrouillage ou de blocage dans SQL Server, nous vous recommandons de contacter le Support technique de Microsoft. Services de Support technique Microsoft peut vous aider à configurer les options de l’utilitaire PSSDiag correctes.|  
|Supprimer toutes les données indésirables|Si les bases de données ont augmenté de devenir trop volumineux et si les données contenues dans les bases de données ne sera pas nécessaires plus, la méthode recommandée consiste à supprimer les données. **Attention :** n’utilisez pas cette méthode dans les environnements où les données sont critiques ou si les données sont requises. <br /><br /> **Pour purger la base de données BizTalkMsgBox**<br /> 1.  Téléchargez et installez l’outil à la marque de fin [Biztalk Terminator](http://go.microsoft.com/fwlink/?LinkId=220869) (http://go.microsoft.com/fwlink/?LinkId=220869).<br />2.  Suivez les étapes décrites dans la rubrique [comment vider les données manuellement à partir de la base de données MessageBox dans un environnement de Test](http://go.microsoft.com/fwlink/?LinkID=158064) (http://go.microsoft.com/fwlink/?LinkID=158064) pour créer le bts_CleanupMsgbox de procédure stockée dans la base de données MessageBox de BizTalk.<br />3.  Utilisez l’outil de marque de fin pour exécuter la procédure stockée bts_CleanupMsgbox et de purge de la base de données MessageBox de BizTalk. **Avertissement :** n’exécutez pas la procédure stockée bts_CleanupMsgbox sur un serveur de production qui est en cours d’exécution BizTalk Server. Vous devez uniquement exécuter la procédure stockée bts_CleanupMsgbox dans un environnement de test. L'exécution de la procédure stockée bts_CleanupMsgbox dans un environnement de production n'est pas prise en charge.<br />4.  Redémarrez tous les hôtes et les services BizTalk Server.<br /><br /> **Pour purger la base de données BizTalkDTADb**<br /> <ul><li>**Méthode 1**<br /><br /> <ol><li>Sauvegardez toutes les bases de données BizTalk Server.</li><li>Exécutez le **dtasp_PurgeAllCompletedTrackingData** procédure stockée. Pour plus d’informations sur la procédure stockée, consultez [comment vider les données manuellement à partir de la base de données de suivi BizTalk](http://go.microsoft.com/fwlink/?LinkId=153635) (http://go.microsoft.com/fwlink/?LinkId=153635).</li></ol></li><li>**Méthode 2**. Utilisez cette option uniquement si la base de données BizTalkDTADb contient de nombreuses instances incomplètes qui doivent être supprimés.<br /><br /> <ol><li>Sauvegardez toutes les bases de données BizTalk Server.</li><li>Arrêter tous les hôtes BizTalk, les services et les adaptateurs isolés personnalisés. Si vous utilisez HTTP ou l’adaptateur SOAP, redémarrez les services IIS.</li><li>Exécutez le **dtasp_CleanHMData** procédure stockée sur la base de données BizTalkDTADb.</li><li>Redémarrez tous les hôtes et les services BizTalk Server.</li></ol></li></ul> **Remarque :** si vous devez avoir les données de suivi, sauvegardez la base de données BizTalkDTADb, restaurez la base de données vers un autre serveur SQL et puis de purger la base de données BizTalkDTADb d’origine.|  
  
 Si vous souhaitez une aide à analyser les données de MsgBoxViewer ou de la sortie PSSDIAG, contactez le Support technique de Microsoft. Avant de contacter le Support technique, compressez les données MsgBoxViewer, la sortie PSSDIAG et les journaux des événements mis à jour (fichiers .evt). Vous devrez peut-être envoyer que ces fichiers à un serveur BizTalk Server prend en charge l’ingénierie à rebours.
  
## <a name="next"></a>Suivant
  
-   [Bonnes pratiques pour la maintenance des bases de données BizTalk Server](~/technical-guides/best-practices-for-maintaining-biztalk-server-databases.md)  
  
-   [Tables de base de données BizTalk Server avec une croissance importante](~/technical-guides/large-growing-biztalk-server-database-tables.md)  
  
-   [Outils et utilitaires pour la résolution des problèmes](../technical-guides/tools-and-utilities-for-troubleshooting.md)  
  
## <a name="see-also"></a>Voir aussi  
 [Paramètres de SQL Server qui ne doivent pas être modifiés](~/technical-guides/sql-server-settings-that-should-not-be-changed.md)