---
title: "Liste de vérification : Gestion et résolution des problèmes de bases de données BizTalk Server | Documents Microsoft"
ms.custom: 
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 58931faf-fc84-46fe-8359-506da94c3756
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5f30dbb156abd7e0c0daa4dd0a8d0082a7d63622
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/01/2017
---
# <a name="checklist-maintaining-and-troubleshooting-biztalk-server-databases"></a><span data-ttu-id="a21b1-102">Liste de vérification : Gestion et résolution des problèmes de bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="a21b1-102">Checklist: Maintaining and Troubleshooting BizTalk Server Databases</span></span>
<span data-ttu-id="a21b1-103">Bases de données BizTalk Server et leur intégrité sont très importants pour un environnement de messagerie de base de données BizTalk Server réussi.</span><span class="sxs-lookup"><span data-stu-id="a21b1-103">BizTalk Server databases and their health are very important for a successful BizTalk Server database messaging environment.</span></span> <span data-ttu-id="a21b1-104">Cette rubrique répertorie les étapes que vous devez suivre lors de la maintenance ou la résolution des problèmes de bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-104">This topic lists the steps that you must follow when maintaining or troubleshooting the BizTalk Server databases.</span></span>  
  
-   [<span data-ttu-id="a21b1-105">Maintenance des bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="a21b1-105">Maintaining BizTalk Server Databases</span></span>](../technical-guides/checklist-maintaining-and-troubleshooting-biztalk-server-databases.md#BKMK_MaintainDB)  
  
-   [<span data-ttu-id="a21b1-106">Résolution des problèmes de bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="a21b1-106">Troubleshooting BizTalk Server Databases</span></span>](../technical-guides/checklist-maintaining-and-troubleshooting-biztalk-server-databases.md#BKMK_Troubleshoot)  
  
<a name="BKMK_MaintainDB"></a>   
## <a name="maintaining-biztalk-server-databases"></a><span data-ttu-id="a21b1-107">Maintenance des bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="a21b1-107">Maintaining BizTalk Server Databases</span></span>  
  
|<span data-ttu-id="a21b1-108">Étapes</span><span class="sxs-lookup"><span data-stu-id="a21b1-108">Steps</span></span>|<span data-ttu-id="a21b1-109">Référence</span><span class="sxs-lookup"><span data-stu-id="a21b1-109">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="a21b1-110">Désactiver la **mise à jour automatique des statistiques** et **création automatique des statistiques** Options (applicables uniquement aux bases de données MessageBox de BizTalk Server).</span><span class="sxs-lookup"><span data-stu-id="a21b1-110">Disable the **Auto Update Statistics** and **Auto Create Statistics** Options (applicable only to BizTalk Server MessageBox databases).</span></span>|<span data-ttu-id="a21b1-111">**Remarque :** effectués de ces paramètres par défaut dans le cadre de la configuration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-111">**Note:**  These settings are done by default as part of the BizTalk Server configuration.</span></span> <span data-ttu-id="a21b1-112">Vous ne devez pas modifier ces paramètres.</span><span class="sxs-lookup"><span data-stu-id="a21b1-112">You should not make changes to these settings.</span></span> <br /><br /> <span data-ttu-id="a21b1-113">Vous devez désactiver le **création automatique des statistiques** et **mise à jour automatique des statistiques** options.</span><span class="sxs-lookup"><span data-stu-id="a21b1-113">You must disable the **Auto Create Statistics** and the **Auto Update Statistics** options.</span></span> <span data-ttu-id="a21b1-114">Pour déterminer si ces paramètres sont désactivés, exécutez les procédures stockées suivantes dans SQL Server :</span><span class="sxs-lookup"><span data-stu-id="a21b1-114">To determine if these settings are disabled, execute the following stored procedures in SQL Server:</span></span><br /><br /> <span data-ttu-id="a21b1-115">EXEC sp_dboption « BizTalkMsgBoxDB', 'Création automatique des statistiques' exec, sp_dboption « BizTalkMsgBoxDB », « statistiques de mise à jour automatique »</span><span class="sxs-lookup"><span data-stu-id="a21b1-115">exec sp_dboption 'BizTalkMsgBoxDB', 'auto create statistics'                 exec sp_dboption 'BizTalkMsgBoxDB', 'auto update statistics'</span></span><br /><br /> <span data-ttu-id="a21b1-116">La valeur retournée pour **CurrentSetting** doit avoir la valeur OFF.</span><span class="sxs-lookup"><span data-stu-id="a21b1-116">The value returned for **CurrentSetting** should be OFF.</span></span> <span data-ttu-id="a21b1-117">Si cette valeur est retournée pour **CurrentSetting** a la valeur ON, remplacez-le par OFF en exécutant les procédures stockées suivantes dans SQL Server :</span><span class="sxs-lookup"><span data-stu-id="a21b1-117">If this value returned for **CurrentSetting** is ON, change it to OFF by executing the following stored procedures in SQL Server:</span></span><br /><br /> <span data-ttu-id="a21b1-118">EXEC sp_dboption 'BizTalkMsgBoxDB', 'Création automatique des statistiques', 'off' exec sp_dboption 'BizTalkMsgBoxDB', 'update statistics automatique', 'off'</span><span class="sxs-lookup"><span data-stu-id="a21b1-118">exec sp_dboption 'BizTalkMsgBoxDB', 'auto create statistics', 'off'                 exec sp_dboption 'BizTalkMsgBoxDB', 'auto update statistics', 'off'</span></span><br /><br /> <span data-ttu-id="a21b1-119">Pour plus d’informations sur ces paramètres, consultez les articles suivants de la Base de connaissances Microsoft :</span><span class="sxs-lookup"><span data-stu-id="a21b1-119">For more information about these settings see the following Microsoft Knowledge Base articles:</span></span><br /><br /> <span data-ttu-id="a21b1-120">-   **917845**:[« Vous rencontrez blocage, blocage des conditions ou autres problèmes SQL Server lorsque vous essayez de vous connecter à la base de données BizTalkMsgBoxDb de BizTalk Server »](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span><span class="sxs-lookup"><span data-stu-id="a21b1-120">-   **917845**—["You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span></span><br /><span data-ttu-id="a21b1-121">-   **912262**:[« l’option de statistiques de mise à jour automatique, création automatique des statistiques, et le paramétrage du parallélisme sont désactivés dans l’instance de base de données SQL Server qui héberge la base de données BizTalkMsgBoxDB de BizTalk Server »](http://go.microsoft.com/fwlink/?LinkId=153430) (http://go.microsoft.com/fwlink/?LinkId=153430).</span><span class="sxs-lookup"><span data-stu-id="a21b1-121">-   **912262**—["The auto update statistics option, the auto create statistics option, and the Parallelism setting are turned off in the SQL Server database instance that hosts the BizTalk Server BizTalkMsgBoxDB database"](http://go.microsoft.com/fwlink/?LinkId=153430) (http://go.microsoft.com/fwlink/?LinkId=153430).</span></span>|  
|<span data-ttu-id="a21b1-122">Définir le Max Degree of propriété de parallélisme</span><span class="sxs-lookup"><span data-stu-id="a21b1-122">Set the Max Degree of Parallelism property</span></span>|<span data-ttu-id="a21b1-123">**Remarque :** effectués de ces paramètres par défaut dans le cadre de la configuration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-123">**Note:**  These settings are done by default as part of the BizTalk Server configuration.</span></span> <span data-ttu-id="a21b1-124">Vous ne devez pas modifier ces paramètres.</span><span class="sxs-lookup"><span data-stu-id="a21b1-124">You should not make changes to these settings.</span></span> <br /><br /> <span data-ttu-id="a21b1-125">Définir le Max Degree of Parallelism **run_value** et **config_value** propriétés à une valeur d’un (1) sur les instances de SQL Server qui hébergent les bases de données Messagebox de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-125">Set the Max Degree of Parallelism **run_value** and **config_value** properties to a value of one (1) on the SQL Server instances that host the BizTalk Server Messagebox databases.</span></span> <span data-ttu-id="a21b1-126">Pour vérifier le Max Degree of paramétrage du parallélisme, exécutez la procédure stockée sur le contrôleur de base de données dans SQL Server :</span><span class="sxs-lookup"><span data-stu-id="a21b1-126">To check the Max Degree of Parallelism setting, execute the following stored procedure against the Master database in SQL Server:</span></span><br /><br /> <span data-ttu-id="a21b1-127">EXEC sp_configure « max degree of parallelism »</span><span class="sxs-lookup"><span data-stu-id="a21b1-127">exec sp_configure 'max degree of parallelism'</span></span><br /><br /> <span data-ttu-id="a21b1-128">Si le **run_value** et **config_value** ne sont pas une valeur d’un (1), exécutez la procédure stockée suivante dans SQL Server :</span><span class="sxs-lookup"><span data-stu-id="a21b1-128">If the **run_value** and **config_value** are not set to a value of one (1), execute the following stored procedure in SQL Server:</span></span><br /><br /> <span data-ttu-id="a21b1-129">EXEC sp_configure 'max degree of parallelism', '1' reconfigure avec remplacement</span><span class="sxs-lookup"><span data-stu-id="a21b1-129">exec sp_configure 'max degree of parallelism', '1'                 reconfigure with override</span></span><br /><br /> <span data-ttu-id="a21b1-130">Pour plus d’informations sur les effets de le Max Degree of paramétrage du parallélisme BizTalk Server, consultez les articles suivants de la Base de connaissances Microsoft :</span><span class="sxs-lookup"><span data-stu-id="a21b1-130">For more information about how the Max Degree of Parallelism setting affects BizTalk Server, see the following Microsoft Knowledge Base articles:</span></span><br /><br /> <span data-ttu-id="a21b1-131">-   **899000**:[« Pour l’instance de SQL Server lorsque vous configurez BizTalk Server le paramétrage du parallélisme »](http://go.microsoft.com/fwlink/?LinkId=153432) (http://go.microsoft.com/fwlink/?LinkId=153432).</span><span class="sxs-lookup"><span data-stu-id="a21b1-131">-   **899000**—["The Parallelism setting for the instance of SQL Server when you configure BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153432) (http://go.microsoft.com/fwlink/?LinkId=153432).</span></span><br /><span data-ttu-id="a21b1-132">-   **917845**:[« Vous rencontrez blocage, blocage des conditions ou autres problèmes SQL Server lorsque vous essayez de vous connecter à la base de données BizTalkMsgBoxDb de BizTalk Server »](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span><span class="sxs-lookup"><span data-stu-id="a21b1-132">-   **917845**—["You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span></span>|  
|<span data-ttu-id="a21b1-133">Déterminer quand vous pouvez reconstruire les index de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="a21b1-133">Determine when you can rebuild BizTalk Server indexes</span></span>|<span data-ttu-id="a21b1-134">La plupart des index dans les bases de données BizTalk Server est en cluster (ID d’index : 1).</span><span class="sxs-lookup"><span data-stu-id="a21b1-134">Most of the indexes in BizTalk Server databases are clustered (index ID: 1).</span></span> <span data-ttu-id="a21b1-135">La commande DBCC SHOWCONTIG peut être utilisée pour afficher les informations de fragmentation pour les tables dans les bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-135">The DBCC SHOWCONTIG command can be used to display fragmentation information for tables in the BizTalk Server databases.</span></span> <span data-ttu-id="a21b1-136">Ces index étant basé sur des GUID il est normal que la fragmentation se produise.</span><span class="sxs-lookup"><span data-stu-id="a21b1-136">These indexes are GUID-based so it is normal for fragmentation to occur.</span></span> <span data-ttu-id="a21b1-137">Si la valeur de densité d’analyse de DBCC SHOWCONTIG est inférieure à 30 %, les index peuvent être reconstruits pendant le temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="a21b1-137">If the Scan Density value of DBCC SHOWCONTIG is less than 30%, the indexes can be rebuilt during downtime.</span></span> <span data-ttu-id="a21b1-138">De nombreuses tables dans les bases de données BizTalk Server contient les colonnes qui utilisent des définitions de type de données dans laquelle l’indexation en ligne ne peut pas être effectuée.</span><span class="sxs-lookup"><span data-stu-id="a21b1-138">Many tables in the BizTalk Server databases contain columns that use DataType definitions where online indexing cannot be done.</span></span> <span data-ttu-id="a21b1-139">Par conséquent, les index des tables dans les bases de données BizTalk Server ne doivent jamais être reconstruits lors du traitement de données BizTalk.</span><span class="sxs-lookup"><span data-stu-id="a21b1-139">Therefore, the indexes for tables in the BizTalk Server databases should never be rebuilt while BizTalk is processing data.</span></span> <span data-ttu-id="a21b1-140">Pour plus d’informations sur la façon de reconstruire les index de BizTalk, consultez l’article suivant de la Base de connaissances Microsoft :</span><span class="sxs-lookup"><span data-stu-id="a21b1-140">For more information on how to rebuild the BizTalk indexes, see the following Microsoft Knowledge Base article:</span></span><br /><br /> <span data-ttu-id="a21b1-141">-   **917845**:[« Vous rencontrez blocage, blocage des conditions ou autres problèmes SQL Server lorsque vous essayez de vous connecter à la base de données BizTalkMsgBoxDb de BizTalk Server »](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span><span class="sxs-lookup"><span data-stu-id="a21b1-141">-   **917845**—["You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span></span><br /><br /> <span data-ttu-id="a21b1-142">**Remarque :** vous pouvez également utiliser la fonction sys.dm_db_index_physical_stats pour rechercher des informations de fragmentation dans SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-142">**Note:**  You can also use the sys.dm_db_index_physical_stats function to look for fragmentation information in SQL Server.</span></span> <span data-ttu-id="a21b1-143">Pour plus d’informations, consultez [sys.dm_db_index_physical_stats (Transact-SQL)](https://docs.microsoft.com/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="a21b1-143">For more information, see [sys.dm_db_index_physical_stats (Transact-SQL)](https://docs.microsoft.com/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).</span></span>|  
|<span data-ttu-id="a21b1-144">Moniteur de la base de données pour les verrous, des blocs ou des blocages</span><span class="sxs-lookup"><span data-stu-id="a21b1-144">Monitor the database for locks, blocks, or deadlocks</span></span>|<span data-ttu-id="a21b1-145">Il s’agit d’un comportement attendu pour les verrous et les blocs ne se produise sur les bases de données SQL Server utilisées par BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-145">It is an expected behavior for locks and blocks to occur on the SQL Server databases used by BizTalk Server.</span></span> <span data-ttu-id="a21b1-146">Toutefois, il est peu probable pour que ces verrous ou les blocs se poursuivent pendant une période prolongée.</span><span class="sxs-lookup"><span data-stu-id="a21b1-146">However, it is not expected to have these locks or blocks to continue for an extended period of time.</span></span> <span data-ttu-id="a21b1-147">Étendue de blocage et de blocage sur le serveur SQL bases de données utilisées par BizTalk Server sont des indicateurs d’un problème potentiel.</span><span class="sxs-lookup"><span data-stu-id="a21b1-147">Extended blocking and deadlocking on the SQL Server databases used by BizTalk Server are indicators of a potential problem.</span></span> <span data-ttu-id="a21b1-148">En cours connu des causes de blocage et de blocage sur les bases de données SQL Server utilisées par BizTalk Server, consultez l’article suivant de la Base de connaissances Microsoft :</span><span class="sxs-lookup"><span data-stu-id="a21b1-148">For the current known causes of deadlocking and blocking on the SQL Server databases used by BizTalk Server, review the following Microsoft Knowledge Base article:</span></span><br /><br /> <span data-ttu-id="a21b1-149">-   **917845**:[« Vous rencontrez blocage, blocage des conditions ou autres problèmes SQL Server lorsque vous essayez de vous connecter à la base de données BizTalkMsgBoxDb de BizTalk Server »](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span><span class="sxs-lookup"><span data-stu-id="a21b1-149">-   **917845**—["You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span></span>|  
|<span data-ttu-id="a21b1-150">Contrôler la taille des bases de données et des tables</span><span class="sxs-lookup"><span data-stu-id="a21b1-150">Monitor the size of databases and tables</span></span>|<span data-ttu-id="a21b1-151">La taille de la base de données Messagebox de BizTalk Server doit être généralement pas dépasser environ 5 Go.</span><span class="sxs-lookup"><span data-stu-id="a21b1-151">The size of the BizTalk Server Messagebox database should typically be no more than approximately 5GB.</span></span>  <span data-ttu-id="a21b1-152">La base de données BizTalkMsgBoxDb ne doit pas être contenant des données et doit être considérée comme une mémoire tampon jusqu'à ce que les données sont traitées ou déplacées vers la base de données BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="a21b1-152">The BizTalkMsgBoxDb database should not be holding any data, and should be considered a buffer until the data is processed or moved to the BizTalkDTADb database.</span></span> <span data-ttu-id="a21b1-153">Un environnement avec un serveur principal de SQL Server puissant et plusieurs orchestrations en cours d’exécution longue peut avoir une base de données BizTalkMsgBoxDb plu de 5 Go.</span><span class="sxs-lookup"><span data-stu-id="a21b1-153">An environment with a powerful SQL Server backend and numerous long running orchestrations may have a BizTalkMsgBoxDb database larger than 5GB.</span></span> <span data-ttu-id="a21b1-154">Un environnement de volume élevé avec aucune orchestration longue doit avoir une base de données Messagebox de BizTalk Server beaucoup plus petit que 5 Go.</span><span class="sxs-lookup"><span data-stu-id="a21b1-154">A high volume environment with no long-running orchestrations should have a BizTalk Server Messagebox database much smaller than 5GB.</span></span> <span data-ttu-id="a21b1-155">La base de données de suivi BizTalk Server peut varier considérablement la taille, mais si les performances des requêtes diminuent considérablement, puis la base de données de suivi est probablement trop grande.</span><span class="sxs-lookup"><span data-stu-id="a21b1-155">The BizTalk Server tracking database can vary greatly in size but if query performance decreases dramatically, then the tracking database is probably too large.</span></span> <span data-ttu-id="a21b1-156">En règle générale, une base de données BizTalk Server suivi plu de 15 à 20 Go est considérée comme trop volumineux et peut nuire aux performances.</span><span class="sxs-lookup"><span data-stu-id="a21b1-156">As a rule of thumb, a BizTalk Server tracking database larger than 15-20 GB is considered too large and may adversely impact performance.</span></span> <span data-ttu-id="a21b1-157">Les problèmes suivants peuvent être imputables à des bases de données BizTalk Server qui sont trop volumineux :</span><span class="sxs-lookup"><span data-stu-id="a21b1-157">The following issues may be attributable to BizTalk Server databases that are too large:</span></span><br /><br /> <span data-ttu-id="a21b1-158">-La base de données Messagebox de BizTalk Server continue à croître alors que la taille des données (pas seulement le fichier journal) reste volumineuse.</span><span class="sxs-lookup"><span data-stu-id="a21b1-158">-   The BizTalk Server Messagebox database continues to grow while the data size (not just the log file) remains large.</span></span> <span data-ttu-id="a21b1-159">BizTalk Server prend plus de temps que d’habitude pour traiter même un scénario de flux de message simple.</span><span class="sxs-lookup"><span data-stu-id="a21b1-159">BizTalk Server takes a longer time than normal to process even a simple message flow scenario.</span></span><br /><span data-ttu-id="a21b1-160">-Les requêtes de concentrateur de groupe prennent plus de temps que d’habitude et peuvent même dépasser le délai.</span><span class="sxs-lookup"><span data-stu-id="a21b1-160">-   Group Hub queries take a longer time than normal and may even timeout.</span></span><br /><span data-ttu-id="a21b1-161">-Le fichier journal de base de données obtient jamais tronqué.</span><span class="sxs-lookup"><span data-stu-id="a21b1-161">-   The database log file never gets truncated.</span></span><br /><span data-ttu-id="a21b1-162">-Les travaux de l’Agent SQL de BizTalk s’exécuter plus lentement que la normale.</span><span class="sxs-lookup"><span data-stu-id="a21b1-162">-   The BizTalk SQL Agent jobs run slower than normal.</span></span><br /><span data-ttu-id="a21b1-163">-Certaines tables sont relativement volumineux ou aient trop de lignes par rapport à la normale.</span><span class="sxs-lookup"><span data-stu-id="a21b1-163">-   Some tables are considerably large or have too many rows compared to normal.</span></span><br /><br /> <span data-ttu-id="a21b1-164">Les bases de données BizTalk Server peuvent devenir volumineux pour plusieurs raisons, notamment :</span><span class="sxs-lookup"><span data-stu-id="a21b1-164">The BizTalk Server databases can become large for several reasons including:</span></span><br /><br /> <span data-ttu-id="a21b1-165">Travaux de l’Agent SQL BizTalk ne pas en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="a21b1-165">-   BizTalk SQL Agent Jobs not running</span></span><br /><span data-ttu-id="a21b1-166">-Instances de service ou de message suspendu excessive</span><span class="sxs-lookup"><span data-stu-id="a21b1-166">-   Excessive suspended message or service instances</span></span><br /><span data-ttu-id="a21b1-167">-Défaillances de disque</span><span class="sxs-lookup"><span data-stu-id="a21b1-167">-   Disk failures</span></span><br /><span data-ttu-id="a21b1-168">-Hauts niveaux de suivi</span><span class="sxs-lookup"><span data-stu-id="a21b1-168">-   High levels of tracking</span></span><br /><span data-ttu-id="a21b1-169">-La limitation de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="a21b1-169">-   BizTalk Server throttling</span></span><br /><span data-ttu-id="a21b1-170">-Médiocres performances de SQL Server</span><span class="sxs-lookup"><span data-stu-id="a21b1-170">-   Poor SQL Server performance</span></span><br /><span data-ttu-id="a21b1-171">-Problèmes de latence réseau</span><span class="sxs-lookup"><span data-stu-id="a21b1-171">-   Network latency issues</span></span><br /><br /> <span data-ttu-id="a21b1-172">De même, vous pouvez avoir trop de lignes dans une table.</span><span class="sxs-lookup"><span data-stu-id="a21b1-172">Similarly, you can have too many rows in a table.</span></span> <span data-ttu-id="a21b1-173">Il n’existe aucun numéro de l’ensemble de lignes qui sont trop nombreux.</span><span class="sxs-lookup"><span data-stu-id="a21b1-173">There is no set number of rows that are too many.</span></span> <span data-ttu-id="a21b1-174">En outre, ce nombre de lignes varie en fonction du type de données est stocké dans la table.</span><span class="sxs-lookup"><span data-stu-id="a21b1-174">Additionally, this number of rows varies by what kind of data is stored in the table.</span></span> <span data-ttu-id="a21b1-175">Par exemple, un *dta_DebugTrace* table qui comporte plus de 1 million de lignes probablement a trop de lignes.</span><span class="sxs-lookup"><span data-stu-id="a21b1-175">For example, a *dta_DebugTrace* table that has more than 1 million rows probably has too many rows.</span></span> <span data-ttu-id="a21b1-176">A *HostNameQ_Suspended* table qui comporte plus de 200 000 lignes probablement a trop de lignes.</span><span class="sxs-lookup"><span data-stu-id="a21b1-176">A *HostNameQ_Suspended* table that has more than 200,000 rows probably has too many rows.</span></span><br /><br /> <span data-ttu-id="a21b1-177">Assurez-vous que vous savez ce qui est attendu dans votre environnement pour déterminer si un problème de données se produit.</span><span class="sxs-lookup"><span data-stu-id="a21b1-177">Make sure that you know what is expected in your environment to determine whether a data issue is occurring.</span></span>|  
|<span data-ttu-id="a21b1-178">Activer le suivi des modifications sur l’hôte BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="a21b1-178">Enable tracking on BizTalk Server host</span></span>|<span data-ttu-id="a21b1-179">Par défaut, le suivi est activé sur l’hôte par défaut.</span><span class="sxs-lookup"><span data-stu-id="a21b1-179">By default, tracking is enabled on the default host.</span></span> <span data-ttu-id="a21b1-180">BizTalk requiert le **autoriser le suivi de hôte** option est activée sur un seul hôte.</span><span class="sxs-lookup"><span data-stu-id="a21b1-180">BizTalk requires the **Allow Host Tracking** option be checked on a single HOST.</span></span> <span data-ttu-id="a21b1-181">Lorsque le suivi est activé, le suivi des données décoder Service TDDS () déplace le suivi des données d’événement à partir de la base de données Messagebox de BizTalk Server pour la base de données de suivi BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-181">When tracking is enabled, the Tracking Data Decode Service (TDDS) moves the tracking event data from the BizTalk Server Messagebox database to the BizTalk Server tracking database.</span></span> <span data-ttu-id="a21b1-182">Si aucun hôte de BizTalk Server n’est configurés avec l’option de **autoriser le suivi de hôte** ou si l’hôte de suivi est arrêté, puis le service TDDS ne s’exécutera pas et les tables dans la base de données Messagebox de BizTalk Server TrackingData_x_x augmentera est désactivées.</span><span class="sxs-lookup"><span data-stu-id="a21b1-182">If no BizTalk Server hosts are configured with the option to **Allow Host Tracking** or if the tracking host is stopped, then TDDS will not run and the TrackingData_x_x tables in the BizTalk Server Messagebox database will grow unchecked.</span></span> <span data-ttu-id="a21b1-183">Par conséquent, un hôte BizTalk Server dédié doit être configuré avec l’option de **autoriser suivi de l’hôte**.</span><span class="sxs-lookup"><span data-stu-id="a21b1-183">Therefore, a dedicated BizTalk Server host should be configured with the option to **Allow Host Tracking**.</span></span> <span data-ttu-id="a21b1-184">Pour plus d’informations sur la configuration d’un hôte de suivi dédié, consultez [configuration d’un hôte dédié de suivi](~/technical-guides/configuring-a-dedicated-tracking-host.md).</span><span class="sxs-lookup"><span data-stu-id="a21b1-184">For more information about configuring a dedicated tracking host see [Configuring a Dedicated Tracking Host](~/technical-guides/configuring-a-dedicated-tracking-host.md).</span></span> <span data-ttu-id="a21b1-185">**Remarque :** pour autoriser le service TDDS conserver les nouveaux événements de suivi dans les scénarios à volume élevé, vous pouvez créer plusieurs instances d’hôte de suivi unique, mais pas plus d’un ordinateur hôte doit être configuré pour le suivi.</span><span class="sxs-lookup"><span data-stu-id="a21b1-185">**Note:**  To allow TDDS to maintain new tracking events in high volume scenarios, you can create multiple instances of a single tracking host but no more than one host should be configured for tracking.</span></span>|  
|<span data-ttu-id="a21b1-186">Utilisez les travaux BizTalk SQL Server Agent corrects</span><span class="sxs-lookup"><span data-stu-id="a21b1-186">Use the correct BizTalk SQL Server Agent jobs</span></span>|<span data-ttu-id="a21b1-187">L’exécution de travaux de l’Agent SQL de BizTalk Server sont essentiels pour la gestion des bases de données BizTalk Server et pour maintenir des performances optimales.</span><span class="sxs-lookup"><span data-stu-id="a21b1-187">Execution of the BizTalk Server SQL Agent jobs are crucial for managing the BizTalk Server databases and for maintaining optimal performance.</span></span><br /><br /> <span data-ttu-id="a21b1-188">-La **sauvegarde de BizTalk Server** travail SQL Server Agent est la seule méthode prise en charge pour sauvegarder les bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-188">-   The  **Backup BizTalk Server** SQL Server Agent job is the only supported method to back up the BizTalk Server databases.</span></span> <span data-ttu-id="a21b1-189">Cette tâche vous oblige à définir toutes les bases de données BizTalk Server à utiliser un mode de récupération complète.</span><span class="sxs-lookup"><span data-stu-id="a21b1-189">This job requires you to set up all BizTalk Server databases to use a Full Recovery Model.</span></span> <span data-ttu-id="a21b1-190">Vous devez configurer ce travail pour un environnement BizTalk Server intègre.</span><span class="sxs-lookup"><span data-stu-id="a21b1-190">You should configure this job for a healthy BizTalk Server environment.</span></span> <span data-ttu-id="a21b1-191">Vous pouvez utiliser les méthodes de SQL Server pour sauvegarder les bases de données BizTalk Server uniquement si le service SQL Server est arrêté et si tous les processus BizTalk Server sont arrêtés.</span><span class="sxs-lookup"><span data-stu-id="a21b1-191">You can use the SQL Server methods to back up the BizTalk Server databases only if the SQL Server service is stopped and if all BizTalk Server processes are stopped.</span></span> <span data-ttu-id="a21b1-192">**Remarque :** pour plus d’informations sur l’utilisation du mode de récupération complète de SQL Server lors de la configuration de la tâche de l’Agent SQL sauvegarde de BizTalk Server, consultez [journaux](http://go.microsoft.com/fwlink/?LinkId=153450) (http://go.Microsoft.com/fwlink/?) LinkId = 153450) ou [sauvegarde en mode de récupération complète](http://go.microsoft.com/fwlink/?LinkId=156509) (http://go.Microsoft.com/fwlink/?) LinkId = 156509).</span><span class="sxs-lookup"><span data-stu-id="a21b1-192">**Note:**      For more information about using the SQL Server full recovery model when configuring the SQL Agent Backup BizTalk Server job, see [Log Shipping](http://go.microsoft.com/fwlink/?LinkId=153450) (http://go.microsoft.com/fwlink/?LinkId=153450) or [Backup Under the Full Recovery Model](http://go.microsoft.com/fwlink/?LinkId=156509) (http://go.microsoft.com/fwlink/?LinkId=156509).</span></span><br /><span data-ttu-id="a21b1-193">-La **MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb** des travaux de l’Agent SQL Server sont conçu pour s’exécuter indéfiniment.</span><span class="sxs-lookup"><span data-stu-id="a21b1-193">-   The **MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb** SQL Server Agent job is designed to run indefinitely.</span></span> <span data-ttu-id="a21b1-194">Par conséquent l’historique des travaux SQL Agent peut ne pas indique que ce travail de l’Agent SQL s’est terminée avec succès ; Ce comportement est normal.</span><span class="sxs-lookup"><span data-stu-id="a21b1-194">As a result the SQL Agent job history may not indicate that this SQL Agent job has successfully completed; this behavior is by design.</span></span> <span data-ttu-id="a21b1-195">En cas de panne, le travail redémarre une minute et continuer à s’exécuter sans interruption.</span><span class="sxs-lookup"><span data-stu-id="a21b1-195">If there is a failure, the job will restart within 1 minute and continue running unabated.</span></span> <span data-ttu-id="a21b1-196">Par conséquent, des notifications d’échec pour cette tâche peuvent généralement être ignorées.</span><span class="sxs-lookup"><span data-stu-id="a21b1-196">Therefore, failure notifications for this job can typically be ignored.</span></span> <span data-ttu-id="a21b1-197">Si l’historique des travaux pour le travail MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb SQL Server Agent indique que ce travail est constamment échouent et redémarrer plus approfondi de la cause du cycle échec/redémarrage peut être nécessaire.</span><span class="sxs-lookup"><span data-stu-id="a21b1-197">If the job history for the MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb SQL Server Agent job indicates that this job is constantly failing and restarting then further investigation into the cause of the failure/restart cycle may be required.</span></span><br /><span data-ttu-id="a21b1-198">-La **MessageBox_Message_Cleanup_BizTalkMsgBoxDb** travail SQL Server Agent est la seule tâche de ne doit pas être activée manuellement, car il est initialisé par le travail MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb.</span><span class="sxs-lookup"><span data-stu-id="a21b1-198">-   The **MessageBox_Message_Cleanup_BizTalkMsgBoxDb** SQL Server Agent job is the only job that should not be manually enabled because it is initiated by the MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb job.</span></span><br /><span data-ttu-id="a21b1-199">-La **DTA Purge and Archive** travail SQL Server Agent gère la base de données de suivi BizTalk Server par purge et archivage des messages suivis.</span><span class="sxs-lookup"><span data-stu-id="a21b1-199">-   The **DTA Purge and Archive** SQL Server Agent job maintains the BizTalk Server tracking database by purging and archiving tracked messages.</span></span> <span data-ttu-id="a21b1-200">Ce travail lit chaque ligne dans la table et compare l’horodatage de chaque ligne afin de déterminer si l’enregistrement doit être supprimé.</span><span class="sxs-lookup"><span data-stu-id="a21b1-200">This job reads every row in the table and compares the timestamp of each row to determine if the record should be removed.</span></span> <span data-ttu-id="a21b1-201">**Remarque :** lors du dépannage les travaux de SQL Server Agent BizTalk Server, vérifiez que tous les travaux de l’Agent SQL, à l’exception de la MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb sont se termine sans erreurs.</span><span class="sxs-lookup"><span data-stu-id="a21b1-201">**Note:**  When troubleshooting the BizTalk Server SQL Server Agent jobs, verify that all SQL Agent jobs except the MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb are completing without errors.</span></span> <br /><br /> <span data-ttu-id="a21b1-202">Pour plus d’informations sur les travaux de l’Agent SQL de BizTalk Server dans SQL Server :</span><span class="sxs-lookup"><span data-stu-id="a21b1-202">For more information about the BizTalk Server SQL Agent Jobs used in SQL Server:</span></span><br /><br /> <span data-ttu-id="a21b1-203">-Découvrez [Structure et les travaux de base de données](http://go.microsoft.com/fwlink/?LinkId=153451) (http://go.microsoft.com/fwlink/?LinkId=153451).</span><span class="sxs-lookup"><span data-stu-id="a21b1-203">-   See [Database Structure and Jobs](http://go.microsoft.com/fwlink/?LinkId=153451) (http://go.microsoft.com/fwlink/?LinkId=153451).</span></span><br /><span data-ttu-id="a21b1-204">-Découvrez [travaux de Description de l’Agent SQL Server dans BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153452) (http://go.microsoft.com/fwlink/?LinkId=153452).</span><span class="sxs-lookup"><span data-stu-id="a21b1-204">-   See [Description of the SQL Server Agent jobs in BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153452) (http://go.microsoft.com/fwlink/?LinkId=153452).</span></span>|  
|<span data-ttu-id="a21b1-205">Surveiller et arrêter les instances suspendues</span><span class="sxs-lookup"><span data-stu-id="a21b1-205">Monitor and terminate suspended instances</span></span>|<span data-ttu-id="a21b1-206">Instances de service peuvent être suspendus (peut être repris) ou suspendus (ne peut être repris).</span><span class="sxs-lookup"><span data-stu-id="a21b1-206">Service instances can be suspended (resumable) or suspended (not resumable).</span></span> <span data-ttu-id="a21b1-207">Ces instances de service peuvent être la messagerie, Orchestration ou Port.</span><span class="sxs-lookup"><span data-stu-id="a21b1-207">These service instances may be Messaging, Orchestration, or Port.</span></span> <span data-ttu-id="a21b1-208">BizTalk Server prend en charge la suppression de ces instances et de terminaison à l’aide de la page Hub du groupe dans la Console Administration de BizTalk Server ou via le script Terminate.vbs.</span><span class="sxs-lookup"><span data-stu-id="a21b1-208">BizTalk Server accommodates termination and removal of these instances by using the Group Hub page in the BizTalk Server Administration Console or through the use of the Terminate.vbs script.</span></span> <span data-ttu-id="a21b1-209">Pour plus d’informations sur le script Terminate.vbs, consultez [suppression de l’Instance de Service suspendue](http://go.microsoft.com/fwlink/?LinkId=153453) (http://go.microsoft.com/fwlink/?LinkId=153453).</span><span class="sxs-lookup"><span data-stu-id="a21b1-209">For more information about the Terminate.vbs script, see [Removing Suspended Service Instance](http://go.microsoft.com/fwlink/?LinkId=153453) (http://go.microsoft.com/fwlink/?LinkId=153453).</span></span> <span data-ttu-id="a21b1-210">**Conseil :** vous pouvez également utiliser l’outil de marque de fin pour supprimer les instances suspendues.</span><span class="sxs-lookup"><span data-stu-id="a21b1-210">**Tip:**  You can also use the Terminator tool to remove suspended instances.</span></span> <span data-ttu-id="a21b1-211">Le [outil de marque de fin](http://go.microsoft.com/fwlink/?LinkId=151931) est disponible à l’adresse [http://go.microsoft.com/fwlink/?LinkId=151931](http://go.microsoft.com/fwlink/?LinkId=151931).</span><span class="sxs-lookup"><span data-stu-id="a21b1-211">The [Terminator tool](http://go.microsoft.com/fwlink/?LinkId=151931) is available at [http://go.microsoft.com/fwlink/?LinkId=151931](http://go.microsoft.com/fwlink/?LinkId=151931).</span></span> <span data-ttu-id="a21b1-212">Utilisation de cet outil n’est pas prise en charge par Microsoft et Microsoft n’apporte aucune garantie quant à l’adéquation de ce programme.</span><span class="sxs-lookup"><span data-stu-id="a21b1-212">Use of this tool is not supported by Microsoft, and Microsoft makes no guarantees about the suitability of this programs.</span></span> <span data-ttu-id="a21b1-213">L'utilisation de ce programme relève de votre seule responsabilité.</span><span class="sxs-lookup"><span data-stu-id="a21b1-213">Use of this program is entirely at your own risk.</span></span> <br /><br /> <span data-ttu-id="a21b1-214">Les termes « qu’orphelins » et « zombies » sont souvent interchangeables.</span><span class="sxs-lookup"><span data-stu-id="a21b1-214">The terms "orphans” and "zombies" are often used interchangeably.</span></span> <span data-ttu-id="a21b1-215">Un message orphelin ou zombie est un message qui n’a pas une instance de service associé, généralement parce que l’instance de service est arrêté avant que le message a été reçu.</span><span class="sxs-lookup"><span data-stu-id="a21b1-215">An orphaned or zombie message is a message that does not have an associated service instance, typically because the service instance has terminated before the message was received.</span></span> <span data-ttu-id="a21b1-216">Un service orphelin ou zombie est un service qui n’a pas de tous les messages associés.</span><span class="sxs-lookup"><span data-stu-id="a21b1-216">An orphaned or zombie service is a service that does not have any associated messages.</span></span> <span data-ttu-id="a21b1-217">Pour plus d’informations sur les messages de zombie et de service Voir instances dans BizTalk Server [Zombies dans BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153454) (http://go.microsoft.com/fwlink/?LinkId=153454).</span><span class="sxs-lookup"><span data-stu-id="a21b1-217">For more information about zombie messages and service instances in BizTalk Server see [Zombies in BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153454) (http://go.microsoft.com/fwlink/?LinkId=153454).</span></span>|  
|<span data-ttu-id="a21b1-218">Surveiller les compteurs de performance de la **PhysicalDisk** objet de performance</span><span class="sxs-lookup"><span data-stu-id="a21b1-218">Monitor the performance counters of the **PhysicalDisk** performance object</span></span>|<span data-ttu-id="a21b1-219">BizTalk Server effectue un grand nombre de transactions courtes et très rapides à SQL Server en une minute.</span><span class="sxs-lookup"><span data-stu-id="a21b1-219">BizTalk Server makes a large number of short, very quick transactions to SQL Server within one minute.</span></span> <span data-ttu-id="a21b1-220">Si le serveur SQL Server ne peut pas supporter cette activité, vous pouvez rencontrer des problèmes de performances de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-220">If the SQL Server cannot sustain this activity, you may experience BizTalk Server performance issues.</span></span> <span data-ttu-id="a21b1-221">Analyse le **moy. Disque s/lecture**, **moy. Disque s/transfert**, et **moy. Disque s/écriture** des compteurs de l’Analyseur de performances dans le **PhysicalDisk** objet de performance.</span><span class="sxs-lookup"><span data-stu-id="a21b1-221">Monitor the **Avg. Disk sec/Read**, **Avg. Disk sec/Transfer**, and **Avg. Disk sec/Write** performance monitor counters in the **PhysicalDisk** performance object.</span></span> <span data-ttu-id="a21b1-222">La valeur optimale est inférieure à 10 ms (millisecondes).</span><span class="sxs-lookup"><span data-stu-id="a21b1-222">The optimal value is less than 10 ms (milliseconds).</span></span> <span data-ttu-id="a21b1-223">Une valeur de 20 ms ou supérieure est considéré comme des performances médiocres.</span><span class="sxs-lookup"><span data-stu-id="a21b1-223">A value of 20 ms or larger is considered poor performance.</span></span><br /><br /><span data-ttu-id="a21b1-224">-Pour plus d’informations sur la haute disponibilité de base de données BizTalk Server, consultez [fournir une haute disponibilité pour les bases de données BizTalk Server](../core/providing-high-availability-for-biztalk-server-databases.md).</span><span class="sxs-lookup"><span data-stu-id="a21b1-224">-   For more information about BizTalk Server database high availability, see [Providing High Availability for BizTalk Server Databases](../core/providing-high-availability-for-biztalk-server-databases.md).</span></span>|  
|<span data-ttu-id="a21b1-225">Suivez les meilleures pratiques pour les bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-225">Follow best practices for BizTalk Server databases.</span></span>|<span data-ttu-id="a21b1-226">Consultez [meilleures pratiques pour la maintenance des bases de données BizTalk Server](~/technical-guides/best-practices-for-maintaining-biztalk-server-databases.md).</span><span class="sxs-lookup"><span data-stu-id="a21b1-226">See [Best Practices for Maintaining BizTalk Server Databases](~/technical-guides/best-practices-for-maintaining-biztalk-server-databases.md).</span></span>|  
  
<a name="BKMK_Troubleshoot"></a>   
## <a name="troubleshooting-biztalk-server-databases"></a><span data-ttu-id="a21b1-227">Résolution des problèmes de bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="a21b1-227">Troubleshooting BizTalk Server Databases</span></span>  
 <span data-ttu-id="a21b1-228">Effectuer les tâches suivantes pour résoudre les problèmes liés aux bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-228">Perform the following tasks to troubleshoot any issues with BizTalk Server databases.</span></span>  
  
|<span data-ttu-id="a21b1-229">Étapes</span><span class="sxs-lookup"><span data-stu-id="a21b1-229">Steps</span></span>|<span data-ttu-id="a21b1-230">Référence</span><span class="sxs-lookup"><span data-stu-id="a21b1-230">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="a21b1-231">Vérifier tous les requis travaux BizTalk SQL Server Agent est activés et en cours d’exécution</span><span class="sxs-lookup"><span data-stu-id="a21b1-231">Ensure all required BizTalk SQL Server Agent jobs are enabled and running</span></span>|<span data-ttu-id="a21b1-232">Travaux de tous les BizTalk SQL Server Agent à l’exception de la **MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb** travail doit être activé et en cours d’exécution avec succès.</span><span class="sxs-lookup"><span data-stu-id="a21b1-232">All the BizTalk SQL Server Agent jobs except the **MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb** job should be enabled and running successfully.</span></span> <span data-ttu-id="a21b1-233">Ne désactivez pas n’importe quel autre travail.</span><span class="sxs-lookup"><span data-stu-id="a21b1-233">Do not disable any other job.</span></span><br /><br /> <span data-ttu-id="a21b1-234">Si une défaillance se produit, utilisez le **afficher l’historique** option dans SQL Server pour afficher les informations d’erreur, puis résoudre le problème en conséquence.</span><span class="sxs-lookup"><span data-stu-id="a21b1-234">If a failure occurs, use the **View History** option in SQL Server to view the error information, and then troubleshoot the failure accordingly.</span></span> <span data-ttu-id="a21b1-235">N’oubliez pas que le **MessageBox _Message_ManageRefCountLog_BizTalkMsgBoxDb** travail SQL Server Agent s’exécute à l’infini.</span><span class="sxs-lookup"><span data-stu-id="a21b1-235">Remember that the **MessageBox _Message_ManageRefCountLog_BizTalkMsgBoxDb** SQL Server Agent job runs infinitely.</span></span> <span data-ttu-id="a21b1-236">Par conséquent, vous devez uniquement être concernées si l’historique des travaux signale que la tâche échoue en permanence et redémarre.</span><span class="sxs-lookup"><span data-stu-id="a21b1-236">Therefore, you should only be concerned if the job history reports that the job constantly fails and restarts.</span></span>|  
|<span data-ttu-id="a21b1-237">Utilisez l’outil MsgBoxViewer pour analyser la BizTalk MessageBox et autres bases de données</span><span class="sxs-lookup"><span data-stu-id="a21b1-237">Use the MsgBoxViewer tool to analyze the BizTalk MessageBox and other databases</span></span>|<span data-ttu-id="a21b1-238">**Important :** utilisation de cet outil n’est pas prise en charge par Microsoft et Microsoft n’apporte aucune garantie quant à l’adéquation de ce programme.</span><span class="sxs-lookup"><span data-stu-id="a21b1-238">**Important:**  Use of this tool is not supported by Microsoft, and Microsoft makes no guarantees about the suitability of this programs.</span></span> <span data-ttu-id="a21b1-239">L'utilisation de ce programme relève de votre seule responsabilité.</span><span class="sxs-lookup"><span data-stu-id="a21b1-239">Use of this program is entirely at your own risk.</span></span> <br /><br /> <span data-ttu-id="a21b1-240">L’outil MsgBoxViewer est disponible à partir de [http://go.microsoft.com/fwlink/?LinkId=151930](http://go.microsoft.com/fwlink/?LinkId=151930) (http://go.microsoft.com/fwlink/?LinkId=151930).</span><span class="sxs-lookup"><span data-stu-id="a21b1-240">The MsgBoxViewer tool is available from [http://go.microsoft.com/fwlink/?LinkId=151930](http://go.microsoft.com/fwlink/?LinkId=151930) (http://go.microsoft.com/fwlink/?LinkId=151930).</span></span> <span data-ttu-id="a21b1-241">L’outil MsgBoxViewer est utile pour le dépannage, car elle fournit un rapport HTML qui comporte des informations sur le nombre de lignes et les tailles de tables détaillées.</span><span class="sxs-lookup"><span data-stu-id="a21b1-241">The MsgBoxViewer tool is useful for troubleshooting because it provides an HTML report that has detailed information about table sizes and the row count.</span></span> <span data-ttu-id="a21b1-242">Le rapport peut également aider à déterminer si BizTalk Server limite la.</span><span class="sxs-lookup"><span data-stu-id="a21b1-242">The report can also help determine whether BizTalk Server is throttling.</span></span> <span data-ttu-id="a21b1-243">En outre, l’outil fournit un instantané des bases de données BizTalk Server et la configuration de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-243">Additionally, the tool provides a snapshot of the BizTalk Server databases and the BizTalk Server configuration.</span></span><br /><br /> <span data-ttu-id="a21b1-244">Lorsque BizTalk Server s’exécute plus lentement que prévu, exécutez l’outil MsgBoxViewer, cliquez sur pour sélectionner toutes les requêtes sur le **requêtes facultatif** onglet et examinez le rapport HTML généré pour tous les problèmes.</span><span class="sxs-lookup"><span data-stu-id="a21b1-244">When BizTalk Server is running slower than usual, run the MsgBoxViewer tool, click to select all queries on the **Optional Queries** tab, and then review the generated HTML report for any problems.</span></span> <span data-ttu-id="a21b1-245">Le **rapport Résumé** section répertorie les avertissements en jaunes et les éventuels problèmes en rouge.</span><span class="sxs-lookup"><span data-stu-id="a21b1-245">The **Summary Report** section lists warnings in yellow and potential problems in red.</span></span><br /><br /> <span data-ttu-id="a21b1-246">En outre, vous pouvez utiliser l’outil MsgBoxViewer pour déterminer quelles tables sont le plus grand et la plupart des enregistrements.</span><span class="sxs-lookup"><span data-stu-id="a21b1-246">Additionally, you can use the MsgBoxViewer tool to determine which tables are the largest and have the most records.</span></span> <span data-ttu-id="a21b1-247">Pour obtenir la liste des tables qui en général la croissance la larges et pour obtenir des instructions sur la gestion de ces tables, consultez [grand croissance Tables de base de données du serveur BizTalk](~/technical-guides/large-growing-biztalk-server-database-tables.md).</span><span class="sxs-lookup"><span data-stu-id="a21b1-247">For a list of tables that typically grow the larges and for instructions on how to manage those tables, see [Large-growing BizTalk Server Database Tables](~/technical-guides/large-growing-biztalk-server-database-tables.md).</span></span>|  
|<span data-ttu-id="a21b1-248">Utilisez l’outil de marque de fin pour résoudre les problèmes si elle existe, identifié par l’outil MsgBoxViewer</span><span class="sxs-lookup"><span data-stu-id="a21b1-248">Use the Terminator tool to resolve issues, if any, identified by the MsgBoxViewer tool</span></span>|<span data-ttu-id="a21b1-249">**Important :** utilisation de cet outil n’est pas prise en charge par Microsoft et Microsoft n’apporte aucune garantie quant à l’adéquation de ce programme.</span><span class="sxs-lookup"><span data-stu-id="a21b1-249">**Important:**  Use of this tool is not supported by Microsoft, and Microsoft makes no guarantees about the suitability of this programs.</span></span> <span data-ttu-id="a21b1-250">L'utilisation de ce programme relève de votre seule responsabilité.</span><span class="sxs-lookup"><span data-stu-id="a21b1-250">Use of this program is entirely at your own risk.</span></span> <br /><br /> <span data-ttu-id="a21b1-251">Exécutez l’outil de terminaison disponible à l’adresse [terminateur](http://go.microsoft.com/fwlink/?LinkId=151931) (http://go.microsoft.com/fwlink/?LinkId=151931).</span><span class="sxs-lookup"><span data-stu-id="a21b1-251">Run the Terminator tool available at [Terminator](http://go.microsoft.com/fwlink/?LinkId=151931) (http://go.microsoft.com/fwlink/?LinkId=151931).</span></span> <span data-ttu-id="a21b1-252">Cet outil permet aux utilisateurs de facilement résoudre les problèmes identifiés par l’outil BizTalk MsgBoxViewer.</span><span class="sxs-lookup"><span data-stu-id="a21b1-252">This tool enables users to easily resolve any issues identified by the BizTalk MsgBoxViewer tool.</span></span> <span data-ttu-id="a21b1-253">Pour plus d’informations sur la façon dont l’outil de marque de fin s’intègre avec l’outil BizTalk MsgBoxViewer, consultez [à l’aide de BizTalk Terminator pour résoudre les problèmes identifiés par BizTalk MsgBoxViewer](http://go.microsoft.com/fwlink/?LinkId=151932) (http://go.microsoft.com/fwlink/?LinkId=151932).</span><span class="sxs-lookup"><span data-stu-id="a21b1-253">For more information on how the Terminator tool integrates with the BizTalk MsgBoxViewer tool, see [Using BizTalk Terminator to resolve issues identified by BizTalk MsgBoxViewer](http://go.microsoft.com/fwlink/?LinkId=151932) (http://go.microsoft.com/fwlink/?LinkId=151932).</span></span>|  
|<span data-ttu-id="a21b1-254">Examiner les scénarios de blocage</span><span class="sxs-lookup"><span data-stu-id="a21b1-254">Investigate deadlock scenarios</span></span>|<span data-ttu-id="a21b1-255">Dans un scénario de blocage, activez le traçage de DBCC sur le serveur SQL Server, afin que les informations de blocage sont écrit dans le journal SQLERROR.</span><span class="sxs-lookup"><span data-stu-id="a21b1-255">In a deadlock scenario, enable DBCC tracing on the SQL Server so that the deadlock information is written to the SQLERROR log.</span></span><br /><br /> <span data-ttu-id="a21b1-256">Dans SQL Server, exécutez l’instruction suivante pour activer le traçage de DBCC pour les scénarios de blocage :</span><span class="sxs-lookup"><span data-stu-id="a21b1-256">In SQL Server, execute the following statement to enable DBCC tracing for deadlock scenarios:</span></span><br /><br /> <span data-ttu-id="a21b1-257">DBCC TRACEON (1222, -1)</span><span class="sxs-lookup"><span data-stu-id="a21b1-257">DBCC TRACEON (1222,-1)</span></span><br /><br /> <span data-ttu-id="a21b1-258">Vous pouvez également utiliser l’utilitaire PSSDIAG pour collecter des données sur le **Lock : Deadlock** événement et le **Lock : Deadlock Chain** événement.</span><span class="sxs-lookup"><span data-stu-id="a21b1-258">You can also use the PSSDIAG utility to collect data on the **Lock:Deadlock** event and the **Lock:Deadlock Chain** event.</span></span> <span data-ttu-id="a21b1-259">Pour plus d’informations sur l’utilitaire PSSDIAG, consultez [utilitaire de collecte de données PSSDIAG](http://go.microsoft.com/fwlink/?LinkId=153627) (http://go.microsoft.com/fwlink/?LinkId=153627).</span><span class="sxs-lookup"><span data-stu-id="a21b1-259">For more information about the PSSDIAG utility, see [PSSDIAG data collection utility](http://go.microsoft.com/fwlink/?LinkId=153627) (http://go.microsoft.com/fwlink/?LinkId=153627).</span></span><br /><br /> <span data-ttu-id="a21b1-260">La base de données BizTalkMsgBoxDB est une base de données de traitement transactionnel en ligne (OLTP) élevées et haute-transaction.</span><span class="sxs-lookup"><span data-stu-id="a21b1-260">The BizTalkMsgBoxDB database is a high-volume and high-transaction Online Transaction Processing (OLTP) database.</span></span> <span data-ttu-id="a21b1-261">Ces bases de données, certaines un interblocage est attendu, et ce blocage est géré en interne par le moteur de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-261">With such databases, some deadlocking is expected and this deadlocking is handled internally by the BizTalk Server engine.</span></span> <span data-ttu-id="a21b1-262">Lorsque ce comportement se produit, aucune erreur n’est répertoriés dans les journaux d’erreurs.</span><span class="sxs-lookup"><span data-stu-id="a21b1-262">When this behavior occurs, no errors are listed in the error logs.</span></span> <span data-ttu-id="a21b1-263">Lorsque vous examinez une situation de blocage, le blocage que vous recherchez dans la sortie doit être mis en corrélation avec une erreur dans les journaux des événements de blocage.</span><span class="sxs-lookup"><span data-stu-id="a21b1-263">When you investigate a deadlock scenario, the deadlock that you are investigating in the output must be correlated with a deadlock error in the event logs.</span></span>|  
|<span data-ttu-id="a21b1-264">Recherchez les processus bloqués</span><span class="sxs-lookup"><span data-stu-id="a21b1-264">Look for blocked processes</span></span>|<span data-ttu-id="a21b1-265">Vous pouvez utiliser le moniteur d’activité dans SQL Server pour obtenir l’identificateur de processus serveur (SPID) d’un processus de système de verrouillage.</span><span class="sxs-lookup"><span data-stu-id="a21b1-265">You can use Activity Monitor in SQL Server to obtain the server process identifier (SPID) of a locking system process.</span></span> <span data-ttu-id="a21b1-266">Vous pouvez ensuite exécuter le Générateur de profils SQL pour déterminer l’instruction SQL qui s’exécute dans le SPID de blocage.</span><span class="sxs-lookup"><span data-stu-id="a21b1-266">You can then run the SQL Profiler to determine the SQL statement that is executing in the locking SPID.</span></span> <span data-ttu-id="a21b1-267">Vous pouvez utiliser l’utilitaire PSSDIAG pour résoudre les problèmes de verrouillage et de blocage dans SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-267">You can use the PSSDIAG utility to troubleshoot locking and blocking issues in SQL Server.</span></span> <span data-ttu-id="a21b1-268">L’utilitaire de capture tous les événements Transact-SQL qui ont activé le script de blocage.</span><span class="sxs-lookup"><span data-stu-id="a21b1-268">The utility captures all the Transact-SQL events that have the blocking script enabled.</span></span> <span data-ttu-id="a21b1-269">Pour plus d’informations sur l’utilitaire PSSDIAG, consultez [utilitaire de collecte de données PSSDIAG](http://go.microsoft.com/fwlink/?LinkId=153627) (http://go.microsoft.com/fwlink/?LinkId=153627).</span><span class="sxs-lookup"><span data-stu-id="a21b1-269">For more information about the PSSDIAG utility, see [PSSDIAG data collection utility](http://go.microsoft.com/fwlink/?LinkId=153627) (http://go.microsoft.com/fwlink/?LinkId=153627).</span></span><br /><br /> <span data-ttu-id="a21b1-270">Dans SQL Server, vous pouvez spécifier le **seuil de processus bloqué** paramètre pour déterminer les SPID ou SPID bloquent plus longtemps que le seuil que vous spécifiez.</span><span class="sxs-lookup"><span data-stu-id="a21b1-270">In SQL Server, you can specify the **blocked process threshold** setting to determine which SPID or SPIDs are blocking longer than the threshold that you specify.</span></span> <span data-ttu-id="a21b1-271">Pour plus d’informations sur l’option de seuil de processus bloqué, consultez [seuil de processus Option bloqué](http://go.microsoft.com/fwlink/?LinkId=153628) (http://go.microsoft.com/fwlink/?LinkId=153628).</span><span class="sxs-lookup"><span data-stu-id="a21b1-271">For more information about the blocked process threshold option, see [blocked process threshold Option](http://go.microsoft.com/fwlink/?LinkId=153628) (http://go.microsoft.com/fwlink/?LinkId=153628).</span></span> <span data-ttu-id="a21b1-272">**Remarque :** lorsque vous rencontrez un problème de verrouillage ou de blocage dans SQL Server, nous vous recommandons de contacter le Support technique de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a21b1-272">**Note:**  When you experience a locking or blocking issue in SQL Server, we recommend that you contact Microsoft Customer Support Services.</span></span> <span data-ttu-id="a21b1-273">Services de Support technique Microsoft peut vous aider à configurer les options de l’utilitaire PSSDiag correctes.</span><span class="sxs-lookup"><span data-stu-id="a21b1-273">Microsoft Customer Support Services can help you configure the correct PSSDiag utility options.</span></span>|  
|<span data-ttu-id="a21b1-274">Supprimer toutes les données indésirables</span><span class="sxs-lookup"><span data-stu-id="a21b1-274">Delete all unwanted data</span></span>|<span data-ttu-id="a21b1-275">Si les bases de données ont augmenté de devenir trop volumineux et si les données contenues dans les bases de données ne sera pas nécessaires plus, la méthode recommandée consiste à supprimer les données.</span><span class="sxs-lookup"><span data-stu-id="a21b1-275">If the databases have grown to become too large and if the data contained in the databases will not be required any longer, the preferred method is to delete the data.</span></span> <span data-ttu-id="a21b1-276">**Attention :** n’utilisez pas cette méthode dans les environnements où les données sont critiques ou si les données sont requises.</span><span class="sxs-lookup"><span data-stu-id="a21b1-276">**Caution:**  Do not use this method in any environment where the data is business critical or if the data is needed.</span></span> <br /><br /> <span data-ttu-id="a21b1-277">**Pour purger la base de données BizTalkMsgBox**</span><span class="sxs-lookup"><span data-stu-id="a21b1-277">**To purge the BizTalkMsgBox database**</span></span><br /> <span data-ttu-id="a21b1-278">1.  Téléchargez et installez l’outil à la marque de fin [Biztalk Terminator](http://go.microsoft.com/fwlink/?LinkId=220869) (http://go.microsoft.com/fwlink/?LinkId=220869).</span><span class="sxs-lookup"><span data-stu-id="a21b1-278">1.  Download and install the Terminator tool at [Biztalk Terminator](http://go.microsoft.com/fwlink/?LinkId=220869) (http://go.microsoft.com/fwlink/?LinkId=220869).</span></span><br /><span data-ttu-id="a21b1-279">2.  Suivez les étapes décrites dans la rubrique [comment vider les données manuellement à partir de la base de données MessageBox dans un environnement de Test](http://go.microsoft.com/fwlink/?LinkID=158064) (http://go.microsoft.com/fwlink/?LinkID=158064) pour créer le bts_CleanupMsgbox de procédure stockée dans la base de données MessageBox de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="a21b1-279">2.  Follow the steps in the topic [How to Manually Purge Data from the MessageBox Database in a Test Environment](http://go.microsoft.com/fwlink/?LinkID=158064) (http://go.microsoft.com/fwlink/?LinkID=158064) to create the bts_CleanupMsgbox stored procedure in the BizTalk MessageBox database.</span></span><br /><span data-ttu-id="a21b1-280">3.  Utilisez l’outil de marque de fin pour exécuter la procédure stockée bts_CleanupMsgbox et de purge de la base de données MessageBox de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="a21b1-280">3.  Use the Terminator tool to execute the bts_CleanupMsgbox stored procedure and purge the BizTalk MessageBox database.</span></span> <span data-ttu-id="a21b1-281">**Avertissement :** n’exécutez pas la procédure stockée bts_CleanupMsgbox sur un serveur de production qui est en cours d’exécution BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-281">**Warning:**      Do not run the bts_CleanupMsgbox stored procedure on a production server that is running BizTalk Server.</span></span> <span data-ttu-id="a21b1-282">Vous devez uniquement exécuter la procédure stockée bts_CleanupMsgbox dans un environnement de test.</span><span class="sxs-lookup"><span data-stu-id="a21b1-282">You should only run the bts_CleanupMsgbox stored procedure in a test environment.</span></span> <span data-ttu-id="a21b1-283">L'exécution de la procédure stockée bts_CleanupMsgbox dans un environnement de production n'est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="a21b1-283">Running the bts_CleanupMsgbox stored procedure in a production environment is not supported.</span></span><br /><span data-ttu-id="a21b1-284">4.  Redémarrez tous les hôtes et les services BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-284">4.  Restart all hosts and BizTalk Server services.</span></span><br /><br /> <span data-ttu-id="a21b1-285">**Pour purger la base de données BizTalkDTADb**</span><span class="sxs-lookup"><span data-stu-id="a21b1-285">**To purge the BizTalkDTADb database**</span></span><br /> <ul><li><span data-ttu-id="a21b1-286">**Méthode 1**</span><span class="sxs-lookup"><span data-stu-id="a21b1-286">**Method 1**</span></span><br /><br /> <ol><li><span data-ttu-id="a21b1-287">Sauvegardez toutes les bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-287">Back up all BizTalk Server databases.</span></span></li><li><span data-ttu-id="a21b1-288">Exécutez le **dtasp_PurgeAllCompletedTrackingData** procédure stockée.</span><span class="sxs-lookup"><span data-stu-id="a21b1-288">Execute the **dtasp_PurgeAllCompletedTrackingData** stored procedure.</span></span> <span data-ttu-id="a21b1-289">Pour plus d’informations sur la procédure stockée, consultez [comment vider les données manuellement à partir de la base de données de suivi BizTalk](http://go.microsoft.com/fwlink/?LinkId=153635) (http://go.microsoft.com/fwlink/?LinkId=153635).</span><span class="sxs-lookup"><span data-stu-id="a21b1-289">For more information about the stored procedure, see [How to Manually Purge Data from the BizTalk Tracking Database](http://go.microsoft.com/fwlink/?LinkId=153635) (http://go.microsoft.com/fwlink/?LinkId=153635).</span></span></li></ol></li><li><span data-ttu-id="a21b1-290">**Méthode 2**.</span><span class="sxs-lookup"><span data-stu-id="a21b1-290">**Method 2**.</span></span> <span data-ttu-id="a21b1-291">Utilisez cette option uniquement si la base de données BizTalkDTADb contient de nombreuses instances incomplètes qui doivent être supprimés.</span><span class="sxs-lookup"><span data-stu-id="a21b1-291">Use this option only if the BizTalkDTADb database contains many incomplete instances that must be removed.</span></span><br /><br /> <ol><li><span data-ttu-id="a21b1-292">Sauvegardez toutes les bases de données BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-292">Back up all BizTalk Server databases.</span></span></li><li><span data-ttu-id="a21b1-293">Arrêter tous les hôtes BizTalk, les services et les adaptateurs isolés personnalisés.</span><span class="sxs-lookup"><span data-stu-id="a21b1-293">Stop all BizTalk hosts, services, and custom isolated adapters.</span></span> <span data-ttu-id="a21b1-294">Si vous utilisez HTTP ou l’adaptateur SOAP, redémarrez les services IIS.</span><span class="sxs-lookup"><span data-stu-id="a21b1-294">If you use HTTP or the SOAP adapter, restart the IIS services.</span></span></li><li><span data-ttu-id="a21b1-295">Exécutez le **dtasp_CleanHMData** procédure stockée sur la base de données BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="a21b1-295">Execute the **dtasp_CleanHMData** stored procedure on the BizTalkDTADb database.</span></span></li><li><span data-ttu-id="a21b1-296">Redémarrez tous les hôtes et les services BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a21b1-296">Restart all hosts and BizTalk Server services.</span></span></li></ol></li></ul> <span data-ttu-id="a21b1-297">**Remarque :** si vous devez avoir les données de suivi, sauvegardez la base de données BizTalkDTADb, restaurez la base de données vers un autre serveur SQL et puis de purger la base de données BizTalkDTADb d’origine.</span><span class="sxs-lookup"><span data-stu-id="a21b1-297">**Note:**  If you must have the tracking data, back up the BizTalkDTADb database, restore the database to another SQL Server, and then purge the original BizTalkDTADb database.</span></span>|  
  
 <span data-ttu-id="a21b1-298">Si vous souhaitez une aide à analyser les données de MsgBoxViewer ou de la sortie PSSDIAG, contactez le Support technique de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a21b1-298">If you want help analyzing the MsgBoxViewer data or PSSDIAG output, contact Microsoft Customer Support Services.</span></span> <span data-ttu-id="a21b1-299">Avant de contacter le Support technique, compressez les données MsgBoxViewer, la sortie PSSDIAG et les journaux des événements mis à jour (fichiers .evt).</span><span class="sxs-lookup"><span data-stu-id="a21b1-299">Before you contact Customer Support Services, compress the MsgBoxViewer data, the PSSDIAG output, and the updated event logs (.evt files).</span></span> <span data-ttu-id="a21b1-300">Vous devrez peut-être envoyer que ces fichiers à un serveur BizTalk Server prend en charge l’ingénierie à rebours.</span><span class="sxs-lookup"><span data-stu-id="a21b1-300">You may have to send these files to a BizTalk Server support engineer.</span></span>
  
## <a name="next"></a><span data-ttu-id="a21b1-301">Suivant</span><span class="sxs-lookup"><span data-stu-id="a21b1-301">Next</span></span>
  
-   [<span data-ttu-id="a21b1-302">Bonnes pratiques pour la maintenance des bases de données BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="a21b1-302">Best Practices for Maintaining BizTalk Server Databases</span></span>](~/technical-guides/best-practices-for-maintaining-biztalk-server-databases.md)  
  
-   [<span data-ttu-id="a21b1-303">Tables de base de données BizTalk Server avec une croissance importante</span><span class="sxs-lookup"><span data-stu-id="a21b1-303">Large-growing BizTalk Server Database Tables</span></span>](~/technical-guides/large-growing-biztalk-server-database-tables.md)  
  
-   [<span data-ttu-id="a21b1-304">Outils et utilitaires pour la résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="a21b1-304">Tools and Utilities for Troubleshooting</span></span>](../technical-guides/tools-and-utilities-for-troubleshooting.md)  
  
## <a name="see-also"></a><span data-ttu-id="a21b1-305">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a21b1-305">See Also</span></span>  
 [<span data-ttu-id="a21b1-306">Paramètres de SQL Server qui ne doivent pas être modifiés</span><span class="sxs-lookup"><span data-stu-id="a21b1-306">SQL Server Settings That Should Not Be Changed</span></span>](~/technical-guides/sql-server-settings-that-should-not-be-changed.md)