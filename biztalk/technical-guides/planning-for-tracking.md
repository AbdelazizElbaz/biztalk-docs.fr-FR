---
title: Planification pour le suivi | Documents Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 8ffc8573-1b4a-47c7-96ab-0471f43facf5
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c9853fccde9c5fa6e8c223106c8386f19298d0b9
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/20/2017
---
# <a name="planning-for-tracking"></a><span data-ttu-id="0bae8-102">Planification pour le suivi</span><span class="sxs-lookup"><span data-stu-id="0bae8-102">Planning for Tracking</span></span>
<span data-ttu-id="0bae8-103">Suivi des messages est le processus par lequel les parties d’une instance de message, telles que le corps du message, les propriétés de message et les métadonnées sont stockées dans une base de données, généralement à des fins d’archivage.</span><span class="sxs-lookup"><span data-stu-id="0bae8-103">Message tracking is the process by which parts of a message instance, such as the message body, message properties, and metadata are stored in a database, typically for archival purposes.</span></span> <span data-ttu-id="0bae8-104">Parties d’instance de message sont suivies par la suite peuvent être affichés en exécutant des requêtes à partir de la page Hub du groupe dans le [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] console d’Administration.</span><span class="sxs-lookup"><span data-stu-id="0bae8-104">Message instance parts that are tracked can subsequently be viewed by running queries from the Group Hub page in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="0bae8-105">Outre l’accès aux données archivées, vous pouvez également afficher des données en direct, qui peuvent être un outil très utile pour l’identification et résolution des problèmes dans le développement d’un environnement ou de transfert.</span><span class="sxs-lookup"><span data-stu-id="0bae8-105">In addition to accessing archived data, you can also view live data, which can be a helpful tool for identifying and fixing problems in a development or staging environment.</span></span>  
  
 <span data-ttu-id="0bae8-106">Étant donné que le processus de suivi des messages peut être consomme beaucoup de ressources, vous devez parcourir cette rubrique avant de créer votre plan.</span><span class="sxs-lookup"><span data-stu-id="0bae8-106">Since the process of message tracking can be very resource intensive, you should review this topic before creating your plan.</span></span>  
  
 <span data-ttu-id="0bae8-107">Pour plus d’informations sur le suivi, consultez [suivi des activités et](http://go.microsoft.com/fwlink/?LinkId=154187) (http://go.microsoft.com/fwlink/?LinkId=154187).</span><span class="sxs-lookup"><span data-stu-id="0bae8-107">For more information about tracking, see [Health and Activity Tracking](http://go.microsoft.com/fwlink/?LinkId=154187) (http://go.microsoft.com/fwlink/?LinkId=154187).</span></span>  
  
## <a name="configuring-and-enabling-the-dta-purge-and-archive-sql-agent-job"></a><span data-ttu-id="0bae8-108">Configurer et activer le DTA Purge et d’archiver le travail de l’Agent SQL</span><span class="sxs-lookup"><span data-stu-id="0bae8-108">Configuring and Enabling the DTA Purge and Archive SQL Agent Job</span></span>  
 <span data-ttu-id="0bae8-109">Ce travail Archive et purge les anciennes données à partir de la base de données des suivis BizTalk, évitant ainsi que celui-ci ne deviennent trop volumineuses.</span><span class="sxs-lookup"><span data-stu-id="0bae8-109">This job archives and purges old data from the BizTalk Tracking database, thus keeping it from becoming too large.</span></span> <span data-ttu-id="0bae8-110">Ceci est essentiel pour une intégrité [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] système.</span><span class="sxs-lookup"><span data-stu-id="0bae8-110">This is essential for a healthy [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span> <span data-ttu-id="0bae8-111">Une base de données de suivi volumineux commence à affecter les performances de l’hôte de suivi et de tous les autres processus qui interrogent la base de données de suivi.</span><span class="sxs-lookup"><span data-stu-id="0bae8-111">A large tracking database will begin to affect the performance of the tracking host and any other processes that query the tracking database.</span></span>  
  
-   <span data-ttu-id="0bae8-112">**Assurez-vous que le travail de Purge et archivage SQL Agent est correctement configuré, activé et exécution.**</span><span class="sxs-lookup"><span data-stu-id="0bae8-112">**Ensure that the DTA Purge and Archive SQL Agent job is properly configured, enabled, and successfully completing.**</span></span> <span data-ttu-id="0bae8-113">Ce travail n’est pas activé par défaut, car vous devez tout d’abord le configurer pour inclure un répertoire où les fichiers d’archive peuvent être écrite.</span><span class="sxs-lookup"><span data-stu-id="0bae8-113">This job is not enabled by default because you must first configure it to include a directory where the archive files can be written.</span></span>  
  
-   <span data-ttu-id="0bae8-114">**Assurez-vous que le travail est en mesure de purger les données de suivi aussi vite que les données de suivi entrantes sont générées.**</span><span class="sxs-lookup"><span data-stu-id="0bae8-114">**Ensure that the job is able to purge the tracking data as fast as the incoming tracking data is generated.**</span></span> <span data-ttu-id="0bae8-115">Il est acceptable pour le travail se trouve derrière pendant les pics de charge, mais il doit toujours être en mesure de rattraper son retard.</span><span class="sxs-lookup"><span data-stu-id="0bae8-115">It is acceptable for the job to get behind during peak load times, but it should always be able to catch up.</span></span> <span data-ttu-id="0bae8-116">Si le travail de purge prend du retard et n’est jamais en mesure de rattraper son retard, la base de données des suivis BizTalk continuera de croître et performances sera finalement être affectées.</span><span class="sxs-lookup"><span data-stu-id="0bae8-116">If the purge job gets behind and is never able to catch up, the BizTalk Tracking database will continue to grow, and performance will eventually be adversely affected.</span></span>  
  
-   <span data-ttu-id="0bae8-117">**Passez en revue la purge normale et paramètres de purge dur afin de vous conservez les données suffisamment longtemps mais pas trop longues.**</span><span class="sxs-lookup"><span data-stu-id="0bae8-117">**Review the soft purge and hard purge parameters to ensure you are keeping data long enough but not too long.**</span></span> <span data-ttu-id="0bae8-118">Pour plus d’informations sur ces paramètres, consultez [l’archivage et la purge de la base de données de suivi BizTalk](http://go.microsoft.com/fwlink/?LinkID=153816) (http://go.microsoft.com/fwlink/?LinkID=153816).</span><span class="sxs-lookup"><span data-stu-id="0bae8-118">For more information about these parameters see [Archiving and Purging the BizTalk Tracking Database](http://go.microsoft.com/fwlink/?LinkID=153816) (http://go.microsoft.com/fwlink/?LinkID=153816).</span></span>  
  
-   <span data-ttu-id="0bae8-119">**Si vous devez uniquement purger les anciennes données et ne le faites pas archiver tout d’abord, puis modifier l’instruction SQL Agent de la fonction pour appeler la procédure stockée « dtasp_PurgeTrackingDatabase ».**</span><span class="sxs-lookup"><span data-stu-id="0bae8-119">**If you only need to purge the old data and do not need to archive it first, then change the SQL Agent job to call the stored procedure “dtasp_PurgeTrackingDatabase”.**</span></span> <span data-ttu-id="0bae8-120">Ignore l’étape d’archivage et effectue simplement la purge.</span><span class="sxs-lookup"><span data-stu-id="0bae8-120">This skips the archive step, and just does the purge.</span></span> <span data-ttu-id="0bae8-121">Pour plus d’informations sur cette procédure stockée et en modifiant le travail de l’Agent SQL pour l’utiliser, consultez [comment vider les données à partir de la base de données de suivi BizTalk](http://go.microsoft.com/fwlink/?LinkID=153817) (http://go.microsoft.com/fwlink/?LinkID=153817).</span><span class="sxs-lookup"><span data-stu-id="0bae8-121">For more information about this stored procedure and changing the SQL Agent job to use it, see [How to Purge Data from the BizTalk Tracking Database](http://go.microsoft.com/fwlink/?LinkID=153817) (http://go.microsoft.com/fwlink/?LinkID=153817).</span></span>  
  
-   <span data-ttu-id="0bae8-122">**Si vous avez besoin de conserver la base de données des suivis BizTalk les fichiers d’archive, assurez-vous que vous disposez d’un processus en place pour restaurer et de les utiliser avec succès.**</span><span class="sxs-lookup"><span data-stu-id="0bae8-122">**If you need to keep the BizTalk Tracking database archive files, ensure that you have a process in place to successfully restore and use them.**</span></span>  
  
-   <span data-ttu-id="0bae8-123">**Si vous rencontrez des problèmes de performances qui sont momentanément résolus en supprimant la base de données de suivi BizTalk, et que vous souhaitez configurer BizTalk pour collecter des informations de suivi n’est plus, vous souhaiterez envisager de désactiver le suivi global.**</span><span class="sxs-lookup"><span data-stu-id="0bae8-123">**If you are having performance issues that are momentarily addressed by purging the BizTalk tracking database, and you want to configure BizTalk to no longer collect tracking information, you may want to consider turning off global tracking.**</span></span> <span data-ttu-id="0bae8-124">Pour plus d’informations sur la façon de désactiver le suivi global, voir la rubrique [la désactivation du suivi Global](http://go.microsoft.com/fwlink/?LinkID=154193) (http://go.microsoft.com/fwlink/?LinkID=154193).</span><span class="sxs-lookup"><span data-stu-id="0bae8-124">For information about how to turn off global tracking, see the topic [How to Turn Off Global Tracking](http://go.microsoft.com/fwlink/?LinkID=154193) (http://go.microsoft.com/fwlink/?LinkID=154193).</span></span>  
  
## <a name="creating-a-dedicated-tracking-host"></a><span data-ttu-id="0bae8-125">Création d’un hôte de suivi dédié</span><span class="sxs-lookup"><span data-stu-id="0bae8-125">Creating a Dedicated Tracking Host</span></span>  
 <span data-ttu-id="0bae8-126">Lorsque l’option à **autoriser le suivi des hôtes** est activée pour un ordinateur hôte dans la console Administration de BizTalk Server, les instances de cet hôte s’exécutera le suivi des données décoder Service TDDS () pour déplacer les données suivies à partir de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox base de données à la base de données des suivis BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0bae8-126">When the option to **Allow Host Tracking** is enabled for a host in the BizTalk Server Administration console, instances of that host will run the Tracking Data Decode Service (TDDS) to move tracked data from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database to the BizTalk Tracking database.</span></span> <span data-ttu-id="0bae8-127">Étant donné que le service TDDS peut consommer beaucoup de ressources, envisagez de créer un hôte de suivi « dédié » pour lequel le **autoriser le suivi de hôte** est activée et qui ne s’exécute pas n’importe quel autre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] processus (tels que des cartes ou orchestrations).</span><span class="sxs-lookup"><span data-stu-id="0bae8-127">Since TDDS may be resource intensive, consider creating a "dedicated" tracking host for which the **Allow Host Tracking** option is enabled and which does not run any other [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] processes (such as adapters or orchestrations).</span></span> <span data-ttu-id="0bae8-128">Si votre groupe BizTalk contient plusieurs serveurs BizTalk, il est également considéré comme une meilleure pratique de créer une instance de cet hôte sur chaque serveur dans le groupe pour fournir une haute disponibilité pour le service TDDS.</span><span class="sxs-lookup"><span data-stu-id="0bae8-128">If your BizTalk group contains more than one BizTalk server, it is also considered a best practice to create an instance of this host on each server in the group to provide high availability for TDDS.</span></span>  
  
## <a name="testing-to-measure-maximum-sustainable-tracking-throughput"></a><span data-ttu-id="0bae8-129">Test pour mesurer le débit de suivi maximal acceptable</span><span class="sxs-lookup"><span data-stu-id="0bae8-129">Testing to Measure Maximum Sustainable Tracking Throughput</span></span>  
 <span data-ttu-id="0bae8-130">Suivi de message plus long est une activité gourmandes en ressources et si pas correctement gérés peut avoir un effet très néfaste sur les performances de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environnement.</span><span class="sxs-lookup"><span data-stu-id="0bae8-130">Extensive message tracking is a very resource intensive activity and if not properly managed can have an extremely adverse effect on the performance of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span> <span data-ttu-id="0bae8-131">Par conséquent, vous devez mesurer le débit de suivi maximal acceptable pour votre [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environnement pour vous assurer que le système est durable et s’exécutera indéfiniment à un débit de message donné.</span><span class="sxs-lookup"><span data-stu-id="0bae8-131">Therefore, you should measure maximum sustainable tracking throughput for your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment to ensure that the system is sustainable and will run indefinitely at a given message flow rate.</span></span> <span data-ttu-id="0bae8-132">Pour plus d’informations sur la mesure de débit de suivi maximal acceptable, consultez [mesure de débit maximal acceptable de suivi](http://go.microsoft.com/fwlink/?LinkID=153815) (http://go.microsoft.com/fwlink/?LinkID=153815).</span><span class="sxs-lookup"><span data-stu-id="0bae8-132">For more information about measuring maximum sustainable tracking throughput, see [Measuring Maximum Sustainable Tracking Throughput](http://go.microsoft.com/fwlink/?LinkID=153815) (http://go.microsoft.com/fwlink/?LinkID=153815).</span></span>  
  
##  <span data-ttu-id="0bae8-133"><a name="BKMK_TrackingBP"></a>Meilleures pratiques pour le suivi</span><span class="sxs-lookup"><span data-stu-id="0bae8-133"><a name="BKMK_TrackingBP"></a> Best Practices for Tracking</span></span>  
  
-   <span data-ttu-id="0bae8-134">**Déterminer les informations que vous devez suivre lors de la planification** : vous devez choisir lors de la planification prépare les informations que vous avez besoin pour effectuer le suivi, afin qu’une fois que vous déployez le projet vous pouvez définir les options de suivi et limiter la quantité de données suivies à vous donner uniquement les informations que vous avez besoin.</span><span class="sxs-lookup"><span data-stu-id="0bae8-134">**Determine the information you need to track during planning** : You should decide during the planning stages which information you need to track, so that after you deploy the project you can set the tracking options and limit the amount of tracked data to give you only the information you need.</span></span>  
  
-   <span data-ttu-id="0bae8-135">**Ne suivez pas tous les messages**: nous vous recommandons de pas suivre tous les messages, car chaque fois qu’un message est couvertes, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] effectue une autre copie.</span><span class="sxs-lookup"><span data-stu-id="0bae8-135">**Do not track all messages**: We recommend that you not track all messages, because each time a message is touched, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] makes another copy.</span></span> <span data-ttu-id="0bae8-136">Vous pouvez limiter à la place de la portée en effectuant le suivi d’un port spécifique uniquement.</span><span class="sxs-lookup"><span data-stu-id="0bae8-136">You can instead narrow the scope by tracking only a specific port.</span></span> <span data-ttu-id="0bae8-137">Cela permet d’optimiser les performances de votre système et de conserver les bases de données ne soit pas encombré.</span><span class="sxs-lookup"><span data-stu-id="0bae8-137">This helps to maximize the performance of your system and to keep the databases uncluttered.</span></span>  
  
-   <span data-ttu-id="0bae8-138">**Définition du suivi sur les ports d’envoi et ports au lieu d’un pipeline de réception**: Si vous définissez des options de suivi sur les pipelines, vous allez également définir les options de suivi global pour tous les ports qui utilise le pipeline.</span><span class="sxs-lookup"><span data-stu-id="0bae8-138">**Set tracking on send ports and receive ports instead of on a pipeline**: If you set tracking options on pipelines, you will also set the tracking options globally for every port that uses the pipeline.</span></span> <span data-ttu-id="0bae8-139">Cela peut à son tour entraîner beaucoup plus de données en cours de suivi que vous avez l’intention, qui ralentit les performances du système.</span><span class="sxs-lookup"><span data-stu-id="0bae8-139">This in turn may result in far more data being tracked than you intend, which will slow system performance.</span></span> <span data-ttu-id="0bae8-140">Au lieu de cela, vous pouvez définir les options de suivi de l’envoi de ports et les ports de réception.</span><span class="sxs-lookup"><span data-stu-id="0bae8-140">Instead, you can set tracking options on send ports and receive ports.</span></span>  
  
-   <span data-ttu-id="0bae8-141">**Prendre en compte différents facteurs dès que la taille de la base de données des suivis BizTalk**:</span><span class="sxs-lookup"><span data-stu-id="0bae8-141">**Take into account various factors when you size the BizTalk Tracking database**:</span></span>  
  
    -   <span data-ttu-id="0bae8-142">Lors du redimensionnement de la base de données des suivis BizTalk, compte des facteurs de SQL Server, tels que la taille de l’index, en ajoutant un multiplicateur d’urgence pour vos calculs.</span><span class="sxs-lookup"><span data-stu-id="0bae8-142">When sizing the BizTalk Tracking database, account for SQL Server factors, such as index size, by adding a contingency multiplier to your calculations.</span></span>  
  
    -   <span data-ttu-id="0bae8-143">Lors de la détermination de la taille des messages dans la base de données des suivis BizTalk, ajoutez la taille moyenne du contexte de message à la taille de message s’il est important par rapport à la taille du message.</span><span class="sxs-lookup"><span data-stu-id="0bae8-143">When determining the size of messages in the BizTalk Tracking database, add the average size of the message context to the message size if it is significant compared to the message size.</span></span>  
  
    -   <span data-ttu-id="0bae8-144">Pour limiter la taille des messages dans la base de données des suivis BizTalk, limitez le nombre de propriétés que vous promouvez.</span><span class="sxs-lookup"><span data-stu-id="0bae8-144">To limit the size of messages in the BizTalk Tracking database, limit the number of properties that you promote.</span></span> <span data-ttu-id="0bae8-145">Vous devez utilisez promu uniquement des propriétés si vous avez besoin pour le routage, sinon utilisez les champs distinctifs.</span><span class="sxs-lookup"><span data-stu-id="0bae8-145">You should only use promoted properties if you need them for routing purposes, otherwise use distinguished fields.</span></span>  
  
    -   <span data-ttu-id="0bae8-146">Si l’orchestration **forme début et fin** est activée, prenez en compte un événement de début et de fin pour chaque forme de chaque instance d’orchestration est enregistré dans la base de données des suivis BizTalk.</span><span class="sxs-lookup"><span data-stu-id="0bae8-146">If the orchestration **Shape start and end** option is enabled, take into account that a start and stop event for each shape in each orchestration instance is saved in the BizTalk Tracking database.</span></span>